(self.webpackChunkweb=self.webpackChunkweb||[]).push([[6830],{"./src/screens/tinygrail/clipboard/btn/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.filter.js");var n=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(r("react"));var s=r("./src/components/index.ts"),o=r("./src/utils/index.ts"),l=r("./src/utils/decorators/index.ts"),i=r("./src/screens/tinygrail/clipboard/btn/styles.ts"),a=r("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var r=t.$,n=(0,i.memoStyles)(),l=r.list.list.filter((function(e){return!!e.icoId})).map((function(e){return e.icoId}));return l.length?(0,a.jsx)(s.Flex,{style:n.wrap,justify:"center",children:(0,a.jsx)(s.Button,{style:n.btn,type:"bid",onPress:function(){(0,o.confirm)("对列表中 "+l.length+" 个ICO角色进行注资各5000, 确定?",(function(){return r.batchICO(l)}),"小圣杯助手")},children:"一键注资"})}):null}))},"./src/screens/tinygrail/clipboard/btn/styles.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var n=r("./src/stores/index.ts");t.memoStyles=n._.memoStyles((function(){return{wrap:{position:"absolute",zIndex:1,right:n._.wind,bottom:32,left:n._.wind},btn:{width:104,borderRadius:48}}}))},"./src/screens/tinygrail/clipboard/index.tsx":(e,t,r)=>{var n=r("./node_modules/@babel/runtime/regenerator/index.js");r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),a=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),u=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),d=s(r("react")),f=r("./src/components/index.ts"),m=r("./src/screens/_/index.ts"),p=r("./src/stores/index.ts"),b=r("./src/utils/decorators/index.ts"),j=r("./src/utils/fetch/index.ts"),y=s(r("./src/screens/tinygrail/clipboard/btn/index.tsx")),h=s(r("./src/screens/tinygrail/clipboard/list/index.tsx")),x=s(r("./src/screens/tinygrail/clipboard/store.ts")),_=r("./node_modules/react/jsx-runtime.js");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var s=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var v=function(e){(0,a.default)(s,e);var t,r=g(s);function s(){return(0,l.default)(this,s),r.apply(this,arguments)}return(0,i.default)(s,[{key:"componentDidMount",value:(t=(0,o.default)(n.mark((function e(){var t,r,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.context,r=t.$,s=t.navigation,r.init(s);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.context.$;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(f.Header,{title:"粘贴板",hm:["tinygrail/clipboard","TinygrailClipboard"],statusBarEvents:!1,statusBarEventsType:"Tinygrail",headerRight:function(){return(0,_.jsxs)(f.Flex,{children:[(0,_.jsx)(m.IconHeader,{style:p._.mr.xs,name:"md-refresh",color:p._.colorTinygrailPlain,size:22,onPress:function(){(0,j.t)("粘贴板.刷新"),e.init()}}),(0,_.jsx)(m.IconHeader,{name:"md-ios-share",color:p._.colorTinygrailPlain,onPress:function(){(0,j.t)("粘贴板.分享"),e.onShare()}})]})}}),(0,_.jsxs)(f.Page,{style:p._.container.tinygrail,children:[(0,_.jsx)(h.default,{}),(0,_.jsx)(y.default,{})]})]})}}]),s}(d.default.Component);t.default=(0,b.inject)(x.default)((0,b.obc)(v))},"./src/screens/tinygrail/clipboard/list/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.assign.js");var n=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(r("react"));var s=r("./src/components/index.ts"),o=r("./src/stores/index.ts"),l=r("./src/utils/index.ts"),i=r("./src/utils/decorators/index.ts"),a=n(r("./src/screens/tinygrail/_/item/index.tsx")),u=r("./node_modules/react/jsx-runtime.js"),c={id:"粘贴板.跳转"};t.default=(0,i.obc)((function(e,t){var r=t.$;return(0,u.jsx)(s.ListView,{style:o._.container.flex,contentContainerStyle:o._.container.bottom,keyExtractor:l.keyExtractor,refreshControlProps:{color:o._.colorTinygrailText},footerTextType:"tinygrailText",footerEmptyDataText:"您可以复制带有人物链接或id的文本\n进入本页面后会自动获取粘贴板文本中所有角色id\n获取角色数据并生成列表",data:r.list,windowSize:6,initialNumToRender:24,maxToRenderPerBatch:24,updateCellsBatchingPeriod:24,lazy:24,scrollToTop:!0,renderItem:d})}));function d(e){var t=e.item,r=e.index;return(0,u.jsx)(a.default,Object.assign({index:r,event:c},t))}},"./src/screens/tinygrail/clipboard/store.ts":(e,t,r)=>{var n=r("./node_modules/@babel/runtime/regenerator/index.js");function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,s=function(){};return{s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw l}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.array.find-index.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.is-array.js");var l=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=l(r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=l(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=l(r("./node_modules/@babel/runtime/helpers/createClass.js")),d=l(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),f=l(r("./node_modules/@babel/runtime/helpers/inherits.js")),m=l(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=l(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),b=l(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),j=l(r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=l(r("./node_modules/react-native-web/dist/exports/Clipboard/index.js")),h=r("./node_modules/mobx/dist/mobx.esm.js"),x=r("./src/stores/index.ts"),_=r("./src/utils/index.ts"),g=l(r("./src/utils/store/index.ts")),v=r("./src/utils/fetch/index.ts"),w=r("./src/screens/tinygrail/_/utils.ts");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var s=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}t.default=(i=function(e){(0,f.default)(r,e);var t=k(r);function r(){var e,o,l;(0,u.default)(this,r);for(var i=arguments.length,c=new Array(i),f=0;f<i;f++)c[f]=arguments[f];return e=t.call.apply(t,[this].concat(c)),(0,b.default)((0,d.default)(e),"state",(0,h.observable)({ids:[],_loaded:!1})),(0,b.default)((0,d.default)(e),"init",(o=(0,a.default)(n.mark((function t(r){var o,l,i,a,u,c,d;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.default.getString();case 2:if(o=t.sent){t.next=5;break}return t.abrupt("return");case 5:if(l=String(o).match(/\d+/g),i=[],l&&(i=l.map((function(e){return Number(e)})).filter((function(e){return Number(e)>100}))).length&&y.default.setString(""),i.length){t.next=10;break}return t.abrupt("return");case 10:a=n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,w.throttleInfo)(i.findIndex((function(e){return e===t}))+1+" / "+i.length),e.next=3,x.tinygrailStore.fetchCharacters([t]);case 3:case"end":return e.stop()}}),e)})),u=s(i),t.prev=12,u.s();case 14:if((c=u.n()).done){t.next=19;break}return d=c.value,t.delegateYield(a(d),"t0",17);case 17:t.next=14;break;case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(12),u.e(t.t1);case 24:return t.prev=24,u.f(),t.finish(24);case 27:e.setState({ids:i,_loaded:(0,_.getTimestamp)()}),r&&r.setParams({title:"粘贴板 ("+e.list.list.length+")"});case 29:case"end":return t.stop()}}),t,null,[[12,21,24,27]])}))),function(e){return o.apply(this,arguments)})),(0,b.default)((0,d.default)(e),"onShare",(function(){0!==e.list.list.length?(0,_.copy)(e.list.list.map((function(e){return"https://bgm.tv/character/"+e.id+"\n"+e.name})).join("\n"),"已复制 "+e.list.list.length+" 个角色的分享链接"):(0,_.info)("当前没有角色数据")})),(0,b.default)((0,d.default)(e),"batchICO",(l=(0,a.default)(n.mark((function e(t){var r,o,l,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.t)("粘贴板.一键注资",{length:t.length}),r=n.mark((function e(r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,w.throttleInfo)(t.findIndex((function(e){return e===r}))+1+" / "+t.length),e.next=3,x.tinygrailStore.doJoin({id:r,amount:5e3});case 3:case"end":return e.stop()}}),e)})),o=s(t),e.prev=3,o.s();case 5:if((l=o.n()).done){e.next=10;break}return i=l.value,e.delegateYield(r(i),"t0",8);case 8:e.next=5;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),o.e(e.t1);case 15:return e.prev=15,o.f(),e.finish(15);case 18:(0,_.feedback)(),(0,_.info)("已完成注资");case 20:case"end":return e.stop()}}),e,null,[[3,12,15,18]])}))),function(e){return l.apply(this,arguments)})),e}return(0,c.default)(r,[{key:"list",get:function(){var e=this.state.ids;return(0,w.relation)({list:e.map((function(e){return x.tinygrailStore.characters(e)})).filter((function(e){return 0!==e.id})),pagination:{page:1,pageTotal:1},_loaded:(0,_.getTimestamp)()})}}]),r}(g.default),(0,j.default)(i.prototype,"list",[h.computed],Object.getOwnPropertyDescriptor(i.prototype,"list"),i.prototype),i)}}]);