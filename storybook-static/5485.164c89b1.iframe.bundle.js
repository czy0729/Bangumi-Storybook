(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5485],{"./src/screens/discovery/calendar/component/desc/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/calendar/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Desc")},"./src/screens/discovery/calendar/component/desc/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=r(t("react")),d=t("./src/components/index.ts"),c=t("./src/utils/index.ts"),i=t("./src/utils/decorators/index.ts"),l=t("./src/screens/discovery/calendar/component/desc/ds.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.style,r=e.subjectId,i=e.sites,l=e.size,u=void 0===l?11:l,m=e.filterToShow,p=void 0!==m&&m,j=s.$;if(p&&!(j.state.adapt||j.state.origin||j.state.tag))return null;var f=[],v=[];null!=i&&i.b&&v.push("bilibili"),null!=i&&i.b||null==i||!i.bhmt||v.push("bilibili 港澳台"),null!=i&&i.i&&v.push("爱奇艺"),null!=i&&i.q&&v.push("腾讯视频"),v.length&&f.push((0,a.jsx)(d.Text,{type:"sub",size:u,lineHeight:u+1,bold:!0,children:v.join(" / ")}));var y=(0,c.getOnAirItem)(r),_=y.type,b=void 0===_?"":_,x=y.tag,h=void 0===x?"":x,g=y.origin,O=void 0===g?"":g;return b&&f.push((0,a.jsx)(d.Text,{type:j.state.adapt===b?"main":"sub",size:u,lineHeight:u+1,bold:!0,children:b})),h&&f.push.apply(f,(0,o.default)(h.split("/").map((function(e){return(0,a.jsx)(d.Text,{type:j.state.tag===e?"main":"sub",size:u,lineHeight:u+1,bold:!0,children:e})})))),O&&f.push.apply(f,(0,o.default)(O.split("/").map((function(e){return(0,a.jsx)(d.Text,{type:j.state.origin===e?"main":"sub",size:u,lineHeight:u+1,bold:!0,children:e})})))),f.length?(0,a.jsx)(d.Text,{style:t,size:u,lineHeight:u+1,children:f.map((function(e,s){return(0,a.jsxs)(n.default.Fragment,{children:[!!s&&(0,a.jsxs)(d.Text,{type:"sub",size:u,lineHeight:u+1,bold:!0,children:[" ","/"," "]}),e]},s)}))}):null}),l.COMPONENT)},"./src/screens/discovery/calendar/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/calendar/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/discovery/calendar/component/item-grid/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.HIT_SLOP=s.DEFAULT_PROPS=s.COMPONENT_MAIN=s.COMPONENT=void 0;var r=t("./src/stores/index.ts"),o=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/calendar/component/ds.ts"),d=s.COMPONENT=(0,o.rc)(n.COMPONENT,"ItemGrid");s.COMPONENT_MAIN=(0,o.rc)(d),s.DEFAULT_PROPS={navigation:{},styles:{},hideScore:!1,subjectId:0,name:"",image:"",score:"",collection:"",time:"2359"},s.HIT_SLOP={top:r._.device(2,4),right:r._.device(4,4),bottom:r._.device(10,4),left:r._.device(4,4)}},"./src/screens/discovery/calendar/component/item-grid/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/stores/index.ts"),n=t("./src/utils/index.ts"),d=t("./src/utils/decorators/index.ts"),c=r(t("./src/screens/discovery/calendar/component/item-grid/item.tsx")),i=t("./src/screens/discovery/calendar/component/item-grid/ds.ts"),l=t("./src/screens/discovery/calendar/component/item-grid/styles.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.subjectId,r=e.name,d=e.images,i=e.score,u=e.time,m=s.$,p=s.navigation,j=o.collectionStore.collect(t);if("collect"===m.state.type&&!j)return null;var f=(0,n.getOnAirItem)(t),v=f.origin,y=void 0===v?"":v,_=f.tag,b=void 0===_?"":_;return m.state.origin&&(null==y||!y.includes(m.state.origin))||m.state.tag&&(null==b||!b.includes(m.state.tag))?null:(0,a.jsx)(c.default,{navigation:p,styles:(0,l.memoStyles)(),hideScore:o.systemStore.setting.hideScore,subjectId:t,name:r,image:null==d?void 0:d.medium,score:i,collection:j,time:u})}),i.COMPONENT)},"./src/screens/discovery/calendar/component/item-grid/item.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/components/cover/utils.ts"),c=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),l=t("./src/utils/decorators/index.ts"),a=t("./src/utils/fetch/index.ts"),u=r(t("./src/screens/discovery/calendar/component/desc/index.tsx")),m=r(t("./src/screens/discovery/calendar/component/item-grid/rating/index.tsx")),p=r(t("./src/screens/discovery/calendar/component/item-grid/title/index.tsx")),j=t("./src/screens/discovery/calendar/component/item-grid/ds.ts"),f=t("./node_modules/react/jsx-runtime.js"),v=(0,l.memo)((function(e){var s=e.navigation,t=e.styles,r=e.hideScore,l=e.subjectId,v=e.name,y=e.image,_=e.score,b=e.collection,x=e.time,h=t.cover,g=h.width,O=h.height;return(0,f.jsx)(o.default,{style:t.item,children:(0,f.jsxs)(n.Touchable,{animate:!0,hitSlop:j.HIT_SLOP,onPress:function(){(0,a.t)("每日放送.跳转",{to:"Subject",subjectId:l}),s.push("Subject",{subjectId:l,_cn:(0,i.HTMLDecode)(v),_image:(0,d.getCoverSrc)(y,g)})},children:[(0,f.jsx)(n.Cover,{width:g,height:O,src:y,radius:!0}),(0,f.jsx)(p.default,{name:v,collection:b}),(0,f.jsx)(u.default,{style:c._.mv.xs,subjectId:l,size:10,filterToShow:!0}),(0,f.jsx)(m.default,{hideScore:r,time:x,score:_})]})})}),j.DEFAULT_PROPS,j.COMPONENT_MAIN);s.default=v},"./src/screens/discovery/calendar/component/item-grid/rating/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.array.join.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),c=t("./src/utils/decorators/index.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.ob)((function(e){var s=e.hideScore,t=e.time,r=e.score,c=!s&&!!r,l=[];return t&&"2359"!==t&&l.push(t.slice(0,2)+":"+t.slice(2)),l=l.join(" · "),(0,i.jsxs)(o.Flex,{style:d._.mt.xs,children:[c&&(0,i.jsx)(n.Stars,{value:r,simple:!0}),!!l&&(0,i.jsxs)(o.Text,{size:11,type:"sub",bold:!0,noWrap:!0,children:[c&&r?" · ":"",l]})]})}))},"./src/screens/discovery/calendar/component/item-grid/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){var e=r._.grid();return{item:{width:e.width,marginLeft:e.marginLeft,marginBottom:r._.md},cover:{width:e.width,height:e.height}}}))},"./src/screens/discovery/calendar/component/item-grid/title/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),c=t("./src/utils/decorators/index.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.ob)((function(e){var s=e.name,t=e.collection,r=(0,d.HTMLDecode)(s),c=r.length>=16?11:12;return(0,i.jsxs)(o.Text,{style:n._.mt.sm,size:c,lineHeight:c+1,numberOfLines:3,bold:!0,children:[!!t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Text,{type:(0,d.getType)(t),size:c,lineHeight:c+1,bold:!0,children:t}),(0,i.jsx)(o.Text,{size:c,lineHeight:c+1,bold:!0,children:"·"})]}),r]})}))},"./src/screens/discovery/calendar/component/item-line/cover/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/components/cover/utils.ts"),d=t("./src/screens/_/index.ts"),c=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),l=t("./src/utils/fetch/index.ts"),a=t("./src/screens/discovery/calendar/component/item-line/cover/styles.ts"),u=t("./node_modules/react/jsx-runtime.js"),m=.64*c._.window.height;s.default=(0,i.obc)((function(e,s){var t=e.section,r=e.index,c=e.subjectId,i=e.image,p=e.name,j=s.navigation,f=a.styles.inView,v=f.minWidth,y=f.minHeight;return(0,u.jsx)(d.InView,{style:a.styles.inView,y:m*t+y*r+1,children:(0,u.jsx)(o.Touchable,{onPress:function(){(0,l.t)("每日放送.跳转",{to:"Subject",subjectId:c}),j.push("Subject",{subjectId:c,_cn:p,_image:(0,n.getCoverSrc)(i,v)})},children:(0,u.jsx)(o.Cover,{width:v,height:y,src:i,radius:!0})})})}))},"./src/screens/discovery/calendar/component/item-line/cover/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.styles=r._.create({inView:{minWidth:o.IMG_WIDTH,minHeight:o.IMG_HEIGHT}})},"./src/screens/discovery/calendar/component/item-line/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_PROPS=s.COMPONENT_MAIN=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/constants/index.ts"),n=t("./src/screens/discovery/calendar/component/ds.ts"),d=s.COMPONENT=(0,r.rc)(n.COMPONENT,"ItemList");s.COMPONENT_MAIN=(0,r.rc)(d),s.DEFAULT_PROPS={section:0,index:0,styles:{},hideScore:!1,subjectId:0,name:"",desc:"",image:"",time:"2359",prevTime:"",expand:!1,collection:void 0,rank:0,score:0,total:0,sites:{},onToggleExpand:o.FROZEN_FN}},"./src/screens/discovery/calendar/component/item-line/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/stores/index.ts"),n=t("./src/utils/index.ts"),d=t("./src/utils/decorators/index.ts"),c=r(t("./src/screens/discovery/calendar/component/item-line/item-line.tsx")),i=t("./src/screens/discovery/calendar/component/item-line/ds.ts"),l=t("./src/screens/discovery/calendar/component/item-line/styles.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.subjectId,r=e.images,d=e.name,i=e.desc,u=(e.air,e.time),m=e.prevTime,p=e.rank,j=e.score,f=e.total,v=e.section,y=e.index,_=s.$,b=_.state.expand;if(!b&&!u)return null;var x=o.collectionStore.collect(t);if("collect"===_.state.type&&!x)return null;var h=_.state,g=h.adapt,O=h.origin,T=h.tag,P=(0,n.getOnAirItem)(t),S=P.type,M=void 0===S?"":S,E=P.origin,N=void 0===E?"":E,C=P.tag,w=void 0===C?"":C;return g&&M!==g||O&&(null==N||!N.includes(O))||T&&(null==w||!w.includes(T))?null:(0,a.jsx)(c.default,{section:v,index:y,styles:(0,l.memoStyles)(),hideScore:o.systemStore.setting.hideScore,subjectId:t,name:d,desc:i,image:null==r?void 0:r.medium,time:u,prevTime:m,expand:b||!(!O&&!T),collection:x,rank:p,score:j,total:f,sites:_.sites(t),onToggleExpand:_.onToggleExpand})}),i.COMPONENT)},"./src/screens/discovery/calendar/component/item-line/item-line.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/screens/_/index.ts"),c=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),l=t("./src/utils/decorators/index.ts"),a=t("./src/constants/index.ts"),u=r(t("./src/screens/discovery/calendar/component/desc/index.tsx")),m=r(t("./src/screens/discovery/calendar/component/item-line/cover/index.tsx")),p=r(t("./src/screens/discovery/calendar/component/item-line/rating/index.tsx")),j=r(t("./src/screens/discovery/calendar/component/item-line/time/index.tsx")),f=r(t("./src/screens/discovery/calendar/component/item-line/title/index.tsx")),v=t("./src/screens/discovery/calendar/component/item-line/ds.ts"),y=t("./node_modules/react/jsx-runtime.js"),_=(0,l.memo)((function(e){var s=e.section,t=e.index,r=e.styles,l=e.hideScore,v=e.subjectId,_=e.name,b=e.desc,x=e.image,h=e.time,g=e.prevTime,O=e.expand,T=e.collection,P=e.rank,S=e.score,M=e.total,E=e.sites,N=e.onToggleExpand;return(0,y.jsx)(o.default,{style:c._.container.block,children:(0,y.jsxs)(n.Flex,{style:r.item,align:"start",children:[(0,y.jsx)(j.default,{time:h,prevTime:g,expand:O,onToggleExpand:N}),(O||!O&&h&&"2359"!==h)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.default,{section:s,index:t,subjectId:v,image:x,name:_}),(0,y.jsx)(n.Flex.Item,{style:c._.ml.md,children:(0,y.jsxs)(n.Flex,{style:r.body,direction:"column",justify:"between",align:"start",children:[(0,y.jsx)(f.default,{name:_}),(0,y.jsx)(u.default,{subjectId:v,sites:E}),(0,y.jsx)(p.default,{hideScore:l,rank:P,score:S,total:M})]})}),(0,y.jsx)(d.Manage,{subjectId:v,collection:T,onPress:function(){c.uiStore.showManageModal({subjectId:v,title:(0,i.HTMLDecode)(_),desc:b,status:a.MODEL_COLLECTION_STATUS.getValue(T)},"每日放送")}})]})]})})}),v.DEFAULT_PROPS,v.COMPONENT_MAIN);s.default=_},"./src/screens/discovery/calendar/component/item-line/rating/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),c=t("./src/utils/decorators/index.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.ob)((function(e){var s=e.hideScore,t=e.rank,r=e.score,c=e.total,l=!s&&!!r;return(0,i.jsx)(o.Flex,{children:l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.Rank,{value:t}),(0,i.jsx)(n.Stars,{style:d._.mr.xs,value:r,type:"desc"}),!!c&&(0,i.jsxs)(o.Text,{type:"sub",size:11,bold:!0,children:["(",c,")"]})]})})}))},"./src/screens/discovery/calendar/component/item-line/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.memoStyles=r._.memoStyles((function(){var e=o.IMG_HEIGHT;return{item:{width:"100%",paddingVertical:12,paddingRight:r._._wind},inView:{minWidth:o.IMG_WIDTH,minHeight:e},time:{width:r._.r(72),paddingLeft:r._._wind,marginTop:2},transparent:{opacity:0},body:{width:"100%",height:e-4,paddingTop:2},katakanas:{marginTop:-10},undetermined:{zIndex:1,paddingVertical:r._.sm}}}))},"./src/screens/discovery/calendar/component/item-line/time/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.slice.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/utils/index.ts"),c=t("./src/utils/decorators/index.ts"),i=t("./src/screens/discovery/calendar/component/item-line/time/styles.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.ob)((function(e){var s=e.time,t=e.prevTime,r=e.expand,c=e.onToggleExpand;return(0,l.jsxs)(o.default,{style:(0,d.stl)(i.styles.time,t&&t===s&&i.styles.transparent),children:[!(!s||"2359"===s&&!r)&&(0,l.jsx)(n.Text,{bold:!0,children:"2359"===s?"未知":s.slice(0,2)+":"+s.slice(2)}),"2359"===s&&(0,l.jsx)(n.Touchable,{style:i.styles.undetermined,withoutFeedback:!0,onPress:c,children:(0,l.jsx)(n.Text,{type:"sub",children:r?"收起":"展开"})})]})}))},"./src/screens/discovery/calendar/component/item-line/time/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({time:{width:r._.r(72),paddingLeft:r._._wind,marginTop:2},transparent:{opacity:0},undetermined:{zIndex:1,paddingVertical:r._.sm}})},"./src/screens/discovery/calendar/component/item-line/title/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),c=t("./src/utils/decorators/index.ts"),i=t("./src/screens/discovery/calendar/component/item-line/title/styles.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.ob)((function(e){var s=e.name,t=(0,d.HTMLDecode)(s),r=t.length>=20?12:t.length>=14?13:14;return(0,l.jsx)(o.Flex,{style:n._.container.block,align:"start",children:(0,l.jsx)(o.Flex.Item,{children:(0,l.jsx)(o.Katakana.Provider,{itemStyle:i.styles.katakanas,size:r,numberOfLines:3,bold:!0,children:(0,l.jsx)(o.Katakana,{type:"desc",size:r,numberOfLines:3,bold:!0,children:t})})})})}))},"./src/screens/discovery/calendar/component/item-line/title/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({katakanas:{marginTop:-10}})},"./src/screens/discovery/calendar/component/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/calendar/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Item")},"./src/screens/discovery/calendar/component/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.date.to-string.js"),t("./node_modules/core-js/modules/es.parse-int.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.object.assign.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/stores/index.ts"),c=t("./src/utils/index.ts"),i=t("./src/utils/decorators/index.ts"),l=t("./src/screens/discovery/calendar/utils.ts"),a=r(t("./src/screens/discovery/calendar/component/item-grid/index.tsx")),u=r(t("./src/screens/discovery/calendar/component/item-line/index.tsx")),m=r(t("./src/screens/discovery/calendar/component/item/line/index.tsx")),p=t("./node_modules/react/jsx-runtime.js"),j=(new Date).getDay();0===j&&(j=7);s.default=(0,i.obc)((function(e,s){var t=e.item,r=e.section,i=s.$,f=t.items,v=parseInt((0,c.date)("Hi",(0,c.getTimestamp)())),y=!1;return(0,p.jsx)(n.Flex,{wrap:"wrap",align:"start",children:f.map((function(e,s){var t,n,_=(0,l.getTime)(e,e.id);s>0&&"2359"===_&&(0,l.getTime)(f[s-1],e.id)===_&&(_="");var b=null==f?void 0:f[s-1],x="";b&&(x=(0,l.getTime)(b,b.id));var h=e.air;e.air_weekday!==j&&0!==h&&(h=Number(h)+1);var g={key:e.id,subjectId:e.id,images:e.images,name:(0,c.cnjp)(e.name_cn,e.name),desc:(0,c.cnjp)(e.name,e.name_cn),rank:e.rank,score:null==e||null==(t=e.rating)?void 0:t.score,total:null==e||null==(n=e.rating)?void 0:n.total,air:h,time:_,prevTime:x,section:r.index,index:s};if(i.isList){var O=(new Date).getHours()<12,T=r.index===(O?1:0);return T&&!y&&parseInt(_)>v?(y=!0,(0,p.jsxs)(o.default,{style:d._.container.block,children:[(0,p.jsx)(m.default,{}),(0,p.jsx)(u.default,Object.assign({},g))]},e.id)):T&&!y&&s===f.length-1?(0,p.jsxs)(o.default,{style:d._.container.block,children:[(0,p.jsx)(u.default,Object.assign({},g)),(0,p.jsx)(m.default,{})]},e.id):(0,p.jsx)(u.default,Object.assign({},g))}return(0,p.jsx)(a.default,Object.assign({index:s},g))}))})}))},"./src/screens/discovery/calendar/component/item/line/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/calendar/component/item/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Line")},"./src/screens/discovery/calendar/component/item/line/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),c=t("./src/utils/decorators/index.ts"),i=t("./src/screens/discovery/calendar/component/item/line/ds.ts"),l=t("./src/screens/discovery/calendar/component/item/line/styles.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.ob)((function(){var e=(0,l.memoStyles)();return(0,a.jsxs)(o.Flex,{children:[(0,a.jsx)(o.Flex.Item,{style:e.line}),(0,a.jsx)(o.Iconfont,{name:"md-access-time",color:n._.colorMain,size:16}),(0,a.jsx)(o.Text,{style:n._.ml.xs,type:"main",bold:!0,children:(0,d.date)("H:i",(0,d.getTimestamp)())}),(0,a.jsx)(o.Flex.Item,{style:e.line}),(0,a.jsx)(o.Heatmap,{id:"每日放送.跳转"})]})}),i.COMPONENT)},"./src/screens/discovery/calendar/component/item/line/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{line:{height:1,marginVertical:r._.md,marginHorizontal:r._._wind,backgroundColor:r._.colorMain}}}))},"./src/screens/discovery/calendar/component/list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/calendar/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"List")},"./src/screens/discovery/calendar/component/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),c=t("./src/utils/decorators/index.ts"),i=t("./src/screens/discovery/calendar/component/list/utils.tsx"),l=t("./src/screens/discovery/calendar/component/list/ds.ts"),a=t("./src/screens/discovery/calendar/component/list/styles.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.obc)((function(e,s){var t=s.$,r=(0,a.memoStyles)(),c=t.isList?void 0:3;return(0,u.jsx)(o.ListView,{style:n._.mt._sm,contentContainerStyle:r.contentContainerStyle,keyExtractor:d.keyExtractor,sections:t.sections,lazy:2,numColumns:c,renderSectionHeader:i.renderSectionHeader,renderItem:i.renderItem,scrollEventThrottle:16,onScroll:t.onScroll},""+t.state.layout+c)}),l.COMPONENT)},"./src/screens/discovery/calendar/component/list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{contentContainerStyle:{paddingRight:r._.wind-r._._wind,paddingLeft:r._.wind-r._.device(r._._wind,r._._wind+8)},section:{flex:1,paddingTop:r._.xs,paddingBottom:r._.md,paddingLeft:r._._wind,backgroundColor:r._.colorPlain}}}))},"./src/screens/discovery/calendar/component/list/utils.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.renderItem=function(e){var s=e.item,t=e.section,r=void 0===t?{}:t;return(0,c.jsx)(n.default,{item:s,section:r})},s.renderSectionHeader=function(e){var s=e.section.title,t=(0,d.memoStyles)();return(0,c.jsx)(o.SectionHeader,{style:t.section,size:14,children:s})};r(t("react"));var o=t("./src/screens/_/index.ts"),n=r(t("./src/screens/discovery/calendar/component/item/index.tsx")),d=t("./src/screens/discovery/calendar/component/list/styles.ts"),c=t("./node_modules/react/jsx-runtime.js")},"./src/screens/discovery/calendar/component/tool-bar/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/calendar/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"ToolBar")},"./src/screens/discovery/calendar/component/tool-bar/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=r(t("./src/screens/discovery/calendar/component/tool-bar/more.tsx")),c=r(t("./src/screens/discovery/calendar/component/tool-bar/onair.tsx")),i=t("./src/screens/discovery/calendar/component/tool-bar/ds.ts"),l=t("./src/screens/discovery/calendar/component/tool-bar/styles.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.$,r=t.state,n=r.adapt,i=r.tag,u=r.origin;return(0,a.jsxs)(o.ToolBar,{style:l.styles.toolBar,children:[(0,a.jsx)(c.default,{list:t.calendar.list,adapt:n,tag:i,origin:u}),(0,a.jsx)(d.default,{})]})}),i.COMPONENT)},"./src/screens/discovery/calendar/component/tool-bar/more.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$,r=t.state,d=r.layout,i=r.type;return(0,c.jsx)(o.ToolBar.Popover,{data:["布局 · "+("list"===d?"列表":"网格"),"收藏 · "+("all"===i?"显示":"只显示")],icon:"md-more-vert",iconColor:n._.colorDesc,iconSize:16,type:"desc",transparent:!0,onSelect:function(e){return e.includes("布局")?t.onSwitchLayout():e.includes("收藏")?t.onToggleType():void 0}})}))},"./src/screens/discovery/calendar/component/tool-bar/onair.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/es.array.concat.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f(s);if(t&&t.has(e))return t.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var d=o?Object.getOwnPropertyDescriptor(e,n):null;d&&(d.get||d.set)?Object.defineProperty(r,n,d):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}(t("react")),d=t("./src/components/index.ts"),c=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),l=t("./src/utils/dev/index.ts"),a=t("./src/utils/hooks/index.ts"),u=t("./src/screens/discovery/calendar/component/tool-bar/utils.ts"),m=t("./src/screens/discovery/calendar/component/tool-bar/ds.ts"),p=t("./src/screens/discovery/calendar/component/tool-bar/styles.ts"),j=t("./node_modules/react/jsx-runtime.js");function f(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:s})(e)}s.default=(0,i.c)((function(e,s){var t=e.list,r=e.adapt,i=e.tag,f=e.origin,v=s.$;(0,l.r)(m.COMPONENT);var y=(0,u.getData)(t,{adapt:r,tag:i,origin:f}),_=y.adapts,b=y.tags,x=y.origins,h=(0,n.useMemo)((function(){return["全部"].concat((0,o.default)(_))}),[_.length]),g=(0,n.useMemo)((function(){return["全部"].concat((0,o.default)(b))}),[b.length]),O=(0,n.useMemo)((function(){return["全部"].concat((0,o.default)(x))}),[x.length]);return(0,a.useObserver)((function(){return(0,j.jsxs)(j.Fragment,{children:[!(null==_||!_.length)&&(0,j.jsx)(d.ToolBar.Popover,{itemStyle:p.styles.item,data:h,text:r||"改编",type:"desc",onSelect:v.onAdapt}),!(null==b||!b.length)&&(0,j.jsx)(d.ToolBar.Popover,{itemStyle:p.styles.item,data:g,text:i||"标签",type:"desc",onSelect:v.onTag}),!(null==x||!x.length)&&(0,j.jsx)(d.ToolBar.Popover,{itemStyle:p.styles.item,data:O,text:f||"制作",type:"desc",onSelect:v.onOrigin}),!!(r||i||f)&&(0,j.jsx)(d.ToolBar.Icon,{icon:"md-close",iconColor:c._.colorDesc,onSelect:v.onClear})]})}))}))},"./src/screens/discovery/calendar/component/tool-bar/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({toolBar:{paddingBottom:20},item:{minWidth:64}})},"./src/screens/discovery/calendar/component/tool-bar/utils.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.object.entries.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.getData=function(e,s){var t=JSON.stringify(e).length;if(d.has(t))return d.get(t);try{var r={},c={},i={};e.forEach((function(e){e.items.forEach((function(e){var s=(0,n.getOnAirItem)(e.id),t=s.type,o=s.origin,d=s.tag;t&&(r[t]?r[t]+=1:r[t]=1),o&&o.split("/").forEach((function(e){var s=e.trim();c[s]?c[s]+=1:c[s]=1})),d&&d.split("/").forEach((function(e){var s=e.trim();i[s]?i[s]+=1:i[s]=1}))}))}));var l={adapts:Object.entries(r).sort((function(e,s){return(0,n.desc)(e[1],s[1])})).map((function(e){var s=(0,o.default)(e,2);return s[0]+" ("+s[1]+")"})),origins:Object.entries(c).sort((function(e,s){return(0,n.desc)(e[1],s[1])})).map((function(e){var s=(0,o.default)(e,2);return s[0]+" ("+s[1]+")"})),tags:Object.entries(i).sort((function(e,s){return(0,n.desc)(e[1],s[1])})).map((function(e){var s=(0,o.default)(e,2);return s[0]+" ("+s[1]+")"}))};return d.set(t,l),l}catch(e){}return{adapts:[],origins:[],tags:[]}};var o=r(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=t("./src/utils/index.ts"),d=new Map},"./src/screens/discovery/calendar/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.TYPE_DS=s.LAYOUT_DS=s.COMPONENT=void 0;s.COMPONENT="Calendar",s.LAYOUT_DS=[{key:"list",title:"列表"},{key:"grid",title:"网格"}],s.TYPE_DS=[{key:"all",title:"全部"},{key:"collect",title:"收藏"}]},"./src/screens/discovery/calendar/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_SPA=s.TEXT_INFOR=s.TEXT_BROWSER=s.DATA=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/constants/index.ts"),n=t("./src/screens/discovery/calendar/ds.ts"),d=(s.COMPONENT=(0,r.rc)(n.COMPONENT,"Header"),s.TEXT_BROWSER="浏览器查看"),c=s.TEXT_SPA="网页版查看",i=s.TEXT_INFOR="补充说明",l=s.DATA=[d];o.STORYBOOK||l.push(c),l.push(i)},"./src/screens/discovery/calendar/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/index.ts"),d=t("./src/utils/decorators/index.ts"),c=t("./src/utils/fetch/index.ts"),i=t("./src/constants/index.ts"),l=t("./src/screens/discovery/calendar/header/ds.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.navigation;return(0,a.jsx)(o.Header,{title:"每日放送",hm:["calendar","Calendar"],headerRight:function(){return(0,a.jsx)(o.Header.Popover,{data:l.DATA,onSelect:function(e){if((0,c.t)("每日放送.右上角菜单",{key:e}),e!==l.TEXT_BROWSER)if(e!==l.TEXT_SPA)e===l.TEXT_INFOR&&t.push("Information",{title:"每日放送数据",message:["客户端内每日放送数据是由多方数据整合而成的。","1：官方每日放送 API 作为当季放送原始列表项。","2：从 bangumi-data 库中获取放送具体时间和站点，若该番剧并没有具体时间，会默认收起以免长期占据显示位置，需要你自行展开列表。","3：标签和动画制作数据摘取自 https://yuc.wiki。"]});else{var s=i.URL_SPA+"/"+(0,n.getSPAParams)("Calendar");(0,n.open)(s)}else(0,n.open)(i.HOST+"/calendar")},children:(0,a.jsx)(o.Heatmap,{id:"每日放送.右上角菜单"})})}})}),l.COMPONENT)},"./src/screens/discovery/calendar/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/utils/hooks/index.ts"),c=r(t("./src/screens/discovery/calendar/component/list/index.tsx")),i=r(t("./src/screens/discovery/calendar/component/tool-bar/index.tsx")),l=r(t("./src/screens/discovery/calendar/header/index.tsx")),a=r(t("./src/screens/discovery/calendar/store/index.ts")),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.ic)(a.default,(function(e,s){var t=s.$;return(0,d.useRunAfter)((function(){t.init()})),(0,d.useObserver)((function(){return(0,u.jsxs)(o.Component,{id:"screen-calendar",children:[(0,u.jsx)(l.default,{}),(0,u.jsxs)(o.Page,{children:[(0,u.jsx)(i.default,{}),t.state._loaded&&t.calendar._loaded?(0,u.jsx)(c.default,{}):(0,u.jsx)(o.Loading,{})]})]})}))}))},"./src/screens/discovery/calendar/store/action.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.function.bind.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),n=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=t("./src/utils/index.ts"),m=t("./src/utils/fetch/index.ts"),p=r(t("./src/screens/discovery/calendar/store/fetch.ts"));function j(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.default)(e);if(s){var o=(0,l.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,i.default)(this,t)}}s.default=function(e){(0,c.default)(t,e);var s=j(t);function t(){var e;(0,n.default)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=s.call.apply(s,[this].concat(o)),(0,a.default)((0,d.default)(e),"onSwitchLayout",(function(){var s=e.isList?"grid":"list";e.setState({layout:s}),e.save(),(0,m.t)("每日放送.切换布局",{layout:s})})),(0,a.default)((0,d.default)(e),"onToggleType",(function(){var s="all"===e.state.type?"collect":"all";e.setState({type:s}),e.save(),(0,m.t)("每日放送.切换类型",{type:s})})),(0,a.default)((0,d.default)(e),"onToggleExpand",(function(){e.setState({expand:!e.state.expand}),e.save()})),(0,a.default)((0,d.default)(e),"onAdapt",(function(s){var t,r;"全部"===s?t="":t=(null==(r=s.split(" ("))?void 0:r[0])||"";e.setState({adapt:t}),(0,m.t)("每日放送.切换改编",{adapt:t})})),(0,a.default)((0,d.default)(e),"onTag",(function(s){var t,r;"全部"===s?t="":t=(null==(r=s.split(" ("))?void 0:r[0])||"";e.setState({tag:t}),(0,m.t)("每日放送.切换标签",{tag:t})})),(0,a.default)((0,d.default)(e),"onOrigin",(function(s){var t,r;"全部"===s?t="":t=(null==(r=s.split(" ("))?void 0:r[0])||"";e.setState({origin:t}),(0,m.t)("每日放送.切换动画制作",{origin:t})})),(0,a.default)((0,d.default)(e),"onClear",(function(){e.setState({adapt:"",tag:"",origin:""})})),(0,a.default)((0,d.default)(e),"onScroll",u.updateVisibleBottom.bind((0,d.default)(e))),e}return(0,o.default)(t)}(p.default)},"./src/screens/discovery/calendar/store/computed.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.date.to-string.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,n=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),c=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=r(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),u=t("./node_modules/mobx/dist/mobx.esm.js"),m=t("./src/stores/index.ts"),p=t("./src/utils/index.ts"),j=t("./src/utils/protobuf/index.web.ts"),f=t("./src/screens/discovery/calendar/utils.ts"),v=r(t("./src/screens/discovery/calendar/store/state.ts"));function y(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.default)(e);if(s){var o=(0,l.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,i.default)(this,t)}}s.default=(o=function(e){(0,c.default)(t,e);var s=y(t);function t(){return(0,n.default)(this,t),s.apply(this,arguments)}return(0,d.default)(t,[{key:"calendar",get:function(){return m.calendarStore.calendar}},{key:"sections",get:function(){var e=(new Date).getDay();0===e&&(e=7);var s=e-((new Date).getHours()<12?2:1),t=this.calendar.list.map((function(e){return Object.assign({},e,{items:e.items.slice().sort((function(e,s){return(0,p.desc)((0,f.getTime)(e),(0,f.getTime)(s))}))})}));return t.slice(s).concat(t.slice(0,s)).map((function(e,s){return{title:e.weekday.cn,index:s,data:[e]}}))}},{key:"isList",get:function(){return"list"===this.state.layout}},{key:"subject",value:function(e){return(0,u.computed)((function(){return m.subjectStore.subject(e)})).get()}},{key:"sites",value:function(e){var s=this;return(0,u.computed)((function(){var t,r;return s.state.loadedBangumiData&&(null==(t=(0,j.get)("bangumi-data"))||null==(r=t.find((function(s){return s.id==e})))?void 0:r.s)||{}})).get()}}]),t}(v.default),(0,a.default)(o.prototype,"calendar",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"calendar"),o.prototype),(0,a.default)(o.prototype,"sections",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"sections"),o.prototype),(0,a.default)(o.prototype,"isList",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"isList"),o.prototype),o)},"./src/screens/discovery/calendar/store/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.STATE=s.NAMESPACE=s.EXCLUDE_STATE=void 0;var r=t("./src/stores/index.ts"),o=t("./src/screens/discovery/calendar/ds.ts"),n=(s.NAMESPACE="Screen"+o.COMPONENT,s.EXCLUDE_STATE={adapt:"",tag:"",origin:"",visibleBottom:r._.window.height,loadedBangumiData:!1});s.STATE=Object.assign({layout:o.LAYOUT_DS[0].key,type:o.TYPE_DS[0].key,expand:!1,_lastQueue:0},n,{_loaded:!1})},"./src/screens/discovery/calendar/store/fetch.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=t("./src/stores/index.ts"),j=t("./src/utils/index.ts"),f=t("./src/utils/protobuf/index.web.ts"),v=o(t("./src/screens/discovery/calendar/store/computed.ts"));function y(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,u.default)(e);if(s){var o=(0,u.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,a.default)(this,t)}}s.default=function(e){(0,l.default)(t,e);var s=y(t);function t(){var e;(0,c.default)(this,t);for(var o=arguments.length,d=new Array(o),l=0;l<o;l++)d[l]=arguments[l];return e=s.call.apply(s,[this].concat(d)),(0,m.default)((0,i.default)(e),"fetchCollectionsQueue",(function(){(0,j.getTimestamp)()-e.state._lastQueue<=86400||setTimeout((0,n.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=[],e.calendar.list.forEach((function(e){e.items.forEach((function(e){t.push(e.id)}))})),s.next=5,p.collectionStore.fetchCollectionStatusQueue(t);case 5:e.setState({_lastQueue:(0,j.getTimestamp)()}),e.save(),s.next=11;break;case 9:s.prev=9,s.t0=s.catch(0);case 11:case"end":return s.stop()}}),s,null,[[0,9]])}))),2e3)})),(0,m.default)((0,i.default)(e),"fetchBangumiData",(0,n.default)(r.mark((function s(){return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e.state.loadedBangumiData){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,(0,f.decode)("bangumi-data");case 4:e.setState({loadedBangumiData:!0});case 5:case"end":return s.stop()}}),s)})))),e}return(0,d.default)(t)}(v.default)},"./src/screens/discovery/calendar/store/index.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.object.assign.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=t("./src/stores/index.ts"),j=t("./src/utils/fetch/index.ts"),f=t("./src/utils/protobuf/index.web.ts"),v=o(t("./src/screens/discovery/calendar/store/action.ts")),y=t("./src/screens/discovery/calendar/store/ds.ts");function _(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,u.default)(e);if(s){var o=(0,u.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,a.default)(this,t)}}var b=function(e){(0,l.default)(t,e);var s=_(t);function t(){var e;(0,c.default)(this,t);for(var o=arguments.length,d=new Array(o),l=0;l<o;l++)d[l]=arguments[l];return e=s.call.apply(s,[this].concat(d)),(0,m.default)((0,i.default)(e),"init",(0,n.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=e,s.t1=Object,s.t2={},s.next=5,e.getStorage(y.NAMESPACE);case 5:return s.t3=s.sent,s.t4=y.EXCLUDE_STATE,s.t5={loadedBangumiData:!(null==(t=(0,f.get)("bangumi-data"))||!t.length),_loaded:!0},s.t6=s.t1.assign.call(s.t1,s.t2,s.t3,s.t4,s.t5),s.t0.setState.call(s.t0,s.t6),s.abrupt("return",(0,j.queue)([function(){return p.calendarStore.fetchOnAir()},function(){return p.calendarStore.fetchCalendar()},function(){return e.fetchBangumiData()},function(){return e.fetchCollectionsQueue()}],1));case 11:case"end":return s.stop()}}),s)})))),e}return(0,d.default)(t)}(v.default);s.default=b},"./src/screens/discovery/calendar/store/state.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),n=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=t("./node_modules/mobx/dist/mobx.esm.js"),m=r(t("./src/utils/store/index.ts")),p=t("./src/screens/discovery/calendar/store/ds.ts");function j(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.default)(e);if(s){var o=(0,l.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,i.default)(this,t)}}s.default=function(e){(0,c.default)(t,e);var s=j(t);function t(){var e;(0,n.default)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=s.call.apply(s,[this].concat(o)),(0,a.default)((0,d.default)(e),"state",(0,u.observable)(p.STATE)),(0,a.default)((0,d.default)(e),"save",(function(){return e.saveStorage(p.NAMESPACE,p.EXCLUDE_STATE)})),e}return(0,o.default)(t)}(m.default)},"./src/screens/discovery/calendar/utils.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.getTime=function(e,s){var t;return String((null==e?void 0:e.timeLocal)||(null==e?void 0:e.timeCN)||(null==e?void 0:e.timeJP)||(null==(t=r.ON_AIR[s])?void 0:t.timeCN)||"2359")};var r=t("./src/stores/calendar/onair/index.ts")}}]);