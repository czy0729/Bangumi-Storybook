(self.webpackChunkbangumi_pro=self.webpackChunkbangumi_pro||[]).push([[813],{"./src/screens/home/tag/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,d.jsx)(n.StorybookSPA,{children:(0,d.jsx)(n.StorybookList,{children:(0,d.jsx)(i.default,Object.assign({},(0,n.getStorybookArgs)("Tag")))})})}var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Tag=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=r(s("./src/screens/home/tag/index.tsx")),d=s("./node_modules/react/jsx-runtime.js"),r={title:"screens/Tag",component:i.default};t.default=r;(t.Tag=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Tag')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/v2/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,d.jsx)(n.StorybookSPA,{children:(0,d.jsx)(n.StorybookList,{children:(0,d.jsx)(i.default,Object.assign({},(0,n.getStorybookArgs)("Home")))})})}var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Home=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=r(s("./src/screens/home/v2/index.tsx")),d=s("./node_modules/react/jsx-runtime.js"),r={title:"screens/Home",component:i.default};t.default=r;(t.Home=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Home')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/voices/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,d.jsx)(n.StorybookSPA,{children:(0,d.jsx)(n.StorybookList,{children:(0,d.jsx)(i.default,Object.assign({},(0,n.getStorybookArgs)("Voices")))})})}var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Voices=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=r(s("./src/screens/home/voices/index.tsx")),d=s("./node_modules/react/jsx-runtime.js"),r={title:"screens/Voices",component:i.default};t.default=r;(t.Voices=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Voices')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/wiki/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,d.jsx)(n.StorybookSPA,{children:(0,d.jsx)(n.StorybookList,{children:(0,d.jsx)(i.default,Object.assign({},(0,n.getStorybookArgs)("SubjectWiki")))})})}var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SubjectWiki=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=r(s("./src/screens/home/wiki/index.tsx")),d=s("./node_modules/react/jsx-runtime.js"),r={title:"screens/SubjectWiki",component:i.default};t.default=r;(t.SubjectWiki=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('SubjectWiki')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/works/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,d.jsx)(n.StorybookSPA,{children:(0,d.jsx)(n.StorybookList,{children:(0,d.jsx)(i.default,Object.assign({},(0,n.getStorybookArgs)("Works")))})})}var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Works=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=r(s("./src/screens/home/works/index.tsx")),d=s("./node_modules/react/jsx-runtime.js"),r={title:"screens/Works",component:i.default};t.default=r;(t.Works=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Works')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/tag/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=t.DEFAULT_ORDER=void 0;var o=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),s=(t.NAMESPACE="ScreenTag",s.MODEL_TAG_ORDERBY.getValue("标注数")),o=(t.DEFAULT_ORDER=s,{visibleBottom:o._.window.height,airtime:"",month:"",hide:!1,ota:{}}),s=(t.EXCLUDE_STATE=o,Object.assign({order:s,list:!0,fixed:!1,collected:!0},o,{_loaded:!1}));t.STATE=s},"./src/screens/home/tag/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=t.$,o=(t=s.params).type,t=t.tag;return(0,a.jsx)(r.Header,{title:t||d.MODEL_SUBJECT_TYPE.getTitle(o)+"标签",alias:"用户标签",hm:[s.url,"Tag"],headerRight:function(){return(0,a.jsx)(r.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("用户标签.右上角菜单",{key:e}),(0,n.open)(s.url))},children:(0,a.jsx)(r.Heatmap,{id:"用户标签.右上角菜单"})})}})});t.default=s;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/tag/header/index.tsx#header"})}catch(e){}},"./src/screens/home/tag/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/tag/header/index.tsx")),a=o(s("./src/screens/home/tag/tool-bar/index.tsx")),l=o(s("./src/screens/home/tag/list/index.tsx")),o=o(s("./src/screens/home/tag/store.ts")),u=s("./node_modules/react/jsx-runtime.js"),s=(0,n.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){var e=s.state,t=e._loaded,e=e.fixed;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.default,{}),(0,u.jsxs)(r.Page,{children:[e&&(0,u.jsx)(a.default,{}),t&&(0,u.jsx)(l.default,{})]})]})})});t.default=s;try{tag.displayName="tag",tag.__docgenInfo={description:"",displayName:"tag",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/index.tsx#tag"]={docgenInfo:tag.__docgenInfo,name:"tag",path:"src/screens/home/tag/index.tsx#tag"})}catch(e){}},"./src/screens/home/tag/list/grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./node_modules/react/jsx-runtime.js"),u={id:"用户标签.跳转",data:{type:"grid"}};s=(0,o.obc)(function(e,t){var s=e.item,o=e.index,e=e.numColumns,r=t.$,t=t.navigation,r=r.state.airtime,n=String(s.id).replace("/subject/",""),n=d.collectionStore.collect(n);return(0,l.jsx)(i.ItemCollectionsGrid,Object.assign({navigation:t,style:(d._.isPad||d._.isLandscape)&&!(o%e)&&d._.container.left,index:o,event:u,collection:n,num:e},s,{airtime:""===r&&(0,a.matchYear)(s.tip),isCollect:s.collected}))});t.default=s},"./src/screens/home/tag/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=o(s("./src/screens/home/tag/tool-bar/index.tsx")),c=o(s("./src/screens/home/tag/list/list/index.tsx")),m=o(s("./src/screens/home/tag/list/grid/index.tsx")),p=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s,o,t=t.$,r=(n=t.state).hide,n=n.fixed;return!t.list._loaded||r?(0,p.jsxs)(p.Fragment,{children:[!n&&(0,p.jsx)(u.default,{}),(0,p.jsx)(i.Loading,{})]}):(s=t.state.list,o=s?void 0:d._.portrait(3,5),(0,p.jsx)(i.ListView,{keyExtractor:a.keyExtractor,contentContainerStyle:d._.container.bottom,numColumns:o,data:t.list,scrollToTop:!0,footerEmptyDataText:(0,a.x18s)(t.params.tag)?l.TEXT_18X:void 0,ListHeaderComponent:!n&&(0,p.jsx)(u.default,{}),renderItem:function(e){var t=e.item,e=e.index;return s?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.default,{item:t,index:e}),!e&&(0,p.jsx)(i.Heatmap,{id:"用户标签.跳转"})]}):(0,p.jsx)(m.default,{item:t,index:e,numColumns:o})},scrollEventThrottle:16,onScroll:t.onScroll,onHeaderRefresh:t.onHeaderRefresh,onFooterRefresh:t.onFooterRefresh},""+d._.orientation+o))});t.default=o;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/tag/list/index.tsx#list"})}catch(e){}},"./src/screens/home/tag/list/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),n=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js"),d={id:"用户标签.跳转",data:{type:"list"}};s=(0,o.obc)(function(e,t){var s=e.item,e=e.index,t=t.navigation,o=String(s.id).replace("/subject/",""),o=n.collectionStore.collect(o);return(0,i.jsx)(r.ItemSearch,Object.assign({style:n._.container.item,navigation:t,index:e,event:d,collection:o},s))});t.default=s},"./src/screens/home/tag/store.ts":(e,t,s)=>{var l=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),u=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),_=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),h=s("./src/utils/fetch/index.ts"),x=s("./src/utils/kv/index.ts"),y=s("./src/constants/index.ts"),g=s("./src/screens/home/tag/ds.ts"),v=["collected"];function S(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=o?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var T,O=[],a=(s=o.default,(0,a.default)(E,s),T=S(E),(0,d.default)(E,[{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"tag",get:function(){var e=this.params,t=e.type,e=e.tag,s=this.state,o=s.airtime,s=s.month;return _.tagStore.tag(e,t,s?o+"-"+s:o)}},{key:"list",get:function(){return this.tag._loaded?this.state.collected?this.tag:Object.assign({},this.tag,{list:this.tag.list.filter(function(e){return!e.collected})}):this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):y.LIST_EMPTY}},{key:"url",get:function(){var e=this.params,t=e.type,e=e.tag,s=this.state,o=s.order,o=void 0===o?"collects":o,r=s.airtime,s=s.month;return(0,y.HTML_TAG)(encodeURIComponent(e),t,o,1,s?r+"-"+s:r)}},{key:"thirdPartyKey",get:function(){var e=this.params,t=e.type,e=e.tag,s=this.state,o=s.airtime,s=s.month;return"tag_"+[e,t,s?o+"-"+s:o].join("_")}},{key:"subject",value:function(e){return(0,j.computed)(function(){return _.subjectStore.subject(e)}).get()}}]),(0,f.default)((o=E).prototype,"ota",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"ota"),o.prototype),(0,f.default)(o.prototype,"tag",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"tag"),o.prototype),(0,f.default)(o.prototype,"list",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"list"),o.prototype),(0,f.default)(o.prototype,"url",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),(0,f.default)(o.prototype,"thirdPartyKey",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"thirdPartyKey"),o.prototype),o);function E(){var a;(0,i.default)(this,E);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return a=T.call.apply(T,[this].concat(s)),(0,p.default)((0,u.default)(a),"params",void 0),(0,p.default)((0,u.default)(a),"state",(0,j.observable)(g.STATE)),(0,p.default)((0,u.default)(a),"init",(0,n.default)(l.mark(function e(){var t,s;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getStorage(g.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,t=Object.assign({},t,{order:t.order===y.MODEL_TAG_ORDERBY.getValue("排名")?g.DEFAULT_ORDER:t.order},g.EXCLUDE_STATE,{_loaded:!0}),(s=a.params.airtime)&&(t.airtime=s),a.setState(t),e.abrupt("return",a.fetchTag(!0));case 11:case"end":return e.stop()}},e)}))),(0,p.default)((0,u.default)(a),"fetchTag",(t=(0,n.default)(l.mark(function e(t){var s,o,r,n,i,d;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&a.fetchThirdParty(),i=a.params,d=i.type,i=i.tag,r=a.state,s=r.order,o=r.airtime,r=r.month,e.next=5,_.tagStore.fetchTag({text:i,type:d,order:s,airtime:r?o+"-"+r:o},t);case 5:return(n=e.sent).list.length&&a.thirdPartyKey in a.state.ota&&(d=(null==(i=a.ota)?void 0:i.ts)||0,604800<=(0,b.getTimestamp)()-d)&&a.updateThirdParty(),setTimeout(function(){_.collectionStore.fetchCollectionStatusQueue(n.list.filter(function(e){return e.collected}).map(function(e){return String(e.id).replace("/subject/","")}))},160),e.abrupt("return",n);case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,p.default)((0,u.default)(a),"fetchThirdParty",(0,n.default)(l.mark(function e(){var t;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.ota||a.tag._loaded){e.next=8;break}return e.next=3,(0,x.get)(a.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return a.setState({ota:(0,p.default)({},a.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:a.setState({ota:(0,p.default)({},a.thirdPartyKey,Object.assign({},t,{_loaded:(0,b.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,u.default)(a),"updateThirdParty",(0,n.default)(l.mark(function e(){return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(O.includes(a.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,x.update)(a.thirdPartyKey,{list:a.tag.list.map(function(e){e.collected;return(0,r.default)(e,v)})}),O.push(a.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,u.default)(a),"onHeaderRefresh",function(){return a.fetchTag(!0)}),(0,p.default)((0,u.default)(a),"onFooterRefresh",function(){return!(a.tag.list.length<24)&&a.fetchTag()}),(0,p.default)((0,u.default)(a),"resetScrollView",function(){a.setState({hide:!0}),setTimeout(function(){a.setState({hide:!1}),a.setStorage(g.NAMESPACE)},0)}),(0,p.default)((0,u.default)(a),"onOrderSelect",function(e){a.resetScrollView(),(0,h.t)("用户标签.排序选择",{label:e}),a.setState({order:y.MODEL_TAG_ORDERBY.getValue(e)}),a.fetchTag(!0)}),(0,p.default)((0,u.default)(a),"onAirdateSelect",function(e){a.resetScrollView(),(0,h.t)("用户标签.年选择",{airtime:e}),a.setState({airtime:"全部"===e?"":e,month:""}),a.fetchTag(!0)}),(0,p.default)((0,u.default)(a),"onMonthSelect",function(e){""===a.state.airtime?(0,b.info)("请先选择年"):(a.resetScrollView(),(0,h.t)("用户标签.月选择",{month:e}),a.setState({month:"全部"===e?"":e}),a.fetchTag(!0))}),(0,p.default)((0,u.default)(a),"onToggleList",function(){a.resetScrollView();var e=a.state.list;(0,h.t)("用户标签.切换布局",{list:!e}),a.setState({list:!e})}),(0,p.default)((0,u.default)(a),"onToggleFixed",function(){var e=a.state.fixed;a.setState({fixed:!e}),a.setStorage(g.NAMESPACE)}),(0,p.default)((0,u.default)(a),"onToggleCollected",function(){var e=a.state.collected;a.setState({collected:!e}),a.setStorage(g.NAMESPACE)}),(0,p.default)((0,u.default)(a),"onScroll",b.updateVisibleBottom.bind((0,u.default)(a))),a}t.default=a},"./src/screens/home/tag/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/tag/tool-bar/sort.tsx")),a=o(s("./src/screens/home/tag/tool-bar/year.tsx")),l=o(s("./src/screens/home/tag/tool-bar/month.tsx")),u=o(s("./src/screens/home/tag/tool-bar/more.tsx")),c=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){return t=t.$.state.list,(0,c.jsxs)(r.ToolBar,{style:!t&&n._.mb.sm,children:[(0,c.jsx)(d.default,{}),(0,c.jsx)(a.default,{}),(0,c.jsx)(l.default,{}),(0,c.jsx)(u.default,{})]})});t.default=o;try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/tag/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/home/tag/tool-bar/month.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/constants/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=(t=t.$).state.month;return(0,i.jsx)(r.ToolBar.Popover,{data:n.DATA_MONTH,text:s?s+"月":"月",type:s?"desc":"sub",heatmap:"用户标签.月选择",onSelect:t.onMonthSelect})});t.default=s;try{month.displayName="month",month.__docgenInfo={description:"",displayName:"month",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/month.tsx#month"]={docgenInfo:month.__docgenInfo,name:"month",path:"src/screens/home/tag/tool-bar/month.tsx#month"})}catch(e){}},"./src/screens/home/tag/tool-bar/more.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=t.$,o=(t=s.state).fixed,r=t.list,t=t.collected;return(0,d.jsx)(n.ToolBar.Popover,{data:["布局（"+(r?"列表":"网格")+"）","筛选（"+(o?"固定":"浮动")+"）","收藏（"+(t?"显示":"隐藏")+"）"],icon:"md-more-vert",iconColor:i._.colorDesc,iconSize:20,type:"desc",transparent:!0,onSelect:function(e){return e.includes("布局")?s.onToggleList():e.includes("筛选")?s.onToggleFixed():e.includes("收藏")?s.onToggleCollected():void 0}})});t.default=s;try{more.displayName="more",more.__docgenInfo={description:"",displayName:"more",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/more.tsx#more"]={docgenInfo:more.__docgenInfo,name:"more",path:"src/screens/home/tag/tool-bar/more.tsx#more"})}catch(e){}},"./src/screens/home/tag/tool-bar/sort.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=(t=t.$).state.order;return(0,d.jsx)(r.ToolBar.Popover,{data:i.TAG_ORDERBY.map(function(e){return e.label}),icon:"md-sort",iconColor:n._.colorDesc,text:s?i.MODEL_TAG_ORDERBY.getLabel(s):"名称",type:"desc",heatmap:"用户标签.排序选择",onSelect:t.onOrderSelect})});t.default=s;try{sort.displayName="sort",sort.__docgenInfo={description:"",displayName:"sort",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/sort.tsx#sort"]={docgenInfo:sort.__docgenInfo,name:"sort",path:"src/screens/home/tag/tool-bar/sort.tsx#sort"})}catch(e){}},"./src/screens/home/tag/tool-bar/year.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/constants/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=(t=t.$).state.airtime;return(0,i.jsx)(r.ToolBar.Popover,{data:n.DATA_AIRTIME,text:s||"年",type:s?"desc":"sub",heatmap:"用户标签.年选择",onSelect:t.onAirdateSelect})});t.default=s;try{year.displayName="year",year.__docgenInfo={description:"",displayName:"year",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/year.tsx#year"]={docgenInfo:year.__docgenInfo,name:"year",path:"src/screens/home/tag/tool-bar/year.tsx#year"})}catch(e){}},"./src/screens/home/v2/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TABS_WITH_GAME=t.TABS=t.H_TABBAR=void 0;s=[{key:"all",title:"全部"},{key:"anime",title:"动画"},{key:"book",title:"书籍"},{key:"real",title:"三次元"}],t.TABS=s,s=[].concat(s,[{key:"game",title:"游戏"}]);t.TABS_WITH_GAME=s;t.H_TABBAR=48},"./src/screens/home/v2/empty/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/components/mesume/utils.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/screens/home/v2/empty/styles.ts"),u=s("./node_modules/react/jsx-runtime.js"),c={"全部":"当前没有可管理的条目哦","动画":"当前没有在追的番组哦","书籍":"当前没有在读的书籍哦","三次元":"当前没有在追的电视剧哦","游戏":"当前没有在玩的游戏哦"};s=(0,o.obc)(function(e,t){var s=e.title,e=e.length,o=t.$,r=t.navigation,t=(0,l.memoStyles)(),n=o.state.filter;return(0,u.jsxs)(i.Flex,{style:e?t.top:t.empty,direction:"column",justify:"center",children:[(0,u.jsx)(i.Mesume,{size:80}),(0,u.jsx)(i.Text,{style:t.text,type:"sub",size:13,align:"center",children:e?(0,d.randomSpeech)():c[s]}),!!n&&e<=3&&(0,u.jsx)(i.Button,{style:t.btn,type:"ghostMain",onPress:function(){(0,a.t)("首页.再搜索",{type:s,value:n}),r.push("Search",{_type:"全部"===s?"条目":s,_value:n})},children:"前往搜索"})]})});t.default=s},"./src/screens/home/v2/empty/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{empty:{minHeight:320},top:{minHeight:280},text:Object.assign({marginTop:o._.md,maxWidth:o._.window.contentWidth-2*o._.md},o._.fontSize(14)),btn:{marginTop:o._.lg,width:120}}});t.memoStyles=s},"./src/screens/home/v2/filter/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),f=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),j=s("./src/screens/home/v2/filter/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");function b(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=c.default.Component,(0,d.default)(x,s),h=b(x),(0,n.default)(x,[{key:"show",get:function(){return f.systemStore.setting.homeFilter}},{key:"filter",get:function(){var e=this.context.$,t=e.state.filterPage;if(0<=t&&t<=e.tabs.length){var s=e.state.filter;if(this.props.title===e.tabs[t].title)return s}return""}},{key:"render",value:function(){var e,t,s,o;return this.show?(t=(e=this.context.$).state.progress,s=this.props.length,o=this.state.focus,(0,_.jsxs)(m.default,{style:this.styles.filter,children:[(0,_.jsx)(p.Input,{style:this.styles.input,clearButtonMode:"never",defaultValue:this.filter,onFocus:this.onFocus,onBlur:this.onBlur,onChangeText:e.onFilterChange}),!o&&!this.filter&&(0,_.jsxs)(p.Flex,{style:this.styles.icon,justify:"center",pointerEvents:"none",children:[t.fetching&&(0,_.jsx)(m.default,{style:this.styles.loading,children:(0,_.jsx)(p.Loading.Medium,{color:f._.colorSub,size:16})}),s?(0,_.jsx)(p.Text,{type:"icon",bold:!0,size:15,children:s}):(0,_.jsx)(p.Iconfont,{name:"md-search",size:18})]})]})):null}},{key:"styles",get:function(){return(0,j.memoStyles)()}}]);var h,c=x;function x(){var e;(0,r.default)(this,x);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=h.call.apply(h,[this].concat(s)),(0,u.default)((0,i.default)(e),"state",{focus:!1}),(0,u.default)((0,i.default)(e),"onFocus",function(){e.setState({focus:!0})}),(0,u.default)((0,i.default)(e),"onBlur",function(){e.setState({focus:!1})}),e}d=(0,o.obc)(c);t.default=d;try{filter.displayName="filter",filter.__docgenInfo={description:"",displayName:"filter",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"enum",value:[{value:'"动画"'},{value:'"书籍"'},{value:'"游戏"'},{value:'"三次元"'},{value:'"全部"'}]}},length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/filter/index.tsx#filter"]={docgenInfo:filter.__docgenInfo,name:"filter",path:"src/screens/home/v2/filter/index.tsx#filter"})}catch(e){}},"./src/screens/home/v2/filter/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{filter:{height:64,paddingVertical:12,paddingHorizontal:o._.wind,backgroundColor:o._.colorBg},input:Object.assign({height:40,paddingVertical:0},o._.fontSize16,{fontWeight:"800",textAlign:"center",backgroundColor:o._.select(o._.colorBorder,o._.colorPlain),borderRadius:40}),icon:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0},loading:{position:"absolute",zIndex:2,top:24,right:14,width:44,height:44}}});t.memoStyles=s},"./src/screens/home/v2/grid-info/book-next-btn/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/v2/grid-info/book-next-btn/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.epStatus,r=e.volStatus,n=t.$;return(0,a.jsx)(i.Touchable,{style:d.styles.touchable,onPress:function(){return n.doUpdateNext(s,o,r)},children:(0,a.jsx)(i.Flex,{justify:"center",children:(0,a.jsx)(i.Iconfont,{style:d.styles.icon,name:"md-check-circle-outline",size:18})})})});t.default=s},"./src/screens/home/v2/grid-info/book-next-btn/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({icon:{marginBottom:-1},touchable:{padding:s._.sm}});t.styles=s},"./src/screens/home/v2/grid-info/btn-next-ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/grid-info/btn-next-ep/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=t.$;return(e=o.nextWatchEp(s).sort)?(0,d.jsx)(n.Touchable,{style:i.styles.touchable,onPress:function(){o.doWatchedNextEp(s)},children:(0,d.jsxs)(n.Flex,{justify:"center",children:[(0,d.jsx)(n.Iconfont,{style:i.styles.icon,name:"md-check-circle-outline",size:18}),(0,d.jsx)(r.default,{style:i.styles.placeholder,children:(0,d.jsx)(n.Text,{type:"sub",children:e})})]})}):null});t.default=s},"./src/screens/home/v2/grid-info/btn-next-ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({icon:{marginBottom:-1},touchable:{padding:s._.sm},placeholder:{marginBottom:-1.5,marginLeft:s._.sm}});t.styles=s},"./src/screens/home/v2/grid-info/count/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/v2/grid-info/book-next-btn/index.tsx")),l=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s=e.subjectId,o=void 0===(o=e.subject)?{}:o,e=e.epStatus,r=(t=t.$).subject(s);return"游戏"===(r=d.MODEL_SUBJECT_TYPE.getTitle((null==r?void 0:r.type)||(null==o?void 0:o.type)))?null:"书籍"===r?(o=(r=(void 0===(o=t.collection.list)?[]:o).find(function(e){return e.subject_id===s})).ep_status,r=r.vol_status,(0,l.jsxs)(n.Flex,{justify:"end",children:[(0,l.jsxs)(n.Text,{type:"primary",size:20,children:[(0,l.jsxs)(n.Text,{type:"primary",size:12,lineHeight:20,children:["Chap."," "]}),o]}),(0,l.jsx)(a.default,{subjectId:s,epStatus:o+1,volStatus:r}),(0,l.jsxs)(n.Text,{style:i._.ml.md,type:"primary",size:20,children:[(0,l.jsxs)(n.Text,{type:"primary",size:12,lineHeight:20,children:["Vol."," "]}),r]}),(0,l.jsx)(a.default,{subjectId:s,epStatus:o,volStatus:r+1})]})):(0,l.jsxs)(n.Text,{type:"primary",size:18,children:[e||0,(0,l.jsxs)(n.Text,{type:"sub",lineHeight:18,children:[" ","/ ",t.countRight(s)]})]})});t.default=o},"./src/screens/home/v2/grid-info/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/v2/grid-item/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=void 0===(o=e.subject)?{}:o,e=e.onPress,t=t.$.subject(s),r=(0,d.memoStyles)(),r=i._.isMobileLanscape?60:r.item.width;return(0,a.jsx)(n.Cover,{size:r,height:1.4*r,src:(null==t||null==(r=t.images)?void 0:r.medium)||(null==o||null==(t=o.images)?void 0:t.medium)||"",radius:!0,shadow:!0,onPress:e},s)});t.default=s},"./src/screens/home/v2/grid-info/eps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/v2/grid-info/eps/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=t.$,r=t.navigation,e=a.systemStore.setting.homeGridEpAutoAdjust,t=o.state.flip,n=o.eps(s);return(0,u.jsx)(i.default,{style:l.styles.eps,children:(0,u.jsx)(d.Eps,{grid:!0,numbersOfLine:a._.isMobileLanscape?12:e?a._.device(o.epsCount(s,!1)<=18?6:7,8):a._.device(7,8),lines:a._.isMobileLanscape?1:3,login:o.isLogin,subjectId:s,eps:n,userProgress:o.userProgress(s),flip:t===s,onFliped:o.afterFlipEps,onSelect:function(e,t){o.doEpsSelect(e,t,s,r)}})})});t.default=s},"./src/screens/home/v2/grid-info/eps/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({eps:{paddingRight:s._.xs,marginTop:s._.xs}});t.styles=s},"./src/screens/home/v2/grid-info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.index-of.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=o(s("./src/screens/home/v2/grid-info/cover/index.tsx")),c=o(s("./src/screens/home/v2/grid-info/onair/index.tsx")),m=o(s("./src/screens/home/v2/grid-info/title/index.tsx")),p=o(s("./src/screens/home/v2/grid-info/count/index.tsx")),f=o(s("./src/screens/home/v2/grid-info/tool-bar/index.tsx")),j=o(s("./src/screens/home/v2/grid-info/eps/index.tsx")),_=s("./src/screens/home/v2/grid-info/styles.ts"),b=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s=void 0===(r=e.subjectId)?0:r,o=void 0===(r=e.subject)?{}:r,e=void 0===(r=e.epStatus)?"":r,r=t.$,n=t.navigation,t=(0,_.memoStyles)(),r=-1!==r.state.top.indexOf(s);return(0,b.jsxs)(d.Flex,{style:t.item,align:"start",children:[(0,b.jsxs)(i.default,{children:[(0,b.jsx)(u.default,{subjectId:s,subject:o,onPress:function(){var e;(0,l.t)("首页.跳转",{to:"Subject",from:"grid",subjectId:s}),n.push("Subject",{subjectId:s,_jp:o.name,_cn:o.name_cn||o.name,_image:(null==o||null==(e=o.images)?void 0:e.medium)||""})}}),(0,b.jsx)(c.default,{subjectId:s})]}),(0,b.jsxs)(d.Flex.Item,{style:t.info,children:[(0,b.jsx)(m.default,{subjectId:s,subject:o}),(0,b.jsxs)(d.Flex,{style:a._.isPad?[a._.mt.sm,a._.mb.xs]:a._.mb.xs,children:[(0,b.jsx)(d.Flex.Item,{children:(0,b.jsx)(p.default,{subjectId:s,subject:o,epStatus:e})}),(0,b.jsx)(f.default,{subjectId:s,subject:o})]}),(0,b.jsx)(j.default,{subjectId:s})]}),r&&(0,b.jsx)(i.default,{style:t.dot})]})});t.default=o},"./src/screens/home/v2/grid-info/onair/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s,o,e=e.subjectId,t=t.$,r=i._.isMobileLanscape?i._.mt.xs:i._.mt.md;return t.isToday(e)?(s=(o=t.onAirCustom(e)).h,o=o.m,(0,d.jsxs)(n.Text,{style:r,type:"success",align:"center",size:13,bold:!0,children:[s,":",o]})):t.isNextDay(e)?(o=(s=t.onAirCustom(e)).h,t=s.m,(0,d.jsxs)(n.Text,{style:r,type:"sub",align:"center",size:13,bold:!0,children:["明天 ",o,":",t]})):null});t.default=s},"./src/screens/home/v2/grid-info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),r=s("./src/screens/home/v2/grid-item/styles.ts"),s=o._.memoStyles(function(){var e=(0,r.memoStyles)();return{item:{paddingVertical:o._.device(16,32),paddingHorizontal:o._.wind},info:{marginLeft:o._.device(e.item.marginLeft,o._.md)},dot:{position:"absolute",top:6,right:0,borderWidth:o._.r(8),borderTopColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent",borderLeftColor:o._.colorIcon,transform:[{rotate:"-45deg"}],opacity:.8}}});t.memoStyles=s},"./src/screens/home/v2/grid-info/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,e=void 0===(e=e.subject)?{}:e,o=(t=t.$).subject(s),o=(0,n.HTMLDecode)((0,n.cnjp)((null==o?void 0:o.name_cn)||(null==e?void 0:e.name_cn),(null==o?void 0:o.name)||(null==e?void 0:e.name)));return(0,i.jsx)(r.Touchable,{onPress:this.onPress,children:(0,i.jsx)(r.Text,{size:15,numberOfLines:14<=t.eps(s).length?1:2,bold:!0,children:o})})});t.default=s},"./src/screens/home/v2/grid-info/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.index-of.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),a=s("./src/components/index.ts"),l=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),c=o(s("./src/screens/home/v2/item/btn-origin/index.tsx")),m=o(s("./src/screens/home/v2/grid-info/btn-next-ep/index.tsx")),p=s("./src/screens/home/v2/grid-info/tool-bar/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s=e.subjectId,e=void 0===(e=e.subject)?{}:e,o=t.$,t=o.subject(s),r=u.MODEL_SUBJECT_TYPE.getTitle(t.type||(null==e?void 0:e.type)),n=(0,l.cnjp)((null==t?void 0:t.name_cn)||(null==e?void 0:e.name_cn),(null==t?void 0:t.name)||(null==e?void 0:e.name)),i=(0,l.cnjp)((null==t?void 0:t.name)||(null==e?void 0:e.name),(null==t?void 0:t.name_cn)||(null==e?void 0:e.name_cn));return(0,f.jsxs)(a.Flex,{style:d._.mt.xs,children:[("动画"===r||"三次元"===r)&&(0,f.jsx)(c.default,{subjectId:s,isTop:-1!==o.state.top.indexOf(s)}),(0,f.jsx)(m.default,{subjectId:s}),(0,f.jsx)(a.Touchable,{style:p.styles.touchable,onPress:function(){o.showManageModal(s,{title:n,desc:i})},children:(0,f.jsx)(a.Iconfont,{name:"md-star-outline",size:19})})]})});t.default=o},"./src/screens/home/v2/grid-info/tool-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({touchable:{padding:s._.sm,marginLeft:s._.sm}});t.styles=s},"./src/screens/home/v2/grid-item/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=s("./src/screens/home/v2/grid-item/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.subject,r=e.epStatus,n=t.$,e=(0,u.memoStyles)(),t=a.systemStore.setting.homeGridCoverLayout,t=l.MODEL_SETTING_HOME_GRID_COVER_LAYOUT.getLabel(t);return(0,c.jsx)(i.Touchable,{animate:!0,onPress:function(){n.selectGirdSubject(s,{subject_id:s,subject:o,ep_status:r})},children:(0,c.jsx)(d.Cover,{size:e.item.width,height:e.item.width*("长方形"===t?1.4:1),src:(null==o||null==(e=o.images)?void 0:e.medium)||"",shadow:!0,radius:!0,delay:!1})})});t.default=s},"./src/screens/home/v2/grid-item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),a=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/v2/grid-item/opacity/index.tsx")),m=o(s("./src/screens/home/v2/grid-item/cover/index.tsx")),p=s("./src/screens/home/v2/grid-item/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s=void 0===(s=e.subject)?{}:s,o=void 0===(o=e.subjectId)?0:o,e=e.epStatus,t=t.$,r=(0,p.memoStyles)(),n=l.systemStore.setting.homeGridTitle;return(0,f.jsxs)(i.default,{style:r.item,children:[(0,f.jsx)(c.default,{subjectId:o,children:(0,f.jsx)(m.default,{subjectId:o,subject:s,epStatus:e})}),(0,f.jsx)(a.OnairProgress,{epStatus:e,current:t.currentOnAir(o),total:t.epsCount(o)}),n&&(0,f.jsx)(d.Text,{style:[l._.mt.sm,l._.mb.xs],size:11,bold:!0,numberOfLines:2,children:(0,u.cnjp)(s.name_cn,s.name)})]})});t.default=o},"./src/screens/home/v2/grid-item/opacity/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/grid-item/opacity/styles.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,e=e.children,t=(t.$.state.grid||{}).subject_id;return(0,i.jsx)(r.default,{style:t===s&&n.styles.active,children:e})});t.default=s},"./src/screens/home/v2/grid-item/opacity/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts")._.create({active:{opacity:.64}});t.styles=s},"./src/screens/home/v2/grid-item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){var e=o._.isMobileLanscape?9:o._.device(4,5);return{item:{width:(o._.window.contentWidth-10*(e-1))/e,marginLeft:10,marginBottom:10},active:{opacity:.5}}});t.memoStyles=s},"./src/screens/home/v2/grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./src/components/index.ts"),i=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/v2/grid/info/index.tsx")),a=o(s("./src/screens/home/v2/grid/list/index.tsx")),l=o(s("./src/screens/home/v2/grid/linear/index.tsx")),u=s("./src/screens/home/v2/grid/styles.ts"),c=s("./node_modules/react/jsx-runtime.js"),m={};o=(0,i.obc)(function(e,t){e=void 0===(e=e.title)?"全部":e;return(t=t.$).tabsLabel===e&&(m[e]=!0),t.tabsLabel===e||m[e]?t.collection._loaded?(t=(0,u.memoStyles)(),(0,c.jsxs)(r.default,{style:t.container,children:[(0,c.jsx)(d.default,{title:e}),(0,c.jsxs)(r.default,{children:[(0,c.jsx)(l.default,{}),(0,c.jsx)(a.default,{title:e})]})]})):(0,c.jsx)(n.Loading,{}):null});t.default=o},"./src/screens/home/v2/grid/info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.PREV_TEXT=void 0;t.PREV_TEXT={"全部":"条目","动画":"番组","书籍":"书籍","三次元":"电视剧","游戏":"游戏"}},"./src/screens/home/v2/grid/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),l=o(s("./src/screens/home/v2/grid-info/index.tsx")),u=s("./src/screens/home/v2/grid/styles.ts"),c=s("./src/screens/home/v2/grid/info/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s,o,r,n,e=e.title;return(t=t.$).collection._loaded?(s=(0,u.memoStyles)(),n=t.state,o=n.current,n=n.grid,n=(r="游戏"===e)?n:t.currentCollection(e).list.find(function(e){return e.subject_id===o}),(0,m.jsx)(i.default,{style:r?s.gameInfo:s.info,children:n?(0,m.jsx)(l.default,{subjectId:n.subject_id,subject:n.subject,epStatus:n.ep_status}):(0,m.jsxs)(d.Flex,{style:s.noSelect,justify:"center",direction:"column",children:[(0,m.jsx)(d.Mesume,{size:80}),(0,m.jsxs)(d.Text,{style:a._.mt.sm,type:"sub",align:"center",children:["请先点击下方",c.PREV_TEXT[e]]})]})})):(0,m.jsx)(d.Loading,{})});t.default=o},"./src/screens/home/v2/grid/linear/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./node_modules/expo-linear-gradient/build/LinearGradient.js")),n=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/grid/linear/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.ob)(function(){return n._.isDark?(0,d.jsx)(r.LinearGradient,{style:i.styles.linear,colors:["rgba("+n._.colorPlainRaw.join()+", 1)","rgba("+n._.colorPlainRaw.join()+", 0.8)","rgba("+n._.colorPlainRaw.join()+", 0.24)","rgba("+n._.colorPlainRaw.join()+", 0)"]}):null});t.default=s},"./src/screens/home/v2/grid/linear/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts")._.create({linear:{position:"absolute",zIndex:1,right:0,top:0,left:0,height:24}});t.styles=s},"./src/screens/home/v2/grid/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/screens/home/v2/grid/list/utils.tsx"),o=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/v2/grid/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var e=e.title,t=t.$,s=(0,l.memoStyles)(),o=d.systemStore.setting.homeGridCoverLayout,r=d._.isMobileLanscape?9:d._.device(4,5);return(0,u.jsx)(i.PaginationList2,{contentContainerStyle:s.contentContainerStyle,keyExtractor:a.keyExtractor,data:t.currentCollection(e).list,limit:"square"===o?20:16,numColumns:r,footerNoMoreDataComponent:(0,u.jsx)(n.default,{}),footerNoMoreDataText:"",renderItem:a.renderItem,onHeaderRefresh:t.onHeaderRefresh},""+d._.orientation+r)});t.default=s},"./src/screens/home/v2/grid/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=d,t.renderItem=a,o(s("./node_modules/react/index.js")),s("./src/constants/index.ts")),n=o(s("./src/screens/home/v2/grid-item/index.tsx")),i=s("./node_modules/react/jsx-runtime.js");function d(e){return String(e.subject_id||e.id)}function a(e){e=e.item;return(0,i.jsx)(n.default,{subjectId:e.subject_id||e.id,subject:e.subject||{id:e.id,images:{common:e.cover,grid:e.cover,large:e.cover,medium:e.cover,small:e.cover},name:e.name,name_cn:e.nameCn,summary:"",type:r.MODEL_SUBJECT_TYPE.getValue("游戏"),url:""},epStatus:e.ep_status})}try{d.displayName="keyExtractor",d.__docgenInfo={description:"",displayName:"keyExtractor",props:{subject_id:{defaultValue:null,description:"",name:"subject_id",required:!0,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/grid/list/utils.tsx#keyExtractor"]={docgenInfo:d.__docgenInfo,name:"keyExtractor",path:"src/screens/home/v2/grid/list/utils.tsx#keyExtractor"})}catch(e){}try{a.displayName="renderItem",a.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/grid/list/utils.tsx#renderItem"]={docgenInfo:a.__docgenInfo,name:"renderItem",path:"src/screens/home/v2/grid/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/home/v2/grid/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){var e=o._.isMobileLanscape?132:244;return{container:{flex:1,paddingTop:o._.ios(o._.tabsHeaderHeight,0)+o._.xs,backgroundColor:o._.select(o._.colorPlain,o._.deep(o._.colorPlain,o._.colorBg))},info:{width:"100%",height:e},gameInfo:{width:"100%",height:160},noSelect:{width:"100%",height:"100%"},contentContainerStyle:{paddingTop:16,paddingBottom:o._.ios(o._.tabBarHeight+o._.md,o._.tabBarHeight+o._.md-o._.tabBarHeight)+e,paddingLeft:o._.wind-o._.sm-2}}});t.memoStyles=s},"./src/screens/home/v2/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/screens/discovery/index/ds.ts"),c=s("./src/screens/home/v2/header/styles.ts"),m=s("./node_modules/react/jsx-runtime.js"),p={id:"首页.跳转"};s=(0,o.obc)(function(e,t){var s=t.navigation,o=(t=a.systemStore.setting).homeTopLeftCustom,t=t.homeTopRightCustom,r=u.MENU_MAP[o],n=u.MENU_MAP[t];return(0,m.jsx)(d.LogoHeader,{left:(0,m.jsxs)(d.IconNotify,{style:c.styles.icon,navigation:s,event:p,children:[(0,m.jsx)(i.Heatmap,{right:-39,id:"首页.跳转",to:"Notify",alias:"电波提醒"}),(0,m.jsx)(i.Heatmap,{right:-92,id:"其他.切换主题",transparent:!0})]}),right:(0,m.jsxs)(i.Flex,{style:a._.mr.xs,children:[!!r&&(0,m.jsx)(d.IconTabsHeader,{style:c.styles.icon,name:r.icon,text:r.text,size:(r.size||23)-1,onPress:function(){(0,l.t)("首页.跳转",{to:r.key}),s.push(r.key)}}),!!n&&(0,m.jsx)(d.IconTabsHeader,{style:c.styles.iconRight,name:n.icon,text:n.text,size:(n.size||23)-1,onPress:function(){(0,l.t)("首页.跳转",{to:n.key}),s.push(n.key)}})]})})});t.default=s;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/v2/header/index.tsx#header"})}catch(e){}},"./src/screens/home/v2/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({icon:{marginBottom:0,marginLeft:s._.xs,borderRadius:40,overflow:"hidden"},iconRight:{marginHorizontal:s._.xs,marginBottom:0,borderRadius:40,overflow:"hidden"}});t.styles=s},"./src/screens/home/v2/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.ob)(function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Heatmap,{right:n._.wind+62,bottom:n._.window.height-n._.tabsHeaderHeight-12,id:"首页.标签页切换",transparent:!0}),(0,i.jsx)(r.Heatmap,{right:n._.wind,bottom:n._.window.height-n._.tabsHeaderHeight-12,id:"首页.标签页点击",transparent:!0}),(0,i.jsx)(r.Heatmap,{right:n._.wind+154,bottom:n._.bottom+16,id:"首页.管理收藏",transparent:!0}),(0,i.jsx)(r.Heatmap,{right:n._.wind+288,bottom:n._.bottom+16,id:"其他.启动",transparent:!0}),(0,i.jsx)(r.Heatmap,{right:n._.wind+297,bottom:n._.bottom+50,id:"其他.Linking",transparent:!0}),(0,i.jsx)(r.Heatmap,{right:n._.wind+297,bottom:n._.bottom+85,id:"其他.刷新到顶",transparent:!0}),(0,i.jsx)(r.Heatmap,{right:n._.wind+62,bottom:n._.bottom+16,id:"首页.格子布局条目选择",transparent:!0}),(0,i.jsx)(r.Heatmap,{bottom:n._.bottom,id:"首页",screen:"Home"})]})});t.default=s},"./src/screens/home/v2/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/navigations/tab-bar/index.tsx"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),c=s("./src/constants/index.ts"),m=o(s("./src/screens/home/v2/header/index.tsx")),p=o(s("./src/screens/home/v2/tab/index.tsx")),f=o(s("./src/screens/home/v2/tips/index.tsx")),j=o(s("./src/screens/home/v2/modal/index.tsx")),_=o(s("./src/screens/home/v2/heatmaps/index.tsx")),o=o(s("./src/screens/home/v2/store/index.ts")),b=s("./node_modules/react/jsx-runtime.js"),s=(0,d.ic)(o.default,function(e,t){var s=t.$,o=t.navigation;return(0,a.useRunAfter)(function(){c.IOS||s.isLogin||(0,i.privacy)(),s.updateInitialPage(o),o.addListener(n.EVENT_APP_TAB_PRESS+"|Home",function(){s.onRefreshThenScrollTop()})}),(0,a.useFocusEffect)(function(){s.init()}),(0,a.useObserver)(function(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.StatusBarEvents,{backgroundColor:"transparent"}),(0,b.jsx)(r.Page,{style:u._.ios(u._.container.bg,u._.container.plain),children:s.isLogin?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.default,{}),s.state._loaded&&(0,b.jsx)(p.default,{length:s.tabs.length}),(0,b.jsx)(f.default,{}),(0,b.jsx)(j.default,{}),(0,b.jsx)(r.Track,{title:"首页",hm:["?id="+s.userId,"Home"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Auth,{}),(0,b.jsx)(r.Track,{title:"首页",hm:["?id="+s.userId+"&login=0","Home"]})]})}),(0,b.jsx)(l.LoginNotice,{navigation:o}),(0,b.jsx)(l.NavigationBarEvents,{}),(0,b.jsx)(_.default,{})]})})});t.default=s;try{v2.displayName="v2",v2.__docgenInfo={description:"",displayName:"v2",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/index.tsx#v2"]={docgenInfo:v2.__docgenInfo,name:"v2",path:"src/screens/home/v2/index.tsx#v2"})}catch(e){}},"./src/screens/home/v2/item/btn-book-next/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/v2/item/btn-book-next/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.epStatus,r=e.volStatus,n=t.$;return(0,a.jsx)(i.Touchable,{style:d.styles.touch,onPress:function(){return n.doUpdateNext(s,o,r)},children:(0,a.jsx)(i.Flex,{style:d.styles.btn,justify:"center",children:(0,a.jsx)(i.Iconfont,{style:d.styles.icon,name:"md-check-circle-outline",size:18})})})});t.default=s},"./src/screens/home/v2/item/btn-book-next/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({touch:{marginLeft:s._.device(0,4),borderRadius:20,overflow:"hidden"},btn:{width:34,height:34},icon:{marginBottom:-1}});t.styles=s},"./src/screens/home/v2/item/btn-ep-next/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/v2/item/btn-ep-next/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.epStatus,e=e.isFirst,r=t.$;return(t=r.nextWatchEp(s).sort)?(o=r.countFixed(s,o),(0,a.jsxs)(i.Touchable,{style:d.styles.touch,onPress:function(){return r.doWatchedNextEp(s)},children:[(0,a.jsxs)(i.Flex,{style:d.styles.btn,justify:"center",children:[(0,a.jsx)(i.Iconfont,{style:d.styles.icon,name:"md-check-circle-outline",size:19}),(0,a.jsx)(n.default,{style:d.styles.text,children:(0,a.jsx)(i.Text,{type:"sub",children:Math.max(t,o+1)})})]}),e&&(0,a.jsx)(i.Heatmap,{right:26,id:"首页.观看下一章节"})]})):null});t.default=s},"./src/screens/home/v2/item/btn-ep-next/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({touch:{marginRight:4,borderRadius:20,overflow:"hidden"},btn:{height:34,paddingHorizontal:s._.device(s._.sm,s._.md)},next:{paddingLeft:s._.sm,paddingRight:2},icon:{marginTop:2},text:{marginBottom:-2,marginLeft:s._.xs}});t.styles=s},"./src/screens/home/v2/item/btn-favor/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/item/btn-favor/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.subject,e=e.isFirst,r=t.$;return(0,d.jsxs)(n.Touchable,{style:i.styles.touch,onPress:function(){return r.showManageModal(s,{title:o.name_cn||o.name,desc:o.name})},children:[(0,d.jsx)(n.Flex,{style:i.styles.btn,justify:"center",children:(0,d.jsx)(n.Iconfont,{name:"md-star-outline",size:19.5})}),e&&(0,d.jsx)(n.Heatmap,{id:"首页.显示收藏管理"})]})});t.default=s},"./src/screens/home/v2/item/btn-favor/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({touch:{marginRight:s._.device(2,4),borderRadius:20,overflow:"hidden"},btn:{width:34,height:34}});t.styles=s},"./src/screens/home/v2/item/btn-origin/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.array.some.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),a=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),m=s("./src/screens/home/v2/item/btn-origin/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s,o,r=e.subjectId,e=void 0!==(e=e.isTop)&&e,n=t.$,i=(t=u.systemStore.setting).homeOrigin,t=t.exportICS;return-1===i?null:(s=(0,d.default)(n.actions(r).map(function(e){return e.name})),!0===i&&s.push.apply(s,(0,d.default)(n.onlineOrigins(r).map(function(e){return"object"==typeof e?e.name:e}))),i=n.subject(r),o=c.MODEL_SUBJECT_TYPE.getTitle(i.type),e=[].concat((0,d.default)(s),[e?"取消置顶":"置顶"]),["动画","三次元"].includes(o)&&(e.push("全部展开","全部收起"),null!=i&&null!=(o=i.eps)&&o.length&&i.eps.some(function(e){return 0===e.type&&"NA"===e.status})&&e.push("一键添加提醒"),null!=i)&&null!=(o=i.eps)&&o.length&&t&&e.push("导出放送日程ICS"),(0,p.jsxs)(l.Popover,{style:m.styles.touch,data:e,onSelect:function(e){n.onPopover(e,r)},children:[(0,p.jsx)(a.Flex,{style:m.styles.btn,justify:"center",children:(0,p.jsx)(a.Iconfont,{style:m.styles.icon,name:s.length?"md-airplay":"md-menu",size:s.length?17:21})}),(0,p.jsx)(a.Heatmap,{right:55,bottom:-7,id:"首页.搜索源"})]},r))});t.default=s},"./src/screens/home/v2/item/btn-origin/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({touch:{marginRight:s._.device(10,s._.sm),borderRadius:20,overflow:"hidden"},btn:{width:34,height:34},icon:{marginBottom:-1}});t.styles=s},"./src/screens/home/v2/item/count-book/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/v2/item/btn-book-next/index.tsx")),a=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s=e.subjectId,e=e.isFirst,t=t.$,o=(r=(void 0===(r=t.collection.list)?[]:r).find(function(e){return e.subject_id===s})||{}).ep_status,r=r.vol_status,t=t.subject(s).eps_count||0;return(0,a.jsxs)(n.Flex,{children:[(0,a.jsxs)(n.Text,{type:"primary",size:16,children:[(0,a.jsxs)(n.Text,{type:"primary",size:10,lineHeight:16,children:["Chap."," "]}),o,!!t&&(0,a.jsxs)(n.Text,{type:"sub",size:12,lineHeight:16,children:[" ","/ ",t]})]}),(0,a.jsx)(d.default,{subjectId:s,epStatus:o+1,volStatus:r}),(0,a.jsxs)(n.Text,{style:i._.device(i._.ml.sm,i._.ml.md),type:"primary",size:16,children:[(0,a.jsxs)(n.Text,{type:"primary",size:10,lineHeight:16,children:["Vol."," "]}),r]}),(0,a.jsx)(d.default,{subjectId:s,epStatus:o,volStatus:r+1}),e&&(0,a.jsx)(n.Heatmap,{right:40,id:"首页.更新书籍下一个章节"})]})});t.default=o},"./src/screens/home/v2/item/count-video/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/item/count-video/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,e=e.epStatus,o=(t=t.$).$Item(s).expand;return(0,d.jsxs)(r.Flex,{style:i.styles.count,children:[(0,d.jsxs)(r.Text,{type:"primary",size:20,children:[t.countFixed(s,e),(0,d.jsxs)(r.Text,{type:"sub",lineHeight:20,children:[" ","/ ",t.countRight(s)]})]}),(0,d.jsx)(n.IconExpand,{style:i.styles.icon,expand:o})]})});t.default=s},"./src/screens/home/v2/item/count-video/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts")._.create({count:{marginTop:-2},icon:{marginTop:5}});t.styles=s},"./src/screens/home/v2/item/count/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=o(s("./src/screens/home/v2/item/count-book/index.tsx")),u=o(s("./src/screens/home/v2/item/count-video/index.tsx")),c=s("./src/screens/home/v2/item/count/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s=e.subjectId,o=e.subject,r=e.epStatus,e=e.isFirst,n=t.$;return"游戏"===(t=a.MODEL_SUBJECT_TYPE.getTitle(o.type))?null:"书籍"===t?(0,m.jsx)(i.default,{style:c.styles.count,children:(0,m.jsx)(l.default,{subjectId:s,isFirst:e})}):(0,m.jsxs)(d.Touchable,{style:c.styles.count,onPress:function(){return n.itemToggleExpand(s)},children:[(0,m.jsx)(u.default,{epStatus:r,subjectId:s,subject:o}),e&&(0,m.jsx)(d.Heatmap,{right:44,bottom:5,id:"首页.展开或收起条目"})]})});t.default=o},"./src/screens/home/v2/item/count/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({count:{minHeight:24,paddingHorizontal:s._.sm,marginHorizontal:-s._.sm,borderRadius:s._.radiusSm,overflow:"hidden"}});t.styles=s},"./src/screens/home/v2/item/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),m=s("./src/screens/home/v2/item/cover/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.index,o=e.subjectId,r=e.subject,n=t.$,i=t.navigation,e=c.MODEL_SUBJECT_TYPE.getTitle(r.type);return(0,p.jsxs)(d.default,{children:[(0,p.jsx)(a.Touchable,{animate:!0,onPress:function(){return n.onItemPress(i,o,r)},children:(0,p.jsx)(l.InView,{style:m.styles.inView,y:142*s+u._.headerHeight,children:(0,p.jsx)(l.Cover,{src:(null==r||null==(t=r.images)?void 0:t.medium)||"",size:c.IMG_WIDTH,height:c.IMG_HEIGHT,radius:!0,shadow:!0,type:e})})}),0===s&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Heatmap,{bottom:68,id:"首页.全部展开",transparent:!0}),(0,p.jsx)(a.Heatmap,{bottom:34,id:"首页.全部关闭",transparent:!0}),(0,p.jsx)(a.Heatmap,{id:"首页.跳转",to:"Subject",alias:"条目"})]})]})});t.default=s},"./src/screens/home/v2/item/cover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),o=o._.create({inView:{minWidth:s.IMG_WIDTH,minHeight:s.IMG_HEIGHT}});t.styles=o},"./src/screens/home/v2/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.WEEK_DAY_MAP=t.TITLE_HIT_SLOPS=t.DEFAULT_PROPS=void 0;s=s("./src/stores/index.ts"),s={top:s._.device(8,4),right:s._.device(8,4),bottom:s._.device(2,4),left:s._.device(8,4)};t.TITLE_HIT_SLOPS=s,t.WEEK_DAY_MAP={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"日"};t.DEFAULT_PROPS={navigation:{},styles:{},index:0,subject:{},subjectId:0,title:"",epStatus:"",heatMap:!1,expand:!1,epsCount:0,isTop:!1,isRefreshing:!1,onItemPress:function(){}}},"./src/screens/home/v2/item/eps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/components/index.ts"),d=s("./src/screens/_/index.ts"),a=s("./src/styles/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/v2/item/eps/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subjectId,e=e.isFirst,o=t.$,r=t.navigation;return(0,u.jsxs)(n.default,{style:l.styles.eps,children:[(0,u.jsx)(d.Eps,{layoutWidth:a.window.contentWidth,login:o.isLogin,subjectId:s,eps:o.eps(s),userProgress:o.userProgress(s),flip:o.state.flip===s,onFliped:o.afterFlipEps,onSelect:function(e,t){return o.doEpsSelect(e,t,s,r)}}),e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Heatmap,{right:72,id:"首页.跳转",to:"Topic",alias:"章节讨论",transparent:!0}),(0,u.jsx)(i.Heatmap,{bottom:35,id:"首页.章节按钮长按",transparent:!0}),(0,u.jsx)(i.Heatmap,{id:"首页.章节菜单操作"})]})]})});t.default=s},"./src/screens/home/v2/item/eps/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({eps:{marginTop:s._._wind}});t.styles=s},"./src/screens/home/v2/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.index-of.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),m=o(s("./src/screens/home/v2/item/item.tsx")),p=s("./src/screens/home/v2/item/styles.ts"),f=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s=e.index,s=void 0===s?0:s,o=e.subjectId,o=void 0===o?0:o,r=e.subject,r=void 0===r?{}:r,n=e.title,e=e.epStatus,e=void 0===e?"":e,i=t.$,t=t.navigation,d=c.systemStore.setting.heatMap,a=i.state,l=a.top,a=a.progress,u=a.fetchingSubjectId1,a=a.fetchingSubjectId2;return(0,f.jsx)(m.default,{navigation:t,styles:(0,p.memoStyles)(),index:s,subject:r,subjectId:o,title:n,epStatus:e,heatMap:d,expand:i.$Item(o).expand,epsCount:i.epsCount(o),isTop:-1!==l.indexOf(o),isRefreshing:u===o||a===o,onItemPress:i.onItemPress})});t.default=o},"./src/screens/home/v2/item/item.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),j=s("./src/components/index.ts"),_=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),b=o(s("./src/screens/home/v2/item/cover/index.tsx")),h=o(s("./src/screens/home/v2/item/title/index.tsx")),x=o(s("./src/screens/home/v2/item/onair/index.tsx")),y=o(s("./src/screens/home/v2/item/eps/index.tsx")),g=o(s("./src/screens/home/v2/item/count/index.tsx")),v=o(s("./src/screens/home/v2/item/tool-bar/index.tsx")),S=o(s("./src/screens/home/v2/item/progress/index.tsx")),T=s("./src/screens/home/v2/item/ds.ts"),O=s("./node_modules/react/jsx-runtime.js"),o=(0,r.memo)(function(e){var t=e.navigation,s=e.styles,o=e.index,r=e.subject,n=e.subjectId,i=e.title,d=e.epStatus,a=e.heatMap,l=e.expand,u=e.epsCount,c=e.isTop,m=e.isRefreshing,p=e.onItemPress,e=0===o;return(0,O.jsxs)(f.default,{style:a&&l?s.itemWithHeatMap:s.item,children:[(0,O.jsxs)(j.Flex,{style:s.hd,children:[(0,O.jsx)(b.default,{index:o,subjectId:n,subject:r}),(0,O.jsxs)(j.Flex.Item,{style:s.content,children:[(0,O.jsx)(j.Touchable,{style:s.title,withoutFeedback:!0,hitSlop:T.TITLE_HIT_SLOPS,onPress:function(){return p(t,n,r)},children:(0,O.jsxs)(j.Flex,{align:"start",children:[(0,O.jsx)(j.Flex.Item,{children:(0,O.jsx)(h.default,{subjectId:n,subject:r,title:i})}),m&&(0,O.jsx)(j.Loading.Medium,{color:_._.colorSub,size:16}),(0,O.jsx)(x.default,{subjectId:n})]})}),(0,O.jsxs)(f.default,{children:[(0,O.jsxs)(j.Flex,{style:s.info,children:[(0,O.jsx)(g.default,{subjectId:n,subject:r,epStatus:d,isFirst:e}),(0,O.jsx)(j.Flex.Item,{}),(0,O.jsx)(v.default,{subjectId:n,subject:r,epStatus:d,isTop:c,isFirst:e})]}),"游戏"!==i&&(0,O.jsx)(S.default,{subjectId:n,epStatus:d})]})]}),e&&(0,O.jsx)(f.default,{children:(0,O.jsx)(j.Heatmap,{id:"首页.置顶或取消置顶"})})]}),(0,O.jsx)(j.Collapsible,{collapsed:!l,children:(0,O.jsx)(y.default,{subjectId:n,isFirst:e})},String(u)),c&&(0,O.jsx)(f.default,{style:s.dot})]})},T.DEFAULT_PROPS);t.default=o;try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ item: { paddingVertical: number; paddingRight: number; paddingLeft: number; backgroundColor: "rgb(255, 255, 255)" | "rgb(36, 36, 36)"; borderBottomWidth: number; borderBottomColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; }; ... 5 more ...; dot: { ...; }; }'}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:'Partial<{ id: SubjectId; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; type: "2" | "1" | "4" | "3" | "6"; name: string; name_cn: string; summary: string; eps: number; eps_count: number; air_date: string; air_weekday: number; images: Images; collection: Collection; }>'}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"enum",value:[{value:'"动画"'},{value:'"书籍"'},{value:'"游戏"'},{value:'"三次元"'},{value:'"全部"'}]}},epStatus:{defaultValue:null,description:"看到多少集",name:"epStatus",required:!0,type:{name:"string | number"}},heatMap:{defaultValue:null,description:"",name:"heatMap",required:!0,type:{name:"boolean"}},expand:{defaultValue:null,description:"",name:"expand",required:!0,type:{name:"boolean"}},epsCount:{defaultValue:null,description:"",name:"epsCount",required:!0,type:{name:"number"}},isTop:{defaultValue:null,description:"",name:"isTop",required:!0,type:{name:"boolean"}},isRefreshing:{defaultValue:null,description:"",name:"isRefreshing",required:!0,type:{name:"boolean"}},onItemPress:{defaultValue:null,description:"",name:"onItemPress",required:!0,type:{name:'(navigation: Navigation, subjectId: SubjectId, subject: Partial<{ id: SubjectId; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; type: "2" | "1" | "4" | "3" | "6"; name: string; name_cn: string; ... 6 more ...; collection: Collection; }>) => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/item/item.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"src/screens/home/v2/item/item.tsx#item"})}catch(e){}},"./src/screens/home/v2/item/onair/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),d=s("./src/screens/home/v2/item/ds.ts"),a=s("./src/screens/home/v2/item/onair/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var e=e.subjectId,t=t.$;if(!(s=t.subject(e)).type)return null;if(s.type){s=i.MODEL_SUBJECT_TYPE.getTitle(s.type);if("动画"!==s&&"三次元"!==s)return null}var s=t.currentOnAir(e),o=t.epsCount(e);return 8<=s&&8<=o&&s===o?null:t.isToday(e)?(o=[(s=t.onAirCustom(e)).h,s.m].filter(function(e){return!!e}),(0,l.jsxs)(r.Text,{style:a.styles.onAir,type:"success",size:13,lineHeight:14,bold:!0,children:["今天 ",o.join(":")]})):t.isNextDay(e)?(o=[(s=t.onAirCustom(e)).h,s.m].filter(function(e){return!!e}),(0,l.jsxs)(r.Text,{style:a.styles.onAir,type:"sub",size:13,lineHeight:14,bold:!0,children:["明天 ",o.join(":")]})):n.systemStore.setting.homeOnAir&&(o=(s=t.onAirCustom(e)).weekDay,t=s.isOnair,e=s.h,s=s.m,t=t?"周"+d.WEEK_DAY_MAP[o]:"")?(o=[e,s].filter(function(e){return!!e}),(0,l.jsxs)(r.Text,{style:a.styles.onAir,type:"sub",size:13,lineHeight:14,bold:!0,children:[t," ",o.join(":")]})):null});t.default=s},"./src/screens/home/v2/item/onair/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({onAir:{marginTop:-1,marginLeft:s._.sm}});t.styles=s},"./src/screens/home/v2/item/progress/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.epStatus,e=e.subjectId,t=t.$;return(0,n.jsx)(r.OnairProgress,{epStatus:s,current:t.currentOnAir(e),total:t.epsCount(e),height:6})});t.default=s},"./src/screens/home/v2/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){var e=o._.isMobileLanscape||o._.isPad;return{item:{paddingVertical:o._.r(o._._wind),paddingRight:e?o._.wind-o._._wind:0,paddingLeft:e?o._.wind:o._._wind,backgroundColor:o._.colorPlain,borderBottomWidth:8,borderBottomColor:o._.colorBg},itemWithHeatMap:{paddingTop:o._.r(o._._wind),paddingRight:e?o._.wind-o._._wind:0,paddingBottom:o._.r(o._._wind+4),paddingLeft:e?o._.wind:o._._wind,backgroundColor:o._.colorPlain,borderBottomWidth:8,borderBottomColor:o._.colorBg},hd:{paddingRight:o._._wind},content:{marginLeft:o._._wind},title:{minHeight:o._.r(60)},info:{height:o._.r(40)},dot:{position:"absolute",top:o._.r(4),right:o._.r(-2),borderWidth:o._.r(8),borderTopColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent",borderLeftColor:o._.colorIcon,transform:[{rotate:"-45deg"}],opacity:.8}}});t.memoStyles=s},"./src/screens/home/v2/item/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),c=s("./src/screens/home/v2/item/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.subject,o=e.subjectId,e=e.title,t=t.$,r="书籍"===(r=u.MODEL_SUBJECT_TYPE.getTitle(s.type))?"读":"游戏"===r?"玩":"看",n=(i=t.onAirCustom(o)).weekDay,i=i.isOnair,i=!a.systemStore.setting.homeOnAir&&i?" · 周"+c.WEEK_DAY_MAP[n]:"",n=t.subject(o),o=(null==s||null==(o=s.collection)?void 0:o.doing)||(null==n||null==(o=n.collection)?void 0:o.doing)||0,n=(0,l.HTMLDecode)((0,l.cnjp)((null==n?void 0:n.name_cn)||s.name_cn,(null==n?void 0:n.name)||s.name)),s="";t.isFilter(e)&&(s=(0,l.getPinYinFilterValue)(n,t.filter));t=28<(e=n.length)?12:20<e?13:15;return(0,m.jsxs)(m.Fragment,{children:[s?(0,m.jsx)(d.Highlight,{size:t,numberOfLines:2,bold:!0,value:s,children:n}):(0,m.jsx)(d.Katakana.Provider,{size:t,numberOfLines:2,bold:!0,children:(0,m.jsx)(d.Katakana,{size:t,numberOfLines:2,bold:!0,children:n})}),!!o&&(0,m.jsxs)(d.Text,{style:a._.mt.xs,type:"sub",size:12,children:[o," 人在",r,i]})]})});t.default=s},"./src/screens/home/v2/item/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/v2/item/btn-ep-next/index.tsx")),d=o(s("./src/screens/home/v2/item/btn-favor/index.tsx")),a=o(s("./src/screens/home/v2/item/btn-origin/index.tsx")),l=s("./src/screens/home/v2/item/tool-bar/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");o=(0,r.ob)(function(e){var t=e.subjectId,s=e.subject,o=e.epStatus,r=e.isTop,e=e.isFirst;return(0,u.jsxs)(n.Flex,{style:l.styles.toolBar,children:[(0,u.jsx)(a.default,{subjectId:t,isTop:r}),(0,u.jsx)(i.default,{subjectId:t,epStatus:o,isFirst:e}),(0,u.jsx)(d.default,{subjectId:t,subject:s,isFirst:e})]})});t.default=o;try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:'Partial<{ id: SubjectId; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; type: "2" | "1" | "4" | "3" | "6"; name: string; name_cn: string; summary: string; eps: number; eps_count: number; air_date: string; air_weekday: number; images: Images; collection: Collection; }>'}},epStatus:{defaultValue:null,description:"",name:"epStatus",required:!0,type:{name:"string | number"}},isTop:{defaultValue:null,description:"",name:"isTop",required:!0,type:{name:"boolean"}},isFirst:{defaultValue:null,description:"",name:"isFirst",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/item/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/v2/item/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/home/v2/item/tool-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({toolBar:{marginRight:-s._._wind/2-3}});t.styles=s},"./src/screens/home/v2/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;s=s("./src/constants/index.ts"),s={styles:{},forwardRef:function(){},data:s.LIST_EMPTY,title:"",scrollToTop:!1,showItem:!s.IOS,onScroll:function(){},onHeaderRefresh:function(){},onFooterRefresh:void 0};t.DEFAULT_PROPS=s},"./src/screens/home/v2/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find-index.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/v2/grid/index.tsx")),l=o(s("./src/screens/home/v2/list/list.tsx")),u=s("./src/screens/home/v2/list/styles.ts"),c=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s,e=e.title,o=void 0===e?"全部":e,r=t.$;return r.collection._loaded?i.systemStore.setting.homeLayout===d.MODEL_SETTING_HOME_LAYOUT.getValue("网格")?(0,c.jsx)(a.default,{title:o}):r.showItem(o)?(e=(0,u.memoStyles)(),s=r.tabs.findIndex(function(e){return e.title===o}),(0,c.jsx)(l.default,{forwardRef:function(e){return r.forwardRef(e,s)},styles:e,data:r.currentCollection(o),title:o,scrollToTop:r.scrollToTop(o),showItem:r.showItem(o),onScroll:r.onScroll,onHeaderRefresh:r.onHeaderRefresh,onFooterRefresh:"游戏"===o?r.onFooterRefresh:void 0})):null:(0,c.jsx)(n.Loading,{})});t.default=o},"./src/screens/home/v2/list/list.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),p=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=r?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/react/index.js"))),f=s("./src/screens/_/index.ts"),j=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),_=o(s("./src/screens/home/v2/filter/index.tsx")),b=o(s("./src/screens/home/v2/empty/index.tsx")),h=s("./src/screens/home/v2/list/utils.tsx"),o=s("./src/screens/home/v2/list/ds.ts"),x=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}s=(0,r.memo)(function(e){var t=e.forwardRef,s=e.styles,o=e.data,r=e.title,n=e.scrollToTop,i=e.showItem,d=e.onScroll,a=e.onHeaderRefresh,e=e.onFooterRefresh,l=o.list.length,u=(0,x.jsx)(b.default,{title:r,length:l}),c=(0,p.useCallback)(function(e){var t=e.item,e=e.index;return i?(0,h.renderItem)({item:t,index:e,title:r}):null},[r,i]),m=(0,p.useMemo)(function(){return(0,x.jsx)(_.default,{title:r,length:l})},[r,l]);return(0,x.jsx)(f.PaginationList2,{forwardRef:t,style:s.listView,contentContainerStyle:s.contentContainerStyle,progressViewOffset:j._.ios(s.contentContainerStyle.paddingTop-j._.sm,0),keyExtractor:h.keyExtractor,data:o.list,limit:12,scrollToTop:n,keyboardDismissMode:"on-drag",ListHeaderComponent:m,renderItem:c,footerEmptyDataComponent:u,footerNoMoreDataComponent:u,footerNoMoreDataText:"",scrollEventThrottle:16,onScroll:d,onHeaderRefresh:a,onFooterRefresh:e})},o.DEFAULT_PROPS);t.default=s;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ listView: {} | { backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; }; contentContainerStyle: { paddingTop: number; paddingBottom: number; }; }'}},forwardRef:{defaultValue:null,description:"",name:"forwardRef",required:!0,type:{name:"(ref: any) => void"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"enum",value:[{value:'"动画"'},{value:'"书籍"'},{value:'"游戏"'},{value:'"三次元"'},{value:'"全部"'}]}},scrollToTop:{defaultValue:null,description:"",name:"scrollToTop",required:!0,type:{name:"boolean"}},showItem:{defaultValue:null,description:"",name:"showItem",required:!0,type:{name:"boolean"}},onScroll:{defaultValue:null,description:"",name:"onScroll",required:!0,type:{name:"any"}},onHeaderRefresh:{defaultValue:null,description:"",name:"onHeaderRefresh",required:!0,type:{name:"() => Promise<UserCollections | { list: any[]; pagination: { page: number; pageTotal: number; }; _loaded: number; }> | Promise<boolean>"}},onFooterRefresh:{defaultValue:null,description:"",name:"onFooterRefresh",required:!0,type:{name:"() => Promise<UserCollections | { list: any[]; pagination: { page: number; pageTotal: number; }; _loaded: number; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/list/list.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/v2/list/list.tsx#list"})}catch(e){}},"./src/screens/home/v2/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),r=s("./src/screens/home/v2/ds.ts"),s=o._.memoStyles(function(){return{listView:o._.ios({},{backgroundColor:o._.colorBg}),contentContainerStyle:{paddingTop:o._.ios(o._.headerHeight+r.H_TABBAR,0),paddingBottom:o._.bottom}}});t.memoStyles=s},"./src/screens/home/v2/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=d,t.renderItem=a,o(s("./node_modules/react/index.js")),s("./src/constants/index.ts")),n=o(s("./src/screens/home/v2/item/index.tsx")),i=s("./node_modules/react/jsx-runtime.js");function d(e){return String(e.subject_id||e.id)}function a(e){var t=e.item,s=e.index,e=e.title;return(0,i.jsx)(n.default,{index:s,subjectId:t.subject_id||t.id,subject:t.subject||{id:t.id,images:{common:t.cover,grid:t.cover,large:t.cover,medium:t.cover,small:t.cover},name:t.name,name_cn:t.nameCn,summary:"",type:r.MODEL_SUBJECT_TYPE.getValue("游戏"),url:""},epStatus:t.ep_status,title:e})}try{d.displayName="keyExtractor",d.__docgenInfo={description:"",displayName:"keyExtractor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/list/utils.tsx#keyExtractor"]={docgenInfo:d.__docgenInfo,name:"keyExtractor",path:"src/screens/home/v2/list/utils.tsx#keyExtractor"})}catch(e){}try{a.displayName="renderItem",a.__docgenInfo={description:"游戏标签页和其他类型数据源和结构都不一样, 需要构造",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/list/utils.tsx#renderItem"]={docgenInfo:a.__docgenInfo,name:"renderItem",path:"src/screens/home/v2/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/home/v2/modal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),o=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var t=t.$,s=(r=t.state).visible,o=r.subjectId,r=r.modal,n=(i=t.subject(o)).name,i=i.name_cn;return(0,a.jsx)(d.ManageModal,{visible:s,subjectId:o,title:i||n||r.title,desc:n||r.desc,onSubmit:t.doUpdateCollection,onClose:t.closeManageModal})});t.default=s;try{modal.displayName="modal",modal.__docgenInfo={description:"",displayName:"modal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/modal/index.tsx#modal"]={docgenInfo:modal.__docgenInfo,name:"modal",path:"src/screens/home/v2/modal/index.tsx#modal"})}catch(e){}},"./src/screens/home/v2/store/action.ts":(e,t,s)=>{var m=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.index-of.js"),s("./node_modules/core-js/modules/es.array.splice.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),u=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),p=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),f=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),n=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),j=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),_=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),h=s("./src/utils/fetch/index.ts"),x=s("./src/utils/calendar/index.ts"),y=s("./src/utils/kv/index.ts"),g=s("./src/utils/webhooks/index.ts"),v=s("./src/constants/index.ts"),S=s("./src/screens/user/origin-setting/utils.ts"),o=o(s("./src/screens/home/v2/store/fetch.ts")),T=s("./src/screens/home/v2/store/ds.ts");function a(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}s=o.default,(0,n.default)(E,s),O=a(E);var O,o=(0,r.default)(E);function E(){var c;(0,p.default)(this,E);for(var t,s,r,o,n,i,e=arguments.length,d=new Array(e),a=0;a<e;a++)d[a]=arguments[a];return c=O.call.apply(O,[this].concat(d)),(0,j.default)((0,f.default)(c),"onChange",function(e){(0,h.t)("首页.标签页切换",{page:e});var t=(0,u.default)(c.state.renderedTabsIndex),t=(t.includes(e)||t.push(e),{page:e,renderedTabsIndex:t});4===e&&(t.grid=T.EXCLUDE_STATE.grid),c.setState(t),c.setStorage(T.NAMESPACE)}),(0,j.default)((0,f.default)(c),"showManageModal",function(e,t){(0,h.t)("首页.显示收藏管理",{subjectId:e}),c.setState({visible:!0,subjectId:e,modal:t||T.EXCLUDE_STATE.modal})}),(0,j.default)((0,f.default)(c),"closeManageModal",function(){c.setState({visible:!1,modal:T.EXCLUDE_STATE.modal})}),(0,j.default)((0,f.default)(c),"itemToggleExpand",function(e){(0,h.t)("首页.展开或收起条目",{subjectId:e});var t=c.$Item(e),s=t.expand;c.setState({item:(0,j.default)({},e,Object.assign({},t,{expand:!s}))}),c.setStorage(T.NAMESPACE),s||(c.fetchSubject(e),c.fetchUserProgress(e))}),(0,j.default)((0,f.default)(c),"itemToggleTop",function(e,t){(0,h.t)("首页.置顶或取消置顶",{subjectId:e,isTop:t});var s=c.state.top,s=(0,u.default)(s),o=s.indexOf(e);-1!==o&&(s.splice(o,1),!t)||s.push(e),c.setState({top:s}),c.setStorage(T.NAMESPACE)}),(0,j.default)((0,f.default)(c),"expandAll",function(){(0,h.t)("首页.全部展开");var s={};c.collection.list.forEach(function(e){var t=e.subject_id,e=e.subject;"书籍"!==v.MODEL_SUBJECT_TYPE.getTitle(e.type)&&(s[t]={expand:!0,doing:!1})}),c.setState({item:s}),c.setStorage(T.NAMESPACE)}),(0,j.default)((0,f.default)(c),"closeAll",function(){(0,h.t)("首页.全部关闭"),c.clearState("item"),c.setStorage(T.NAMESPACE)}),(0,j.default)((0,f.default)(c),"selectLayout",function(e){(0,h.t)("首页.选择布局",{title:e}),c.setState({grid:"方格布局"===e}),c.setStorage(T.NAMESPACE)}),(0,j.default)((0,f.default)(c),"selectGirdSubject",function(e,t){(0,h.t)("首页.格子布局条目选择",{subjectId:e}),c.setState({current:e,grid:t||T.EXCLUDE_STATE.grid}),c.fetchSubject(e),c.fetchUserProgress(e),c.setStorage(T.NAMESPACE)}),(0,j.default)((0,f.default)(c),"scrollToIndex",{}),(0,j.default)((0,f.default)(c),"forwardRef",function(e,t){!c.scrollToIndex[t]&&null!=e&&e.scrollToIndex&&(c.scrollToIndex[t]=null==e?void 0:e.scrollToIndex)}),(0,j.default)((0,f.default)(c),"onlinePlaySelected",function(t,e){var s,o,r,n,i,d=c.subject(e),a=d.name_cn,l=d.name,d=d.type;(0,h.t)("首页.搜索源",{type:t,subjectId:e,subjectType:d});try{if(!s){var u=c.onlineOrigins(e).find(function(e){return"object"==typeof e&&e.name===t});if(u){if("萌番组"===t&&u.id)return(0,b.copy)((0,b.HTMLDecode)(a||l)),void setTimeout(function(){(0,b.open)(u.url)},1600);s=(0,S.replaceOriginUrl)(u.url,{CN:(0,b.HTMLDecode)(a||l),JP:(0,b.HTMLDecode)(l||a),ID:e})}}s||(r=void 0===(o=c.bangumiInfo(e).sites)?[]:o,n=(0,b.HTMLDecode)(a||l),"AGE动漫"===t?s=(0,v.SITE_AGEFANS)()+"/search?query="+encodeURIComponent(n)+"&page=1":(i=r.find(function(e){return e.site===t}))&&(s=(0,b.getBangumiUrl)(i))),s&&(0,b.open)(s)}catch(e){console.error(T.NAMESPACE,"onlinePlaySelected",e)}}),(0,j.default)((0,f.default)(c),"onItemPress",function(e,t,s){(0,h.t)("首页.跳转",{to:"Subject",from:"list"}),e.push("Subject",{subjectId:t,_jp:s.name,_cn:s.name_cn||s.name,_image:(null==s||null==(e=s.images)?void 0:e.medium)||"",_collection:"在看",_type:v.MODEL_SUBJECT_TYPE.getTitle(s.type)})}),(0,j.default)((0,f.default)(c),"onFilterChange",(0,b.debounce)(function(e){var t=c.state.page;c.setState({filter:e.trim(),filterPage:t})},800)),(0,j.default)((0,f.default)(c),"onPopover",function(t,e){var s=c.actions(e);if(s.length){s=s.find(function(e){return e.name===t});if(s)return(0,b.open)(s.url,!0),void(0,h.t)("其他.自定义跳转",{from:"HomeTab",key:e+"|"+s.name+"|"+s.url})}switch(t){case"置顶":c.itemToggleTop(e,!0);break;case"取消置顶":c.itemToggleTop(e,!1);break;case"全部展开":c.expandAll();break;case"全部收起":c.closeAll();break;case"一键添加提醒":c.doBatchSaveCalenderEvent(e);break;case"导出放送日程ICS":c.doExportCalenderEventICS(e);break;default:c.onlinePlaySelected(t,e)}}),(0,j.default)((0,f.default)(c),"prepareEpsFlip",function(e){c.setState({flip:e})}),(0,j.default)((0,f.default)(c),"afterFlipEps",(0,b.debounce)(function(){c.setState({flip:0})})),(0,j.default)((0,f.default)(c),"onScroll",b.updateVisibleBottom.bind((0,f.default)(c))),(0,j.default)((0,f.default)(c),"doUpdateCollection",(t=(0,l.default)(m.mark(function e(t){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.t)("首页.管理收藏",{subjectId:t.subjectId}),e.next=3,_.collectionStore.doUpdateCollection(t);case 3:(0,b.feedback)(),t.status!==v.MODEL_COLLECTION_STATUS.getValue("在看")&&_.userStore.removeCollection(t.subjectId),c.closeManageModal(),(0,g.webhookCollection)(t,c.subject(t.subjectId),_.userStore.userInfo);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,j.default)((0,f.default)(c),"doWatchedNextEp",(s=(0,l.default)(m.mark(function e(t){var s,o;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=c.$Item(t)).doing)return e.abrupt("return");e.next=3;break;case 3:return c.setState({item:(0,j.default)({},t,Object.assign({},s,{doing:!0}))}),e.next=6,c.fetchUserProgress(t);case 6:return(0,h.t)("首页.观看下一章节",{subjectId:t}),c.prepareEpsFlip(t),o=c.nextWatchEp(t),o=o.id,e.next=11,_.userStore.doUpdateEpStatus({id:o,status:v.MODEL_EP_STATUS.getValue("看过")});case 11:c.setState({item:(0,j.default)({},t,Object.assign({},s,{doing:!1}))}),_.userStore.fetchCollectionSingle(t),c.fetchUserProgress(t),(0,g.webhookEp)({status:"watched",id:o,batch:!1},c.subject(t),_.userStore.userInfo);case 15:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})),(0,j.default)((0,f.default)(c),"doUpdateNext",function(e,t,s){(0,h.t)("首页.更新书籍下一个章节",{subjectId:e}),_.collectionStore.doUpdateSubjectEp({subjectId:e,watchedEps:t,watchedVols:s},function(){(0,b.feedback)(),_.userStore.fetchCollectionSingle(e),(0,g.webhookEp)({status:"watched",sort:t,vols:s,batch:!1},c.subject(e),_.userStore.userInfo)})}),(0,j.default)((0,f.default)(c),"doEpsSelect",(r=(0,l.default)(m.mark(function e(t,s,o,r){var n,i,d,a,l,u;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("添加提醒"===t)return i=c.subject(o),(0,b.saveCalenderEvent)(s,(0,b.cnjp)(i.name_cn,i.name),c.onAirCustom(o)),(0,h.t)("其他.添加日历",{subjectId:o,sort:(null==s?void 0:s.sort)||0,from:"Home"}),e.abrupt("return");e.next=5;break;case 5:if(n=v.MODEL_EP_STATUS.getValue(t))return(0,h.t)("首页.章节菜单操作",{title:"更新收视进度",subjectId:o,status:n}),c.prepareEpsFlip(o),e.next=11,_.userStore.doUpdateEpStatus({id:s.id,status:n});e.next=14;break;case 11:_.userStore.fetchCollectionSingle(o),c.fetchUserProgress(o),(0,g.webhookEp)(Object.assign({},s,{status:n,batch:!1}),c.subject(o),_.userStore.userInfo);case 14:if("看到"===t)return(0,h.t)("首页.章节菜单操作",{title:"批量更新收视进度",subjectId:o}),i=(c.eps(o)||[]).slice().sort(function(e,t){return(0,b.asc)(e,t,function(e){return e.sort||0})}),u=(null==i||null==(d=i[0])?void 0:d.sort)<10?Math.max(s.sort-1,0):(null==(d=c.epsNoSp(o))||null==(a=d[0])?void 0:a.sort)<10?d.findIndex(function(e){return e.sort===s.sort}):null==(a=d.find(function(e){return e.sort===s.sort}))?void 0:a.sort,c.prepareEpsFlip(o),e.next=21,_.userStore.doUpdateSubjectWatched({subjectId:o,sort:-1===u?s.sort:u+1});e.next=24;break;case 21:_.userStore.fetchCollectionSingle(o),c.fetchUserProgress(o),(0,g.webhookEp)(Object.assign({},s,{status:n,batch:!0}),c.subject(o),_.userStore.userInfo);case 24:(t.includes("本集讨论")||t.includes("(+"))&&((0,h.t)("首页.章节菜单操作",{title:"本集讨论",subjectId:o}),u=c.subject(o),(0,b.appNavigate)(s.url||"/ep/"+s.id,r,{_title:"ep"+s.sort+"."+(s.name||s.name_cn),_group:u.name||u.name_cn,_groupThumb:(0,b.getCoverMedium)(null==(l=u.images||{})?void 0:l.medium),_desc:"时长:"+s.duration+" / 首播:"+s.airdate+"<br />"+(s.desc||"").replace(/\r\n/g,"<br />")},{id:"首页.跳转"}));case 25:case"end":return e.stop()}},e)})),function(e,t,s,o){return r.apply(this,arguments)})),(0,j.default)((0,f.default)(c),"doEpsLongPress",(o=(0,l.default)(m.mark(function e(t,s){var o,r;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.id,(0,h.t)("首页.章节按钮长按",{subjectId:s}),r=c.userProgress(s),r=r[o]?v.MODEL_EP_STATUS.getValue("撤销"):v.MODEL_EP_STATUS.getValue("看过"),e.next=6,_.userStore.doUpdateEpStatus({id:o,status:r});case 6:(0,b.feedback)(),_.userStore.fetchCollectionSingle(s),c.fetchUserProgress(s);case 9:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})),(0,j.default)((0,f.default)(c),"doBatchSaveCalenderEvent",(n=(0,l.default)(m.mark(function e(n){var t,i,d;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.epsNoSp(n).length){e.next=15;break}if(t=c.subject(n),(i=t.eps.filter(function(e){return"NA"===e.status})).length){e.next=7;break}return(0,b.info)("已没有未放送的章节"),e.abrupt("return");case 7:return e.next=9,(0,x.calendarEventsRequestPermissions)();case 9:if("authorized"!==e.sent)return(0,b.info)("权限不足"),e.abrupt("return");e.next=13;break;case 13:d=(0,b.cnjp)(t.name_cn,t.name),(0,b.confirm)("「"+d+"」\n是否一键添加 "+i.length+" 个章节的提醒?",(0,l.default)(m.mark(function e(){var s,o,t,r;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.onAirCustom(n),o=[],t=(0,b.loading)(),e.next=5,(0,x.calendarGetEventsAsync)();case 5:return r=e.sent,i.forEach(function(t){r.includes((0,b.getCalenderEventTitle)(t,d))||o.push((0,l.default)(m.mark(function e(){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.sleep)(v.IOS?80:480);case 2:return(0,b.saveCalenderEvent)(t,d,s,!1),e.abrupt("return",!0);case 4:case"end":return e.stop()}},e)})))}),e.next=9,(0,b.queue)(o,1);case 9:t(),(0,b.info)("已完成"),(0,b.feedback)(),(0,h.t)("其他.批量添加日历",{subjectId:n,length:o.length});case 13:case"end":return e.stop()}},e)})),"一键添加放送提醒");case 15:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),(0,j.default)((0,f.default)(c),"doExportCalenderEventICS",(i=(0,l.default)(m.mark(function e(r){var n,t,i,d,s;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.epsNoSp(r).length){e.next=20;break}if(n=c.subject(r),(t=100<=n.eps.length?n.eps.filter(function(e){return"NA"===e.status}):n.eps).length){e.next=7;break}return(0,b.info)("没有数据"),e.abrupt("return");case 7:return i=c.onAirCustom(r),d=["BEGIN:VCALENDAR","PRODID:-//Bangumi//Anime Calendar//CN","VERSION:2.0","METHOD:PUBLISH","CALSCALE:GREGORIAN","X-WR-CALNAME:Bangumi放送日程","X-APPLE-CALENDAR-COLOR:#FE8A95"],t.forEach(function(e){var t=(0,b.genICSCalenderEventDate)(e,i),s=t.DTSTART,t=t.DTEND,o="https://bgm.tv/ep/"+e.id;(e.name_cn||e.name)&&(o+=" ("+(e.name_cn||e.name)+")"),d.push("BEGIN:VEVENT","UID:"+r+"-"+e.id,"TZID:Asia/Shanghai","DTSTART:"+s,"DTEND:"+t,"SUMMARY:[ep."+e.sort+"] "+(0,b.cnjp)(n.name_cn,n.name),"DESCRIPTION:"+o,"TRANSP:OPAQUE","END:VEVENT")}),d.push("END:VCALENDAR"),e.next=13,(0,y.temp)(c.userId+"_"+r+".ics",d.join("\n"),-1);case 13:if(s=e.sent,null!=(s=s.data)&&s.downloadKey){e.next=18;break}return(0,b.info)("未知错误，生成ics失败，重试或联系作者"),e.abrupt("return",!1);case 18:(0,h.t)("首页.导出日程",{subjectId:r,userId:c.userId}),(0,b.open)((0,y.download)(s.downloadKey));case 20:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})),c}t.default=o},"./src/screens/home/v2/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.date.to-string.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.some.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),p=s("./node_modules/mobx/dist/mobx.esm.js"),f=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),_=o(s("./src/utils/cache-manager/index.ts")),b=s("./src/constants/index.ts"),h=o(s("./src/assets/json/thirdParty/bangumiData.min.json")),x=s("./src/screens/user/origin-setting/utils.ts"),y=s("./src/screens/home/v2/ds.ts"),g=s("./src/screens/home/v2/store/ds.ts"),o=o(s("./src/screens/home/v2/store/state.ts"));function v(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}s=o.default,(0,a.default)(T,s),S=v(T),(0,n.default)(T,[{key:"getTopMap",value:function(){var e=this.state.top,s={};return e.forEach(function(e,t){return s[e]=t+1}),s}},{key:"tabs",get:function(){return f.systemStore.setting.showGame?y.TABS_WITH_GAME:y.TABS}},{key:"navigationState",get:function(){return{index:this.state.page,routes:this.tabs}}},{key:"myUserId",get:function(){return f.userStore.myUserId}},{key:"userId",get:function(){return f.userStore.userInfo.username||f.userStore.myUserId}},{key:"usersInfo",get:function(){return f.userStore.usersInfo(this.myUserId)}},{key:"tabsLabel",get:function(){var e=this.state.page;return this.tabs[e].title}},{key:"$Item",value:function(e){var t=this;return(0,p.computed)(function(){return t.state.item[e]||g.INIT_ITEM}).get()}},{key:"isLogin",get:function(){return f.userStore.isLogin}},{key:"userInfo",get:function(){return f.userStore.userInfo}},{key:"collection",get:function(){return f.userStore.isLimit?Object.assign({},f.userStore.collection,{list:f.userStore.collection.list.filter(function(e){return!(0,j.x18)(e.subject_id)})}):f.userStore.collection}},{key:"filter",get:function(){var e=this.state.filter;return(0,j.t2s)(e.toUpperCase())}},{key:"currentCollection",value:function(r){var n=this;return(0,p.computed)(function(){var e,t,s,o=g.NAMESPACE+"|"+r;if(n.state.progress.fetching&&_.default.get(o))return _.default.get(o);return"游戏"===r?_.default.set(o,n.games):(e=Object.assign({},n.collection),(t=b.MODEL_SUBJECT_TYPE.getValue(r))&&(e.list=e.list.filter(function(e){return(null==e||null==(e=e.subject)?void 0:e.type)==t})),n.isFilter(r)&&(s=n.state.filter,e.list=e.list.filter(function(e){var t;return!s.length||!!(e=(n.subject(e.subject_id).name_cn||(null==e||null==(t=e.subject)?void 0:t.name_cn)||e.name||(null==e||null==(t=e.subject)?void 0:t.name)||"").toUpperCase()).includes(n.filter)||(0,j.getPinYinFilterValue)(e,n.filter)})),"全部"===r&&f.systemStore.setting.showGame?e.list=[].concat((0,i.default)(n.sortList(e.list)),(0,i.default)(n.games.list)):e.list=n.sortList(e.list),_.default.set(o,e))}).get()}},{key:"isFilter",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.state,t=e.filter,e=e.filterPage;return 0<=e&&e<=o.tabs.length&&o.tabs[e].title===s&&!!t}).get()}},{key:"games",get:function(){var t=this,e=this.usersInfo.username,e=f.collectionStore.userCollections(e||this.userId,b.MODEL_SUBJECT_TYPE.getLabel("游戏"),b.MODEL_COLLECTION_STATUS.getValue("在看")),s=this.getTopMap();return Object.assign({},e,{list:e.list.filter(function(e){return!t.filter.length||!!(e=(e.nameCn||e.name||"").toUpperCase()).includes(t.filter)||(0,j.getPinYinFilterValue)(e,t.filter)}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.id]||0})})})}},{key:"userProgress",value:function(e){return(0,p.computed)(function(){return f.userStore.userProgress(e)}).get()}},{key:"subject",value:function(e){return(0,p.computed)(function(){return f.subjectStore.subject(e)}).get()}},{key:"epsNoSp",value:function(e){var t=this;return(0,p.computed)(function(){return(t.subject(e).eps||[]).filter(function(e){return 0===e.type})}).get()}},{key:"eps",value:function(i){var d=this;return(0,p.computed)(function(){try{var t,e,s,o=f.systemStore.setting.homeLayout,r=d.epsNoSp(i),n=r.length;return n>(o===b.MODEL_SETTING_HOME_LAYOUT.getValue("网格")?g.PAGE_LIMIT_GRID:g.PAGE_LIMIT_LIST)?(t=d.userProgress(i),-1===(e=r.findIndex(function(e){return"看过"!==t[e.id]}))?r.slice(n-g.PAGE_LIMIT_LIST-1,n-1):f.systemStore.setting.homeEpStartAtLastWathed?(s="function"==typeof r.findLastIndex?r.findLastIndex(function(e){return"看过"===t[e.id]}):(0,j.findLastIndex)(r,function(e){return"看过"===t[e.id]}),r.slice(Math.max(s,0),s+g.PAGE_LIMIT_LIST)):r.slice(Math.max(e-1,0),e+g.PAGE_LIMIT_LIST-1)):r}catch(e){return console.error(g.NAMESPACE,"eps",e),[]}}).get()}},{key:"nextWatchEp",value:function(o){var r=this;try{return(0,p.computed)(function(){var e=r.epsNoSp(o),t=r.userProgress(o),s=e.findIndex(function(e){return"看过"!==t[e.id]});return-1===s?{}:e[s]}).get()}catch(e){return console.error(g.NAMESPACE,"nextWatchEp",e),{}}}},{key:"currentOnAir",value:function(e){try{var t;return(null==(t=this.epsNoSp(e).slice().reverse().find(function(e){return"Air"===e.status}))?void 0:t.sort)||0}catch(e){return console.error(g.NAMESPACE,"nextWatchEp",e),0}}},{key:"countFixed",value:function(r,n){var i=this;return(0,p.computed)(function(){var t,s,e=i.eps(r).filter(function(e){return 1!==e.type}).reverse(),o=i.userProgress(r),e=e.find(function(e){return"看过"===o[e.id]});return e?e.sort:(t={},i.eps(r).forEach(function(e){1!==e.type&&(t[e.id]=!0)}),s=0,Object.keys(i.userProgress(r)).forEach(function(e){t[e]&&"看过"===i.userProgress(r)[e]&&(s+=1)}),Number(1==n?s||n:n||s))}).get()}},{key:"sortOnAir",get:function(){return f.systemStore.setting.homeSorting===b.MODEL_SETTING_HOME_SORTING.getValue("放送")}},{key:"onAirCustom",value:function(e){return(0,p.computed)(function(){return(0,j.getOnAir)(f.calendarStore.onAir[e],f.calendarStore.onAirUser(e))}).get()}},{key:"isToday",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.onAirCustom(s),t=e.weekDay;return!!e.isOnair&&t===(new Date).getDay()}).get()}},{key:"isNextDay",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.onAirCustom(s),t=e.weekDay;return!!e.isOnair&&(6===(e=(new Date).getDay())?0===t:e===t-1)}).get()}},{key:"bangumiInfo",value:function(o){var r=this;return(0,p.computed)(function(){var e=r.subject(o),t=e.name_cn,s=e.name;return(0,j.unzipBangumiData)(h.default.find(function(e){return e.j===(0,j.HTMLDecode)(t)||e.j===(0,j.HTMLDecode)(s)||e.c===(0,j.HTMLDecode)(t)||e.c===(0,j.HTMLDecode)(s)}))}).get()}},{key:"onlineOrigins",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.subject(s).type,t=[];2===Number(e)&&(0,x.getOriginConfig)(f.subjectStore.origin,"anime").filter(function(e){return e.active}).forEach(function(e){t.push(e)}),6===Number(e)&&(0,x.getOriginConfig)(f.subjectStore.origin,"real").filter(function(e){return e.active}).forEach(function(e){t.push(e)});e=o.bangumiInfo(s).sites;return(void 0===e?[]:e).filter(function(e){return b.SITES_DS.includes(e.site)}).forEach(function(e){t.push(e.site)}),t}).get()}},{key:"hasNewEp",value:function(e){var s=this;return(0,p.computed)(function(){var t=s.userProgress(e);return s.epsNoSp(e).some(function(e){return!("Air"!==e.status&&"Today"!==e.status||e.id in t)})}).get()}},{key:"showItem",value:function(t){var s=this;return(0,p.computed)(function(){var e;return!b.IOS||(e=s.tabs.findIndex(function(e){return e.title===t}),s.state.renderedTabsIndex.includes(e))}).get()}},{key:"epsCount",value:function(s){var o=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return(0,p.computed)(function(){var t=o.subject(s);try{if(null!=t&&t.eps&&"object"==typeof t.eps){var e=t.eps.filter(function(e){if(r)return 0===e.type&&0!=e.sort;e.type}).length;if(e)return e}return null!=t&&t.eps_count?t.eps_count:0}catch(e){return(null==t?void 0:t.eps_count)||0}}).get()}},{key:"countRight",value:function(n){var i=this;return(0,p.computed)(function(){var e=f.systemStore.setting.homeCountView,t=i.subject(n),s=i.currentOnAir(n),o=(null==t?void 0:t.eps_count)||"??",r=("??"!==o&&Number(s)>Number(o)&&(o=s),"");switch(e){case"B":r=""+s,o!==s&&(r+=" ("+o+")");break;case"C":r=""+o,o!==s&&(r+=" ("+s+")");break;case"D":r=""+s,o!==s&&(r+=" / "+o);break;default:r=""+o}return r}).get()}},{key:"actions",value:function(t){return(0,p.computed)(function(){var e=f.subjectStore.actions(t);return e.length?f.subjectStore.actions(t).filter(function(e){return e.active}).sort(function(e,t){return(0,j.desc)(e.sort||0,t.sort||0)}):e}).get()}},{key:"scrollToTop",value:function(s){var o=this;return!b.IOS&&(0,p.computed)(function(){var e=o.state,t=e.isFocused,e=e.page;return t&&y.TABS_WITH_GAME[e].title===s}).get()}}]),(0,m.default)((o=T).prototype,"tabs",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"tabs"),o.prototype),(0,m.default)(o.prototype,"navigationState",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"navigationState"),o.prototype),(0,m.default)(o.prototype,"myUserId",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"myUserId"),o.prototype),(0,m.default)(o.prototype,"userId",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"userId"),o.prototype),(0,m.default)(o.prototype,"usersInfo",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"usersInfo"),o.prototype),(0,m.default)(o.prototype,"tabsLabel",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"tabsLabel"),o.prototype),(0,m.default)(o.prototype,"isLogin",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"isLogin"),o.prototype),(0,m.default)(o.prototype,"userInfo",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"userInfo"),o.prototype),(0,m.default)(o.prototype,"collection",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"collection"),o.prototype),(0,m.default)(o.prototype,"filter",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"filter"),o.prototype),(0,m.default)(o.prototype,"games",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"games"),o.prototype),(0,m.default)(o.prototype,"sortOnAir",[p.computed],Object.getOwnPropertyDescriptor(o.prototype,"sortOnAir"),o.prototype);var S,a=o;function T(){var i;(0,r.default)(this,T);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i=S.call.apply(S,[this].concat(t)),(0,c.default)((0,d.default)(i),"sortList",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,p.computed)(function(){if(!t.length)return[];var e=f.systemStore.setting.homeSorting,s=i.getTopMap();if(e===b.MODEL_SETTING_HOME_SORTING.getValue("网页"))return t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})});try{var o,r=f.systemStore.setting.homeSortSink,n={};return i.sortOnAir?(o=(new Date).getDay(),t.forEach(function(e){var e=e.subject_id,t=i.onAirCustom(e),s=t.weekDay;t.isOnair?i.isToday(e)?n[e]=1001:i.isNextDay(e)?n[e]=1e3:n[e]=0===o||o<=s?100-s:10-s:n[e]=1,r&&!i.hasNewEp(e)&&(n[e]=n[e]-1e4)}),t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return n[e.subject_id]})}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})})):(t.forEach(function(e){var e=e.subject_id,t=i.userProgress(e),s=0;Object.keys(t).forEach(function(e){"看过"===t[e]&&(s+=1)});var o=(f.calendarStore.onAir[e]||{}).air,o=void 0===o?0:o;i.isToday(e)?n[e]=s<o?1e5:1e4:i.isNextDay(e)?n[e]=s<o?1e3:100:n[e]=s<o?10:1,r&&!i.hasNewEp(e)&&(n[e]=n[e]-100001)}),t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return n[e.subject_id]})}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})}))}catch(e){return t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return i.isToday(e.subject_id)})}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})})}}).get()}),i}t.default=a},"./src/screens/home/v2/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.PAGE_LIMIT_LIST=t.PAGE_LIMIT_GRID=t.NAMESPACE=t.INIT_ITEM=t.EXCLUDE_STATE=void 0;s=s("./src/stores/index.ts"),t.NAMESPACE="ScreenHomeV2",t.INIT_ITEM={expand:!1,doing:!1},s={visibleBottom:s._.window.height,modal:{title:"",desc:""},grid:{subject_id:0,subject:{},ep_status:""},progress:{fetching:!1,fetchingSubjectId1:0,fetchingSubjectId2:0,message:"",current:0,total:0},filter:"",filterPage:-1,isFocused:!0,renderedTabsIndex:[],flip:0},t.EXCLUDE_STATE=s,s=Object.assign({visible:!1,subjectId:0,page:0,top:[],item:{},current:0},s,{_loaded:!1});t.STATE=s,t.PAGE_LIMIT_LIST=32;t.PAGE_LIMIT_GRID=24},"./src/screens/home/v2/store/fetch.ts":(e,t,s)=>{var u=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),j=s("./src/constants/index.ts"),o=o(s("./src/screens/home/v2/store/computed.ts")),_=s("./src/screens/home/v2/store/ds.ts");function b(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=o?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}s=o.default,(0,a.default)(x,s),h=b(x);var h,o=(0,n.default)(x);function x(){var l;(0,i.default)(this,x);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return l=h.call.apply(h,[this].concat(s)),(0,m.default)((0,d.default)(l),"fetchSubject",(t=(0,r.default)(u.mark(function e(t){var s,o,r,n,i,d,a=arguments;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=1<a.length&&void 0!==a[1]?a[1]:0,o=2<a.length&&void 0!==a[2]&&a[2],r=!1,n=l.subject(t),"number"!=typeof(i=n._loaded)&&(i=0),r="large"!==(null==n?void 0:n._responseGroup)||(0,f.getTimestamp)()-i>=14400*(s+1)?!0:r){if(d=l.state.progress.fetchingSubjectId2?"fetchingSubjectId1":"fetchingSubjectId2",l.setState({progress:(0,m.default)({},d,t)}),o)return e.next=13,l.fetchUserProgress(t);e.next=13}else e.next=17;break;case 13:return e.next=15,p.subjectStore.fetchSubject(t);case 15:return l.setState({progress:(0,m.default)({},d,0)}),e.abrupt("return",!0);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,m.default)((0,d.default)(l),"fetchSubjectsQueue",(0,r.default)(u.mark(function e(){var t,s,o=arguments;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<o.length&&void 0!==o[0]?o[0]:[],l.state.progress.fetching)return e.abrupt("return",!1);e.next=4;break;case 4:return(s=l.sortList(t).map(function(e,t){var s=e.subject_id;return function(){return l.fetchSubject(s,t,!0)}})).length&&l.setState({progress:{fetching:!0}}),e.next=8,(0,f.queue)(s,2);case 8:return l.setState({progress:_.EXCLUDE_STATE.progress}),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(l),"fetchUserProgress",function(e){return p.userStore.fetchUserProgress(e)}),(0,m.default)((0,d.default)(l),"fetchDoingGames",function(e){var t=l.usersInfo.username;return p.collectionStore.fetchUserCollections({userId:t||l.userId,subjectType:j.MODEL_SUBJECT_TYPE.getLabel("游戏"),type:j.MODEL_COLLECTION_STATUS.getValue("在看"),order:j.MODEL_COLLECTIONS_ORDERBY.getValue("收藏时间"),tag:""},e)}),l}t.default=o},"./src/screens/home/v2/store/index.ts":(e,t,s)=>{var o,i,d=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),m=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=S(t);if(t&&t.has(e))return t.get(e);var s,o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=r?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/expo-device/build/Device.js")),_=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),h=s("./src/utils/fetch/index.ts"),x=s("./src/utils/kv/index.ts"),y=s("./src/constants/index.ts"),g=s("./config.ts"),r=r(s("./src/screens/home/v2/store/action.ts")),v=s("./src/screens/home/v2/store/ds.ts");function S(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(S=function(e){return e?s:t})(e))}function T(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(s);return e=o?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,m.default)(this,e)}}s=r.default,(0,c.default)(E,s),O=T(E);var O,r=(0,n.default)(E);function E(){var n;(0,l.default)(this,E);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n=O.call.apply(O,[this].concat(t)),(0,f.default)((0,u.default)(n),"init",(0,a.default)(d.mark(function e(){return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&!y.DEV)return e.abrupt("return");e.next=2;break;case 2:if(n.isLogin)return n.initUser(),o=!0,e.next=7,n.initStore();e.next=8;break;case 7:setTimeout(function(){n.initFetch()},4e3);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}))),(0,f.default)((0,u.default)(n),"initStore",(0,a.default)(d.mark(function e(){var t;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getStorage(v.NAMESPACE);case 2:t=e.sent,n.setState(Object.assign({},t,v.EXCLUDE_STATE,{renderedTabsIndex:[(null==t?void 0:t.page)||0],_loaded:(0,b.getTimestamp)()}));case 4:case"end":return e.stop()}},e)}))),(0,f.default)((0,u.default)(n),"initFetch",(0,a.default)(d.mark(function e(){var t,s,o,r=arguments;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<r.length&&void 0!==r[0]&&r[0],n.state.progress.fetching)return(0,b.info)("正在刷新条目信息"),e.abrupt("return");e.next=5;break;case 5:if(s=t,"number"!=typeof(o=n.collection._loaded)&&(o=0),s=518400<(0,b.getTimestamp)()-o||!n.collection.list.length||s)return e.next=12,n.initQueue();e.next=24;break;case 12:if(e.sent)return e.abrupt("return",!0);e.next=14;break;case 14:if(!_.userStore.isWebLogin){e.next=24;break}if(i){e.next=24;break}return i=!0,e.next=19,_.userStore.reOauth();case 19:if(e.sent)return(i=!1,h.t)("其他.重新授权"),e.abrupt("return",n.initQueue());e.next=23;break;case 23:i=!1;case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}},e)}))),(0,f.default)((0,u.default)(n),"initQueue",(0,a.default)(d.mark(function e(){var t,s;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([_.userStore.fetchCollection()]);case 2:if(null!=(s=e.sent)&&null!=(t=s[0])&&null!=(t=t.list)&&t.length)return e.abrupt("return",n.fetchSubjectsQueue(s[0].list));e.next=5;break;case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)}))),(0,f.default)((0,u.default)(n),"initUser",function(){o||setTimeout(function(){if(!n.userId||!y.DEVICE_MODEL_NAME)return!1;(0,x.update)("u_"+n.userId,{b:j.brand,y:j.deviceYearClass,i:j.modelId,d:j.modelName,o:j.osVersion,m:j.totalMemory,v:y.VERSION_GITHUB_RELEASE,s:_._.statusBarHeight,h:_._.headerHeight,t:_._.tabBarHeight,a:_.systemStore.advance,ipa:g.IOS_IPA})},8e3)}),(0,f.default)((0,u.default)(n),"onHeaderRefresh",function(){return"游戏"===n.tabsLabel?n.fetchDoingGames(!0):n.initFetch(!0)}),(0,f.default)((0,u.default)(n),"onFooterRefresh",function(){return n.fetchDoingGames()}),(0,f.default)((0,u.default)(n),"onRefreshThenScrollTop",function(){try{var e=n.state.page;"function"==typeof n.scrollToIndex[e]&&((0,h.t)("其他.刷新到顶",{screen:"Home"}),n.scrollToIndex[e]({animated:!0,index:0,viewOffset:8e3}),setTimeout(function(){(0,b.feedback)()},400),n.onHeaderRefresh())}catch(e){console.error("Home","onRefreshThenScrollTop",e)}}),(0,f.default)((0,u.default)(n),"updateInitialPage",function(e){var t=_.systemStore.setting.initialPage;return t===y.MODEL_SETTING_INITIAL_PAGE.getValue("进度")?n.init():t===y.MODEL_SETTING_INITIAL_PAGE.getValue("小圣杯")?e.push("Tinygrail"):void 0}),n}t.default=r},"./src/screens/home/v2/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/createClass.js"))),n=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=s("./node_modules/mobx/dist/mobx.esm.js"),o=o(s("./src/utils/store/index.ts")),m=s("./src/screens/home/v2/store/ds.ts");function p(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=o.default,(0,d.default)(j,s),f=p(j);var f,o=(0,r.default)(j);function j(){var e;(0,n.default)(this,j);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=f.call.apply(f,[this].concat(s)),(0,u.default)((0,i.default)(e),"state",(0,c.observable)(m.STATE)),e}t.default=o},"./src/screens/home/v2/tab/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=m(t);if(t&&t.has(e))return t.get(e);var s,o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=r?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(o,s,n):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/react/index.js"))),n=s("./node_modules/react-native-tab-view/lib/module/index.js"),i=s("./src/screens/_/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/v2/list/index.tsx")),l=o(s("./src/screens/home/v2/tab/tab.tsx")),u=s("./src/screens/home/v2/tab/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");function m(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(m=function(e){return e?s:t})(e))}t.default=function(e){var t=e.length,s=(0,u.memoStyles)(),e=(0,r.useMemo)(function(){var e={all:function(){return(0,c.jsx)(a.default,{title:"全部"})},anime:function(){return(0,c.jsx)(a.default,{title:"动画"})},book:function(){return(0,c.jsx)(a.default,{title:"书籍"})}};return 5===t?(e.real=function(){return(0,c.jsx)(a.default,{title:"三次元"})},e.game=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.default,{title:"游戏"}),d.IOS&&(0,c.jsx)(i.BlurView,{style:s.tabs4})]})}):e.real=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.default,{title:"三次元"}),d.IOS&&(0,c.jsx)(i.BlurView,{style:s.tabs3})]})},(0,n.SceneMap)(e)},[t]);return(0,c.jsx)(l.default,{renderScene:e})};try{tab.displayName="tab",tab.__docgenInfo={description:"因为本组件使用 useMemo 后不能用 mobx@4 去 observer\n所以只能在上面把 routes 的 length 传下来监听刷新",displayName:"tab",props:{length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/tab/index.tsx#tab"]={docgenInfo:tab.__docgenInfo,name:"tab",path:"src/screens/home/v2/tab/index.tsx#tab"})}catch(e){}},"./src/screens/home/v2/tab/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),r=s("./src/screens/home/v2/ds.ts"),s=o._.memoStyles(function(){var e={position:"absolute",zIndex:1,top:-o._.statusBarHeight||0,right:0,height:o._.headerHeight+r.H_TABBAR+(o._.statusBarHeight||0)};return{tabs4:Object.assign({},e,{left:4*-o._.window.width}),tabs3:Object.assign({},e,{left:3*-o._.window.width}),sceneContainerStyle:{marginTop:o._.ios(-o._.headerHeight-r.H_TABBAR,0)}}});t.memoStyles=s},"./src/screens/home/v2/tab/tab-bar-label/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.ob)(function(e){var t=e.focused,e=e.route;return(0,i.jsx)(r.Flex,{style:n._.container.block,justify:"center",children:(0,i.jsx)(r.Text,{type:"title",size:13,bold:t,noWrap:!0,children:e.title})})});t.default=s;try{tabbarlabel.displayName="tabbarlabel",tabbarlabel.__docgenInfo={description:"",displayName:"tabbarlabel",props:{focused:{defaultValue:null,description:"",name:"focused",required:!0,type:{name:"any"}},route:{defaultValue:null,description:"",name:"route",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/tab/tab-bar-label/index.tsx#tabbarlabel"]={docgenInfo:tabbarlabel.__docgenInfo,name:"tabbarlabel",path:"src/screens/home/v2/tab/tab-bar-label/index.tsx#tabbarlabel"})}catch(e){}},"./src/screens/home/v2/tab/tab-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/v2/tab/tab-bar-label/index.tsx")),a=s("./src/screens/home/v2/tab/tab-bar/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");o=(0,i.ob)(function(e){var t=(0,a.memoStyles)(),s=n._.window.width/e.navigationState.routes.length;return(0,l.jsx)(r.TabBar,Object.assign({},e,{style:t.tabBar,tabStyle:[t.tab,{width:s}],labelStyle:t.label,indicatorStyle:[t.indicator,{marginLeft:(s-t.indicator.width)/2}],pressOpacity:1,pressColor:"transparent",scrollEnabled:!0,renderLabel:u}))});function u(e){var t=e.route,e=e.focused;return(0,l.jsx)(d.default,{route:t,focused:e})}t.default=o;try{tabbar.displayName="tabbar",tabbar.__docgenInfo={description:"",displayName:"tabbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/tab/tab-bar/index.tsx#tabbar"]={docgenInfo:tabbar.__docgenInfo,name:"tabbar",path:"src/screens/home/v2/tab/tab-bar/index.tsx#tabbar"})}catch(e){}},"./src/screens/home/v2/tab/tab-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{tabBar:{backgroundColor:o._.ios("transparent",o._.select("transparent",o._.colorPlain)),borderBottomWidth:o._.ios(0,o._.select(o._.hairlineWidth,o._.deep(0,o._.hairlineWidth))),borderBottomColor:o._.ios("transparent",o._.select(o._.colorBorder,o._.deep("transparent","rgba(0, 0, 0, 0.16)"))),elevation:0},tab:{height:o._.r(48)},label:{padding:0},indicator:{width:o._.r(16),height:4,backgroundColor:o._.colorMain,borderRadius:4}}});t.memoStyles=s},"./src/screens/home/v2/tab/tab.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/v2/tab/tab-bar/index.tsx")),l=s("./src/screens/home/v2/tab/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var e=e.renderScene,t=t.$,s=(0,l.memoStyles)();return(0,u.jsx)(r.TabView,{style:n._.mt._sm,sceneContainerStyle:s.sceneContainerStyle,lazy:!d.IOS,lazyPreloadDistance:0,navigationState:t.navigationState,renderTabBar:c,renderScene:e,onIndexChange:t.onChange})});function c(e){return(0,u.jsx)(a.default,Object.assign({},e))}t.default=o},"./src/screens/home/v2/tips/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=(t=t.$.state.progress).fetching,o=t.message,r=t.current,t=t.total;return(0,i.jsx)(n.Progress,{show:s,message:o,current:r,total:t})});t.default=s;try{tips.displayName="tips",tips.__docgenInfo={description:"",displayName:"tips",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/tips/index.tsx#tips"]={docgenInfo:tips.__docgenInfo,name:"tips",path:"src/screens/home/v2/tips/index.tsx#tips"})}catch(e){}},"./src/screens/home/voices/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.NAMESPACE=t.EXCLUDE_STATE=void 0;s=s("./src/stores/index.ts"),t.NAMESPACE="ScreenVoices",s={visibleBottom:s._.window.height,position:"",ota:{}};t.EXCLUDE_STATE=s},"./src/screens/home/voices/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=t.$;return(0,d.jsx)(r.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的角色":"角色",alias:"角色",hm:[s.url,"Voices"],headerRight:function(){return(0,d.jsx)(r.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("角色.右上角菜单",{key:e}),(0,n.open)(s.url))},children:(0,d.jsx)(r.Heatmap,{id:"角色.右上角菜单"})})}})});t.default=s;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/voices/header/index.tsx#header"})}catch(e){}},"./src/screens/home/voices/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/voices/header/index.tsx")),a=o(s("./src/screens/home/voices/tool-bar/index.tsx")),l=o(s("./src/screens/home/voices/list/index.tsx")),o=o(s("./src/screens/home/voices/store.ts")),u=s("./node_modules/react/jsx-runtime.js"),s=(0,n.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.default,{}),(0,u.jsxs)(r.Page,{children:[(0,u.jsx)(a.default,{}),(0,u.jsx)(l.default,{})]})]})})});t.default=s;try{voices.displayName="voices",voices.__docgenInfo={description:"",displayName:"voices",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/index.tsx#voices"]={docgenInfo:voices.__docgenInfo,name:"voices",path:"src/screens/home/voices/index.tsx#voices"})}catch(e){}},"./src/screens/home/voices/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js"),a={id:"角色.跳转"};s=(0,o.obc)(function(e,t){var s=e.item,e=e.index,t=t.navigation;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.ItemVoice,Object.assign({style:i._.container.item,navigation:t,event:a,index:e},s)),!e&&(0,d.jsx)(r.Heatmap,{id:"角色.跳转"})]})});t.default=s},"./src/screens/home/voices/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),l=o(s("./src/screens/home/voices/item/index.tsx")),u=s("./node_modules/react/jsx-runtime.js");o=(0,a.obc)(function(e,t){return(t=t.$).monoVoices._loaded?(0,u.jsx)(n.PaginationList2,{contentContainerStyle:i._.container.bottom,keyExtractor:d.keyExtractor,data:t.monoVoices.list,limit:5,scrollToTop:!0,renderItem:c,scrollEventThrottle:16,onScroll:t.onScroll,onHeaderRefresh:t.onHeaderRefresh}):(0,u.jsx)(r.Loading,{})});function c(e){var t=e.item,e=e.index;return(0,u.jsx)(l.default,{item:t,index:e})}t.default=o;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/voices/list/index.tsx#list"})}catch(e){}},"./src/screens/home/voices/store.ts":(e,t,s)=>{var n=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),d=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),b=s("./src/utils/fetch/index.ts"),h=s("./src/utils/kv/index.ts"),x=s("./src/constants/index.ts"),y=s("./src/screens/home/voices/ds.ts");function g(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=o?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var v,S=[],l=(s=o.default,(0,l.default)(T,s),v=g(T),(0,r.default)(T,[{key:"monoId",get:function(){return this.params.monoId}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){var e=this.state.position;return("voices_"+[this.monoId,e].join("_")).replace("/","_")}},{key:"monoVoices",get:function(){var e=j.subjectStore.monoVoices(this.monoId);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):x.LIST_EMPTY}},{key:"url",get:function(){var e=this.state.position;return(0,x.HTML_MONO_VOICES)(this.monoId,e)}}]),(0,p.default)((o=T).prototype,"monoId",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"monoId"),o.prototype),(0,p.default)(o.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"ota"),o.prototype),(0,p.default)(o.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"thirdPartyKey"),o.prototype),(0,p.default)(o.prototype,"monoVoices",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"monoVoices"),o.prototype),(0,p.default)(o.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),o);function T(){var r;(0,d.default)(this,T);for(var s,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r=v.call.apply(v,[this].concat(t)),(0,m.default)((0,a.default)(r),"params",void 0),(0,m.default)((0,a.default)(r),"state",(0,f.observable)(Object.assign({},y.EXCLUDE_STATE,{_loaded:!1}))),(0,m.default)((0,a.default)(r),"init",(0,i.default)(n.mark(function e(){var t;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(y.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,r.setState(Object.assign({},t,y.EXCLUDE_STATE,{_loaded:!0})),e.abrupt("return",r.fetchMonoVoices());case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(r),"onHeaderRefresh",function(){return r.fetchMonoVoices()}),(0,m.default)((0,a.default)(r),"fetchMonoVoices",(0,i.default)(n.mark(function e(){var t,s;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.fetchThirdParty(),t=r.state.position,e.next=4,j.subjectStore.fetchMonoVoices({monoId:r.monoId,position:t});case 4:return(t=e.sent).list.length&&r.thirdPartyKey in r.state.ota&&(s=(null==(s=r.ota)?void 0:s.ts)||0,604800<=(0,_.getTimestamp)()-s)&&r.updateThirdParty(),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(r),"fetchThirdParty",(0,i.default)(n.mark(function e(){var t;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ota||r.monoVoices._loaded){e.next=8;break}return e.next=3,(0,h.get)(r.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return r.setState({ota:(0,m.default)({},r.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:r.setState({ota:(0,m.default)({},r.thirdPartyKey,Object.assign({},t,{_loaded:(0,_.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(r),"updateThirdParty",(0,i.default)(n.mark(function e(){return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.includes(r.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,h.update)(r.thirdPartyKey,{list:r.monoVoices.list.slice(0,24)}),S.push(r.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(r),"onFilterSelect",(s=(0,i.default)(n.mark(function e(t,s){var o;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,b.t)("角色.职位选择",{label:t.split(" ")[0]}),o=s.find(function(e){return e.title===t})||{},o=o.value,o=void 0===o?"":o,r.setState({position:o}),r.fetchMonoVoices(),r.setStorage(y.NAMESPACE);case 5:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})),(0,m.default)((0,a.default)(r),"onScroll",_.updateVisibleBottom.bind((0,a.default)(r))),r}t.default=l},"./src/screens/home/voices/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var o=t.$,r=o.state.position,t=void 0===(t=o.monoVoices.filters)?[]:t;return(0,i.jsxs)(n.ToolBar,{children:[t.map(function(t){var e=t.data.map(function(e){return e.title}),s=t.data.find(function(e){return e.value===r})||{title:"全部"};return(0,i.jsx)(n.ToolBar.Popover,{data:e,text:"全部"!==s.title&&s.title||t.title,type:"全部"!==s.title?"desc":"sub",onSelect:function(e){return o.onFilterSelect(e,t.data)}},t.title)}),(0,i.jsx)(n.Heatmap,{id:"角色.职位选择"})]})});t.default=s;try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/voices/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/home/wiki/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/wiki/header/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=t.$;return(0,a.jsx)(r.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的修订历史":"修订历史",alias:"修订历史",hm:[s.url,"SubjectWiki"],headerTitleStyle:d.styles.title,headerRight:function(){return(0,a.jsx)(r.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("修订历史.右上角菜单",{key:e}),(0,n.open)(s.url))},children:(0,a.jsx)(r.Heatmap,{id:"修订历史.右上角菜单"})})}})});t.default=s;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/wiki/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/wiki/header/index.tsx#header"})}catch(e){}},"./src/screens/home/wiki/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}});t.styles=s},"./src/screens/home/wiki/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/wiki/header/index.tsx")),a=o(s("./src/screens/home/wiki/list/index.tsx")),o=o(s("./src/screens/home/wiki/store.ts")),l=s("./node_modules/react/jsx-runtime.js"),s=(0,n.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.default,{}),(0,l.jsx)(r.Page,{children:(0,l.jsx)(a.default,{})})]})})});t.default=s;try{wiki.displayName="wiki",wiki.__docgenInfo={description:"",displayName:"wiki",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/wiki/index.tsx#wiki"]={docgenInfo:wiki.__docgenInfo,name:"wiki",path:"src/screens/home/wiki/index.tsx#wiki"})}catch(e){}},"./src/screens/home/wiki/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.sub.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/react/index.js")),u=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),j=s("./src/constants/index.ts"),_=s("./node_modules/react/jsx-runtime.js");function b(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var h,x=p._.r(1.28*j.IMG_WIDTH),y=p._.r(1.28*j.IMG_HEIGHT),l=(s=l.default.Component,(0,i.default)(g,s),h=b(g),(0,n.default)(g,[{key:"renderCovers",value:function(){var e=this.context,t=e.$,n=e.navigation,i=t.wiki.covers;return null!=i&&i.length?(0,_.jsx)(c.HorizontalList,{style:[p._.mt.md,p._.mb.md],contentContainerStyle:p._.container.wind,data:i,initialRenderNums:p._.device(4,8),renderItem:function(e,t){var s=e.cover,o=e.userId,r=e.userName;return(0,_.jsxs)(u.default,{style:(0,f.stl)({width:x},!!t&&p._.ml.md),children:[(0,_.jsx)(m.Cover,{src:s,size:x,height:y,radius:!0,onPress:function(){(0,f.showImageViewer)(i.map(function(e){return{url:"https:"+(0,f.getCoverLarge)(e.cover)}}),t)}}),(0,_.jsxs)(c.Flex,{style:p._.mt.sm,children:[(0,_.jsx)(m.Avatar,{navigation:n,userId:o,src:(0,j.API_AVATAR)(o),size:20}),(0,_.jsx)(c.Flex.Item,{style:p._.ml.sm,children:(0,_.jsx)(c.Text,{size:11,bold:!0,numberOfLines:1,onPress:function(){n.push("Zone",{userId:o,_name:r})},children:r||o})})]})]},s)}}):null}},{key:"renderEdits",value:function(){var e=this.context,t=e.$,a=e.navigation,l=t.wiki.edits;return null!=l&&l.length?(0,_.jsx)(u.default,{style:p._.container.wind,children:l.map(function(e,t){var s=e.id,o=e.comment,r=e.sub,n=e.time,i=e.userId,d=e.userName;return(0,_.jsxs)(u.default,{style:p._.mt.sm,children:[(0,_.jsxs)(c.Text,{lineHeight:15,bold:!0,children:["〔",l.length-t,"〕",o||"-",!!r&&(0,_.jsxs)(c.Text,{size:13,lineHeight:15,bold:!0,children:[" ","(",r,")"]})]}),!(!d&&!i)&&(0,_.jsxs)(c.Flex,{style:p._.mt.sm,children:[(0,_.jsx)(c.Text,{style:p._.ml.sm,size:12,lineHeight:13,bold:!0,children:(0,f.simpleTime)(n)}),(0,_.jsx)(c.Text,{style:p._.ml.xs,type:"sub",size:12,lineHeight:13,children:"by"}),(0,_.jsx)(m.Avatar,{style:p._.ml.sm,navigation:a,userId:i,src:(0,j.API_AVATAR)(i),size:20}),(0,_.jsx)(c.Text,{style:p._.ml.sm,size:12,lineHeight:13,bold:!0,onPress:function(){a.push("Zone",{userId:i,_name:d})},children:d||i})]}),(0,_.jsx)(c.Divider,{style:p._.mt.xs})]},s)})}):null}},{key:"render",value:function(){return(0,_.jsxs)(c.ScrollView,{contentContainerStyle:p._.container.bottom,scrollToTop:!0,children:[this.renderCovers(),this.renderEdits()]})}}]),g);function g(){return(0,r.default)(this,g),h.apply(this,arguments)}i=(0,o.obc)(l);t.default=i;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/wiki/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/wiki/list/index.tsx#list"})}catch(e){}},"./src/screens/home/wiki/store.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),m=s("./node_modules/mobx/dist/mobx.esm.js"),p=s("./src/stores/index.ts"),o=o(s("./src/utils/store/index.ts")),f=s("./src/constants/index.ts");function j(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=o.default,(0,d.default)(b,s),_=j(b),(0,n.default)(b,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"subject",get:function(){return p.subjectStore.subject(this.subjectId)}},{key:"wiki",get:function(){return p.subjectStore.wiki(this.subjectId)}},{key:"url",get:function(){return f.HOST+"/subject/"+this.subjectId+"/edit"}}]),(0,c.default)((o=b).prototype,"subjectId",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectId"),o.prototype),(0,c.default)(o.prototype,"subject",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subject"),o.prototype),(0,c.default)(o.prototype,"wiki",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"wiki"),o.prototype),(0,c.default)(o.prototype,"url",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype);var _,d=o;function b(){var e;(0,r.default)(this,b);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=_.call.apply(_,[this].concat(s)),(0,u.default)((0,i.default)(e),"params",void 0),(0,u.default)((0,i.default)(e),"init",function(){return p.subjectStore.fetchWiki({subjectId:e.subjectId})}),e}t.default=d},"./src/screens/home/works/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;var o=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),o=(t.NAMESPACE="ScreenWorks",{visibleBottom:o._.window.height,position:"",ota:{}}),s=(t.EXCLUDE_STATE=o,Object.assign({order:s.MODEL_MONO_WORKS_ORDERBY.getValue("日期"),list:!0,fixed:!1,collected:!0},o,{_loaded:!1}));t.STATE=s},"./src/screens/home/works/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/works/header/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=t.$;return(0,a.jsx)(r.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的作品":"更多作品",alias:"作品",hm:[s.url,"Works"],headerTitleStyle:d.styles.title,headerRight:function(){return(0,a.jsx)(r.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("作品.右上角菜单",{key:e}),(0,n.open)(s.url))},children:(0,a.jsx)(r.Heatmap,{id:"作品.右上角菜单"})})}})});t.default=s;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/works/header/index.tsx#header"})}catch(e){}},"./src/screens/home/works/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}});t.styles=s},"./src/screens/home/works/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/works/header/index.tsx")),a=o(s("./src/screens/home/works/tool-bar/index.tsx")),l=o(s("./src/screens/home/works/list/index.tsx")),o=o(s("./src/screens/home/works/store.ts")),u=s("./node_modules/react/jsx-runtime.js"),s=(0,n.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){var e=s.state.fixed;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.default,{}),(0,u.jsxs)(r.Page,{children:[e&&(0,u.jsx)(a.default,{}),(0,u.jsx)(l.default,{})]})]})})});t.default=s;try{works.displayName="works",works.__docgenInfo={description:"",displayName:"works",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/index.tsx#works"]={docgenInfo:works.__docgenInfo,name:"works",path:"src/screens/home/works/index.tsx#works"})}catch(e){}},"./src/screens/home/works/list/grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),d=s("./src/stores/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./node_modules/react/jsx-runtime.js"),c={id:"作品.跳转",data:{type:"grid"}};s=(0,o.obc)(function(e,t){var s=e.item,o=e.index,e=e.numColumns,t=t.navigation,r=String(s.id).replace("/subject/",""),n=d.collectionStore.collect(r);return(0,u.jsx)(i.ItemCollectionsGrid,Object.assign({style:(0,l.stl)((d._.isPad||d._.isLandscape)&&!(o%e)&&d._.container.left,o<e&&d._.mt.sm),navigation:t,num:e,event:c},s,{airtime:(0,l.matchYear)(s.tip),id:r,collection:n,typeCn:a.MODEL_SUBJECT_TYPE.getTitle(s.type)}))});t.default=s},"./src/screens/home/works/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./src/utils/index.ts"),a=o(s("./src/screens/home/works/tool-bar/index.tsx")),l=o(s("./src/screens/home/works/list/list/index.tsx")),u=o(s("./src/screens/home/works/list/grid/index.tsx")),c=s("./node_modules/react/jsx-runtime.js");o=(0,r.obc)(function(e,t){var s,t=t.$,o=(r=t.state).fixed,r=r.list;return t.list._loaded?(s=r?void 0:i._.portrait(3,5),(0,c.jsx)(n.ListView,{keyExtractor:d.keyExtractor,contentContainerStyle:i._.container.bottom,data:t.list,numColumns:s,scrollToTop:!0,ListHeaderComponent:!o&&(0,c.jsx)(a.default,{}),renderItem:r?m:p,scrollEventThrottle:16,onScroll:t.onScroll,onHeaderRefresh:t.onHeaderRefresh,onFooterRefresh:t.fetchMonoWorks},""+i._.orientation+s)):(0,c.jsxs)(c.Fragment,{children:[!o&&(0,c.jsx)(a.default,{}),(0,c.jsx)(n.Loading,{})]})});function m(e){var t=e.item,e=e.index;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.default,{item:t,index:e}),!e&&(0,c.jsx)(n.Heatmap,{id:"作品.跳转"})]})}function p(e){var t=e.item,e=e.index;return(0,c.jsx)(u.default,{item:t,index:e,numColumns:i._.portrait(3,5)})}t.default=o;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/works/list/index.tsx#list"})}catch(e){}},"./src/screens/home/works/list/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/constants/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/index.ts"),a=s("./node_modules/react/jsx-runtime.js"),l={id:"作品.跳转",data:{type:"list"}};s=(0,o.obc)(function(e,t){var s=e.item,e=e.index,t=t.navigation,o=String(s.id).replace("/subject/",""),o=n.collectionStore.collect(o);return(0,a.jsx)(r.ItemSearch,Object.assign({style:n._.container.item,navigation:t,event:l,index:e},s,{tip:(0,d.HTMLDecode)(s.tip),typeCn:i.MODEL_SUBJECT_TYPE.getTitle(s.type),collection:o}))});t.default=s},"./src/screens/home/works/store.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),d=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),_=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),h=s("./src/utils/fetch/index.ts"),x=s("./src/utils/kv/index.ts"),y=s("./src/constants/index.ts"),g=s("./src/screens/home/works/ds.ts"),v=["collected"];function S(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=o?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var T,O=[],u=(s=o.default,(0,u.default)(E,s),T=S(E),(0,n.default)(E,[{key:"monoId",get:function(){return this.params.monoId}},{key:"monoWorks",get:function(){return _.subjectStore.monoWorks(this.monoId)}},{key:"list",get:function(){return this.monoWorks._loaded?this.state.collected?this.monoWorks:Object.assign({},this.monoWorks,{list:this.monoWorks.list.filter(function(e){return!e.collected})}):this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):y.LIST_EMPTY}},{key:"url",get:function(){var e=this.state,t=e.position,e=e.order;return(0,y.HTML_MONO_WORKS)(this.monoId,t,e)}},{key:"subject",value:function(e){return(0,j.computed)(function(){return _.subjectStore.subject(e)}).get()}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){var e=this.state,t=e.order,e=e.position;return("works_"+[this.monoId,t,e].join("_")).replace("/","_")}}]),(0,f.default)((o=E).prototype,"monoId",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"monoId"),o.prototype),(0,f.default)(o.prototype,"monoWorks",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"monoWorks"),o.prototype),(0,f.default)(o.prototype,"list",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"list"),o.prototype),(0,f.default)(o.prototype,"url",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),(0,f.default)(o.prototype,"ota",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"ota"),o.prototype),(0,f.default)(o.prototype,"thirdPartyKey",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"thirdPartyKey"),o.prototype),o);function E(){var n;(0,a.default)(this,E);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return n=T.call.apply(T,[this].concat(s)),(0,p.default)((0,l.default)(n),"params",void 0),(0,p.default)((0,l.default)(n),"state",(0,j.observable)(g.STATE)),(0,p.default)((0,l.default)(n),"init",(0,d.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getStorage(g.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,n.setState(Object.assign({},t,g.EXCLUDE_STATE,{_loaded:!0})),e.abrupt("return",n.fetchMonoWorks(!0));case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(n),"onHeaderRefresh",function(){return n.fetchMonoWorks(!0)}),(0,p.default)((0,l.default)(n),"fetchMonoWorks",(t=(0,d.default)(i.mark(function e(t){var s,o,r;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.fetchThirdParty(),r=n.state,o=r.position,r=r.order,e.next=4,_.subjectStore.fetchMonoWorks({monoId:n.monoId,position:o,order:r},t);case 4:return(s=e.sent).list.length&&n.thirdPartyKey in n.state.ota&&(r=(null==(o=n.ota)?void 0:o.ts)||0,604800<=(0,b.getTimestamp)()-r)&&n.updateThirdParty(),setTimeout(function(){_.collectionStore.fetchCollectionStatusQueue(s.list.filter(function(e){return e.collected}).map(function(e){return String(e.id).replace("/subject/","")}))},160),e.abrupt("return",s);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,p.default)((0,l.default)(n),"fetchThirdParty",(0,d.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ota||n.monoWorks._loaded){e.next=8;break}return e.next=3,(0,x.get)(n.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return n.setState({ota:(0,p.default)({},n.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:n.setState({ota:(0,p.default)({},n.thirdPartyKey,Object.assign({},t,{_loaded:(0,b.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(n),"updateThirdParty",(0,d.default)(i.mark(function e(){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(O.includes(n.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,x.update)(n.thirdPartyKey,{list:n.monoWorks.list.map(function(e){e.collected;return(0,r.default)(e,v)})}),O.push(n.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(n),"onOrderSelect",function(e){(0,h.t)("作品.排序选择",{label:e}),n.setState({order:y.MODEL_MONO_WORKS_ORDERBY.getValue(e)}),n.fetchMonoWorks(!0),n.setStorage(g.NAMESPACE)}),(0,p.default)((0,l.default)(n),"onFilterSelect",function(t,e){(0,h.t)("作品.职位选择",{label:t.split(" ")[0]});e=(e.find(function(e){return e.title===t})||{}).value;n.setState({position:void 0===e?"":e}),n.fetchMonoWorks(!0),n.setStorage(g.NAMESPACE)}),(0,p.default)((0,l.default)(n),"onToggleList",function(){var e=n.state.list;(0,h.t)("作品.切换布局",{list:!e}),n.setState({list:!e}),n.setStorage(g.NAMESPACE)}),(0,p.default)((0,l.default)(n),"onToggleToolbar",function(e){n.setState((0,p.default)({},e,!n.state[e])),n.setStorage(g.NAMESPACE)}),(0,p.default)((0,l.default)(n),"onScroll",b.updateVisibleBottom.bind((0,l.default)(n))),n}t.default=u},"./src/screens/home/works/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),l=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),c=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var o=t.$,s=(t=o.state).order,r=t.position,n=t.list,i=t.fixed,t=t.collected,d=o.monoWorks.filters;return(0,c.jsxs)(a.ToolBar,{children:[(0,c.jsx)(a.ToolBar.Popover,{data:u.MONO_WORKS_ORDERBY.map(function(e){return e.label}),icon:"md-sort",iconColor:l._.colorDesc,text:u.MODEL_MONO_WORKS_ORDERBY.getLabel(s),type:"desc",heatmap:"作品.排序选择",onSelect:o.onOrderSelect}),d.map(function(t){var e=t.data.map(function(e){return e.title}),s=t.data.find(function(e){return e.value===r})||{title:"全部"};return(0,c.jsx)(a.ToolBar.Popover,{data:e,text:"全部"!==s.title&&s.title||t.title,type:"全部"===s.title?void 0:"desc",heatmap:"作品.职位选择",onSelect:function(e){return o.onFilterSelect(e,t.data)}},t.title)}),(0,c.jsx)(a.ToolBar.Popover,{data:["布局（"+(n?"列表":"网格")+"）","筛选（"+(i?"固定":"浮动")+"）","收藏（"+(t?"显示":"隐藏")+"）"],icon:"md-more-vert",iconColor:l._.colorDesc,iconSize:20,type:"desc",transparent:!0,onSelect:function(e){return e.includes("布局")?o.onToggleList():e.includes("筛选")?o.onToggleToolbar("fixed"):e.includes("收藏")?o.onToggleToolbar("collected"):void 0}})]})});t.default=s;try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/works/tool-bar/index.tsx#toolbar"})}catch(e){}}}]);