(self.webpackChunkweb=self.webpackChunkweb||[]).push([[2610],{"./src/screens/home/characters/component/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/home/characters/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"Component")},"./src/screens/home/characters/component/extra/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/home/characters/component/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"Extra")},"./src/screens/home/characters/component/extra/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=r("./src/components/index.ts"),n=r("./src/stores/index.ts"),c=r("./src/utils/decorators/index.ts"),a=r("./src/screens/home/characters/component/extra/ds.ts"),u=r("./node_modules/react/jsx-runtime.js");t.default=(0,c.ob)((function(){return(0,u.jsx)(o.Heatmap,{bottom:n._.bottom,id:"更多角色",screen:"Characters"})}),a.COMPONENT)},"./src/screens/home/characters/component/list/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/home/characters/component/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"List"),t.EVENT={id:"更多角色.跳转"}},"./src/screens/home/characters/component/list/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=r("./src/screens/_/index.ts"),n=r("./src/stores/index.ts"),c=r("./src/utils/index.ts"),a=r("./src/utils/decorators/index.ts"),u=r("./src/screens/home/characters/component/list/utils.tsx"),l=r("./src/screens/home/characters/component/list/ds.ts"),d=r("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var r=t.$;return(0,d.jsx)(o.PaginationList2,{keyExtractor:c.keyExtractor,contentContainerStyle:n._.container.bottom,data:r.characters.list,limit:12,scrollToTop:!0,renderItem:u.renderItem,scrollEventThrottle:16,onScroll:r.onScroll})}),l.COMPONENT)},"./src/screens/home/characters/component/list/utils.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.assign.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=function(e){var t=e.item,r=e.index;return(0,c.jsx)(o.ItemCharacter,Object.assign({index:r,event:n.EVENT},t))};s(r("react"));var o=r("./src/screens/_/index.ts"),n=r("./src/screens/home/characters/component/list/ds.ts"),c=r("./node_modules/react/jsx-runtime.js")},"./src/screens/home/characters/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;t.COMPONENT="Characters"},"./src/screens/home/characters/header/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DATA=t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/constants/index.ts"),n=r("./src/screens/home/characters/ds.ts");t.COMPONENT=(0,s.rc)(n.COMPONENT,"Header"),t.DATA=[o.TEXT_MENU_BROWSER]},"./src/screens/home/characters/header/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.function.name.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=r("./src/components/index.ts"),n=r("./src/utils/index.ts"),c=r("./src/utils/decorators/index.ts"),a=r("./src/utils/fetch/index.ts"),u=r("./src/constants/index.ts"),l=r("./src/screens/home/characters/header/ds.ts"),d=r("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var r,s=t.$;return(0,d.jsx)(o.Header,{title:null!=(r=s.params)&&r.name?s.params.name+"的角色":"更多角色",alias:"更多角色",hm:[s.url,"Characters"],headerRight:function(){return(0,d.jsx)(o.Header.Popover,{data:l.DATA,onSelect:function(e){e===u.TEXT_MENU_BROWSER&&((0,n.open)(s.url),(0,a.t)("更多角色.右上角菜单",{key:e}))},children:(0,d.jsx)(o.Heatmap,{id:"更多角色.右上角菜单"})})}})}),l.COMPONENT)},"./src/screens/home/characters/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=r("./src/components/index.ts"),n=r("./src/utils/decorators/index.ts"),c=r("./src/utils/hooks/index.ts"),a=s(r("./src/screens/home/characters/component/extra/index.tsx")),u=s(r("./src/screens/home/characters/component/list/index.tsx")),l=s(r("./src/screens/home/characters/header/index.tsx")),d=s(r("./src/screens/home/characters/store/index.ts")),i=r("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(d.default,(function(e,t){var r=t.$;return(0,c.useRunAfter)((function(){r.init()})),(0,c.useObserver)((function(){return(0,i.jsxs)(o.Component,{id:"screen-characters",children:[(0,i.jsx)(l.default,{}),(0,i.jsx)(o.Page,{loaded:r.characters._loaded,children:(0,i.jsx)(u.default,{})}),(0,i.jsx)(a.default,{})]})}))}))},"./src/screens/home/characters/store/action.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.function.bind.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),n=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=s(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),u=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),d=s(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=r("./src/utils/index.ts"),f=s(r("./src/screens/home/characters/store/fetch.ts"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return(0,u.default)(this,r)}}t.default=function(e){(0,a.default)(r,e);var t=m(r);function r(){var e;(0,n.default)(this,r);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,d.default)((0,c.default)(e),"onScroll",i.updateVisibleBottom.bind((0,c.default)(e))),e}return(0,o.default)(r)}(f.default)},"./src/screens/home/characters/store/computed.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.object.assign.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),a=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),u=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),d=s(r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),i=r("./node_modules/mobx/dist/mobx.esm.js"),f=r("./src/stores/index.ts"),m=r("./src/constants/index.ts"),p=s(r("./src/screens/home/characters/store/state.ts"));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return(0,u.default)(this,r)}}t.default=(o=function(e){(0,a.default)(r,e);var t=h(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"characters",get:function(){var e=f.monoStore.characters(this.subjectId);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):m.LIST_EMPTY}},{key:"url",get:function(){return(0,m.HTML_SUBJECT_CHARACTERS)(this.subjectId)}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){return"characters_"+this.subjectId}}]),r}(p.default),(0,d.default)(o.prototype,"subjectId",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectId"),o.prototype),(0,d.default)(o.prototype,"characters",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"characters"),o.prototype),(0,d.default)(o.prototype,"url",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),(0,d.default)(o.prototype,"ota",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"ota"),o.prototype),(0,d.default)(o.prototype,"thirdPartyKey",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"thirdPartyKey"),o.prototype),o)},"./src/screens/home/characters/store/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.EXCLUDE_STATE=void 0;var s=r("./src/stores/index.ts"),o=t.EXCLUDE_STATE={visibleBottom:s._.window.height};t.STATE=Object.assign({ota:{}},o,{_loaded:!1})},"./src/screens/home/characters/store/fetch.ts":(e,t,r)=>{var s=r("./node_modules/@babel/runtime/regenerator/index.js");r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.object.assign.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/web.timers.js");var o=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=o(r("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=o(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(r("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=o(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r("./src/stores/index.ts"),p=r("./src/utils/index.ts"),h=r("./src/utils/kv/index.ts"),j=r("./src/constants/index.ts"),b=o(r("./src/screens/home/characters/store/computed.ts"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return(0,d.default)(this,r)}}var _=[];t.default=function(e){(0,l.default)(r,e);var t=y(r);function r(){var e;(0,a.default)(this,r);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return e=t.call.apply(t,[this].concat(c)),(0,f.default)((0,u.default)(e),"fetchCharacters",(0,n.default)(s.mark((function t(){var r,o,n;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetchThirdParty(),t.next=3,m.monoStore.fetchCharacters({subjectId:e.subjectId});case 3:return(r=t.sent).list.length&&e.thirdPartyKey in e.state.ota&&(n=(null==(o=e.ota)?void 0:o.ts)||0,(0,p.getTimestamp)()-n>=j.D7&&e.updateThirdParty()),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))),(0,f.default)((0,u.default)(e),"fetchThirdParty",(0,n.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ota||e.characters._loaded){t.next=8;break}return t.next=3,(0,h.get)(e.thirdPartyKey);case 3:if(r=t.sent){t.next=7;break}return e.setState({ota:(0,f.default)({},e.thirdPartyKey,{list:[],_loaded:0})}),t.abrupt("return");case 7:e.setState({ota:(0,f.default)({},e.thirdPartyKey,Object.assign({},r,{_loaded:(0,p.getTimestamp)()}))});case 8:case"end":return t.stop()}}),t)})))),(0,f.default)((0,u.default)(e),"updateThirdParty",(0,n.default)(s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!_.includes(e.thirdPartyKey)){t.next=2;break}return t.abrupt("return");case 2:setTimeout((function(){(0,h.update)(e.thirdPartyKey,{list:e.characters.list}),_.push(e.thirdPartyKey)}),0);case 3:case"end":return t.stop()}}),t)})))),e}return(0,c.default)(r)}(b.default)},"./src/screens/home/characters/store/index.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),n=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=s(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),u=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),d=s(r("./node_modules/@babel/runtime/helpers/defineProperty.js"));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return(0,u.default)(this,r)}}var f=function(e){(0,a.default)(r,e);var t=i(r);function r(){var e;(0,n.default)(this,r);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,d.default)((0,c.default)(e),"init",(function(){return e.setState({_loaded:!0}),e.fetchCharacters()})),e}return(0,o.default)(r)}(s(r("./src/screens/home/characters/store/action.ts")).default);t.default=f},"./src/screens/home/characters/store/state.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),n=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=s(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),u=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),d=s(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=r("./node_modules/mobx/dist/mobx.esm.js"),f=s(r("./src/utils/store/index.ts")),m=r("./src/screens/home/characters/store/ds.ts");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return(0,u.default)(this,r)}}t.default=function(e){(0,a.default)(r,e);var t=p(r);function r(){var e;(0,n.default)(this,r);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,d.default)((0,c.default)(e),"params",void 0),(0,d.default)((0,c.default)(e),"state",(0,i.observable)(m.STATE)),e}return(0,o.default)(r)}(f.default)}}]);