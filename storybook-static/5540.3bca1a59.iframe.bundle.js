(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5540],{"./src/screens/timeline/say/component/chat/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var n=s("./src/utils/dev/index.ts"),r=s("./src/screens/timeline/say/component/ds.ts");t.COMPONENT=(0,n.rc)(r.COMPONENT,"Chat")},"./src/screens/timeline/say/component/chat/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(s("react"));var r=s("./src/screens/_/index.ts"),o=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),l=s("./src/screens/timeline/say/component/chat/utils.tsx"),d=s("./src/screens/timeline/say/component/chat/ds.ts"),c=s("./src/screens/timeline/say/component/chat/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=e.forwardRef,n=t.$,i=(0,c.memoStyles)(),d=n.say.list;return(0,u.jsx)(r.PaginationList2,{forwardRef:s,style:o._.container.screen,contentContainerStyle:i.container,keyExtractor:a.keyExtractor,data:d,inverted:!0,renderItem:l.renderItem,ListFooterComponent:null},d.length)}),d.COMPONENT)},"./src/screens/timeline/say/component/chat/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var n=s("./src/stores/index.ts");t.memoStyles=n._.memoStyles((function(){return{container:{paddingTop:n._.bottom+n._.lg,paddingHorizontal:n._.wind,paddingBottom:n._.lg}}}))},"./src/screens/timeline/say/component/chat/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=a;n(s("react"));var r=n(s("./src/screens/timeline/say/component/item/index.tsx")),o=s("./node_modules/react/jsx-runtime.js");function a(e){var t=e.item,s=e.index;return(0,o.jsx)(r.default,{item:t,index:s})}try{a.displayName="renderItem",a.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/say/component/chat/utils.tsx#renderItem"]={docgenInfo:a.__docgenInfo,name:"renderItem",path:"src/screens/timeline/say/component/chat/utils.tsx#renderItem"})}catch(e){}},"./src/screens/timeline/say/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var n=s("./src/utils/dev/index.ts"),r=s("./src/screens/timeline/say/ds.ts");t.COMPONENT=(0,n.rc)(r.COMPONENT,"Component")},"./src/screens/timeline/say/component/heatmaps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var n=s("./src/utils/dev/index.ts"),r=s("./src/screens/timeline/say/component/ds.ts");t.COMPONENT=(0,n.rc)(r.COMPONENT,"Heatmaps")},"./src/screens/timeline/say/component/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(s("react"));var r=s("./src/components/index.ts"),o=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),i=s("./src/screens/timeline/say/component/heatmaps/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.ob)((function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Heatmap,{bottom:o._.bottom,id:"吐槽",screen:"Say"}),(0,l.jsx)(r.Heatmap,{right:67,bottom:o._.bottom,id:"吐槽.显示评论框",transparent:!0}),(0,l.jsx)(r.Heatmap,{right:67,bottom:o._.bottom-34,id:"吐槽.新吐槽",transparent:!0}),(0,l.jsx)(r.Heatmap,{right:67,bottom:o._.bottom-68,id:"吐槽.回复吐槽",transparent:!0}),(0,l.jsx)(r.Heatmap,{right:121,bottom:o._.bottom-68,id:"吐槽.回复失败",transparent:!0})]})}),i.COMPONENT)},"./src/screens/timeline/say/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var n=s("./src/utils/dev/index.ts"),r=s("./src/screens/timeline/say/component/ds.ts");t.COMPONENT=(0,n.rc)(r.COMPONENT,"Item"),t.EVENT={id:"吐槽.跳转"}},"./src/screens/timeline/say/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.function.name.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(s("react"));var r=s("./src/components/index.ts"),o=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),c=s("./src/screens/timeline/say/component/item/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var s,n=e.item,l=e.index,m=t.$;if(!n.id)return null;var p=m.say.list,f=0===l?{}:p[l-1],y=n.id===a.userStore.myId;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.ItemSay,Object.assign({},n,{event:c.EVENT,position:y?"right":"left",avatar:(0,i.getAvatarLocal)(n.id)||(0,d.API_AVATAR)(n.id),showName:f.name!==n.name,onLongPress:function(){return m.at(n.id)}})),l+1===p.length&&!!n.date&&(0,u.jsx)(r.Text,{size:12,type:"sub",align:"center",children:null==(s=p[l])?void 0:s.date})]})}),c.COMPONENT)},"./src/screens/timeline/say/component/page/index.web.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),o=n(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=n(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=n(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=n(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=n(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=n(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=n(s("react")),m=s("./src/components/index.ts"),p=s("./src/stores/index.ts"),f=s("./src/utils/decorators/index.ts"),y=s("./src/constants/index.ts"),h=n(s("./src/screens/timeline/say/component/chat/index.tsx")),j=s("./node_modules/react/jsx-runtime.js");function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;s=Reflect.construct(n,arguments,r)}else s=n.apply(this,arguments);return(0,l.default)(this,s)}}var _=function(e){(0,i.default)(s,e);var t=x(s);function s(){var e;(0,r.default)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,c.default)((0,a.default)(e),"state",{expand:!1}),(0,c.default)((0,a.default)(e),"onExpand",(function(){e.setState({expand:!0})})),e}return(0,o.default)(s,[{key:"renderNew",value:function(){var e=this.context,t=e.$,s=e.navigation,n=t.state.value;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(m.ScrollView,Object.assign({style:p._.container.screen,contentContainerStyle:p._.container.bottom},y.SCROLL_VIEW_RESET_PROPS,{children:[(0,j.jsx)(h.default,{}),(0,j.jsx)(m.Text,{style:[p._.mt._md,p._.ml.md],type:"sub",children:"点击底部输入框录入吐槽内容"})]})),p.userStore.isWebLogin&&(0,j.jsx)(m.FixedTextarea,{placeholder:"新吐槽",simple:!0,value:n,onChange:t.onChange,onClose:t.closeFixedTextarea,onSubmit:function(e){return t.doSubmit(e,null,s)}})]})}},{key:"renderList",value:function(){return this.context.$.say._loaded?(0,j.jsx)(m.ScrollView,Object.assign({contentContainerStyle:p._.container.bottom},y.SCROLL_VIEW_RESET_PROPS,{children:(0,j.jsx)(h.default,{})})):(0,j.jsx)(m.Flex,{style:p._.container.screen,justify:"center",children:(0,j.jsx)(m.Loading,{})})}},{key:"renderTextarea",value:function(){var e=this.context,t=e.$,s=e.navigation,n=t.state.value;return p.userStore.isWebLogin&&(0,j.jsx)(m.FixedTextarea,{placeholder:"回复吐槽, 长按头像@某人",simple:!0,value:n,onChange:t.onChange,onClose:t.closeFixedTextarea,onSubmit:function(e){return t.doSubmit(e,null,s)}})}},{key:"render",value:function(){var e=this.context.$;return(0,j.jsx)(m.Page,{style:p._.container.screen,children:e.isNew?this.renderNew():this.renderList()})}}]),s}(u.default.Component);t.default=(0,f.obc)(_);try{indexweb.displayName="indexweb",indexweb.__docgenInfo={description:"",displayName:"indexweb",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/say/component/page/index.web.tsx#indexweb"]={docgenInfo:indexweb.__docgenInfo,name:"indexweb",path:"src/screens/timeline/say/component/page/index.web.tsx#indexweb"})}catch(e){}},"./src/screens/timeline/say/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.COMPONENT=void 0;t.COMPONENT="Say",t.STATE={value:"",placeholder:"",replySub:"",message:"",_loaded:!1}},"./src/screens/timeline/say/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var n=s("./src/utils/dev/index.ts"),r=s("./src/screens/timeline/say/ds.ts");t.COMPONENT=(0,n.rc)(r.COMPONENT,"Header")},"./src/screens/timeline/say/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(s("react"));var r=s("./src/components/index.ts"),o=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),c=s("./src/constants/index.ts"),u=s("./src/screens/timeline/say/header/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var s,n,l=t.$,u=l.say.list,p=null==(s=u[u.length-1])?void 0:s.date;return(0,m.jsx)(r.Header,{title:l.isNew?"新吐槽":"吐槽 ("+u.length+")"+(p?" · "+(null==(n=p.split(" "))?void 0:n[0]):""),alias:"吐槽",hm:[l.url,"Say"],headerTitleAlign:"left",headerRight:function(){return l.isNew?null:(0,m.jsxs)(r.Flex,{children:[!c.STORYBOOK&&u.length>=10&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.IconTouchable,{style:a._.mr._xs,name:"md-keyboard-arrow-up",size:24,color:a._.colorTitle,onPress:function(){l.scrollToTop(l.scrollViewRef,!0)}}),(0,m.jsx)(o.IconTouchable,{name:"md-keyboard-arrow-down",size:24,color:a._.colorTitle,onPress:function(){l.scrollToBottom(l.scrollViewRef,!0)}})]}),(0,m.jsx)(r.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,d.t)("吐槽.右上角菜单",{key:e}),(0,i.open)(l.url))},children:(0,m.jsx)(r.Heatmap,{id:"吐槽.右上角菜单"})})]})}})}),u.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/say/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/timeline/say/header/index.tsx#header"})}catch(e){}},"./src/screens/timeline/say/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useSayPage=function(e){var t=e.$;(0,n.useRunAfter)((function(){t.init()})),(0,n.useKeyboardAdjustResize)()};var n=s("./src/utils/hooks/index.ts")},"./src/screens/timeline/say/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(s("react"));var r=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),i=n(s("./src/screens/timeline/say/component/heatmaps/index.tsx")),l=n(s("./src/screens/timeline/say/component/page/index.web.tsx")),d=n(s("./src/screens/timeline/say/header/index.tsx")),c=s("./src/screens/timeline/say/hooks.ts"),u=n(s("./src/screens/timeline/say/store.ts")),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ic)(u.default,(function(e,t){return(0,c.useSayPage)(t),(0,a.useObserver)((function(){return(0,m.jsxs)(r.Component,{id:"screen-say",children:[(0,m.jsx)(d.default,{}),(0,m.jsx)(l.default,{}),(0,m.jsx)(i.default,{})]})}))}));try{say.displayName="say",say.__docgenInfo={description:"",displayName:"say",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/say/index.tsx#say"]={docgenInfo:say.__docgenInfo,name:"say",path:"src/screens/timeline/say/index.tsx#say"})}catch(e){}},"./src/screens/timeline/say/store.ts":(e,t,s)=>{var n=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),h=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),x=s("./src/utils/fetch/index.ts"),_=r(s("./src/utils/store/index.ts")),b=s("./src/utils/webhooks/index.ts"),v=s("./src/constants/index.ts"),O=r(s("./src/constants/i18n/index.ts")),S=s("./src/screens/timeline/say/ds.ts");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;s=Reflect.construct(n,arguments,r)}else s=n.apply(this,arguments);return(0,u.default)(this,s)}}t.default=(o=function(e){(0,c.default)(s,e);var t=g(s);function s(){var e,r;(0,i.default)(this,s);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return e=t.call.apply(t,[this].concat(l)),(0,p.default)((0,d.default)(e),"params",void 0),(0,p.default)((0,d.default)(e),"state",(0,y.observable)(S.STATE)),(0,p.default)((0,d.default)(e),"scrollViewRef",null),(0,p.default)((0,d.default)(e),"init",(r=(0,a.default)(n.mark((function t(s){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s&&(e.scrollViewRef=s),!e.isNew){t.next=3;break}return t.abrupt("return",h.timelineStore.fetchFormHash());case 3:return e.say._loaded&&e.scrollToBottom(e.scrollViewRef),t.next=7,e.fetchSay();case 7:h.timelineStore.fetchFormHash();case 8:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"fetchSay",(function(){return h.timelineStore.fetchSay({id:e.id})})),(0,p.default)((0,d.default)(e),"fetchTimeline",(function(){var e=v.MODEL_TIMELINE_TYPE.getValue("吐槽");return h.timelineStore.fetchTimeline({scope:"friend",type:e},!0)})),(0,p.default)((0,d.default)(e),"scrollToBottom",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null!=e&&e.scrollToIndex&&setTimeout((function(){try{e.scrollToIndex({animated:t,index:0,viewOffset:200})}catch(e){}}),160)})),(0,p.default)((0,d.default)(e),"scrollToTop",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null!=e&&e.scrollToEnd&&setTimeout((function(){try{e.scrollToEnd({animated:t,duration:640})}catch(e){}}),160)})),(0,p.default)((0,d.default)(e),"closeFixedTextarea",(function(){(0,x.t)("吐槽.显示评论框"),e.setState({placeholder:"",replySub:"",message:""})})),(0,p.default)((0,d.default)(e),"onChange",(function(t){e.setState({value:t})})),(0,p.default)((0,d.default)(e),"at",(function(t){(0,x.t)("吐槽.at",{id:t});var s=e.state.value;e.setState({value:s+" @"+t+" "})})),(0,p.default)((0,d.default)(e),"recoveryContent",(function(t){(0,x.t)("吐槽.回复失败"),(0,j.info)("操作失败，可能是cookie失效了"),e.setState({value:""}),setTimeout((function(){e.setState({value:t})}),160)})),(0,p.default)((0,d.default)(e),"doSubmit",(function(t,s,n){if(e.isNew)return e.formhash?void e.doSay(t,n):void(0,j.info)("获取表单授权码失败, 请检查"+O.default.login()+"状态");var r=e.say.list,o=void 0===r?[]:r;o.length||o[0].formhash?e.doReply(t,s):(0,j.info)("获取表单授权码失败")})),(0,p.default)((0,d.default)(e),"doSay",(function(t,s){var r;(0,x.t)("吐槽.新吐槽"),h.timelineStore.doSay({content:t,formhash:e.formhash},(r=(0,a.default)(n.mark((function r(o){var i,l;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i={};try{i=JSON.parse(o)}catch(e){}if(!v.IOS||"ok"===i.status){r.next=5;break}return e.recoveryContent(t),r.abrupt("return");case 5:(l=e.params.onNavigationCallback)&&l(!0),e.setState({value:""}),(0,j.feedback)(),(0,j.info)("吐槽成功"),s.goBack(),setTimeout((0,a.default)(n.mark((function t(){var s,r,o,a,i;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchTimeline();case 2:r=t.sent,null!=(o=null==r||null==(s=r.list)?void 0:s[0])&&o.clearHref&&(0,b.webhookSay)({content:null==o||null==(a=o.reply)?void 0:a.content,url:null==o||null==(i=o.reply)?void 0:i.url},h.userStore.userInfo);case 5:case"end":return t.stop()}}),t)}))),4e3);case 12:case"end":return r.stop()}}),r)}))),function(e){return r.apply(this,arguments)}))})),(0,p.default)((0,d.default)(e),"doReply",(function(t,s){(0,x.t)("吐槽.回复吐槽");var r,o=h.timelineStore.say(e.id).list,i=void 0===o?[]:o;h.timelineStore.doReply({id:String(e.id).split("#")[0],content:t,formhash:i[0].formhash},(r=(0,a.default)(n.mark((function r(o){var a;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a={};try{a=JSON.parse(o)}catch(e){}if(!v.IOS||"ok"===a.status){n.next=5;break}return e.recoveryContent(t),n.abrupt("return");case 5:return e.setState({value:""}),n.next=8,e.fetchSay();case 8:(0,j.feedback)(),setTimeout((function(){e.scrollToBottom(s,!0)}),80);case 10:case"end":return n.stop()}}),r)}))),function(e){return r.apply(this,arguments)}))})),e}return(0,l.default)(s,[{key:"id",get:function(){var e=this.params,t=e.id;return e.sayId||t}},{key:"isNew",get:function(){return!this.id}},{key:"say",get:function(){var e=h.timelineStore.say(this.id);return Object.assign({},e,{list:e.list.slice().reverse()})}},{key:"formhash",get:function(){return h.timelineStore.formhash}},{key:"url",get:function(){var e=this.params.userId;return this.isNew?v.HOST+"/timeline?type=say":v.HOST+"/user/"+e+"/timeline/status/"+this.id}}]),s}(_.default),(0,f.default)(o.prototype,"id",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"id"),o.prototype),(0,f.default)(o.prototype,"isNew",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"isNew"),o.prototype),(0,f.default)(o.prototype,"say",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"say"),o.prototype),(0,f.default)(o.prototype,"formhash",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"formhash"),o.prototype),(0,f.default)(o.prototype,"url",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),o)}}]);