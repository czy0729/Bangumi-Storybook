(self.webpackChunkbangumi_pro=self.webpackChunkbangumi_pro||[]).push([[242],{"./src/screens/home/preview/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,c.jsx)(r.StorybookSPA,{children:(0,c.jsx)(r.StorybookList,{children:(0,c.jsx)(i.default,Object.assign({},(0,r.getStorybookArgs)("Preview")))})})}var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Preview=void 0,n(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=n(s("./src/screens/home/preview/index.tsx")),c=s("./node_modules/react/jsx-runtime.js"),n={title:"screens/Preview",component:i.default};t.default=n;(t.Preview=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Preview')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/rating/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,c.jsx)(r.StorybookSPA,{children:(0,c.jsx)(r.StorybookList,{children:(0,c.jsx)(i.default,Object.assign({},(0,r.getStorybookArgs)("Rating")))})})}var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Rating=void 0,n(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=n(s("./src/screens/home/rating/index.tsx")),c=s("./node_modules/react/jsx-runtime.js"),n={title:"screens/Rating",component:i.default};t.default=n;(t.Rating=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Rating')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/subject/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");function o(){return(0,c.jsx)(r.StorybookSPA,{children:(0,c.jsx)(r.StorybookList,{children:(0,c.jsx)(i.default,Object.assign({},(0,r.getStorybookArgs)("Subject")))})})}var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Subject=void 0,n(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=n(s("./src/screens/home/subject/index.tsx")),c=s("./node_modules/react/jsx-runtime.js"),n={title:"screens/Subject",component:i.default};t.default=n;(t.Subject=o).parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Subject')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/preview/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/preview/header/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var t=t.$,s=(0,r.cnjp)(null==(s=t.params)?void 0:s.cn,null==(s=t.params)?void 0:s.jp);return(0,c.jsx)(n.Header,{title:s?s+"的预览":"预览",alias:"预览",hm:[t.url,"Preview"],headerTitleStyle:i.styles.title})});t.default=s;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/preview/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/preview/header/index.tsx#header"})}catch(e){}},"./src/screens/home/preview/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}});t.styles=s},"./src/screens/home/preview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/preview/header/index.tsx")),a=o(s("./src/screens/home/preview/list/index.tsx")),o=o(s("./src/screens/home/preview/store.ts")),d=s("./node_modules/react/jsx-runtime.js"),s=(0,r.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.default,{}),(0,d.jsx)(n.Page,{loaded:s.state._loaded,children:(0,d.jsx)(a.default,{})})]})})});t.default=s;try{preview.displayName="preview",preview.__docgenInfo={description:"",displayName:"preview",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/preview/index.tsx#preview"]={docgenInfo:preview.__docgenInfo,name:"preview",path:"src/screens/home/preview/index.tsx#preview"})}catch(e){}},"./src/screens/home/preview/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),u=(o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),j=s("./src/screens/home/preview/list/styles.tsx"),f=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var t=t.$,s=(0,j.memoStyles)(),o=(n=t.state).epsThumbs,n=n.epsThumbsHeader,t=t.params,r=void 0===(r=t.data)?[]:r,i=void 0===(t=t.headers)?{}:t,c=o.length?o:r,t=o.length?n:i,a={};return null!=t&&t.Referer&&t.Referer.includes("douban")?(r.length&&r[0].includes("douban")&&(c=(0,d.default)(r)),o.forEach(function(e){c.includes(e)||c.push(e)}),a.autoSize=s.item.width):(a.width=s.item.width,a.height=.56*s.item.width),(0,f.jsx)(l.ScrollView,{contentContainerStyle:m._.container.bottom,scrollToTop:a.fallback=!0,children:c.map(function(e,t){return(0,f.jsx)(u.default,{style:s.item,children:(0,f.jsx)(l.Touchable,{withoutFeedback:!0,onPress:function(){(0,p.showImageViewer)(c.map(function(e){return{url:e.split("@")[0],headers:i}}),t)},children:(0,f.jsx)(l.Image,Object.assign({src:e},a,{shadow:!0,headers:i}))})},e)})})});t.default=s;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/preview/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/preview/list/index.tsx#list"})}catch(e){}},"./src/screens/home/preview/list/styles.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{item:{width:o._.window.width-(2*o._.wind-o._._wind),marginLeft:o._.sm,marginBottom:o._.md}}});t.memoStyles=s},"./src/screens/home/preview/store.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),o=o(s("./src/utils/store/index.ts")),f=s("./src/utils/douban/index.ts"),b=s("./src/constants/index.ts");function h(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}s=o.default,(0,d.default)(y,s),_=h(y),(0,n.default)(y,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"namespace",get:function(){return"ScreenPreview|"+this.subjectId}},{key:"url",get:function(){return b.HOST+"/preview/"+this.subjectId}}]),(0,p.default)((o=y).prototype,"subjectId",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectId"),o.prototype),(0,p.default)(o.prototype,"namespace",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"namespace"),o.prototype),(0,p.default)(o.prototype,"url",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype);var _,d=o;function y(){var n;(0,c.default)(this,y);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n=_.call.apply(_,[this].concat(t)),(0,m.default)((0,a.default)(n),"params",void 0),(0,m.default)((0,a.default)(n),"state",(0,j.observable)({epsThumbs:[],epsThumbsHeader:{},_loaded:!1})),(0,m.default)((0,a.default)(n),"init",(0,i.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getStorage(n.namespace);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:t=e.t0,n.setState(Object.assign({},t,{_loaded:!0})),n.state.epsThumbs.length||n.fetchMovieFromDouban();case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(n),"fetchMovieFromDouban",(0,i.default)(r.mark(function e(){var t,s,o;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.params,s=t.cn,t=t.jp,s=s||t)return e.next=5,(0,f.search)(s);e.next=11;break;case 5:return o=e.sent,o=(0,f.matchMovie)(s,o,t),e.next=9,(0,f.getPreview)(o,void 0,40);case 9:(o=e.sent).data.length&&(n.setState({epsThumbs:o.data.slice().reverse(),epsThumbsHeader:{Referer:o.referer}}),n.setStorage(n.namespace));case 11:case"end":return e.stop()}},e)}))),n}t.default=d},"./src/screens/home/rating/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.STATUS_MAP=t.NAMESPACE=void 0;s=s("./src/constants/index.ts"),t.NAMESPACE="ScreenRating",t.STATUS_MAP={wish:0,collect:1,doing:2,doings:2,onHold:3,on_hold:3,dropped:4},s=s.RATING_STATUS.map(function(e){return{key:e.value,title:e.label}});t.TABS=s},"./src/screens/home/rating/filter/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/rating/filter/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");s=(0,o.ob)(function(e){var t=(e=e.$).state.isFriend;return(0,c.jsxs)(n.default,{children:[(0,c.jsx)(r.SegmentedControl,{style:i.styles.segment,size:11,values:["所有","好友"],selectedIndex:t?1:0,onValueChange:e.onToggleFilter}),(0,c.jsx)(r.Heatmap,{id:"用户评分.切换类型"})]})});t.default=s;try{filter.displayName="filter",filter.__docgenInfo={description:"",displayName:"filter",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenRating"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/filter/index.tsx#filter"]={docgenInfo:filter.__docgenInfo,name:"filter",path:"src/screens/home/rating/filter/index.tsx#filter"})}catch(e){}},"./src/screens/home/rating/filter/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({segment:{width:s._.r(88),height:s._.r(28),marginRight:s._.xs}});t.styles=s},"./src/screens/home/rating/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),c=s("./src/utils/decorators/index.ts"),a=o(s("./src/screens/home/rating/filter/index.tsx")),d=s("./src/screens/home/rating/header/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");o=(0,c.obc)(function(e,t){var s=t.$;return(0,u.jsx)(n.Header,{title:(null==(t=s.params)?void 0:t.name)||"用户评分",headerTitleAlign:"left",headerTitleStyle:d.styles.title,alias:"用户评分",hm:[s.url,"Rating"],headerRight:function(){return(0,u.jsxs)(n.Flex,{children:[(0,u.jsx)(a.default,{$:s}),(0,u.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("用户评分.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,u.jsx)(n.Heatmap,{id:"用户评分.右上角菜单"})})]})}})});t.default=o;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/rating/header/index.tsx#header"})}catch(e){}},"./src/screens/home/rating/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts")._.create({title:{paddingLeft:0,paddingRight:72,marginLeft:-24}});t.styles=s},"./src/screens/home/rating/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/hooks/index.ts"),a=o(s("./src/screens/home/rating/header/index.tsx")),d=o(s("./src/screens/home/rating/tab/index.tsx")),o=o(s("./src/screens/home/rating/store.ts")),u=s("./node_modules/react/jsx-runtime.js"),s=(0,i.ic)(o.default,function(e,t){var s=t.$;return(0,c.useRunAfter)(function(){s.init()}),(0,c.useObserver)(function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.default,{}),(0,u.jsxs)(n.Page,{loaded:s.state._loaded,children:[(0,u.jsx)(d.default,{}),(0,u.jsx)(n.Heatmap,{bottom:r._.bottom,id:"用户评分",screen:"Rating"})]})]})})});t.default=s;try{rating.displayName="rating",rating.__docgenInfo={description:"",displayName:"rating",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/index.tsx#rating"]={docgenInfo:rating.__docgenInfo,name:"rating",path:"src/screens/home/rating/index.tsx#rating"})}catch(e){}},"./src/screens/home/rating/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=s("./src/screens/home/rating/item/styles.ts"),j=s("./node_modules/react/jsx-runtime.js"),f={id:"用户评分.跳转"};s=(0,o.obc)(function(e,t){var s=e.id,o=e.avatar,n=e.name,r=e.time,i=e.star,e=e.comment,t=t.navigation,c=(0,p.memoStyles)();return(0,j.jsxs)(a.default,{style:c.container,children:[(0,j.jsxs)(d.Flex,{children:[(0,j.jsx)(d.UserStatus,{userId:s,children:(0,j.jsx)(u.Avatar,{navigation:t,size:36,event:f,userId:s,src:o,radius:!0})}),(0,j.jsxs)(d.Flex.Item,{style:l._.ml.sm,children:[(0,j.jsxs)(d.Text,{size:12,bold:!0,children:[n,(0,j.jsxs)(d.Text,{size:10,lineHeight:12,type:"sub",children:["  ",(0,m.simpleTime)(r).split(" ")[0]]})]}),!!i&&(0,j.jsx)(u.Stars,{style:l._.mt.xxs,value:i,size:11})]})]}),!!e&&(0,j.jsx)(d.Flex,{style:l._.mt.xs,children:(0,j.jsx)(d.Text,{style:c.comment,size:l._.device(13,14),lineHeight:15,children:e})})]})});t.default=s},"./src/screens/home/rating/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{width:o._.portrait("50%","33%"),paddingVertical:o._.sm+2},comment:{paddingVertical:o._.xs,paddingHorizontal:o._.sm,marginTop:o._.sm,marginRight:o._.sm,backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderRadius:o._.radiusXs,overflow:"hidden"}}});t.memoStyles=s},"./src/screens/home/rating/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),r=o(s("./src/screens/home/rating/item/index.tsx")),l=s("./src/screens/home/rating/ds.ts"),m=s("./src/screens/home/rating/list/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");o=(0,n.obc)(function(e,t){var s,o,n,r,e=e.title,i=t.$,t=u.MODEL_RATING_STATUS.getValue(e);return(t=i.rating(t))._loaded?(s=(0,m.memoStyles)(),o=(n=i.state).isFriend,n=n.page,r=a._.portrait(2,3),(0,p.jsx)(c.ListView,{style:a._.container.flex,contentContainerStyle:s.contentContainerStyle,keyExtractor:d.keyExtractor,data:t,numColumns:r,scrollToTop:l.TABS[n].title===e,renderItem:j,onEndReachedThreshold:.2,onHeaderRefresh:function(){return i.fetchRating(!0)},onFooterRefresh:i.fetchRating},(o?"1":"0")+r)):(0,p.jsx)(c.Loading,{})});function j(e){var t=e.item,e=e.index;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.default,Object.assign({},t)),!e&&(0,p.jsx)(c.Heatmap,{id:"用户评分.跳转"})]})}t.default=o},"./src/screens/home/rating/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/constants/index.ts"),s=o._.memoStyles(function(){var e=o._.window.height-(n.STORYBOOK?o._.headerHeight:0);return{contentContainerStyle:{paddingHorizontal:o._.wind,paddingTop:o._.md,paddingBottom:o._.bottom,minHeight:e,maxHeight:e}}});t.memoStyles=s},"./src/screens/home/rating/store.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),f=s("./src/stores/index.ts"),o=o(s("./src/utils/store/index.ts")),b=s("./src/utils/fetch/index.ts"),h=s("./src/constants/index.ts"),_=s("./src/screens/home/rating/ds.ts");function y(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}s=o.default,(0,d.default)(x,s),g=y(x),(0,r.default)(x,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"rating",value:function(s){var o=this;return(0,j.computed)(function(){var e=o.state.isFriend,t=f.systemStore.setting.filterDefault,e=f.subjectStore.rating(o.subjectId,s,e);return t?Object.assign({},e,{list:e.list.filter(function(e){return!(e.avatar.includes(h.URL_DEFAULT_AVATAR)&&!e.comment)})}):e}).get()}},{key:"counts",get:function(){var e,t;return this._counts||(e=this.state.page,e=_.TABS[e].key,t=(e=this.rating(e)).counts,e._loaded&&(this._counts=t),t)}},{key:"url",get:function(){var e=this.state,t=e.page,e=e.isFriend,t=_.TABS[t].key;return(0,h.HTML_SUBJECT_RATING)(this.subjectId,t,e)}}]),(0,p.default)((o=x).prototype,"subjectId",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectId"),o.prototype),(0,p.default)(o.prototype,"counts",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"counts"),o.prototype),(0,p.default)(o.prototype,"url",[j.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype);var g,d=o;function x(){var r;(0,c.default)(this,x);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r=g.call.apply(g,[this].concat(t)),(0,m.default)((0,a.default)(r),"params",void 0),(0,m.default)((0,a.default)(r),"state",(0,j.observable)({page:2,isFriend:!1,_loaded:!1,_fetching:!1})),(0,m.default)((0,a.default)(r),"init",(0,n.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(_.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(s=e.t0,(t=r.params.status)&&(s.page=_.STATUS_MAP[t]||2),r.setState(Object.assign({},s,{_loaded:!0,_fetching:!1})),t=r.state.page,s=r.rating(_.TABS[t].key),s._loaded){e.next=13;break}return e.abrupt("return",r.fetchRating(!0));case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(r),"_counts",null),(0,m.default)((0,a.default)(r),"fetchRating",(0,n.default)(i.mark(function e(){var t,s,o,n=arguments;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<n.length&&void 0!==n[0]&&n[0],r.state._fetching)return e.abrupt("return",!0);e.next=4;break;case 4:return s=r.state,o=s.page,s=s.isFriend,o=_.TABS[o].key,r.setState({_fetching:!0}),e.next=9,f.subjectStore.fetchRating({subjectId:r.subjectId,status:o,isFriend:s},t);case 9:return r.setState({_fetching:!1}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(r),"onChange",function(e){(0,b.t)("用户评分.标签页切换",{page:e}),r.setState({page:e}),r.setStorage(_.NAMESPACE);e=_.TABS[e].key;r.rating(e)._loaded||r.fetchRating(!0)}),(0,m.default)((0,a.default)(r),"onToggleFilter",function(e){var t=r.state,s=t.page,t=t.isFriend;if(e){if("所有"===e&&!t)return;if("好友"===e&&t)return}(0,b.t)("用户评分.切换类型",{isFriend:!t}),r.setState({isFriend:!t}),r.setStorage(_.NAMESPACE);e=_.TABS[s].key;r.rating(e)._loaded||r.fetchRating(!0)}),r}t.default=d},"./src/screens/home/rating/tab/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/defineProperty.js"))),i=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var s,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/react/index.js")),a=s("./node_modules/react-native-tab-view/lib/module/index.js"),d=s("./src/components/index.ts"),u=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),l=o(s("./src/screens/home/rating/list/index.tsx")),m=s("./src/screens/home/rating/ds.ts"),p=s("./src/screens/home/rating/tab/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");function f(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(f=function(e){return e?s:t})(e))}var b={wishes:"wish",collections:"collect",doings:"doing",on_hold:"onHold",dropped:"dropped"};o=(0,n.obc)(function(e,t){var n=t.$,s=(0,p.memoStyles)(),t=n.state.page,o=(0,a.SceneMap)(Object.assign.apply(Object,[{}].concat((0,i.default)(m.TABS.map(function(e){return(0,r.default)({},e.key,function(){return(0,j.jsx)(l.default,{title:e.title})})})))));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.TabView,{style:u._.mt._sm,lazyPreloadDistance:0,navigationState:{index:t,routes:m.TABS},renderTabBar:function(e){return(0,c.createElement)(d.TabBar,Object.assign({},e,{key:Object.keys(n.counts)?"1":"0",style:s.tabBar,tabStyle:s.tab,labelStyle:s.label,indicatorStyle:s.indicator,pressOpacity:1,pressColor:"transparent",renderLabel:function(e){var t=e.route,e=e.focused,s=n.counts[t.key]||n.params[b[t.key]],o=n.params.type,t=t.title||"";return"书籍"===o?t=t.replace("看","读"):"游戏"===o?t=t.replace("看","玩"):"音乐"===o&&(t=t.replace("看","听")),(0,j.jsxs)(d.Flex,{style:u._.container.block,justify:"center",children:[(0,j.jsx)(d.Text,{type:"title",size:13,bold:e,noWrap:!0,children:t}),!!s&&(0,j.jsxs)(d.Text,{type:"sub",size:11,bold:!0,lineHeight:13,noWrap:!0,children:[" ",s," "]})]})}}))},renderScene:o,onIndexChange:n.onChange},u._.orientation),(0,j.jsx)(d.Heatmap,{right:u._.wind+62,bottom:u._.window.height-u._.tabsHeaderHeight-12,id:"用户评分.标签页切换",transparent:!0})]})});t.default=o;try{tab.displayName="tab",tab.__docgenInfo={description:"",displayName:"tab",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/tab/index.tsx#tab"]={docgenInfo:tab.__docgenInfo,name:"tab",path:"src/screens/home/rating/tab/index.tsx#tab"})}catch(e){}},"./src/screens/home/rating/tab/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/screens/home/rating/ds.ts"),s=o._.memoStyles(function(){var e=o._.window.width/n.TABS.length;return{tabBar:{backgroundColor:o._.ios("transparent",o._.select("transparent",o._.deepDark?o._._colorPlain:o._._colorDarkModeLevel1)),borderBottomWidth:o._.select(o._.ios(0,o._.hairlineWidth),o._.deepDark?0:o._.hairlineWidth),borderBottomColor:o._.colorBorder,elevation:0},tab:{width:e,height:48},label:{padding:0},indicator:{width:16,height:4,marginLeft:(e-16)/2,backgroundColor:o._.colorMain,borderRadius:4}}});t.memoStyles=s},"./src/screens/home/subject/anitabi/anitabi.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),l=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),m=s("./src/components/index.ts"),p=s("./src/screens/_/index.ts"),j=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),b=s("./src/utils/fetch/index.ts"),h=s("./src/utils/hooks/index.ts"),_=s("./src/constants/index.ts"),y=o(s("./src/screens/home/subject/icon/hidden.tsx")),g=s("./src/screens/home/subject/anitabi/ds.ts"),x=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var s=e.styles,t=e.showAnitabi,o=e.subjectId,n=e.data,r=e.onSwitchBlock,e=n.city,i=n.pointsLength,c=n.imagesLength,n=n.litePoints,n=(0,h.useHorizontalLazy)(n,Math.floor(j._.window.contentWidth/g.THUMB_WIDTH)+1),a=n.list,n=n.onScroll,d=a.filter(function(e){return e.image}).map(function(e){return{url:e.image.replace("h160","h360")}});return(0,x.jsxs)(p.InView,{style:(0,f.stl)(s.container,!t&&j._.short),children:[(0,x.jsx)(p.SectionTitle,{style:j._.container.wind,right:!1===t?(0,x.jsx)(y.default,{name:"取景地标",value:"showAnitabi"}):-1!==t&&(0,x.jsxs)(m.Touchable,{style:s.touch,onPress:function(){(0,b.t)("条目.跳转",{to:"anitabi.cn",from:"取景地标",subjectId:o}),(0,f.open)("https://anitabi.cn/map?bangumiId="+o)},children:[(0,x.jsxs)(m.Flex,{children:[(0,x.jsx)(m.Text,{type:"sub",children:"动画巡礼地图"}),(0,x.jsx)(m.Iconfont,{style:j._.ml.xs,name:"md-open-in-new",size:17})]}),(0,x.jsx)(m.Heatmap,{id:"条目.跳转",from:"取景地标"})]}),icon:!t&&"md-navigate-next",onPress:function(){return r("showAnitabi")},children:"取景地标"}),t&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(m.Flex,{style:j._.container.windMtMd,children:[(0,x.jsx)(m.Text,{size:11,children:"主要取景城市: "}),(0,x.jsxs)(m.Text,{size:11,bold:!0,children:[e," "]}),(0,x.jsxs)(m.Text,{size:11,type:"sub",children:[" ","(",i," 个地标 、",c," 张截图)"]})]}),(0,x.jsx)(u.default,Object.assign({style:j._.mt.md,contentContainerStyle:j._.container.wind,horizontal:!0},_.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:80,onScroll:n,children:a.map(function(e,t){return(0,x.jsxs)(l.default,{style:j._.mr.sm,children:[e.image?(0,x.jsx)(m.Image,{style:s.image,src:e.image,size:g.THUMB_WIDTH,height:g.THUMB_HEIGHT,radius:!0,onPress:function(){(0,f.showImageViewer)(d,Math.min(t,d.length-1))}}):(0,x.jsxs)(m.Flex,{style:s.void,direction:"column",justify:"center",children:[(0,x.jsx)(m.Text,{type:"sub",size:16,bold:!0,children:t+1}),(0,x.jsx)(m.Text,{style:j._.mt.xs,type:"sub",size:11,bold:!0,children:"尚无截图"})]}),(0,x.jsx)(m.Text,{style:s.title,size:11,bold:!0,numberOfLines:2,children:e.cn||e.name}),e.ep||e.s?(0,x.jsxs)(m.Text,{style:s.sub,type:"sub",size:11,bold:!0,numberOfLines:1,children:[e.ep?"EP"+e.ep+" ":"",e.s?(0,f.date)("i:s",e.s):""]}):(0,x.jsxs)(m.Text,{style:s.sub,type:"sub",size:11,bold:!0,numberOfLines:1,children:["坐标 ",e.geo.join("，")]})]},e.id)})})),(0,x.jsx)(p.PreventTouchPlaceholder,{})]})]})},g.DEFAULT_PROPS);t.default=o;try{anitabi.displayName="anitabi",anitabi.__docgenInfo={description:"",displayName:"anitabi",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { minHeight: number; marginTop: number; }; image: { height: number; overflow: "hidden"; }; void: { height: number; backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; borderRadius: number; overflow: "hidden"; }; title: { ...; }; sub: { ...; }; touch: { ...; }; }'}},showAnitabi:{defaultValue:null,description:"",name:"showAnitabi",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AnitabiData"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/anitabi/anitabi.tsx#anitabi"]={docgenInfo:anitabi.__docgenInfo,name:"anitabi",path:"src/screens/home/subject/anitabi/anitabi.tsx#anitabi"})}catch(e){}},"./src/screens/home/subject/anitabi/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=t.DEFAULT_PROPS=void 0;s=s("./src/stores/index.ts"),t.DEFAULT_PROPS={styles:{},showAnitabi:!0,subjectId:0,data:{},onSwitchBlock:function(){}},s=s._.r(160),s=.56*(t.THUMB_WIDTH=s);t.THUMB_HEIGHT=s},"./src/screens/home/subject/anitabi/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/anitabi/anitabi.tsx")),c=s("./src/screens/home/subject/anitabi/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var t=t.$,s=n.systemStore.setting.showAnitabi,o=t.state.anitabi;return-1!==s&&o.pointsLength?(0,a.jsx)(i.default,{styles:(0,c.memoStyles)(),showAnitabi:s,subjectId:t.subjectId,data:o,onSwitchBlock:t.onSwitchBlock}):null});t.default=o;try{anitabi.displayName="anitabi",anitabi.__docgenInfo={description:"",displayName:"anitabi",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/anitabi/index.tsx#anitabi"]={docgenInfo:anitabi.__docgenInfo,name:"anitabi",path:"src/screens/home/subject/anitabi/index.tsx#anitabi"})}catch(e){}},"./src/screens/home/subject/anitabi/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/screens/home/subject/anitabi/ds.ts"),s=o._.memoStyles(function(){return{container:{minHeight:200,marginTop:o._.lg},image:{height:n.THUMB_HEIGHT,overflow:"hidden"},void:{height:n.THUMB_HEIGHT,backgroundColor:o._.colorBg,borderRadius:o._.radiusSm,overflow:"hidden"},title:{width:n.THUMB_WIDTH,paddingTop:o._.sm},sub:{width:n.THUMB_WIDTH,paddingTop:o._.xs},touch:{paddingLeft:o._.xs,marginRight:-o._.sm,borderRadius:o._.radiusSm,overflow:"hidden"}}});t.memoStyles=s},"./src/screens/home/subject/bg/bg.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/bg/ds.ts"),c=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.style,e=e.src;return(0,c.jsx)(n.BlurView,{style:t,tint:r._.select("default","dark"),src:e,blurRadius:32})},i.DEFAULT_PROPS);t.default=s;try{bg.displayName="bg",bg.__docgenInfo={description:"",displayName:"bg",props:{style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:'{ position: "absolute"; top: number; right: number; left: number; height: number; backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; } | { height: number; backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; }'}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/bg/bg.tsx#bg"]={docgenInfo:bg.__docgenInfo,name:"bg",path:"src/screens/home/subject/bg/bg.tsx#bg"})}catch(e){}},"./src/screens/home/subject/bg/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={style:{},src:""}},"./src/screens/home/subject/bg/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),a=o(s("./src/screens/home/subject/bg/bg.tsx")),d=s("./src/screens/home/subject/bg/styles.ts"),u=s("./node_modules/react/jsx-runtime.js"),o=(0,i.obc)(function(e,t){var s,o,t=t.$;return c.TEXT_ONLY?null:(s=(0,d.memoStyles)(),o=t.subject.images,"string"!=typeof(o=t.coverPlaceholder||(null==o?void 0:o.common)||t.cover)?(0,u.jsx)(n.default,{style:s.bg}):(0,u.jsx)(a.default,{style:s.bg,src:(0,r.getCover400)(o)}))});t.default=o;try{bg.displayName="bg",bg.__docgenInfo={description:"",displayName:"bg",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/bg/index.tsx#bg"]={docgenInfo:bg.__docgenInfo,name:"bg",path:"src/screens/home/subject/bg/index.tsx#bg"})}catch(e){}},"./src/screens/home/subject/bg/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{bg:o._.ios({position:"absolute",top:0,right:0,left:0,height:o._.window.height/2,backgroundColor:o._.colorBg},{height:160,backgroundColor:o._.colorBg})}});t.memoStyles=s},"./src/screens/home/subject/blog/blog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.small.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),m=o(s("./src/screens/home/subject/icon/blog.tsx")),p=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/blog/ds.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.showBlog,n=e.subjectId,r=e.blog,i=e.onSwitchBlock,e=(0,l.useExpandLazy)(r),r=e.list,e=e.onExpand;return(0,j.jsxs)(a.InView,{style:(0,u.stl)(s.container,!o&&d._.short),children:[(0,j.jsx)(a.SectionTitle,{style:s.sectionTitle,right:o?(0,j.jsx)(m.default,{}):(0,j.jsx)(p.default,{name:"日志",value:"showBlog"}),icon:!o&&"md-navigate-next",onPress:function(){return i("showBlog")},children:"日志"}),o&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Expand,{style:d._.mt.sm,onExpand:e,children:r.map(function(e){return(0,j.jsx)(a.ItemArticle,{style:s.item,navigation:t,avatar:e.user.avatar.small,title:e.title,summary:e.summary.replace(/\r\n/g,"").trim(),nickname:e.user.nickname,userId:e.user.username,timestamp:e.timestamp,replies:e.replies,url:e.url,event:{id:"条目.跳转",data:{from:"评论",subjectId:n}}},e.id)})}),(0,j.jsx)(c.Heatmap,{id:"条目.跳转",from:"评论"})]})]})},o.DEFAULT_PROPS);t.default=s;try{blog.displayName="blog",blog.__docgenInfo={description:"",displayName:"blog",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; sectionTitle: { paddingHorizontal: number; }; item: { paddingLeft: number; }; }"}},showBlog:{defaultValue:null,description:"",name:"showBlog",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},blog:{defaultValue:null,description:"",name:"blog",required:!0,type:{name:"Blog[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/blog/blog.tsx#blog"]={docgenInfo:blog.__docgenInfo,name:"blog",path:"src/screens/home/subject/blog/blog.tsx#blog"})}catch(e){}},"./src/screens/home/subject/blog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},styles:{},showBlog:!0,subjectId:0,blog:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/blog/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.small.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),c=o(s("./src/screens/home/subject/blog/blog.tsx")),a=s("./src/screens/home/subject/blog/styles.ts"),d=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s,o=t.$,t=t.navigation,n=r.systemStore.setting.showBlog;return-1!==n&&(s=o.subject.blog||[],(s=o.filterDefault||o.isLimit?s.filter(function(e){return null==e||null==(e=e.user)||null==(e=e.avatar)||!e.small.includes(i.URL_DEFAULT_AVATAR)}):s).length)?(0,d.jsx)(c.default,{navigation:t,styles:(0,a.memoStyles)(),showBlog:n,subjectId:o.subjectId,blog:s,onSwitchBlock:o.onSwitchBlock}):null});t.default=o;try{blog.displayName="blog",blog.__docgenInfo={description:"",displayName:"blog",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/blog/index.tsx#blog"]={docgenInfo:blog.__docgenInfo,name:"blog",path:"src/screens/home/subject/blog/index.tsx#blog"})}catch(e){}},"./src/screens/home/subject/blog/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:120,marginTop:o._.lg},sectionTitle:{paddingHorizontal:o._.wind},item:{paddingLeft:o._.wind}}});t.memoStyles=s},"./src/screens/home/subject/book-ep/book-ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.parse-int.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),m=o(s("./node_modules/@ant-design/react-native/lib/progress/index.js")),p=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),b=o(s("./src/screens/home/subject/icon/search.tsx")),h=o(s("./src/screens/home/subject/icon/manga.tsx")),_=o(s("./src/screens/home/subject/icon/wenku.tsx")),y=o(s("./src/screens/home/subject/icon/hd.tsx")),o=s("./src/screens/home/subject/book-ep/ds.ts"),g=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.chap,o=e.vol,n=e.book,r=e.comicLength,i=e.status,c=e.onChangeText,a=e.onScrollIntoViewIfNeeded,d=e.doUpdateBookEp,u=e.doUpdateNext,e=n.totalVol,r=("??"===e&&r&&(e="?"+r),!!i.name&&"未收藏"!==i.name);return(0,g.jsxs)(l.default,{style:t.container,children:[(0,g.jsx)(j.SectionTitle,{right:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(b.default,{}),(0,g.jsx)(h.default,{}),(0,g.jsx)(_.default,{}),(0,g.jsx)(y.default,{})]}),children:"章节"}),(0,g.jsxs)(p.Flex,{style:f._.mt.md,align:"start",children:[(0,g.jsxs)(p.Flex.Item,{children:[(0,g.jsxs)(p.Flex,{children:[(0,g.jsx)(p.Text,{style:t.label,align:"right",children:"Chap."}),(0,g.jsxs)(l.default,{style:t.input,children:[(0,g.jsx)(p.Input,{style:t.inputRaw,keyboardType:"numeric",value:s,placeholder:String(n.chap)||"0",clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:r?function(e){e=e.replace(/[^\d]+/,"");c("chap",e)}:void 0,onSubmitEditing:r?d:void 0,onScrollIntoViewIfNeeded:a}),!!n.totalChap&&(0,g.jsxs)(p.Text,{style:t.total,type:"sub",children:["/ ",n.totalChap]})]}),r&&(0,g.jsx)(p.Button,{style:t.btnPlus,styleText:t.btnText,type:"ghostPrimary",onPress:function(){return u("chap")},children:"+"})]}),!!n.totalChap&&(0,g.jsx)(p.Flex,{style:t.progressWrap,children:(0,g.jsx)(m.default,{style:t.progress,barStyle:t.bar,percent:parseInt(s)/parseInt(n.totalChap)*100})}),(0,g.jsxs)(p.Flex,{style:f._.mt.sm,children:[(0,g.jsx)(p.Text,{style:t.label,align:"right",children:"Vol."}),(0,g.jsxs)(l.default,{style:t.input,children:[(0,g.jsx)(p.Input,{style:t.inputRaw,keyboardType:"numeric",value:o,placeholder:String(n.vol)||"0",clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:r?function(e){e=e.replace(/[^\d]+/,"");c("vol",e)}:void 0,onSubmitEditing:r?d:void 0,onScrollIntoViewIfNeeded:a}),!!e&&(0,g.jsxs)(p.Text,{style:t.total,type:"sub",children:["/ ",e]})]}),r&&(0,g.jsx)(p.Button,{style:t.btnPlus,styleText:t.btnText,type:"ghostPrimary",onPress:function(){return u("vol")},children:"+"}),(0,g.jsx)(p.Heatmap,{id:"条目.更新书籍下一个章节"})]}),!!n.totalVol&&(0,g.jsx)(p.Flex,{style:t.progressWrap,children:(0,g.jsx)(m.default,{style:t.progress,barStyle:t.bar,percent:parseInt(o)/parseInt(n.totalVol)*100})})]}),r?(0,g.jsxs)(l.default,{style:f._.ml.md,children:[(0,g.jsx)(p.Button,{style:t.btn,type:"ghostPrimary",onPress:d,children:"更新"}),(0,g.jsx)(p.Heatmap,{id:"条目.更新书籍章节"})]}):(0,g.jsx)(p.Text,{style:f._.mt.sm,type:"sub",size:13,bold:!0,children:"收藏后才能进行管理"})]})]})},o.DEFAULT_PROPS);t.default=s;try{bookep.displayName="bookep",bookep.__docgenInfo={description:"",displayName:"bookep",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { height: number; paddingHorizontal: number; marginTop: number; }; label: { width: number; }; input: { marginLeft: number; width: number; height: number; }; inputRaw: { marginRight: number; ... 8 more ...; fontWeight: "800"; } | { ...; }; ... 6 more ...; bar: { ...; }; }'}},chap:{defaultValue:null,description:"",name:"chap",required:!0,type:{name:"string"}},vol:{defaultValue:null,description:"",name:"vol",required:!0,type:{name:"string"}},book:{defaultValue:null,description:"",name:"book",required:!0,type:{name:"DeepPartial<{ chap: number; vol: number; totalChap: string; totalVol: string; }>"}},comicLength:{defaultValue:null,description:"",name:"comicLength",required:!0,type:{name:"number"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:'DeepPartial<{ type: "" | "dropped" | "wish" | "collect" | "do" | "on_hold"; name: "看过" | "想看" | "抛弃" | "在看" | "搁置" | "未收藏"; id: "2" | "1" | "4" | "3" | "5"; }>'}},onChangeText:{defaultValue:null,description:"",name:"onChangeText",required:!0,type:{name:"(name: string, text: string) => void"}},onScrollIntoViewIfNeeded:{defaultValue:null,description:"",name:"onScrollIntoViewIfNeeded",required:!0,type:{name:"(y: number) => any"}},doUpdateBookEp:{defaultValue:null,description:"",name:"doUpdateBookEp",required:!0,type:{name:"() => Promise<void>"}},doUpdateNext:{defaultValue:null,description:"",name:"doUpdateNext",required:!0,type:{name:"(name: string | number) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/book-ep/book-ep.tsx#bookep"]={docgenInfo:bookep.__docgenInfo,name:"bookep",path:"src/screens/home/subject/book-ep/book-ep.tsx#bookep"})}catch(e){}},"./src/screens/home/subject/book-ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0,t.DEFAULT_PROPS={styles:{},chap:"",vol:"",book:{},comicLength:0,status:{name:"未收藏"},onChangeText:function(){},onScrollIntoViewIfNeeded:function(){},doUpdateBookEp:function(){},doUpdateNext:function(){}}},"./src/screens/home/subject/book-ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/subject/book-ep/book-ep.tsx")),i=s("./src/screens/home/subject/book-ep/styles.ts"),c=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){e=e.onScrollIntoViewIfNeeded,t=t.$;return(0,c.jsx)(r.default,{styles:(0,i.memoStyles)(),chap:t.state.chap,vol:t.state.vol,book:t.subjectFormHTML.book,comicLength:t.comic.length,status:t.collection.status,onChangeText:t.changeText,onScrollIntoViewIfNeeded:e,doUpdateBookEp:t.doUpdateBookEp,doUpdateNext:t.doUpdateNext})});t.default=o},"./src/screens/home/subject/book-ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=o._.r(48),r=o._.r(120),s=o._.memoStyles(function(){return{container:{height:o._.r(120),paddingHorizontal:o._.wind,marginTop:o._.lg},label:{width:n},input:{marginLeft:o._.sm,width:r,height:o._.device(34,48)},inputRaw:Object.assign({height:o._.r(34),paddingVertical:0,paddingHorizontal:o._.sm+2,color:o._.colorSub,fontWeight:"800"},o._.device(o._.fontSize13,o._.fontSize15)),total:{position:"absolute",zIndex:100,top:o._.device(8,10),right:o._.r(12)},btn:{width:o._.r(56),height:o._.device(32,48)},btnPlus:{marginLeft:o._.sm,width:o._.r(40),height:o._.device(34,48)},btnText:o._.device(o._.fontSize13,o._.fontSize18),progressWrap:{width:r,marginLeft:n+o._.sm,marginBottom:4},progress:{backgroundColor:"transparent",borderRadius:4},bar:{backgroundColor:"transparent",borderBottomColor:o._.colorPrimary,borderBottomWidth:4,borderRadius:4}}});t.memoStyles=s},"./src/screens/home/subject/box/box.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),j=o(s("./src/screens/home/subject/icon/folder.tsx")),f=o(s("./src/screens/home/subject/icon/close.tsx")),b=o(s("./src/screens/home/subject/box/flip-btn/index.tsx")),o=s("./src/screens/home/subject/box/ds.ts"),h=s("./src/constants/index.ts"),_=s("./src/utils/index.ts"),y=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.navigation,o=e.isLogin,n=e.status,r=e.url,i=e.showCount,c=e.showManageModel,a=e.toRating,e=e.outdate,o=o?c:function(){h.SHARE_MODE?(0,_.appNavigate)(r):s.push("LoginV2")},d=6<=(null==(c=n[n.length-1])?void 0:c.text.length)?11:12;return(0,y.jsxs)(u.default,{style:t.container,children:[(0,y.jsx)(m.SectionTitle,{style:t.sectionTitle,right:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(j.default,{}),(0,y.jsx)(f.default,{})]}),children:"收藏"}),(0,y.jsxs)(l.Touchable,{style:t.btn,animate:!0,onPress:o,children:[(0,y.jsx)(b.default,{}),(0,y.jsx)(l.Heatmap,{id:"条目.管理收藏"}),(0,y.jsx)(l.Heatmap,{right:56,transparent:!0,id:"条目.显示收藏管理"})]}),(0,y.jsxs)(u.default,{style:t.bottom,children:[i&&!!n.length&&(0,y.jsxs)(u.default,{style:p._.mt.md,children:[(0,y.jsx)(l.Text,{size:d,type:"sub",children:n.map(function(e,t){return(0,y.jsx)(l.Text,{size:d,type:"sub",onPress:function(){return a(s,"收藏",e.status)},children:(t?" / ":"")+e.text},e.status)})}),(0,y.jsx)(l.Heatmap,{id:"条目.跳转",from:"收藏"})]}),e&&(0,y.jsx)(l.Text,{style:p._.mt.md,size:d,type:"sub",bold:!0,children:"检测到授权信息过期，请重新登录再进行收藏管理"})]})]})},o.DEFAULT_PROPS);t.default=s;try{box.displayName="box",box.__docgenInfo={description:"",displayName:"box",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { paddingTop: number; paddingHorizontal: number; }; sectionTitle: { height: number; }; btn: { marginTop: number; }; bottom: { marginTop: number; }; hide: { position: "absolute"; zIndex: number; top: number; right: number; }; }'}},isLogin:{defaultValue:null,description:"",name:"isLogin",required:!0,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:'{ status: "" | "dropped" | "on_hold" | "wishes" | "collections" | "doings"; text: string; }[]'}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"`https://bgm.tv/subject/${string}` | `https://bgm.tv/subject/${number}`"}},showCount:{defaultValue:null,description:"",name:"showCount",required:!0,type:{name:"LayoutValue"}},showManageModel:{defaultValue:null,description:"",name:"showManageModel",required:!0,type:{name:"() => void"}},toRating:{defaultValue:null,description:"",name:"toRating",required:!0,type:{name:'(navigation: Navigation, from?: string, status?: "" | "dropped" | "on_hold" | "wishes" | "collections" | "doings") => void'}},outdate:{defaultValue:null,description:"",name:"outdate",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/box/box.tsx#box"]={docgenInfo:box.__docgenInfo,name:"box",path:"src/screens/home/subject/box/box.tsx#box"})}catch(e){}},"./src/screens/home/subject/box/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.RATE=t.DEFAULT_PROPS=void 0;t.RATE=[1,2,3,4,5];t.DEFAULT_PROPS={navigation:{},styles:{},isLogin:!1,status:[],url:"",showCount:!0,showManageModel:function(){},toRating:function(){},outdate:!1}},"./src/screens/home/subject/box/flip-btn/btns.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/box/ds.ts"),u=s("./src/screens/home/subject/box/flip-btn/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");s=(0,o.ob)(function(e){var t=e.btnText,s=e.rating,o=e.privacy,e=e.last,n=[],r=[];return s&&(n.push(u.styles.left),r.push(u.styles.right)),(0,l.jsxs)(i.Flex,{justify:"center",children:[(0,l.jsx)(i.Flex.Item,{children:(0,l.jsxs)(i.Button,{style:n,type:(0,a.getType)(t),extra:(0,l.jsx)(l.Fragment,{children:1==o&&(0,l.jsx)(i.Iconfont,{style:c._.ml.sm,name:"md-visibility-off",color:c._.__colorPlain__,size:17})}),children:[t,!!e&&" · "+e]})}),!!s&&(0,l.jsx)(i.Flex.Item,{children:(0,l.jsxs)(i.Button,{style:r,type:(0,a.getType)(t),children:[(0,a.getRating)(s)," ",d.RATE.map(function(e){var t=e<=s/2?"ios-star":e-.5<=s/2?"ios-star-half":"ios-star-outline";return(0,l.jsx)(i.Iconfont,{name:t,size:16,color:c._.__colorPlain__},e)})]})})]})});t.default=s;try{btns.displayName="btns",btns.__docgenInfo={description:"",displayName:"btns",props:{btnText:{defaultValue:null,description:"",name:"btnText",required:!0,type:{name:"any"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"any"}},privacy:{defaultValue:null,description:"",name:"privacy",required:!0,type:{name:"any"}},last:{defaultValue:null,description:"",name:"last",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/box/flip-btn/btns.tsx#btns"]={docgenInfo:btns.__docgenInfo,name:"btns",path:"src/screens/home/subject/box/flip-btn/btns.tsx#btns"})}catch(e){}},"./src/screens/home/subject/box/flip-btn/flip-btn.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),_=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),y=n(s("./node_modules/react/index.js")),g=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),x=n(s("./node_modules/react-native-reanimated/lib/index.js")),S=s("./src/stores/index.ts"),v=s("./src/utils/index.ts"),T=s("./src/utils/hooks/index.ts"),O=o(s("./src/screens/home/subject/box/flip-btn/btns.tsx")),I=s("./src/screens/home/subject/box/flip-btn/styles.ts"),R=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o,n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((o=r?Object.getOwnPropertyDescriptor(e,s):null)&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]);return n.default=e,t&&t.set(e,n),n}var w={duration:480,easing:x.Easing.inOut(x.Easing.ease)};function r(e){var t=e.animate,s=e.btnText,o=e.rating,n=e.privacy,r=e.last,i=e.onAnimated,c=S._.device(44,50),a=(0,x.useSharedValue)(0),d=(0,x.useAnimatedStyle)((u._closure={withTiming:x.withTiming,activeRef:a,config:w,perspective:2400,height:c},u.asString="function _f(){const{withTiming,activeRef,config,perspective,height}=jsThis._closure;{return{opacity:withTiming(activeRef.value?0:1,config),transform:[{perspective:perspective},{rotateX:withTiming(activeRef.value?'90deg':'0deg',config)},{translateY:withTiming(-activeRef.value*height,config)}]};}}",u.__workletHash=0xc0a87a000d6,u.__location="/Users/chen/Bangumi32/src/screens/home/subject/box/flip-btn/flip-btn.tsx (32:39)",u.__optimalization=2,u));function u(){return{opacity:(0,x.withTiming)(a.value?0:1,w),transform:[{perspective:2400},{rotateX:(0,x.withTiming)(a.value?"90deg":"0deg",w)},{translateY:(0,x.withTiming)(-a.value*c,w)}]}}var l=(0,x.useAnimatedStyle)((m._closure={withTiming:x.withTiming,activeRef:a,config:w,perspective:2400,height:c},m.asString="function _f(){const{withTiming,activeRef,config,perspective,height}=jsThis._closure;{return{opacity:withTiming(activeRef.value?1:0,config),transform:[{perspective:perspective},{rotateX:withTiming(activeRef.value?'0deg':'90deg',config)},{translateY:withTiming(-activeRef.value*height,config)}]};}}",m.__workletHash=0xa19373afff6,m.__location="/Users/chen/Bangumi32/src/screens/home/subject/box/flip-btn/flip-btn.tsx (42:38)",m.__optimalization=2,m));function m(){return{opacity:(0,x.withTiming)(a.value?1:0,w),transform:[{perspective:2400},{rotateX:(0,x.withTiming)(a.value?"0deg":"90deg",w)},{translateY:(0,x.withTiming)(-a.value*c,w)}]}}var e=(0,y.useState)({btnText:s,rating:o,privacy:n,last:r}),e=(0,_.default)(e,2),p=e[0],j=e[1],e=(0,y.useState)({btnText:s,rating:o,privacy:n,last:r}),e=(0,_.default)(e,2),f=e[0],b=e[1],h=((0,y.useEffect)(function(){t||j({btnText:s,rating:o,privacy:n,last:r})},[t,s,r,n,o]),(0,y.useRef)(!1));return(0,y.useEffect)(function(){var e;!t||h.current||a.value||(0,v.urlStringify)(e={btnText:s,rating:o,privacy:n,last:r})!==(0,v.urlStringify)(p)&&(h.current=!0,b(e),setTimeout(function(){(0,v.feedback)(),a.value=1,setTimeout(function(){i()},w.duration)},240))},[a,p,t,s,o,n,r,i]),(0,T.useObserver)(function(){var e=(0,I.memoStyles)();return(0,R.jsxs)(g.default,{style:e.container,children:[(0,R.jsxs)(x.default.View,{style:[e.animated,d],children:[(0,R.jsx)(g.default,{style:e.placeholder}),(0,R.jsx)(O.default,Object.assign({},p))]}),(0,R.jsxs)(x.default.View,{style:[e.animated,l],children:[(0,R.jsx)(g.default,{style:e.placeholder}),(0,R.jsx)(O.default,Object.assign({},f))]})]})})}t.default=r;try{r.displayName="FlipBtn",r.__docgenInfo={description:"",displayName:"FlipBtn",props:{animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"any"}},btnText:{defaultValue:null,description:"",name:"btnText",required:!0,type:{name:"any"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"any"}},privacy:{defaultValue:null,description:"",name:"privacy",required:!0,type:{name:"any"}},last:{defaultValue:null,description:"",name:"last",required:!0,type:{name:"any"}},onAnimated:{defaultValue:null,description:"",name:"onAnimated",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/box/flip-btn/flip-btn.tsx#FlipBtn"]={docgenInfo:r.__docgenInfo,name:"FlipBtn",path:"src/screens/home/subject/box/flip-btn/flip-btn.tsx#FlipBtn"})}catch(e){}},"./src/screens/home/subject/box/flip-btn/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/index.ts")),n=s("./src/utils/decorators/index.ts"),l=o(s("./src/screens/home/subject/box/flip-btn/flip-btn.tsx")),m=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var t=t.$,s=t.state,o=s.flip,s=s.flipKey,n=t.collection,r=n.status,r=void 0===r?{name:"未收藏",type:null}:r,i=n.rating,i=void 0===i?0:i,c=n.private,a=n.lasttouch,n=!n._loaded&&t.params._collection||r.name,d="";return a&&["collect","on_hold","dropped"].includes(null==r?void 0:r.type)&&(d=(0,u.date)("Y.m.d",a)),(0,m.jsx)(l.default,{animate:o,btnText:n,rating:i,privacy:c,last:d,onAnimated:t.afterFlip},String(s))});t.default=o;try{flipbtn.displayName="flipbtn",flipbtn.__docgenInfo={description:"",displayName:"flipbtn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/box/flip-btn/index.tsx#flipbtn"]={docgenInfo:flipbtn.__docgenInfo,name:"flipbtn",path:"src/screens/home/subject/box/flip-btn/index.tsx#flipbtn"})}catch(e){}},"./src/screens/home/subject/box/flip-btn/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){var e=o._.device(44,50);return{container:{height:2*e+14,paddingTop:14},animated:{marginTop:-e},placeholder:{height:e}}}),s=(t.memoStyles=s,o._.create({left:{borderTopRightRadius:0,borderBottomRightRadius:0},right:{marginLeft:-o._.hairlineWidth,borderLeftWidth:0,borderTopLeftRadius:0,borderBottomLeftRadius:0},open:{marginLeft:o._.sm,marginRight:-22}}));t.styles=s},"./src/screens/home/subject/box/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/box/box.tsx")),c=s("./src/screens/home/subject/box/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s=t.$,t=t.navigation;return(0,a.jsx)(i.default,{styles:(0,c.memoStyles)(),navigation:t,isLogin:s.isLogin,status:s.status,url:s.url,showCount:n.systemStore.setting.showCount,showManageModel:s.showManageModel,toRating:s.toRating,outdate:n.userStore.outdate})});t.default=o;try{box.displayName="box",box.__docgenInfo={description:"",displayName:"box",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/box/index.tsx#box"]={docgenInfo:box.__docgenInfo,name:"box",path:"src/screens/home/subject/box/index.tsx#box"})}catch(e){}},"./src/screens/home/subject/box/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{paddingTop:o._.md,paddingHorizontal:o._.wind},sectionTitle:{height:28},btn:{marginTop:8},bottom:{marginTop:-o._.select(44,50)+o._.sm},hide:{position:"absolute",zIndex:1,top:-10,right:-o._.sm}}});t.memoStyles=s},"./src/screens/home/subject/catalog/catalog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),c=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),a=s("./src/components/index.ts"),d=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),m=s("./src/utils/fetch/index.ts"),n=s("./src/utils/decorators/index.ts"),p=s("./src/utils/hooks/index.ts"),j=s("./src/constants/index.ts"),f=o(s("./src/screens/home/subject/icon/catalog.tsx")),b=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/catalog/ds.ts"),h=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.showCatalog,n=e.catalog,r=e.onSwitchBlock,e=(0,p.useHorizontalLazy)(n),n=e.list,e=e.onScroll;return(0,h.jsxs)(d.InView,{style:(0,l.stl)(s.container,!o&&u._.short),children:[(0,h.jsx)(d.SectionTitle,{style:u._.container.wind,right:o?(0,h.jsx)(f.default,{}):(0,h.jsx)(b.default,{name:"目录",value:"showCatalog"}),icon:!o&&"md-navigate-next",onPress:function(){return r("showCatalog")},children:"目录"}),o&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(c.default,{style:s.scrollView,children:[(0,h.jsx)(i.default,Object.assign({contentContainerStyle:s.contentContainerStyle,horizontal:!0},j.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:16,onScroll:e,children:n.map(function(e){return(0,h.jsx)(a.Touchable,{style:s.item,animate:!0,onPress:function(){(0,m.t)("条目.跳转",{to:"CatalogDetail",from:"条目",catalogId:e.id}),t.push("CatalogDetail",{catalogId:e.id})},children:(0,h.jsxs)(a.Flex,{children:[(0,h.jsx)(d.Cover,{src:e.avatar,size:u._.r(40),radius:!0,shadow:!0,type:"目录"}),(0,h.jsxs)(a.Flex.Item,{style:u._.ml.md,children:[(0,h.jsx)(a.Text,{style:s.text,size:11,lineHeight:12,bold:!0,numberOfLines:1,children:(0,l.HTMLDecode)(e.title)}),(0,h.jsx)(a.Text,{size:10,lineHeight:11,type:"sub",numberOfLines:1,children:(0,l.HTMLDecode)(e.name)})]})]})},e.id)})})),(0,h.jsx)(a.Heatmap,{id:"条目.跳转",from:"条目"})]})}),(0,h.jsx)(d.PreventTouchPlaceholder,{})]})},o.DEFAULT_PROPS);t.default=s;try{catalog.displayName="catalog",catalog.__docgenInfo={description:"",displayName:"catalog",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; contentContainerStyle: { paddingTop: number; paddingHorizontal: number; paddingBottom: number; }; scrollView: { marginTop: number; marginBottom: number; }; item: { ...; }; text: { ...; }; }"}},showCatalog:{defaultValue:null,description:"",name:"showCatalog",required:!0,type:{name:"LayoutValue"}},catalog:{defaultValue:null,description:"",name:"catalog",required:!0,type:{name:'DeepPartial<{ avatar: Avatar<"l">; name: string; userId: UserId; id: Id; title: string; }>[]'}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/catalog/catalog.tsx#catalog"]={docgenInfo:catalog.__docgenInfo,name:"catalog",path:"src/screens/home/subject/catalog/catalog.tsx#catalog"})}catch(e){}},"./src/screens/home/subject/catalog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},styles:{},showCatalog:!0,catalog:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/catalog/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),c=o(s("./src/screens/home/subject/catalog/catalog.tsx")),a=s("./src/screens/home/subject/catalog/styles.ts"),d=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s,o=t.$,t=t.navigation,n=r.systemStore.setting.showCatalog;return-1!==n&&(s=o.catalog,(s=o.filterDefault||o.isLimit?s.filter(function(e){return!e.avatar.includes(i.URL_DEFAULT_AVATAR)}):s).length)?(0,d.jsx)(c.default,{navigation:t,styles:(0,a.memoStyles)(),showCatalog:n,catalog:s,onSwitchBlock:o.onSwitchBlock}):null});t.default=o;try{catalog.displayName="catalog",catalog.__docgenInfo={description:"",displayName:"catalog",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/catalog/index.tsx#catalog"]={docgenInfo:catalog.__docgenInfo,name:"catalog",path:"src/screens/home/subject/catalog/index.tsx#catalog"})}catch(e){}},"./src/screens/home/subject/catalog/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:92,marginTop:o._.lg},contentContainerStyle:{paddingTop:o._.sm,paddingHorizontal:o._.wind,paddingBottom:o._.md+4},scrollView:{marginTop:o._.md,marginBottom:-o._.md},item:{minWidth:96,marginRight:o._.md,borderRadius:o._.radiusSm,overflow:"hidden"},text:{maxWidth:o._.r(.24*o._.window.contentWidth)}}});t.memoStyles=s},"./src/screens/home/subject/character/character.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),m=o(s("./src/screens/home/subject/icon/character.tsx")),p=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/character/ds.ts"),j=s("./src/screens/home/subject/character/styles.ts"),f=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var n=e.navigation,t=e.showCharacter,r=e.subjectId,s=e.crt,i=e.crtCounts,o=e.onSwitchBlock;return(0,f.jsxs)(a.InView,{style:(0,u.stl)(j.styles.container,!t&&d._.short),children:[(0,f.jsx)(a.SectionTitle,{style:d._.container.wind,right:t?(0,f.jsx)(m.default,{}):(0,f.jsx)(p.default,{name:"角色",value:"showCharacter"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showCharacter")},children:"角色"}),t&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.HorizontalList,{style:d._.mt.sm,data:s,counts:i,quality:!1,initialRenderNums:d._.device(Math.floor(d._.window.contentWidth/56)+1,8),onPress:function(e){var t=e.id,s=e.name,o=e.nameJP,e=e._image;(0,l.t)("条目.跳转",{to:"Mono",from:"角色",subjectId:r}),n.push("Mono",{monoId:"character/"+t,_name:s,_jp:o,_image:e,_count:i[t]||0})},onSubPress:function(e){var t=e.actorId,e=e.desc;(0,l.t)("条目.跳转",{to:"Mono",from:"角色",subjectId:r}),n.push("Mono",{monoId:"person/"+t,_name:e})}}),(0,f.jsx)(c.Heatmap,{id:"条目.跳转",from:"角色"})]})]})},o.DEFAULT_PROPS);t.default=s;try{character.displayName="character",character.__docgenInfo={description:"",displayName:"character",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showCharacter:{defaultValue:null,description:"",name:"showCharacter",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},crt:{defaultValue:null,description:"",name:"crt",required:!0,type:{name:"Crt[] | DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/crt/g/${string}.jpg?r=${number}`; name: string; desc: string; }>[]"}},crtCounts:{defaultValue:null,description:"",name:"crtCounts",required:!0,type:{name:"Record<string, number>"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/character/character.tsx#character"]={docgenInfo:character.__docgenInfo,name:"character",path:"src/screens/home/subject/character/character.tsx#character"})}catch(e){}},"./src/screens/home/subject/character/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},showCharacter:!0,subjectId:0,crt:[],crtCounts:{},onSwitchBlock:function(){}}},"./src/screens/home/subject/character/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/character/character.tsx")),c=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s=t.$,t=t.navigation,o=n.systemStore.setting.showCharacter;return-1!==o&&s.crt.length?(0,c.jsx)(i.default,{navigation:t,showCharacter:o,subjectId:s.subjectId,crt:s.crt,crtCounts:s.subjectFormHTML.crtCounts,onSwitchBlock:s.onSwitchBlock}):null});t.default=o;try{character.displayName="character",character.__docgenInfo={description:"",displayName:"character",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/character/index.tsx#character"]={docgenInfo:character.__docgenInfo,name:"character",path:"src/screens/home/subject/character/index.tsx#character"})}catch(e){}},"./src/screens/home/subject/character/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({container:{minHeight:150,marginTop:s._.lg}});t.styles=s},"./src/screens/home/subject/chart/chart.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),j=s("./src/screens/home/subject/chart/utils.ts"),f=s("./src/screens/home/subject/chart/ds.ts"),b=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.navigation,n=e.styles,s=e.friend,r=e.rating,i=e.total,o=e.count,c=e.score,a=e.toRating,e=(0,j.getDeviation)(i,o,c),d=Object.keys(o).length?o:f.DEFAULT_RATES;return(0,b.jsxs)(b.Fragment,{children:[!!i&&(0,b.jsxs)(l.Text,{style:n.total,size:11,type:"sub",children:[i," 人评分"]}),(0,b.jsx)(l.Flex,{style:n.chart,children:Object.keys(d).reverse().map(function(e,t){var s=(0,j.getHeight)(i,d[e]),o=r==e;return(0,b.jsxs)(l.Flex.Item,{style:0<t&&m._.ml.xs,children:[(0,b.jsxs)(l.Flex,{style:n.item,justify:"center",align:"end",children:[(0,b.jsx)(u.default,{style:(0,p.stl)(n.itemFill,o&&n.itemFillActive,{height:s})}),(0,b.jsxs)(l.Text,{style:[n.count,{bottom:s}],size:10,type:o?"warning":"sub",align:"center",bold:!0,children:[d[e]," "]})]}),(0,b.jsx)(l.Text,{style:m._.mt.sm,size:12,type:o?"warning":"title",align:"center",children:e})]},e)})}),(0,b.jsxs)(l.Flex,{style:m._.mt.md,children:[(0,b.jsx)(l.Flex.Item,{children:(0,b.jsxs)(l.Touchable,{style:n.friend,onPress:function(){return a(t,"评分分布")},children:[(0,b.jsxs)(l.Flex,{children:[s.score?(0,b.jsxs)(l.Text,{size:12,type:"sub",children:["好友",(0,b.jsxs)(l.Text,{size:12,type:"main",bold:!0,children:[" ",s.score," "]}),(0,b.jsxs)(l.Text,{size:12,lineHeight:12,type:"sub",children:["(",s.total,")"]})]}):(0,b.jsx)(l.Text,{size:12,lineHeight:12,type:"sub",children:"用户评分"}),(0,b.jsx)(l.Iconfont,{name:"md-navigate-next"})]}),(0,b.jsx)(l.Heatmap,{id:"条目.跳转",from:"评分分布"})]})}),(0,b.jsx)(l.Touchable,{style:n.deviation,onPress:function(){t.push("Information",{title:"标准差",message:["0-1 异口同声","1.15 基本一致","1.3 略有分歧","1.45 莫衷一是","1.6 各执一词","1.75 你死我活"]})},children:(0,b.jsxs)(l.Flex,{children:[(0,b.jsx)(l.Text,{size:12,type:"sub",children:"标准差"}),(0,b.jsxs)(l.Text,{size:12,type:"main",bold:!0,children:[" ",(0,p.toFixed)(e,2)," "]}),(0,b.jsxs)(l.Text,{size:12,lineHeight:12,type:"sub",children:[(0,j.getDispute)(e)," "]}),(0,b.jsx)(l.Iconfont,{style:m._.ml.xs,name:"md-info-outline",size:16})]})})]})]})},f.DEFAULT_PROPS);t.default=s;try{chart.displayName="chart",chart.__docgenInfo={description:"",displayName:"chart",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ total: { position: "absolute"; zIndex: number; top: number; right: number; }; chart: { minHeight: number; marginTop: number; marginHorizontal: number; }; item: { height: number; paddingBottom: number; marginTop: number; }; ... 4 more ...; deviation: { ...; }; }'}},friend:{defaultValue:null,description:"",name:"friend",required:!0,type:{name:"DeepPartial<{ score: string; total: string; }>"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"number"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"string | number"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"{ 1: number; 2: number; 3: number; 4: number; 5: number; 6: number; 7: number; 8: number; 9: number; 10: number; } | DeepPartial<Record<1 | 3 | 10 | 2 | 6 | 4 | 8 | 5 | 7 | 9, number>>"}},score:{defaultValue:null,description:"",name:"score",required:!0,type:{name:"string | number"}},toRating:{defaultValue:null,description:"",name:"toRating",required:!0,type:{name:'(navigation: Navigation, from?: string, status?: "" | "dropped" | "on_hold" | "wishes" | "collections" | "doings") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/chart/chart.tsx#chart"]={docgenInfo:chart.__docgenInfo,name:"chart",path:"src/screens/home/subject/chart/chart.tsx#chart"})}catch(e){}},"./src/screens/home/subject/chart/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RATES=t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},styles:{},friend:{},rating:0,total:0,count:{},score:0,toRating:function(){}};t.DEFAULT_RATES={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0}},"./src/screens/home/subject/chart/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),i=o(s("./src/screens/home/subject/chart/chart.tsx")),c=s("./src/screens/home/subject/chart/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s=t.$,t=t.navigation,o=s.rating,n=o.total,r=o.count,o=o.score;return(0,a.jsx)(i.default,{navigation:t,styles:(0,c.memoStyles)(),friend:s.subjectFormHTML.friend,rating:s.collection.rating,total:n,count:r,score:o,toRating:s.toRating})});t.default=o;try{chart.displayName="chart",chart.__docgenInfo={description:"",displayName:"chart",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/chart/index.tsx#chart"]={docgenInfo:chart.__docgenInfo,name:"chart",path:"src/screens/home/subject/chart/index.tsx#chart"})}catch(e){}},"./src/screens/home/subject/chart/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{total:{position:"absolute",zIndex:1,top:12,right:-4},chart:{minHeight:o._.r(120),marginTop:o._.md,marginHorizontal:-4},item:{height:o._.r(120),paddingBottom:o._.xs,marginTop:-o._.md},itemFill:{position:"absolute",left:"50%",width:o._.device(6,8),marginLeft:o._.device(-3,-4),backgroundColor:o._.select(o._.colorWait,o._._colorSub),borderRadius:o._.device(6,4)},itemFillActive:{backgroundColor:o._.colorWarning},count:{position:"absolute",zIndex:1,right:0,left:0,marginBottom:4},friend:{paddingLeft:o._.xs,marginLeft:-o._.xs,borderRadius:o._.radiusSm,overflow:"hidden"},deviation:{paddingLeft:o._.xs,marginRight:-o._.xs,borderRadius:o._.radiusSm,overflow:"hidden"}}});t.memoStyles=s},"./src/screens/home/subject/chart/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.object.values.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviation=function(e,t,s){var o,n;return 0==e?0:(t=Object.values(t).reverse(),o=s,s=e,n=0,t.forEach(function(e,t){0!==e&&(n+=(10-t-o)*(10-t-o)*e)}),Math.sqrt(n/s))},t.getDispute=function(e){return 0===e?"-":e<1?"异口同声":e<1.15?"基本一致":e<1.3?"略有分歧":e<1.45?"莫衷一是":e<1.6?"各执一词":e<1.75?"你死我活":"厨黑大战"},t.getHeight=function(e,t){if(!e||!t)return 0;t/=e;0<t&&t<o&&(t=o);return 100*Math.min(1.44*t||o,.9)+"%"};var o=.04},"./src/screens/home/subject/comic/comic.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),u=s("./src/screens/home/subject/comic/ds.ts"),l=s("./src/screens/home/subject/comic/styles.ts"),m=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var n=e.navigation,r=e.subjectId,e=e.comic;return(0,m.jsxs)(c.InView,{style:l.styles.container,children:[(0,m.jsx)(c.SectionTitle,{style:a._.container.wind,children:"单行本"}),(0,m.jsx)(c.HorizontalList,{style:a._.mt.sm,data:e,width:u.COVER_WIDTH,height:u.COVER_HEIGHT,ellipsizeMode:"middle",initialRenderNums:a._.device(Math.floor(a._.window.contentWidth/u.COVER_WIDTH)+1,6),onPress:function(e,t){var s=e.id,o=e.name,e=e.image;(0,d.t)("条目.跳转",{to:"Subject",from:"单行本",subjectId:r}),n.push("Subject",{subjectId:s,_jp:o,_image:e,_type:t})}}),(0,m.jsx)(i.Heatmap,{id:"条目.跳转",from:"单行本"})]})},u.DEFAULT_PROPS);t.default=s;try{comic.displayName="comic",comic.__docgenInfo={description:"",displayName:"comic",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},comic:{defaultValue:null,description:"",name:"comic",required:!0,type:{name:"DeepPartial<{ id: SubjectId; name: string; image: `//lain.bgm.tv/pic/cover/c/${string}.jpg`; }>[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/comic/comic.tsx#comic"]={docgenInfo:comic.__docgenInfo,name:"comic",path:"src/screens/home/subject/comic/comic.tsx#comic"})}catch(e){}},"./src/screens/home/subject/comic/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=void 0;t.COVER_WIDTH=80,t.COVER_HEIGHT=112;t.DEFAULT_PROPS={navigation:{},subjectId:0,comic:[]}},"./src/screens/home/subject/comic/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/subject/comic/comic.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s=t.$,t=t.navigation;return s.comic.length?(0,i.jsx)(r.default,{navigation:t,subjectId:s.subjectId,comic:s.comic}):null});t.default=o;try{comic.displayName="comic",comic.__docgenInfo={description:"",displayName:"comic",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/comic/index.tsx#comic"]={docgenInfo:comic.__docgenInfo,name:"comic",path:"src/screens/home/subject/comic/index.tsx#comic"})}catch(e){}},"./src/screens/home/subject/comic/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({container:{minHeight:174,marginTop:s._.lg}});t.styles=s},"./src/screens/home/subject/comment/comment.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),a=o(s("./src/screens/home/subject/rate-segment/index.tsx")),d=o(s("./src/screens/home/subject/icon/comment.tsx")),u=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/comment/ds.ts"),l=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.showComment,o=e.pageTotal,n=e.total,r=e.onSwitchBlock,e=o<=1?n:20*(2<=o?o-1:o);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.SectionTitle,{style:s?t.container:t.hide,right:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.default,{}),(0,l.jsx)(d.default,{})]}):(0,l.jsx)(u.default,{name:"吐槽",value:"showComment"}),icon:!s&&"md-navigate-next",onPress:function(){return r("showComment")},children:["吐槽"," ",(0,l.jsxs)(i.Text,{size:12,type:"sub",lineHeight:24,children:[e,"+"]})]}),(0,l.jsx)(i.Heatmap,{bottom:32,id:"条目.跳转",from:"吐槽"})]})},o.DEFAULT_PROPS);t.default=s;try{comment.displayName="comment",comment.__docgenInfo={description:"",displayName:"comment",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { paddingHorizontal: number; paddingBottom: number; marginTop: number; }; hide: { paddingHorizontal: number; marginTop: number; marginVertical: number; }; }"}},showComment:{defaultValue:null,description:"",name:"showComment",required:!0,type:{name:"LayoutValue"}},pageTotal:{defaultValue:null,description:"",name:"pageTotal",required:!0,type:{name:"number"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"number"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/comment/comment.tsx#comment"]={docgenInfo:comment.__docgenInfo,name:"comment",path:"src/screens/home/subject/comment/comment.tsx#comment"})}catch(e){}},"./src/screens/home/subject/comment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={styles:{},showComment:!0,pageTotal:0,total:0,onSwitchBlock:function(){}}},"./src/screens/home/subject/comment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/comment/comment.tsx")),a=s("./src/screens/home/subject/comment/styles.ts"),d=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s,o,t=t.$,n=i.systemStore.setting.showComment;return-1===n?(0,d.jsx)(r.default,{style:i._.mt.lg}):(s=(o=t.subjectComments).list,o=void 0===(o=o.pagination.pageTotal)?0:o,(0,d.jsx)(c.default,{styles:(0,a.memoStyles)(),showComment:n,pageTotal:o,total:s.length,onSwitchBlock:t.onSwitchBlock}))});t.default=o;try{comment.displayName="comment",comment.__docgenInfo={description:"",displayName:"comment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/comment/index.tsx#comment"]={docgenInfo:comment.__docgenInfo,name:"comment",path:"src/screens/home/subject/comment/index.tsx#comment"})}catch(e){}},"./src/screens/home/subject/comment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{paddingHorizontal:o._.wind,paddingBottom:o._.xs,marginTop:o._.lg},hide:{paddingHorizontal:o._.wind,marginTop:o._.lg,marginVertical:-o._.sm}}});t.memoStyles=s},"./src/screens/home/subject/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),h=s("./src/constants/index.ts"),_=s("./src/screens/home/subject/cover/styles.ts"),y=s("./node_modules/react/jsx-runtime.js");function g(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var x,S={},l=(s=l.default.Component,(0,c.default)(v,s),x=g(v),(0,r.default)(v,[{key:"isLoaded",get:function(){var e=this.context.$;return"string"==typeof e.cover&&S[e.cover]||this.state.isLoaded}},{key:"event",get:function(){return{id:"条目.封面图查看",data:{subjectId:this.context.$.subjectId}}}},{key:"renderPlaceholder",value:function(){var e,t,s;return this.isLoaded?null:(e=f.systemStore.setting.coverRadius,t=this.context.$,s=this.props.placeholder,(0,y.jsx)(j.Cover,{style:[this.styles.placeholder,this.styles.shadow,{borderRadius:e}],src:s||h.IMG_DEFAULT,size:t.imageWidth,height:t.imageHeight,radius:!0,noDefault:!0,skeleton:!1}))}},{key:"renderCover",value:function(){var e=this.context.$,t=this.props,s=t.image,t=t.placeholder;return s?(0,y.jsx)(j.Cover,{src:e.cover,size:e.imageWidth,height:e.imageHeight,radius:!0,imageViewer:!0,imageViewerSrc:(0,b.getCoverLarge)(s||t),fadeDuration:0,event:this.event,noDefault:!0,skeleton:!1,sync:!0,onLoad:this.onLoad}):null}},{key:"render",value:function(){var e=f.systemStore.setting.coverRadius;return(0,y.jsxs)(m.default,{style:(0,b.stl)(this.styles.container,this.isLoaded&&this.styles.shadow,{borderRadius:e+2}),children:[this.renderCover(),this.renderPlaceholder(),(0,y.jsx)(p.Heatmap,{id:"条目.封面图查看"})]})}},{key:"styles",get:function(){return(0,_.memoStyles)()}}]),v);function v(){var t;(0,n.default)(this,v);for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return t=x.call.apply(x,[this].concat(s)),(0,u.default)((0,i.default)(t),"state",{isLoaded:!1}),(0,u.default)((0,i.default)(t),"onLoad",function(){var e=t.context.$;"string"==typeof e.cover&&(S[e.cover]=!0),t.setState({isLoaded:!0})}),t}c=(0,o.obc)(l);t.default=c;try{cover.displayName="cover",cover.__docgenInfo={description:"",displayName:"cover",props:{image:{defaultValue:null,description:"",name:"image",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/cover/index.tsx#cover"]={docgenInfo:cover.__docgenInfo,name:"cover",path:"src/screens/home/subject/cover/index.tsx#cover"})}catch(e){}},"./src/screens/home/subject/cover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{position:"absolute",zIndex:1,top:o._.md+6,left:o._.wind},placeholder:{position:"absolute",zIndex:2,top:0,left:0},shadow:{backgroundColor:o._.colorBg,borderRadius:o._.radiusXs,shadowColor:o._.colorShadow,shadowOffset:{width:1,height:4},shadowOpacity:.12,shadowRadius:6,elevation:12}}});t.memoStyles=s},"./src/screens/home/subject/disc/disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),d=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),u=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var s,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),b=s("./src/utils/app/index.ts"),h=o(s("./src/screens/home/subject/icon/disc.tsx")),_=o(s("./src/screens/home/subject/icon/search-disc.tsx")),o=s("./src/screens/home/subject/disc/ds.ts"),y=s("./node_modules/react/jsx-runtime.js"),i=["discTranslateResult"];function c(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(c=function(e){return e?s:t})(e))}s=(0,r.memo)(function(e){var o=e.navigation,n=e.styles,r=e.subjectId,t=e.disc,e=e.discTranslateResult,s=(0,l.useState)(!1),s=(0,u.default)(s,2),i=s[0],c=s[1],s=(0,l.useCallback)(function(){c(!0)},[c]),a=(0,d.default)(e);return(0,y.jsxs)(m.default,{style:n.container,children:[(0,y.jsx)(j.SectionTitle,{right:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(_.default,{}),!e.length&&(0,y.jsx)(h.default,{})]}),children:"曲目列表"}),!!t.length&&(0,y.jsxs)(m.default,{style:f._.mt.md,children:[(0,y.jsx)(p.Expand,{onExpand:s,children:t.filter(function(e,t){return!!i||(6<=e.disc.length?t<1:t<2)}).map(function(e,t){return(0,y.jsxs)(m.default,{style:!!t&&f._.mt.md,children:[(0,y.jsx)(p.Text,{type:"sub",size:16,selectable:!0,children:e.title}),(0,y.jsx)(m.default,{style:f._.mt.sm,children:e.disc.map(function(e,t){var s="";return a.length&&(s=a.shift().dst),(0,y.jsxs)(m.default,{style:t%2==0?[n.item,n.odd]:n.item,children:[(0,y.jsx)(p.Text,{onPress:function(){return(0,b.appNavigate)(e.href,o,{},{id:"条目.跳转",data:{from:"曲目列表",subjectId:r}})},children:e.title}),!!s&&(0,y.jsx)(p.Text,{style:n.translate,type:"sub",size:12,children:s})]},e.href)})})]},e.title)})}),(0,y.jsx)(p.Heatmap,{id:"条目.跳转",from:"曲目列表"})]})]})},o.DEFAULT_PROPS,function(e){var t=e.discTranslateResult,e=(0,n.default)(e,i);return Object.assign({discTranslateResult:t.length},e)});t.default=s;try{disc.displayName="disc",disc.__docgenInfo={description:"",displayName:"disc",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingHorizontal: number; marginTop: number; }; item: { paddingHorizontal: number; paddingVertical: number; }; odd: { backgroundColor: string; }; translate: { marginTop: number; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},disc:{defaultValue:null,description:"",name:"disc",required:!0,type:{name:"DeepPartial<{ title: string; disc: { title: string; href: `/ep/${number}`; }[]; }>[]"}},discTranslateResult:{defaultValue:null,description:"",name:"discTranslateResult",required:!0,type:{name:"any[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/disc/disc.tsx#disc"]={docgenInfo:disc.__docgenInfo,name:"disc",path:"src/screens/home/subject/disc/disc.tsx#disc"})}catch(e){}},"./src/screens/home/subject/disc/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,disc:[],discTranslateResult:[]}},"./src/screens/home/subject/disc/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.slice.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/subject/disc/disc.tsx")),i=s("./src/screens/home/subject/disc/styles.ts"),c=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s=t.$,t=t.navigation;return(0,c.jsx)(r.default,{navigation:t,styles:(0,i.memoStyles)(),subjectId:s.subjectId,disc:s.disc,discTranslateResult:s.state.discTranslateResult.slice()})});t.default=o;try{disc.displayName="disc",disc.__docgenInfo={description:"",displayName:"disc",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/disc/index.tsx#disc"]={docgenInfo:disc.__docgenInfo,name:"disc",path:"src/screens/home/subject/disc/index.tsx#disc"})}catch(e){}},"./src/screens/home/subject/disc/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:96,paddingHorizontal:o._.wind,marginTop:o._.lg},item:{paddingHorizontal:o._.sm,paddingVertical:o._.sm},odd:{backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1)},translate:{marginTop:o._.xs}}});t.memoStyles=s},"./src/screens/home/subject/ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.WEEK_DAY_MAP=t.WEEK_DAY_DS=t.MINUTE_DS=t.HOUR_DS=t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={styles:{},watchedEps:"",totalEps:0,onAirCustom:{},isDoing:!1,showEpInput:!0,showCustomOnair:!0,onChangeText:function(){},onSelectOnAir:function(){},onResetOnAirUser:function(){},onScrollIntoViewIfNeeded:function(){},doUpdateSubjectEp:function(){}},t.WEEK_DAY_DS=["周日","周一","周二","周三","周四","周五","周六"],t.WEEK_DAY_MAP={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},t.HOUR_DS=["20","21","22","23","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19"];t.MINUTE_DS=["00","05","10","15","20","25","30","35","40","45","50","55"]},"./src/screens/home/subject/ep/ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),b=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),h=s("./src/components/index.ts"),_=s("./src/screens/_/index.ts"),y=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),g=s("./src/constants/index.ts"),x=o(s("./src/screens/home/subject/eps/index.tsx")),S=o(s("./src/screens/home/subject/icon/ep-filter.tsx")),v=o(s("./src/screens/home/subject/icon/online.tsx")),T=o(s("./src/screens/home/subject/icon/ep.tsx")),O=o(s("./src/screens/home/subject/icon/reverse.tsx")),I=s("./src/screens/home/subject/ep/ds.ts"),R=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var t=e.styles,s=e.watchedEps,o=e.totalEps,n=e.onAirCustom,r=e.isDoing,i=e.showEpInput,c=e.showCustomOnair,a=e.onChangeText,d=e.onSelectOnAir,u=e.onResetOnAirUser,l=e.onScrollIntoViewIfNeeded,e=e.doUpdateSubjectEp,i=i&&!g.SHARE_MODE,m=n.weekDay,p=n.h,j=n.m,f=n.isOnair,n=n.isCustom,c=c&&(f||r);return(0,R.jsxs)(b.default,{style:t.container,children:[(0,R.jsx)(_.SectionTitle,{right:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(S.default,{}),(0,R.jsx)(v.default,{}),(0,R.jsx)(T.default,{}),(0,R.jsx)(O.default,{})]}),children:"章节"}),(0,R.jsxs)(b.default,{style:y._.mt.md,children:[(0,R.jsx)(x.default,{}),(0,R.jsx)(h.Heatmap,{id:"条目.章节按钮长按"}),(0,R.jsx)(h.Heatmap,{bottom:35,id:"条目.章节菜单操作"})]}),(i||c)&&(0,R.jsxs)(h.Flex,{style:y._.mt.sm,children:[(0,R.jsx)(h.Flex.Item,{children:i&&(0,R.jsxs)(h.Flex,{children:[(0,R.jsxs)(b.default,{style:t.input,children:[(0,R.jsx)(h.Input,{style:t.inputRaw,pointerEvents:"box-none",keyboardType:"numeric",value:s,placeholder:s||"0",clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:function(e){return a("watchedEps",e.replace(/[^\d]+/,""))},onSubmitEditing:e,onScrollIntoViewIfNeeded:l}),!!o&&(0,R.jsxs)(h.Text,{style:t.total,type:"sub",size:11,bold:!0,children:["/ ",o]})]}),(0,R.jsx)(h.Button,{style:t.btn,size:"sm",type:"ghostPrimary",onPress:e,children:"更新"})]})}),c&&(0,R.jsxs)(h.Flex,{children:[(0,R.jsx)(_.Popover,{data:I.WEEK_DAY_DS,onSelect:function(e){var t={};Object.keys(I.WEEK_DAY_MAP).forEach(function(e){return t[I.WEEK_DAY_MAP[e]]=e}),d(Number(t[e]||0),""+p+j)},children:(0,R.jsx)(h.Flex,{style:t.btnOnAir,justify:"center",children:(0,R.jsx)(h.Text,{size:11,bold:!0,type:"sub",children:void 0===I.WEEK_DAY_MAP[m]?"周":I.WEEK_DAY_MAP[m]})})}),(0,R.jsx)(_.Popover,{data:I.HOUR_DS,onSelect:function(e){d(m,""+(e||"00")+(j||"00"))},children:(0,R.jsx)(h.Flex,{style:t.btnOnAir,justify:"center",children:(0,R.jsx)(h.Text,{size:11,bold:!0,type:"sub",children:p||"时"})})}),(0,R.jsx)(_.Popover,{data:I.MINUTE_DS,onSelect:function(e){d(m,""+(p||"00")+(e||"00"))},children:(0,R.jsx)(h.Flex,{style:t.btnOnAir,justify:"center",children:(0,R.jsx)(h.Text,{size:11,bold:!0,type:"sub",children:j||"分"})})}),n&&(0,R.jsx)(b.default,{style:t.btnReset,children:(0,R.jsx)(_.IconTouchable,{style:y._.mr._xs,name:"md-refresh",size:20,onPress:u})})]},""+m+p+j),(0,R.jsx)(h.Heatmap,{id:"条目.输入框更新章节"})]})]})},I.DEFAULT_PROPS);t.default=o;try{ep.displayName="ep",ep.__docgenInfo={description:"",displayName:"ep",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { minHeight: number; marginTop: number; marginHorizontal: number; }; input: { width: number; height: number; }; inputRaw: { marginRight: number; fontSize: number; lineHeight: number; ... 6 more ...; fontWeight: "800"; } | { ...; }; total: { ...; }; btn: { ...; }; btnOnAir: { ...; }; btnReset: { ...; }; }'}},watchedEps:{defaultValue:null,description:"",name:"watchedEps",required:!0,type:{name:"string"}},totalEps:{defaultValue:null,description:"",name:"totalEps",required:!0,type:{name:"string | number"}},onAirCustom:{defaultValue:null,description:"",name:"onAirCustom",required:!0,type:{name:"{ weekDay: any; h: string; m: string; isOnair: boolean; isExist: boolean; isCustom: boolean; }"}},isDoing:{defaultValue:null,description:"",name:"isDoing",required:!0,type:{name:"boolean"}},showEpInput:{defaultValue:null,description:"",name:"showEpInput",required:!0,type:{name:"LayoutValue"}},showCustomOnair:{defaultValue:null,description:"",name:"showCustomOnair",required:!0,type:{name:"LayoutValue"}},onChangeText:{defaultValue:null,description:"",name:"onChangeText",required:!0,type:{name:"(name: string, text: string) => void"}},onSelectOnAir:{defaultValue:null,description:"",name:"onSelectOnAir",required:!0,type:{name:"(weekDayCN: string | number, timeCN: string) => void"}},onResetOnAirUser:{defaultValue:null,description:"",name:"onResetOnAirUser",required:!0,type:{name:"() => void"}},onScrollIntoViewIfNeeded:{defaultValue:null,description:"",name:"onScrollIntoViewIfNeeded",required:!0,type:{name:"(y: number) => any"}},doUpdateSubjectEp:{defaultValue:null,description:"",name:"doUpdateSubjectEp",required:!0,type:{name:"() => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/ep/ep.tsx#ep"]={docgenInfo:ep.__docgenInfo,name:"ep",path:"src/screens/home/subject/ep/ep.tsx#ep"})}catch(e){}},"./src/screens/home/subject/ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/book-ep/index.tsx")),c=o(s("./src/screens/home/subject/disc/index.tsx")),a=o(s("./src/screens/home/subject/ep/ep.tsx")),d=s("./src/screens/home/subject/ep/styles.ts"),u=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s,e=e.onScrollIntoViewIfNeeded,t=t.$;return"游戏"===t.type?null:"书籍"===t.type?(0,u.jsx)(i.default,{onScrollIntoViewIfNeeded:e}):"音乐"===t.type?(0,u.jsx)(c.default,{}):(0,u.jsx)(a.default,{styles:(0,d.memoStyles)(),watchedEps:t.state.watchedEps,totalEps:t.subjectFormHTML.totalEps,onAirCustom:t.onAirCustom,isDoing:"do"===(null==(s=t.collection)||null==(s=s.status)?void 0:s.type),showEpInput:n.systemStore.setting.showEpInput,showCustomOnair:n.systemStore.setting.showCustomOnair,onChangeText:t.changeText,onSelectOnAir:t.onSelectOnAir,onResetOnAirUser:t.resetOnAirUser,onScrollIntoViewIfNeeded:e,doUpdateSubjectEp:t.doUpdateSubjectEp})});t.default=o},"./src/screens/home/subject/ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:146,marginTop:o._.lg,marginHorizontal:o._.wind},input:{width:o._.r(74),height:o._.r(32)},inputRaw:Object.assign({height:o._.r(32),paddingVertical:0,paddingHorizontal:o._.sm,color:o._.colorSub,fontWeight:"800"},o._.device(o._.fontSize12,o._.fontSize15)),total:{position:"absolute",zIndex:100,top:o._.r(9),right:10},btn:{width:o._.r(44),height:o._.r(32),marginLeft:o._.r(10),backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel2),overflow:"hidden"},btnOnAir:{width:o._.r(44),height:o._.r(32),marginLeft:o._.r(10),backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel2),borderColor:o._.select(o._.colorPrimaryBorder,o._._colorDarkModeLevel2),borderWidth:o._.select(o._.hairlineWidth,0),borderRadius:o._.radiusXs,overflow:o._.ios(void 0,"hidden")},btnReset:{height:o._.r(32),marginTop:-8}}});t.memoStyles=s},"./src/screens/home/subject/eps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/styles/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js"),a=Math.floor(o.window.width-o.wind)-1;s=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation,t=2<=s.onlinePlayActionSheetData.length,t=!s.isLimit&&t;return(0,c.jsx)(n.Eps,{layoutWidth:a,marginRight:r._.isLandscape?0:r._._wind,advance:!0,pagination:!0,login:s.isLogin,subjectId:s.params.subjectId,eps:s.toEps,userProgress:s.userProgress,canPlay:t,flip:s.state.flipEps,onFliped:s.afterEpsFlip,onSelect:function(e,t){s.doEpsSelect(e,t,o)}})});t.default=s;try{eps.displayName="eps",eps.__docgenInfo={description:"",displayName:"eps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/eps/index.tsx#eps"]={docgenInfo:eps.__docgenInfo,name:"eps",path:"src/screens/home/subject/eps/index.tsx#eps"})}catch(e){}},"./src/screens/home/subject/game/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=void 0;s=s("./src/stores/index.ts")._.r(160),s=.56*(t.THUMB_WIDTH=s);t.THUMB_HEIGHT=s},"./src/screens/home/subject/game/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.fill.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),p=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),j=s("./src/components/index.ts"),f=s("./src/screens/_/index.ts"),b=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),_=s("./src/utils/decorators/index.ts"),y=s("./src/utils/fetch/index.ts"),g=s("./src/constants/index.ts"),x=o(s("./src/screens/home/subject/icon/ps.tsx")),S=o(s("./src/screens/home/subject/icon/hidden.tsx")),v=s("./src/screens/home/subject/game/ds.ts"),T=s("./src/screens/home/subject/game/styles.ts"),O=s("./node_modules/react/jsx-runtime.js");function I(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}o=l.default.Component,(0,c.default)(w,o),R=I(w),(0,r.default)(w,[{key:"data",get:function(){var s=this.context.$,e=null==(e=b.otaStore.game(s.subjectId))?void 0:e.l;return"number"==typeof e&&e?new Array(e).fill("").map(function(e,t){return(0,g.CDN_GAME)(s.subjectId,t)}):[]}},{key:"data2",get:function(){var s=this.context.$,e=null==(e=b.otaStore.game(s.subjectId))?void 0:e.l;return"number"==typeof e&&e?new Array(e).fill("").map(function(e,t){return(0,g.CDN_GAME)(s.subjectId,t,!1)}):[]}},{key:"isADV",get:function(){var e;return!!(null==(e=this.context.$.gameInfo)?void 0:e.isADV)}},{key:"renderThumbs",value:function(){var s,e,o=this;return null!=(e=this.data)&&e.length?(s=this.context.$,e=this.state.scrolled,(0,O.jsx)(m.default,Object.assign({style:b._.mt.md,contentContainerStyle:b._.container.wind,horizontal:!0},g.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:80,onScroll:e?void 0:this.onScroll,children:this.data.map(function(e,t){return(0,O.jsx)(j.Image,{style:t?o.styles.image:o.styles.imageSide,src:e,size:v.THUMB_WIDTH,height:v.THUMB_HEIGHT,radius:!0,onPress:function(){(0,y.t)("条目.游戏截图",{subjectId:s.subjectId}),(0,h.showImageViewer)(o.data2.map(function(e){return{url:e}}),t)}},e)})}))):null}},{key:"renderDetails",value:function(){var e=this,t=this.context.$,s=b.otaStore.game(t.subjectId),o=s.t,n=s.ta,n=void 0===n?[]:n,r=s.pl,r=void 0===r?[]:r,i=s.en,c=s.cn,a=s.d,s=s.p,a=("object"==typeof a?a:[a]).map(function(e){return String(e).trim()}).filter(function(e){return!!e}),s=("object"==typeof s?s:[s]).map(function(e){return String(e).trim()}).filter(function(e){return!!e});return(0,O.jsxs)(p.default,{style:this.styles.details,children:[!!o&&(0,O.jsxs)(j.Text,{lineHeight:22,selectable:!0,children:["名称∶",o]}),!(null==n||!n.length)&&(0,O.jsxs)(j.Text,{lineHeight:22,selectable:!0,children:["类型∶",n.join("、")]}),!(null==r||!r.length)&&(0,O.jsxs)(j.Text,{lineHeight:22,selectable:!0,children:["平台∶",r.join("、")]}),!!a.length&&(0,O.jsxs)(j.Text,{lineHeight:22,selectable:!0,children:["开发商∶",a.join("、")]}),!!s.length&&!this.isADV&&(0,O.jsxs)(j.Text,{lineHeight:22,selectable:!0,children:["发行商∶",s.join("、")]}),!!i&&c!==i&&(0,O.jsxs)(j.Text,{lineHeight:22,selectable:!0,children:["最早发售∶",i]}),!!c&&(0,O.jsxs)(j.Text,{lineHeight:22,selectable:!0,children:["中文发售∶",c]}),(0,O.jsx)(j.Touchable,{onPress:function(){return(0,h.open)("https://search.bilibili.com/all?keyword="+encodeURIComponent(t.jp||t.cn)+"%20"+(e.isADV?"OP":"PV")+"&order=totalrank&duration=1&tids_1=4")},children:(0,O.jsxs)(j.Flex,{children:[(0,O.jsxs)(j.Text,{type:"sub",lineHeight:22,children:["点击查找 ",this.isADV?"OP":"PV"]}),(0,O.jsx)(j.Iconfont,{style:b._.ml.xs,name:"md-open-in-new",size:16})]})})]})}},{key:"render",value:function(){var e=b.systemStore.setting.showGameInfo,t=this.context.$;return-1!==e&&t.gameInfo&&t.gameInfo.i?(0,O.jsx)(f.InView,{style:this.styles.container,children:(0,O.jsxs)(j.Expand,{children:[(0,O.jsx)(f.SectionTitle,{style:b._.container.wind,right:e?!this.isADV&&(0,O.jsx)(x.default,{}):(0,O.jsx)(S.default,{name:"游戏",value:"showGameInfo"}),icon:!e&&"md-navigate-next",onPress:function(){return t.onSwitchBlock("showGameInfo")},children:"游戏"}),e&&(0,O.jsxs)(O.Fragment,{children:[this.renderThumbs(),this.renderDetails()]}),(0,O.jsx)(f.PreventTouchPlaceholder,{})]})}):null}},{key:"styles",get:function(){return(0,T.memoStyles)()}}]);var R,s=w;function w(){var e;(0,n.default)(this,w);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=R.call.apply(R,[this].concat(s)),(0,u.default)((0,i.default)(e),"state",{scrolled:!1}),(0,u.default)((0,i.default)(e),"onScroll",function(){e.state.scrolled||e.setState({scrolled:!0})}),e}l=(0,_.obc)(s);t.default=l;try{game.displayName="game",game.__docgenInfo={description:"",displayName:"game",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/game/index.tsx#game"]={docgenInfo:game.__docgenInfo,name:"game",path:"src/screens/home/subject/game/index.tsx#game"})}catch(e){}},"./src/screens/home/subject/game/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:216,marginTop:o._.lg},image:{marginLeft:o._.sm,overflow:"hidden"},imageSide:{overflow:"hidden"},details:{paddingHorizontal:o._.wind,marginTop:o._.md}}});t.memoStyles=s},"./src/screens/home/subject/head/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0,t.DEFAULT_PROPS={styles:{},showRelation:!1,subject:{},subjectPrev:void 0,subjectAfter:void 0,subjectSeries:void 0,cn:"",jp:"",release:"",year:"",coverPlaceholder:"",imageWidth:0,imageHeight:0,titleLabel:"",hideScore:!1,rating:{},x18:!1}},"./src/screens/home/subject/head/head.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),v=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),T=s("./src/components/index.ts"),O=s("./src/screens/_/index.ts"),I=s("./src/stores/index.ts"),R=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),w=s("./src/constants/index.ts"),E=o(s("./src/screens/home/subject/cover/index.tsx")),C=o(s("./src/screens/home/subject/series/index.tsx")),o=s("./src/screens/home/subject/head/ds.ts"),P=s("./src/utils/fetch/index.ts"),A=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t,s=e.styles,o=e.showRelation,n=e.subject,r=e.subjectPrev,i=e.subjectAfter,c=e.subjectSeries,a=e.cn,d=e.jp,u=e.release,l=e.year,m=e.coverPlaceholder,p=e.imageWidth,j=e.imageHeight,f=e.titleLabel,b=e.hideScore,h=e.rating,e=e.x18,_=(0,R.cnjp)(d,a),y=(0,R.cnjp)(a,d),g=n.id,d=n.images,n=u.includes("年"),x=u.includes("月"),S=u.includes("日"),n=(n&&x&&S?(t=""+u.replace(/年|月|日/g,"/"),t=(0,R.getTimestamp)(null==t?void 0:t.slice(0,t.length-1)),t=(0,R.getTimestamp)()<t):(n&&x&&!S||n&&!x&&!S)&&(t=!0),[""+String(_).slice(0,28)+(28<=String(_).length?"...":"")]),x=(f&&n.push(f),13);32<=(n=n.join(" · ")).length?x=11:22<=n.length&&(x=12);S=(32<a.length?12:24<a.length||16<a.length?13:16)+(2===w.PAD?4:2),o&&!!(r||i||c)&&(S=Math.max(11,S-2)),f=p+I._.wind+I._.device(12,20);return(0,A.jsxs)(v.default,{style:s.container,children:[(0,A.jsx)(E.default,{image:null==d?void 0:d.common,placeholder:m}),t&&(0,A.jsxs)(T.Text,{style:[s.release,{left:f}],type:"__plain__",size:10,bold:!0,children:[u," 上映"]}),(0,A.jsxs)(v.default,{style:[s.content,{minHeight:j-I._.r(20),paddingLeft:f}],children:[(0,A.jsxs)(v.default,{style:{minHeight:j-I._.r(68)},children:[(0,A.jsxs)(v.default,{children:[(0,A.jsx)(T.Katakana.Provider,{size:S,lineHeight:S+1,bold:!0,children:(0,A.jsxs)(T.Katakana,{size:S,lineHeight:S+1,bold:!0,onLongPress:function(){(0,P.t)("条目.复制标题",{subjectId:g}),(0,R.copy)(y)},children:[y,!!l&&(0,A.jsxs)(T.Text,{size:S-3,lineHeight:S+1,children:[" ","(",l,")"]})]})}),(!c||!!_&&_!==y)&&(0,A.jsx)(T.Katakana.Provider,{style:!!y&&I._.mt.xs,itemStyle:s.katakana,type:"sub",size:x,numberOfLines:2,children:(0,A.jsx)(T.Katakana,{type:"sub",size:x,numberOfLines:2,onLongPress:function(){(0,P.t)("条目.复制标题",{subjectId:g}),(0,R.copy)(_)},children:n})}),(0,A.jsx)(T.Heatmap,{id:"条目.复制标题"})]}),(0,A.jsx)(C.default,{size:S})]}),(0,A.jsx)(T.Flex,{style:I._.mt.xs,children:!b&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(T.Text,{type:"main",size:I._.device(20,24),children:[""===h.score?"-":(0,R.toFixed)(h.score,1)," "]}),""!==h.score&&(0,A.jsx)(O.ScoreTag,{style:I._.ml.sm,value:Number(h.score)}),e&&(0,A.jsx)(O.Tag,{style:I._.ml.sm,size:13,value:"NSFW"})]})})]})]})},o.DEFAULT_PROPS);t.default=s;try{head.displayName="head",head.__docgenInfo={description:"",displayName:"head",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { zIndex: number; paddingTop: number; marginTop: number; }; content: { paddingTop: number; paddingRight: number; paddingBottom: number; backgroundColor: "rgb(255, 255, 255)" | "rgb(36, 36, 36)"; borderTopLeftRadius: number; borderTopRightRadius: number; }; release: { ...; }; katakana: { ...; }; }'}},showRelation:{defaultValue:null,description:"",name:"showRelation",required:!0,type:{name:"LayoutValue"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:"Subject"}},subjectPrev:{defaultValue:null,description:"",name:"subjectPrev",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectAfter:{defaultValue:null,description:"",name:"subjectAfter",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectSeries:{defaultValue:null,description:"",name:"subjectSeries",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},cn:{defaultValue:null,description:"",name:"cn",required:!0,type:{name:"string"}},jp:{defaultValue:null,description:"",name:"jp",required:!0,type:{name:"string"}},release:{defaultValue:null,description:"",name:"release",required:!0,type:{name:"string"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"string"}},coverPlaceholder:{defaultValue:null,description:"",name:"coverPlaceholder",required:!0,type:{name:"string"}},imageWidth:{defaultValue:null,description:"",name:"imageWidth",required:!0,type:{name:"number"}},imageHeight:{defaultValue:null,description:"",name:"imageHeight",required:!0,type:{name:"number"}},titleLabel:{defaultValue:null,description:"",name:"titleLabel",required:!0,type:{name:"string"}},hideScore:{defaultValue:null,description:"",name:"hideScore",required:!0,type:{name:"boolean"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"{ count: { 1: number; 2: number; 3: number; 4: number; 5: number; 6: number; 7: number; 8: number; 9: number; 10: number; }; score: string; total: string; } | { total: string | number; score: string | number; rank?: number; count: { ...; } | DeepPartial<...>; }"}},x18:{defaultValue:null,description:"",name:"x18",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/head/head.tsx#head"]={docgenInfo:head.__docgenInfo,name:"head",path:"src/screens/home/subject/head/head.tsx#head"})}catch(e){}},"./src/screens/home/subject/head/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/head/head.tsx")),c=s("./src/screens/home/subject/head/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){t=t.$;return(0,a.jsx)(i.default,{styles:(0,c.memoStyles)(),showRelation:n.systemStore.setting.showRelation,subject:t.subject,subjectPrev:t.subjectPrev,subjectAfter:t.subjectAfter,subjectSeries:t.subjectSeries,cn:t.cn,jp:t.jp,release:t.release,year:t.year,coverPlaceholder:t.coverPlaceholder,imageWidth:t.imageWidth,imageHeight:t.imageHeight,titleLabel:t.titleLabel,hideScore:t.hideScore,rating:t.rating,x18:t.x18})});t.default=o;try{head.displayName="head",head.__docgenInfo={description:"",displayName:"head",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/head/index.tsx#head"]={docgenInfo:head.__docgenInfo,name:"head",path:"src/screens/home/subject/head/index.tsx#head"})}catch(e){}},"./src/screens/home/subject/head/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{zIndex:1,paddingTop:o._.r(48),marginTop:o._.ios(80,-80)},content:{paddingTop:o._.r(12),paddingRight:o._.wind,paddingBottom:20,backgroundColor:o._.colorPlain,borderTopLeftRadius:o._.radiusLg,borderTopRightRadius:o._.radiusLg},release:{position:"absolute",zIndex:1,top:o._.r(28),opacity:.6},katakana:{marginTop:-4}}});t.memoStyles=s},"./src/screens/home/subject/header-title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_WIDTH=t.IMAGE_HEIGHT=t.DEFAULT_PROPS=void 0;t.IMAGE_WIDTH=28,t.IMAGE_HEIGHT=35.84;t.DEFAULT_PROPS={common:"",score:"",type:"",cn:"",jp:"",titleLabel:""}},"./src/screens/home/subject/header-title/header-title.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/header-title/ds.ts"),l=s("./src/screens/home/subject/header-title/styles.ts"),m=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.common,s=e.score,o=e.type,n=e.cn,r=e.jp,e=e.titleLabel;return(0,m.jsxs)(i.Flex,{style:l.styles.container,children:[(0,m.jsx)(c.Cover,{src:t,size:"音乐"===o?u.IMAGE_HEIGHT:u.IMAGE_WIDTH,height:u.IMAGE_HEIGHT,radius:a._.radiusSm,fadeDuration:0}),(0,m.jsxs)(i.Flex.Item,{style:a._.ml.sm,children:[(0,m.jsxs)(i.Text,{size:13,numberOfLines:1,children:[(0,d.cnjp)(n,r),!!e&&(0,m.jsxs)(i.Text,{size:13,type:"sub",children:[" ","· ",e]})]}),s?(0,m.jsx)(c.Stars,{style:a._.mt.xxs,value:s}):(0,m.jsx)(i.Text,{style:a._.mt.xxs,size:10,type:"sub",numberOfLines:1,children:(0,d.cnjp)(r,n)})]})]})},u.DEFAULT_PROPS);t.default=s;try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{common:{defaultValue:null,description:"",name:"common",required:!0,type:{name:"string"}},score:{defaultValue:null,description:"",name:"score",required:!0,type:{name:"string | number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'""'},{value:'"动画"'},{value:'"书籍"'},{value:'"音乐"'},{value:'"游戏"'},{value:'"三次元"'}]}},cn:{defaultValue:null,description:"",name:"cn",required:!0,type:{name:"string"}},jp:{defaultValue:null,description:"",name:"jp",required:!0,type:{name:"string"}},titleLabel:{defaultValue:null,description:"",name:"titleLabel",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/header-title/header-title.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/home/subject/header-title/header-title.tsx#headertitle"})}catch(e){}},"./src/screens/home/subject/header-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/subject/header-title/header-title.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(0,n.ob)(function(e){var t,e=e.$;return(0,i.jsx)(r.default,{common:(null==(t=e.subject.images)?void 0:t.common)||e.coverPlaceholder||e.cover,score:e.rating.score,type:e.type,cn:e.cn,jp:e.jp,titleLabel:e.titleLabel})});t.default=o;try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenSubject"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/header-title/index.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/home/subject/header-title/index.tsx#headertitle"})}catch(e){}},"./src/screens/home/subject/header-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({container:{marginLeft:-s._.sm,marginRight:s._.lg,marginBottom:s._.platforms(-2,0,4,8,4)}});t.styles=s},"./src/screens/home/subject/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),a=o(s("./src/screens/home/subject/anitabi/index.tsx")),d=o(s("./src/screens/home/subject/bg/index.tsx")),u=o(s("./src/screens/home/subject/head/index.tsx")),l=o(s("./src/screens/home/subject/lock/index.tsx")),m=o(s("./src/screens/home/subject/box/index.tsx")),p=o(s("./src/screens/home/subject/ep/index.tsx")),j=o(s("./src/screens/home/subject/smb/index.tsx")),f=o(s("./src/screens/home/subject/tags/index.tsx")),b=o(s("./src/screens/home/subject/summary/index.tsx")),h=o(s("./src/screens/home/subject/thumbs/index.tsx")),_=o(s("./src/screens/home/subject/game/index.tsx")),y=o(s("./src/screens/home/subject/info/index.tsx")),g=o(s("./src/screens/home/subject/rating/index.tsx")),x=o(s("./src/screens/home/subject/character/index.tsx")),S=o(s("./src/screens/home/subject/staff/index.tsx")),v=o(s("./src/screens/home/subject/relations/index.tsx")),T=o(s("./src/screens/home/subject/comic/index.tsx")),O=o(s("./src/screens/home/subject/catalog/index.tsx")),I=o(s("./src/screens/home/subject/like/index.tsx")),R=o(s("./src/screens/home/subject/recent/index.tsx")),w=o(s("./src/screens/home/subject/blog/index.tsx")),E=o(s("./src/screens/home/subject/topic/index.tsx")),C=o(s("./src/screens/home/subject/track-comment/index.tsx")),o=o(s("./src/screens/home/subject/comment/index.tsx")),P=s("./src/screens/home/subject/header/styles.ts"),A=s("./node_modules/react/jsx-runtime.js"),k=[l.default,m.default,[p.default,["onScrollIntoViewIfNeeded"]],j.default,f.default,b.default,h.default,y.default,_.default,g.default,x.default,S.default],D=[a.default,v.default,T.default,O.default,I.default,w.default,E.default,R.default,o.default,C.default];s=(0,i.obc)(function(s,e){var e=e.$,t=(0,P.memoStyles)(),o=e.subjectComments._loaded;return(0,A.jsxs)(A.Fragment,{children:[!c.IOS&&(0,A.jsx)(r.ErrorBoundary,{children:(0,A.jsx)(d.default,{})}),(0,A.jsx)(u.default,{}),(0,A.jsxs)(n.default,{style:t.content,children:[k.map(function(e,t){return(0,r.renderWithErrorBoundary)(e,t,s)}),e.rendered&&D.map(function(e,t){return(0,r.renderWithErrorBoundary)(e,t,s)}),!o&&(0,A.jsx)(r.Flex,{style:t.loading,justify:"center",children:(0,A.jsx)(r.Loading,{})})]})]})});t.default=s;try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/subject/header/index.tsx#header"})}catch(e){}},"./src/screens/home/subject/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{content:{zIndex:1,backgroundColor:o._.colorPlain},title:{paddingHorizontal:o._.wind,marginTop:o._.lg},loading:{height:240}}});t.memoStyles=s},"./src/screens/home/subject/icon/actions.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js");var s=(0,o.obc)(function(e,t){var e=void 0===(e=e.style)?void 0:e,s=t.$,o=t.navigation,t=[].concat((0,n.default)(s.actions.map(function(e){return e.name})),["自定义跳转管理"]);return(0,a.jsx)(i.Popover,{style:e?[d.touch,e]:d.touch,data:t,onSelect:function(e){return s.onActionsPress(e,o)},children:(0,a.jsx)(r.Flex,{style:d.btn,justify:"center",children:(0,a.jsx)(r.Iconfont,{name:"md-read-more",color:c._.colorIcon,size:25})})})}),d=(t.default=s,c._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}}))},"./src/screens/home/subject/icon/blog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showBlog?(0,d.jsx)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Reviews",from:"日志",subjectId:s.subjectId}),o.push("Reviews",{subjectId:s.subjectId,name:s.cn})},children:(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Text,{type:"sub",children:"更多"}),(0,d.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});t.default=o;try{blog.displayName="blog",blog.__docgenInfo={description:"",displayName:"blog",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/blog.tsx#blog"]={docgenInfo:blog.__docgenInfo,name:"blog",path:"src/screens/home/subject/icon/blog.tsx#blog"})}catch(e){}},"./src/screens/home/subject/icon/catalog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/app/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return(0,d.jsxs)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"SubjectCatalogs",from:"目录",subjectId:s.subjectId}),o.push("SubjectCatalogs",{subjectId:s.subjectId,name:(0,r.cnjp)(s.cn,s.jp)})},children:[(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Text,{type:"sub",children:"更多"}),(0,d.jsx)(n.Iconfont,{name:"md-navigate-next"})]}),(0,d.jsx)(n.Heatmap,{id:"条目.跳转",from:"目录"})]})});t.default=o;try{catalog.displayName="catalog",catalog.__docgenInfo={description:"",displayName:"catalog",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/catalog.tsx#catalog"]={docgenInfo:catalog.__docgenInfo,name:"catalog",path:"src/screens/home/subject/icon/catalog.tsx#catalog"})}catch(e){}},"./src/screens/home/subject/icon/character.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showCharacter?(0,d.jsx)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Characters",from:"角色",subjectId:s.subjectId}),o.push("Characters",{subjectId:s.subjectId,name:s.cn})},children:(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Text,{type:"sub",children:"更多"}),(0,d.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});t.default=o;try{character.displayName="character",character.__docgenInfo={description:"",displayName:"character",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/character.tsx#character"]={docgenInfo:character.__docgenInfo,name:"character",path:"src/screens/home/subject/icon/character.tsx#character"})}catch(e){}},"./src/screens/home/subject/icon/close.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),u=o(s("./src/constants/i18n/index.ts")),l=s("./node_modules/react/jsx-runtime.js");var o=(0,n.obc)(function(e,t){var s,o,n=t.$;return d.SHARE_MODE?null:(t=n.collection.status,s=void 0===t?{name:"未收藏"}:t,o=n.subjectFormHTML.formhash,(0,l.jsx)(i.IconTouchable,{style:m.touch,name:"md-close",color:c._.colorIcon,onPress:function(){"未收藏"===s.name?(0,a.info)("当前未收藏"):o?(0,a.confirm)("确定删除收藏?",function(){return n.doEraseCollection()}):(0,a.info)("无法操作, 请检查"+u.default.login()+"状态")},children:(0,l.jsx)(r.Heatmap,{id:"条目.删除收藏"})}))}),m=(t.default=o,c._.create({touch:{marginRight:-c._.sm,marginLeft:3}}));try{close.displayName="close",close.__docgenInfo={description:"",displayName:"close",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/close.tsx#close"]={docgenInfo:close.__docgenInfo,name:"close",path:"src/screens/home/subject/icon/close.tsx#close"})}catch(e){}},"./src/screens/home/subject/icon/comment.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");var s=(0,o.obc)(function(e,t){var s=(t=t.$).subjectComments._reverse;return(0,c.jsx)(r.IconReverse,{style:s?[a.touch,a.reverse]:a.touch,color:s?i._.colorMain:i._.colorIcon,onPress:t.toggleReverseComments,children:(0,c.jsx)(n.Heatmap,{id:"条目.吐槽箱倒序"})})}),a=(t.default=s,i._.create({touch:{marginRight:-i._.sm},reverse:{transform:[{rotateX:"180deg"}]}}));try{comment.displayName="comment",comment.__docgenInfo={description:"",displayName:"comment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/comment.tsx#comment"]={docgenInfo:comment.__docgenInfo,name:"comment",path:"src/screens/home/subject/icon/comment.tsx#comment"})}catch(e){}},"./src/screens/home/subject/icon/disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/stores/index.ts"),r=s("./src/screens/_/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");var s=(0,i.obc)(function(e,t){return t=t.$,(0,c.jsx)(r.IconTouchable,{style:a.disc,name:"md-g-translate",size:18,onPress:t.doDiscTranslate,children:(0,c.jsx)(n.Heatmap,{id:"条目.翻译曲目"})})}),a=(t.default=s,o._.create({disc:{marginLeft:o._.sm,marginRight:-o._.sm}}));try{disc.displayName="disc",disc.__docgenInfo={description:"",displayName:"disc",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/disc.tsx#disc"]={docgenInfo:disc.__docgenInfo,name:"disc",path:"src/screens/home/subject/icon/disc.tsx#disc"})}catch(e){}},"./src/screens/home/subject/icon/ep-filter.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js");var s=(0,o.obc)(function(e,t){var s=(t=t.$).state.filterEps,o=160<=t.eps.length;return(0,a.jsxs)(n.default,{children:[o&&(0,a.jsx)(i.Popover,{style:d.touch,data:t.filterEpsData,onSelect:t.updateFilterEps,children:(0,a.jsx)(r.Flex,{style:d.btn,justify:"center",children:(0,a.jsx)(r.Iconfont,{name:"md-filter-list",color:s?c._.colorMain:c._.colorIcon})})}),(0,a.jsx)(r.Heatmap,{right:-6,bottom:18,id:"条目.设置章节筛选"})]})}),d=(t.default=s,c._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}}));try{epfilter.displayName="epfilter",epfilter.__docgenInfo={description:"",displayName:"epfilter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/ep-filter.tsx#epfilter"]={docgenInfo:epfilter.__docgenInfo,name:"epfilter",path:"src/screens/home/subject/icon/ep-filter.tsx#epfilter"})}catch(e){}},"./src/screens/home/subject/icon/ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),l=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation,n=(t=s.state).epsThumbs,r=t.epsThumbsHeader,i=t.filterEps;return(0,l.jsx)(a.IconTouchable,{style:d._.ml.xs,name:"md-menu",onPress:function(){(0,u.t)("条目.跳转",{to:"Episodes",from:"章节",subjectId:s.subjectId}),o.push("Episodes",{subjectId:s.subjectId,name:s.cn||s.jp,epsThumbs:n,epsThumbsHeader:r,filterEps:i})},children:(0,l.jsx)(c.Heatmap,{right:13,id:"条目.跳转",from:"章节"})})});t.default=s;try{ep.displayName="ep",ep.__docgenInfo={description:"",displayName:"ep",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/ep.tsx#ep"]={docgenInfo:ep.__docgenInfo,name:"ep",path:"src/screens/home/subject/icon/ep.tsx#ep"})}catch(e){}},"./src/screens/home/subject/icon/folder.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),a=s("./node_modules/react/jsx-runtime.js");var s=(0,o.obc)(function(e,t){var s,o,t=t.$;return c.SHARE_MODE?null:(s=t.state.folder,o=!!t.catalogIncludes,(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.Flex,{style:o&&i._.mr.xs,children:[(0,a.jsx)(r.IconTouchable,{name:"md-folder-open",size:20,color:i._.colorIcon,onPress:t.toggleFolder,children:(0,a.jsx)(n.Heatmap,{id:"条目.管理目录"})}),o&&(0,a.jsx)(n.Text,{style:d.num,size:10,type:"icon",bold:!0,children:t.catalogIncludes})]}),(0,a.jsx)(r.FolderManageModal,{id:t.subjectId,visible:s,onClose:t.toggleFolder})]}))}),d=(t.default=s,i._.create({num:{position:"absolute",zIndex:1,right:-2,bottom:6}}));try{folder.displayName="folder",folder.__docgenInfo={description:"",displayName:"folder",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/folder.tsx#folder"]={docgenInfo:folder.__docgenInfo,name:"folder",path:"src/screens/home/subject/icon/folder.tsx#folder"})}catch(e){}},"./src/screens/home/subject/icon/game.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/subject/icon/actions.tsx")),u=s("./node_modules/react/jsx-runtime.js");var o=(0,a.obc)(function(e,t){var s=t.$,o=t.navigation;return s.titleLabel.includes("游戏")?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.default,{}),(0,u.jsxs)(i.Popover,{style:l.touch,data:[].concat((0,n.default)(s.onlineGameOrigins.map(function(e){return"object"==typeof e?e.name:e})),["源头管理"]),onSelect:function(e){"源头管理"===e?o.push("OriginSetting"):s.onlineGameSelected(e)},children:[(0,u.jsx)(r.Flex,{style:l.btn,justify:"center",children:(0,u.jsx)(r.Iconfont,{name:"md-airplay",size:18})}),(0,u.jsx)(r.Heatmap,{right:55,bottom:-7,id:"条目.搜索源"})]})]}):null}),l=(t.default=o,c._.create({touch:{marginRight:-c._.sm,borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}}));try{game.displayName="game",game.__docgenInfo={description:"",displayName:"game",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/game.tsx#game"]={docgenInfo:game.__docgenInfo,name:"game",path:"src/screens/home/subject/icon/game.tsx#game"})}catch(e){}},"./src/screens/home/subject/icon/hd.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation;return s.isLimit||!s.hd?null:(0,i.jsx)(n.IconTouchable,{style:r._.mr._sm,name:"md-hd",onPress:function(){o.push("HD",{cn:s.cn,subjectId:s.hd})}})});t.default=s;try{hd.displayName="hd",hd.__docgenInfo={description:"",displayName:"hd",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/hd.tsx#hd"]={docgenInfo:hd.__docgenInfo,name:"hd",path:"src/screens/home/subject/icon/hd.tsx#hd"})}catch(e){}},"./src/screens/home/subject/icon/hidden.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/ui/index.ts"),d=s("./node_modules/react/jsx-runtime.js");var s=(0,o.obc)(function(e,t){var s=e.name,o=e.value,n=t.$;return s&&o?(0,d.jsx)(i.IconTouchable,{style:u.touch,name:"md-close",color:c._.colorIcon,onPress:function(){(0,a.confirm)("确定永久隐藏栏目["+s+"]?\n隐藏后可到右上角菜单里重置",function(){n.hiddenBlock(o),(0,a.info)("已隐藏")})},children:(0,d.jsx)(r.Heatmap,{id:"条目.删除收藏"})}):null}),u=(t.default=s,c._.create({touch:{paddingVertical:0,marginRight:-c._.sm,marginLeft:4}}))},"./src/screens/home/subject/icon/manga.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s;return(t=t.$).isLimit||null==(s=t.source)||!s.mangaId?null:(0,a.jsxs)(n.Touchable,{style:c.default.icon,onPress:t.toManhuadb,children:[(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Iconfont,{name:"md-visibility"}),(0,a.jsx)(n.Text,{style:r._.ml.xs,size:13,type:"sub",children:"漫画"})]}),(0,a.jsx)(n.Heatmap,{id:"条目.阅读漫画"})]})});t.default=o;try{manga.displayName="manga",manga.__docgenInfo={description:"",displayName:"manga",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/manga.tsx#manga"]={docgenInfo:manga.__docgenInfo,name:"manga",path:"src/screens/home/subject/icon/manga.tsx#manga"})}catch(e){}},"./src/screens/home/subject/icon/online.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),u=o(s("./src/screens/home/subject/icon/actions.tsx")),l=s("./node_modules/react/jsx-runtime.js"),m="导出放送日程ICS";var o=(0,a.obc)(function(e,t){var s=t.$,o=t.navigation,t=[].concat((0,n.default)(s.onlineOrigins),["源头管理"]);return s.actions.length||d.STORYBOOK||t.push("自定义指令"),c.systemStore.setting.exportICS&&t.push(m),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.Popover,{style:p.touch,data:t.map(function(e){return"object"==typeof e?e.name:e}),onSelect:function(e){"源头管理"===e?o.push("OriginSetting"):"自定义指令"===e?o.push("Actions",{subjectId:s.subjectId,name:s.cn||s.jp}):e===m?s.doExportCalenderEventICS():s.onlinePlaySelected(e)},children:[(0,l.jsx)(r.Flex,{style:p.btn,justify:"center",children:(0,l.jsx)(r.Iconfont,{name:"md-airplay",size:18})}),(0,l.jsx)(r.Heatmap,{right:55,bottom:-7,id:"条目.搜索源"})]}),!!s.actions.length&&(0,l.jsx)(u.default,{style:p.actions})]})}),p=(t.default=o,c._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{width:38,height:38},actions:{marginRight:4,marginLeft:2}}));try{online.displayName="online",online.__docgenInfo={description:"",displayName:"online",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/online.tsx#online"]={docgenInfo:online.__docgenInfo,name:"online",path:"src/screens/home/subject/icon/online.tsx#online"})}catch(e){}},"./src/screens/home/subject/icon/preview.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/subject/icon/styles.ts")),u=s("./node_modules/react/jsx-runtime.js");o=(0,n.obc)(function(e,t){var s=e.data,o=e.headers,n=t.$,r=t.navigation;return c.systemStore.setting.showThumbs?(0,u.jsx)(i.Touchable,{style:d.default.touch,onPress:function(){(0,a.t)("条目.跳转",{to:"Preview",from:"预览",subjectId:n.subjectId}),r.push("Preview",{subjectId:n.subjectId,cn:n.cn,jp:n.jp,data:s,headers:o})},children:(0,u.jsxs)(i.Flex,{children:[(0,u.jsx)(i.Text,{type:"sub",children:"更多"}),(0,u.jsx)(i.Iconfont,{name:"md-navigate-next"})]})}):null});t.default=o},"./src/screens/home/subject/icon/ps.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){return(t=t.$).isPS?(0,i.jsxs)(n.Touchable,{style:r._.mr._sm,onPress:t.toPSNINE,children:[(0,i.jsxs)(n.Flex,{children:[(0,i.jsx)(n.Text,{style:r._.ml.xs,size:13,type:"sub",children:"奖杯"}),(0,i.jsx)(n.Iconfont,{style:r._.ml.xs,name:"md-open-in-new",size:17})]}),(0,i.jsx)(n.Heatmap,{id:"条目.查看奖杯"})]}):null});t.default=s;try{ps.displayName="ps",ps.__docgenInfo={description:"",displayName:"ps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/ps.tsx#ps"]={docgenInfo:ps.__docgenInfo,name:"ps",path:"src/screens/home/subject/icon/ps.tsx#ps"})}catch(e){}},"./src/screens/home/subject/icon/reverse.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");var s=(0,o.obc)(function(e,t){var s=(t=t.$).state.epsReverse;return(0,c.jsx)(r.IconReverse,{style:s?[a.touch,a.reverse]:a.touch,color:s?i._.colorMain:i._.colorIcon,onPress:t.toggleReverseEps,children:(0,c.jsx)(n.Heatmap,{right:-5,id:"条目.章节倒序"})})}),a=(t.default=s,i._.create({touch:{marginRight:-i._.sm,marginLeft:4},reverse:{transform:[{rotateX:"180deg"}]}}));try{reverse.displayName="reverse",reverse.__docgenInfo={description:"",displayName:"reverse",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/reverse.tsx#reverse"]={docgenInfo:reverse.__docgenInfo,name:"reverse",path:"src/screens/home/subject/icon/reverse.tsx#reverse"})}catch(e){}},"./src/screens/home/subject/icon/search-disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),o=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js");var s=(0,c.obc)(function(e,t){var s=t.$,o=t.navigation;return(0,a.jsx)(i.Popover,{style:d.touch,menuStyle:d.menuStyle,data:[].concat((0,n.default)(s.onlineDiscOrigins.map(function(e){return"object"==typeof e?e.name:e})),["源头管理"]),onSelect:function(e){"源头管理"===e?o.push("OriginSetting"):s.onlineDiscSelected(e)},children:(0,a.jsx)(r.Flex,{style:d.btn,justify:"center",children:(0,a.jsx)(r.Iconfont,{name:"md-airplay",size:18})})})}),d=(t.default=s,o._.create({touch:{borderRadius:20,overflow:"hidden"},menuStyle:{width:o._.device(240,320)},btn:{paddingVertical:2,paddingHorizontal:4}}));try{searchdisc.displayName="searchdisc",searchdisc.__docgenInfo={description:"",displayName:"searchdisc",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/search-disc.tsx#searchdisc"]={docgenInfo:searchdisc.__docgenInfo,name:"searchdisc",path:"src/screens/home/subject/icon/search-disc.tsx#searchdisc"})}catch(e){}},"./src/screens/home/subject/icon/search.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),o=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js");var s=(0,c.obc)(function(e,t){var s=t.$,o=t.navigation;return s.isLimit?null:(0,a.jsx)(i.Popover,{style:d.touch,menuStyle:d.menuStyle,data:[].concat((0,n.default)(s.onlineComicOrigins.map(function(e){return"object"==typeof e?e.name:e})),["源头管理"]),onSelect:function(e){"源头管理"===e?o.push("OriginSetting"):s.onlineComicSelected(e)},children:(0,a.jsx)(r.Flex,{style:d.btn,justify:"center",children:(0,a.jsx)(r.Iconfont,{name:"md-airplay",size:18})})})}),d=(t.default=s,o._.create({touch:{borderRadius:20,overflow:"hidden"},menuStyle:{width:o._.device(240,320)},btn:{paddingVertical:2,paddingHorizontal:4}}));try{search.displayName="search",search.__docgenInfo={description:"",displayName:"search",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/search.tsx#search"]={docgenInfo:search.__docgenInfo,name:"search",path:"src/screens/home/subject/icon/search.tsx#search"})}catch(e){}},"./src/screens/home/subject/icon/share.tsx":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),a=(o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),d=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),m=o(s("./src/utils/thirdParty/axios.js")),p=s("./src/constants/index.ts"),j=s("./node_modules/react/jsx-runtime.js");o=(0,n.ob)(function(e){var n=e.$,r=e.navigation,e=e.color;return p.STORYBOOK?null:(0,j.jsx)(a.IconTouchable,{style:d._.mr.xs,name:"md-ios-share",color:e,size:19,onPress:(0,c.default)(i.mark(function e(){var t,s,o;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return t=n.subject.images,(s=(0,p.CDN_OSS_SUBJECT)((0,u.getCoverMedium)(null==t?void 0:t.common))).includes(p.HOST_CDN)||(s=(0,u.getCoverLarge)(null==t?void 0:t.common)),t=(0,u.loading)("下载封面中..."),m.default.defaults.withCredentials=!1,e.next=9,(0,m.default)({method:"get",url:s.replace("http://","https://"),responseType:"arraybuffer"});case 9:s=e.sent,o=s.request,t(),r.push("Share",{_subjectId:n.subjectId,_type:n.type,_url:p.HOST+"/subject/"+n.subjectId,_cover:"data:image/jpg;base64,"+o._response,_title:(0,u.cnjp)(n.cn,n.jp),_content:n.summary.replace(/\r\n\r\n/g,"\r\n"),_detail:n.tags.filter(function(e,t){return t<=4}).map(function(e){return e.name}).join(" · ")}),(0,l.t)("条目.拼图分享",{subjectId:n.subjectId});case 14:case"end":return e.stop()}},e)}))})});t.default=o;try{share.displayName="share",share.__docgenInfo={description:"",displayName:"share",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}},$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenSubject"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/share.tsx#share"]={docgenInfo:share.__docgenInfo,name:"share",path:"src/screens/home/subject/icon/share.tsx#share"})}catch(e){}},"./src/screens/home/subject/icon/smb.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s=t.navigation;return r.systemStore.setting.showSMB?(0,d.jsx)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"SMB",from:"本地"}),s.push("Smb")},children:(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Text,{type:"sub",children:"管理"}),(0,d.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});t.default=o;try{smb.displayName="smb",smb.__docgenInfo={description:"",displayName:"smb",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/smb.tsx#smb"]={docgenInfo:smb.__docgenInfo,name:"smb",path:"src/screens/home/subject/icon/smb.tsx#smb"})}catch(e){}},"./src/screens/home/subject/icon/staff.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showStaff?(0,d.jsx)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Persons",from:"制作人员",subjectId:s.subjectId}),o.push("Persons",{subjectId:s.subjectId,name:s.cn})},children:(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Text,{type:"sub",children:"更多"}),(0,d.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});t.default=o;try{staff.displayName="staff",staff.__docgenInfo={description:"",displayName:"staff",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/staff.tsx#staff"]={docgenInfo:staff.__docgenInfo,name:"staff",path:"src/screens/home/subject/icon/staff.tsx#staff"})}catch(e){}},"./src/screens/home/subject/icon/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s=s("./src/stores/index.ts"),s=s._.create({touch:{paddingLeft:s._.xs,marginRight:-s._.sm,borderRadius:s._.radiusSm,overflow:"hidden"},icon:{padding:s._.sm,marginRight:-s._.sm,marginLeft:s._.xs,borderRadius:s._.radiusSm,overflow:"hidden"}});t.default=s},"./src/screens/home/subject/icon/topic.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showTopic?(0,d.jsx)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Board",from:"帖子",subjectId:s.subjectId}),o.push("Board",{subjectId:s.subjectId,name:s.cn})},children:(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Text,{type:"sub",children:"更多"}),(0,d.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});t.default=o;try{topic.displayName="topic",topic.__docgenInfo={description:"",displayName:"topic",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/topic.tsx#topic"]={docgenInfo:topic.__docgenInfo,name:"topic",path:"src/screens/home/subject/icon/topic.tsx#topic"})}catch(e){}},"./src/screens/home/subject/icon/translate.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var t=t.$,s=i.systemStore.setting.showSummary,o=t.state.translateResult;return!s||o.length?null:(0,c.jsx)(r.IconTouchable,{style:i._.mr._sm,name:"md-g-translate",size:18,onPress:t.doTranslate,children:(0,c.jsx)(n.Heatmap,{id:"条目.翻译简介"})})});t.default=s;try{translate.displayName="translate",translate.__docgenInfo={description:"",displayName:"translate",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/translate.tsx#translate"]={docgenInfo:translate.__docgenInfo,name:"translate",path:"src/screens/home/subject/icon/translate.tsx#translate"})}catch(e){}},"./src/screens/home/subject/icon/wenku.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){return(t=t.$).isLimit||!t.source.wenkuId?null:(0,a.jsxs)(n.Touchable,{style:c.default.icon,onPress:t.toWenku8,children:[(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Iconfont,{name:"md-visibility"}),(0,a.jsx)(n.Text,{style:r._.ml.xs,size:13,type:"sub",children:"小说"})]}),(0,a.jsx)(n.Heatmap,{id:"条目.阅读轻小说"})]})});t.default=o;try{wenku.displayName="wenku",wenku.__docgenInfo={description:"",displayName:"wenku",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/wenku.tsx#wenku"]={docgenInfo:wenku.__docgenInfo,name:"wenku",path:"src/screens/home/subject/icon/wenku.tsx#wenku"})}catch(e){}},"./src/screens/home/subject/icon/wiki.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");o=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showInfo?(0,d.jsx)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"SubjectWiki",from:"详情",subjectId:s.subjectId}),o.push("SubjectWiki",{subjectId:s.subjectId,name:s.cn})},children:(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Text,{type:"sub",children:"修订"}),(0,d.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});t.default=o;try{wiki.displayName="wiki",wiki.__docgenInfo={description:"",displayName:"wiki",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/wiki.tsx#wiki"]={docgenInfo:wiki.__docgenInfo,name:"wiki",path:"src/screens/home/subject/icon/wiki.tsx#wiki"})}catch(e){}},"./src/screens/home/subject/index.tsx":(e,t,s)=>{var m=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),p=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/react/index.js")),f=s("./src/components/index.ts"),b=s("./src/components/header/utils.tsx"),n=s("./src/utils/decorators/index.ts"),h=s("./src/utils/hooks/index.ts"),_=s("./src/utils/fetch/index.ts"),y=s("./src/constants/index.ts"),g=o(s("./src/screens/home/subject/page-header/index.tsx")),x=o(s("./src/screens/home/subject/bg/index.tsx")),S=o(s("./src/screens/home/subject/list/index.tsx")),v=o(s("./src/screens/home/subject/modal/index.tsx")),o=o(s("./src/screens/home/subject/store/index.ts")),T=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}s=(0,n.ic)(o.default,function(e,t){var s=t.$,o=t.navigation,n=(0,h.useIsFocusedRef)(),r=((0,h.useRunAfter)((0,p.default)(m.mark(function e(){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout(function(){n.current&&s.setRendered()},480),e.next=3,s.init();case 3:(0,_.t)("条目.查看",{subjectId:s.subjectId,type:s.type});case 4:case"end":return e.stop()}},e)}))),(0,h.useMount)(function(){return function(){setTimeout(function(){s.unRendered()},480)}}),(0,j.useRef)(void 0)),i=(0,j.useCallback)(function(e){r.current=e},[]),t=(0,b.useOnScroll)(),c=t.yRef,a=t.fixed,d=t.onScroll,u=(0,j.useCallback)(function(e){s.onScroll(e),d(e)},[d]),l=(0,j.useCallback)(function(e){try{var t;"function"==typeof(null==r||null==(t=r.current)?void 0:t.scrollToOffset)&&r.current.scrollToOffset({animated:!0,offset:e+c.current})}catch(e){}},[c]);return(0,h.useObserver)(function(){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(g.default,{fixed:a,index:o.getState().index}),(0,T.jsxs)(f.Page,{children:[y.IOS&&(0,T.jsx)(x.default,{}),(0,T.jsx)(S.default,{forwardRef:i,onScroll:u,onScrollIntoViewIfNeeded:l}),(0,T.jsx)(v.default,{})]}),(0,T.jsx)(f.Heatmap,{id:"条目",screen:"Subject"})]})})});t.default=s;try{subject.displayName="subject",subject.__docgenInfo={description:"",displayName:"subject",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/index.tsx#subject"]={docgenInfo:subject.__docgenInfo,name:"subject",path:"src/screens/home/subject/index.tsx#subject"})}catch(e){}},"./src/screens/home/subject/info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,showInfo:!0,info:"",onSwitchBlock:function(){}}},"./src/screens/home/subject/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/info/info.tsx")),c=s("./src/screens/home/subject/info/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s=t.$,t=t.navigation,o=n.systemStore.setting.showInfo;return-1===o?null:(0,a.jsx)(i.default,{navigation:t,styles:(0,c.memoStyles)(),subjectId:s.subjectId,showInfo:o,info:s.info,onSwitchBlock:s.onSwitchBlock})});t.default=o;try{info.displayName="info",info.__docgenInfo={description:"",displayName:"info",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/info/index.tsx#info"]={docgenInfo:info.__docgenInfo,name:"info",path:"src/screens/home/subject/info/index.tsx#info"})}catch(e){}},"./src/screens/home/subject/info/info.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.slice.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),h=o(s("./src/screens/home/subject/icon/wiki.tsx")),_=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/info/ds.ts"),y=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}s=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.subjectId,n=e.showInfo,r=e.info,i=e.onSwitchBlock,e=(0,l.useState)(!1),e=(0,u.default)(e,2),c=e[0],a=e[1],e=(0,l.useCallback)(function(){a(!0)},[a]),d=r;try{d=c?decodeURIComponent(d):decodeURIComponent(d).slice(0,440)}catch(e){console.error("home/subject/info.js","Info",e)}return(0,y.jsxs)(j.InView,{style:n?s.container:s.hide,children:[(0,y.jsx)(j.SectionTitle,{style:f._.container.wind,right:n?(0,y.jsx)(h.default,{}):(0,y.jsx)(_.default,{name:"详情",value:"showInfo"}),icon:!n&&"md-navigate-next",onPress:function(){return i("showInfo")},children:"详情"}),n&&(0,y.jsxs)(m.default,{children:[!!r&&(0,y.jsx)(p.Expand,{ratio:.88,checkLayout:!1,onExpand:e,children:(0,y.jsx)(p.RenderHtml,{style:s.info,html:d,onLinkPress:function(e){return(0,b.appNavigate)(e,t,{},{id:"条目.跳转",data:{from:"详情",subjectId:o}})}})}),(0,y.jsx)(p.Heatmap,{id:"条目.跳转",from:"详情"})]})]})},o.DEFAULT_PROPS);t.default=s;try{info.displayName="info",info.__docgenInfo={description:"",displayName:"info",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; hide: { marginTop: number; marginBottom: number; }; info: { paddingVertical: number; paddingHorizontal: number; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},showInfo:{defaultValue:null,description:"",name:"showInfo",required:!0,type:{name:"LayoutValue"}},info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"string"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/info/info.tsx#info"]={docgenInfo:info.__docgenInfo,name:"info",path:"src/screens/home/subject/info/info.tsx#info"})}catch(e){}},"./src/screens/home/subject/info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:210,marginTop:o._.lg},hide:{marginTop:o._.lg,marginBottom:-o._.sm},info:{paddingVertical:o._.sm,paddingHorizontal:o._.wind}}});t.memoStyles=s},"./src/screens/home/subject/like/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=void 0;t.COVER_WIDTH=80,t.COVER_HEIGHT=112;t.DEFAULT_PROPS={navigation:{},showLike:!0,subjectId:0,like:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/like/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/like/like.tsx")),c=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s=t.$,t=t.navigation,o=n.systemStore.setting.showLike;return-1!==o&&s.like.length?(0,c.jsx)(i.default,{navigation:t,showLike:o,subjectId:s.subjectId,like:s.like,onSwitchBlock:s.onSwitchBlock}):null});t.default=o;try{like.displayName="like",like.__docgenInfo={description:"",displayName:"like",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/like/index.tsx#like"]={docgenInfo:like.__docgenInfo,name:"like",path:"src/screens/home/subject/like/index.tsx#like"})}catch(e){}},"./src/screens/home/subject/like/like.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),l=o(s("./src/screens/home/subject/icon/hidden.tsx")),m=s("./src/screens/home/subject/like/ds.ts"),p=s("./src/screens/home/subject/like/styles.ts"),j=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var n=e.navigation,t=e.showLike,r=e.subjectId,s=e.like,o=e.onSwitchBlock;return(0,j.jsxs)(c.InView,{style:(0,d.stl)(p.styles.container,!t&&a._.short),children:[(0,j.jsx)(c.SectionTitle,{style:a._.container.wind,right:!t&&(0,j.jsx)(l.default,{name:"猜你喜欢",value:"showLike"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showLike")},children:"猜你喜欢"}),t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.HorizontalList,{style:a._.mt.sm,data:s,width:m.COVER_WIDTH,height:m.COVER_HEIGHT,initialRenderNums:a._.device(Math.floor(a._.window.contentWidth/m.COVER_WIDTH)+1,6),onPress:function(e,t){var s=e.id,o=e.name,e=e.image;(0,u.t)("条目.跳转",{to:"Subject",from:"猜你喜欢",subjectId:r}),n.push("Subject",{subjectId:s,_jp:o,_image:e,_type:t})}}),(0,j.jsx)(i.Heatmap,{id:"条目.跳转",from:"猜你喜欢"})]})]})},m.DEFAULT_PROPS);t.default=o;try{like.displayName="like",like.__docgenInfo={description:"",displayName:"like",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showLike:{defaultValue:null,description:"",name:"showLike",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},like:{defaultValue:null,description:"",name:"like",required:!0,type:{name:"DeepPartial<{ id: SubjectId; name: string; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; }>[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/like/like.tsx#like"]={docgenInfo:like.__docgenInfo,name:"like",path:"src/screens/home/subject/like/like.tsx#like"})}catch(e){}},"./src/screens/home/subject/like/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({container:{minHeight:174,marginTop:s._.lg}});t.styles=s},"./src/screens/home/subject/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),c=s("./src/utils/decorators/index.ts"),a=o(s("./src/screens/home/subject/header/index.tsx")),d=s("./src/screens/home/subject/list/utils.tsx"),u=s("./node_modules/react/jsx-runtime.js");o=(0,c.obc)(function(e,t){var s=e.forwardRef,o=e.onScroll,e=e.onScrollIntoViewIfNeeded,t=t.$;return(0,u.jsx)(n.ListView,{ref:s,style:r._.container.flex,contentContainerStyle:r._.container.bottom,keyExtractor:i.keyExtractor,data:t.subjectComments,lazy:1,progressViewOffset:r._.ios(r._.statusBarHeight,0),scrollEventThrottle:16,scrollToTop:!0,keyboardDismissMode:"on-drag",footerEmptyDataComponent:t.footerEmptyDataComponent,refreshControlProps:d.REFRESH_CONTROL_PROPS,ListHeaderComponent:(0,u.jsx)(a.default,{onScrollIntoViewIfNeeded:e}),renderItem:d.renderItem,onScroll:o,onHeaderRefresh:t.onHeaderRefresh,onFooterRefresh:t.fetchSubjectComments})});t.default=o},"./src/screens/home/subject/list/item.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),l=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=s("./node_modules/react/jsx-runtime.js"),j={"动画":["复制评论","特别关注TA的动画评论","屏蔽用户"],"书籍":["复制评论","特别关注TA的书籍评论","屏蔽用户"],"游戏":["复制评论","特别关注TA的游戏评论","屏蔽用户"],"音乐":["复制评论","特别关注TA的音乐评论","屏蔽用户"],"三次元":["复制评论","特别关注TA的三次元评论","屏蔽用户"]};s=(0,o.obc)(function(e,t){var s,o=e.index,n=e.time,r=e.avatar,i=e.userId,c=e.userName,a=e.star,e=e.comment,d=t.$,t=t.navigation;return!d.rendered||(s=l.rakuenStore.setting.blockUserIds,(0,m.getIsBlockUser)(s,c,i,"Subject|"+d.subjectId))?null:(s={id:"条目.跳转",data:{from:"吐槽",subjectId:d.subjectId}},(0,p.jsx)(u.InView,{y:1.5*l._.window.height+100*o,children:(0,p.jsx)(u.ItemComment,{navigation:t,event:s,time:n,avatar:r,userId:i,userName:c,star:d.hideScore?void 0:a,comment:e,popoverData:j[d.type],onSelect:d.onTrackUsersCollection})}))});t.default=s},"./src/screens/home/subject/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_CONTROL_PROPS=void 0,t.renderItem=c,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=o(s("./src/screens/home/subject/list/item.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o={tintColor:n._.__colorPlain__,titleColor:n._.__colorPlain__};function c(e){var t=e.item,e=e.index;return(0,i.jsx)(r.default,{index:e,time:t.time,avatar:t.avatar,userId:t.userId,userName:t.userName,star:t.star,comment:t.comment})}t.REFRESH_CONTROL_PROPS=o;try{c.displayName="renderItem",c.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/list/utils.tsx#renderItem"]={docgenInfo:c.__docgenInfo,name:"renderItem",path:"src/screens/home/subject/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/home/subject/lock/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/lock/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){return t.$.lock?(t=(0,i.memoStyles)(),(0,c.jsxs)(n.Flex,{style:t.container,children:[(0,c.jsx)(n.Mesume,{index:2,size:72}),(0,c.jsxs)(n.Flex.Item,{children:[(0,c.jsx)(n.Text,{type:"main",size:16,bold:!0,children:"条目已锁定"}),(0,c.jsx)(n.Text,{style:r._.mt.sm,type:"sub",children:"不符合收录原则，条目及相关收藏、讨论、关联等内容将会随时被移除"})]})]})):null});t.default=s;try{lock.displayName="lock",lock.__docgenInfo={description:"",displayName:"lock",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/lock/index.tsx#lock"]={docgenInfo:lock.__docgenInfo,name:"lock",path:"src/screens/home/subject/lock/index.tsx#lock"})}catch(e){}},"./src/screens/home/subject/lock/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{paddingVertical:o._.md,paddingRight:o._.wind,paddingLeft:o._.xs,margin:o._.wind,borderWidth:1,borderColor:o._.colorMain,borderRadius:o._.radiusSm}}});t.memoStyles=s},"./src/screens/home/subject/modal/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0,t.DEFAULT_PROPS={visible:!1,disabled:!1,subjectId:0,name:"",nameCn:"",action:"看",onSubmit:function(){},onClose:function(){}}},"./src/screens/home/subject/modal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/subject/modal/modal.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s,o,t=t.$;return t.isLogin?(s=(o=t.state).visible,o=o.disabled,(0,i.jsx)(r.default,{visible:s,disabled:o,subjectId:t.params.subjectId,name:t.subject.name,nameCn:t.subject.name_cn,action:t.action,onSubmit:t.doUpdateCollection,onClose:t.closeManageModal})):null});t.default=o;try{modal.displayName="modal",modal.__docgenInfo={description:"",displayName:"modal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/modal/index.tsx#modal"]={docgenInfo:modal.__docgenInfo,name:"modal",path:"src/screens/home/subject/modal/index.tsx#modal"})}catch(e){}},"./src/screens/home/subject/modal/modal.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/subject/modal/ds.ts"),d=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.visible,s=e.disabled,o=e.subjectId,n=e.name,r=e.nameCn,i=e.action,c=e.onSubmit,e=e.onClose;return(0,d.jsx)(a.ManageModal,{visible:t,disabled:s,subjectId:o,title:r||n,desc:n,action:i,onSubmit:c,onClose:e})},n.DEFAULT_PROPS);t.default=s;try{modal.displayName="modal",modal.__docgenInfo={description:"",displayName:"modal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},nameCn:{defaultValue:null,description:"",name:"nameCn",required:!0,type:{name:"string"}},action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"enum",value:[{value:'"看"'},{value:'"玩"'},{value:'"听"'},{value:'"读"'}]}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:'(values: { subjectId: SubjectId; status?: "" | "dropped" | "on_hold" | "wishes" | "collections" | "doings"; tags?: string; comment?: string; rating?: string | number; privacy?: any; noConsole?: boolean; }) => Promise<...>'}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/modal/modal.tsx#modal"]={docgenInfo:modal.__docgenInfo,name:"modal",path:"src/screens/home/subject/modal/modal.tsx#modal"})}catch(e){}},"./src/screens/home/subject/page-header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/web.timers.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),m=s("./src/constants/index.ts"),p=o(s("./src/screens/home/subject/header-title/index.tsx")),j=o(s("./src/screens/home/subject/icon/share.tsx")),f=s("./node_modules/react/jsx-runtime.js");o=(0,n.obc)(function(e,t){var s=e.fixed,e=e.index,o=t.$,n=t.navigation,r=d._.isDark||!s?"#fff":"#000",i=["浏览器打开 · "+o.subjectId,"复制链接","复制分享","重置布局"];return m.STORYBOOK&&i.push("获取 APP"),(0,f.jsx)(c.Header,{mode:"transition",statusBarEventsType:"Subject",fixed:s,title:"条目",hm:[o.url,"Subject"],headerLeft:!s&&4<=e&&(0,f.jsx)(a.IconTouchable,{name:"icon-home",size:19,color:d._.__colorPlain__,onPress:function(){n.popToTop()}}),headerTitle:(0,f.jsx)(p.default,{$:o}),headerRight:function(){return(0,f.jsxs)(c.Flex,{children:[(0,f.jsx)(j.default,{$:o,navigation:n,color:r}),(0,f.jsx)(c.Header.Popover,{data:i,color:r,onSelect:function(e){(0,l.t)("条目.右上角菜单",{subjectId:o.subjectId,key:e}),setTimeout(function(){switch(e){case"复制链接":(0,u.copy)(o.url,"已复制链接");break;case"复制分享":(0,u.copy)("【链接】"+(0,u.cnjp)(o.cn,o.jp)+" | Bangumi番组计划\n"+o.url,"已复制分享文案");break;case"重置布局":d.systemStore.resetSubjectLayout(),(0,u.info)("已重置");break;case"获取 APP":(0,u.open)(m.URL_ABOUT);break;default:(0,u.open)(o.url)}},0)},children:(0,f.jsx)(c.Heatmap,{id:"条目.右上角菜单"})})]})}})});t.default=o},"./src/screens/home/subject/rate-segment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/rate-segment/styles.ts"),c=s("./node_modules/react/jsx-runtime.js"),a=["全部","9-10","7-8","4-6","1-3"];s=(0,o.obc)(function(e,t){var s=(t=t.$).state.filterScores;return(0,c.jsxs)(n.default,{children:[(0,c.jsx)(r.SegmentedControl,{style:i.styles.segment,size:11,values:a,selectedIndex:s.length?a.findIndex(function(e){return e===s.join("-")}):0,onValueChange:t.filterScores}),(0,c.jsx)(r.Heatmap,{right:30,bottom:-4,id:"条目.筛选分数"})]})});t.default=s;try{ratesegment.displayName="ratesegment",ratesegment.__docgenInfo={description:"",displayName:"ratesegment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/rate-segment/index.tsx#ratesegment"]={docgenInfo:ratesegment.__docgenInfo,name:"ratesegment",path:"src/screens/home/subject/rate-segment/index.tsx#ratesegment"})}catch(e){}},"./src/screens/home/subject/rate-segment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({segment:{width:s._.r(216),height:s._.r(28),marginRight:s._.xs}});t.styles=s},"./src/screens/home/subject/rating/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={styles:{},hideScore:!1,showRating:!0}},"./src/screens/home/subject/rating/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/rating/rating.tsx")),c=s("./src/screens/home/subject/rating/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,r.ob)(function(){var e=n.systemStore.setting.showRating;return-1===e?null:(0,a.jsx)(i.default,{styles:(0,c.memoStyles)(),showRating:e,hideScore:n.systemStore.setting.hideScore})});t.default=o},"./src/screens/home/subject/rating/rating.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=j(t);if(t&&t.has(e))return t.get(e);var s,o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}o.default=e,t&&t.set(e,o);return o}(s("./node_modules/react/index.js")),c=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),a=s("./src/components/index.ts"),d=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),u=o(s("./src/screens/home/subject/chart/index.tsx")),l=o(s("./src/screens/home/subject/icon/hidden.tsx")),m=o(s("./src/screens/home/subject/rating/title.tsx")),o=s("./src/screens/home/subject/rating/ds.ts"),p=s("./node_modules/react/jsx-runtime.js");function j(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(j=function(e){return e?s:t})(e))}s=(0,n.memo)(function(e){var t=e.styles,s=e.hideScore,e=e.showRating,s=(0,i.useState)(!s),s=(0,r.default)(s,2),o=s[0],n=s[1];return(0,p.jsxs)(d.InView,{style:e?t.container:t.hide,children:[(0,p.jsxs)(a.Flex,{children:[(0,p.jsx)(a.Flex.Item,{children:(0,p.jsx)(m.default,{showScore:o})}),!e&&(0,p.jsx)(l.default,{name:"评分",value:"showRating"})]}),e&&(0,p.jsx)(c.default,{children:o?(0,p.jsx)(u.default,{}):(0,p.jsx)(a.Touchable,{onPress:function(){return n(!0)},children:(0,p.jsx)(a.Flex,{style:t.hideScore,justify:"center",children:(0,p.jsx)(a.Text,{children:"评分已隐藏, 点击显示"})})})})]})},o.DEFAULT_PROPS);t.default=s;try{rating.displayName="rating",rating.__docgenInfo={description:"",displayName:"rating",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingHorizontal: number; marginTop: number; }; hide: { paddingHorizontal: number; marginTop: number; marginBottom: number; }; hideScore: { height: number; }; }"}},hideScore:{defaultValue:null,description:"",name:"hideScore",required:!0,type:{name:"boolean"}},showRating:{defaultValue:null,description:"",name:"showRating",required:!0,type:{name:"LayoutValue"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/rating/rating.tsx#rating"]={docgenInfo:rating.__docgenInfo,name:"rating",path:"src/screens/home/subject/rating/rating.tsx#rating"})}catch(e){}},"./src/screens/home/subject/rating/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:200,paddingHorizontal:o._.wind,marginTop:o._.lg},hide:{paddingHorizontal:o._.wind,marginTop:o._.lg,marginBottom:-o._.sm},hideScore:{height:o._.r(144)}}});t.memoStyles=s},"./src/screens/home/subject/rating/title.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),a=s("./src/screens/_/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),l=s("./node_modules/react/jsx-runtime.js");var s=(0,o.obc)(function(e,t){var e=e.showScore,s=t.$,o=t.navigation,t=c.systemStore.setting.showRating,n=s.subject.rank,r="动画"===s.type;return(0,l.jsxs)(a.SectionTitle,{left:t&&(0,l.jsx)(a.Rank,{style:m.rank,value:n||(null==(n=s.subjectFromOSS)||null==(n=n.rating)?void 0:n.rank)||"-",size:13}),right:t&&(0,l.jsxs)(i.Flex,{children:[r&&(0,l.jsxs)(i.Touchable,{style:m.netabare,onPress:function(){(0,u.t)("条目.跳转",{to:"Netabare",from:"评分分布",subjectId:s.subjectId}),o.push("WebBrowser",{title:(0,d.cnjp)(s.cn,s.jp)+"的趋势",url:"https://netaba.re/subject/"+s.subjectId})},children:[(0,l.jsxs)(i.Flex,{children:[(0,l.jsx)(i.Text,{style:c._.ml.sm,type:"sub",children:"趋势"}),(0,l.jsx)(i.Iconfont,{style:c._.ml.xs,name:"md-open-in-new",size:17})]}),(0,l.jsx)(i.Heatmap,{id:"条目.跳转",from:"评分分布",to:"Netabare"})]}),(0,l.jsxs)(i.Touchable,{style:m.rate,onPress:function(){(0,u.t)("条目.跳转",{to:"Stats",from:"评分分布",subjectId:s.subjectId}),o.push("WebBrowser",{title:(0,d.cnjp)(s.cn,s.jp)+"的透视",url:"https://bgm.tv/subject/"+s.subjectId+"/stats"})},children:[(0,l.jsxs)(i.Flex,{children:[(0,l.jsx)(i.Text,{style:c._.ml.sm,type:"sub",children:"透视"}),(0,l.jsx)(i.Iconfont,{style:c._.ml.xs,name:"md-open-in-new",size:17})]}),(0,l.jsx)(i.Heatmap,{id:"条目.跳转",from:"评分分布",to:"Stats"})]})]}),icon:!t&&"md-navigate-next",onPress:function(){return s.onSwitchBlock("showRating")},children:["评分"," ",e&&(0,l.jsx)(i.Text,{type:"warning",size:18,lineHeight:18,bold:!0,children:s.rating.score})]})}),m=(t.default=s,c._.create({netabare:{borderRadius:c._.radiusSm,overflow:"hidden"},rate:{paddingLeft:c._.sm,marginRight:-c._.xs,borderRadius:c._.radiusSm,overflow:"hidden"},rank:{minWidth:c._.r(44),marginLeft:c._.xs}}))},"./src/screens/home/subject/recent/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},subjectId:0,showRecent:!0,who:[],hideScore:!1,onSwitchBlock:function(){}}},"./src/screens/home/subject/recent/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),c=o(s("./src/screens/home/subject/recent/recent.tsx")),a=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s,o=t.$,t=t.navigation,n=r.systemStore.setting.showRecent;return-1!==n&&(s=o.subjectFormHTML.who||[],(s=o.filterDefault||o.isLimit?s.filter(function(e){return!e.avatar.includes(i.URL_DEFAULT_AVATAR)}):s).length)?(0,a.jsx)(c.default,{navigation:t,showRecent:n,subjectId:o.subjectId,who:s,hideScore:o.hideScore,onSwitchBlock:o.onSwitchBlock}):null});t.default=o;try{recent.displayName="recent",recent.__docgenInfo={description:"",displayName:"recent",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/recent/index.tsx#recent"]={docgenInfo:recent.__docgenInfo,name:"recent",path:"src/screens/home/subject/recent/index.tsx#recent"})}catch(e){}},"./src/screens/home/subject/recent/recent.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),a=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),d=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),m=s("./src/utils/hooks/index.ts"),p=s("./src/constants/index.ts"),j=o(s("./src/screens/home/subject/icon/hidden.tsx")),f=s("./src/screens/home/subject/recent/styles.ts"),o=s("./src/screens/home/subject/recent/ds.ts"),b=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.navigation,s=e.subjectId,o=e.showRecent,n=e.who,r=e.hideScore,i=e.onSwitchBlock,e=(0,m.useHorizontalLazy)(n),n=e.list,e=e.onScroll;return(0,b.jsxs)(u.InView,{style:o?f.styles.container:f.styles.hide,children:[(0,b.jsx)(u.SectionTitle,{style:l._.container.wind,right:!o&&(0,b.jsx)(j.default,{name:"动态",value:"showRecent"}),icon:!o&&"md-navigate-next",onPress:function(){return i("showRecent")},children:"动态"}),o&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,Object.assign({style:l._.mt.md,contentContainerStyle:l._.container.wind,horizontal:!0},p.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:16,onScroll:e,children:n.map(function(e){return(0,b.jsxs)(d.Flex,{style:f.styles.item,children:[(0,b.jsx)(d.UserStatus,{userId:e.userId,children:(0,b.jsx)(u.Avatar,{navigation:t,userId:e.userId,name:e.name,src:e.avatar,event:{id:"条目.跳转",data:{from:"用户动态",subjectId:s}}})}),(0,b.jsxs)(a.default,{style:l._.ml.sm,children:[(0,b.jsxs)(d.Flex,{children:[(0,b.jsx)(d.Text,{size:13,bold:!0,children:e.name}),!r&&(0,b.jsx)(u.Stars,{style:l._.ml.xs,value:e.star,simple:!0})]}),(0,b.jsx)(d.Text,{style:l._.mt.xs,size:10,type:"sub",children:e.status})]})]},e.userId)})})),(0,b.jsx)(d.Heatmap,{id:"条目.跳转",from:"用户动态"})]}),(0,b.jsx)(u.PreventTouchPlaceholder,{})]})},o.DEFAULT_PROPS);t.default=s;try{recent.displayName="recent",recent.__docgenInfo={description:"",displayName:"recent",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},showRecent:{defaultValue:null,description:"",name:"showRecent",required:!0,type:{name:"LayoutValue"}},who:{defaultValue:null,description:"",name:"who",required:!0,type:{name:'DeepPartial<{ avatar: Avatar<"l">; name: string; userId: UserId; star: string; status: string; }>[]'}},hideScore:{defaultValue:null,description:"",name:"hideScore",required:!0,type:{name:"boolean"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/recent/recent.tsx#recent"]={docgenInfo:recent.__docgenInfo,name:"recent",path:"src/screens/home/subject/recent/recent.tsx#recent"})}catch(e){}},"./src/screens/home/subject/recent/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({container:{minHeight:84,marginTop:s._.lg,marginBottom:s._.sm},hide:{marginTop:s._.lg,marginBottom:-s._.sm},item:{paddingRight:s._.sm,paddingBottom:s._.xs,marginRight:s._.sm}});t.styles=s},"./src/screens/home/subject/relations/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=void 0;t.COVER_WIDTH=80,t.COVER_HEIGHT=112;t.DEFAULT_PROPS={navigation:{},showRelations:!0,subjectId:0,relations:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/relations/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/relations/relations.tsx")),c=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s=t.$,t=t.navigation,o=n.systemStore.setting.showRelations;return-1!==o&&s.relations.length?(0,c.jsx)(i.default,{navigation:t,showRelations:o,subjectId:s.subjectId,relations:s.relations,onSwitchBlock:s.onSwitchBlock}):null});t.default=o;try{relations.displayName="relations",relations.__docgenInfo={description:"",displayName:"relations",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/relations/index.tsx#relations"]={docgenInfo:relations.__docgenInfo,name:"relations",path:"src/screens/home/subject/relations/index.tsx#relations"})}catch(e){}},"./src/screens/home/subject/relations/relations.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),u=o(s("./src/screens/home/subject/icon/hidden.tsx")),l=s("./src/screens/home/subject/relations/ds.ts"),m=s("./src/screens/home/subject/relations/styles.ts"),p=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var n=e.navigation,t=e.showRelations,r=e.subjectId,s=e.relations,o=e.onSwitchBlock;return(0,p.jsxs)(c.InView,{style:t?m.styles.container:m.styles.hide,children:[(0,p.jsx)(c.SectionTitle,{style:a._.container.wind,right:!t&&(0,p.jsx)(u.default,{name:"关联",value:"showRelations"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showRelations")},children:"关联"}),t&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.HorizontalList,{style:a._.mt.sm,data:s,width:l.COVER_WIDTH,height:l.COVER_HEIGHT,findCn:!0,initialRenderNums:a._.device(Math.floor(a._.window.contentWidth/l.COVER_WIDTH)+1,6),onPress:function(e,t){var s=e.id,o=e.name,e=e.image;(0,d.t)("条目.跳转",{to:"Subject",from:"关联条目",subjectId:r}),n.push("Subject",{subjectId:s,_jp:o,_image:e,_type:t})}}),(0,p.jsx)(i.Heatmap,{id:"条目.跳转",from:"关联条目"})]})]})},l.DEFAULT_PROPS);t.default=o;try{relations.displayName="relations",relations.__docgenInfo={description:"",displayName:"relations",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showRelations:{defaultValue:null,description:"",name:"showRelations",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},relations:{defaultValue:null,description:"",name:"relations",required:!0,type:{name:"{ id: any; image: any; name: any; desc: any; }[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/relations/relations.tsx#relations"]={docgenInfo:relations.__docgenInfo,name:"relations",path:"src/screens/home/subject/relations/relations.tsx#relations"})}catch(e){}},"./src/screens/home/subject/relations/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({container:{minHeight:188,marginTop:s._.lg},hide:{marginTop:s._.lg,marginBottom:-s._.sm}});t.styles=s},"./src/screens/home/subject/series/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=void 0;s=s("./src/stores/index.ts"),s=s._.r(s._.device(28,40)),s=1.4*(t.COVER_WIDTH=s),t.COVER_HEIGHT=s,s={navigation:{},styles:{},showRelation:!0,size:14,subjectId:0,subjectPrev:void 0,subjectAfter:void 0,subjectSeries:void 0,subjectAnime:void 0,subjectDiff:void 0};t.DEFAULT_PROPS=s},"./src/screens/home/subject/series/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/series/series.tsx")),c=s("./src/screens/home/subject/series/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var e=e.size,s=t.$,t=t.navigation;return s.subjectPrev||s.subjectAfter||s.subjectSeries||s.subjectAnime?(0,a.jsx)(i.default,{navigation:t,styles:(0,c.memoStyles)(),showRelation:n.systemStore.setting.showRelation,size:e,subjectId:s.subjectId,subjectPrev:s.subjectPrev,subjectAfter:s.subjectAfter,subjectSeries:s.subjectSeries,subjectAnime:s.subjectAnime,subjectDiff:s.subjectDiff}):null});t.default=o},"./src/screens/home/subject/series/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),u=s("./src/constants/index.ts"),l=s("./src/stores/index.ts"),m=s("./src/screens/home/subject/series/ds.ts"),p=s("./src/screens/home/subject/series/item/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.from,o=e.data,n=t.$,r=t.navigation,e=(0,p.memoStyles)(),i="系列"+s;return(0,j.jsxs)(c.Touchable,{style:e.touch,animate:!0,scale:.9,onPress:function(){(0,d.t)("条目.跳转",{to:"Subject",from:i,subjectId:n.subjectId}),r.push("Subject",{subjectId:o.id,_jp:o.title,_image:o.image})},children:[(0,j.jsxs)(c.Flex,{children:[(0,j.jsx)(a.Cover,{src:o.image||u.IMG_DEFAULT,size:m.COVER_WIDTH,height:m.COVER_HEIGHT,radius:4,fadeDuration:0,noDefault:!0}),(0,j.jsx)(c.Text,{style:l._.ml.sm,size:11,children:s})]}),(0,j.jsx)(c.Heatmap,{right:-19,id:"条目.跳转",from:i})]})});t.default=s},"./src/screens/home/subject/series/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{touch:{paddingRight:o._.xs,marginLeft:o._.sm,borderRadius:4,overflow:"hidden"}}});t.memoStyles=s},"./src/screens/home/subject/series/series.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),m=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),j=s("./src/utils/fetch/index.ts"),f=o(s("./src/screens/home/subject/series/item/index.tsx")),b=s("./src/screens/home/subject/series/ds.ts"),h=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var t,s=e.navigation,o=e.styles,n=e.showRelation,r=e.size,i=e.subjectId,c=e.subjectPrev,a=e.subjectAfter,d=e.subjectSeries,u=e.subjectAnime,e=e.subjectDiff;return c||a||u||e?(t=0,c&&(t+=1),a&&(t+=1),u&&(t+=1),(0,h.jsxs)(l.Flex,{style:n&&o.relation,children:[(0,h.jsx)(l.Flex.Item,{children:n&&(0,h.jsxs)(l.Flex,{children:[(0,h.jsx)(l.Iconfont,{name:"md-subdirectory-arrow-right",size:16}),!!c&&(0,h.jsx)(f.default,{data:c,from:"前传"}),!!a&&(0,h.jsx)(f.default,{data:a,from:"续集"}),t<=1&&!!u&&(0,h.jsx)(f.default,{data:u,from:"动画"}),t<=1&&!!e&&(0,h.jsx)(f.default,{data:e,from:"不同演绎"})]})}),(0,h.jsx)(m.IconTouchable,{style:o.icon,name:n?"md-keyboard-arrow-up":"md-navigate-next",size:24,onPress:function(){return p.systemStore.switchSetting("showRelation")}})]})):(0,h.jsxs)(l.Touchable,{style:o.series,onPress:function(){(0,j.t)("条目.跳转",{to:"Subject",from:"系列",subjectId:i}),s.push("Subject",{subjectId:d.id,_jp:d.title,_image:d.image})},children:[(0,h.jsxs)(l.Flex,{children:[(0,h.jsx)(l.Text,{size:13,children:"⤷"}),(0,h.jsx)(m.Cover,{style:o.cover,src:d.image,size:b.COVER_WIDTH,height:b.COVER_HEIGHT,radius:p._.radiusSm,placeholder:!1,fadeDuration:0,noDefault:!0}),(0,h.jsx)(l.Text,{style:p._.ml.sm,size:r,bold:!0,children:d.title})]}),(0,h.jsx)(l.Heatmap,{id:"条目.跳转",from:"系列"})]})},b.DEFAULT_PROPS);t.default=o;try{series.displayName="series",series.__docgenInfo={description:"",displayName:"series",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ cover: { marginLeft: number; backgroundColor: "rgb(255, 255, 255)" | "rgb(238, 238, 240)" | "rgb(36, 36, 36)" | "rgb(24, 24, 24)"; }; relation: { paddingLeft: number; marginTop: number; marginBottom: number; }; series: { ...; }; icon: { ...; }; }'}},showRelation:{defaultValue:null,description:"",name:"showRelation",required:!0,type:{name:"LayoutValue"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"number"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},subjectPrev:{defaultValue:null,description:"",name:"subjectPrev",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectAfter:{defaultValue:null,description:"",name:"subjectAfter",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectSeries:{defaultValue:null,description:"",name:"subjectSeries",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectAnime:{defaultValue:null,description:"",name:"subjectAnime",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectDiff:{defaultValue:null,description:"",name:"subjectDiff",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/series/series.tsx#series"]={docgenInfo:series.__docgenInfo,name:"series",path:"src/screens/home/subject/series/series.tsx#series"})}catch(e){}},"./src/screens/home/subject/series/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{cover:{marginLeft:o._.sm,backgroundColor:o._.select(o._.colorBg,o._.colorPlain)},relation:{paddingLeft:2,marginTop:o._.sm+4,marginBottom:o._.sm+4},series:{width:o._.r(180),paddingLeft:2,paddingRight:o._.sm,marginVertical:o._.sm+2,borderRadius:o._.radiusSm,overflow:"hidden"},icon:{marginRight:-o._.sm}}});t.memoStyles=s},"./src/screens/home/subject/smb/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),d=o(s("./src/screens/home/subject/icon/smb.tsx")),u=o(s("./src/screens/home/subject/icon/hidden.tsx")),l=s("./src/screens/home/subject/smb/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");o=(0,n.obc)(function(e,t){var s,o,n=t.$;return a.IOS||!(t=c.smbStore.subject(n.subjectId))||-1===(s=c.systemStore.setting.showSMB)?null:(o=(0,l.memoStyles)(),(0,m.jsxs)(r.default,{style:o.container,children:[(0,m.jsx)(i.SectionTitle,{right:s?(0,m.jsx)(d.default,{}):(0,m.jsx)(u.default,{name:"本地",value:"showSMB"}),icon:!s&&"md-navigate-next",onPress:function(){return n.onSwitchBlock("showSMB")},children:"本地"}),s&&(0,m.jsx)(i.FolderSMB,{smb:t.smb,folder:t.folder})]}))});t.default=o;try{smb.displayName="smb",smb.__docgenInfo={description:"",displayName:"smb",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/smb/index.tsx#smb"]={docgenInfo:smb.__docgenInfo,name:"smb",path:"src/screens/home/subject/smb/index.tsx#smb"})}catch(e){}},"./src/screens/home/subject/smb/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{paddingTop:o._.md,paddingHorizontal:o._.wind,marginTop:o._.md}}});t.memoStyles=s},"./src/screens/home/subject/staff/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},showStaff:!0,subjectId:0,staff:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/staff/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/staff/staff.tsx")),c=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var s=t.$,t=t.navigation;return-1!==n.systemStore.setting.showStaff&&s.staff.length?(0,c.jsx)(i.default,{navigation:t,showStaff:n.systemStore.setting.showStaff,subjectId:s.subjectId,staff:s.staff,onSwitchBlock:s.onSwitchBlock}):null});t.default=o;try{staff.displayName="staff",staff.__docgenInfo={description:"",displayName:"staff",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/staff/index.tsx#staff"]={docgenInfo:staff.__docgenInfo,name:"staff",path:"src/screens/home/subject/staff/index.tsx#staff"})}catch(e){}},"./src/screens/home/subject/staff/staff.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),l=o(s("./src/screens/home/subject/icon/staff.tsx")),m=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/staff/ds.ts"),p=s("./src/screens/home/subject/staff/styles.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var n=e.navigation,t=e.showStaff,r=e.subjectId,s=e.staff,o=e.onSwitchBlock;return(0,j.jsxs)(c.InView,{style:(0,d.stl)(p.styles.container,!t&&a._.short),children:[(0,j.jsx)(c.SectionTitle,{style:a._.container.wind,right:t?(0,j.jsx)(l.default,{}):(0,j.jsx)(m.default,{name:"制作人员",value:"showStaff"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showStaff")},children:"制作人员"}),t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.HorizontalList,{style:a._.mt.sm,data:s,quality:!1,initialRenderNums:a._.device(Math.floor(a._.window.contentWidth/56)+1,8),onPress:function(e){var t=e.id,s=e.name,o=e.nameJP,e=e._image;(0,u.t)("条目.跳转",{to:"Mono",from:"制作人员",subjectId:r}),n.push("Mono",{monoId:"person/"+t,_name:s,_jp:o,_image:e})}}),(0,j.jsx)(i.Heatmap,{id:"条目.跳转",from:"制作人员"})]})]})},o.DEFAULT_PROPS);t.default=s;try{staff.displayName="staff",staff.__docgenInfo={description:"",displayName:"staff",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showStaff:{defaultValue:null,description:"",name:"showStaff",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},staff:{defaultValue:null,description:"",name:"staff",required:!0,type:{name:"Staff[] | DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/crt/g/${string}.jpg?r=${number}`; name: string; desc: string; }>[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/staff/staff.tsx#staff"]={docgenInfo:staff.__docgenInfo,name:"staff",path:"src/screens/home/subject/staff/staff.tsx#staff"})}catch(e){}},"./src/screens/home/subject/staff/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts"),s=s._.create({container:{minHeight:140,marginTop:s._.lg}});t.styles=s},"./src/screens/home/subject/store/action.ts":(e,t,s)=>{var u=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),m=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),r=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),j=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),h=s("./src/utils/fetch/index.ts"),_=s("./src/utils/thirdParty/cn-char/index.ts"),y=s("./src/utils/kv/index.ts"),g=s("./src/utils/webhooks/index.ts"),x=s("./src/constants/index.ts"),S=o(s("./src/constants/i18n/index.ts")),v=s("./src/screens/user/origin-setting/utils.ts"),o=o(s("./src/screens/home/subject/store/fetch.ts")),T=s("./src/screens/home/subject/store/ds.ts");function a(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=o?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}s=o.default,(0,r.default)(I,s),O=a(I);var O,o=(0,n.default)(I);function I(){var a;(0,m.default)(this,I);for(var t,s,o,n,r,i,e=arguments.length,c=new Array(e),d=0;d<e;d++)c[d]=arguments[d];return a=O.call.apply(O,[this].concat(c)),(0,j.default)((0,p.default)(a),"showManageModel",function(){(0,h.t)("条目.显示收藏管理",{subjectId:a.subjectId}),a.setState({visible:!0})}),(0,j.default)((0,p.default)(a),"closeManageModal",function(){a.setState({visible:!1})}),(0,j.default)((0,p.default)(a),"toggleReverseEps",function(){(0,h.t)("条目.章节倒序",{subjectId:a.subjectId});var e=a.state.epsReverse;a.setState({epsReverse:!e}),a.setStorage(a.namespace)}),(0,j.default)((0,p.default)(a),"toggleReverseComments",function(){(0,h.t)("条目.吐槽倒序",{subjectId:a.subjectId});var e=a.subjectComments._reverse;a.fetchSubjectComments(!0,!e)}),(0,j.default)((0,p.default)(a),"changeText",function(e,t){(0,h.t)("条目.书籍章节输入框改变",{subjectId:a.subjectId});try{a.setState((0,j.default)({},e,String(t)))}catch(e){console.error(T.NAMESPACE,"changeText",e)}}),(0,j.default)((0,p.default)(a),"onlinePlaySelected",(t=(0,l.default)(u.mark(function e(t){var s,o,n,r,i;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((e.prev=0,h.t)("条目.搜索源",{type:t,subjectId:a.subjectId,subjectType:a.type}),"AGE动漫"===t&&((n=a.params._aid)?s=(0,x.SITE_AGEFANS)()+"/detail/"+n:null!=(n=f.otaStore.anime(a.subjectId))&&n.ageId&&(s=(0,x.SITE_AGEFANS)()+"/detail/"+n.ageId)),s)e.next=11;else if(o=a.onlineOrigins.find(function(e){return e.name===t})){if("萌番组"===t&&o.id)return(0,b.copy)(a.cn||a.jp),setTimeout(function(){(0,b.open)(o.url)},1600),e.abrupt("return");e.next=10}else e.next=11;break;case 10:s=(0,v.replaceOriginUrl)(o.url,{CN:a.cn||a.jp,JP:a.jp||a.cn,ID:a.subjectId});case 11:s?e.next=28:(n=a.state.bangumiInfo,r=n.sites,r=void 0===r?[]:r,e.t0=t,e.next="AGE动漫"===e.t0?17:"Anime1"===e.t0?19:"奇奇动漫"===e.t0?21:"Hanime1"===e.t0?23:25);break;case 17:return s=(0,x.SITE_AGEFANS)()+"/search?query="+encodeURIComponent(a.cn||a.jp)+"&page=1",e.abrupt("break",28);case 19:return s="https://anime1.me/?s="+encodeURIComponent((0,_.s2t)(a.cn||a.jp)),e.abrupt("break",28);case 21:return s="https://www.qiqidongman.com/vod-search-wd-"+encodeURIComponent(a.cn||a.jp)+".html",e.abrupt("break",28);case 23:return s="https://hanime1.me/search?query="+encodeURIComponent(a.jp||a.cn),e.abrupt("break",28);case 25:return(i=r.find(function(e){return e.site===t}))&&(s=(0,b.getBangumiUrl)(i)),e.abrupt("break",28);case 28:a.open(s),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),console.error(T.NAMESPACE,"onlinePlaySelected",e.t1);case 34:case"end":return e.stop()}},e,null,[[0,31]])})),function(e){return t.apply(this,arguments)})),(0,j.default)((0,p.default)(a),"open",function(e){var t;e&&((t=f.systemStore.setting.openInfo)&&(0,b.copy)(e,"已复制地址"),setTimeout(function(){(0,b.open)(e)},t?1600:0))}),(0,j.default)((0,p.default)(a),"onlineComicSelected",function(t){try{(0,h.t)("条目.搜索源",{type:t,subjectId:a.subjectId,subjectType:a.type});var e,s=a.onlineComicOrigins.find(function(e){return e.name===t});s&&(e=(0,v.replaceOriginUrl)(s.url,{CN:a.cn||a.jp,JP:a.jp||a.cn,ID:a.subjectId})),a.open(e)}catch(e){console.error(T.NAMESPACE,"onlineComicSelected",e)}}),(0,j.default)((0,p.default)(a),"onlineDiscSelected",function(t){try{(0,h.t)("条目.搜索源",{type:t,subjectId:a.subjectId,subjectType:a.type});var e,s=a.onlineDiscOrigins.find(function(e){return e.name===t});s&&(e=(0,v.replaceOriginUrl)(s.url,{CN:a.cn||a.jp,JP:a.jp||a.cn,ID:a.subjectId})),a.open(e)}catch(e){console.error(T.NAMESPACE,"onlineDiscSelected",e)}}),(0,j.default)((0,p.default)(a),"onlineGameSelected",function(t){try{(0,h.t)("条目.搜索源",{type:t,subjectId:a.subjectId,subjectType:a.type});var e,s=a.onlineGameOrigins.find(function(e){return e.name===t});s&&(e=(0,v.replaceOriginUrl)(s.url,{CN:a.cn||a.jp,JP:a.jp||a.cn,ID:a.subjectId})),a.open(e)}catch(e){console.error(T.NAMESPACE,"onlineGameSelected",e)}}),(0,j.default)((0,p.default)(a),"toManhuadb",function(){var e=(a.source||{}).mangaId,e=((0,h.t)("条目.阅读漫画",{subjectId:a.subjectId,mid:e}),(0,x.SITE_MANHUADB)()+"/manhua/"+e);a.open(e)}),(0,j.default)((0,p.default)(a),"toWenku8",function(){var e=(a.source||{}).wenkuId,e=((0,h.t)("条目.阅读轻小说",{subjectId:a.subjectId,wid:e}),(0,x.SITE_WK8)()+"/novel/"+Math.floor(e/1e3)+"/"+e+"/index.htm");a.open(e)}),(0,j.default)((0,p.default)(a),"toPSNINE",function(){(0,h.t)("条目.查看奖杯",{subjectId:a.subjectId}),(0,b.open)("https://psnine.com/psngame?title="+encodeURIComponent(a.cn||a.jp))}),(0,j.default)((0,p.default)(a),"updateFilterEps",function(e){e=parseInt(e.match(/\d+/g)[0]);(0,h.t)("条目.设置章节筛选",{subjectId:a.subjectId,filterEps:e=1===e?0:e}),a.setState({filterEps:e}),a.setStorage(a.namespace)}),(0,j.default)((0,p.default)(a),"filterScores",function(e){(0,h.t)("条目.筛选分数",{subjectId:a.subjectId,label:e}),a.setState({filterScores:"全部"===e?[]:e.split("-")}),a.setStorage(a.namespace)}),(0,j.default)((0,p.default)(a),"toRating",function(e,t,s){(0,h.t)("条目.跳转",{to:"Rating",from:t,subjectId:a.subjectId,status:s});var t=a.subjectCollection,o=t.wish,n=t.collect,r=t.doing,i=t.on_hold,t=t.dropped;e.push("Rating",{subjectId:a.subjectId,status:s,name:(0,b.cnjp)(a.cn,a.jp),wish:o,collect:n,doing:r,onHold:i,dropped:t,type:a.type})}),(0,j.default)((0,p.default)(a),"onSwitchBlock",function(e){(0,h.t)("条目.展开收起功能块",{key:e}),f.systemStore.switchSetting(e)}),(0,j.default)((0,p.default)(a),"hiddenBlock",function(e){(0,h.t)("条目.展开收起功能块",{key:e+" | -1"}),f.systemStore.setSetting(e,-1)}),(0,j.default)((0,p.default)(a),"setRendered",function(){a.state.rendered||a.setState({visibleBottom:1.5*f._.window.height,rendered:!0})}),(0,j.default)((0,p.default)(a),"unRendered",function(){a.state.rendered&&a.setState({visibleBottom:0,rendered:!1})}),(0,j.default)((0,p.default)(a),"toggleFolder",function(){var e;a.isLogin?(e=a.state.folder,a.setState({folder:!e}),e||(0,h.t)("条目.管理目录",{subjectId:a.subjectId})):(0,b.info)("请先"+S.default.login())}),(0,j.default)((0,p.default)(a),"onSelectOnAir",function(e,t){(0,h.t)("条目.自定义放送",{subjectId:a.subjectId}),f.calendarStore.updateOnAirUser(a.subjectId,e,t)}),(0,j.default)((0,p.default)(a),"resetOnAirUser",function(){(0,h.t)("条目.重置放送",{subjectId:a.subjectId}),f.calendarStore.resetOnAirUser(a.subjectId)}),(0,j.default)((0,p.default)(a),"onActionsPress",function(t,e){return"自定义跳转管理"===t?(e.push("Actions",{subjectId:a.subjectId,name:a.cn||a.jp}),!0):!!(e=a.actions.find(function(e){return e.name===t}))&&((0,b.open)(e.url,!0),(0,h.t)("其他.自定义跳转",{from:"Subject",key:a.subjectId+"|"+e.name+"|"+e.url}),!0)}),(0,j.default)((0,p.default)(a),"addBlockUser",function(e){(0,b.confirm)("屏蔽来自 "+(null==e?void 0:e.userName)+"@"+(null==e?void 0:e.userId)+" 的包括条目评论、时间胶囊、超展开相关信息，确定?",function(){(0,h.t)("条目.屏蔽用户",{userId:e.userId}),f.rakuenStore.addBlockUser(e.userName+"@"+e.userId),(0,b.info)("已屏蔽 "+e.userName)})}),(0,j.default)((0,p.default)(a),"onTrackUsersCollection",function(e,t,s){if(null==t||!t.userId)return!1;"复制评论"===e?a.onCopyComment(t,s):"屏蔽用户"===e?a.addBlockUser(t):a.type&&(e=(s=t||{}).avatar,t=s.userId,s=s.userName,f.systemStore.trackUsersCollection(t,a.subjectTypeValue),f.usersStore.updateUsersInfo({avatar:e,userId:t,userName:s}),f.collectionStore.fetchUsersCollection(t,a.subjectId),(0,h.t)("条目.特别关注",{subjectId:a.subjectId,type:a.subjectTypeValue,userId:t}))}),(0,j.default)((0,p.default)(a),"onCancelTrackUsersCollection",function(e,t){a.type&&null!=t&&t.userId&&(t=(t||{}).userId,f.systemStore.cancelTrackUsersCollection(t,a.subjectTypeValue),(0,h.t)("条目.取消特别关注",{subjectId:a.subjectId,type:a.subjectTypeValue,userId:t}))}),(0,j.default)((0,p.default)(a),"onCopyComment",function(e,t){(0,b.copy)(t,"已复制 "+(null==e?void 0:e.userName)+" 的评论"),(0,b.feedback)()}),(0,j.default)((0,p.default)(a),"prepareFlip",function(){a.setState({flip:!0})}),(0,j.default)((0,p.default)(a),"afterFlip",function(){var e=a.state.flipKey;a.setState({flip:!1}),setTimeout(function(){a.setState({flipKey:e+1})},400)}),(0,j.default)((0,p.default)(a),"prepareEpsFlip",function(){a.setState({flipEps:!0})}),(0,j.default)((0,p.default)(a),"afterEpsFlip",(0,b.debounce)(function(){a.setState({flipEps:!1})})),(0,j.default)((0,p.default)(a),"onScroll",function(e){var e=e.nativeEvent,t=e.contentOffset,e=e.layoutMeasurement.height,t=t.y+e;t<=(a.state.visibleBottom||0)||a.setState({visibleBottom:t+.5*f._.window.height})}),(0,j.default)((0,p.default)(a),"doUpdateCollection",(s=(0,l.default)(u.mark(function e(t){return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.t)("条目.管理收藏",{subjectId:a.subjectId}),e.prev=1,a.prepareFlip(),a.setState({disabled:!0}),e.next=6,f.collectionStore.doUpdateCollection(Object.assign({},t,{noConsole:!0}));case 6:f.collectionStore.fetchCollection(a.subjectId),f.collectionStore.fetchCollectionStatusQueue([a.subjectId]),a.closeManageModal(),(0,g.webhookCollection)(t,a.subject,f.userStore.userInfo),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(T.NAMESPACE,"doUpdateCollection",e.t0);case 15:a.setState({disabled:!1});case 16:case"end":return e.stop()}},e,null,[[1,12]])})),function(e){return s.apply(this,arguments)})),(0,j.default)((0,p.default)(a),"doEpsSelect",(o=(0,l.default)(u.mark(function e(t,r,s){var o,n,i,c;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.includes("本集讨论")||t.includes("(+"))return(0,h.t)("条目.章节菜单操作",{title:"本集讨论",subjectId:a.subjectId}),(0,b.appNavigate)(r.url||"/ep/"+r.id,s,{_title:"ep"+r.sort+"."+(r.name||r.name_cn),_group:a.subject.name||a.subject.name_cn,_groupThumb:(0,b.getCoverMedium)(null==(o=a.subject.images||{})?void 0:o.medium),_desc:"时长:"+r.duration+" / 首播:"+r.airdate+"<br />"+(r.desc||"").replace(/\r\n/g,"<br />")},{id:"条目.跳转",data:{from:"章节",subjectId:a.subjectId}}),e.abrupt("return");e.next=5;break;case 5:if("正版播放"===t)return setTimeout(function(){(0,b.showActionSheet)(a.onlinePlayActionSheetData,function(e){(0,h.t)("条目.章节菜单操作",{title:a.onlinePlayActionSheetData[e],subjectId:a.subjectId});var t,s=1===r.type,o=a.state.epsData,n=a.subject.eps,n=void 0===n?[]:n,e=a.onlinePlayActionSheetData[e];(t=x.SITES.includes(e)?!s&&(s=n.filter(function(e){return 0===e.type}).findIndex(function(e){return e.id===r.id}),o[e][s])||(0,b.getBangumiUrl)({id:r.id,site:e}):t)&&(0,b.open)(t)})},320),e.abrupt("return");e.next=8;break;case 8:if("添加提醒"===t)return(0,b.saveCalenderEvent)(r,(0,b.cnjp)(a.cn,a.jp),a.onAirCustom),(0,h.t)("其他.添加日历",{subjectId:a.subjectId,sort:(null==r?void 0:r.sort)||0,from:"Subject"}),e.abrupt("return");e.next=12;break;case 12:if(o=a.collection.status,"未收藏"===(void 0===o?{name:"未收藏"}:o).name)e.next=35;else{if(n=x.MODEL_EP_STATUS.getValue(t))return(0,h.t)("条目.章节菜单操作",{title:"更新收视进度",subjectId:a.subjectId,status:n}),a.prepareEpsFlip(),e.next=20,f.userStore.doUpdateEpStatus({id:r.id,status:n});e.next=23}break;case 20:f.userStore.fetchUserCollection(),f.userStore.fetchUserProgress(a.subjectId),(0,g.webhookEp)(Object.assign({},r,{status:n,batch:!1}),a.subject,f.userStore.userInfo);case 23:if("看到"===t)return(0,h.t)("条目.章节菜单操作",{title:"批量更新收视进度",subjectId:a.subjectId}),i=a.subject.eps,i=(void 0===i?[]:i).filter(function(e){return 0===e.type}).sort(function(e,t){return(0,b.asc)(e,t,function(e){return e.sort||0})}).findIndex(function(e){return e.sort===r.sort}),c=-1!==i||(c=Number(a.subjectFormHTML.totalEps))&&r.sort>=c?i+1:r.sort,a.prepareEpsFlip(),e.next=31,f.userStore.doUpdateSubjectWatched({subjectId:a.subjectId,sort:c});e.next=34;break;case 31:f.userStore.fetchUserCollection(),f.userStore.fetchUserProgress(a.subjectId),(0,g.webhookEp)(Object.assign({},r,{status:"watched",batch:!0}),a.subject,f.userStore.userInfo);case 34:return e.abrupt("return");case 35:(0,b.info)("收藏了才能管理哦"),e.next=41;break;case 38:e.prev=38,e.t0=e.catch(0),console.error(T.NAMESPACE,"doEpsSelect",e.t0);case 41:case"end":return e.stop()}},e,null,[[0,38]])})),function(e,t,s){return o.apply(this,arguments)})),(0,j.default)((0,p.default)(a),"doUpdateNext",(n=(0,l.default)(u.mark(function e(t){var s,o,n;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.t)("条目.更新书籍下一个章节",{subjectId:a.subjectId}),s=a.state,n=s.chap,s=s.vol,o=String(parseInt(a.state[t]||0)+1),n=(0,j.default)({subjectId:a.subjectId,chap:n,vol:s},t,o),a.doUpdateEp({eps:n.chap,vol:n.vol},!0);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),(0,j.default)((0,p.default)(a),"doUpdateBookEp",(0,l.default)(u.mark(function e(){var t,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.t)("条目.更新书籍章节",{subjectId:a.subjectId}),s=a.state,t=s.chap,s=s.vol,a.doUpdateEp({eps:t,vol:s},!0);case 3:case"end":return e.stop()}},e)}))),(0,j.default)((0,p.default)(a),"doUpdateSubjectEp",(0,l.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,h.t)("条目.输入框更新章节",{subjectId:a.subjectId}),t=a.state.watchedEps,a.doUpdateEp({eps:t});case 3:case"end":return e.stop()}},e)}))),(0,j.default)((0,p.default)(a),"doUpdateEp",(r=(0,l.default)(u.mark(function e(t){var s,o,n,r=arguments;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t.eps,o=t.vol,n=1<r.length&&void 0!==r[1]&&r[1];try{a.prepareEpsFlip(),f.collectionStore.doUpdateSubjectEp({subjectId:a.subjectId,watchedEps:s,watchedVols:o},(0,l.default)(u.mark(function e(){return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.userStore.fetchUserCollection(),e.next=3,f.userStore.fetchUserProgress(a.subjectId);case 3:return e.next=5,a.fetchSubjectFormHTML();case 5:a.setStorage(a.namespace),a.afterEpsFlip(),n&&((0,b.info)("已提交"),(0,b.feedback)()),(0,g.webhookEp)({status:"watched",sort:s,vols:o,batch:!1},a.subject,f.userStore.userInfo);case 9:case"end":return e.stop()}},e)})))}catch(e){console.error(T.NAMESPACE,"doUpdateEp",e)}case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),(0,j.default)((0,p.default)(a),"doEpsLongPress",(i=(0,l.default)(u.mark(function e(t){var s,o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.id,(0,h.t)("条目.章节按钮长按",{subjectId:a.subjectId}),e.prev=2,o=a.userProgress,o=o[s]?x.MODEL_EP_STATUS.getValue("撤销"):x.MODEL_EP_STATUS.getValue("看过"),e.next=7,f.userStore.doUpdateEpStatus({id:s,status:o});case 7:(0,b.feedback)(),f.userStore.fetchUserCollection(),f.userStore.fetchUserProgress(a.subjectId),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(T.NAMESPACE,"doEpsLongPress",e.t0);case 15:case"end":return e.stop()}},e,null,[[2,12]])})),function(e){return i.apply(this,arguments)})),(0,j.default)((0,p.default)(a),"doEraseCollection",(0,l.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.subjectFormHTML.formhash){e.next=3;break}return e.abrupt("return");case 3:return(0,h.t)("条目.删除收藏",{subjectId:a.subjectId}),e.prev=4,a.prepareFlip(),a.setState({disabled:!0}),e.next=9,f.userStore.doEraseCollection({subjectId:a.subjectId,formhash:t},function(){},function(){setTimeout(function(){f.collectionStore.removeStatus(a.subjectId),a.fetchCollection()},40)});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(T.NAMESPACE,"doEraseCollection",e.t0);case 14:a.setState({disabled:!1});case 15:case"end":return e.stop()}},e,null,[[4,11]])}))),(0,j.default)((0,p.default)(a),"doTranslate",(0,l.default)(u.mark(function e(){var t,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.translateResult.length)return e.abrupt("return");e.next=2;break;case 2:return(0,h.t)("条目.翻译简介",{subjectId:a.subjectId}),e.prev=3,t=(0,b.loading)("请求中..."),e.next=7,(0,h.baiduTranslate)(a.summary);case 7:if(s=e.sent,t(),s=JSON.parse(s),s=s.trans_result,Array.isArray(s))return a.setState({translateResult:s}),e.abrupt("return");e.next=13;break;case 13:(0,b.info)("翻译失败, 请重试"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),t&&t(),(0,b.info)("翻译失败, 请重试");case 20:case"end":return e.stop()}},e,null,[[3,16]])}))),(0,j.default)((0,p.default)(a),"doDiscTranslate",(0,l.default)(u.mark(function e(){var s,t,o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.discTranslateResult.length)return e.abrupt("return");e.next=2;break;case 2:return(0,h.t)("条目.翻译曲目",{subjectId:a.subjectId}),s=[],a.disc.forEach(function(e){e.disc.forEach(function(e,t){s.push(e.title.replace(t+1+" ",""))})}),e.prev=5,t=(0,b.loading)("请求中..."),e.next=9,(0,h.baiduTranslate)(s.join("\n"));case 9:if(o=e.sent,t(),o=JSON.parse(o),o=o.trans_result,Array.isArray(o))return a.setState({discTranslateResult:o}),e.abrupt("return");e.next=15;break;case 15:(0,b.info)("翻译失败, 请重试"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),t&&t(),(0,b.info)("翻译失败, 请重试");case 22:case"end":return e.stop()}},e,null,[[5,18]])}))),(0,j.default)((0,p.default)(a),"doExportCalenderEventICS",(0,l.default)(u.mark(function e(){var t,n,r,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.subject.eps||[]).filter(function(e){return 0===e.type}).length){e.next=19;break}if((t=100<=a.subject.eps.length?a.subject.eps.filter(function(e){return"NA"===e.status}):a.subject.eps).length){e.next=6;break}return(0,b.info)("没有数据"),e.abrupt("return");case 6:return n=a.onAirCustom,r=["BEGIN:VCALENDAR","PRODID:-//Bangumi//Anime Calendar//CN","VERSION:2.0","METHOD:PUBLISH","CALSCALE:GREGORIAN","X-WR-CALNAME:Bangumi放送日程","X-APPLE-CALENDAR-COLOR:#FE8A95"],t.forEach(function(e){var t=(0,b.genICSCalenderEventDate)(e,n),s=t.DTSTART,t=t.DTEND,o="https://bgm.tv/ep/"+e.id;(e.name_cn||e.name)&&(o+=" ("+(e.name_cn||e.name)+")"),r.push("BEGIN:VEVENT","UID:"+a.subjectId+"-"+e.id,"TZID:Asia/Shanghai","DTSTART:"+s,"DTEND:"+t,"SUMMARY:[ep."+e.sort+"] "+(0,b.cnjp)(a.subject.name_cn,a.subject.name),"DESCRIPTION:"+o,"TRANSP:OPAQUE","END:VEVENT")}),r.push("END:VCALENDAR"),e.next=12,(0,y.temp)(a.userId+"_"+a.subjectId+".ics",r.join("\n"),-1);case 12:if(s=e.sent,null!=(s=s.data)&&s.downloadKey){e.next=17;break}return(0,b.info)("未知错误，生成ics失败，重试或联系作者"),e.abrupt("return",!1);case 17:(0,h.t)("条目.导出日程",{subjectId:a.subjectId,userId:a.userId}),(0,b.open)((0,y.download)(s.downloadKey));case 19:case"end":return e.stop()}},e)}))),a}t.default=o},"./src/screens/home/subject/store/computed.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.some.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),l=(o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),m=s("./node_modules/mobx/dist/mobx.esm.js"),p=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),f=s("./src/utils/subject/anime/index.ts"),b=s("./src/utils/subject/manga/index.ts"),h=s("./src/utils/subject/wenku/index.ts"),_=s("./src/utils/subject/game/index.ts"),y=s("./src/utils/subject/adv/index.ts"),g=s("./src/utils/subject/hentai/index.ts"),x=s("./src/constants/index.ts"),S=s("./src/screens/user/origin-setting/utils.ts"),o=o(s("./src/screens/home/subject/store/state.ts")),v=s("./src/screens/home/subject/store/ds.ts"),T=s("./node_modules/react/jsx-runtime.js");function O(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=o.default,(0,c.default)(R,s),I=O(R),(0,i.default)(R,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"namespace",get:function(){return v.NAMESPACE+"|"+this.subjectId}},{key:"rendered",get:function(){return!!x.STORYBOOK||this.state.rendered}},{key:"x18",get:function(){return(0,j.x18)(this.subjectId,this.cn||this.jp)}},{key:"onAirCustom",get:function(){return(0,j.getOnAir)(p.calendarStore.onAir[this.subjectId],p.calendarStore.onAirUser(this.subjectId))}},{key:"filterDefault",get:function(){return p.systemStore.setting.filterDefault}},{key:"showComment",get:function(){return p.systemStore.setting.showComment}},{key:"footerEmptyDataComponent",get:function(){if(-1===this.showComment)return(0,T.jsx)(l.default,{})}},{key:"url",get:function(){return x.HOST+"/subject/"+this.subjectId}},{key:"isLogin",get:function(){return p.userStore.isLogin}},{key:"userId",get:function(){return p.userStore.userInfo.id}},{key:"subject",get:function(){return p.subjectStore.subject(this.subjectId)}},{key:"subjectFormHTML",get:function(){return p.subjectStore.subjectFormHTML(this.subjectId)}},{key:"subjectFormCDN",get:function(){return p.subjectStore.subjectFormCDN(this.subjectId)}},{key:"subjectFromOSS",get:function(){return this.state.subject}},{key:"subjectComments",get:function(){var e,t,s=p.subjectStore.subjectComments(this.subjectId);return this.showComment&&-1!==this.showComment?(t=this.state.filterScores,this.filterDefault||p.userStore.isLimit?Object.assign({},s,{list:s.list.filter(function(e){return t.length?!e.avatar.includes(x.URL_DEFAULT_AVATAR)&&Number(e.star)>=Number(t[0])&&Number(e.star)<=Number(t[1]):!e.avatar.includes(x.URL_DEFAULT_AVATAR)})}):t.length?Object.assign({},s,{list:s.list.filter(function(e){return Number(e.star)>=Number(t[0])&&Number(e.star)<=Number(t[1])})}):s):{list:[],pagination:{page:(e=s.pagination.pageTotal)||1,pageTotal:e},_reverse:s._reverse,_loaded:(0,j.getTimestamp)()}}},{key:"cover",get:function(){var e=this.params._imageForce,t=this.subject.images;return e||(null!=t&&t.common?(0,j.matchCoverUrl)(t.common):"")||this.subjectFromOSS.image||x.IMG_DEFAULT}},{key:"collection",get:function(){return p.collectionStore.collection(this.subjectId)}},{key:"userProgress",get:function(){return p.userStore.userProgress(this.subjectId)}},{key:"type",get:function(){var e=this.subject,t=e._loaded,e=e.type;return t?x.MODEL_SUBJECT_TYPE.getTitle(e):void 0===(t=this.params._type)?"":t}},{key:"subjectType",get:function(){return this.subject._loaded?this.subject.type:this.subjectFromOSS.type||this.subjectFormCDN.type}},{key:"subjectTypeValue",get:function(){return x.MODEL_SUBJECT_TYPE.getLabel(this.subjectType)}},{key:"ningMoeEpOffset",get:function(){var e=this.subject.eps;return(void 0===e?[]:e).filter(function(e){return 0===e.type}).sort(function(e,t){return(0,j.asc)(e,t,function(e){return e.sort})})[0].sort-1}},{key:"onlinePlayActionSheetData",get:function(){var t=this.state.epsData,s=[];return x.SITES.forEach(function(e){t[e]&&Object.keys(t[e]).length&&s.push(e)}),s.push("取消"),s}},{key:"action",get:function(){switch(this.type){case"音乐":return"听";case"游戏":return"玩";case"书籍":return"读";default:return"看"}}},{key:"isLimit",get:function(){return p.userStore.isLimit}},{key:"hideScore",get:function(){return p.systemStore.setting.hideScore}},{key:"userOrigins",get:function(){return(0,S.getOriginConfig)(p.subjectStore.origin,"anime")}},{key:"actions",get:function(){var e=p.subjectStore.actions(this.subjectId);return e.length?p.subjectStore.actions(this.subjectId).slice().filter(function(e){return e.active}).sort(function(e,t){return(0,j.desc)(e.sort||0,t.sort||0)}):e}},{key:"onlineOrigins",get:function(){var e,t=[];["动画"].includes(this.type)&&(null!=p.systemStore&&null!=(s=p.systemStore.ota)&&s.X18&&this.isLogin&&(e=(e=this.x18?!0:e)||this.tags.some(function(e){return e.name.includes("里番")}))&&(0,S.getOriginConfig)(p.subjectStore.origin,"hanime").filter(function(e){return e.active}).forEach(function(e){t.push(e)}),(0,S.getOriginConfig)(p.subjectStore.origin,"anime").filter(function(e){return e.active}).forEach(function(e){t.push(e)})),["三次元"].includes(this.type)&&(0,S.getOriginConfig)(p.subjectStore.origin,"real").filter(function(e){return e.active}).forEach(function(e){t.push(e)});var s=this.state.bangumiInfo.sites;return(void 0===s?[]:s).filter(function(e){return x.SITES_DS.includes(e.site)}).forEach(function(e){t.push(e.site)}),t}},{key:"onlineComicOrigins",get:function(){var e=this.titleLabel.includes("小说")?"wenku":"manga";return(0,S.getOriginConfig)(p.subjectStore.origin,e).filter(function(e){return e.active})}},{key:"onlineDiscOrigins",get:function(){return(0,S.getOriginConfig)(p.subjectStore.origin,"music").filter(function(e){return e.active})}},{key:"onlineGameOrigins",get:function(){return(0,S.getOriginConfig)(p.subjectStore.origin,"game").filter(function(e){return e.active})}},{key:"isPS",get:function(){return"游戏"===this.type&&(this.info.includes("PS4")||this.info.includes("PS3")||this.info.includes("PS5"))}},{key:"animeInfo",get:function(){var e;return"动画"===this.type&&null!=(e=(0,f.findAnime)(this.subjectId))&&e.i?e:null}},{key:"animeTags",get:function(){var e;return this.animeInfo?(0,j.isArray)(null==(e=this.animeInfo)?void 0:e.t)?this.animeInfo.t.map(function(e){return f.ANIME_TAGS[e]}).filter(function(e){return!!e}):[]:null}},{key:"hentaiTags",get:function(){var e;return"动画"===this.type||this.x18?(e=(0,g.findHentai)(this.subjectId),(0,j.isArray)(null==e?void 0:e.t)?e.t.map(function(e){return g.HENTAI_TAGS[e]}):[]):null}},{key:"gameInfo",get:function(){var e;return"游戏"!==this.type?null:null!=(e=(0,_.findGame)(this.subjectId))&&e.i?Object.assign({},e,{isADV:!1}):null!=(e=(0,y.findADV)(this.subjectId))&&e.i?Object.assign({},e,{isADV:!0}):null}},{key:"gameTags",get:function(){var e;return!this.gameInfo||null!=(e=this.gameInfo)&&e.isADV?null:((null==(e=this.gameInfo)?void 0:e.ta)||[]).map(function(e){return _.GAME_CATE[e]})}},{key:"mangaInfo",get:function(){var e;return"书籍"===this.type&&null!=(e=(0,b.findManga)(this.subjectId))&&e.i?e:null}},{key:"mangaTags",get:function(){var e;return this.mangaInfo?((null==(e=this.mangaInfo)?void 0:e.b)||[]).map(function(e){return b.MANGA_TAGS[e]}):null}},{key:"wenkuInfo",get:function(){var e;return"书籍"===this.type&&null!=(e=(0,h.findWenku)(this.subjectId))&&e.i?e:null}},{key:"wenkuTags",get:function(){var e;return this.wenkuInfo?((null==(e=this.wenkuInfo)?void 0:e.j)||[]).map(function(e){return h.WENKU_TAGS[e]}):null}},{key:"source",get:function(){return"书籍"!==this.type?null:{mangaId:0,wenkuId:0}}},{key:"filterEpsData",get:function(){var e=["从 1 起"];if(!(this.eps.length<100))for(var t=Math.floor(this.eps.length/100),s=1;s<=t;s+=1)e.push("从 "+100*s+" 开始");return e}},{key:"status",get:function(){var e=this.subjectCollection,t=e.wish,t=void 0===t?0:t,s=e.collect,s=void 0===s?0:s,o=e.doing,o=void 0===o?0:o,n=e.on_hold,n=void 0===n?0:n,e=e.dropped,e=void 0===e?0:e,r=[];return t&&r.push({status:"wishes",text:t+"想"+this.action}),s&&r.push({status:"collections",text:""+s+this.action+"过"}),o&&r.push({status:"doings",text:o+"在"+this.action}),n&&r.push({status:"on_hold",text:n+"搁置"}),e&&r.push({status:"dropped",text:e+"抛弃"}),t+s+o+n+e&&r.push({status:"",text:"总"+(t+s+o+n+e)}),r}},{key:"release",get:function(){var e;return(null==(e=this.info.match(/<li><span>(发售日|放送开始|上映年度|上映时间): <\/span>(.+?)<\/li>/))?void 0:e[2])||""}},{key:"year",get:function(){var e=(null==(e=((null==(e=this.info.match(/<li><span>(连载开始|开始): <\/span>(.+?)<\/li>/))?void 0:e[2])||"").match(/(\d{4})/))?void 0:e[0])||"";return e||(null==(e=((null==(e=this.info.match(/<li><span>(发售日|放送开始|上映年度|上映时间|发行日期): <\/span>(.+?)<\/li>/))?void 0:e[2])||"").match(/(\d{4})/))?void 0:e[0])||""}},{key:"artist",get:function(){var e;return(0,j.removeHTMLTag)((null==(e=this.info.match(/<li><span>艺术家: <\/span>(.+?)<\/li>/))?void 0:e[1])||"")}},{key:"imageWidth",get:function(){return x.IMG_WIDTH_LG*(p._.isPad?1.4:1.2)*("音乐"===this.type?1.2:1)}},{key:"imageHeight",get:function(){return"音乐"===this.type?this.imageWidth:x.IMG_HEIGHT_LG*(p._.isPad?1.4:1.2)}},{key:"coverPlaceholder",get:function(){var e=this.params,t=e._image,e=e._imageForce||t;return(e="/img/no_icon_subject.png"===e?"":e)||this.subjectFromOSS.image||this.subjectFormCDN.image||(null==(t=this.subject)||null==(e=t.images)?void 0:e.medium)||""}},{key:"jp",get:function(){var e=this.params._jp;return(0,j.HTMLDecode)(this.subject.name||e||this.subjectFromOSS.name||this.subjectFormCDN.name)}},{key:"cn",get:function(){var e=this.params._cn;return(0,j.HTMLDecode)(this.subject.name_cn||e||this.subjectFromOSS.name_cn||(0,j.findSubjectCn)(this.jp,this.subjectId))}},{key:"rating",get:function(){return this.subject._loaded&&this.subject.rating?Object.assign({},v.INIT_RATING,this.subject.rating):this.subjectFromOSS.rating?Object.assign({},v.INIT_RATING,this.subjectFromOSS.rating):this.subjectFormCDN._loaded?Object.assign({},v.INIT_RATING,this.subjectFormCDN.rating):v.INIT_RATING}},{key:"lock",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.lock:this.subjectFromOSS.lock||this.subjectFormCDN.lock}},{key:"subjectCollection",get:function(){return this.subject._loaded&&this.subject.rating?this.subject.collection||{}:this.subjectFromOSS.collection||this.subjectFormCDN.collection||{}}},{key:"eps",get:function(){var e;return this.subject._loaded&&this.subject.rating?1e3<=(e=this.subject.eps||[]).length?[].concat((0,n.default)(e),(0,n.default)(p.subjectStore.epV2(this.subject.id).list)).sort(function(e,t){return(0,j.asc)(e,t,function(e){return e.type})}):e.slice().sort(function(e,t){return(0,j.asc)(e,t,function(e){return e.type})}):null!=(e=this.subjectFromOSS.eps)&&e.length?this.subjectFromOSS.eps||[]:this.subjectFormCDN.eps||[]}},{key:"toEps",get:function(){var e=this.state,t=e.epsReverse,s=e.filterEps;return s?(e=this.eps.filter(function(e,t){return s<t}),t?e.slice().reverse():e):t?this.eps.map(function(e){return e}).reverse():this.eps}},{key:"disc",get:function(){var e;return this.subjectFormHTML._loaded?this.subjectFormHTML.disc||[]:null!=(e=this.subjectFromOSS.disc)&&e.length?this.subjectFromOSS.disc||[]:this.subjectFormCDN.disc||[]}},{key:"summary",get:function(){return this.subject._loaded&&this.subject.rating?this.subject.summary:this.subjectFromOSS.summary||this.subjectFormCDN.summary||this.params._summary||""}},{key:"tags",get:function(){return((this.subjectFormHTML._loaded?this.subjectFormHTML.tags:this.subjectFromOSS.tags||this.subjectFormCDN.tags)||[]).filter(function(e){return!!e.name}).filter(function(e,t){return t<20})}},{key:"info",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.info:this.subjectFromOSS.info||this.subjectFormCDN.info||""}},{key:"crt",get:function(){return this.subject._loaded&&this.subject.rating?(this.subject.crt||[]).map(function(e){var t=e.id,s=e.images,s=void 0===s?{}:s,o=e.name,n=e.name_cn,r=e.role_name,e=e.actors,e=void 0===e?[]:e;return{id:t,image:s.grid,_image:null==s?void 0:s.medium,name:n||o,nameJP:o,desc:(null==e||null==(t=e[0])?void 0:t.name)||r,actorId:null==e||null==(s=e[0])?void 0:s.id}}):this.subjectFromOSS.character||this.subjectFormCDN.crt||[]}},{key:"staff",get:function(){var e,t;return this.subject._loaded&&this.subject.rating?(null==(t=this.subject.staff)||null==(e=t[0])?void 0:e.id)==this.subjectId?p.monoStore.persons(this.subjectId).list.map(function(e){return{id:e.id.replace("/person/",""),image:e.cover,_image:e.cover,name:(e.nameCn||e.name).trim(),nameJP:e.name.trim(),desc:e.position}}):(t||[]).map(function(e){var t=e.id,s=e.images,s=void 0===s?{}:s,o=e.name,n=e.name_cn,e=e.jobs;return{id:t,image:s.grid,_image:null==s?void 0:s.medium,name:n||o,nameJP:o,desc:(void 0===e?[]:e)[0]}}):this.subjectFromOSS.staff||this.subjectFormCDN.staff||[]}},{key:"relations",get:function(){return(this.subject._loaded&&this.subject.rating?(this.subjectFormHTML.relations||[]).map(function(e){return{id:e.id,image:e.image,name:e.title,desc:e.type}}):(this.subjectFromOSS.relations||this.subjectFormCDN.relations||[]).map(function(e){return{id:e.id,image:e.image,name:e.title,desc:e.type}})).slice().sort(function(e,t){return(0,j.desc)(v.SORT_RELATION_DESC[e.desc]||0,v.SORT_RELATION_DESC[t.desc]||0)})}},{key:"comic",get:function(){var e;return this.subjectFormHTML._loaded?this.subjectFormHTML.comic||[]:null!=(e=this.subjectFromOSS.comic)&&e.length?this.subjectFromOSS.comic||[]:this.subjectFormCDN.comic||[]}},{key:"like",get:function(){var e;return this.subjectFormHTML._loaded?this.subjectFormHTML.like||[]:null!=(e=this.subjectFromOSS.like)&&e.length?this.subjectFromOSS.like||[]:this.subjectFormCDN.like||[]}},{key:"titleLabel",get:function(){var e,t=x.MODEL_SUBJECT_TYPE.getTitle(this.subjectType);return"动画"===t?(e=this.state.bangumiInfo,"动画"===(e=this.subjectFormHTML.type||String(e.type).toUpperCase()||t||"TV")?"TV":"剧场版"===e?"MOVIE":e||this.subjectFromOSS.titleLabel||""):this.subjectFormHTML.type||t||this.subjectFromOSS.titleLabel||""}},{key:"catalog",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.catalog||[]:this.subjectFromOSS.catalog||[]}},{key:"bilibiliSite",get:function(){var e=this.state.bangumiInfo;return(null==e||null==(e=e.sites)?void 0:e.find(function(e){return"bilibili"===e.site}))||{}}},{key:"iqiyiSite",get:function(){var e=this.state.bangumiInfo;return(null==e||null==(e=e.sites)?void 0:e.find(function(e){return"iqiyi"===e.site}))||{}}},{key:"youkuSite",get:function(){var e=this.state.bangumiInfo;return(null==e||null==(e=e.sites)?void 0:e.find(function(e){return"youku"===e.site}))||{}}},{key:"subjectRelations",get:function(){var e=this.subjectFormHTML,t=e.relations;return e._loaded?void 0===t?[]:t:this.subjectFromOSS.relations||[]}},{key:"subjectPrev",get:function(){return this.subjectRelations.find(function(e){return"前传"===e.type})}},{key:"subjectAfter",get:function(){return this.subjectRelations.find(function(e){return"续集"===e.type})}},{key:"subjectSeries",get:function(){var e;return"系列"===(null==(e=this.subjectRelations)||null==(e=e[0])?void 0:e.type)?this.subjectRelations[0]:null}},{key:"subjectAnime",get:function(){var e;return(this.titleLabel||"").includes("系列")&&("动画"===(null==(e=this.subjectRelations.find(function(e){return"动画"===e.type||"其他"===e.type}))?void 0:e.type)||"其他"===(null==e?void 0:e.type)&&this.jp.includes(null==e?void 0:e.title))?e:null}},{key:"subjectDiff",get:function(){return this.subjectRelations.find(function(e){return"不同演绎"===e.type})}},{key:"hd",get:function(){var e=(0,x.getOTA)().HD,e=void 0===e?[]:e;if(e.includes(Number(this.subjectId)))return this.subjectId;if(this.subjectSeries){var t=this.subjectSeries.id;if(e.includes(Number(t)))return t}return!1}},{key:"catalogs",get:function(){return p.usersStore.catalogs()}},{key:"catalogDetail",value:function(e){return(0,m.computed)(function(){return p.discoveryStore.catalogDetail(e)}).get()}},{key:"catalogIncludes",get:function(){var t=this,e=this.catalogs.list,s=0;return e.forEach(function(e){t.catalogDetail(e.id).list.some(function(e){return e.id==t.subjectId})&&(s+=1)}),s}}]),(0,u.default)((o=R).prototype,"subjectId",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectId"),o.prototype),(0,u.default)(o.prototype,"namespace",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"namespace"),o.prototype),(0,u.default)(o.prototype,"rendered",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"rendered"),o.prototype),(0,u.default)(o.prototype,"x18",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"x18"),o.prototype),(0,u.default)(o.prototype,"onAirCustom",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"onAirCustom"),o.prototype),(0,u.default)(o.prototype,"filterDefault",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"filterDefault"),o.prototype),(0,u.default)(o.prototype,"showComment",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"showComment"),o.prototype),(0,u.default)(o.prototype,"footerEmptyDataComponent",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"footerEmptyDataComponent"),o.prototype),(0,u.default)(o.prototype,"url",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),(0,u.default)(o.prototype,"isLogin",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"isLogin"),o.prototype),(0,u.default)(o.prototype,"userId",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"userId"),o.prototype),(0,u.default)(o.prototype,"subject",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subject"),o.prototype),(0,u.default)(o.prototype,"subjectFormHTML",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectFormHTML"),o.prototype),(0,u.default)(o.prototype,"subjectFormCDN",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectFormCDN"),o.prototype),(0,u.default)(o.prototype,"subjectFromOSS",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectFromOSS"),o.prototype),(0,u.default)(o.prototype,"subjectComments",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectComments"),o.prototype),(0,u.default)(o.prototype,"cover",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"cover"),o.prototype),(0,u.default)(o.prototype,"collection",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"collection"),o.prototype),(0,u.default)(o.prototype,"userProgress",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"userProgress"),o.prototype),(0,u.default)(o.prototype,"type",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"type"),o.prototype),(0,u.default)(o.prototype,"subjectType",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectType"),o.prototype),(0,u.default)(o.prototype,"subjectTypeValue",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectTypeValue"),o.prototype),(0,u.default)(o.prototype,"ningMoeEpOffset",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"ningMoeEpOffset"),o.prototype),(0,u.default)(o.prototype,"onlinePlayActionSheetData",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"onlinePlayActionSheetData"),o.prototype),(0,u.default)(o.prototype,"action",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"action"),o.prototype),(0,u.default)(o.prototype,"isLimit",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"isLimit"),o.prototype),(0,u.default)(o.prototype,"hideScore",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"hideScore"),o.prototype),(0,u.default)(o.prototype,"userOrigins",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"userOrigins"),o.prototype),(0,u.default)(o.prototype,"actions",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"actions"),o.prototype),(0,u.default)(o.prototype,"onlineOrigins",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"onlineOrigins"),o.prototype),(0,u.default)(o.prototype,"onlineComicOrigins",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"onlineComicOrigins"),o.prototype),(0,u.default)(o.prototype,"onlineDiscOrigins",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"onlineDiscOrigins"),o.prototype),(0,u.default)(o.prototype,"onlineGameOrigins",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"onlineGameOrigins"),o.prototype),(0,u.default)(o.prototype,"isPS",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"isPS"),o.prototype),(0,u.default)(o.prototype,"animeInfo",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"animeInfo"),o.prototype),(0,u.default)(o.prototype,"animeTags",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"animeTags"),o.prototype),(0,u.default)(o.prototype,"hentaiTags",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"hentaiTags"),o.prototype),(0,u.default)(o.prototype,"gameInfo",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"gameInfo"),o.prototype),(0,u.default)(o.prototype,"gameTags",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"gameTags"),o.prototype),(0,u.default)(o.prototype,"mangaInfo",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"mangaInfo"),o.prototype),(0,u.default)(o.prototype,"mangaTags",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"mangaTags"),o.prototype),(0,u.default)(o.prototype,"wenkuInfo",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"wenkuInfo"),o.prototype),(0,u.default)(o.prototype,"wenkuTags",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"wenkuTags"),o.prototype),(0,u.default)(o.prototype,"source",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"source"),o.prototype),(0,u.default)(o.prototype,"filterEpsData",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"filterEpsData"),o.prototype),(0,u.default)(o.prototype,"status",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"status"),o.prototype),(0,u.default)(o.prototype,"release",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"release"),o.prototype),(0,u.default)(o.prototype,"year",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"year"),o.prototype),(0,u.default)(o.prototype,"artist",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"artist"),o.prototype),(0,u.default)(o.prototype,"imageWidth",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"imageWidth"),o.prototype),(0,u.default)(o.prototype,"imageHeight",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"imageHeight"),o.prototype),(0,u.default)(o.prototype,"coverPlaceholder",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"coverPlaceholder"),o.prototype),(0,u.default)(o.prototype,"jp",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"jp"),o.prototype),(0,u.default)(o.prototype,"cn",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"cn"),o.prototype),(0,u.default)(o.prototype,"rating",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"rating"),o.prototype),(0,u.default)(o.prototype,"lock",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"lock"),o.prototype),(0,u.default)(o.prototype,"subjectCollection",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectCollection"),o.prototype),(0,u.default)(o.prototype,"eps",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"eps"),o.prototype),(0,u.default)(o.prototype,"toEps",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"toEps"),o.prototype),(0,u.default)(o.prototype,"disc",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"disc"),o.prototype),(0,u.default)(o.prototype,"summary",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"summary"),o.prototype),(0,u.default)(o.prototype,"tags",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"tags"),o.prototype),(0,u.default)(o.prototype,"info",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"info"),o.prototype),(0,u.default)(o.prototype,"crt",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"crt"),o.prototype),(0,u.default)(o.prototype,"staff",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"staff"),o.prototype),(0,u.default)(o.prototype,"relations",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"relations"),o.prototype),(0,u.default)(o.prototype,"comic",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"comic"),o.prototype),(0,u.default)(o.prototype,"like",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"like"),o.prototype),(0,u.default)(o.prototype,"titleLabel",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"titleLabel"),o.prototype),(0,u.default)(o.prototype,"catalog",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"catalog"),o.prototype),(0,u.default)(o.prototype,"bilibiliSite",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"bilibiliSite"),o.prototype),(0,u.default)(o.prototype,"iqiyiSite",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"iqiyiSite"),o.prototype),(0,u.default)(o.prototype,"youkuSite",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"youkuSite"),o.prototype),(0,u.default)(o.prototype,"subjectRelations",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectRelations"),o.prototype),(0,u.default)(o.prototype,"subjectPrev",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectPrev"),o.prototype),(0,u.default)(o.prototype,"subjectAfter",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectAfter"),o.prototype),(0,u.default)(o.prototype,"subjectSeries",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectSeries"),o.prototype),(0,u.default)(o.prototype,"subjectAnime",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectAnime"),o.prototype),(0,u.default)(o.prototype,"subjectDiff",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"subjectDiff"),o.prototype),(0,u.default)(o.prototype,"hd",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"hd"),o.prototype),(0,u.default)(o.prototype,"catalogs",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"catalogs"),o.prototype),(0,u.default)(o.prototype,"catalogIncludes",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"catalogIncludes"),o.prototype);var I,c=o;function R(){return(0,r.default)(this,R),I.apply(this,arguments)}t.default=c},"./src/screens/home/subject/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.SORT_RELATION_DESC=t.NAMESPACE=t.INIT_RATING=t.EXCLUDE_STATE=void 0;s=s("./src/constants/index.ts"),t.NAMESPACE="ScreenSubject",s={visibleBottom:0,visible:!(t.INIT_RATING={count:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},score:"",total:""}),disabled:!1,folder:!1,rendered:s.STORYBOOK,chap:"",vol:"",translateResult:[],discTranslateResult:[],subject:{},flip:!1,flipKey:0,flipEps:!1},t.EXCLUDE_STATE=s,s=Object.assign({},s,{epsReverse:!1,watchedEps:"",filterEps:0,filterScores:[],bangumiInfo:{sites:[],type:""},epsData:{_loaded:!1},epsThumbs:[],epsThumbsHeader:{},videos:[],anitabi:{litePoints:[],_loaded:!1},_loaded:!1});t.STATE=s;t.SORT_RELATION_DESC={"动画":110,"续集":100,"前传":90,"主线故事":82,"剧场版":81,"番外篇":80,"相同世界观":79,"衍生":78,"书籍":70,"片头曲":65,"片尾曲":64,"原声集":63,"角色歌":62,"游戏":40,"三次元":30,"其他":-10}},"./src/screens/home/subject/store/fetch.ts":(e,t,s)=>{var l=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.from.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.set.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),m=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),p=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),j=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),r=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),b=o(s("./src/assets/json/thirdParty/bangumiData.min.json")),h=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),y=s("./src/utils/fetch/index.ts"),g=s("./src/utils/douban/index.ts"),x=s("./src/utils/bilibili/index.ts"),S=s("./src/utils/kv/index.ts"),v=s("./src/constants/index.ts"),o=o(s("./src/screens/home/subject/store/computed.tsx")),T=s("./src/screens/home/subject/store/ds.ts"),O=["ts"];function a(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=o?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}s=o.default,(0,r.default)(R,s),I=a(R);var I,o=(0,n.default)(R);function R(){var u;(0,p.default)(this,R);for(var t,s,o,n,r,i,e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];return u=I.call.apply(I,[this].concat(c)),(0,f.default)((0,j.default)(u),"fetchSubject",function(){return"large"!==u.subject._responseGroup&&(0,_.opitimize)(u.subject,60)?u.subject:h.subjectStore.fetchSubject(u.subjectId)}),(0,f.default)((0,j.default)(u),"fetchSubjectFormHTML",(0,m.default)(l.mark(function e(){var t,s,o;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.subjectStore.fetchSubjectFormHTML(u.subjectId);case 2:return t=e.sent,s=t.watchedEps,o=t.book,u.setState({watchedEps:s||"0",chap:o.chap||"0",vol:o.vol||"0"}),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,f.default)((0,j.default)(u),"fetchSubjectFromOSS",(0,m.default)(l.mark(function e(){var t,s,o,n;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.subjectFormHTML._loaded)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,e.next=5,(0,S.get)("subject_"+u.subjectId);case 5:if(t=e.sent){e.next=9;break}return u.updateSubjectThirdParty(),e.abrupt("return");case 9:s=t.ts,o=(0,d.default)(t,O),n=(0,_.getTimestamp)(),"object"!=typeof o||Array.isArray(o)||u.setState({subject:Object.assign({},o,{_loaded:n})}),604800<=n-s&&u.updateSubjectThirdParty(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(2);case 17:case"end":return e.stop()}},e,null,[[2,15]])}))),(0,f.default)((0,j.default)(u),"fetchSubjectFormCDN",(0,m.default)(l.mark(function e(){var t,s;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.systemStore.setting,s=u.subjectFormHTML._loaded,!t.cdn||s)return e.abrupt("return",!0);e.next=4;break;case 4:return e.abrupt("return",h.subjectStore.fetchSubjectFormCDN(u.subjectId));case 5:case"end":return e.stop()}},e)}))),(0,f.default)((0,j.default)(u),"fetchThirdParty",(t=(0,m.default)(l.mark(function e(t){var s,o;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=b.default.find(function(e){return e.id==u.subjectId||e.j===(0,_.HTMLDecode)(t.name)||e.c===(0,_.HTMLDecode)(t.name)}))&&(o=(0,_.unzipBangumiData)(s),u.setState({bangumiInfo:{sites:o.sites,type:o.type}})),v.STORYBOOK)return e.abrupt("return");e.next=4;break;case 4:return e.next=6,u.getThirdParty();case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:s&&setTimeout(function(){u.fetchEpsThumbs(o)},0),!s&&"动画"===u.type||"三次元"===u.type?u.fetchMovieFromDouban(u.cn,u.jp):"游戏"===u.type?u.fetchGameFromDouban(u.cn,u.jp):"音乐"===u.type&&setTimeout(function(){u.fetchMVFromBilibili(u.cn,u.jp,u.artist)},2e3);case 11:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,f.default)((0,j.default)(u),"fetchCollection",function(){return h.collectionStore.fetchCollection(u.subjectId)}),(0,f.default)((0,j.default)(u),"fetchSubjectComments",function(e,t){return h.subjectStore.fetchSubjectComments({subjectId:u.subjectId},e,t)}),(0,f.default)((0,j.default)(u),"_fetchTrackUsersInfo",!1),(0,f.default)((0,j.default)(u),"fetchTrackUsersInfo",(s=(0,m.default)(l.mark(function e(t){var s,o;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u._fetchTrackUsersInfo||!t.length)return e.abrupt("return",!1);e.next=2;break;case 2:return e.next=4,h.usersStore.init("usersInfo");case 4:s=0;case 5:if(!(s<t.length)){e.next=16;break}if(o=t[s],h.usersStore.usersInfo(o)._loaded){e.next=13;break}return e.next=11,h.usersStore.fetchUsers({userId:o});case 11:(o=e.sent).userId&&h.usersStore.updateUsersInfo({avatar:o.avatar,userId:o.userId,userName:o.userName});case 13:s+=1,e.next=5;break;case 16:u._fetchTrackUsersInfo=!0;case 17:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})),(0,f.default)((0,j.default)(u),"fetchTrackComments",function(){var e,s,o;return!!u.subjectTypeValue&&!(null==(e=h.systemStore.setting["comment"+(0,_.titleCase)(u.subjectTypeValue)])||!e.length)&&(s=[],o=(0,_.getTimestamp)(),e.forEach(function(e){var t=h.collectionStore.usersSubjectCollection(e,u.subjectId);(!t._loaded||3600<=o-Number(t._loaded))&&s.push(function(){return h.collectionStore.fetchUsersCollection(e,u.subjectId)})}),setTimeout(function(){u.fetchTrackUsersInfo(e)},0),(0,_.queue)(s,1))}),(0,f.default)((0,j.default)(u),"fetchEpsData",(0,m.default)(l.mark(function e(){var t,s;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.STORYBOOK)return e.abrupt("return",!1);e.next=2;break;case 2:if("动画"===u.type)return e.prev=3,e.next=6,(0,y.xhrCustom)({url:(0,v.CDN_EPS)(u.subjectId)});e.next=18;break;case 6:t=e.sent,t=t._response,s={_loaded:(0,_.getTimestamp)()},v.SITES.forEach(function(e){return s[e]={}}),JSON.parse(t).eps.forEach(function(e,t){e.sites.forEach(function(e){v.SITES.includes(e.site)&&(s[e.site][t]=e.url)})}),u.setState({epsData:s}),u.setStorage(u.namespace),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(T.NAMESPACE,"fetchEpsData",e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}))),(0,f.default)((0,j.default)(u),"fetchPersons",function(){return h.monoStore.fetchPersons({subjectId:u.subjectId})}),(0,f.default)((0,j.default)(u),"fetchEpsThumbs",(o=(0,m.default)(l.mark(function e(t){var s,o,n,r,i,c,a,d;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.STORYBOOK)return e.abrupt("return",!1);e.next=2;break;case 2:if(12<=u.state.epsThumbs.length)return e.abrupt("return",!1);e.next=4;break;case 4:return e.prev=4,s=null==t||null==(s=t.titleTranslate)||null==(s=s["zh-Hans"])?void 0:s[0],o=t.title,e.next=9,u.fetchMovieFromDouban(s,o);case 9:if(u.state.epsThumbs.length<12&&u.bilibiliSite.id)return o=(0,_.getBangumiUrl)(u.bilibiliSite),e.next=13,(0,y.xhrCustom)({url:o});e.next=24;break;case 13:if(n=e.sent,n=n._response,n=n.match(/"season_id":(\d+)/))return n=n[1],e.next=20,(0,y.xhrCustom)({url:"https://api.bilibili.com/pgc/web/season/section?season_id="+n});e.next=24;break;case 20:n=e.sent,i=n._response,i=JSON.parse(i),r=i.message,i=i.result,"success"===r&&null!=i&&null!=(r=i.main_section)&&r.episodes&&(u.setState({epsThumbs:Array.from(new Set(i.main_section.episodes.map(function(e){return e.cover.replace("http://","https://")+"@192w_120h_1c.jpg"}))),epsThumbsHeader:{Referer:"https://www.bilibili.com/"}}),u.setStorage(u.namespace),u.updateThirdParty());case 24:if(u.state.epsThumbs.length<12&&u.youkuSite.id)return r=(0,_.getBangumiUrl)(u.youkuSite),e.next=28,(0,y.xhrCustom)({url:r});e.next=40;break;case 28:if(i=e.sent,c=i._response,c=c.match(/showid:"(\d+)"/))return c=c[1],e.next=35,(0,y.xhrCustom)({url:"https://list.youku.com/show/module?id="+c+"&tab=point&callback=jQuery"});e.next=40;break;case 35:c=e.sent,a=c._response,u.setState({epsThumbs:Array.from(new Set((decodeURIComponent(a).replace(/\\\/>/g,"/>").replace(/(\\"|"\\)/g,'"').match(/<img.+?src=('|")?([^'"]+)('|")?(?:\s+|>)/gim)||[]).map(function(e){e=e.match(/src="(.+?)"/);return e?e[1].replace(/\\\//g,"/").replace("http://","https://"):""}).filter(function(e){return!!e}))),epsThumbsHeader:{Referer:"https://list.youku.com/"}}),u.setStorage(u.namespace),u.updateThirdParty();case 40:if(u.state.epsThumbs.length<12&&u.iqiyiSite.id)return a=(0,_.getBangumiUrl)(u.iqiyiSite),e.next=44,(0,y.xhrCustom)({url:a});e.next=48;break;case 44:d=e.sent,d=d._response,(d=(0,_.HTMLTrim)(d,!0).match(/data-jpg-img="(.+?)"/g))&&(u.setState({epsThumbs:Array.from(new Set(d.map(function(e){return"https:"+e.replace(/(data-jpg-img="|")/g,"")}).filter(function(e,t){return!!t}))),epsThumbsHeader:{Referer:"https://www.iqiyi.com/"}}),u.setStorage(u.namespace),u.updateThirdParty());case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(4),console.error("Subject","fetchEpsThumbs",e.t0);case 53:case"end":return e.stop()}},e,null,[[4,50]])})),function(e){return o.apply(this,arguments)})),(0,f.default)((0,j.default)(u),"fetchMovieFromDouban",(n=(0,m.default)(l.mark(function e(t,s){var o,n,r;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.STORYBOOK||u.x18)return e.abrupt("return",!1);e.next=2;break;case 2:if(o=t||s)return e.next=6,(0,g.search)(o);e.next=18;break;case 6:return n=e.sent,n=(0,g.matchMovie)(o,n,s),e.next=10,(0,g.getTrailer)(n);case 10:return(r=e.sent).data.length&&u.setState({videos:r.data,epsThumbsHeader:{Referer:r.referer}}),e.next=14,(0,g.getPreview)(n);case 14:(r=e.sent).data.length&&u.setState({epsThumbs:r.data.slice().reverse(),epsThumbsHeader:{Referer:r.referer}}),u.setStorage(u.namespace),u.updateThirdParty();case 18:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})),(0,f.default)((0,j.default)(u),"fetchGameFromDouban",(r=(0,m.default)(l.mark(function e(t,s){var o,n,r;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.STORYBOOK||u.x18)return e.abrupt("return",!1);e.next=2;break;case 2:if(o=t||s)return e.next=6,(0,g.search)(o,"game");e.next=18;break;case 6:return n=e.sent,n=(0,g.matchGame)(o,n),e.next=10,(0,g.getVideo)(n,"game");case 10:return(r=e.sent).data.length&&u.setState({videos:r.data,epsThumbsHeader:{Referer:r.referer}}),e.next=14,(0,g.getPreview)(n,"game");case 14:(r=e.sent).data.length&&u.setState({epsThumbs:r.data,epsThumbsHeader:{Referer:r.referer}}),u.setStorage(u.namespace),u.updateThirdParty();case 18:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})),(0,f.default)((0,j.default)(u),"fetchMVFromBilibili",(i=(0,m.default)(l.mark(function e(t,s,o){var n;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.STORYBOOK)return e.abrupt("return",!1);e.next=2;break;case 2:return e.next=4,(0,x.search)(t||s,o);case 4:(n=e.sent).length&&(u.setState({videos:n,epsThumbsHeader:{Referer:"https://m.bilibili.com"}}),u.setStorage(u.namespace),u.updateThirdParty());case 6:case"end":return e.stop()}},e)})),function(e,t,s){return i.apply(this,arguments)})),(0,f.default)((0,j.default)(u),"getThirdParty",(0,m.default)(l.mark(function e(){var t,s,o,n,r;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,S.get)("douban_"+u.subjectId);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:if(s=t.ts,o=t.videos,o=void 0===o?[]:o,n=t.epsThumbs,n=void 0===n?[]:n,r=t.epsThumbsHeader,r=void 0===r?{}:r,o.length+n.length<=2||604800<=(0,_.getTimestamp)()-s||s<1682762759)return e.abrupt("return",!0);e.next=9;break;case 9:return u.setState({videos:o,epsThumbs:n,epsThumbsHeader:r}),u.setStorage(u.namespace),e.abrupt("return",!1);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,null,[[0,14]])}))),(0,f.default)((0,j.default)(u),"updateSubjectThirdParty",function(){setTimeout(function(){var e=u.subjectFormHTML,t=e._loaded,e=e.formhash;t&&e&&(0,S.update)("subject_"+u.subjectId,Object.assign({},(0,_.omit)(u.subjectFormHTML,["type","watchedEps","friend","who","formhash","_loaded"]),{id:u.subjectId,type:u.subject.type,name:u.jp,name_cn:u.cn,image:null==(t=u.subject.images)?void 0:t.common,eps:u.eps,collection:u.subjectCollection,summary:u.summary,rating:u.rating,rank:u.subject.rank||"",character:u.crt,staff:u.staff,titleLabel:u.titleLabel}))},1e4)}),(0,f.default)((0,j.default)(u),"updateThirdParty",function(){setTimeout(function(){(0,S.update)("douban_"+u.subjectId,{videos:u.state.videos,epsThumbs:u.state.epsThumbs,epsThumbsHeader:u.state.epsThumbsHeader})},0)}),(0,f.default)((0,j.default)(u),"fetchAnitabi",(0,m.default)(l.mark(function e(){var t,s,o,n,r,i;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.STORYBOOK)return e.abrupt("return",!1);e.next=2;break;case 2:if(-1!==(t=h.systemStore.setting.showAnitabi)&&t){e.next=5;break}return e.abrupt("return",!1);case 5:if((t=u.state.anitabi._loaded)&&(0,_.getTimestamp)()-Number(t)<=86400)return e.abrupt("return",!0);e.next=8;break;case 8:return e.prev=8,o="anitabi_"+u.subjectId,e.next=12,(0,S.get)(o);case 12:if(null!=(n=e.sent)&&n._loaded&&(0,_.getTimestamp)()-Number(null==n?void 0:n._loaded)<=86400)return u.setState({anitabi:n}),e.abrupt("return",!0);e.next=16;break;case 16:return e.next=18,(0,y.xhrCustom)({url:(0,v.API_ANITABI)(u.subjectId)});case 18:return n=e.sent,r=n._response,null!=(r=r.length?JSON.parse(r):{})&&null!=(s=r.litePoints)&&s.length?i=Object.assign({},r,{_loaded:(0,_.getTimestamp)()}):(i={_loaded:(0,_.getTimestamp)()},u.setState({anitabi:{_loaded:(0,_.getTimestamp)()}})),u.setState({anitabi:i}),u.setStorage(u.namespace),setTimeout(function(){(0,S.update)(o,i)},0),e.abrupt("return",!0);case 28:return e.prev=28,e.t0=e.catch(8),e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,null,[[8,28]])}))),u}t.default=o},"./src/screens/home/subject/store/index.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),f=s("./src/utils/fetch/index.ts"),b=s("./src/constants/index.ts"),o=o(s("./src/screens/home/subject/store/action.ts")),h=s("./src/screens/home/subject/store/ds.ts");function _(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}s=o.default,(0,d.default)(g,s),y=_(g);var y,o=(0,r.default)(g);function g(){var r;(0,c.default)(this,g);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r=y.call.apply(y,[this].concat(t)),(0,m.default)((0,a.default)(r),"init",(0,n.default)(i.mark(function e(){var t,s,o,n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state._loaded,s=(0,j.getTimestamp)(),o=!t||60<s-Number(t),e.prev=3,e.next=6,r.getStorage(r.namespace);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(n=e.t0,r.setState(Object.assign({},n,h.EXCLUDE_STATE,{_loaded:o?s:t})),r.fetchSubjectFromOSS(),o)return p.collectionStore.fetchCollectionStatusQueue([r.subjectId]),e.abrupt("return",r.onHeaderRefresh());e.next=15;break;case 15:return e.abrupt("return",!0);case 18:return e.prev=18,e.t1=e.catch(3),r.setState(Object.assign({},h.EXCLUDE_STATE,{_loaded:o?s:t})),e.abrupt("return",!0);case 22:case"end":return e.stop()}},e,null,[[3,18]])}))),(0,m.default)((0,a.default)(r),"onHeaderRefresh",(0,n.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.state.subject._loaded||r.fetchSubjectFormCDN(),b.SHARE_MODE||r.fetchCollection(),b.SHARE_MODE||p.userStore.fetchUserProgress(r.subjectId),e.next=5,r.fetchSubject();case 5:return t=e.sent,(0,f.queue)([function(){return r.fetchOTA()},function(){return r.fetchThirdParty(t)},function(){return r.fetchAnitabi()},function(){return r.fetchTrackComments()},function(){return r.fetchSubjectComments(!0)},function(){return r.fetchSubjectFormHTML()},function(){return r.fetchEpsData()},function(){return r.setRendered()},function(){var e;return(null==(e=r.subject.eps)?void 0:e.length)<1e3||p.subjectStore.fetchSubjectEpV2(r.subjectId)}]),404===(null==t?void 0:t.code)&&r.fetchPersons(),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(r),"fetchOTA",function(){var e;"动画"===r.type?null!=(e=r.animeInfo)&&e.i&&p.otaStore.fetchAnime(r.animeInfo.i):"游戏"===r.type&&null!=(e=r.gameInfo)&&e.i&&p.otaStore.fetchGame(r.gameInfo.i)}),r}t.default=o},"./src/screens/home/subject/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/createClass.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=s("./node_modules/mobx/dist/mobx.esm.js"),o=o(s("./src/utils/store/index.ts")),m=s("./src/screens/home/subject/store/ds.ts");function p(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=o.default,(0,c.default)(f,s),j=p(f);var j,o=(0,n.default)(f);function f(){var e;(0,r.default)(this,f);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=j.call.apply(j,[this].concat(s)),(0,u.default)((0,i.default)(e),"params",void 0),(0,u.default)((0,i.default)(e),"state",(0,l.observable)(m.STATE)),e}t.default=o},"./src/screens/home/subject/summary/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={styles:{},showSummary:!0,translateResult:[],content:"",onSwitchBlock:function(){}}},"./src/screens/home/subject/summary/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/summary/summary.tsx")),c=s("./src/screens/home/subject/summary/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),o=(0,r.obc)(function(e,t){var t=t.$,s=n.systemStore.setting.showSummary;return-1===s||t.subject._loaded&&!t.summary?null:(0,a.jsx)(i.default,{styles:(0,c.memoStyles)(),showSummary:s,translateResult:t.state.translateResult.slice(),content:t.summary.replace(/\r\n\r\n/g,"\r\n"),onSwitchBlock:t.onSwitchBlock})});t.default=o;try{summary.displayName="summary",summary.__docgenInfo={description:"",displayName:"summary",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/summary/index.tsx#summary"]={docgenInfo:summary.__docgenInfo,name:"summary",path:"src/screens/home/subject/summary/index.tsx#summary"})}catch(e){}},"./src/screens/home/subject/summary/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:210,paddingHorizontal:o._.wind,marginTop:o._.sm},hide:{paddingHorizontal:o._.wind,marginTop:o._.sm,marginBottom:-o._.sm}}});t.memoStyles=s},"./src/screens/home/subject/summary/summary.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),i=(o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),a=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),u=o(s("./src/screens/home/subject/icon/translate.tsx")),l=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/summary/ds.ts"),m=s("./node_modules/react/jsx-runtime.js"),p=["translateResult"],s=(0,r.memo)(function(e){var t=e.styles,s=e.showSummary,o=e.translateResult,n=e.content,r=e.onSwitchBlock;return(0,m.jsxs)(i.default,{style:s?t.container:t.hide,children:[(0,m.jsx)(a.SectionTitle,{right:s?(0,m.jsx)(u.default,{}):(0,m.jsx)(l.default,{name:"简介",value:"showSummary"}),icon:!s&&"md-navigate-next",onPress:function(){return r("showSummary")},children:"简介"}),s&&(0,m.jsx)(i.default,{children:o.length?(0,m.jsx)(i.default,{children:o.map(function(e,t){return(0,m.jsxs)(i.default,{style:d._.mt.sm,children:[(0,m.jsx)(c.Text,{style:d._.mt.md,type:"sub",size:12,lineHeight:14,selectable:!0,children:e.src.trim()}),(0,m.jsx)(c.Text,{style:d._.mt.sm,size:15,lineHeight:17,bold:!0,selectable:!0,children:e.dst.trim()})]},t)})}):!!n&&(0,m.jsx)(c.Expand,{ratio:.88,children:(0,m.jsx)(c.Text,{style:d._.mt.sm,size:15,lineHeight:22,selectable:!0,children:n})})})]})},o.DEFAULT_PROPS,function(e){var t=e.translateResult,e=(0,n.default)(e,p);return Object.assign({translateResult:t.length},e)});t.default=s;try{summary.displayName="summary",summary.__docgenInfo={description:"",displayName:"summary",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingHorizontal: number; marginTop: number; }; hide: { paddingHorizontal: number; marginTop: number; marginBottom: number; }; }"}},showSummary:{defaultValue:null,description:"",name:"showSummary",required:!0,type:{name:"LayoutValue"}},translateResult:{defaultValue:null,description:"",name:"translateResult",required:!0,type:{name:"any[]"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"string"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/summary/summary.tsx#summary"]={docgenInfo:summary.__docgenInfo,name:"summary",path:"src/screens/home/subject/summary/summary.tsx#summary"})}catch(e){}},"./src/screens/home/subject/tags/block/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),u=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/subject/tags/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s,o=e.path,e=e.tags,n=t.$,r=t.navigation;return null!=e&&e.length?(s=(0,l.memoStyles)(),t=a.systemStore.setting.subjectTagsExpand,(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.Flex,{style:(0,d.stl)(s.badge,t&&s.badgeExpand),children:(0,m.jsx)(c.Text,{size:13,type:"sub",children:"第三方标签"})}),e.map(function(e){return(0,m.jsx)(c.Touchable,{animate:!0,scale:.9,onPress:function(){(0,u.t)("条目.跳转",{to:o,from:"标签",subjectId:n.subjectId}),r.push(o,{_tags:[e]})},children:(0,m.jsx)(i.default,{style:s.item,children:(0,m.jsx)(c.Text,{size:13,bold:!0,children:e})})},e)})]})):null});t.default=s},"./src/screens/home/subject/tags/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,subjectType:"",showTags:!0,subjectTagsExpand:!0,tag:[],tags:[],animeTags:[],hentaiTags:[],gameTags:[],mangaTags:[],wenkuTags:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/tags/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/tags/styles.ts"),c=o(s("./src/screens/home/subject/tags/tags.tsx")),a=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s=t.$,t=t.navigation,o=r.systemStore.setting,n=o.showTags,o=o.subjectTagsExpand;return-1===n?null:(0,a.jsx)(c.default,{navigation:t,styles:(0,i.memoStyles)(),subjectId:s.subjectId,subjectType:s.subjectType,showTags:n,subjectTagsExpand:o,tag:s.collection.tag,tags:s.tags,animeTags:s.animeTags,hentaiTags:s.hentaiTags,gameTags:s.gameTags,mangaTags:s.mangaTags,wenkuTags:s.wenkuTags,onSwitchBlock:s.onSwitchBlock})});t.default=o;try{tags.displayName="tags",tags.__docgenInfo={description:"",displayName:"tags",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/tags/index.tsx#tags"]={docgenInfo:tags.__docgenInfo,name:"tags",path:"src/screens/home/subject/tags/index.tsx#tags"})}catch(e){}},"./src/screens/home/subject/tags/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:96},loading:{height:96},onair:{marginTop:-8},badge:{height:24,paddingRight:o._.md,paddingLeft:o._.sm},badgeExpand:{paddingBottom:8},item:{paddingVertical:o._.r(2),paddingHorizontal:o._.r(8),marginRight:o._.r(8),marginBottom:o._.r(8),backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderWidth:1,borderColor:o._.select(o._.colorBorder,o._._colorDarkModeLevel1),borderRadius:o._.radiusSm,overflow:"hidden"},selected:{backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel1),borderColor:o._.select(o._.colorPrimaryBorder,o._._colorDarkModeLevel1)},more:{paddingVertical:o._.md,paddingHorizontal:100,marginTop:-o._.sm,borderRadius:o._.radiusSm,overflow:"hidden"}}});t.memoStyles=s},"./src/screens/home/subject/tags/tags.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),b=s("./src/components/index.ts"),h=s("./src/screens/_/index.ts"),_=s("./src/stores/index.ts"),y=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),g=s("./src/utils/fetch/index.ts"),x=s("./src/constants/index.ts"),S=o(s("./src/screens/home/subject/icon/hidden.tsx")),v=o(s("./src/screens/home/subject/icon/game.tsx")),T=o(s("./src/screens/home/subject/tags/block/index.tsx")),o=s("./src/screens/home/subject/tags/ds.ts"),O=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var n=e.navigation,r=e.styles,i=e.subjectId,c=e.subjectType,t=e.showTags,s=e.subjectTagsExpand,a=e.tag,o=e.tags,d=e.animeTags,u=e.hentaiTags,l=e.gameTags,m=e.mangaTags,p=e.wenkuTags,j=e.onSwitchBlock,e=(0,O.jsxs)(O.Fragment,{children:[o.map(function(e,t){var s=e.name,e=e.count,o=a.includes(s);return(0,O.jsx)(b.Touchable,{animate:!0,scale:.9,onPress:function(){(0,g.t)("条目.跳转",{to:"Tag",from:"标签",subjectId:i}),n.push("Tag",{type:x.MODEL_SUBJECT_TYPE.getLabel(c),tag:s})},children:(0,O.jsxs)(b.Flex,{style:o?[r.item,r.selected]:r.item,children:[(0,O.jsx)(b.Text,{type:_._.select("desc",o?"main":"desc"),size:13,bold:!0,children:s}),(0,O.jsxs)(b.Text,{type:_._.select("sub",o?"main":"sub"),size:12,lineHeight:13,bold:!0,children:[" ",e]})]})},t)}),(0,O.jsx)(T.default,{path:"Anime",tags:d}),(0,O.jsx)(T.default,{path:"Hentai",tags:u}),(0,O.jsx)(T.default,{path:"Game",tags:l}),(0,O.jsx)(T.default,{path:"Manga",tags:m}),(0,O.jsx)(T.default,{path:"Wenku",tags:p})]}),d=t&&!!o.length;return(0,O.jsxs)(f.default,{style:(0,y.stl)(_._.mt.lg,t?r.container:_._.short,!d&&_._.mb.md),children:[(0,O.jsx)(h.SectionTitle,{style:_._.container.wind,right:t?(0,O.jsx)(v.default,{}):(0,O.jsx)(S.default,{name:"标签",value:"showTags"}),icon:!t&&"md-navigate-next",onPress:function(){return j("showTags")},children:"标签"}),d&&(0,O.jsx)(O.Fragment,{children:s?(0,O.jsxs)(f.default,{style:_._.container.windMtSm,children:[(0,O.jsx)(b.Flex,{wrap:"wrap",children:e}),(0,O.jsx)(b.Heatmap,{id:"条目.跳转",from:"标签"})]}):(0,O.jsx)(b.ScrollView,{style:_._.mt.md,contentContainerStyle:_._.container.wind,horizontal:!0,children:e})}),d&&(0,O.jsx)(f.default,{style:r.more,children:(0,O.jsx)(b.Touchable,{onPress:function(){return _.systemStore.switchSetting("subjectTagsExpand")},children:(0,O.jsx)(b.Flex,{justify:"center",children:(0,O.jsx)(b.Iconfont,{name:s?"md-keyboard-arrow-up":"md-keyboard-arrow-down",size:_._.device(24,32)})})})}),(0,O.jsx)(h.PreventTouchPlaceholder,{})]})},o.DEFAULT_PROPS);t.default=s;try{tags.displayName="tags",tags.__docgenInfo={description:"",displayName:"tags",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; }; loading: { height: number; }; onair: { marginTop: number; }; badge: { height: number; paddingRight: number; paddingLeft: number; }; badgeExpand: { paddingBottom: number; }; item: { ...; }; selected: { ...; }; more: { ...; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},subjectType:{defaultValue:null,description:"",name:"subjectType",required:!0,type:{name:"enum",value:[{value:'"2"'},{value:'"1"'},{value:'"4"'},{value:'"3"'},{value:'"6"'}]}},showTags:{defaultValue:null,description:"",name:"showTags",required:!0,type:{name:"LayoutValue"}},subjectTagsExpand:{defaultValue:null,description:"",name:"subjectTagsExpand",required:!0,type:{name:"boolean"}},tag:{defaultValue:null,description:"",name:"tag",required:!0,type:{name:"string[]"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"DeepPartial<{ name: string; count: string; }>[]"}},animeTags:{defaultValue:null,description:"",name:"animeTags",required:!0,type:{name:'("异世界" | "音乐" | "游戏" | "其他" | "日常" | "奇幻" | "搞笑" | "战斗" | "校园" | "冒险" | "治愈" | "科幻" | "爱情" | "百合" | "后宫" | "热血" | "励志" | "悬疑" | "竞技" | "歌舞" | "泡面番" | "玄幻" | "神魔" | "战争" | "女性向" | "机战" | "青春" | ... 35 more ... | "战机")[]'}},hentaiTags:{defaultValue:null,description:"",name:"hentaiTags",required:!0,type:{name:'("异世界" | "百合" | "后宫" | "偶像" | "耽美" | "伪娘" | "姐" | "妹" | "母" | "人妻" | "青梅竹马" | "处女" | "御姐" | "熟女" | "JK" | "运动少女" | "大小姐" | "老师" | "女医护士" | "女僕" | "巫女" | "修女" | "OL" | "风俗娘" | "公主" | "女骑士" | ... 54 more ... | "世界末日")[]'}},gameTags:{defaultValue:null,description:"",name:"gameTags",required:!0,type:{name:'("音乐" | "冒险" | "科幻" | "竞技" | "剧情" | "恐怖" | "动作" | "生存" | "角色扮演" | "射击" | "策略" | "第三人称" | "独立" | "文字" | "模拟" | "主视角" | "平台" | "解谜" | "多人" | "格斗" | "回合制" | "育成" | "益智" | "体育" | "沙箱" | "开放世界" | ... 20 more ... | "养成")[]'}},mangaTags:{defaultValue:null,description:"",name:"mangaTags",required:!0,type:{name:'("音乐" | "其他" | "奇幻" | "校园" | "冒险" | "科幻" | "爱情" | "百合" | "后宫" | "热血" | "励志" | "悬疑" | "竞技" | "战争" | "机战" | "职场" | "魔法" | "武侠" | "耽美" | "恐怖" | "少女" | "美食" | "生存" | "伪娘" | "格斗" | "幽默" | "生活" | ... 16 more ... | "童话")[]'}},wenkuTags:{defaultValue:null,description:"",name:"wenkuTags",required:!0,type:{name:"string[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/tags/tags.tsx#tags"]={docgenInfo:tags.__docgenInfo,name:"tags",path:"src/screens/home/subject/tags/tags.tsx#tags"})}catch(e){}},"./src/screens/home/subject/thumbs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=void 0;s=s("./src/stores/index.ts")._.r(160),s=.56*(t.THUMB_WIDTH=s);t.THUMB_HEIGHT=s},"./src/screens/home/subject/thumbs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),p=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),b=s("./src/utils/decorators/index.ts"),h=s("./src/utils/index.ts"),_=s("./src/constants/index.ts"),y=o(s("./src/screens/home/subject/icon/preview.tsx")),g=o(s("./src/screens/home/subject/icon/hidden.tsx")),x=o(s("./src/screens/home/subject/thumbs/video.tsx")),S=o(s("./src/screens/home/subject/thumbs/preview.tsx")),v=s("./src/screens/home/subject/thumbs/ds.ts"),T=s("./src/screens/home/subject/thumbs/styles.ts"),O=s("./node_modules/react/jsx-runtime.js");function I(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}o=l.default.Component,(0,c.default)(w,o),R=I(w),(0,r.default)(w,[{key:"data",get:function(){var s,e=this.context.$.state.epsThumbs;return this.state.scrolled?e.slice():(s=f._.isPad?5:Math.floor(f._.window.contentWidth/v.THUMB_WIDTH)+1,e.filter(function(e,t){return t<s}))}},{key:"videos",get:function(){return this.context.$.state.videos.slice()}},{key:"title",get:function(){var e=this.context.$;return"音乐"===e.type?"MV":"三次元"===e.type?"剧照":"预览"}},{key:"reference",get:function(){var e,t=this.context.$.state.epsThumbsHeader;return null!=t&&null!=(e=t.Referer)&&e.includes("douban.com")?"douban.com":null!=t&&null!=(e=t.Referer)&&e.includes("bilibili.com")?"bilibili.com":""}},{key:"thumbs",get:function(){var e=this.context.$.state,t=e.epsThumbs,s=e.epsThumbsHeader;return t.map(function(e){return{url:e.split("@")[0],headers:Object.assign({},s)}})}},{key:"renderRight",value:function(){var e=f.systemStore.setting.showThumbs,t=this.context.$,s=t.state.epsThumbsHeader;return e?t.isLimit?null:(0,O.jsx)(y.default,{data:t.state.epsThumbs,headers:s}):(0,O.jsx)(g.default,{name:this.title,value:"showThumbs"})}},{key:"render",value:function(){var e,t,s,o,n,r=this;return!_.STORYBOOK&&-1!==(e=f.systemStore.setting.showThumbs)&&(n=(o=(t=this.context.$).state).epsThumbs,s=o.epsThumbsHeader,o=o.videos,n.length||o.length)?(n=this.state.scrolled,(0,O.jsxs)(j.InView,{style:(0,h.stl)(T.styles.container,!e&&f._.short),children:[(0,O.jsx)(j.SectionTitle,{style:f._.container.wind,right:this.renderRight(),icon:!e&&"md-navigate-next",onPress:function(){return t.onSwitchBlock("showThumbs")},children:this.title}),e&&(0,O.jsxs)(m.default,Object.assign({style:f._.mt.md,contentContainerStyle:f._.container.wind,horizontal:!0},_.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:80,onScroll:n?void 0:this.onScroll,children:[this.videos.map(function(e){return(0,O.jsx)(x.default,{item:e,epsThumbsHeader:s,showTitle:"音乐"===t.type},e.cover)}),this.data.filter(function(e,t){return t<=12}).map(function(e,t){return(0,O.jsx)(S.default,{item:e,index:t,thumbs:r.thumbs,epsThumbsHeader:s},e)})]})),e&&!!this.reference&&(0,O.jsxs)(p.Flex,{style:[f._.container.wind,f._.mt.md],justify:"end",children:[(0,O.jsxs)(p.Text,{size:10,type:"icon",align:"right",onPress:function(){return(0,h.open)(s.Referer)},children:["数据来源自 ",this.reference]}),(0,O.jsx)(p.Iconfont,{style:f._.ml.xs,name:"md-open-in-new",size:10,color:f._.colorIcon})]}),(0,O.jsx)(j.PreventTouchPlaceholder,{}),(0,O.jsx)(p.Heatmap,{id:"条目.预览"})]})):null}}]);var R,s=w;function w(){var e;(0,n.default)(this,w);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=R.call.apply(R,[this].concat(s)),(0,u.default)((0,i.default)(e),"state",{scrolled:!1}),(0,u.default)((0,i.default)(e),"onScroll",function(){e.state.scrolled||e.setState({scrolled:!0})}),e}l=(0,b.obc)(s);t.default=l;try{thumbs.displayName="thumbs",thumbs.__docgenInfo={description:"",displayName:"thumbs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/thumbs/index.tsx#thumbs"]={docgenInfo:thumbs.__docgenInfo,name:"thumbs",path:"src/screens/home/subject/thumbs/index.tsx#thumbs"})}catch(e){}},"./src/screens/home/subject/thumbs/preview.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),u=s("./src/screens/home/subject/thumbs/ds.ts"),l=s("./src/screens/home/subject/thumbs/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");s=(0,o.obc)(function(e,t){var s=e.item,o=e.index,n=e.thumbs,e=e.epsThumbsHeader,r=t.$;return c.systemStore.setting.showCharacter?(0,m.jsx)(i.Touchable,{style:o?l.styles.image:l.styles.imageSide,animate:!0,onPress:function(){(0,d.t)("条目.预览",{subjectId:r.subjectId}),(0,a.showImageViewer)(n.filter(function(e,t){return t<12}),o)},children:(0,m.jsx)(i.Image,{src:s,size:u.THUMB_WIDTH,height:u.THUMB_HEIGHT,radius:!0,headers:e},s)}):null});t.default=s},"./src/screens/home/subject/thumbs/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts"),s=s("./src/screens/home/subject/thumbs/ds.ts"),s=o._.create({container:{minHeight:158,marginTop:o._.lg},image:{height:s.THUMB_HEIGHT,marginLeft:o._.sm,overflow:"hidden"},imageSide:{height:s.THUMB_HEIGHT,overflow:"hidden"},play:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0},touch:{width:s.THUMB_WIDTH,height:s.THUMB_HEIGHT,opacity:.92},icon:{fontSize:40,lineHeight:o._.ios(52,56)},title:{width:s.THUMB_WIDTH,padding:o._.sm,opacity:.8}});t.styles=s},"./src/screens/home/subject/thumbs/video.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/subject/thumbs/ds.ts"),d=s("./src/screens/home/subject/thumbs/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");s=(0,o.ob)(function(e){var t=e.item,s=e.epsThumbsHeader,e=e.showTitle;return i.systemStore.setting.showCharacter?(0,u.jsx)(n.default,{style:i._.mr.sm,children:(0,u.jsxs)(r.Touchable,{animate:!0,onPress:function(){return(0,c.open)(t.src||t.href)},children:[(0,u.jsx)(r.Image,{style:d.styles.image,src:t.cover,size:a.THUMB_WIDTH,height:a.THUMB_HEIGHT,radius:!0,headers:s}),(0,u.jsx)(n.default,{style:d.styles.play,children:(0,u.jsx)(n.default,{style:d.styles.touch,children:(0,u.jsx)(r.Flex,{style:d.styles.touch,justify:"center",children:(0,u.jsx)(r.Text,{style:d.styles.icon,type:"__plain__",children:"▶"})})})}),e&&!!t.title&&(0,u.jsx)(r.Text,{style:d.styles.title,size:11,bold:!0,numberOfLines:3,align:"center",children:t.title})]})},t.cover):null});t.default=s;try{video.displayName="video",video.__docgenInfo={description:"",displayName:"video",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},epsThumbsHeader:{defaultValue:null,description:"",name:"epsThumbsHeader",required:!0,type:{name:"any"}},showTitle:{defaultValue:null,description:"",name:"showTitle",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/thumbs/video.tsx#video"]={docgenInfo:video.__docgenInfo,name:"video",path:"src/screens/home/subject/thumbs/video.tsx#video"})}catch(e){}},"./src/screens/home/subject/topic/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=void 0;t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,showTopic:!0,topic:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/topic/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.small.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),c=o(s("./src/screens/home/subject/topic/topic.tsx")),a=s("./src/screens/home/subject/topic/styles.ts"),d=s("./node_modules/react/jsx-runtime.js"),o=(0,n.obc)(function(e,t){var s,o=t.$,t=t.navigation,n=r.systemStore.setting.showTopic;return-1!==n&&(s=o.subject.topic||[],(s=o.filterDefault||o.isLimit?s.filter(function(e){return null==e||null==(e=e.user)||null==(e=e.avatar)||!e.small.includes(i.URL_DEFAULT_AVATAR)}):s).length)?(0,d.jsx)(c.default,{navigation:t,styles:(0,a.memoStyles)(),showTopic:n,subjectId:o.subjectId,topic:s,onSwitchBlock:o.onSwitchBlock}):null});t.default=o;try{topic.displayName="topic",topic.__docgenInfo={description:"",displayName:"topic",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/topic/index.tsx#topic"]={docgenInfo:topic.__docgenInfo,name:"topic",path:"src/screens/home/subject/topic/index.tsx#topic"})}catch(e){}},"./src/screens/home/subject/topic/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),s=o._.memoStyles(function(){return{container:{minHeight:120,marginTop:o._.lg},item:{paddingLeft:o._.wind}}});t.memoStyles=s},"./src/screens/home/subject/topic/topic.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.small.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),m=o(s("./src/screens/home/subject/icon/topic.tsx")),p=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/topic/ds.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.showTopic,n=e.subjectId,r=e.topic,i=e.onSwitchBlock,e=(0,l.useExpandLazy)(r,4),r=e.list,e=e.onExpand;return(0,j.jsxs)(a.InView,{style:(0,u.stl)(s.container,!o&&d._.short),children:[(0,j.jsx)(a.SectionTitle,{style:d._.container.wind,right:o?(0,j.jsx)(m.default,{}):(0,j.jsx)(p.default,{name:"帖子",value:"showTopic"}),icon:!o&&"md-navigate-next",onPress:function(){return i("showTopic")},children:"帖子"}),o&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Expand,{style:d._.mt.sm,onExpand:e,children:r.map(function(e){return(0,j.jsx)(a.ItemArticle,{style:s.item,navigation:t,avatar:e.user.avatar.small,title:e.title,nickname:e.user.nickname,userId:e.user.username,timestamp:e.timestamp,replies:e.replies,url:e.url,event:{id:"条目.跳转",data:{from:"讨论版",subjectId:n}}},e.id)})}),(0,j.jsx)(c.Heatmap,{id:"条目.跳转",from:"讨论版"})]})]})},o.DEFAULT_PROPS);t.default=s;try{topic.displayName="topic",topic.__docgenInfo={description:"",displayName:"topic",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; item: { paddingLeft: number; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},showTopic:{defaultValue:null,description:"",name:"showTopic",required:!0,type:{name:"LayoutValue"}},topic:{defaultValue:null,description:"",name:"topic",required:!0,type:{name:"Topic[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "tinygrail" | "showTags" | "cnFirst" | "heatMap" | "discoveryMenu" | "discoveryTodayOnair" | ... 75 more ... | "webhookUrl") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/topic/topic.tsx#topic"]={docgenInfo:topic.__docgenInfo,name:"topic",path:"src/screens/home/subject/topic/topic.tsx#topic"})}catch(e){}},"./src/screens/home/subject/track-comment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),m=s("./node_modules/react/jsx-runtime.js"),p={"动画":["取消动画特别关注"],"书籍":["取消书籍特别关注"],"游戏":["取消游戏特别关注"],"音乐":["取消音乐特别关注"],"三次元":["取消三次元评别关注"]};s=(0,o.obc)(function(e,t){var n,r=t.$,i=t.navigation;return r.subjectTypeValue&&null!=(t=d.systemStore.setting["comment"+(0,u.titleCase)(r.subjectTypeValue)])&&t.length&&(t=t.filter(function(e){e=d.collectionStore.usersSubjectCollection(e,r.subjectId);return!!(e._loaded&&e.update_at&&e.type)})).length?(n={id:"条目.跳转",data:{from:"特别关注",subjectId:r.subjectId}},(0,m.jsxs)(a.InView,{style:d._.mt.sm,children:[t.map(function(e){var t=d.collectionStore.usersSubjectCollection(e,r.subjectId),s=d.usersStore.usersInfo(e),o=String(l.MODEL_COLLECTION_STATUS.getLabel(t.type)||"").replace("看",r.action);return(0,m.jsx)(a.ItemComment,{navigation:i,event:n,time:(0,u.lastDate)((0,u.getTimestamp)(t.update_at)),avatar:s.avatar,userId:e,userName:s.userName,star:r.hideScore?void 0:t.rate,status:o,comment:String(t.comment).replace(/[\r\n]/g,""),popoverData:p[r.type],onSelect:r.onCancelTrackUsersCollection},e)}),(0,m.jsx)(c.Divider,{})]})):null});t.default=s;try{trackcomment.displayName="trackcomment",trackcomment.__docgenInfo={description:"",displayName:"trackcomment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/track-comment/index.tsx#trackcomment"]={docgenInfo:trackcomment.__docgenInfo,name:"trackcomment",path:"src/screens/home/subject/track-comment/index.tsx#trackcomment"})}catch(e){}}}]);