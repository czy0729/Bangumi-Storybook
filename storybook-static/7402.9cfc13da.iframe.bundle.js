(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7402],{"./src/components/error-boundary/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.renderWithErrorBoundary=function(e,t){var s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=e;return(0,n.jsx)(r.default,{children:(0,n.jsx)(c,Object.assign({},o))},String((null==e||null==(s=e.type)?void 0:s.displayName)||t||0))};o(s("react"));var r=o(s("./src/components/error-boundary/index.tsx")),n=s("./node_modules/react/jsx-runtime.js")},"./src/screens/home/subject/component/anitabi/anitabi.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(1959).then(s.bind(s,"./src/screens/home/subject/component/anitabi/anitabi.tsx"))}))},"./src/screens/home/subject/component/anitabi/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),r=s("./src/utils/dev/index.ts"),n=s("./src/constants/index.ts"),c=s("./src/screens/home/subject/component/ds.ts"),u=t.COMPONENT=(0,r.rc)(c.COMPONENT,"Anitabi"),i=(t.COMPONENT_MAIN=(0,r.rc)(u),t.DEFAULT_PROPS={styles:{},showAnitabi:!0,subjectId:0,data:{},onSwitchBlock:n.FROZEN_FN},t.THUMB_WIDTH=o._.r(160));t.THUMB_HEIGHT=.56*i},"./src/screens/home/subject/component/anitabi/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/anitabi/anitabi.lazy.ts")),a=s("./src/screens/home/subject/component/anitabi/ds.ts"),l=s("./src/screens/home/subject/component/anitabi/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$;return o.showAnitabi[1]?(0,m.jsxs)(r.Suspense,{fallback:null,children:[(0,m.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_ANITABI)}}),(0,m.jsx)(d.default,{styles:(0,l.memoStyles)(),showAnitabi:c.systemStore.setting.showAnitabi,subjectId:o.subjectId,data:o.state.anitabi,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/anitabi/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),r=s("./src/screens/home/subject/component/anitabi/ds.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:200,marginTop:o._.lg},image:{height:r.THUMB_HEIGHT},void:{width:r.THUMB_WIDTH,height:r.THUMB_HEIGHT,backgroundColor:o._.colorBg},title:{width:r.THUMB_WIDTH,paddingTop:o._.sm},sub:{width:r.THUMB_WIDTH,paddingTop:o._.xs},touch:{paddingLeft:o._.xs,marginRight:-o._.sm},layout:{width:"100%",height:1}}}))},"./src/screens/home/subject/component/bg/bg.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/component/bg/ds.ts"),i=s("./node_modules/react/jsx-runtime.js"),d=(0,c.memo)((function(e){var t=e.style,s=e.src,o=e.cdn,c=void 0===o||o;return(0,i.jsx)(r.BlurView,{style:t,tint:n._.select(r.BLURVIEW_TINT_LIGHT,r.BLURVIEW_TINT_DARK),src:s,intensity:80,blurRadius:32,cdn:c})}),u.DEFAULT_PROPS,u.COMPONENT_MAIN);t.default=d},"./src/screens/home/subject/component/bg/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=t.COMPONENT=(0,o.rc)(r.COMPONENT,"Bg");t.COMPONENT_MAIN=(0,o.rc)(n),t.DEFAULT_PROPS={style:{},src:"",cdn:!0}},"./src/screens/home/subject/component/bg/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/utils/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),i=o(s("./src/screens/home/subject/component/bg/bg.tsx")),d=s("./src/screens/home/subject/component/bg/ds.ts"),a=s("./src/screens/home/subject/component/bg/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s,o,c=t.$,d=(0,a.memoStyles)();if(u.TEXT_ONLY)return u.IOS?null:(0,l.jsx)(r.default,{style:d.bg});var m=!c.nsfw,p=m?(0,n.getCover400)(c.coverPlaceholder||(null==(s=c.subject.images)?void 0:s.common)||c.cover):null==(o=c.subject.images)?void 0:o.common;return"string"!=typeof p?(0,l.jsx)(r.default,{style:d.bg}):(0,l.jsx)(i.default,{style:d.bg,src:p,cdn:m})}),d.COMPONENT)},"./src/screens/home/subject/component/bg/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{bg:o._.ios({position:"absolute",top:0,right:0,left:0,height:Math.floor(o._.window.height/2),backgroundColor:o._.colorBg},{height:160,backgroundColor:o._.colorBg})}}))},"./src/screens/home/subject/component/blog/blog.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(8201).then(s.bind(s,"./src/screens/home/subject/component/blog/blog.tsx"))}))},"./src/screens/home/subject/component/blog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Blog");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={navigation:{},styles:{},showBlog:!0,subjectId:0,blog:[],onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/blog/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/blog/blog.lazy.ts")),a=s("./src/screens/home/subject/component/blog/ds.ts"),l=s("./src/screens/home/subject/component/blog/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showBlog[1]?(0,m.jsxs)(r.Suspense,{fallback:null,children:[(0,m.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_BLOG)}}),(0,m.jsx)(d.default,{navigation:u,styles:(0,l.memoStyles)(),showBlog:c.systemStore.setting.showBlog,subjectId:o.subjectId,blog:o.filterBlog,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/blog/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:120,marginTop:o._.lg},sectionTitle:{paddingHorizontal:o._.wind},item:{paddingLeft:o._.wind}}}))},"./src/screens/home/subject/component/box/box.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/subject/ds.ts"),m=o(s("./src/screens/home/subject/component/icon/close.tsx")),p=o(s("./src/screens/home/subject/component/icon/folder.tsx")),j=o(s("./src/screens/home/subject/component/box/comment/index.tsx")),f=o(s("./src/screens/home/subject/component/box/extra/index.tsx")),b=o(s("./src/screens/home/subject/component/box/flip-btn/index.tsx")),h=s("./src/screens/home/subject/component/box/ds.ts"),_=s("./node_modules/react/jsx-runtime.js"),y=(0,d.memo)((function(e){var t,s=e.styles,o=e.navigation,d=e.isLogin,h=e.status,y=e.url,g=e.showCount,v=e.showManageModel,x=e.toRating,O=e.outdate,T=d?v:function(){a.SHARE_MODE?(0,i.appNavigate)(y):o.push("LoginV2")},S=(null==(t=h[h.length-1])?void 0:t.text.length)>=6?11:12;return(0,_.jsxs)(r.default,{style:s.container,children:[(0,_.jsx)(c.SectionTitle,{style:s.sectionTitle,right:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.default,{}),(0,_.jsx)(m.default,{})]}),children:l.TITLE_BOX}),(0,_.jsxs)(n.Flex,{style:s.btn,children:[(0,_.jsxs)(n.Flex.Item,{children:[(0,_.jsx)(b.default,{onPress:T}),(0,_.jsx)(n.Heatmap,{id:"条目.管理收藏"}),(0,_.jsx)(n.Heatmap,{right:56,transparent:!0,id:"条目.显示收藏管理"})]}),(0,_.jsx)(f.default,{})]}),(0,_.jsxs)(r.default,{style:s.bottom,children:[g&&!!h.length&&(0,_.jsxs)(r.default,{style:u._.mt.md,children:[(0,_.jsx)(n.Text,{size:S,type:"sub",children:h.map((function(e,t){return(0,_.jsx)(n.Text,{size:S,type:"sub",onPress:function(){return x(o,"收藏",e.status)},children:(t?" / ":"")+e.text},e.status)}))}),(0,_.jsx)(n.Heatmap,{id:"条目.跳转",from:"收藏"})]}),O&&(0,_.jsx)(n.Touchable,{style:u._.mt.md,onPress:function(){o.push("LoginV2")},children:(0,_.jsx)(n.Text,{size:S,type:"sub",bold:!0,children:"检测到授权信息过期，点击重新登录，再进行收藏管理"})}),(0,_.jsx)(j.default,{})]})]})}),h.DEFAULT_PROPS,h.COMPONENT_MAIN,(function(e){return Object.assign({},e,{status:e.status.length})}));t.default=y},"./src/screens/home/subject/component/box/comment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/box/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Comment")},"./src/screens/home/subject/component/box/comment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=f(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),c=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/utils/dev/index.ts"),l=s("./src/utils/hooks/index.ts"),m=s("./src/screens/home/subject/component/box/comment/ds.ts"),p=s("./src/screens/home/subject/component/box/comment/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(f=function(e){return e?s:t})(e)}t.default=(0,d.c)((function(e,t){var s=t.$;(0,a.r)(m.COMPONENT);var o=(0,n.useState)(3),d=(0,r.default)(o,2),f=d[0],b=d[1];return(0,l.useObserver)((function(){var e=s.collection.comment;if(!e)return null;var t=(0,p.memoStyles)(),o=i.timelineStore.relatedId(i.userStore.userInfo.username||s.userId,s.subjectId),r=(0,j.jsx)(c.Text,{style:t.comment,size:14,lineHeight:15,numberOfLines:f,onPress:function(){b(void 0)},children:e});return(0,j.jsxs)(j.Fragment,{children:[e.length>=80?(0,j.jsx)(c.Expand,{ratio:.72,children:r}):r,!!o&&(0,j.jsx)(u.Likes,{topicId:s.subjectId,id:o,likeType:"40",formhash:i.userStore.formhash,onLongPress:i.uiStore.showLikesUsers})]})}))}))},"./src/screens/home/subject/component/box/comment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{comment:{paddingVertical:10,paddingHorizontal:14,marginTop:o._.md,marginBottom:o._.sm,backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderWidth:o._.select(o._.hairlineWidth,0),borderColor:o._.colorBorder,borderRadius:o._.radiusMd,overflow:"hidden"}}}))},"./src/screens/home/subject/component/box/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.RATE=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Box");t.COMPONENT_MAIN=(0,o.rc)(c),t.RATE=[1,2,3,4,5],t.DEFAULT_PROPS={navigation:{},styles:{},isLogin:!1,status:[],url:"",showCount:!0,showManageModel:r.FROZEN_FN,toRating:r.FROZEN_FN,outdate:!1}},"./src/screens/home/subject/component/box/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/box/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Extra")},"./src/screens/home/subject/component/box/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/subject/component/icon/actions.tsx")),a=o(s("./src/screens/home/subject/component/icon/game.tsx")),l=o(s("./src/screens/home/subject/component/icon/online.tsx")),m=o(s("./src/screens/home/subject/component/icon/search.tsx")),p=o(s("./src/screens/home/subject/component/icon/search-disc.tsx")),j=s("./src/screens/home/subject/component/box/extra/ds.ts"),f=s("./src/screens/home/subject/component/box/extra/styles.ts"),b=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=t.$;if(!c.systemStore.setting.focusOrigin)return null;var o,i,j=!!s.actions.length;return c.systemStore.setting.focusAction&&j||("动画"===s.type||"三次元"===s.type?o=l.default:"书籍"===s.type?o=m.default:"游戏"===s.type?o=a.default:"音乐"===s.type&&(o=p.default),o&&(i=(0,b.jsx)(r.default,{style:f.styles.container,children:(0,b.jsx)(o,{children:(0,b.jsx)(n.Flex,{style:(0,u.stl)(f.styles.extra,!j&&f.styles.extraLg),children:(0,b.jsx)(n.Button,{style:f.styles.btn,type:c._.select("ghostPlain","plain"),extra:(0,b.jsx)(n.Iconfont,{name:"md-airplay",size:17})})})})}))),(0,b.jsxs)(b.Fragment,{children:[i,j&&(0,b.jsx)(r.default,{style:f.styles.container,children:(0,b.jsx)(d.default,{children:(0,b.jsx)(n.Flex,{style:[f.styles.extra,!i&&f.styles.extraLg],children:(0,b.jsx)(n.Button,{style:f.styles.btn,type:c._.select("ghostPlain","plain"),extra:(0,b.jsx)(n.Iconfont,{name:"md-read-more",size:25})})})})})]})}),j.COMPONENT)},"./src/screens/home/subject/component/box/extra/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts");t.styles=o._.create({container:{marginTop:-30,marginLeft:o._.sm},extra:{width:48},extraLg:{width:64},btn:{height:44}})},"./src/screens/home/subject/component/box/flip-btn/btns.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.slice.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/component/box/ds.ts"),d=s("./src/screens/home/subject/component/box/flip-btn/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.ob)((function(e){var t=e.btnText,s=e.rating,o=e.privacy,u=e.last,l=e.onPress,m=(0,c.getType)(t,n._.select("ghostPlain","plain")),p=[],j=[];s&&(p.push(d.styles.left),j.push(d.styles.right));var f,b=n.systemStore.setting.focusOrigin;if(s){var h=(0,c.getRating)(s);b?(p.push(d.styles.leftFocus),j.push(d.styles.rightFocus),f=(0,a.jsx)(r.Flex.Item,{flex:.75,children:(0,a.jsxs)(r.Button,{style:j,type:m,onPress:l,children:[h,"  ",(0,a.jsx)(r.Iconfont,{name:"ios-star",size:16,color:n._.__colorPlain__})," ",s]})})):f=(0,a.jsx)(r.Flex.Item,{children:(0,a.jsxs)(r.Button,{style:j,type:m,onPress:l,children:[h," ",i.RATE.map((function(e){var t;return t=s/2>=e?"ios-star":s/2>=e-.5?"ios-star-half":"ios-star-outline",(0,a.jsx)(r.Iconfont,{name:t,size:16,color:n._.__colorPlain__},e)}))]})})}return(0,a.jsxs)(r.Flex,{justify:"center",children:[(0,a.jsx)(r.Flex.Item,{children:(0,a.jsxs)(r.Button,{style:p,type:m,extra:(0,a.jsx)(a.Fragment,{children:1==o&&(0,a.jsx)(r.Iconfont,{style:n._.ml.sm,name:"md-visibility-off",color:n._.__colorPlain__,size:17})}),onPress:l,children:[t,!!u&&" · "+(b?u.slice(2):u)]})}),f]})}))},"./src/screens/home/subject/component/box/flip-btn/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.PERSPECTIVE=t.COMPONENT_MAIN=t.COMPONENT=t.ANIMATED_CONFIG=void 0;var o=s("./node_modules/react-native-reanimated/lib/index.web.js"),r=s("./src/utils/dev/index.ts"),n=s("./src/screens/home/subject/component/box/ds.ts"),c=t.COMPONENT=(0,r.rc)(n.COMPONENT,"FlipBtn");t.COMPONENT_MAIN=(0,r.rc)(c),t.PERSPECTIVE=2400,t.ANIMATED_CONFIG={duration:480,easing:o.Easing.inOut(o.Easing.ease)}},"./src/screens/home/subject/component/box/flip-btn/flip-btn.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=h(s("react")),c=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),u=h(s("./node_modules/react-native-reanimated/lib/index.web.js")),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),a=s("./src/utils/dev/index.ts"),l=s("./src/utils/hooks/index.ts"),m=o(s("./src/screens/home/subject/component/box/flip-btn/btns.tsx")),p=s("./src/screens/home/subject/component/box/flip-btn/ds.ts"),j=s("./src/screens/home/subject/component/box/flip-btn/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(b=function(e){return e?s:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=b(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}t.default=function(e){var t=e.animate,s=e.btnText,o=e.rating,b=e.privacy,h=e.last,_=e.onAnimated,y=e.onPress;(0,a.r)(p.COMPONENT_MAIN);var g,v=i._.device(44,50),x=(0,u.useSharedValue)(0),O=(0,u.useAnimatedStyle)(((g=function(){return{opacity:(0,u.withTiming)(x.value?0:1,p.ANIMATED_CONFIG),transform:[{perspective:p.PERSPECTIVE},{rotateX:(0,u.withTiming)(x.value?"90deg":"0deg",p.ANIMATED_CONFIG)},{translateY:(0,u.withTiming)(-x.value*v,p.ANIMATED_CONFIG)}]}})._closure={withTiming:u.withTiming,activeRef:x,ANIMATED_CONFIG:p.ANIMATED_CONFIG,PERSPECTIVE:p.PERSPECTIVE,height:v},g.asString="function _f(){const{withTiming,activeRef,ANIMATED_CONFIG,PERSPECTIVE,height}=jsThis._closure;{return{opacity:withTiming(activeRef.value?0:1,ANIMATED_CONFIG),transform:[{perspective:PERSPECTIVE},{rotateX:withTiming(activeRef.value?'90deg':'0deg',ANIMATED_CONFIG)},{translateY:withTiming(-activeRef.value*height,ANIMATED_CONFIG)}]};}}",g.__workletHash=747663275286,g.__location="/Users/chen/Bangumi32/src/screens/home/subject/component/box/flip-btn/flip-btn.tsx (23:39)",g.__optimalization=2,g)),T=(0,u.useAnimatedStyle)(function(){var e=function(){return{opacity:(0,u.withTiming)(x.value?1:0,p.ANIMATED_CONFIG),transform:[{perspective:p.PERSPECTIVE},{rotateX:(0,u.withTiming)(x.value?"0deg":"90deg",p.ANIMATED_CONFIG)},{translateY:(0,u.withTiming)(-x.value*v,p.ANIMATED_CONFIG)}]}};return e._closure={withTiming:u.withTiming,activeRef:x,ANIMATED_CONFIG:p.ANIMATED_CONFIG,PERSPECTIVE:p.PERSPECTIVE,height:v},e.asString="function _f(){const{withTiming,activeRef,ANIMATED_CONFIG,PERSPECTIVE,height}=jsThis._closure;{return{opacity:withTiming(activeRef.value?1:0,ANIMATED_CONFIG),transform:[{perspective:PERSPECTIVE},{rotateX:withTiming(activeRef.value?'0deg':'90deg',ANIMATED_CONFIG)},{translateY:withTiming(-activeRef.value*height,ANIMATED_CONFIG)}]};}}",e.__workletHash=6903100580406,e.__location="/Users/chen/Bangumi32/src/screens/home/subject/component/box/flip-btn/flip-btn.tsx (33:38)",e.__optimalization=2,e}()),S=(0,n.useState)({btnText:s,rating:o,privacy:b,last:h}),E=(0,r.default)(S,2),P=E[0],I=E[1],w=(0,n.useState)({btnText:s,rating:o,privacy:b,last:h}),N=(0,r.default)(w,2),M=N[0],k=N[1];(0,n.useEffect)((function(){t||I({btnText:s,rating:o,privacy:b,last:h})}),[t,s,h,b,o]);var C=(0,n.useRef)(!1);return(0,n.useEffect)((function(){if(t&&!C.current&&!x.value){var e={btnText:s,rating:o,privacy:b,last:h};(0,d.urlStringify)(e)!==(0,d.urlStringify)(P)&&(C.current=!0,k(e),(0,d.postTask)((function(){(0,d.feedback)(),x.value=1,(0,d.postTask)((function(){_()}),p.ANIMATED_CONFIG.duration,"user-visible")}),240,"user-visible"))}}),[x,P,t,s,o,b,h,_]),(0,l.useObserver)((function(){var e=(0,j.memoStyles)();return(0,f.jsxs)(c.default,{style:e.container,children:[(0,f.jsxs)(u.default.View,{style:[e.animated,O],pointerEvents:"box-none",children:[(0,f.jsx)(c.default,{style:e.placeholder,pointerEvents:"none"}),(0,f.jsx)(m.default,Object.assign({},P,{onPress:y}))]}),(0,f.jsxs)(u.default.View,{style:[e.animated,T],pointerEvents:"none",children:[(0,f.jsx)(c.default,{style:e.placeholder}),(0,f.jsx)(m.default,Object.assign({},M,{onPress:y}))]})]})}))}},"./src/screens/home/subject/component/box/flip-btn/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/stores/index.ts"),n=s("./src/utils/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),i=o(s("./src/screens/home/subject/component/box/flip-btn/flip-btn.tsx")),d=s("./src/screens/home/subject/component/box/flip-btn/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s,o=e.onPress,c=t.$,d=c.collection,l=d.status,m=void 0===l?{name:"未收藏",type:null}:l,p=d.rating,j=void 0===p?0:p,f=d.private,b=d.lasttouch,h=d._loaded;s=u.WEB?r.collectionStore.collect(c.subjectId,c.type)||"未收藏":h?m.name:c.params._collection||m.name;var _="";return b&&["collect","on_hold","dropped"].includes(null==m?void 0:m.type)&&(_=(0,n.date)("Y.m.d",b)),(0,a.jsx)(i.default,{animate:c.state.flip,btnText:s,rating:j,privacy:f,last:_,onAnimated:c.afterFlip,onPress:o},String(c.state.flipKey))}),d.COMPONENT)},"./src/screens/home/subject/component/box/flip-btn/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){var e=o._.device(44,50);return{container:{height:2*e+14,paddingTop:14},animated:{marginTop:-e},placeholder:{height:e}}})),t.styles=o._.create({left:{borderTopRightRadius:0,borderBottomRightRadius:0},leftFocus:{paddingLeft:o._.sm},right:{marginLeft:-o._.hairlineWidth,borderLeftWidth:0,borderTopLeftRadius:0,borderBottomLeftRadius:0},rightFocus:{paddingRight:o._.sm},open:{marginLeft:o._.sm,marginRight:-22}})},"./src/screens/home/subject/component/box/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/ds.ts"),i=o(s("./src/screens/home/subject/component/box/box.tsx")),d=s("./src/screens/home/subject/component/box/ds.ts"),a=s("./src/screens/home/subject/component/box/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=e.onBlockRef,o=t.$,c=t.navigation;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.default,{style:n._.container.layout,ref:function(e){return s(e,u.TITLE_BOX)}}),(0,l.jsx)(i.default,{styles:(0,a.memoStyles)(),navigation:c,isLogin:n.userStore.isLogin,status:o.status,url:o.url,showCount:n.systemStore.setting.showCount,showManageModel:o.showManageModel,toRating:o.toRating,outdate:n.userStore.outdate})]})}),d.COMPONENT)},"./src/screens/home/subject/component/box/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{paddingTop:o._.md,paddingHorizontal:o._.wind},sectionTitle:{height:28},btn:{marginTop:8},bottom:{marginTop:-o._.select(44,50)+o._.sm},hide:{position:"absolute",zIndex:1,top:-10,right:-o._.sm}}}))},"./src/screens/home/subject/component/catalog/catalog.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(7311).then(s.bind(s,"./src/screens/home/subject/component/catalog/catalog.tsx"))}))},"./src/screens/home/subject/component/catalog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Catalog");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={styles:{},showCatalog:!0,catalog:[],onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/catalog/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/catalog/catalog.lazy.ts")),a=s("./src/screens/home/subject/component/catalog/ds.ts"),l=s("./src/screens/home/subject/component/catalog/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$;return o.showCalalog[1]?(0,m.jsxs)(r.Suspense,{fallback:null,children:[(0,m.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_CATALOG)}}),(0,m.jsx)(d.default,{styles:(0,l.memoStyles)(),showCatalog:c.systemStore.setting.showCatalog,catalog:o.filterCatalog,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/catalog/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:92,marginTop:o._.lg},contentContainerStyle:{paddingTop:o._.sm,paddingHorizontal:o._.wind,paddingBottom:o._.md+4},scrollView:{marginTop:o._.md,marginBottom:-o._.md}}}))},"./src/screens/home/subject/component/character/character.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(6296).then(s.bind(s,"./src/screens/home/subject/component/character/character.tsx"))}))},"./src/screens/home/subject/component/character/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Character");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={navigation:{},showCharacter:!0,subjectId:0,crt:[],crtCounts:{},onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/character/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=m(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/character/character.lazy.ts")),a=s("./src/screens/home/subject/component/character/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(m=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showCharacter[1]?(0,l.jsxs)(r.Suspense,{fallback:null,children:[(0,l.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_CHARACTER)}}),(0,l.jsx)(d.default,{navigation:u,showCharacter:c.systemStore.setting.showCharacter,subjectId:o.subjectId,crt:o.crt,crtCounts:o.subjectFormHTML.crtCounts,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/comic/comic.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(2784).then(s.bind(s,"./src/screens/home/subject/component/comic/comic.tsx"))}))},"./src/screens/home/subject/component/comic/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=t.COMPONENT=(0,o.rc)(r.COMPONENT,"Comic"),c=(t.COMPONENT_MAIN=(0,o.rc)(n),t.COVER_WIDTH=80);t.COVER_HEIGHT=1.4*c,t.DEFAULT_PROPS={navigation:{},subjectId:0,comic:[]}},"./src/screens/home/subject/component/comic/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=m(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/comic/comic.lazy.ts")),a=s("./src/screens/home/subject/component/comic/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(m=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showComic[1]?(0,l.jsxs)(r.Suspense,{fallback:null,children:[(0,l.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_COMIC)}}),(0,l.jsx)(d.default,{navigation:u,subjectId:o.subjectId,comic:o.comic})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/comment/comment.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(4747).then(s.bind(s,"./src/screens/home/subject/component/comment/comment.tsx"))}))},"./src/screens/home/subject/component/comment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Comment");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={styles:{},showComment:!0,commentLength:0,onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/comment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=j(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/ds.ts"),a=o(s("./src/screens/home/subject/component/comment/comment.lazy.ts")),l=s("./src/screens/home/subject/component/comment/ds.ts"),m=s("./src/screens/home/subject/component/comment/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(j=function(e){return e?s:t})(e)}t.default=(0,i.obc)((function(e,t){var s=e.onBlockRef,o=t.$,i=c.systemStore.setting.showComment,l=-1===i;return(0,p.jsxs)(r.Suspense,{fallback:null,children:[(0,p.jsx)(n.default,{ref:function(e){return s(e,d.TITLE_COMMENT)},style:(0,u.stl)(c._.container.layout,l&&c._.mt.lg)}),!l&&(0,p.jsx)(a.default,{styles:(0,m.memoStyles)(),showComment:i,commentLength:o.commentLength,onSwitchBlock:o.onSwitchBlock})]})}),l.COMPONENT)},"./src/screens/home/subject/component/comment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{paddingHorizontal:o._.wind,paddingBottom:o._.xs,marginTop:o._.lg},hide:{paddingHorizontal:o._.wind,marginTop:o._.lg,marginVertical:-o._.sm}}}))},"./src/screens/home/subject/component/cover/cover.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(s("react")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),j=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),b=s("./src/utils/decorators/index.ts"),h=s("./src/utils/dev/index.ts"),_=s("./src/constants/index.ts"),y=s("./src/screens/home/subject/component/cover/ds.ts"),g=s("./src/screens/home/subject/component/cover/styles.ts"),v=s("./node_modules/react/jsx-runtime.js");function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,i.default)(this,s)}}var O=new Map,T=function(e){(0,u.default)(s,e);var t=x(s);function s(){var e;(0,r.default)(this,s);for(var o=arguments.length,n=new Array(o),u=0;u<o;u++)n[u]=arguments[u];return e=t.call.apply(t,[this].concat(n)),(0,a.default)((0,c.default)(e),"state",{isLoaded:!1}),(0,a.default)((0,c.default)(e),"onLoad",(function(){var t=e.props.image;"string"==typeof t&&O.set(t,!0);try{(0,f.postTask)((function(){e.setState({isLoaded:!0})}),800+(j.systemStore.setting.imageFadeIn?880:0))}catch(e){}})),e}return(0,n.default)(s,[{key:"isLoaded",get:function(){var e=this.props.image;return"string"==typeof e&&O.get(e)||this.state.isLoaded}},{key:"event",get:function(){return{id:"条目.封面图查看",data:{subjectId:this.props.subjectId}}}},{key:"renderPlaceholder",value:function(){return!_.WEB&&this.isLoaded&&this.props.image?null:(0,v.jsx)(p.Cover,{style:[this.styles.placeholder,{opacity:this.isLoaded?0:1}],src:this.props.placeholder||_.IMG_DEFAULT,size:this.props.width,height:this.props.height,noDefault:!0,radius:!1,skeleton:!1})}},{key:"renderCover",value:function(){var e=this.props.image;return e?(0,v.jsx)(p.Cover,{src:e,size:this.props.width,height:this.props.height,noDefault:!0,radius:!1,skeleton:!1,imageViewer:!0,imageViewerSrc:(0,f.getCoverLarge)(e||this.props.placeholder),fadeDuration:0,sync:!0,event:this.event,onLoad:this.onLoad}):null}},{key:"render",value:function(){(0,h.r)(y.COMPONENT_MAIN);var e=this.props,t=e.width,s=e.height;return(0,v.jsx)(p.Squircle,{style:this.styles.container,width:t,height:s,radius:j.systemStore.coverRadius,children:(0,v.jsxs)(m.default,{style:{minWidth:t,minHeight:s},children:[_.WEB&&this.renderPlaceholder(),this.renderCover(),!_.WEB&&this.renderPlaceholder(),(0,v.jsx)(p.Heatmap,{id:"条目.封面图查看"})]})})}},{key:"styles",get:function(){return(0,g.memoStyles)()}}]),s}(l.default.Component);t.default=(0,b.obc)(T)},"./src/screens/home/subject/component/cover/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=t.COMPONENT=(0,o.rc)(r.COMPONENT,"Cover");t.COMPONENT_MAIN=(0,o.rc)(n)},"./src/screens/home/subject/component/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/utils/decorators/index.ts"),n=o(s("./src/screens/home/subject/component/cover/cover.tsx")),c=s("./src/screens/home/subject/component/cover/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)((function(e,t){var s,o,r=t.$;return(0,u.jsx)(n.default,{image:r.nsfw?null==(s=r.subject.images)?void 0:s.common:r.cover,placeholder:r.nsfw?null==(o=r.subject.images)?void 0:o.common:r.coverPlaceholder,width:r.imageWidth,height:r.imageHeight,subjectId:r.subjectId})}),c.COMPONENT)},"./src/screens/home/subject/component/cover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{position:"absolute",zIndex:1,top:o._.md+6,left:o._.wind},placeholder:{position:"absolute",zIndex:2,top:0,left:0,pointerEvents:"none"}}}))},"./src/screens/home/subject/component/disc/disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=h(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),u=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),i=s("./src/components/index.ts"),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),m=s("./src/utils/decorators/index.ts"),p=o(s("./src/screens/home/subject/component/icon/disc.tsx")),j=o(s("./src/screens/home/subject/component/icon/search-disc.tsx")),f=s("./src/screens/home/subject/component/disc/ds.ts"),b=s("./node_modules/react/jsx-runtime.js");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(h=function(e){return e?s:t})(e)}var _=(0,m.memo)((function(e){var t=e.navigation,s=e.styles,o=e.subjectId,m=e.disc,f=e.discTranslateResult,h=e.focusOrigin,_=(0,c.useState)(!1),y=(0,n.default)(_,2),g=y[0],v=y[1],x=(0,c.useCallback)((function(){v(!0)}),[v]),O=(0,r.default)(f);return(0,b.jsxs)(u.default,{style:s.container,children:[(0,b.jsx)(d.SectionTitle,{right:(0,b.jsxs)(b.Fragment,{children:[!h&&(0,b.jsx)(j.default,{}),!f.length&&(0,b.jsx)(p.default,{})]}),children:"曲目列表"}),!!m.length&&(0,b.jsxs)(u.default,{style:a._.mt.md,children:[(0,b.jsx)(i.Expand,{onExpand:x,children:m.filter((function(e,t){return!!g||(e.disc.length>=6?t<1:t<2)})).map((function(e,r){return(0,b.jsxs)(u.default,{style:!!r&&a._.mt.md,children:[(0,b.jsx)(i.Text,{type:"sub",size:16,selectable:!0,children:e.title}),(0,b.jsx)(u.default,{style:a._.mt.sm,children:e.disc.map((function(e,r){var n="";return O.length&&(n=O.shift().dst),(0,b.jsxs)(u.default,{style:(0,l.stl)(s.item,r%2==0&&s.odd),children:[(0,b.jsx)(i.Text,{onPress:function(){(0,l.appNavigate)(e.href,t,{},{id:"条目.跳转",data:{from:"曲目列表",subjectId:o}})},children:(0,l.HTMLDecode)(e.title)}),!!n&&(0,b.jsx)(i.Text,{style:s.translate,type:"sub",size:12,children:n})]},e.href)}))})]},e.title)}))}),(0,b.jsx)(i.Heatmap,{id:"条目.跳转",from:"曲目列表"})]})]})}),f.DEFAULT_PROPS,f.COMPONENT_MAIN,(function(e){return Object.assign({},e,{discTranslateResult:e.discTranslateResult.length})}));t.default=_},"./src/screens/home/subject/component/disc/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=t.COMPONENT=(0,o.rc)(r.COMPONENT,"Disc");t.COMPONENT_MAIN=(0,o.rc)(n),t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,disc:[],discTranslateResult:[],focusOrigin:!1}},"./src/screens/home/subject/component/disc/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/component/disc/disc.tsx")),u=s("./src/screens/home/subject/component/disc/ds.ts"),i=s("./src/screens/home/subject/component/disc/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=t.$,o=t.navigation;return(0,d.jsx)(c.default,{navigation:o,styles:(0,i.memoStyles)(),subjectId:s.subjectId,disc:s.disc,discTranslateResult:s.state.discTranslateResult,focusOrigin:r.systemStore.setting.focusOrigin})}),u.COMPONENT)},"./src/screens/home/subject/component/disc/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:96,paddingHorizontal:o._.wind,marginTop:o._.lg},item:{paddingHorizontal:o._.sm,paddingVertical:o._.sm},odd:{backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1)},translate:{marginTop:o._.xs}}}))},"./src/screens/home/subject/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Component")},"./src/screens/home/subject/component/ep/book-ep/book-ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.parse-int.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=o(s("./node_modules/@ant-design/react-native/lib/progress/index.js")),c=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/subject/ds.ts"),l=o(s("./src/screens/home/subject/component/icon/hd.tsx")),m=o(s("./src/screens/home/subject/component/icon/manga.tsx")),p=o(s("./src/screens/home/subject/component/icon/search.tsx")),j=o(s("./src/screens/home/subject/component/icon/wenku.tsx")),f=s("./src/screens/home/subject/component/ep/book-ep/ds.ts"),b=s("./node_modules/react/jsx-runtime.js"),h=(0,d.memo)((function(e){var t=e.styles,s=e.chap,o=e.vol,d=e.book,f=e.comicLength,h=e.status,_=e.focusOrigin,y=e.onChangeText,g=e.onScrollIntoViewIfNeeded,v=e.doUpdateBookEp,x=e.doUpdateNext,O=d.totalChap,T=d.totalVol;"??"===T&&f&&(T="?"+f);var S=!!h.name&&"未收藏"!==h.name;return(0,b.jsxs)(r.default,{style:t.container,children:[(0,b.jsx)(u.SectionTitle,{right:(0,b.jsxs)(b.Fragment,{children:[!_&&(0,b.jsx)(p.default,{}),(0,b.jsx)(m.default,{}),(0,b.jsx)(j.default,{}),(0,b.jsx)(l.default,{})]}),children:a.TITLE_EP}),(0,b.jsxs)(c.Flex,{style:i._.mt.md,align:"start",children:[(0,b.jsxs)(c.Flex.Item,{children:[(0,b.jsxs)(c.Flex,{children:[(0,b.jsx)(c.Text,{style:t.label,align:"right",children:"Chap."}),(0,b.jsxs)(r.default,{style:t.input,children:[(0,b.jsx)(c.Input,{style:t.inputRaw,keyboardType:"numeric",value:String(s),placeholder:String(d.chap)||"0",editable:S,clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:S?function(e){var t=e.replace(/[^\d]+/,"");y("chap",t)}:void 0,onSubmitEditing:S?v:void 0,onScrollIntoViewIfNeeded:g}),!!O&&(0,b.jsxs)(c.Text,{style:t.total,type:"sub",children:["/ ",O]})]}),S&&(0,b.jsx)(c.Button,{style:t.btnPlus,styleText:t.btnText,type:"ghostPrimary",onPress:function(){return x("chap")},children:"+"})]}),!!O&&0!==Number(O)&&(0,b.jsx)(c.Flex,{style:t.progressWrap,children:(0,b.jsx)(n.default,{style:t.progress,barStyle:t.bar,percent:parseInt(String(s))/parseInt(O)*100})}),(0,b.jsxs)(c.Flex,{style:i._.mt.sm,children:[(0,b.jsx)(c.Text,{style:t.label,align:"right",children:"Vol."}),(0,b.jsxs)(r.default,{style:t.input,children:[(0,b.jsx)(c.Input,{style:t.inputRaw,keyboardType:"numeric",value:String(o),placeholder:String(d.vol)||"0",editable:S,clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:S?function(e){var t=e.replace(/[^\d]+/,"");y("vol",t)}:void 0,onSubmitEditing:S?v:void 0,onScrollIntoViewIfNeeded:g}),!!T&&0!==Number(T)&&(0,b.jsxs)(c.Text,{style:t.total,type:"sub",children:["/ ",T]})]}),S&&(0,b.jsx)(c.Button,{style:t.btnPlus,styleText:t.btnText,type:"ghostPrimary",onPress:function(){return x("vol")},children:"+"}),(0,b.jsx)(c.Heatmap,{id:"条目.更新书籍下一个章节"})]}),!!d.totalVol&&(0,b.jsx)(c.Flex,{style:t.progressWrap,children:(0,b.jsx)(n.default,{style:t.progress,barStyle:t.bar,percent:parseInt(String(o))/parseInt(d.totalVol)*100})})]}),S?(0,b.jsxs)(r.default,{style:i._.ml.md,children:[(0,b.jsx)(c.Button,{style:t.btn,type:"ghostPrimary",onPress:v,children:"更新"}),(0,b.jsx)(c.Heatmap,{id:"条目.更新书籍章节"})]}):(0,b.jsx)(c.Text,{style:i._.mt.sm,type:"sub",size:13,bold:!0,children:"收藏后才能进行管理"})]})]})}),f.DEFAULT_PROPS,f.COMPONENT_MAIN);t.default=h},"./src/screens/home/subject/component/ep/book-ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ep/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"BookEp");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={styles:{},chap:"0",vol:"0",book:{},comicLength:0,status:{name:"未收藏"},focusOrigin:!1,onChangeText:r.FROZEN_FN,onScrollIntoViewIfNeeded:r.FROZEN_FN,doUpdateBookEp:r.FROZEN_FN,doUpdateNext:function(){}}},"./src/screens/home/subject/component/ep/book-ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/component/ep/book-ep/book-ep.tsx")),u=s("./src/screens/home/subject/component/ep/book-ep/styles.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=e.onScrollIntoViewIfNeeded,o=t.$;return(0,i.jsx)(c.default,{styles:(0,u.memoStyles)(),chap:o.state.chap||"0",vol:o.state.vol||"0",book:o.subjectFormHTML.book,comicLength:o.comic.length,status:o.collection.status,focusOrigin:r.systemStore.setting.focusOrigin,onChangeText:o.changeText,onScrollIntoViewIfNeeded:s,doUpdateBookEp:o.doUpdateBookEp,doUpdateNext:o.doUpdateNext})}))},"./src/screens/home/subject/component/ep/book-ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),r=o._.r(48),n=o._.r(120);t.memoStyles=o._.memoStyles((function(){return{container:{height:o._.r(120),paddingHorizontal:o._.wind,marginTop:o._.lg},label:{width:r},input:{marginLeft:o._.sm,width:n,height:o._.device(34,48)},inputRaw:Object.assign({height:o._.r(34),paddingVertical:0,paddingHorizontal:o._.sm+2,color:o._.colorSub,fontWeight:"800"},o._.device(o._.fontSize13,o._.fontSize15)),total:{position:"absolute",zIndex:100,top:o._.device(8,10),right:o._.r(12)},btn:{width:o._.r(56),height:o._.device(32,48)},btnPlus:{marginLeft:o._.sm,width:o._.r(40),height:o._.device(34,48)},btnText:o._.device(o._.fontSize13,o._.fontSize18),progressWrap:{width:n,marginLeft:r+o._.sm,marginBottom:4},progress:{backgroundColor:"transparent",borderRadius:4},bar:{backgroundColor:"transparent",borderBottomColor:o._.colorPrimary,borderBottomWidth:4,borderRadius:4}}}))},"./src/screens/home/subject/component/ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.WEEK_DAY_MAP=t.WEEK_DAY_DS=t.MINUTE_DS=t.HOUR_DS=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Ep");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={styles:{},watchedEps:"0",totalEps:"0",onAirCustom:{},status:{name:"未收藏"},isDoing:!1,showEpInput:!0,showCustomOnair:!0,focusOrigin:!1,onChangeText:r.FROZEN_FN,onSelectOnAir:r.FROZEN_FN,onResetOnAirUser:r.FROZEN_FN,onScrollIntoViewIfNeeded:r.FROZEN_FN,doUpdateSubjectEp:r.FROZEN_FN},t.WEEK_DAY_DS=["周日","周一","周二","周三","周四","周五","周六"],t.WEEK_DAY_MAP={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},t.HOUR_DS=["20","21","22","23","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19"],t.MINUTE_DS=["00","05","10","15","20","25","30","35","40","45","50","55"]},"./src/screens/home/subject/component/ep/ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/ds.ts"),a=o(s("./src/screens/home/subject/component/icon/ep.tsx")),l=o(s("./src/screens/home/subject/component/icon/ep-filter.tsx")),m=o(s("./src/screens/home/subject/component/icon/online.tsx")),p=o(s("./src/screens/home/subject/component/icon/reverse.tsx")),j=o(s("./src/screens/home/subject/component/ep/eps/index.tsx")),f=s("./src/screens/home/subject/component/ep/ds.ts"),b=s("./node_modules/react/jsx-runtime.js"),h=(0,i.memo)((function(e){var t=e.styles,s=e.watchedEps,o=e.totalEps,i=e.onAirCustom,h=e.status,_=e.isDoing,y=e.showEpInput,g=e.showCustomOnair,v=e.focusOrigin,x=e.onChangeText,O=e.onSelectOnAir,T=e.onResetOnAirUser,S=e.onScrollIntoViewIfNeeded,E=e.doUpdateSubjectEp,P=y,I=!!h.name&&"未收藏"!==h.name,w=i.weekDay,N=i.h,M=i.m,k=i.isOnair,C=i.isCustom,R=g&&(k||_);return(0,b.jsxs)(r.default,{style:t.container,children:[(0,b.jsx)(c.SectionTitle,{right:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.default,{}),!v&&(0,b.jsx)(m.default,{}),(0,b.jsx)(a.default,{}),(0,b.jsx)(p.default,{})]}),children:d.TITLE_EP}),(0,b.jsxs)(r.default,{style:u._.mt.md,children:[(0,b.jsx)(j.default,{}),(0,b.jsx)(n.Heatmap,{id:"条目.章节按钮长按"}),(0,b.jsx)(n.Heatmap,{bottom:35,id:"条目.章节菜单操作"})]}),(P||R)&&(0,b.jsxs)(n.Flex,{style:u._.mt.sm,children:[(0,b.jsx)(n.Flex.Item,{children:P&&(0,b.jsxs)(n.Flex,{children:[(0,b.jsxs)(r.default,{style:t.input,children:[(0,b.jsx)(n.Input,{style:t.inputRaw,pointerEvents:"box-none",keyboardType:"numeric",value:String(s),placeholder:String(s||"0"),editable:I,clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:function(e){return x("watchedEps",e.replace(/[^\d]+/,""))},onSubmitEditing:E,onScrollIntoViewIfNeeded:S}),!!o&&0!=o&&(0,b.jsxs)(n.Text,{style:t.total,type:"sub",size:11,bold:!0,children:["/ ",o]})]}),(0,b.jsx)(r.default,{style:u._.ml.sm,children:(0,b.jsx)(n.Button,{style:t.btn,size:"sm",type:"ghostPrimary",onPress:I?E:void 0,children:"更新"})})]})}),R&&(0,b.jsxs)(n.Flex,{children:[(0,b.jsx)(c.Popover,{data:f.WEEK_DAY_DS,onSelect:function(e){var t={};Object.keys(f.WEEK_DAY_MAP).forEach((function(e){return t[f.WEEK_DAY_MAP[e]]=e})),O(Number(t[e]||0),""+N+M)},children:(0,b.jsx)(n.Flex,{style:t.btnOnAir,justify:"center",children:(0,b.jsx)(n.Text,{size:11,bold:!0,type:"sub",children:void 0===f.WEEK_DAY_MAP[w]?"周":f.WEEK_DAY_MAP[w]})})}),(0,b.jsx)(c.Popover,{style:u._.ml.sm,data:f.HOUR_DS,onSelect:function(e){O(w,""+(e||"00")+(M||"00"))},children:(0,b.jsx)(n.Flex,{style:t.btnOnAir,justify:"center",children:(0,b.jsx)(n.Text,{size:11,bold:!0,type:"sub",children:N||"时"})})}),(0,b.jsx)(c.Popover,{style:u._.ml.sm,data:f.MINUTE_DS,onSelect:function(e){O(w,""+(N||"00")+(e||"00"))},children:(0,b.jsx)(n.Flex,{style:t.btnOnAir,justify:"center",children:(0,b.jsx)(n.Text,{size:11,bold:!0,type:"sub",children:M||"分"})})}),C&&(0,b.jsx)(r.default,{style:t.btnReset,children:(0,b.jsx)(c.IconTouchable,{style:u._.mr._xs,name:"md-refresh",size:20,onPress:T})})]},""+w+N+M),(0,b.jsx)(n.Heatmap,{id:"条目.输入框更新章节"})]})]})}),f.DEFAULT_PROPS,f.COMPONENT_MAIN);t.default=h},"./src/screens/home/subject/component/ep/eps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.LAYOUT_WIDTH=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/styles/index.ts"),n=s("./src/screens/home/subject/component/ep/ds.ts");t.COMPONENT=(0,o.rc)(n.COMPONENT,"Eps"),t.LAYOUT_WIDTH=Math.floor(r.window.width-r.wind)-1},"./src/screens/home/subject/component/ep/eps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/screens/_/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/component/ep/eps/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=t.$,o=t.navigation,c=!n.userStore.isLimit&&s.onlinePlayActionSheetData.length>=2;return(0,i.jsx)(r.Eps,{layoutWidth:u.LAYOUT_WIDTH,marginRight:n._.isLandscape?0:n._._wind,advance:!0,pagination:!0,login:n.userStore.isLogin,subjectId:s.params.subjectId,eps:s.toEps,userProgress:s.userProgress,canPlay:c,flip:s.state.flipEps,onFliped:s.afterEpsFlip,onSelect:function(e,t){s.doEpsSelect(e,t,o)}})}),u.COMPONENT)},"./src/screens/home/subject/component/ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/disc/index.tsx")),a=o(s("./src/screens/home/subject/component/ep/book-ep/index.tsx")),l=o(s("./src/screens/home/subject/component/ep/ep.tsx")),m=s("./src/screens/home/subject/component/ep/ds.ts"),p=s("./src/screens/home/subject/component/ep/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s,o,c=e.onBlockRef,m=e.onScrollIntoViewIfNeeded,f=t.$;if(!f.showEp[1])return null;var b=f.type||u.MODEL_SUBJECT_TYPE.getTitle(n.subjectStore.type(f.subjectId));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.default,{style:n._.container.layout,ref:function(e){return c(e,"音乐"===b?i.TITLE_DISC:i.TITLE_EP)}}),"书籍"===b?(0,j.jsx)(a.default,{onScrollIntoViewIfNeeded:m}):"音乐"===b?(0,j.jsx)(d.default,{}):(0,j.jsx)(l.default,{styles:(0,p.memoStyles)(),watchedEps:f.state.watchedEps||"0",totalEps:f.subjectFormHTML.totalEps||"0",onAirCustom:f.onAirCustom,status:f.collection.status,isDoing:"do"===(null==(s=f.collection)||null==(o=s.status)?void 0:o.type),showEpInput:n.systemStore.setting.showEpInput,showCustomOnair:n.systemStore.setting.showCustomOnair,focusOrigin:n.systemStore.setting.focusOrigin,onChangeText:f.changeText,onSelectOnAir:f.onSelectOnAir,onResetOnAirUser:f.resetOnAirUser,onScrollIntoViewIfNeeded:m,doUpdateSubjectEp:f.doUpdateSubjectEp})]})}),m.COMPONENT)},"./src/screens/home/subject/component/ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:146,marginTop:o._.lg,marginHorizontal:o._.wind},input:{width:o._.r(74),height:o._.r(32)},inputRaw:Object.assign({height:o._.r(32),paddingVertical:0,paddingHorizontal:o._.sm,color:o._.colorSub,fontWeight:"800"},o._.device(o._.fontSize12,o._.fontSize15)),total:{position:"absolute",zIndex:100,top:o._.device(9,5),right:10},btn:{width:o._.r(44),height:o._.r(32),backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel2),overflow:"hidden"},btnOnAir:{width:o._.r(44),height:o._.r(32),backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel2),borderColor:o._.select(o._.colorPrimaryBorder,o._._colorDarkModeLevel2),borderWidth:o._.select(1,0),borderRadius:o._.radiusXs,overflow:o._.ios(void 0,"hidden")},btnReset:{height:o._.r(32),marginTop:-8}}}))},"./src/screens/home/subject/component/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Extra")},"./src/screens/home/subject/component/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/component/modal/index.tsx")),u=s("./src/screens/home/subject/component/extra/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)((function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.default,{}),(0,i.jsx)(r.Heatmap,{id:"条目",screen:"Subject"})]})}),u.COMPONENT)},"./src/screens/home/subject/component/game/details/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/game/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Details")},"./src/screens/home/subject/component/game/details/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/component/game/details/ds.ts"),a=s("./src/screens/home/subject/component/game/details/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s,o,i,d=t.$,m=(0,a.memoStyles)(),p=null==(s=d.gameInfo)?void 0:s.isADV,j="",f=[],b=[],h="",_="",y="",g="",v="",x=!1;if(p){var O=c.otaStore.adv(d.subjectId);O.title&&(j=O.title),O.date&&(h=O.date),O.dev&&(y=O.dev),O.time&&(v=(0,u.formatPlaytime)(O.time)),O.cn&&(x=!0)}else{var T=c.otaStore.game(d.subjectId);j=T.t,f=T.ta||[],b=T.pl||[],h=T.en,_=T.cn,y=T.d,g=T.p}var S=("object"==typeof y?y:[y]).map((function(e){return String(e).trim()})).filter((function(e){return!!e})),E=("object"==typeof g?g:[g]).map((function(e){return String(e).trim()})).filter((function(e){return!!e}));return(0,l.jsxs)(r.default,{style:m.details,children:[!!j&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["名称∶",j]}),!(null==(o=f)||!o.length)&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["类型∶",f.join("、")]}),!(null==(i=b)||!i.length)&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["平台∶",b.join("、")]}),!!S.length&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["开发商∶",S.join("、")]}),!!E.length&&!p&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["发行商∶",E.join("、")]}),!!h&&_!==h&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["最早发售∶",h]}),!!_&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["中文发售∶",_]}),!!v&&(0,l.jsxs)(n.Text,{lineHeight:22,selectable:!0,children:["游玩时间∶",v]}),!!x&&(0,l.jsx)(n.Text,{lineHeight:22,selectable:!0,children:"汉化∶有"}),(0,l.jsx)(n.Touchable,{onPress:function(){return(0,u.open)("https://search.bilibili.com/all?keyword="+encodeURIComponent(d.jp||d.cn)+"%20"+(p?"OP":"PV")+"&order=totalrank&duration=1&tids_1=4")},children:(0,l.jsxs)(n.Flex,{children:[(0,l.jsxs)(n.Text,{type:"sub",lineHeight:22,children:["点击查找 ",p?"OP":"PV"]}),(0,l.jsx)(n.Iconfont,{style:c._.ml.xs,name:"md-open-in-new",size:16})]})})]})}),d.COMPONENT)},"./src/screens/home/subject/component/game/details/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{details:{paddingHorizontal:o._.wind,marginTop:o._.md}}}))},"./src/screens/home/subject/component/game/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Game")},"./src/screens/home/subject/component/game/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/subject/ds.ts"),l=o(s("./src/screens/home/subject/component/icon/hidden.tsx")),m=o(s("./src/screens/home/subject/component/icon/ps.tsx")),p=o(s("./src/screens/home/subject/component/game/details/index.tsx")),j=o(s("./src/screens/home/subject/component/game/thumbs/index.tsx")),f=s("./src/screens/home/subject/component/game/ds.ts"),b=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s,o=e.onBlockRef,d=t.$;if(!d.showGame[1])return null;var f=u.systemStore.setting.showGameInfo;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.default,{style:u._.container.layout,ref:function(e){return o(e,a.TITLE_GAME)}}),(0,b.jsx)(c.InView,{style:(0,i.stl)(u._.mt.lg,!f&&u._.short),children:(0,b.jsxs)(n.Expand,{children:[(0,b.jsx)(c.SectionTitle,{style:u._.container.wind,right:f?!(null!=(s=d.gameInfo)&&s.isADV)&&(0,b.jsx)(m.default,{}):(0,b.jsx)(l.default,{name:a.TITLE_GAME,value:"showGameInfo"}),icon:!f&&"md-navigate-next",onPress:function(){return d.onSwitchBlock("showGameInfo")},children:a.TITLE_GAME}),f&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.default,{}),(0,b.jsx)(p.default,{})]}),(0,b.jsx)(c.PreventTouchPlaceholder,{})]})})]})}),f.COMPONENT)},"./src/screens/home/subject/component/game/thumbs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),r=s("./src/utils/dev/index.ts"),n=s("./src/screens/home/subject/component/game/ds.ts"),c=(t.COMPONENT=(0,r.rc)(n.COMPONENT,"Thumbs"),t.THUMB_WIDTH=o._.r(160));t.THUMB_HEIGHT=.56*c},"./src/screens/home/subject/component/game/thumbs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=y(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),c=o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),u=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/utils/dev/index.ts"),m=s("./src/utils/fetch/index.ts"),p=s("./src/utils/hooks/index.ts"),j=s("./src/constants/index.ts"),f=s("./src/screens/home/subject/component/game/thumbs/utils.ts"),b=s("./src/screens/home/subject/component/game/thumbs/ds.ts"),h=s("./src/screens/home/subject/component/game/thumbs/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(y=function(e){return e?s:t})(e)}t.default=(0,a.c)((function(e,t){var s=t.$;(0,l.r)(b.COMPONENT);var o=(0,n.useState)(!1),a=(0,r.default)(o,2),y=a[0],g=a[1],v=(0,n.useCallback)((function(){y||g(!0)}),[y,g]);return(0,p.useObserver)((function(){var e,t=(0,f.getThumbs)(s.subjectId,null==(e=s.gameInfo)?void 0:e.isADV);return null!=t&&t.length?(0,_.jsx)(c.default,Object.assign({style:i._.mt.md,contentContainerStyle:i._.container.wind,horizontal:!0},j.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:16,onScroll:v,children:t.map((function(e,t){return(0,_.jsx)(u.Image,{style:t?h.styles.image:h.styles.side,src:e,size:b.THUMB_WIDTH,height:b.THUMB_HEIGHT,radius:i._.radiusSm,errorToHide:!0,onPress:function(){var e,o=(0,f.getThumbs)(s.subjectId,null==(e=s.gameInfo)?void 0:e.isADV,!1);o.length&&((0,d.showImageViewer)(o.map((function(e){return{url:e}})),t),(0,m.t)("条目.游戏截图",{subjectId:s.subjectId}))}},e)}))})):null}))}))},"./src/screens/home/subject/component/game/thumbs/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts");t.styles=o._.create({image:{marginLeft:o._.sm,overflow:"hidden"},side:{overflow:"hidden"}})},"./src/screens/home/subject/component/game/thumbs/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.fill.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbs=function(e,t,s){var n;if(t){var c,u=null==(c=o.otaStore.adv(e))?void 0:c.length;return"number"!=typeof u||u<=0?[]:new Array(u).fill("").map((function(t,o){return(0,r.CDN_ADV)(e,o,s)}))}var i=null==(n=o.otaStore.game(e))?void 0:n.l;return"number"!=typeof i||i<=0?[]:new Array(i).fill("").map((function(t,o){return(0,r.CDN_GAME)(e,o,s)}))};var o=s("./src/stores/index.ts"),r=s("./src/constants/index.ts")},"./src/screens/home/subject/component/head/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=t.COMPONENT=(0,o.rc)(r.COMPONENT,"Head");t.COMPONENT_MAIN=(0,o.rc)(n),t.DEFAULT_PROPS={styles:{},showRelation:!1,subjectId:0,subjectPrev:void 0,subjectAfter:void 0,subjectSeries:void 0,cn:"",jp:"",release:"",year:"",imageWidth:0,imageHeight:0,titleLabel:"",hideScore:!1,rating:{},nsfw:!1,hasSeries:!1,isMusic:!1}},"./src/screens/home/subject/component/head/head.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/constants/index.ts"),m=o(s("./src/screens/home/subject/component/cover/index.tsx")),p=o(s("./src/screens/home/subject/component/series/index.tsx")),j=s("./src/screens/home/subject/component/head/ds.ts"),f=s("./node_modules/react/jsx-runtime.js"),b=(0,d.memo)((function(e){var t=e.styles,s=e.showRelation,o=e.subjectId,d=e.subjectPrev,j=e.subjectAfter,b=e.subjectSeries,h=e.cn,_=e.jp,y=e.release,g=e.year,v=e.imageWidth,x=e.imageHeight,O=e.titleLabel,T=e.hideScore,S=e.rating,E=e.nsfw,P=e.hasSeries,I=e.isMusic,w=(0,i.cnjp)(_,h),N=(0,i.cnjp)(h,_),M=!1,k=y.includes("年"),C=y.includes("月"),R=y.includes("日");if(k&&C&&R){var A=""+y.replace(/年|月|日/g,"/");M=(0,i.getTimestamp)(null==A?void 0:A.slice(0,A.length-1))>(0,i.getTimestamp)()}else(k&&C&&!R||k&&!C&&!R)&&(M=!0);var D=!!(d||j||b),L=(h.length>32?12:h.length>24||h.length>16?13:16)+(2===l.PAD?4:2);s&&D&&(L=Math.max(11,L-2)),I&&(L-=1);var H,F=[],B=13;w!==N&&F.push(String(w).slice(0,28)+(String(w).length>=28?"...":"")),O&&F.push(O),(H=F.join(" · ")).length>=32?B=11:H.length>=22&&(B=12);var U=v+u._.wind+u._.device(12,20);return(0,f.jsxs)(r.default,{style:t.container,children:[M&&(0,f.jsxs)(n.Text,{style:[t.release,{left:U}],type:"__plain__",size:10,bold:!0,children:[y," 上映"]}),(0,f.jsxs)(r.default,{style:[t.content,{minHeight:x-u._.r(20),paddingLeft:U}],children:[(0,f.jsxs)(r.default,{style:{minHeight:x-u._.r(68)},children:[(0,f.jsxs)(r.default,{children:[(0,f.jsx)(n.Katakana.Provider,{size:L,lineHeight:L+1,bold:!0,children:(0,f.jsxs)(n.Katakana,{size:L,lineHeight:L+1,bold:!0,onLongPress:function(){(0,a.t)("条目.复制标题",{subjectId:o}),(0,i.copy)(N)},children:[N,!!g&&(0,f.jsxs)(n.Text,{size:L-3,lineHeight:L+1,children:[" ","(",g,")"]})]})}),(!b||!!w&&w!==N)&&(0,f.jsx)(n.Katakana.Provider,{style:!!N&&u._.mt.xs,itemStyle:t.katakana,type:"sub",size:B,numberOfLines:P?2:4,children:(0,f.jsx)(n.Katakana,{type:"sub",size:B,numberOfLines:P?2:4,onLongPress:function(){(0,a.t)("条目.复制标题",{subjectId:o}),(0,i.copy)(w)},children:H})}),(0,f.jsx)(n.Heatmap,{id:"条目.复制标题"})]}),(0,f.jsx)(p.default,{size:L})]}),(0,f.jsx)(n.Flex,{style:u._.mt.xs,children:!T&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(n.Text,{type:"main",size:u._.device(20,24),children:[""===S.score?"-":(0,i.toFixed)(S.score,1)," "]}),""!==S.score&&(0,f.jsx)(c.ScoreTag,{style:u._.ml.sm,value:Number(S.score)}),E&&(0,f.jsx)(c.Tag,{style:u._.ml.sm,size:13,value:"NSFW"})]})})]}),(0,f.jsx)(m.default,{})]})}),j.DEFAULT_PROPS,j.COMPONENT_MAIN);t.default=b},"./src/screens/home/subject/component/head/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/ds.ts"),i=o(s("./src/screens/home/subject/component/head/head.tsx")),d=s("./src/screens/home/subject/component/head/ds.ts"),a=s("./src/screens/home/subject/component/head/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=e.onBlockRef,o=t.$,c=n.systemStore.setting.subjectShowAirdayMonth,d=c?o.yearAndMount:o.year;if(d&&"book"===o.subjectTypeValue){var m=c?o.yearAndMountEnd:o.end;m&&m!==d&&(d=d.replace("-","/")+" - "+m.replace("-","/"))}return(0,l.jsx)(r.default,{ref:function(e){return s(e,u.TITLE_HEAD)},children:(0,l.jsx)(i.default,{styles:(0,a.memoStyles)(),showRelation:n.systemStore.setting.showRelation,subjectId:Number(o.subject.id||o.subjectId),subjectPrev:o.subjectPrev,subjectAfter:o.subjectAfter,subjectSeries:o.subjectSeries,cn:o.cn,jp:o.jp,release:o.release,year:d,imageWidth:o.imageWidth,imageHeight:o.imageHeight,titleLabel:o.titleLabel,hideScore:n.systemStore.setting.hideScore,rating:o.rating,nsfw:o.nsfw,hasSeries:o.hasSeries,isMusic:"音乐"===o.type})})}),d.COMPONENT)},"./src/screens/home/subject/component/head/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{paddingTop:o._.r(48),marginTop:o._.ios(80,-80)},content:{paddingTop:o._.r(12),paddingRight:o._.wind,paddingBottom:20,backgroundColor:o._.colorPlain,borderTopLeftRadius:o._.radiusLg,borderTopRightRadius:o._.radiusLg},release:{position:"absolute",zIndex:1,top:o._.r(28),opacity:.6},katakana:{marginTop:-4}}}))},"./src/screens/home/subject/component/header-component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.TopEls=t.COMPONENT=t.BottomEls=void 0;var r=s("./src/utils/dev/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=o(s("./src/screens/home/subject/component/anitabi/index.tsx")),u=o(s("./src/screens/home/subject/component/blog/index.tsx")),i=o(s("./src/screens/home/subject/component/box/index.tsx")),d=o(s("./src/screens/home/subject/component/catalog/index.tsx")),a=o(s("./src/screens/home/subject/component/character/index.tsx")),l=o(s("./src/screens/home/subject/component/comic/index.tsx")),m=o(s("./src/screens/home/subject/component/comment/index.tsx")),p=o(s("./src/screens/home/subject/component/ep/index.tsx")),j=o(s("./src/screens/home/subject/component/game/index.tsx")),f=o(s("./src/screens/home/subject/component/info/index.tsx")),b=o(s("./src/screens/home/subject/component/like/index.tsx")),h=o(s("./src/screens/home/subject/component/lock/index.tsx")),_=o(s("./src/screens/home/subject/component/rating/index.tsx")),y=o(s("./src/screens/home/subject/component/recent/index.tsx")),g=o(s("./src/screens/home/subject/component/relations/index.tsx")),v=o(s("./src/screens/home/subject/component/smb/index.tsx")),x=o(s("./src/screens/home/subject/component/staff/index.tsx")),O=o(s("./src/screens/home/subject/component/summary/index.tsx")),T=o(s("./src/screens/home/subject/component/tags/index.tsx")),S=o(s("./src/screens/home/subject/component/thumbs/index.tsx")),E=o(s("./src/screens/home/subject/component/topic/index.tsx")),P=o(s("./src/screens/home/subject/component/track-comment/index.tsx"));t.COMPONENT=(0,r.rc)(n.COMPONENT,"HeaderComponent"),t.TopEls=[h.default,i.default,p.default,v.default,T.default],t.BottomEls=[O.default,S.default,f.default,j.default,_.default,a.default,x.default,c.default,g.default,l.default,d.default,b.default,u.default,E.default,y.default,m.default,P.default]},"./src/screens/home/subject/component/header-component/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=h(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/components/index.ts"),u=s("./src/components/error-boundary/utils.tsx"),i=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),l=s("./src/constants/index.ts"),m=o(s("./src/screens/home/subject/component/bg/index.tsx")),p=o(s("./src/screens/home/subject/component/head/index.tsx")),j=o(s("./src/screens/home/subject/component/loading/index.tsx")),f=s("./src/screens/home/subject/component/header-component/ds.ts"),b=s("./node_modules/react/jsx-runtime.js");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(h=function(e){return e?s:t})(e)}t.default=(0,d.c)((function(e,t){var s=t.$,o=(0,r.useMemo)((function(){return f.TopEls.map((function(t,s){return(0,u.renderWithErrorBoundary)(t,s,e)}))}),[]),d=(0,r.useMemo)((function(){return f.BottomEls.map((function(t,s){return(0,u.renderWithErrorBoundary)(t,s,e)}))}),[]);return(0,a.useObserver)((function(){return(0,b.jsxs)(b.Fragment,{children:[!l.IOS&&(0,b.jsx)(c.ErrorBoundary,{children:(0,b.jsx)(m.default,{})}),(0,b.jsx)(p.default,{onBlockRef:e.onBlockRef}),(0,b.jsxs)(n.default,{style:i._.container.plain,children:[o,s.state.rendered&&d,(0,b.jsx)(j.default,{})]})]})}))}))},"./src/screens/home/subject/component/header-title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_WIDTH=t.IMAGE_HEIGHT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=t.COMPONENT=(0,o.rc)(r.COMPONENT,"HeaderTitle"),c=(t.COMPONENT_MAIN=(0,o.rc)(n),t.IMAGE_WIDTH=28);t.IMAGE_HEIGHT=1.28*c,t.DEFAULT_PROPS={subjectId:0,common:"",rank:"",score:"",type:"",cn:"",jp:"",titleLabel:""}},"./src/screens/home/subject/component/header-title/header-title.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/subject/component/header-title/ds.ts"),l=s("./src/screens/home/subject/component/header-title/styles.ts"),m=s("./node_modules/react/jsx-runtime.js"),p=(0,d.memo)((function(e){var t=e.subjectId,s=e.common,o=e.rank,d=e.score,p=e.type,j=e.cn,f=e.jp,b=e.titleLabel;return(0,m.jsxs)(n.Flex,{style:l.styles.container,children:[(0,m.jsx)(n.Cover,{src:s,size:"音乐"===p?a.IMAGE_HEIGHT:a.IMAGE_WIDTH,height:a.IMAGE_HEIGHT,radius:u._.radiusXs,cdn:!(0,i.x18)(t),fadeDuration:0}),(0,m.jsxs)(n.Flex.Item,{style:u._.ml.sm,children:[(0,m.jsx)(r.default,{style:l.styles.title,children:(0,m.jsx)(n.Katakana.Provider,{style:l.styles.itemStyle,size:12,numberOfLines:1,children:(0,m.jsxs)(n.Katakana,{size:12,numberOfLines:1,children:[(0,i.cnjp)(j,f),!!b&&(0,m.jsxs)(n.Text,{size:12,type:"sub",children:[" ","· ",b]})]})})}),d?(0,m.jsxs)(n.Flex,{style:u._.mt.xxs,children:[(0,m.jsx)(c.Rank,{style:u._.mr.xs,value:o,size:9}),(0,m.jsx)(c.Stars,{value:d})]}):(0,m.jsx)(n.Text,{style:u._.mt.xxs,size:10,type:"sub",numberOfLines:1,children:(0,i.cnjp)(f,j)})]})]})}),a.DEFAULT_PROPS,a.COMPONENT_MAIN);t.default=p},"./src/screens/home/subject/component/header-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/component/header-title/header-title.tsx")),u=s("./src/screens/home/subject/component/header-title/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)((function(e){var t,s,o,n=e.$;return(0,i.jsx)(c.default,{subjectId:n.subjectId,common:(0,r.getCoverMedium)((null==(t=n.subject.images)?void 0:t.common)||n.coverPlaceholder||n.cover),rank:n.subject.rank||(null==(s=n.subjectFromOSS)||null==(o=s.rating)?void 0:o.rank)||"-",score:n.rating.score,type:n.type,cn:n.cn,jp:n.jp,titleLabel:n.titleLabel})}),u.COMPONENT)},"./src/screens/home/subject/component/header-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts");t.styles=o._.create({container:{marginLeft:-o._.sm,marginRight:o._.web(80,o._.lg),marginBottom:o._.platforms(-2,0,4,8,4)},title:{marginTop:-2},itemStyle:{marginTop:1}})},"./src/screens/home/subject/component/icon/actions.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(o(s("react")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/subject/component/icon/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=e.style,o=e.children,d=t.$,p=t.navigation,j=[].concat((0,r.default)(d.actions.map((function(e){return e.name}))),[a.ACTIONS_MANAGE]);return(0,l.jsx)(c.Popover,{style:(0,i.stl)(!o&&m.touch,s),data:j,hitSlop:a.HIT_SLOP,onSelect:function(e){return d.onActionsPress(e,p)},children:o||(0,l.jsx)(n.Flex,{style:m.btn,justify:"center",children:(0,l.jsx)(n.Iconfont,{name:"md-read-more",color:u._.colorIcon,size:25})})})}));var m=u._.create({touch:{marginRight:4,borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}})},"./src/screens/home/subject/component/icon/close.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/constants/i18n/index.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=t.$;return d.SHARE_MODE?null:(0,l.jsx)(n.IconTouchable,{style:m.touch,name:"md-close",color:c._.colorIcon,hitSlop:{top:6,right:c._.device(2,4),bottom:6,left:c._.device(2,4)},onPress:function(){var e=s.collection.status;"未收藏"!==(void 0===e?{name:"未收藏"}:e).name?s.subjectFormHTML.formhash?(0,u.confirm)("确定删除收藏?",(function(){return s.doEraseCollection()})):(0,u.info)("无法操作, 请检查"+a.default.login()+"状态"):(0,u.info)("当前未收藏")},children:(0,l.jsx)(r.Heatmap,{id:"条目.删除收藏"})})}));var m=c._.create({touch:{marginRight:-c._.sm,marginLeft:3}})},"./src/screens/home/subject/component/icon/disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=t.$;return(0,i.jsx)(n.IconTouchable,{style:d.disc,name:"md-g-translate",size:18,onPress:s.doDiscTranslate,children:(0,i.jsx)(r.Heatmap,{id:"条目.翻译曲目"})})}));var d=c._.create({disc:{marginLeft:c._.sm,marginRight:-c._.sm}})},"./src/screens/home/subject/component/icon/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.ORIGINS_MANAGE=t.ICS_MANAGE=t.HIT_SLOP=t.ACTIONS_MANAGE=void 0;t.HIT_SLOP={top:8,right:8,bottom:8,left:8},t.ORIGINS_MANAGE="源头管理",t.ACTIONS_MANAGE="跳转管理",t.ICS_MANAGE="导出放送日程ICS"},"./src/screens/home/subject/component/icon/ep-filter.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=t.$;return(0,d.jsxs)(r.default,{children:[s.eps.length>=160&&(0,d.jsx)(c.Popover,{style:a.touch,data:s.filterEpsData,onSelect:s.updateFilterEps,children:(0,d.jsx)(n.Flex,{style:a.btn,justify:"center",children:(0,d.jsx)(n.Iconfont,{name:"md-filter-list",color:s.state.filterEps?u._.colorMain:u._.colorIcon})})}),(0,d.jsx)(n.Heatmap,{right:-6,bottom:18,id:"条目.设置章节筛选"})]})}));var a=u._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}})},"./src/screens/home/subject/component/icon/ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/utils/fetch/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=t.$,o=t.navigation;return(0,d.jsx)(n.IconTouchable,{style:c._.ml.xs,name:"md-menu",onPress:function(){(0,i.t)("条目.跳转",{to:"Episodes",from:"章节",subjectId:s.subjectId}),o.push("Episodes",{subjectId:s.subjectId,name:s.cn||s.jp,epsThumbs:s.state.epsThumbs,epsThumbsHeader:s.state.epsThumbsHeader,filterEps:s.state.filterEps})},children:(0,d.jsx)(r.Heatmap,{right:13,id:"条目.跳转",from:"章节"})})}))},"./src/screens/home/subject/component/icon/folder.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=t.$;if(i.SHARE_MODE)return null;var o=!!s.catalogIncludes;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.Flex,{style:o&&c._.mr.xs,children:[(0,d.jsx)(n.IconTouchable,{name:"md-folder-open",size:20,color:c._.colorIcon,onPress:s.toggleFolder,children:(0,d.jsx)(r.Heatmap,{id:"条目.管理目录"})}),o&&(0,d.jsx)(r.Text,{style:a.num,size:10,type:"icon",bold:!0,children:s.catalogIncludes})]}),(0,d.jsx)(n.FolderManageModal,{id:s.subjectId,visible:s.state.folder,onClose:s.toggleFolder})]})}));var a=c._.create({num:{position:"absolute",zIndex:1,right:-2,bottom:6}})},"./src/screens/home/subject/component/icon/game.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(o(s("react")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/subject/component/icon/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=e.style,o=e.children,u=t.$,d=t.navigation;if(!u.titleLabel.includes("游戏"))return null;var j=[].concat((0,r.default)(u.onlineGameOrigins.map((function(e){return"object"==typeof e?e.name:e}))),[l.ORIGINS_MANAGE]);return u.actions.length||a.WEB||j.push(l.ACTIONS_MANAGE),(0,m.jsx)(c.Popover,{style:(0,i.stl)(!o&&p.touch,s),data:j,hitSlop:l.HIT_SLOP,onSelect:function(e){e!==l.ORIGINS_MANAGE?e!==l.ACTIONS_MANAGE?u.onlineGameSelected(e):d.push("Actions",{subjectId:u.subjectId,name:u.cn||u.jp}):d.push("OriginSetting")},children:o||(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.Flex,{style:p.btn,justify:"center",children:(0,m.jsx)(n.Iconfont,{name:"md-airplay",size:18})}),(0,m.jsx)(n.Heatmap,{right:55,bottom:-7,id:"条目.搜索源"})]})})}));var p=u._.create({touch:{marginRight:-u._.sm,borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}})},"./src/screens/home/subject/component/icon/hd.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/screens/_/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=t.$,o=t.navigation;return n.userStore.isLimit||!s.hd?null:(0,u.jsx)(r.IconTouchable,{style:n._.mr._sm,name:"md-hd",onPress:function(){o.push("HD",{cn:s.cn,subjectId:s.hd})}})}))},"./src/screens/home/subject/component/icon/hidden.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/utils/ui/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=e.name,o=e.value,u=t.$;return s&&o?(0,d.jsx)(n.IconTouchable,{style:a.touch,name:"md-close",color:c._.colorIcon,onPress:function(){(0,i.confirm)("确定永久隐藏栏目["+s+"]?\n隐藏后可到右上角菜单里重置",(function(){u.hiddenBlock(o),(0,i.info)("已隐藏")}))},children:(0,d.jsx)(r.Heatmap,{id:"条目.删除收藏"})}):null}));var a=c._.create({touch:{paddingVertical:0,marginRight:-c._.sm,marginLeft:4}})},"./src/screens/home/subject/component/icon/manga.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=o(s("./src/screens/home/subject/component/icon/styles.ts")),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s,o=t.$;return n.userStore.isLimit||null==(s=o.source)||!s.mangaId?null:(0,i.jsxs)(r.Touchable,{style:u.default.icon,onPress:o.toManhuadb,children:[(0,i.jsxs)(r.Flex,{children:[(0,i.jsx)(r.Iconfont,{name:"md-visibility"}),(0,i.jsx)(r.Text,{style:n._.ml.xs,size:13,type:"sub",children:"漫画"})]}),(0,i.jsx)(r.Heatmap,{id:"条目.阅读漫画"})]})}))},"./src/screens/home/subject/component/icon/online.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(o(s("react")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=o(s("./src/screens/home/subject/component/icon/actions.tsx")),m=s("./src/screens/home/subject/component/icon/ds.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=e.style,o=e.children,d=t.$,f=t.navigation,b=[].concat((0,r.default)(d.onlineOrigins),[m.ORIGINS_MANAGE]);return d.actions.length||a.WEB||b.push(m.ACTIONS_MANAGE),u.systemStore.setting.exportICS&&b.push(m.ICS_MANAGE),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Popover,{style:(0,i.stl)(!o&&j.touch,s),data:b.map((function(e){return"object"==typeof e?e.name:e})),hitSlop:m.HIT_SLOP,onSelect:function(e){e!==m.ORIGINS_MANAGE?e!==m.ACTIONS_MANAGE?e!==m.ICS_MANAGE?d.onlinePlaySelected(e):d.doExportCalenderEventICS():f.push("Actions",{subjectId:d.subjectId,name:d.cn||d.jp}):f.push("OriginSetting")},children:o||(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.Flex,{style:j.btn,justify:"center",children:(0,p.jsx)(n.Iconfont,{name:"md-airplay",size:18})}),(0,p.jsx)(n.Heatmap,{right:55,bottom:-7,id:"条目.搜索源"})]})}),!o&&!!d.actions.length&&(0,p.jsx)(l.default,{style:j.actions})]})}));var j=u._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{width:38,height:38},actions:{marginRight:4,marginLeft:2}})},"./src/screens/home/subject/component/icon/preview.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),i=o(s("./src/screens/home/subject/component/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=e.data,o=e.headers,c=t.$,a=t.navigation;return n.systemStore.setting.showThumbs?(0,d.jsx)(r.Touchable,{style:i.default.touch,onPress:function(){a.push("Preview",{subjectId:c.subjectId,cn:c.cn,jp:c.jp,_images:JSON.stringify(s||[]),_headers:JSON.stringify(o||{})}),(0,u.t)("条目.跳转",{to:"Preview",from:"预览",subjectId:c.subjectId})},children:(0,d.jsxs)(r.Flex,{children:[(0,d.jsx)(r.Text,{type:"sub",children:"更多"}),(0,d.jsx)(r.Iconfont,{name:"md-navigate-next"})]})}):null}))},"./src/screens/home/subject/component/icon/ps.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=t.$;return s.isPS?(0,u.jsxs)(r.Touchable,{style:n._.mr._sm,onPress:s.toPSNINE,children:[(0,u.jsxs)(r.Flex,{children:[(0,u.jsx)(r.Text,{style:n._.ml.xs,size:13,type:"sub",children:"奖杯"}),(0,u.jsx)(r.Iconfont,{style:n._.ml.xs,name:"md-open-in-new",size:17})]}),(0,u.jsx)(r.Heatmap,{id:"条目.查看奖杯"})]}):null}))},"./src/screens/home/subject/component/icon/reverse.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=t.$,o=s.state.epsReverse;return(0,d.jsx)(n.IconReverse,{style:(0,u.stl)(a.touch,o&&a.reverse),color:o?c._.colorMain:c._.colorIcon,onPress:s.toggleReverseEps,children:(0,d.jsx)(r.Heatmap,{right:-5,id:"条目.章节倒序"})})}));var a=c._.create({touch:{marginRight:-c._.sm,marginLeft:4},reverse:{transform:[{rotateX:"180deg"}]}})},"./src/screens/home/subject/component/icon/search-disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(o(s("react")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/subject/component/icon/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=e.style,o=e.children,u=t.$,d=t.navigation,j=[].concat((0,r.default)(u.onlineDiscOrigins.map((function(e){return"object"==typeof e?e.name:e}))),[l.ORIGINS_MANAGE]);return u.actions.length||a.WEB||j.push(l.ACTIONS_MANAGE),(0,m.jsx)(c.Popover,{style:(0,i.stl)(!o&&p.touch,s),data:j,hitSlop:l.HIT_SLOP,onSelect:function(e){e!==l.ORIGINS_MANAGE?e!==l.ACTIONS_MANAGE?u.onlineDiscSelected(e):d.push("Actions",{subjectId:u.subjectId,name:u.cn||u.jp}):d.push("OriginSetting")},children:o||(0,m.jsx)(n.Flex,{style:p.btn,justify:"center",children:(0,m.jsx)(n.Iconfont,{name:"md-airplay",size:18})})})}));var p=u._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{paddingVertical:2,paddingHorizontal:8}})},"./src/screens/home/subject/component/icon/search.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(o(s("react")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/subject/component/icon/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=e.style,o=e.children,u=t.$,d=t.navigation,j=[].concat((0,r.default)(u.onlineComicOrigins.map((function(e){return"object"==typeof e?e.name:e}))),[l.ORIGINS_MANAGE]);return u.actions.length||a.WEB||j.push(l.ACTIONS_MANAGE),(0,m.jsx)(c.Popover,{style:(0,i.stl)(!o&&p.touch,s),data:j,hitSlop:l.HIT_SLOP,onSelect:function(e){e!==l.ORIGINS_MANAGE?e!==l.ACTIONS_MANAGE?u.onlineComicSelected(e):d.push("Actions",{subjectId:u.subjectId,name:u.cn||u.jp}):d.push("OriginSetting")},children:o||(0,m.jsx)(n.Flex,{style:p.btn,justify:"center",children:(0,m.jsx)(n.Iconfont,{name:"md-airplay",size:18})})})}));var p=u._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{paddingVertical:2,paddingHorizontal:4}})},"./src/screens/home/subject/component/icon/smb.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),i=s("./src/constants/index.ts"),d=o(s("./src/screens/home/subject/component/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=t.navigation;return i.WEB||!n.systemStore.setting.showSMB?null:(0,a.jsx)(r.Touchable,{style:d.default.touch,onPress:function(){(0,u.t)("条目.跳转",{to:"SMB",from:"本地"}),s.push("Smb")},children:(0,a.jsxs)(r.Flex,{children:[(0,a.jsx)(r.Text,{type:"sub",children:"管理"}),(0,a.jsx)(r.Iconfont,{name:"md-navigate-next"})]})})}))},"./src/screens/home/subject/component/icon/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("./src/stores/index.ts");t.default=o._.create({touch:{paddingLeft:o._.xs,marginRight:-o._.sm,borderRadius:o._.radiusSm,overflow:"hidden"},icon:{padding:o._.sm,marginRight:-o._.sm,marginLeft:o._.xs,borderRadius:o._.radiusSm,overflow:"hidden"}})},"./src/screens/home/subject/component/icon/translate.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=e.content,o=void 0===s?"":s,i=t.$;return!c.systemStore.setting.showSummary||i.state.translateResult.length||o&&(0,u.isChineseParagraph)(o)?null:(0,d.jsx)(n.IconTouchable,{style:c._.mr._sm,name:"md-g-translate",size:18,onPress:i.doTranslate,children:(0,d.jsx)(r.Heatmap,{id:"条目.翻译简介"})})}))},"./src/screens/home/subject/component/icon/wenku.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=o(s("./src/screens/home/subject/component/icon/styles.ts")),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s,o=t.$;return n.userStore.isLimit||null==(s=o.source)||!s.wenkuId?null:(0,i.jsxs)(r.Touchable,{style:u.default.icon,onPress:o.toWenku8,children:[(0,i.jsxs)(r.Flex,{children:[(0,i.jsx)(r.Iconfont,{name:"md-visibility"}),(0,i.jsx)(r.Text,{style:n._.ml.xs,size:13,type:"sub",children:"小说"})]}),(0,i.jsx)(r.Heatmap,{id:"条目.阅读轻小说"})]})}))},"./src/screens/home/subject/component/info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Info");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,showInfo:!0,info:"",onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/info/info.lazy.ts")),a=s("./src/screens/home/subject/component/info/ds.ts"),l=s("./src/screens/home/subject/component/info/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showInfo[1]?(0,m.jsxs)(r.Suspense,{fallback:null,children:[(0,m.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_INFO)}}),(0,m.jsx)(d.default,{navigation:u,styles:(0,l.memoStyles)(),subjectId:o.subjectId,showInfo:c.systemStore.setting.showInfo,info:o.info,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/info/info.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(6341).then(s.bind(s,"./src/screens/home/subject/component/info/info.tsx"))}))},"./src/screens/home/subject/component/info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:210,marginTop:o._.lg},hide:{marginTop:o._.lg,marginBottom:-o._.sm},info:{paddingVertical:o._.sm,paddingHorizontal:o._.wind}}}))},"./src/screens/home/subject/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.POPOVER_DATA=t.ITEM_HEIGHT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/ds.ts"),n=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(n.COMPONENT,"Item"),t.POPOVER_DATA={动画:[r.TEXT_LIKES,r.TEXT_COPY_COMMENT,"特别关注TA的动画评论",r.TEXT_IGNORE_USER],书籍:[r.TEXT_LIKES,r.TEXT_COPY_COMMENT,"特别关注TA的书籍评论",r.TEXT_IGNORE_USER],游戏:[r.TEXT_LIKES,r.TEXT_COPY_COMMENT,"特别关注TA的游戏评论",r.TEXT_IGNORE_USER],音乐:[r.TEXT_LIKES,r.TEXT_COPY_COMMENT,"特别关注TA的音乐评论",r.TEXT_IGNORE_USER],三次元:[r.TEXT_LIKES,r.TEXT_COPY_COMMENT,"特别关注TA的三次元评论",r.TEXT_IGNORE_USER]},t.ITEM_HEIGHT=100},"./src/screens/home/subject/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/screens/_/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/component/item/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=e.index,o=e.time,u=e.avatar,a=e.userId,l=e.userName,m=e.star,p=e.comment,j=e.relatedId,f=e.action,b=e.mainId,h=e.mainName,_=t.$,y=t.navigation;if(!_.state.rendered||(0,c.getIsBlockedUser)(n.rakuenStore.blockUserIds,l,a,"Subject|"+_.subjectId))return null;var g={id:"条目.跳转",data:{from:"吐槽",subjectId:_.subjectId}};return(0,d.jsx)(r.InView,{y:n._.window.height+s*i.ITEM_HEIGHT,children:(0,d.jsx)(r.ItemComment,{navigation:y,event:g,time:o,avatar:u,userId:a,userName:l,star:n.systemStore.setting.hideScore?void 0:m,comment:p,subjectId:_.subjectId,relatedId:j,action:f,mainId:b,mainName:h,popoverData:i.POPOVER_DATA[_.type],onSelect:_.onTrackUsersCollection})},a)}),i.COMPONENT)},"./src/screens/home/subject/component/like/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Like"),u=(t.COMPONENT_MAIN=(0,o.rc)(c),t.COVER_WIDTH=80);t.COVER_HEIGHT=1.4*u,t.DEFAULT_PROPS={navigation:{},showLike:!0,subjectId:0,like:[],typeCn:"",onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/like/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=m(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/like/like.lazy.ts")),a=s("./src/screens/home/subject/component/like/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(m=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showLike[1]?(0,l.jsxs)(r.Suspense,{fallback:null,children:[(0,l.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_LIKE)}}),(0,l.jsx)(d.default,{navigation:u,showLike:c.systemStore.setting.showLike,subjectId:o.subjectId,like:o.like,typeCn:o.type,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/like/like.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(1537).then(s.bind(s,"./src/screens/home/subject/component/like/like.tsx"))}))},"./src/screens/home/subject/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_CONTROL_PROPS=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),r=s("./src/utils/dev/index.ts"),n=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,r.rc)(n.COMPONENT,"List"),t.REFRESH_CONTROL_PROPS={tintColor:o._.__colorPlain__,titleColor:o._.__colorPlain__}},"./src/screens/home/subject/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),u=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/component/header-component/index.tsx")),d=s("./src/screens/home/subject/component/list/utils.tsx"),a=s("./src/screens/home/subject/component/list/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=e.forwardRef,o=e.onScrollIntoViewIfNeeded,u=e.onBlockRef,m=t.$;return(0,l.jsx)(r.ListView,{ref:s,style:n._.container.flex,contentContainerStyle:n._.container.bottom,keyExtractor:c.keyExtractor,data:m.subjectComments,scrollEventThrottle:16,scrollToTop:!0,keyboardDismissMode:"on-drag",footerEmptyDataComponent:m.footerEmptyDataComponent,refreshControlProps:a.REFRESH_CONTROL_PROPS,ListHeaderComponent:(0,l.jsx)(i.default,{onScrollIntoViewIfNeeded:o,onBlockRef:u}),renderItem:d.renderItem,onScroll:m.onScroll,onHeaderRefresh:m.onHeaderRefresh,onFooterRefresh:m.fetchSubjectComments})}),a.COMPONENT)},"./src/screens/home/subject/component/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=function(e){var t=e.item,s=e.index;return(0,n.jsx)(r.default,Object.assign({},t,{index:s}))};o(s("react"));var r=o(s("./src/screens/home/subject/component/item/index.tsx")),n=s("./node_modules/react/jsx-runtime.js")},"./src/screens/home/subject/component/loading/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Loading")},"./src/screens/home/subject/component/loading/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/component/loading/ds.ts"),u=s("./src/screens/home/subject/component/loading/styles.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){return t.$.subjectComments._loaded?null:(0,i.jsx)(r.Flex,{style:u.styles.loading,justify:"center",children:(0,i.jsx)(r.Loading,{})})}),c.COMPONENT)},"./src/screens/home/subject/component/loading/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts");t.styles=o._.create({loading:{height:240}})},"./src/screens/home/subject/component/lock/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/component/lock/styles.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){if(!t.$.lock)return null;var s=(0,u.memoStyles)();return(0,i.jsxs)(r.Flex,{style:s.container,children:[(0,i.jsx)(r.Mesume,{index:2,size:72}),(0,i.jsxs)(r.Flex.Item,{children:[(0,i.jsx)(r.Text,{type:"main",size:16,bold:!0,children:"条目已锁定"}),(0,i.jsx)(r.Text,{style:n._.mt.sm,type:"sub",children:"不符合收录原则，条目及相关收藏、讨论、关联等内容将会随时被移除"})]})]})}))},"./src/screens/home/subject/component/lock/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{paddingVertical:o._.md,paddingRight:o._.wind,paddingLeft:o._.xs,margin:o._.wind,borderWidth:1,borderColor:o._.colorMain,borderRadius:o._.radiusSm}}}))},"./src/screens/home/subject/component/modal/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Modal");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={visible:!1,disabled:!1,subjectId:0,name:"",nameCn:"",action:"看",onSubmit:function(){},onClose:r.FROZEN_FN}},"./src/screens/home/subject/component/modal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=a(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=o(s("./src/screens/home/subject/component/modal/modal.lazy.ts")),i=s("./src/screens/home/subject/component/modal/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(a=function(e){return e?s:t})(e)}t.default=(0,c.obc)((function(e,t){var s=t.$;return n.userStore.isLogin?(0,d.jsx)(r.Suspense,{fallback:null,children:(0,d.jsx)(u.default,{visible:s.state.visible,disabled:s.state.disabled,subjectId:s.params.subjectId,name:s.subject.name,nameCn:s.subject.name_cn,action:s.action,onSubmit:s.doUpdateCollection,onClose:s.closeManageModal})}):null}),i.COMPONENT)},"./src/screens/home/subject/component/modal/modal.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(2652).then(s.bind(s,"./src/screens/home/subject/component/modal/modal.tsx"))}))},"./src/screens/home/subject/component/rating/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=t.COMPONENT=(0,o.rc)(r.COMPONENT,"Rating");t.COMPONENT_MAIN=(0,o.rc)(n),t.DEFAULT_PROPS={styles:{},hideScore:!1,showRating:!0}},"./src/screens/home/subject/component/rating/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/rating/rating.lazy.ts")),a=s("./src/screens/home/subject/component/rating/ds.ts"),l=s("./src/screens/home/subject/component/rating/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef;return t.$.showRating[1]?(0,m.jsxs)(r.Suspense,{fallback:null,children:[(0,m.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_RATING)}}),(0,m.jsx)(d.default,{styles:(0,l.memoStyles)(),showRating:c.systemStore.setting.showRating,hideScore:c.systemStore.setting.hideScore})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/rating/rating.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(1990).then(s.bind(s,"./src/screens/home/subject/component/rating/rating.tsx"))}))},"./src/screens/home/subject/component/rating/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:200,paddingHorizontal:o._.wind,marginTop:o._.lg},rate:{marginTop:-32},hide:{paddingHorizontal:o._.wind,marginTop:o._.lg,marginBottom:-o._.sm},hideScore:{height:o._.r(144)}}}))},"./src/screens/home/subject/component/recent/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Recent");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={navigation:{},subjectId:0,showRecent:!0,who:[],hideScore:!1,onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/recent/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=m(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/recent/recent.lazy.ts")),a=s("./src/screens/home/subject/component/recent/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(m=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showRecent[1]?(0,l.jsxs)(r.Suspense,{fallback:null,children:[(0,l.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_RECENT)}}),(0,l.jsx)(d.default,{navigation:u,showRecent:c.systemStore.setting.showRecent,subjectId:o.subjectId,who:o.filterRecent,hideScore:c.systemStore.setting.hideScore,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/recent/recent.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(3752).then(s.bind(s,"./src/screens/home/subject/component/recent/recent.tsx"))}))},"./src/screens/home/subject/component/relations/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Relations"),u=(t.COMPONENT_MAIN=(0,o.rc)(c),t.COVER_WIDTH=80);t.COVER_HEIGHT=1.4*u,t.DEFAULT_PROPS={navigation:{},showRelations:!0,subjectId:0,relations:[],typeCn:"",onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/relations/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=m(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/relations/relations.lazy.ts")),a=s("./src/screens/home/subject/component/relations/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(m=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showRelations[1]?(0,l.jsxs)(r.Suspense,{fallback:null,children:[(0,l.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_RELATIONS)}}),(0,l.jsx)(d.default,{navigation:u,showRelations:c.systemStore.setting.showRelations,subjectId:o.subjectId,relations:o.relations,typeCn:o.type,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/relations/relations.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(1224).then(s.bind(s,"./src/screens/home/subject/component/relations/relations.tsx"))}))},"./src/screens/home/subject/component/series/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),r=s("./src/utils/dev/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,r.rc)(n.COMPONENT,"Series"),u=(t.COMPONENT_MAIN=(0,r.rc)(c),t.COVER_WIDTH=o._.r(o._.device(28,40)));t.COVER_HEIGHT=1.4*u,t.DEFAULT_PROPS={navigation:{},styles:{},showRelation:!0,size:14,subjectId:0,subjectAfter:void 0,subjectAnime:void 0,subjectBook:void 0,subjectDiff:void 0,subjectPrev:void 0,subjectSeries:void 0}},"./src/screens/home/subject/component/series/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=l(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=o(s("./src/screens/home/subject/component/series/series.lazy.ts")),i=s("./src/screens/home/subject/component/series/ds.ts"),d=s("./src/screens/home/subject/component/series/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(l=function(e){return e?s:t})(e)}t.default=(0,c.obc)((function(e,t){var s=e.size,o=t.$,c=t.navigation;if(!o.hasSeries)return null;var i,l,m,p,j,f,b=0;return o.subjectPrev&&(i=o.subjectPrev,b+=1),o.subjectAfter&&(l=o.subjectAfter,b+=1),b<2&&o.subjectAnime&&(m=o.subjectAnime,b+=1),b<2&&o.subjectDiff&&(p=o.subjectDiff,b+=1),b<2&&o.subjectBook&&(f=o.subjectBook,b+=1),!b&&o.subjectSeries&&(j=o.subjectSeries),(0,a.jsx)(r.Suspense,{fallback:null,children:(0,a.jsx)(u.default,{navigation:c,styles:(0,d.memoStyles)(),showRelation:n.systemStore.setting.showRelation,size:s,subjectId:o.subjectId,subjectPrev:i,subjectAfter:l,subjectAnime:m,subjectDiff:p,subjectBook:f,subjectSeries:j})})}),i.COMPONENT)},"./src/screens/home/subject/component/series/series.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(7091).then(s.bind(s,"./src/screens/home/subject/component/series/series.tsx"))}))},"./src/screens/home/subject/component/series/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{relation:{paddingLeft:2,marginTop:o._.sm+4,marginBottom:o._.sm+4},series:{width:o._.r(180),paddingLeft:2,paddingRight:o._.sm,marginVertical:o._.sm+2,borderRadius:o._.radiusSm,overflow:"hidden"},icon:{marginRight:-o._.sm}}}))},"./src/screens/home/subject/component/smb/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),d=o(s("./src/screens/home/subject/component/icon/hidden.tsx")),a=o(s("./src/screens/home/subject/component/icon/smb.tsx")),l=s("./src/screens/home/subject/component/smb/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=t.$;if(i.WEB||i.IOS)return null;var o=c.smbStore.subject(s.subjectId);if(!o)return null;var u=c.systemStore.setting.showSMB;if(-1===u)return null;var p=(0,l.memoStyles)();return(0,m.jsxs)(r.default,{style:p.container,children:[(0,m.jsx)(n.SectionTitle,{right:u?(0,m.jsx)(a.default,{}):(0,m.jsx)(d.default,{name:"本地",value:"showSMB"}),icon:!u&&"md-navigate-next",onPress:function(){return s.onSwitchBlock("showSMB")},children:"本地"}),u&&(0,m.jsx)(n.FolderSMB,{smb:o.smb,folder:o.folder})]})}))},"./src/screens/home/subject/component/smb/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{paddingTop:o._.md,paddingHorizontal:o._.wind,marginTop:o._.md}}}))},"./src/screens/home/subject/component/staff/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Staff");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={navigation:{},showStaff:!0,subjectId:0,staff:[],onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/staff/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=m(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/staff/staff.lazy.ts")),a=s("./src/screens/home/subject/component/staff/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(m=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showStaff[1]?(0,l.jsxs)(r.Suspense,{fallback:null,children:[(0,l.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_STAFF)}}),(0,l.jsx)(d.default,{navigation:u,showStaff:c.systemStore.setting.showStaff,subjectId:o.subjectId,staff:o.staff,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/staff/staff.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(4761).then(s.bind(s,"./src/screens/home/subject/component/staff/staff.tsx"))}))},"./src/screens/home/subject/component/summary/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Summary");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={styles:{},showSummary:!0,translateResult:[],content:"",onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/summary/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/ds.ts"),i=o(s("./src/screens/home/subject/component/summary/summary.tsx")),d=s("./src/screens/home/subject/component/summary/ds.ts"),a=s("./src/screens/home/subject/component/summary/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=e.onBlockRef,o=t.$;return o.showSummary[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.default,{style:n._.container.layout,ref:function(e){return s(e,u.TITLE_SUMMARY)}}),(0,l.jsx)(i.default,{styles:(0,a.memoStyles)(),showSummary:n.systemStore.setting.showSummary,translateResult:o.state.translateResult.slice(),content:o.summary.replace(/\r\n\r\n/g,"\r\n"),onSwitchBlock:o.onSwitchBlock})]}):null}),d.COMPONENT)},"./src/screens/home/subject/component/summary/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:210,paddingHorizontal:o._.wind,marginTop:o._.sm},hide:{paddingHorizontal:o._.wind,marginTop:o._.sm,marginBottom:-o._.sm}}}))},"./src/screens/home/subject/component/summary/summary.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/ds.ts"),a=o(s("./src/screens/home/subject/component/icon/hidden.tsx")),l=o(s("./src/screens/home/subject/component/icon/translate.tsx")),m=s("./src/screens/home/subject/component/utils.ts"),p=s("./src/screens/home/subject/component/summary/ds.ts"),j=s("./node_modules/react/jsx-runtime.js"),f=(0,i.memo)((function(e){var t=e.styles,s=e.showSummary,o=e.translateResult,i=e.content,p=e.onSwitchBlock;return(0,j.jsxs)(r.default,{style:s?t.container:t.hide,children:[(0,j.jsx)(c.SectionTitle,{right:s?(0,j.jsx)(l.default,{content:i}):(0,j.jsx)(a.default,{name:d.TITLE_SUMMARY,value:"showSummary"}),icon:!s&&"md-navigate-next",onPress:function(){return p("showSummary")},children:d.TITLE_SUMMARY}),s&&(0,j.jsx)(r.default,{children:o.length?(0,j.jsx)(r.default,{children:(0,m.fixedTranslateResult)(o,i).map((function(e,t){return(0,j.jsxs)(r.default,{style:u._.mt.sm,children:[(0,j.jsx)(n.Text,{style:u._.mt.md,type:"sub",size:12,lineHeight:14,selectable:!0,children:e.src.trim()}),(0,j.jsx)(n.Text,{style:u._.mt.sm,size:15,lineHeight:17,bold:!0,selectable:!0,children:e.dst.trim()})]},t)}))}):!!i&&(0,j.jsx)(n.Expand,{ratio:.88,children:(0,j.jsx)(n.Text,{style:u._.mt.sm,size:15,lineHeight:22,selectable:!0,children:i})})})]})}),p.DEFAULT_PROPS,p.COMPONENT_MAIN,(function(e){return Object.assign({},e,{translateResult:e.translateResult.length})}));t.default=f},"./src/screens/home/subject/component/tags/block/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/tags/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Block")},"./src/screens/home/subject/component/tags/block/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),i=s("./src/screens/home/subject/component/tags/block/ds.ts"),d=s("./src/screens/home/subject/component/tags/block/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=e.path,o=e.tags,c=t.$,i=t.navigation;if(null==o||!o.length)return null;var l=(0,d.memoStyles)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Flex,{style:[l.item,l.disabled],children:(0,a.jsx)(n.Text,{size:13,type:"sub",children:"第三方标签"})}),o.map((function(e){var t="string"==typeof e?e:e.value;return"string"==typeof e||e.pressable?(0,a.jsx)(n.Touchable,{animate:!0,scale:.9,onPress:function(){(0,u.t)("条目.跳转",{to:s,from:"标签",subjectId:c.subjectId}),i.push(s,{_tags:[e]})},children:(0,a.jsx)(r.default,{style:l.item,children:(0,a.jsx)(n.Text,{size:13,bold:!0,children:t})})},t):(0,a.jsx)(r.default,{style:[l.item,l.disabled],children:(0,a.jsx)(n.Text,{size:13,bold:!0,children:t})},t)}))]})}),i.COMPONENT)},"./src/screens/home/subject/component/tags/block/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{item:{paddingVertical:o._.r(2),paddingHorizontal:o._.r(8),marginRight:o._.r(8),marginBottom:o._.r(8),backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderWidth:1,borderColor:o._.select(o._.colorBorder,o._._colorDarkModeLevel1),borderRadius:o._.radiusSm,overflow:"hidden"},disabled:{backgroundColor:"transparent",borderColor:"transparent"}}}))},"./src/screens/home/subject/component/tags/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Tags");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={show:!0,showTags:!0,showTyperank:!1,subjectTagsExpand:!0,rank:0,focusOrigin:!1,onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/tags/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/ds.ts"),i=o(s("./src/screens/home/subject/component/tags/tags.tsx")),d=s("./src/screens/home/subject/component/tags/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=e.onBlockRef,o=t.$;return o.showTags[1]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{style:n._.container.layout,ref:function(e){return s(e,u.TITLE_TAGS)}}),(0,a.jsx)(i.default,{show:n.systemStore.setting.showTags&&!!o.tags.length,showTags:n.systemStore.setting.showTags,showTyperank:!!o.rank&&n.systemStore.setting.subjectTagsRec,subjectTagsExpand:n.systemStore.setting.subjectTagsExpand,rank:o.rank,focusOrigin:n.systemStore.setting.focusOrigin,onSwitchBlock:o.onSwitchBlock})]}):null}),d.COMPONENT)},"./src/screens/home/subject/component/tags/rec-segment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DS=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/tags/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"RecSegement"),t.DS=["数量","排名"]},"./src/screens/home/subject/component/tags/rec-segment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),i=s("./src/screens/home/subject/component/tags/rec-segment/ds.ts"),d=s("./src/screens/home/subject/component/tags/rec-segment/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=t.$,o=n.systemStore.setting.subjectTagsRec?1:0;return(0,a.jsx)(r.SegmentedControl,{style:d.styles.segment,size:11,values:i.DS,selectedIndex:o,onValueChange:function(){(0,u.t)("条目.切换标签类型",{subjectId:s.subjectId}),n.systemStore.switchSetting("subjectTagsRec")}},String(o))}),i.COMPONENT)},"./src/screens/home/subject/component/tags/rec-segment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts");t.styles=o._.create({segment:{width:o._.r(88),height:o._.r(28),marginRight:o._.xs,marginLeft:o._.md}})},"./src/screens/home/subject/component/tags/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts");t.styles=o._.create({container:{minHeight:96},more:{paddingVertical:o._.md,paddingHorizontal:100,marginTop:-o._.sm,borderRadius:o._.radiusSm,overflow:"hidden"}})},"./src/screens/home/subject/component/tags/tags-list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EXPAND_NUM=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/tags/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"TagList"),t.EXPAND_NUM=12},"./src/screens/home/subject/component/tags/tags-list/index.tsx":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=O(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),i=s("./src/components/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),m=s("./src/utils/dev/index.ts"),p=s("./src/utils/fetch/index.ts"),j=s("./src/utils/hooks/index.ts"),f=s("./src/constants/index.ts"),b=s("./src/screens/home/subject/ds.ts"),h=r(s("./src/screens/home/subject/component/tags/block/index.tsx")),_=r(s("./src/screens/home/subject/component/tags/typerank/index.tsx")),y=s("./src/screens/home/subject/component/tags/utils.ts"),g=s("./src/screens/home/subject/component/tags/tags-list/ds.ts"),v=s("./src/screens/home/subject/component/tags/tags-list/styles.ts"),x=s("./node_modules/react/jsx-runtime.js");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(O=function(e){return e?s:t})(e)}t.default=(0,l.c)((function(e,t){var s=e.showTyperank,r=t.$,l=t.navigation;(0,m.r)(g.COMPONENT);var O=(0,u.useState)(!1),T=(0,c.default)(O,2),S=T[0],E=T[1],P=(0,u.useState)(!1),I=(0,c.default)(P,2),w=I[0],N=I[1];return(0,u.useEffect)((function(){if(s){var e=function(){return(e=(0,n.default)(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!1),e.next=3,(0,y.loadTyperankData)(r.subjectTypeValue);case 3:N(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)};!function(){e.apply(this,arguments)}()}}),[s]),(0,j.useObserver)((function(){var e=(0,v.memoStyles)();return(0,x.jsxs)(x.Fragment,{children:[r.tags.filter((function(e,t){return!!S||t<g.EXPAND_NUM})).map((function(t){var o,n,c=t.name,u=t.count,m=null==(o=r.collection)||null==(n=o.tag)||null==n.includes?void 0:n.includes(c);return(0,x.jsx)(i.Touchable,{animate:!0,scale:.9,onPress:function(){if(s&&(0,y.exist)(f.MODEL_SUBJECT_TYPE.getLabel(r.subjectType),c))return(0,p.t)("条目.跳转",{to:"Typerank",from:b.TITLE_TAGS,subjectId:r.subjectId}),void l.push("Typerank",{type:f.MODEL_SUBJECT_TYPE.getLabel(r.subjectType),tag:c,subjectId:r.subjectId});(0,p.t)("条目.跳转",{to:"Tag",from:b.TITLE_TAGS,subjectId:r.subjectId}),l.push("Tag",{type:f.MODEL_SUBJECT_TYPE.getLabel(r.subjectType),tag:c})},children:(0,x.jsxs)(i.Flex,{style:(0,a.stl)(e.item,m&&e.selected),children:[(0,x.jsx)(i.Text,{type:d._.select("desc",m?"main":"desc"),size:13,bold:!0,children:c}),s?w&&(0,x.jsx)(_.default,{tag:c}):(0,x.jsxs)(i.Text,{type:d._.select("sub",m?"main":"sub"),size:12,lineHeight:13,bold:!0,children:[" ",u]})]})},c)})),r.state.rendered&&(0,x.jsxs)(x.Fragment,{children:[!S&&r.tags.length>g.EXPAND_NUM&&(0,x.jsx)(i.Touchable,{animate:!0,scale:.9,onPress:function(){E(!0)},children:(0,x.jsx)(i.Flex,{style:e.item,children:(0,x.jsx)(i.Iconfont,{name:"md-more-horiz",size:16,color:d._.colorSub})})}),(0,x.jsx)(h.default,{path:"Anime",tags:r.animeTags}),(0,x.jsx)(h.default,{path:"Game",tags:r.gameTags}),(0,x.jsx)(h.default,{path:"Manga",tags:r.mangaTags}),(0,x.jsx)(h.default,{path:"Wenku",tags:r.wenkuTags})]})]})}))}))},"./src/screens/home/subject/component/tags/tags-list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{item:{paddingVertical:o._.r(2),paddingHorizontal:o._.r(8),marginRight:o._.r(8),marginBottom:o._.r(8),backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderWidth:1,borderColor:o._.select(o._.colorBorder,o._._colorDarkModeLevel1),borderRadius:o._.radiusSm,overflow:"hidden"},selected:{backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel1),borderColor:o._.select(o._.colorPrimaryBorder,o._._colorDarkModeLevel1)}}}))},"./src/screens/home/subject/component/tags/tags.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/subject/ds.ts"),l=o(s("./src/screens/home/subject/component/icon/game.tsx")),m=o(s("./src/screens/home/subject/component/icon/hidden.tsx")),p=o(s("./src/screens/home/subject/component/tags/rec-segment/index.tsx")),j=o(s("./src/screens/home/subject/component/tags/tags-list/index.tsx")),f=s("./src/screens/home/subject/component/tags/ds.ts"),b=s("./src/screens/home/subject/component/tags/styles.ts"),h=s("./node_modules/react/jsx-runtime.js"),_=(0,d.memo)((function(e){var t=e.show,s=e.showTags,o=e.showTyperank,d=e.subjectTagsExpand,f=e.rank,_=e.focusOrigin,y=e.onSwitchBlock;return(0,h.jsxs)(r.default,{style:(0,i.stl)(u._.mt.lg,s?b.styles.container:u._.short,!t&&u._.mb.md),children:[(0,h.jsx)(c.SectionTitle,{style:u._.container.wind,right:s?(0,h.jsxs)(h.Fragment,{children:[!_&&(0,h.jsx)(l.default,{}),!!f&&(0,h.jsx)(p.default,{})]}):(0,h.jsx)(m.default,{name:a.TITLE_TAGS,value:"showTags"}),icon:!s&&"md-navigate-next",onPress:function(){return y("showTags")},children:a.TITLE_TAGS}),t&&(0,h.jsx)(h.Fragment,{children:d?(0,h.jsxs)(r.default,{style:[u._.container.windMtSm,{minHeight:64}],children:[(0,h.jsx)(n.Flex,{wrap:"wrap",align:"start",children:(0,h.jsx)(j.default,{showTyperank:o})}),(0,h.jsx)(n.Heatmap,{id:"条目.跳转",from:a.TITLE_TAGS})]}):(0,h.jsx)(n.ScrollView,{style:u._.mt.md,contentContainerStyle:u._.container.wind,horizontal:!0,children:(0,h.jsx)(j.default,{showTyperank:o})})}),t&&(0,h.jsx)(r.default,{style:b.styles.more,children:(0,h.jsx)(n.Touchable,{onPress:function(){return u.systemStore.switchSetting("subjectTagsExpand")},children:(0,h.jsx)(n.Flex,{justify:"center",children:(0,h.jsx)(n.Iconfont,{name:d?"md-keyboard-arrow-up":"md-keyboard-arrow-down",size:u._.device(24,32)})})})}),(0,h.jsx)(c.PreventTouchPlaceholder,{})]})}),f.DEFAULT_PROPS,f.COMPONENT_MAIN);t.default=_},"./src/screens/home/subject/component/tags/typerank/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/tags/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Typerank")},"./src/screens/home/subject/component/tags/typerank/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/screens/home/subject/component/tags/utils.ts"),i=s("./src/screens/home/subject/component/tags/typerank/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s,o,c=e.tag,i=t.$;return s=(0,u.exist)(i.subjectTypeValue,c)?"优于"+(o=(0,u.calc)(i.subjectTypeValue,c,i.rank||9999))+"%":"--",(0,d.jsx)(r.Text,{style:n._.ml.xs,type:o>=90?"main":"sub",size:12,lineHeight:13,bold:!0,children:s})}),i.COMPONENT)},"./src/screens/home/subject/component/tags/utils.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.calc=function(e,t,s){var o,r=e+"|"+t+"|"+s;if(u.has(r))return u.get(r);"anime"===e?o=(0,c.getJSON)("typerank/anime"):"book"===e?o=(0,c.getJSON)("typerank/book"):"game"===e?o=(0,c.getJSON)("typerank/game"):"music"===e?o=(0,c.getJSON)("typerank/music"):"real"===e&&(o=(0,c.getJSON)("typerank/real"));var n=o[t];if(s<=o[t][0])return 99;for(var i=0,d=0;d<n.length&&!(s<n[d]);d+=1)i+=1;var a=Math.max(Math.min(Math.floor(100*(1-i/n.length)),99),1);return u.set(t,a),a},t.exist=function(e,t){if(!e||!t)return!1;var s;"anime"===e?s=(0,c.getJSON)("typerank/anime"):"book"===e?s=(0,c.getJSON)("typerank/book"):"game"===e?s=(0,c.getJSON)("typerank/game"):"music"===e?s=(0,c.getJSON)("typerank/music"):"real"===e&&(s=(0,c.getJSON)("typerank/real"));return!!s&&!!s[t]},t.loadTyperankData=function(e){return i.apply(this,arguments)};var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=s("./src/assets/json/index.web.ts"),u=new Map;function i(){return(i=(0,n.default)(o.mark((function e(t){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.loadJSON)("typerank/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"./src/screens/home/subject/component/thumbs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=t.IMAGE_HEIGHT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts"),n=(t.COMPONENT=(0,o.rc)(r.COMPONENT,"Thumbs"),t.IMAGE_HEIGHT=144);t.THUMB_WIDTH=Math.floor(n/.56),t.THUMB_HEIGHT=n},"./src/screens/home/subject/component/thumbs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(s("react")),m=o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),p=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),j=s("./src/components/index.ts"),f=s("./src/screens/_/index.ts"),b=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),_=s("./src/utils/decorators/index.ts"),y=s("./src/utils/dev/index.ts"),g=s("./src/constants/index.ts"),v=s("./src/screens/home/subject/ds.ts"),x=o(s("./src/screens/home/subject/component/icon/hidden.tsx")),O=o(s("./src/screens/home/subject/component/icon/preview.tsx")),T=o(s("./src/screens/home/subject/component/thumbs/preview/index.tsx")),S=o(s("./src/screens/home/subject/component/thumbs/video/index.tsx")),E=s("./src/screens/home/subject/component/thumbs/ds.ts"),P=s("./src/screens/home/subject/component/thumbs/styles.ts"),I=s("./node_modules/react/jsx-runtime.js");function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,i.default)(this,s)}}var N=function(e){(0,u.default)(s,e);var t=w(s);function s(){var e;(0,r.default)(this,s);for(var o=arguments.length,n=new Array(o),u=0;u<o;u++)n[u]=arguments[u];return e=t.call.apply(t,[this].concat(n)),(0,a.default)((0,c.default)(e),"state",{scrolled:!1}),(0,a.default)((0,c.default)(e),"onScroll",(function(){e.state.scrolled||e.setState({scrolled:!0})})),e}return(0,n.default)(s,[{key:"data",get:function(){var e=this.context.$.state.epsThumbs;if(this.state.scrolled)return e.slice();return e.filter((function(e,t){return t<5}))}},{key:"videos",get:function(){return this.context.$.state.videos.slice()}},{key:"title",get:function(){var e=this.context.$;return"音乐"===e.type?"MV":"三次元"===e.type?"剧照":"预览"}},{key:"reference",get:function(){var e,t,s=this.context.$.state.epsThumbsHeader;return null!=s&&null!=(e=s.Referer)&&null!=e.includes&&e.includes("douban.com")?"douban.com":null!=s&&null!=(t=s.Referer)&&null!=t.includes&&t.includes("bilibili.com")?"bilibili.com":""}},{key:"thumbs",get:function(){var e=this.context.$.state,t=e.epsThumbs,s=e.epsThumbsHeader;return t.map((function(e){var t;return{url:String(null==(t=e.split("@"))?void 0:t[0]).replace("img1.doubanio.com","img2.doubanio.com"),headers:Object.assign({},s)}}))}},{key:"renderRight",value:function(){if(!b.systemStore.setting.showThumbs)return(0,I.jsx)(x.default,{name:this.title,value:"showThumbs"});if("douban.com"!==this.reference)return null;var e=this.context.$;return(0,I.jsx)(O.default,{data:e.state.epsThumbs,headers:e.state.epsThumbsHeader})}},{key:"render",value:function(){var e=this;(0,y.r)(E.COMPONENT);var t=this.context.$;if(!t.showThumbs[1])return null;var s=b.systemStore.setting.showThumbs,o=t.state.epsThumbsHeader,r=this.props.onBlockRef,n=this.state.scrolled;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(p.default,{style:b._.container.layout,ref:function(e){return r(e,v.TITLE_THUMBS)}}),(0,I.jsxs)(f.InView,{style:(0,h.stl)(P.styles.container,!s&&b._.short),children:[(0,I.jsx)(f.SectionTitle,{style:b._.container.wind,right:this.renderRight(),icon:!s&&"md-navigate-next",onPress:function(){return t.onSwitchBlock("showThumbs")},children:this.title}),s&&(0,I.jsxs)(m.default,Object.assign({style:b._.mt.md,contentContainerStyle:b._.container.wind,horizontal:!0},g.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:16,onScroll:n?void 0:this.onScroll,children:[this.videos.map((function(e){return(0,I.jsx)(S.default,{item:e,epsThumbsHeader:o,showTitle:"音乐"===t.type},e.cover)})),this.data.filter((function(e,t){return t<=12})).map((function(t,s){return(0,I.jsx)(T.default,{item:t,index:s,thumbs:e.thumbs,epsThumbsHeader:o},t)}))]})),s&&!!this.reference&&(0,I.jsxs)(j.Flex,{style:[b._.container.wind,b._.mt.md],justify:"end",children:[(0,I.jsxs)(j.Text,{size:10,type:"icon",align:"right",onPress:function(){return(0,h.open)(o.Referer)},children:["数据来源自 ",this.reference]}),(0,I.jsx)(j.Iconfont,{style:b._.ml.xs,name:"md-open-in-new",size:10,color:b._.colorIcon})]}),(0,I.jsx)(f.PreventTouchPlaceholder,{}),(0,I.jsx)(j.Heatmap,{id:"条目.预览"})]})]})}}]),s}(l.default.Component);t.default=(0,_.obc)(N)},"./src/screens/home/subject/component/thumbs/preview/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/thumbs/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Preview")},"./src/screens/home/subject/component/thumbs/preview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/utils/fetch/index.ts"),d=s("./src/constants/index.ts"),a=s("./src/screens/home/subject/component/thumbs/ds.ts"),l=s("./src/screens/home/subject/component/thumbs/preview/ds.ts"),m=s("./src/screens/home/subject/component/thumbs/preview/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=e.item,o=e.index,u=e.thumbs,l=e.epsThumbsHeader,j=t.$;return n.systemStore.setting.showCharacter?(0,p.jsx)(r.Touchable,{style:(0,c.stl)(m.styles.image,!o&&m.styles.side),animate:!0,withoutFeedback:!0,onPress:function(){(0,i.t)("条目.预览",{subjectId:j.subjectId}),(0,c.showImageViewer)(u.filter((function(e,t){return t<12})),o)},children:(0,p.jsx)(r.Image,{src:s.replace("img1.doubanio.com","img2.doubanio.com"),autoHeight:a.IMAGE_HEIGHT,headers:l,radius:n._.radiusSm,errorToHide:!d.WEB},s)}):null}),l.COMPONENT)},"./src/screens/home/subject/component/thumbs/preview/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts"),r=s("./src/screens/home/subject/component/thumbs/ds.ts");t.styles=o._.create({image:{height:r.IMAGE_HEIGHT,marginLeft:o._.sm+2,borderRadius:o._.radiusMd,overflow:"hidden"},side:{marginLeft:0}})},"./src/screens/home/subject/component/thumbs/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts");t.styles=o._.create({container:{minHeight:210,marginTop:o._.lg}})},"./src/screens/home/subject/component/thumbs/video/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/thumbs/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Video")},"./src/screens/home/subject/component/thumbs/video/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/component/thumbs/ds.ts"),a=s("./src/screens/home/subject/component/thumbs/video/ds.ts"),l=s("./src/screens/home/subject/component/thumbs/video/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ob)((function(e){var t=e.item,s=e.epsThumbsHeader,o=e.showTitle;return c.systemStore.setting.showCharacter?(0,m.jsx)(r.default,{style:l.styles.video,children:(0,m.jsxs)(n.Touchable,{animate:!0,withoutFeedback:!0,onPress:function(){return(0,u.open)(t.src||t.href)},children:[(0,m.jsx)(n.Image,{src:t.cover,size:d.THUMB_WIDTH,height:d.THUMB_HEIGHT,headers:s,radius:c._.radiusSm}),(0,m.jsx)(r.default,{style:l.styles.play,children:(0,m.jsx)(r.default,{style:l.styles.touch,children:(0,m.jsx)(n.Flex,{style:l.styles.touch,justify:"center",children:(0,m.jsx)(n.Text,{style:l.styles.icon,type:"__plain__",children:"▶"})})})}),o&&!!t.title&&(0,m.jsx)(n.Text,{style:l.styles.title,size:11,bold:!0,numberOfLines:3,align:"center",children:t.title})]})}):null}),a.COMPONENT)},"./src/screens/home/subject/component/thumbs/video/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts"),r=s("./src/screens/home/subject/component/thumbs/ds.ts");t.styles=o._.create({video:{width:r.THUMB_WIDTH,marginRight:o._.sm+2},play:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0},touch:{height:r.IMAGE_HEIGHT,opacity:.92},icon:{fontSize:40,lineHeight:o._.ios(52,56)},title:{padding:o._.sm,opacity:.8}})},"./src/screens/home/subject/component/topic/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/subject/component/ds.ts"),c=t.COMPONENT=(0,o.rc)(n.COMPONENT,"Topic");t.COMPONENT_MAIN=(0,o.rc)(c),t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,showTopic:!0,topic:[],onSwitchBlock:r.FROZEN_FN}},"./src/screens/home/subject/component/topic/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=p(t);if(s&&s.has(e))return s.get(e);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=r?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(o,n,c):o[n]=e[n]}return o.default=e,s&&s.set(e,o),o}(s("react")),n=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/stores/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/topic/topic.lazy.ts")),a=s("./src/screens/home/subject/component/topic/ds.ts"),l=s("./src/screens/home/subject/component/topic/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(p=function(e){return e?s:t})(e)}t.default=(0,u.obc)((function(e,t){var s=e.onBlockRef,o=t.$,u=t.navigation;return o.showTopic[1]?(0,m.jsxs)(r.Suspense,{fallback:null,children:[(0,m.jsx)(n.default,{style:c._.container.layout,ref:function(e){return s(e,i.TITLE_TOPIC)}}),(0,m.jsx)(d.default,{navigation:u,styles:(0,l.memoStyles)(),showTopic:c.systemStore.setting.showTopic,subjectId:o.subjectId,topic:o.filterTopic,onSwitchBlock:o.onSwitchBlock})]}):null}),a.COMPONENT)},"./src/screens/home/subject/component/topic/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles((function(){return{container:{minHeight:120,marginTop:o._.lg},item:{paddingLeft:o._.wind}}}))},"./src/screens/home/subject/component/topic/topic.lazy.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s("react");t.default=(0,o.lazy)((function(){return s.e(5828).then(s.bind(s,"./src/screens/home/subject/component/topic/topic.tsx"))}))},"./src/screens/home/subject/component/track-comment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.POPOVER_DATA=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"TrackComment"),t.POPOVER_DATA={动画:["取消动画特别关注"],书籍:["取消书籍特别关注"],游戏:["取消游戏特别关注"],音乐:["取消音乐特别关注"],三次元:["取消三次元评别关注"]}},"./src/screens/home/subject/component/track-comment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=s("./src/screens/home/subject/component/track-comment/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=t.$,o=t.navigation;if(!s.subjectTypeValue)return null;var i=c.systemStore.setting["comment"+(0,u.titleCase)(s.subjectTypeValue)];if(null==i||!i.length)return null;var m=i.filter((function(e){var t=c.collectionStore.usersSubjectCollection(e,s.subjectId);return!!(t._loaded&&t.update_at&&t.type)}));if(!m.length)return null;var p={id:"条目.跳转",data:{from:"特别关注",subjectId:s.subjectId}};return(0,l.jsxs)(n.InView,{style:c._.mt.sm,children:[m.map((function(e){var t=c.collectionStore.usersSubjectCollection(e,s.subjectId),r=c.usersStore.usersInfo(e),i=String(d.MODEL_COLLECTION_STATUS.getLabel(t.type)||"").replace("看",s.action);return(0,l.jsx)(n.ItemComment,{navigation:o,event:p,time:(0,u.lastDate)((0,u.getTimestamp)(t.update_at)),avatar:r.avatar,userId:e,userName:r.userName,star:c.systemStore.setting.hideScore?void 0:t.rate,status:i,comment:String(t.comment).replace(/[\r\n]/g,""),popoverData:a.POPOVER_DATA[s.type],like:!0,onSelect:s.onCancelTrackUsersCollection},e)})),(0,l.jsx)(r.Divider,{})]})}),a.COMPONENT)},"./src/screens/home/subject/component/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.starts-with.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.fixedTranslateResult=function(e,t){var s;if(((null==e?void 0:e.length)||0)<=1)return e;var o=(null==(s=e[e.length-1])?void 0:s.src)||"";if(o&&t&&t.startsWith(o))return e.slice().reverse();return e}},"./src/screens/home/subject/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TITLE_TOPIC=t.TITLE_THUMBS=t.TITLE_TAGS=t.TITLE_SUMMARY=t.TITLE_STAFF=t.TITLE_RELATIONS=t.TITLE_RECENT=t.TITLE_RATING=t.TITLE_LIKE=t.TITLE_INFO=t.TITLE_HEAD=t.TITLE_GAME=t.TITLE_EP=t.TITLE_DISC=t.TITLE_COMMENT=t.TITLE_COMIC=t.TITLE_CHARACTER=t.TITLE_CATALOG=t.TITLE_BOX=t.TITLE_BLOG=t.TITLE_ANITABI=t.TEXT_LIKES=t.TEXT_IGNORE_USER=t.TEXT_COPY_COMMENT=t.TEXT_BLOCK_USER=t.COMPONENT=void 0;t.COMPONENT="Subject",t.TITLE_HEAD="头部",t.TITLE_BOX="收藏",t.TITLE_EP="章节",t.TITLE_DISC="曲目列表",t.TITLE_TAGS="标签",t.TITLE_SUMMARY="简介",t.TITLE_INFO="详情",t.TITLE_RATING="评分",t.TITLE_CHARACTER="角色",t.TITLE_STAFF="制作人员",t.TITLE_THUMBS="预览",t.TITLE_ANITABI="取景地标",t.TITLE_GAME="游戏",t.TITLE_COMIC="单行本",t.TITLE_BLOG="日志",t.TITLE_TOPIC="帖子",t.TITLE_CATALOG="目录",t.TITLE_RELATIONS="关联",t.TITLE_LIKE="猜你喜欢",t.TITLE_RECENT="动态",t.TITLE_COMMENT="吐槽",t.TEXT_LIKES="贴贴",t.TEXT_COPY_COMMENT="复制评论",t.TEXT_BLOCK_USER="屏蔽用户",t.TEXT_IGNORE_USER="绝交"},"./src/screens/home/subject/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Header")},"./src/screens/home/subject/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/component/header-title/index.tsx")),u=o(s("./src/screens/home/subject/header/menu/index.tsx")),i=o(s("./src/screens/home/subject/header/pop-to-top/index.tsx")),d=s("./src/screens/home/subject/header/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=e.onScrollTo,o=t.$;return(0,a.jsx)(r.Header,{mode:"transition",statusBarEventsType:"Subject",fixed:o.state.fixed,title:"条目",domTitle:o.jp||o.cn,hm:[o.url,"Subject"],headerLeft:(0,a.jsx)(i.default,{}),headerTitle:(0,a.jsx)(c.default,{$:o}),headerRight:function(){return(0,a.jsx)(u.default,{onScrollTo:s})}})}),d.COMPONENT)},"./src/screens/home/subject/header/menu/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_WEB_SHARE=t.TEXT_SHARE=t.TEXT_SETTING=t.TEXT_POST_SHARE=t.TEXT_LAYOUT=t.TEXT_COPY=t.TEXT_APP=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/subject/header/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Header"),t.TEXT_COPY="复制链接",t.TEXT_SHARE="复制分享",t.TEXT_POST_SHARE="拼图分享",t.TEXT_WEB_SHARE="APP 网页版分享",t.TEXT_LAYOUT="重置布局",t.TEXT_APP="获取 APP",t.TEXT_SETTING="设置"},"./src/screens/home/subject/header/menu/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),u=s("./src/utils/decorators/index.ts"),i=s("./src/utils/fetch/index.ts"),d=s("./src/constants/index.ts"),a=s("./src/screens/home/subject/header/menu/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,u.obc)((function(e,t){var s=e.onScrollTo,o=t.$,u=t.navigation,m=n._.isDark||!o.state.fixed?"#fff":"#000",p=["浏览器打开 · "+o.subjectId,a.TEXT_COPY,a.TEXT_SHARE,a.TEXT_POST_SHARE,a.TEXT_WEB_SHARE,a.TEXT_LAYOUT,a.TEXT_SETTING];return d.WEB&&p.push(a.TEXT_APP),(0,l.jsxs)(r.Flex,{children:[(0,l.jsx)(r.Header.Popover,{style:n._.mr.xs,data:o.locationDS,name:"md-menu-open",color:m,onSelect:function(e){s(e)}},String(o.locationDS.length)),(0,l.jsx)(r.Header.Popover,{data:p,color:m,onSelect:function(e){switch((0,i.t)("条目.右上角菜单",{subjectId:o.subjectId,key:e}),e){case a.TEXT_COPY:(0,c.copy)(o.url,"已复制链接");break;case a.TEXT_SHARE:(0,c.copy)("【链接】"+(0,c.cnjp)(o.cn,o.jp)+" | Bangumi番组计划\n"+o.url,"已复制分享文案");break;case a.TEXT_POST_SHARE:o.onPostShare(u);break;case a.TEXT_WEB_SHARE:o.onWebShare();break;case a.TEXT_LAYOUT:n.systemStore.resetSubjectLayout(),(0,c.info)("已重置");break;case a.TEXT_SETTING:u.push("Setting",{open:"Subject"});break;case a.TEXT_APP:(0,c.open)(d.URL_ABOUT);break;default:(0,c.open)(o.url)}},children:(0,l.jsx)(r.Heatmap,{id:"条目.右上角菜单"})})]})}))},"./src/screens/home/subject/header/pop-to-top/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/screens/_/index.ts"),n=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=t.$,o=t.navigation;if(!u.WEB)try{if(o.getState().index<4||s.state.fixed)return null}catch(e){return null}return(0,i.jsx)(r.IconTouchable,{name:"icon-home",size:19,color:n._.__colorPlain__,onPress:function(){o.popToTop()}})}))},"./src/screens/home/subject/hooks.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.useSubjectPage=function(e){var t=e.$,s=(0,m.useIsFocusedRef)();(0,m.useRunAfter)((0,n.default)(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.postTask)((function(){s.current&&t.setRendered()}),480),e.next=3,t.init();case 3:(0,l.t)("条目.查看",{subjectId:t.subjectId,type:t.type});case 4:case"end":return e.stop()}}),e)})))),(0,m.useFocusEffect)((function(){t.updateStatusBar()})),(0,m.useMount)((function(){return function(){t.setState({mounted:!1}),(0,d.postTask)((function(){t.setState({fixed:!1}),t.unRendered()}),400)}}));var r=(0,c.useRef)(null),f=(0,c.useRef)({});return{forwardRef:(0,c.useCallback)((function(e){r.current=e}),[]),onBlockRef:(0,c.useCallback)((function(e,t){(0,d.postTask)((function(){f.current[t]=e}),1e3)}),[]),onScrollIntoViewIfNeeded:(0,c.useCallback)((function(e){try{var s;"function"==typeof(null==r||null==(s=r.current)?void 0:s.scrollToOffset)&&r.current.scrollToOffset({animated:!0,offset:e+t.onScrollY})}catch(e){}}),[]),onScrollTo:(0,c.useCallback)((function(e){try{var s=e.split("(")[0].trim();if(r.current&&f.current[s]){if(p.IOS||p.WEB)return void f.current[j.TITLE_HEAD].measure((function(o,n,c,u){f.current[s].measure((function(s,o){p.WEB?(0,a.scrollToTop)(o+u+116):r.current.scrollToOffset({offset:o+u-i._.headerHeight,animated:!0}),(0,d.feedback)(),(0,l.t)("条目.跳转位置",{subjectId:t.subjectId,component:e})}))}));f.current[s].measureLayout((0,u.default)(r.current),(function(s,o){r.current.scrollToOffset({offset:o-i._.headerHeight,animated:!0}),(0,d.feedback)(),(0,l.t)("条目.跳转位置",{subjectId:t.subjectId,component:e})}))}}catch(e){}}),[])}};var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=s("react"),u=r(s("./node_modules/react-native-web/dist/exports/findNodeHandle/index.js")),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),a=s("./src/utils/dom/index.ts"),l=s("./src/utils/fetch/index.ts"),m=s("./src/utils/hooks/index.ts"),p=s("./src/constants/index.ts"),j=s("./src/screens/home/subject/ds.ts")},"./src/screens/home/subject/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),c=s("./src/utils/decorators/index.ts"),u=s("./src/utils/hooks/index.ts"),i=s("./src/constants/index.ts"),d=o(s("./src/screens/home/subject/component/bg/index.tsx")),a=o(s("./src/screens/home/subject/component/extra/index.tsx")),l=o(s("./src/screens/home/subject/component/list/index.tsx")),m=o(s("./src/screens/home/subject/header/index.tsx")),p=s("./src/screens/home/subject/hooks.ts"),j=o(s("./src/screens/home/subject/store/index.ts")),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.ic)(j.default,(function(e,t){var s=(0,p.useSubjectPage)(t),o=s.forwardRef,c=s.onBlockRef,j=s.onScrollIntoViewIfNeeded,b=s.onScrollTo;return(0,u.useObserver)((function(){return(0,f.jsxs)(r.Component,{id:"screen-subject",children:[(0,f.jsx)(n.TapListener,{children:(0,f.jsxs)(r.Page,{statusBarEvent:!1,children:[i.IOS&&(0,f.jsx)(d.default,{}),(0,f.jsx)(l.default,{forwardRef:o,onScrollIntoViewIfNeeded:j,onBlockRef:c})]})}),(0,f.jsx)(m.default,{onScrollTo:b}),(0,f.jsx)(a.default,{})]})}))}))},"./src/screens/home/subject/store/action.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),u=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/components/index.ts"),j=s("./src/components/cover/utils.ts"),f=s("./src/components/header/utils.tsx"),b=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),_=s("./src/utils/fetch/index.ts"),y=s("./src/utils/kv/index.ts"),g=r(s("./src/utils/thirdParty/axios.js")),v=s("./src/utils/thirdParty/open-cc/index.web.ts"),x=s("./src/utils/webhooks/index.ts"),O=s("./src/constants/index.ts"),T=r(s("./src/constants/i18n/index.ts")),S=s("./src/screens/home/subject/ds.ts"),E=s("./src/screens/user/origin-setting/utils.ts"),P=r(s("./src/screens/home/subject/store/fetch.ts")),I=s("./src/screens/home/subject/store/ds.ts");function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,a.default)(this,s)}}t.default=function(e){(0,d.default)(s,e);var t=w(s);function s(){var e,r,c,d,a,l,P,w,N,M,k;(0,u.default)(this,s);for(var C=arguments.length,R=new Array(C),A=0;A<C;A++)R[A]=arguments[A];return e=t.call.apply(t,[this].concat(R)),(0,m.default)((0,i.default)(e),"updateStatusBarTimeoutId",null),(0,m.default)((0,i.default)(e),"updateStatusBar",(function(){e.updateStatusBarTimeoutId||(e.updateStatusBarTimeoutId=setTimeout((function(){p.StatusBar.setBarStyle(b._.isDark?"light-content":e.state.fixed?"dark-content":"light-content"),e.updateStatusBarTimeoutId=null}),80))})),(0,m.default)((0,i.default)(e),"showManageModel",(function(){(0,_.t)("条目.显示收藏管理",{subjectId:e.subjectId}),e.setState({visible:!0})})),(0,m.default)((0,i.default)(e),"closeManageModal",(function(){e.setState({visible:!1})})),(0,m.default)((0,i.default)(e),"toggleReverseEps",(function(){(0,_.t)("条目.章节倒序",{subjectId:e.subjectId});var t=e.state.epsReverse;e.setState({epsReverse:!t}),e.save()})),(0,m.default)((0,i.default)(e),"toggleReverseComments",(function(){(0,_.t)("条目.吐槽倒序",{subjectId:e.subjectId});var t=e.subjectComments._reverse;e.fetchSubjectComments(!0,!t)})),(0,m.default)((0,i.default)(e),"changeText",(function(t,s){(0,_.t)("条目.书籍章节输入框改变",{subjectId:e.subjectId});try{e.setState((0,m.default)({},t,String(s)))}catch(e){console.error(I.NAMESPACE,"changeText",e)}})),(0,m.default)((0,i.default)(e),"onlinePlaySelected",(r=(0,n.default)(o.mark((function t(s){var r,n,c,u,i,d,a,l;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(0,_.t)("条目.搜索源",{type:s,subjectId:e.subjectId,subjectType:e.type}),"AGE动漫"===s&&((n=e.params._aid)?r=(0,O.SITE_AGEFANS)()+"/detail/"+n:null!=(c=b.otaStore.anime(e.subjectId))&&c.ageId&&(r=(0,O.SITE_AGEFANS)()+"/detail/"+c.ageId)),r){t.next=11;break}if(u=e.onlineOrigins.find((function(e){return e.name===s})),!u){t.next=11;break}if("萌番组"!==s||!u.id){t.next=10;break}return(0,h.copy)(e.cn||e.jp),(0,h.postTask)((function(){(0,h.open)(u.url)}),1600),t.abrupt("return");case 10:r=(0,E.replaceOriginUrl)(u.url,{CN:e.cn||e.jp,JP:e.jp||e.cn,ID:e.subjectId});case 11:if(r){t.next=28;break}i=e.state.bangumiInfo,d=i.sites,a=void 0===d?[]:d,t.t0=s,t.next="AGE动漫"===t.t0?17:"Anime1"===t.t0?19:"奇奇动漫"===t.t0?21:"Hanime1"===t.t0?23:25;break;case 17:return r=(0,O.SITE_AGEFANS)()+"/search?query="+encodeURIComponent(e.cn||e.jp)+"&page=1",t.abrupt("break",28);case 19:return r="https://anime1.me/?s="+encodeURIComponent((0,v.s2t)(e.cn||e.jp)),t.abrupt("break",28);case 21:return r="https://www.qiqidongman.com/vod-search-wd-"+encodeURIComponent(e.cn||e.jp)+".html",t.abrupt("break",28);case 23:return r="https://hanime1.me/search?query="+encodeURIComponent(e.jp||e.cn),t.abrupt("break",28);case 25:return l=a.find((function(e){return e.site===s})),l&&(r=(0,h.getBangumiUrl)(l)),t.abrupt("break",28);case 28:e.open(r),t.next=34;break;case 31:t.prev=31,t.t1=t.catch(0),console.error(I.NAMESPACE,"onlinePlaySelected",t.t1);case 34:case"end":return t.stop()}}),t,null,[[0,31]])}))),function(e){return r.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"open",(function(e){if(e){var t=b.systemStore.setting.openInfo;t&&(0,h.copy)(e,"已复制地址，即将跳转"),(0,h.postTask)((function(){(0,h.open)(e)}),t?O.WEB?400:1600:0)}})),(0,m.default)((0,i.default)(e),"onlineComicSelected",(function(t){try{var s;(0,_.t)("条目.搜索源",{type:t,subjectId:e.subjectId,subjectType:e.type});var o=e.onlineComicOrigins.find((function(e){return e.name===t}));o&&(s=(0,E.replaceOriginUrl)(o.url,{CN:e.cn||e.jp,JP:e.jp||e.cn,ID:e.subjectId})),e.open(s)}catch(e){console.error(I.NAMESPACE,"onlineComicSelected",e)}})),(0,m.default)((0,i.default)(e),"onlineDiscSelected",(function(t){try{var s;(0,_.t)("条目.搜索源",{type:t,subjectId:e.subjectId,subjectType:e.type});var o=e.onlineDiscOrigins.find((function(e){return e.name===t}));o&&(s=(0,E.replaceOriginUrl)(o.url,{CN:e.cn||e.jp,JP:e.jp||e.cn,ID:e.subjectId})),e.open(s)}catch(e){console.error(I.NAMESPACE,"onlineDiscSelected",e)}})),(0,m.default)((0,i.default)(e),"onlineGameSelected",(function(t){try{var s;(0,_.t)("条目.搜索源",{type:t,subjectId:e.subjectId,subjectType:e.type});var o=e.onlineGameOrigins.find((function(e){return e.name===t}));o&&(s=(0,E.replaceOriginUrl)(o.url,{CN:e.cn||e.jp,JP:e.jp||e.cn,ID:e.subjectId})),e.open(s)}catch(e){console.error(I.NAMESPACE,"onlineGameSelected",e)}})),(0,m.default)((0,i.default)(e),"toManhuadb",(function(){var t=(e.source||{}).mangaId;(0,_.t)("条目.阅读漫画",{subjectId:e.subjectId,mid:t});var s=(0,O.SITE_MANHUADB)()+"/manhua/"+t;e.open(s)})),(0,m.default)((0,i.default)(e),"toWenku8",(function(){var t=(e.source||{}).wenkuId;(0,_.t)("条目.阅读轻小说",{subjectId:e.subjectId,wid:t});var s=(0,O.SITE_WK8)()+"/novel/"+Math.floor(t/1e3)+"/"+t+"/index.htm";e.open(s)})),(0,m.default)((0,i.default)(e),"toPSNINE",(function(){(0,_.t)("条目.查看奖杯",{subjectId:e.subjectId}),(0,h.open)("https://psnine.com/psngame?title="+encodeURIComponent(e.cn||e.jp))})),(0,m.default)((0,i.default)(e),"updateFilterEps",(function(t){var s=parseInt(t.match(/\d+/g)[0]);1===s&&(s=0),(0,_.t)("条目.设置章节筛选",{subjectId:e.subjectId,filterEps:s}),e.setState({filterEps:s}),e.save()})),(0,m.default)((0,i.default)(e),"filterScores",(function(t){(0,_.t)("条目.筛选分数",{subjectId:e.subjectId,label:t}),e.setState({filterScores:"全部"===t?[]:t.split("-")})})),(0,m.default)((0,i.default)(e),"filterStatus",(c=(0,n.default)(o.mark((function t(s){var r;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r="全部"===s?"":O.MODEL_RATING_STATUS.getValue(s)||"")!==e.state.filterStatus){t.next=3;break}return t.abrupt("return");case 3:return(0,_.t)("条目.筛选吐槽状态",{subjectId:e.subjectId,label:s}),e.setState({filterStatus:r,filterScores:[]}),e.save(),t.next=8,e.fetchSubjectComments(!0,!1);case 8:(0,h.feedback)();case 9:case"end":return t.stop()}}),t)}))),function(e){return c.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"toRating",(function(t,s,o){(0,_.t)("条目.跳转",{to:"Rating",from:s,subjectId:e.subjectId,status:o});var r=e.subjectCollection,n=r.wish,c=r.collect,u=r.doing,i=r.on_hold,d=r.dropped;t.push("Rating",{subjectId:e.subjectId,status:o,name:(0,h.cnjp)(e.cn,e.jp),wish:n,collect:c,doing:u,onHold:i,dropped:d,type:e.type})})),(0,m.default)((0,i.default)(e),"onSwitchBlock",(function(e){(0,_.t)("条目.展开收起功能块",{key:e}),b.systemStore.switchSetting(e)})),(0,m.default)((0,i.default)(e),"hiddenBlock",(function(e){(0,_.t)("条目.展开收起功能块",{key:e+" | -1"}),b.systemStore.setSetting(e,-1)})),(0,m.default)((0,i.default)(e),"setRendered",(function(){e.state.rendered||e.setState({rendered:!0})})),(0,m.default)((0,i.default)(e),"unRendered",(function(){O.WEB||e.state.rendered&&e.setState({rendered:!1})})),(0,m.default)((0,i.default)(e),"toggleFolder",(function(){if(b.userStore.isLogin){var t=e.state.folder;e.setState({folder:!t}),t||(0,_.t)("条目.管理目录",{subjectId:e.subjectId})}else(0,h.info)("请先"+T.default.login())})),(0,m.default)((0,i.default)(e),"onSelectOnAir",(function(t,s){(0,_.t)("条目.自定义放送",{subjectId:e.subjectId}),b.calendarStore.updateOnAirUser(e.subjectId,t,s)})),(0,m.default)((0,i.default)(e),"resetOnAirUser",(function(){(0,_.t)("条目.重置放送",{subjectId:e.subjectId}),b.calendarStore.resetOnAirUser(e.subjectId)})),(0,m.default)((0,i.default)(e),"onActionsPress",(function(t,s){if("跳转管理"===t)return s.push("Actions",{subjectId:e.subjectId,name:e.cn||e.jp}),!0;var o=e.actions.find((function(e){return e.name===t}));return!!o&&((0,h.open)(o.url,!0),(0,_.t)("其他.自定义跳转",{from:"Subject",key:e.subjectId+"|"+o.name+"|"+o.url}),!0)})),(0,m.default)((0,i.default)(e),"addBlockUser",(function(e){(0,h.confirm)("屏蔽来自 "+(null==e?void 0:e.userName)+"@"+(null==e?void 0:e.userId)+" 的包括条目评论、时间胶囊、超展开相关信息，确定?",(function(){(0,_.t)("条目.屏蔽用户",{userId:e.userId}),b.rakuenStore.addBlockUser(e.userName+"@"+e.userId),(0,h.info)("已屏蔽 "+e.userName)}))})),(0,m.default)((0,i.default)(e),"doBlockUser",(function(e){(0,h.confirm)("与 "+e.userName+" 绝交（不再看到用户的所有话题、评论、日志、私信、提醒）?",(0,n.default)(o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b.rakuenStore.formhash){t.next=3;break}return t.next=3,b.rakuenStore.fetchPrivacy();case 3:b.rakuenStore.doBlockUser({keyword:String(e.userId)},(0,n.default)(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,_.t)("条目.绝交"),(0,h.info)("已添加绝交"),(0,h.feedback)(),b.rakuenStore.fetchPrivacy();case 4:case"end":return e.stop()}}),e)}))),(function(){(0,h.info)("添加失败, 可能授权信息过期")}));case 4:case"end":return t.stop()}}),t)}))))})),(0,m.default)((0,i.default)(e),"onTrackUsersCollection",(function(t,s,o,r){if(null==s||!s.userId)return!1;if(t===S.TEXT_LIKES)return b.userStore.isLogin?b.uiStore.showLikesGrid(e.subjectId,r,b.userStore.formhash,O.LIKE_TYPE_TIMELINE,{recommandPosition:"top"}):((0,h.info)("请先登录"),!1);if(t!==S.TEXT_COPY_COMMENT)if(t!==S.TEXT_BLOCK_USER)if(t!==S.TEXT_IGNORE_USER){if(e.type){var n=s||{},c=n.avatar,u=n.userId,i=n.userName;b.systemStore.trackUsersCollection(u,e.subjectTypeValue),b.usersStore.updateUsersInfo({avatar:c,userId:u,userName:i}),b.collectionStore.fetchUsersCollection(u,e.subjectId),(0,_.t)("条目.特别关注",{subjectId:e.subjectId,type:e.subjectTypeValue,userId:u})}}else e.doBlockUser(s);else e.addBlockUser(s);else e.onCopyComment(s,o)})),(0,m.default)((0,i.default)(e),"onCancelTrackUsersCollection",(function(t,s){if(e.type&&null!=s&&s.userId){var o=(s||{}).userId;b.systemStore.cancelTrackUsersCollection(o,e.subjectTypeValue),(0,_.t)("条目.取消特别关注",{subjectId:e.subjectId,type:e.subjectTypeValue,userId:o})}})),(0,m.default)((0,i.default)(e),"onCopyComment",(function(e,t){(0,h.copy)(t,"已复制 "+(null==e?void 0:e.userName)+" 的评论"),(0,h.feedback)()})),(0,m.default)((0,i.default)(e),"onPostShare",(d=(0,n.default)(o.mark((function t(s){var r,n,c,u,i;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return");case 2:return r=e.subject.images,null!=(n=(0,O.CDN_OSS_SUBJECT)((0,h.getCoverMedium)(null==r?void 0:r.common))).includes&&n.includes(O.HOST_CDN)||(n=(0,h.getCoverLarge)(null==r?void 0:r.common)),c=(0,h.loading)("下载封面中..."),g.default.defaults.withCredentials=!1,t.next=9,(0,g.default)({method:"get",url:n.replace("http://","https://"),responseType:"arraybuffer"});case 9:u=t.sent,i=u.request,c(),s.push("Share",{_subjectId:e.subjectId,_type:e.type,_url:O.HOST+"/subject/"+e.subjectId,_cover:"data:image/jpg;base64,"+i._response,_title:(0,h.cnjp)(e.cn,e.jp),_content:e.summary.replace(/\r\n\r\n/g,"\r\n"),_detail:e.tags.filter((function(e,t){return t<=4})).map((function(e){return e.name})).join(" · ")}),(0,_.t)("条目.拼图分享",{subjectId:e.subjectId,spa:!1});case 14:case"end":return t.stop()}}),t)}))),function(e){return d.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"onWebShare",(function(){var t=O.URL_SPA+"/"+(0,h.getSPAParams)("Subject",{subjectId:e.subjectId});(0,h.copy)("【链接】"+(0,h.cnjp)(e.cn,e.jp)+" | Bangumi番组计划\n"+t,"已复制 APP 网页版地址"),(0,h.postTask)((function(){(0,h.open)(t)}),1600),(0,_.t)("条目.拼图分享",{subjectId:e.subjectId,spa:!0})})),(0,m.default)((0,i.default)(e),"toggleVersion",(0,n.default)(o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({filterVersion:!e.state.filterVersion}),e.save(),t.next=4,e.fetchSubjectComments(!0,!1);case 4:(0,h.feedback)();case 5:case"end":return t.stop()}}),t)})))),(0,m.default)((0,i.default)(e),"prepareFlip",(function(){e.setState({flip:!0})})),(0,m.default)((0,i.default)(e),"afterFlip",(function(){var t=e.state.flipKey;e.setState({flip:!1}),(0,h.postTask)((function(){e.setState({flipKey:t+1})}),400)})),(0,m.default)((0,i.default)(e),"prepareEpsFlip",(function(){e.setState({flipEps:!0})})),(0,m.default)((0,i.default)(e),"afterEpsFlip",(0,h.debounce)((function(){e.setState({flipEps:!1})}))),(0,m.default)((0,i.default)(e),"updateVisibleBottom",h.updateVisibleBottom.bind((0,i.default)(e))),(0,m.default)((0,i.default)(e),"onScrollY",0),(0,m.default)((0,i.default)(e),"closeLikesGridTimeoutId",null),(0,m.default)((0,i.default)(e),"onScroll",(function(t){var s=t.nativeEvent.contentOffset.y;e.onScrollY=s,e.updateVisibleBottom(t),!e.closeLikesGridTimeoutId&&s>=2*b._.window.height&&(e.closeLikesGridTimeoutId=setTimeout((function(){b.uiStore.closeLikesGrid(),e.closeLikesGridTimeoutId=null}),80)),e.state.fixed&&s>f.HEADER_TRANSITION_HEIGHT||!e.state.fixed&&s<=f.HEADER_TRANSITION_HEIGHT||(e.setState({fixed:s>f.HEADER_TRANSITION_HEIGHT}),e.updateStatusBar())})),(0,m.default)((0,i.default)(e),"doUpdateCollection",(a=(0,n.default)(o.mark((function t(s){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,_.t)("条目.管理收藏",{subjectId:e.subjectId}),t.prev=1,e.prepareFlip(),e.setState({disabled:!0}),t.next=6,b.collectionStore.doUpdateCollection(Object.assign({},s,{noConsole:!0}));case 6:b.collectionStore.fetchCollection(e.subjectId),b.collectionStore.fetchCollectionStatusQueue([e.subjectId]),s.status!==O.MODEL_COLLECTION_STATUS.getValue("在看")?b.userStore.removeCollection(s.subjectId):b.userStore.addCollection(s.subjectId),e.closeManageModal(),(0,x.webhookCollection)(s,e.subject,b.userStore.userInfo),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error(I.NAMESPACE,"doUpdateCollection",t.t0);case 16:e.setState({disabled:!1});case 17:case"end":return t.stop()}}),t,null,[[1,13]])}))),function(e){return a.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"toEp",(function(t,s){var o;(0,_.t)("条目.章节菜单操作",{title:"本集讨论",subjectId:e.subjectId}),(0,h.appNavigate)(t.url||"/ep/"+t.id,s,{_title:"ep"+t.sort+"."+(t.name||t.name_cn),_group:e.subject.name||e.subject.name_cn,_groupThumb:(0,j.getCoverSrc)(null==(o=e.subject.images||{})?void 0:o.medium,O.IMG_WIDTH),_desc:"时长:"+t.duration+" / 首播:"+t.airdate+"<br />"+(t.desc||"").replace(/\r\n/g,"<br />")},{id:"条目.跳转",data:{from:"章节",subjectId:e.subjectId}})})),(0,m.default)((0,i.default)(e),"toPlay",(function(t){(0,h.postTask)((function(){(0,h.showActionSheet)(e.onlinePlayActionSheetData,(function(s){(0,_.t)("条目.章节菜单操作",{title:e.onlinePlayActionSheetData[s],subjectId:e.subjectId});var o,r,n=1===t.type,c=e.state.epsData,u=e.subject.eps,i=void 0===u?[]:u,d=e.onlinePlayActionSheetData[s];O.SITES.includes(d)&&(n?o=(0,h.getBangumiUrl)({id:t.id,site:d}):(r=i.filter((function(e){return 0===e.type})).findIndex((function(e){return e.id===t.id})),o=c[d][r]||(0,h.getBangumiUrl)({id:t.id,site:d}))),o&&(0,h.open)(o)}))}),320)})),(0,m.default)((0,i.default)(e),"doSaveCalenderEvent",(function(t){(0,h.saveCalenderEvent)(t,(0,h.cnjp)(e.cn,e.jp),e.onAirCustom),(0,_.t)("其他.添加日历",{subjectId:e.subjectId,sort:(null==t?void 0:t.sort)||0,from:"Subject"})})),(0,m.default)((0,i.default)(e),"doUpdateEpStatus",(l=(0,n.default)(o.mark((function t(s,r){var n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=O.MODEL_EP_STATUS.getValue(s),(0,_.t)("条目.章节菜单操作",{title:"更新收视进度",subjectId:e.subjectId,status:n}),e.prepareEpsFlip(),t.next=5,b.userStore.doUpdateEpStatus({id:r.id,status:n});case 5:b.userStore.fetchCollectionSingle(e.subjectId),b.userStore.fetchUserProgress(e.subjectId),(0,x.webhookEp)(Object.assign({},r,{status:n,batch:!1}),e.subject,b.userStore.userInfo);case 8:case"end":return t.stop()}}),t)}))),function(e,t){return l.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"doUpdateSubjectWatched",(P=(0,n.default)(o.mark((function t(s){var r,n,c;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,_.t)("条目.章节菜单操作",{title:"批量更新收视进度",subjectId:e.subjectId}),r=(e.subject.eps||[]).filter((function(e){return 0===e.type})).sort((function(e,t){return(0,h.asc)(e,t,(function(e){return e.sort||0}))})).findIndex((function(e){return e.sort===s.sort})),-1===r?(c=Number(e.subjectFormHTML.totalEps),n=c&&s.sort>=c?r+1:s.sort):n=r+1,!e.nsfw){t.next=6;break}return e.doUpdateEp({eps:n}),t.abrupt("return");case 6:return e.prepareEpsFlip(),t.next=9,b.userStore.doUpdateSubjectWatched({subjectId:e.subjectId,sort:n});case 9:return b.userStore.fetchCollectionSingle(e.subjectId),b.userStore.fetchUserProgress(e.subjectId),(0,x.webhookEp)(Object.assign({},s,{status:"watched",batch:!0}),e.subject,b.userStore.userInfo),t.abrupt("return");case 13:case"end":return t.stop()}}),t)}))),function(e){return P.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"doEpsSelect",(w=(0,n.default)(o.mark((function t(s,r,n){var c;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!s.includes("本集讨论")&&!s.includes("(+")){t.next=4;break}return e.toEp(r,n),t.abrupt("return");case 4:if("正版播放"!==s){t.next=7;break}return e.toPlay(r),t.abrupt("return");case 7:if("添加提醒"!==s){t.next=10;break}return e.doSaveCalenderEvent(r),t.abrupt("return");case 10:if("未收藏"===(void 0===(c=e.collection.status)?{name:"未收藏"}:c).name){t.next=23;break}if(!O.MODEL_EP_STATUS.getValue(s)){t.next=16;break}return e.doUpdateEpStatus(s,r),t.abrupt("return");case 16:if("看到"!==s){t.next=22;break}if(!((null==r?void 0:r.sort)>24)){t.next=20;break}return(0,h.confirm)("确认看到"+r.sort+"集?",(function(){e.doUpdateSubjectWatched(r)})),t.abrupt("return");case 20:return e.doUpdateSubjectWatched(r),t.abrupt("return");case 22:return t.abrupt("return");case 23:(0,h.info)("收藏了才能管理哦"),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),console.error(I.NAMESPACE,"doEpsSelect",t.t0);case 29:case"end":return t.stop()}}),t,null,[[0,26]])}))),function(e,t,s){return w.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"doUpdateNext",(N=(0,n.default)(o.mark((function t(s){var r,n,c,u,i;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,_.t)("条目.更新书籍下一个章节",{subjectId:e.subjectId}),r=e.state,n=r.chap,c=r.vol,u=String(parseInt(e.state[s]||0)+1),i=(0,m.default)({subjectId:e.subjectId,chap:n,vol:c},s,u),e.doUpdateEp({eps:i.chap,vol:i.vol},!0);case 5:case"end":return t.stop()}}),t)}))),function(e){return N.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"doUpdateBookEp",(0,n.default)(o.mark((function t(){var s,r,n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,_.t)("条目.更新书籍章节",{subjectId:e.subjectId}),s=e.state,r=s.chap,n=s.vol,e.doUpdateEp({eps:r,vol:n},!0);case 3:case"end":return t.stop()}}),t)})))),(0,m.default)((0,i.default)(e),"doUpdateSubjectEp",(0,n.default)(o.mark((function t(){var s;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,_.t)("条目.输入框更新章节",{subjectId:e.subjectId}),s=e.state.watchedEps,e.doUpdateEp({eps:s});case 3:case"end":return t.stop()}}),t)})))),(0,m.default)((0,i.default)(e),"doUpdateEp",(M=(0,n.default)(o.mark((function t(s){var r,c,u,i=arguments;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=s.eps,c=s.vol,u=i.length>1&&void 0!==i[1]&&i[1];try{e.prepareEpsFlip(),b.collectionStore.doUpdateSubjectEp({subjectId:e.subjectId,watchedEps:r,watchedVols:c},(0,n.default)(o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.userStore.fetchCollectionSingle(e.subjectId),t.next=3,b.userStore.fetchUserProgress(e.subjectId);case 3:return t.next=5,e.fetchSubjectFromHTML();case 5:e.save(),e.afterEpsFlip(),u&&((0,h.info)("已提交"),(0,h.feedback)()),(0,x.webhookEp)({status:"watched",sort:r,vols:c,batch:!1},e.subject,b.userStore.userInfo);case 9:case"end":return t.stop()}}),t)}))))}catch(e){console.error(I.NAMESPACE,"doUpdateEp",e)}case 3:case"end":return t.stop()}}),t)}))),function(e){return M.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"doEpsLongPress",(k=(0,n.default)(o.mark((function t(s){var r,n,c;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.id,(0,_.t)("条目.章节按钮长按",{subjectId:e.subjectId}),t.prev=2,n=e.userProgress,c=n[r]?O.MODEL_EP_STATUS.getValue("撤销"):O.MODEL_EP_STATUS.getValue("看过"),t.next=7,b.userStore.doUpdateEpStatus({id:r,status:c});case 7:(0,h.feedback)(),b.userStore.fetchCollectionSingle(e.subjectId),b.userStore.fetchUserProgress(e.subjectId),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(I.NAMESPACE,"doEpsLongPress",t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])}))),function(e){return k.apply(this,arguments)})),(0,m.default)((0,i.default)(e),"doEraseCollection",(0,n.default)(o.mark((function t(){var s;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.subjectFormHTML.formhash){t.next=3;break}return t.abrupt("return");case 3:return(0,_.t)("条目.删除收藏",{subjectId:e.subjectId}),t.prev=4,e.prepareFlip(),e.setState({disabled:!0}),t.next=9,b.userStore.doEraseCollection({subjectId:e.subjectId,formhash:s},O.FROZEN_FN,(function(){(0,h.postTask)((function(){b.collectionStore.removeStatus(e.subjectId),e.fetchCollection(),b.collectionStore.fetchCollectionStatusQueue([e.subjectId]),b.userStore.removeCollection(e.subjectId)}),40)}));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error(I.NAMESPACE,"doEraseCollection",t.t0);case 14:e.setState({disabled:!1});case 15:case"end":return t.stop()}}),t,null,[[4,11]])})))),(0,m.default)((0,i.default)(e),"doTranslate",(0,n.default)(o.mark((function t(){var s,r,n,c;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.translateResult.length){t.next=2;break}return t.abrupt("return");case 2:return(0,_.t)("条目.翻译简介",{subjectId:e.subjectId}),t.prev=3,s=(0,h.loading)("请求中..."),t.next=7,(0,_.baiduTranslate)(e.summary);case 7:if(r=t.sent,s(),n=JSON.parse(r),c=n.trans_result,!Array.isArray(c)){t.next=13;break}return e.setState({translateResult:c}),t.abrupt("return");case 13:(0,h.info)("翻译失败, 请重试"),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(3),s&&s(),(0,h.info)("翻译失败, 请重试");case 20:case"end":return t.stop()}}),t,null,[[3,16]])})))),(0,m.default)((0,i.default)(e),"doDiscTranslate",(0,n.default)(o.mark((function t(){var s,r,n,c,u;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.discTranslateResult.length){t.next=2;break}return t.abrupt("return");case 2:return(0,_.t)("条目.翻译曲目",{subjectId:e.subjectId}),s=[],e.disc.forEach((function(e){e.disc.forEach((function(e,t){s.push(e.title.replace(t+1+" ",""))}))})),t.prev=5,r=(0,h.loading)("请求中..."),t.next=9,(0,_.baiduTranslate)(s.join("\n"));case 9:if(n=t.sent,r(),c=JSON.parse(n),u=c.trans_result,!Array.isArray(u)){t.next=15;break}return e.setState({discTranslateResult:u}),t.abrupt("return");case 15:(0,h.info)("翻译失败, 请重试"),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),r&&r(),(0,h.info)("翻译失败, 请重试");case 22:case"end":return t.stop()}}),t,null,[[5,18]])})))),(0,m.default)((0,i.default)(e),"doExportCalenderEventICS",(0,n.default)(o.mark((function t(){var s,r,n,c,u;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.subject.eps||[]).filter((function(e){return 0===e.type})).length){t.next=19;break}if((s=e.subject.eps.length>=100?e.subject.eps.filter((function(e){return"NA"===e.status})):e.subject.eps).length){t.next=6;break}return(0,h.info)("没有数据"),t.abrupt("return");case 6:return r=e.onAirCustom,n=["BEGIN:VCALENDAR","PRODID:-//Bangumi//Anime Calendar//CN","VERSION:2.0","METHOD:PUBLISH","CALSCALE:GREGORIAN","X-WR-CALNAME:Bangumi放送日程","X-APPLE-CALENDAR-COLOR:#FE8A95"],s.forEach((function(t){var s=(0,h.genICSCalenderEventDate)(t,r),o=s.DTSTART,c=s.DTEND,u="https://bgm.tv/ep/"+t.id;(t.name_cn||t.name)&&(u+=" ("+(t.name_cn||t.name)+")"),n.push("BEGIN:VEVENT","UID:"+e.subjectId+"-"+t.id,"TZID:Asia/Shanghai","DTSTART:"+o,"DTEND:"+c,"SUMMARY:"+(0,h.cnjp)(e.subject.name_cn,e.subject.name)+" ep."+t.sort,"DESCRIPTION:"+u,"TRANSP:OPAQUE","END:VEVENT")})),n.push("END:VCALENDAR"),t.next=12,(0,y.temp)(e.userId+"_"+e.subjectId+".ics",n.join("\n"),-1);case 12:if(c=t.sent,null!=(u=c.data)&&u.downloadKey){t.next=17;break}return(0,h.info)("未知错误，生成ics失败，重试或联系作者"),t.abrupt("return",!1);case 17:(0,_.t)("条目.导出日程",{subjectId:e.subjectId,userId:e.userId}),(0,h.open)((0,y.download)(u.downloadKey));case 19:case"end":return t.stop()}}),t)})))),e}return(0,c.default)(s)}(P.default)},"./src/screens/home/subject/store/computed.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.some.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.string.small.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=(o(s("react")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),f=s("./node_modules/mobx/dist/mobx.esm.js"),b=s("./src/stores/index.ts"),h=s("./src/stores/calendar/onair/index.ts"),_=s("./src/utils/index.ts"),y=s("./src/utils/subject/adv/index.ts"),g=s("./src/utils/subject/anime/index.ts"),v=s("./src/utils/subject/game/index.ts"),x=s("./src/utils/subject/manga/index.ts"),O=s("./src/utils/subject/wenku/index.ts"),T=s("./src/constants/index.ts"),S=s("./src/screens/home/subject/ds.ts"),E=s("./src/screens/user/origin-setting/utils.ts"),P=o(s("./src/screens/home/subject/store/state.ts")),I=s("./src/screens/home/subject/store/ds.ts"),w=s("./node_modules/react/jsx-runtime.js");function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,a.default)(this,s)}}t.default=(r=function(e){(0,d.default)(s,e);var t=N(s);function s(){var e;(0,c.default)(this,s);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),(0,m.default)((0,i.default)(e),"save",(function(){return e.saveStorage(e.namespace,I.EXCLUDE_STATE)})),e}return(0,u.default)(s,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"namespace",get:function(){return I.NAMESPACE+"|"+this.subjectId}},{key:"nsfw",get:function(){var e;return(null==(e=this.subject)?void 0:e.v0)||(0,_.x18)(this.subjectId,this.cn||this.jp)}},{key:"onAirCustom",get:function(){return(0,_.freeze)((0,_.getOnAir)(b.calendarStore.onAirLocal(this.subjectId),b.calendarStore.onAirUser(this.subjectId)))}},{key:"footerEmptyDataComponent",get:function(){if(-1===b.systemStore.setting.showComment)return(0,w.jsx)(j.default,{})}},{key:"url",get:function(){return T.HOST+"/subject/"+this.subjectId}},{key:"userId",get:function(){return b.userStore.userInfo.id}},{key:"subject",get:function(){return(0,_.freeze)(b.subjectStore.subject(this.subjectId))}},{key:"subjectFormHTML",get:function(){return(0,_.freeze)(b.subjectStore.subjectFormHTML(this.subjectId))}},{key:"subjectFromOSS",get:function(){return(0,_.freeze)(this.state.subject)}},{key:"subjectComments",get:function(){var e,t=b.subjectStore.subjectComments(this.subjectId);!t._loaded&&null!=(e=this.state.comments.list)&&e.length&&(t=this.state.comments);var s=b.systemStore.setting.showComment;if(!s||-1===s){var o=t.pagination.pageTotal;return{list:[],pagination:{page:o||1,pageTotal:o},version:t.version||!1,_reverse:t._reverse,_loaded:(0,_.getTimestamp)()}}var r=this.state.filterScores;return b.systemStore.setting.filterDefault||b.userStore.isLimit?Object.assign({},t,{list:t.list.filter((function(e){var t,s;return r.length?!(null!=(s=e.avatar)&&null!=s.includes&&s.includes(T.URL_DEFAULT_AVATAR))&&Number(e.star)>=Number(r[0])&&Number(e.star)<=Number(r[1]):!(null!=(t=e.avatar)&&null!=t.includes&&t.includes(T.URL_DEFAULT_AVATAR))})),version:t.version||!1}):r.length?Object.assign({},t,{list:t.list.filter((function(e){return Number(e.star)>=Number(r[0])&&Number(e.star)<=Number(r[1])})),version:t.version||!1}):t}},{key:"cover",get:function(){var e;return this.params._imageForce||(null!=(e=this.subject.images)&&e.common?(0,_.matchCoverUrl)(this.subject.images.common):"")||this.subjectFromOSS.image||T.IMG_DEFAULT}},{key:"collection",get:function(){return(0,_.freeze)(b.collectionStore.collection(this.subjectId))}},{key:"userProgress",get:function(){return(0,_.freeze)(b.userStore.userProgress(this.subjectId))}},{key:"type",get:function(){var e,t;if(!this.subject._loaded){var s=this.params._type,o=void 0===s?"":s;if(o)return o}return T.MODEL_SUBJECT_TYPE.getTitle(this.subject.type||(null==(e=this.state)||null==(t=e.subject)?void 0:t.type))}},{key:"subjectType",get:function(){return this.subject._loaded?this.subject.type:this.subjectFromOSS.type}},{key:"subjectTypeValue",get:function(){return T.MODEL_SUBJECT_TYPE.getLabel(this.subjectType)}},{key:"rank",get:function(){var e,t;return this.subject.rank||b.subjectStore.ratingRank(this.subjectId)||(null==(e=this.subjectFromOSS)||null==(t=e.rating)?void 0:t.rank)||0}},{key:"vib",get:function(){return(0,_.freeze)(b.subjectStore.vib(this.subjectId))}},{key:"onlinePlayActionSheetData",get:function(){var e=this.state.epsData,t=[];return T.SITES.forEach((function(s){e[s]&&Object.keys(e[s]).length&&t.push(s)})),t.push("取消"),(0,_.freeze)(t)}},{key:"action",get:function(){return"音乐"===this.type?"听":"游戏"===this.type?"玩":"书籍"===this.type?"读":"看"}},{key:"userOrigins",get:function(){return(0,_.freeze)((0,E.getOriginConfig)(b.subjectStore.origin,"anime"))}},{key:"actions",get:function(){return(0,_.freeze)(b.subjectStore.actions(this.subjectId).slice().filter((function(e){return e.active})).sort((function(e,t){return(0,_.desc)(e.sort||0,t.sort||0)})))}},{key:"onlineOrigins",get:function(){var e=[];if(["动画"].includes(this.type)){var t,s;if(null!=b.systemStore&&null!=(t=b.systemStore.ota)&&t.X18&&b.userStore.isLogin)this.nsfw&&(s=!0),s||(s=this.tags.some((function(e){var t;return null==(t=e.name)||null==t.includes?void 0:t.includes("里番")}))),s&&(0,E.getOriginConfig)(b.subjectStore.origin,"hanime").filter((function(e){return e.active})).forEach((function(t){e.push(t)}));(0,E.getOriginConfig)(b.subjectStore.origin,"anime").filter((function(e){return e.active})).forEach((function(t){e.push(t)}))}["三次元"].includes(this.type)&&(0,E.getOriginConfig)(b.subjectStore.origin,"real").filter((function(e){return e.active})).forEach((function(t){e.push(t)}));var o=this.state.bangumiInfo.sites;return(void 0===o?[]:o).filter((function(e){return T.SITES_DS.includes(e.site)})).forEach((function(t){e.push(t.site)})),(0,_.freeze)(e)}},{key:"onlineComicOrigins",get:function(){return(0,_.freeze)((0,E.getOriginConfig)(b.subjectStore.origin,this.titleLabel.includes("小说")?"wenku":"manga").filter((function(e){return e.active})))}},{key:"onlineDiscOrigins",get:function(){return(0,_.freeze)((0,E.getOriginConfig)(b.subjectStore.origin,"music").filter((function(e){return e.active})))}},{key:"onlineGameOrigins",get:function(){return(0,_.freeze)((0,E.getOriginConfig)(b.subjectStore.origin,"game").filter((function(e){return e.active})))}},{key:"isPS",get:function(){return"游戏"===this.type&&(this.info.includes("PS4")||this.info.includes("PS3")||this.info.includes("PS5"))}},{key:"animeInfo",get:function(){if("动画"!==this.type)return null;var e=(0,g.findAnime)(this.subjectId);return null!=e&&e.i?(0,_.freeze)(e):null}},{key:"animeTags",get:function(){var e,t,s=h.ON_AIR[this.subjectId];if(!this.animeInfo&&!s)return null;if((0,_.isArray)(null==(e=this.animeInfo)?void 0:e.t)&&(t=this.animeInfo.t.map((function(e){return g.ANIME_TAGS[e]})).filter((function(e){return!!e}))),!t&&!s)return null;var o=[],r={};return t&&t.forEach((function(e){o.push({pressable:!0,value:e}),r[e]=!0})),s&&(r[s.type]||o.push({pressable:!1,value:s.type}),s.origin.split("/").forEach((function(e){r[e]||o.push({pressable:!1,value:e})})),s.tag.split("/").forEach((function(e){r[e]||o.push({pressable:!1,value:e})}))),(0,_.freeze)(o)}},{key:"gameInfo",get:function(){if("游戏"!==this.type)return null;var e=(0,v.findGame)(this.subjectId);if(null!=e&&e.i)return(0,_.freeze)(Object.assign({},e,{isADV:!1}));var t=(0,y.findADV)(this.subjectId);return null!=t&&t.i?(0,_.freeze)(Object.assign({},t,{isADV:!0})):null}},{key:"gameTags",get:function(){var e,t;if(!this.gameInfo||null!=(e=this.gameInfo)&&e.isADV)return null;var s=(null==(t=this.gameInfo)?void 0:t.ta)||[];return(0,_.freeze)(s.map((function(e){return v.GAME_CATE[e]})))}},{key:"mangaInfo",get:function(){if("书籍"!==this.type)return null;var e=(0,x.findManga)(this.subjectId);return null!=e&&e.i?(0,_.freeze)(e):null}},{key:"mangaTags",get:function(){var e;if(!this.mangaInfo)return null;var t=(null==(e=this.mangaInfo)?void 0:e.b)||[];return(0,_.freeze)(t.map((function(e){return x.MANGA_TAGS[e]})))}},{key:"wenkuInfo",get:function(){if("书籍"!==this.type)return null;var e=(0,O.findWenku)(this.subjectId);return null!=e&&e.i?(0,_.freeze)(e):null}},{key:"wenkuTags",get:function(){var e;if(!this.wenkuInfo)return null;var t=(null==(e=this.wenkuInfo)?void 0:e.j)||[];return(0,_.freeze)(t.map((function(e){return O.WENKU_TAGS[e]})))}},{key:"source",get:function(){return"书籍"!==this.type?null:(0,_.freeze)({mangaId:0,wenkuId:0})}},{key:"filterEpsData",get:function(){var e=["从 1 起"];if(this.eps.length<100)return(0,_.freeze)(e);for(var t=Math.floor(this.eps.length/100),s=1;s<=t;s+=1)e.push("从 "+100*s+" 开始");return(0,_.freeze)(e)}},{key:"status",get:function(){var e=this.subjectCollection,t=e.wish,s=void 0===t?0:t,o=e.collect,r=void 0===o?0:o,n=e.doing,c=void 0===n?0:n,u=e.on_hold,i=void 0===u?0:u,d=e.dropped,a=void 0===d?0:d,l=[];return s&&l.push({status:"wishes",text:s+"想"+this.action}),r&&l.push({status:"collections",text:""+r+this.action+"过"}),c&&l.push({status:"doings",text:c+"在"+this.action}),i&&l.push({status:"on_hold",text:i+"搁置"}),a&&l.push({status:"dropped",text:a+"抛弃"}),s+r+c+i+a&&l.push({status:"",text:"总"+(s+r+c+i+a)}),(0,_.freeze)(l)}},{key:"release",get:function(){var e;return(null==(e=this.info.match(/<li><span>(发售日|放送开始|上映年度|上映时间): <\/span>(.+?)<\/li>/))?void 0:e[2])||""}},{key:"year",get:function(){var e,t,s,o,r=(null==(e=((null==(t=this.info.match(/<li><span>(连载开始|开始): <\/span>(.+?)<\/li>/))?void 0:t[2])||"").match(/(\d{4})/))?void 0:e[0])||"";return r||((null==(s=((null==(o=this.info.match(/<li><span>(发售日|发售日期|放送开始|上映年度|上映时间|发行日期): <\/span>(.+?)<\/li>/))?void 0:o[2])||"").match(/(\d{4})/))?void 0:s[0])||"")}},{key:"yearAndMount",get:function(){try{var e,t,s,o,r=/(\d{4}[-年]\d{1,2})/,n=(null==(e=((null==(t=this.info.match(/<li><span>(连载开始|开始): <\/span>(.+?)<\/li>/))?void 0:t[2])||"").match(r))?void 0:e[0])||(null==(s=((null==(o=this.info.match(/<li><span>(发售日|发售日期|放送开始|上映年度|上映时间|发行日期): <\/span>(.+?)<\/li>/))?void 0:o[2])||"").match(r))?void 0:s[0])||"";return n?n.replace("年","-").split("-").map((function(e){return(0,_.pad)(Number(e))})).join("-"):this.year}catch(e){return this.year}}},{key:"end",get:function(){var e,t;return(null==(e=((null==(t=this.info.match(/<li><span>(连载结束|结束): <\/span>(.+?)<\/li>/))?void 0:t[2])||"").match(/(\d{4})/))?void 0:e[0])||""}},{key:"yearAndMountEnd",get:function(){try{var e,t,s=(null==(e=((null==(t=this.info.match(/<li><span>(连载结束|结束): <\/span>(.+?)<\/li>/))?void 0:t[2])||"").match(/(\d{4}[-年]\d{1,2})/))?void 0:e[0])||"";return s?s.replace("年","-").split("-").map((function(e){return(0,_.pad)(Number(e))})).join("-"):this.end}catch(e){return this.end}}},{key:"artist",get:function(){var e;return(0,_.removeHTMLTag)((null==(e=this.info.match(/<li><span>艺术家: <\/span>(.+?)<\/li>/))?void 0:e[1])||"")}},{key:"imageWidth",get:function(){var e=b._.isPad?1.4:1.2;return"音乐"===this.type?Math.floor(Math.min(T.IMG_WIDTH_LG*e*1.4,b._.window.contentWidth/2)):(T.IMG_WIDTH_LG+16)*e}},{key:"imageHeight",get:function(){return"音乐"===this.type?this.imageWidth:1.4*this.imageWidth}},{key:"coverPlaceholder",get:function(){var e,t,s=this.params._imageForce||this.params._image;return"/img/no_icon_subject.png"===s&&(s=""),s||this.subjectFromOSS.image||(null==(e=this.subject)||null==(t=e.images)?void 0:t.medium)||""}},{key:"jp",get:function(){return(0,_.HTMLDecode)(this.subject.name||this.params._jp||this.subjectFromOSS.name)}},{key:"cn",get:function(){return(0,_.HTMLDecode)(this.subject.name_cn||this.params._cn||this.subjectFromOSS.name_cn||(0,_.findSubjectCn)(this.jp,this.subjectId))}},{key:"rating",get:function(){return this.subject._loaded&&this.subject.rating?(0,_.freeze)(Object.assign({},I.INIT_RATING,this.subject.rating)):this.subjectFromOSS.rating?(0,_.freeze)(Object.assign({},I.INIT_RATING,this.subjectFromOSS.rating)):(0,_.freeze)(I.INIT_RATING)}},{key:"lock",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.lock:this.subjectFromOSS.lock}},{key:"subjectCollection",get:function(){return this.subject._loaded&&this.subject.rating?(0,_.freeze)(this.subject.collection||{}):(0,_.freeze)(this.subjectFromOSS.collection||{})}},{key:"eps",get:function(){if(this.subject._loaded&&this.subject.rating){var e=this.subject.eps||[];return e.length>=1e3?[].concat((0,n.default)(e),(0,n.default)(b.subjectStore.epV2(this.subject.id).list)).sort((function(e,t){return(0,_.asc)(e,t,(function(e){return e.type}))})):(0,_.freeze)(e.slice().sort((function(e,t){return(0,_.asc)(e,t,(function(e){return e.type}))})))}return(0,_.freeze)(this.subjectFromOSS.eps||[])}},{key:"toEps",get:function(){var e=this;if(this.state.filterEps){var t=this.eps.filter((function(t,s){return s>e.state.filterEps}));return(0,_.freeze)(this.state.epsReverse?t.slice().reverse():t)}return(0,_.freeze)(this.state.epsReverse?this.eps.map((function(e){return e})).reverse():this.eps)}},{key:"disc",get:function(){return this.subjectFormHTML._loaded?(0,_.freeze)(this.subjectFormHTML.disc||[]):(0,_.freeze)(this.subjectFromOSS.disc||[])}},{key:"summary",get:function(){return this.subject._loaded&&this.subject.rating?this.subject.summary:this.subjectFromOSS.summary||""}},{key:"tags",get:function(){var e=(this.subjectFormHTML._loaded?this.subjectFormHTML.tags:this.subjectFromOSS.tags)||[];return(0,_.freeze)(e.some((function(e){return!e.name}))?e.filter((function(e){return!!e.name})):e)}},{key:"info",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.info:this.subjectFromOSS.info||""}},{key:"crt",get:function(){return this.subject._loaded&&this.subject.rating?(0,_.freeze)((this.subject.crt||[]).map((function(e){var t,s,o=e.id,r=e.images,n=void 0===r?{}:r,c=e.name,u=e.name_cn,i=e.role_name,d=e.actors,a=void 0===d?[]:d;return{id:o,image:null==n?void 0:n.grid,_image:null==n?void 0:n.medium,name:u||c,nameJP:c,desc:(null==a||null==(t=a[0])?void 0:t.name)||i,actorId:null==a||null==(s=a[0])?void 0:s.id}}))):(0,_.freeze)(this.subjectFromOSS.character||[])}},{key:"staff",get:function(){if(this.subject._loaded&&this.subject.rating){var e,t=this.subject.staff;return(null==t||null==(e=t[0])?void 0:e.id)==this.subjectId?(0,_.freeze)(b.monoStore.persons(this.subjectId).list.map((function(e){return{id:e.id.replace("/person/",""),image:e.cover,_image:e.cover,name:(e.nameCn||e.name).trim(),nameJP:e.name.trim(),desc:e.position}}))):(0,_.freeze)((t||[]).map((function(e){var t=e.id,s=e.images,o=void 0===s?{}:s,r=e.name,n=e.name_cn,c=e.jobs,u=void 0===c?[]:c;return{id:t,image:null==o?void 0:o.grid,_image:null==o?void 0:o.medium,name:n||r,nameJP:r,desc:u[0]}})))}return(0,_.freeze)(this.subjectFromOSS.staff||[])}},{key:"relations",get:function(){var e=[];return e=this.subject._loaded&&this.subject.rating?(this.subjectFormHTML.relations||[]).map((function(e){return{id:e.id,image:e.image,name:e.title,desc:e.type}})):(this.subjectFromOSS.relations||[]).map((function(e){return{id:e.id,image:e.image,name:e.title,desc:e.type}})),(0,_.freeze)(e.slice().sort((function(e,t){return(0,_.desc)(I.SORT_RELATION_DESC[e.desc]||0,I.SORT_RELATION_DESC[t.desc]||0)})))}},{key:"comic",get:function(){return this.subjectFormHTML._loaded?(0,_.freeze)(this.subjectFormHTML.comic||[]):(0,_.freeze)(this.subjectFromOSS.comic||[])}},{key:"like",get:function(){return this.subjectFormHTML._loaded?(0,_.freeze)(this.subjectFormHTML.like||[]):(0,_.freeze)(this.subjectFromOSS.like||[])}},{key:"titleLabel",get:function(){var e=T.MODEL_SUBJECT_TYPE.getTitle(this.subjectType);if("动画"===e){var t=this.state.bangumiInfo,s=this.subjectFormHTML.type||String(t.type).toUpperCase()||e||"TV";return"动画"===s?"TV":"剧场版"===s?"MOVIE":s||this.subjectFromOSS.titleLabel||""}return this.subjectFormHTML.type||e||this.subjectFromOSS.titleLabel||""}},{key:"catalog",get:function(){return this.subjectFormHTML._loaded?(0,_.freeze)(this.subjectFormHTML.catalog||[]):(0,_.freeze)(this.subjectFromOSS.catalog||[])}},{key:"bilibiliSite",get:function(){var e,t;return(0,_.freeze)((null==(e=this.state.bangumiInfo)||null==(t=e.sites)?void 0:t.find((function(e){return"bilibili"===e.site})))||{})}},{key:"iqiyiSite",get:function(){var e,t;return(0,_.freeze)((null==(e=this.state.bangumiInfo)||null==(t=e.sites)?void 0:t.find((function(e){return"iqiyi"===e.site})))||{})}},{key:"youkuSite",get:function(){var e,t;return(0,_.freeze)((null==(e=this.state.bangumiInfo)||null==(t=e.sites)?void 0:t.find((function(e){return"youku"===e.site})))||{})}},{key:"subjectRelations",get:function(){return this.subjectFormHTML._loaded?(0,_.freeze)(this.subjectFormHTML.relations||[]):(0,_.freeze)(this.subjectFromOSS.relations||[])}},{key:"subjectPrev",get:function(){return(0,_.freeze)(this.subjectRelations.find((function(e){return"前传"===e.type})))}},{key:"subjectAfter",get:function(){return(0,_.freeze)(this.subjectRelations.find((function(e){return"续集"===e.type})))}},{key:"subjectSeries",get:function(){var e,t;return(0,_.freeze)("系列"===(null==(e=this.subjectRelations)||null==(t=e[0])?void 0:t.type)?this.subjectRelations[0]:null)}},{key:"subjectBook",get:function(){if(!T.WEB){var e=this.subjectRelations.findIndex((function(e){return"书籍"===e.type}));return-1!==e&&e<=3?this.subjectRelations[e]:null}return(0,_.freeze)(this.subjectRelations.find((function(e){return"书籍"===e.type})))}},{key:"subjectAnime",get:function(){if(!(this.titleLabel||"").includes("系列"))return null;var e=this.subjectRelations.find((function(e){return"动画"===e.type||"其他"===e.type}));return"动画"===(null==e?void 0:e.type)||"其他"===(null==e?void 0:e.type)&&this.jp.includes(null==e?void 0:e.title)?(0,_.freeze)(e):null}},{key:"subjectDiff",get:function(){var e=this.subjectRelations.find((function(e){return"不同演绎"===e.type}));return e||(e=this.subjectRelations.find((function(e){return"主版本"===e.type})))||(e=this.subjectRelations.find((function(e){return"主线故事"===e.type})))||(e=this.subjectRelations.find((function(e){return"外传"===e.type})))?(0,_.freeze)(e):null}},{key:"hasSeries",get:function(){return!!(this.subjectAfter||this.subjectPrev||this.subjectSeries||this.subjectAnime||this.subjectDiff||this.subjectBook)}},{key:"hd",get:function(){var e=(0,T.getOTA)().HD,t=void 0===e?[]:e;if(t.includes(Number(this.subjectId)))return this.subjectId;if(this.subjectSeries){var s=this.subjectSeries.id;if(t.includes(Number(s)))return s}return!1}},{key:"catalogs",get:function(){return(0,_.freeze)(b.usersStore.catalogs())}},{key:"catalogDetail",value:function(e){return(0,_.freeze)((0,f.computed)((function(){return b.discoveryStore.catalogDetail(e)})).get())}},{key:"catalogIncludes",get:function(){var e=this,t=0;return this.catalogs.list.forEach((function(s){e.catalogDetail(s.id).list.some((function(t){return t.id==e.subjectId}))&&(t+=1)})),t}},{key:"filterCatalog",get:function(){var e=this.catalog;return(b.systemStore.setting.filterDefault||b.userStore.isLimit)&&(e=e.filter((function(e){var t;return!(null!=(t=e.avatar)&&null!=t.includes&&t.includes(T.URL_DEFAULT_AVATAR))}))),(0,_.freeze)(e)}},{key:"filterBlog",get:function(){var e=this.subject.blog||[];if((b.systemStore.setting.filterDefault||b.userStore.isLimit)&&(e=e.filter((function(e){var t,s,o;return null==e||null==(t=e.user)||null==(s=t.avatar)||null==(o=s.small)||null==o.includes||!o.includes(T.URL_DEFAULT_AVATAR)}))),!e.length)try{var t,s=b.rakuenStore.reviews(this.subjectId);null!=s&&null!=(t=s.list)&&t.length&&(e=s.list.map((function(e){return{dateline:e.time,id:Number(e.id),image:"",replies:Number(e.replies.replace("+","")||0),summary:e.content,timestamp:(0,_.getTimestamp)(e.time),title:e.title,url:"//bgm.tv/blog/"+e.id,user:{avatar:{large:e.avatar,medium:e.avatar,small:e.avatar},id:e.userId,nickname:e.userName,sign:"",url:"//bgm.tv/user/"+e.userId,username:e.userId}}})))}catch(e){}return(0,_.freeze)(e)}},{key:"filterTopic",get:function(){var e=this,t=this.subject.topic||[];if((b.systemStore.setting.filterDefault||b.userStore.isLimit)&&(t=t.filter((function(e){var t,s,o;return null==e||null==(t=e.user)||null==(s=t.avatar)||null==(o=s.small)||null==o.includes||!o.includes(T.URL_DEFAULT_AVATAR)}))),!t.length)try{var s,o=b.rakuenStore.board(this.subjectId);null!=o&&null!=(s=o.list)&&s.length&&(t=o.list.map((function(t){return{id:Number(t.href.replace("/subject/topic/","")),lastpost:0,main_id:e.subjectId,replies:Number(t.replies.replace(" replies","")),timestamp:(0,_.getTimestamp)(t.time),title:t.title,url:t.href,user:{avatar:{large:"",medium:"",small:""},id:t.userId,nickname:t.userName,sign:"",url:"//bgm.tv/user/"+t.userId,username:t.userId}}})))}catch(e){}return(0,_.freeze)(t)}},{key:"filterRecent",get:function(){var e=this.subjectFormHTML.who||[];return(b.systemStore.setting.filterDefault||b.userStore.isLimit)&&(e=e.filter((function(e){var t;return!(null!=(t=e.avatar)&&null!=t.includes&&t.includes(T.URL_DEFAULT_AVATAR))}))),(0,_.freeze)(e)}},{key:"commentLength",get:function(){var e=this.subjectComments,t=e.list,s=e.pagination.pageTotal,o=void 0===s?0:s;return o<=1?t.length:20*(o>=2?o-1:o)}},{key:"showEp",get:function(){var e="游戏"!==this.type;return[e,e]}},{key:"showTags",get:function(){var e=b.systemStore.setting.showTags;return[!0===e,-1!==e]}},{key:"showSummary",get:function(){if(this.subject._loaded&&!this.summary)return I.NON_SHOW;var e=b.systemStore.setting.showSummary;return[!0===e,-1!==e]}},{key:"showThumbs",get:function(){var e=b.systemStore.setting.showThumbs;if(-1===e)return I.NON_SHOW;var t=this.state,s=t.epsThumbs,o=t.videos;return s.length||o.length?[!0===e,!0]:I.NON_SHOW}},{key:"showInfo",get:function(){var e=b.systemStore.setting.showInfo;return[!0===e,-1!==e]}},{key:"showGame",get:function(){var e,t=b.systemStore.setting.showGameInfo;return-1!==t&&null!=(e=this.gameInfo)&&e.i?[!0===t,!0]:I.NON_SHOW}},{key:"showRating",get:function(){var e=b.systemStore.setting.showRating;return[!0===e,-1!==e]}},{key:"showCharacter",get:function(){if(!this.crt.length)return I.NON_SHOW;var e=b.systemStore.setting.showCharacter;return[!0===e,-1!==e]}},{key:"showStaff",get:function(){if(!this.staff.length)return I.NON_SHOW;var e=b.systemStore.setting.showStaff;return[!0===e,-1!==e]}},{key:"showAnitabi",get:function(){if(!this.state.anitabi.pointsLength)return I.NON_SHOW;var e=b.systemStore.setting.showAnitabi;return[!0===e,-1!==e]}},{key:"showRelations",get:function(){if(!this.relations.length)return I.NON_SHOW;var e=b.systemStore.setting.showRelations;return[!0===e,-1!==e]}},{key:"showComic",get:function(){return this.comic.length?[!0,!0]:I.NON_SHOW}},{key:"showCalalog",get:function(){var e=b.systemStore.setting.showCatalog;return-1!==e&&this.filterCatalog.length?[!0===e,!0]:I.NON_SHOW}},{key:"showLike",get:function(){if(!this.like.length)return I.NON_SHOW;var e=b.systemStore.setting.showLike;return[!0===e,-1!==e]}},{key:"showBlog",get:function(){var e=b.systemStore.setting.showBlog;return-1!==e&&this.filterBlog.length?[!0===e,!0]:I.NON_SHOW}},{key:"showTopic",get:function(){var e=b.systemStore.setting.showTopic;return-1!==e&&this.filterTopic.length?[!0===e,!0]:I.NON_SHOW}},{key:"showRecent",get:function(){var e=b.systemStore.setting.showRecent;return-1!==e&&this.filterRecent.length?[!0===e,!0]:I.NON_SHOW}},{key:"locationDS",get:function(){var e=[S.TITLE_COMMENT];if(this.showEp[0]&&e.push("音乐"===this.type?S.TITLE_DISC:S.TITLE_EP),this.showTags[0]&&e.push(S.TITLE_TAGS),this.showSummary[0]&&e.push(S.TITLE_SUMMARY),this.showThumbs[0]){var t=this.state,s=t.epsThumbs,o=t.videos;e.push(S.TITLE_THUMBS+" ("+(s.length+o.length)+")")}return this.showInfo[0]&&e.push(S.TITLE_INFO),this.showGame[0]&&e.push(S.TITLE_GAME),this.showRating[0]&&e.push(S.TITLE_RATING),this.showCharacter[0]&&e.push(S.TITLE_CHARACTER),this.showStaff[0]&&e.push(S.TITLE_STAFF),this.showAnitabi[0]&&e.push(S.TITLE_ANITABI+" ("+this.state.anitabi.pointsLength+")"),this.showRelations[0]&&e.push(S.TITLE_RELATIONS+" ("+this.relations.length+")"),this.showComic[0]&&e.push(S.TITLE_COMIC+" ("+this.comic.length+")"),this.showCalalog[0]&&e.push(S.TITLE_CATALOG+" ("+this.filterCatalog.length+")"),this.showLike[0]&&e.push(S.TITLE_LIKE+" ("+this.like.length+")"),this.showBlog[0]&&e.push(S.TITLE_BLOG+" ("+this.filterBlog.length+")"),this.showTopic[0]&&e.push(S.TITLE_TOPIC+" ("+this.filterTopic.length+")"),this.showRecent[0]&&e.push(S.TITLE_RECENT+" ("+this.filterRecent.length+")"),e.push(S.TITLE_COMMENT+" ("+this.commentLength+"+)"),(0,_.freeze)(e)}}]),s}(P.default),(0,p.default)(r.prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectId"),r.prototype),(0,p.default)(r.prototype,"namespace",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"namespace"),r.prototype),(0,p.default)(r.prototype,"nsfw",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"nsfw"),r.prototype),(0,p.default)(r.prototype,"onAirCustom",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"onAirCustom"),r.prototype),(0,p.default)(r.prototype,"footerEmptyDataComponent",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"footerEmptyDataComponent"),r.prototype),(0,p.default)(r.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"url"),r.prototype),(0,p.default)(r.prototype,"userId",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"userId"),r.prototype),(0,p.default)(r.prototype,"subject",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subject"),r.prototype),(0,p.default)(r.prototype,"subjectFormHTML",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectFormHTML"),r.prototype),(0,p.default)(r.prototype,"subjectFromOSS",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectFromOSS"),r.prototype),(0,p.default)(r.prototype,"subjectComments",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectComments"),r.prototype),(0,p.default)(r.prototype,"cover",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"cover"),r.prototype),(0,p.default)(r.prototype,"collection",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"collection"),r.prototype),(0,p.default)(r.prototype,"userProgress",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"userProgress"),r.prototype),(0,p.default)(r.prototype,"type",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"type"),r.prototype),(0,p.default)(r.prototype,"subjectType",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectType"),r.prototype),(0,p.default)(r.prototype,"subjectTypeValue",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectTypeValue"),r.prototype),(0,p.default)(r.prototype,"rank",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"rank"),r.prototype),(0,p.default)(r.prototype,"vib",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"vib"),r.prototype),(0,p.default)(r.prototype,"onlinePlayActionSheetData",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"onlinePlayActionSheetData"),r.prototype),(0,p.default)(r.prototype,"action",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"action"),r.prototype),(0,p.default)(r.prototype,"userOrigins",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"userOrigins"),r.prototype),(0,p.default)(r.prototype,"actions",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"actions"),r.prototype),(0,p.default)(r.prototype,"onlineOrigins",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"onlineOrigins"),r.prototype),(0,p.default)(r.prototype,"onlineComicOrigins",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"onlineComicOrigins"),r.prototype),(0,p.default)(r.prototype,"onlineDiscOrigins",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"onlineDiscOrigins"),r.prototype),(0,p.default)(r.prototype,"onlineGameOrigins",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"onlineGameOrigins"),r.prototype),(0,p.default)(r.prototype,"isPS",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"isPS"),r.prototype),(0,p.default)(r.prototype,"animeInfo",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"animeInfo"),r.prototype),(0,p.default)(r.prototype,"animeTags",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"animeTags"),r.prototype),(0,p.default)(r.prototype,"gameInfo",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"gameInfo"),r.prototype),(0,p.default)(r.prototype,"gameTags",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"gameTags"),r.prototype),(0,p.default)(r.prototype,"mangaInfo",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"mangaInfo"),r.prototype),(0,p.default)(r.prototype,"mangaTags",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"mangaTags"),r.prototype),(0,p.default)(r.prototype,"wenkuInfo",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"wenkuInfo"),r.prototype),(0,p.default)(r.prototype,"wenkuTags",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"wenkuTags"),r.prototype),(0,p.default)(r.prototype,"source",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"source"),r.prototype),(0,p.default)(r.prototype,"filterEpsData",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"filterEpsData"),r.prototype),(0,p.default)(r.prototype,"status",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"status"),r.prototype),(0,p.default)(r.prototype,"release",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"release"),r.prototype),(0,p.default)(r.prototype,"year",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"year"),r.prototype),(0,p.default)(r.prototype,"yearAndMount",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"yearAndMount"),r.prototype),(0,p.default)(r.prototype,"end",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"end"),r.prototype),(0,p.default)(r.prototype,"yearAndMountEnd",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"yearAndMountEnd"),r.prototype),(0,p.default)(r.prototype,"artist",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"artist"),r.prototype),(0,p.default)(r.prototype,"imageWidth",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"imageWidth"),r.prototype),(0,p.default)(r.prototype,"imageHeight",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"imageHeight"),r.prototype),(0,p.default)(r.prototype,"coverPlaceholder",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"coverPlaceholder"),r.prototype),(0,p.default)(r.prototype,"jp",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"jp"),r.prototype),(0,p.default)(r.prototype,"cn",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"cn"),r.prototype),(0,p.default)(r.prototype,"rating",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"rating"),r.prototype),(0,p.default)(r.prototype,"lock",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"lock"),r.prototype),(0,p.default)(r.prototype,"subjectCollection",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectCollection"),r.prototype),(0,p.default)(r.prototype,"eps",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"eps"),r.prototype),(0,p.default)(r.prototype,"toEps",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"toEps"),r.prototype),(0,p.default)(r.prototype,"disc",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"disc"),r.prototype),(0,p.default)(r.prototype,"summary",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"summary"),r.prototype),(0,p.default)(r.prototype,"tags",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"tags"),r.prototype),(0,p.default)(r.prototype,"info",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"info"),r.prototype),(0,p.default)(r.prototype,"crt",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"crt"),r.prototype),(0,p.default)(r.prototype,"staff",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"staff"),r.prototype),(0,p.default)(r.prototype,"relations",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"relations"),r.prototype),(0,p.default)(r.prototype,"comic",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"comic"),r.prototype),(0,p.default)(r.prototype,"like",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"like"),r.prototype),(0,p.default)(r.prototype,"titleLabel",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"titleLabel"),r.prototype),(0,p.default)(r.prototype,"catalog",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"catalog"),r.prototype),(0,p.default)(r.prototype,"bilibiliSite",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"bilibiliSite"),r.prototype),(0,p.default)(r.prototype,"iqiyiSite",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"iqiyiSite"),r.prototype),(0,p.default)(r.prototype,"youkuSite",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"youkuSite"),r.prototype),(0,p.default)(r.prototype,"subjectRelations",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectRelations"),r.prototype),(0,p.default)(r.prototype,"subjectPrev",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectPrev"),r.prototype),(0,p.default)(r.prototype,"subjectAfter",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectAfter"),r.prototype),(0,p.default)(r.prototype,"subjectSeries",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectSeries"),r.prototype),(0,p.default)(r.prototype,"subjectBook",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectBook"),r.prototype),(0,p.default)(r.prototype,"subjectAnime",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectAnime"),r.prototype),(0,p.default)(r.prototype,"subjectDiff",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"subjectDiff"),r.prototype),(0,p.default)(r.prototype,"hasSeries",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"hasSeries"),r.prototype),(0,p.default)(r.prototype,"hd",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"hd"),r.prototype),(0,p.default)(r.prototype,"catalogs",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"catalogs"),r.prototype),(0,p.default)(r.prototype,"catalogIncludes",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"catalogIncludes"),r.prototype),(0,p.default)(r.prototype,"filterCatalog",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"filterCatalog"),r.prototype),(0,p.default)(r.prototype,"filterBlog",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"filterBlog"),r.prototype),(0,p.default)(r.prototype,"filterTopic",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"filterTopic"),r.prototype),(0,p.default)(r.prototype,"filterRecent",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"filterRecent"),r.prototype),(0,p.default)(r.prototype,"commentLength",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"commentLength"),r.prototype),(0,p.default)(r.prototype,"showEp",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showEp"),r.prototype),(0,p.default)(r.prototype,"showTags",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showTags"),r.prototype),(0,p.default)(r.prototype,"showSummary",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showSummary"),r.prototype),(0,p.default)(r.prototype,"showThumbs",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showThumbs"),r.prototype),(0,p.default)(r.prototype,"showInfo",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showInfo"),r.prototype),(0,p.default)(r.prototype,"showGame",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showGame"),r.prototype),(0,p.default)(r.prototype,"showRating",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showRating"),r.prototype),(0,p.default)(r.prototype,"showCharacter",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showCharacter"),r.prototype),(0,p.default)(r.prototype,"showStaff",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showStaff"),r.prototype),(0,p.default)(r.prototype,"showAnitabi",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showAnitabi"),r.prototype),(0,p.default)(r.prototype,"showRelations",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showRelations"),r.prototype),(0,p.default)(r.prototype,"showComic",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showComic"),r.prototype),(0,p.default)(r.prototype,"showCalalog",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showCalalog"),r.prototype),(0,p.default)(r.prototype,"showLike",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showLike"),r.prototype),(0,p.default)(r.prototype,"showBlog",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showBlog"),r.prototype),(0,p.default)(r.prototype,"showTopic",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showTopic"),r.prototype),(0,p.default)(r.prototype,"showRecent",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"showRecent"),r.prototype),(0,p.default)(r.prototype,"locationDS",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"locationDS"),r.prototype),r)},"./src/screens/home/subject/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.SORT_RELATION_DESC=t.NON_SHOW=t.NAMESPACE=t.INIT_RATING=t.EXCLUDE_STATE=void 0;var o=s("./src/constants/index.ts"),r=s("./src/screens/home/subject/ds.ts"),n=(t.NAMESPACE="Screen"+r.COMPONENT,t.EXCLUDE_STATE={fixed:!1,visibleBottom:0,visible:!1,disabled:!1,folder:!1,chap:"",vol:"",filterScores:[],translateResult:[],discTranslateResult:[],subject:{},comments:o.LIST_EMPTY,flip:!1,flipKey:0,flipEps:!1,rendered:o.WEB,mounted:!0});t.STATE=Object.assign({},n,{epsReverse:!1,watchedEps:"",filterEps:0,filterStatus:"",bangumiInfo:{sites:[],type:""},epsData:{_loaded:!1},epsThumbs:[],epsThumbsHeader:{},videos:[],anitabi:{litePoints:[],_loaded:!1},filterVersion:!1,_loaded:!1}),t.INIT_RATING={count:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},score:"",total:""},t.SORT_RELATION_DESC={动画:110,续集:100,前传:90,主线故事:82,剧场版:81,番外篇:80,相同世界观:79,衍生:78,书籍:70,片头曲:65,片尾曲:64,原声集:63,角色歌:62,游戏:40,三次元:30,其他:-10},t.NON_SHOW=[!1,!1]},"./src/screens/home/subject/store/fetch.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.from.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.set.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),c=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),j=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),b=s("./src/utils/bilibili/index.ts"),h=s("./src/utils/douban/index.ts"),_=s("./src/utils/fetch/index.ts"),y=s("./src/utils/kv/index.ts"),g=s("./src/utils/protobuf/index.web.ts"),v=s("./src/constants/index.ts"),x=r(s("./src/screens/home/subject/store/computed.tsx")),O=s("./src/screens/home/subject/store/ds.ts"),T=["ts"],S=["ts"];function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,l.default)(this,s)}}t.default=function(e){(0,a.default)(s,e);var t=E(s);function s(){var e,r,u,a,l,m,x,E;(0,i.default)(this,s);for(var P=arguments.length,I=new Array(P),w=0;w<P;w++)I[w]=arguments[w];return e=t.call.apply(t,[this].concat(I)),(0,p.default)((0,d.default)(e),"fetchSubject",(function(){return"large"!==e.subject._responseGroup&&(0,f.opitimize)(e.subject,60)?e.subject:j.subjectStore.fetchSubject(e.subjectId)})),(0,p.default)((0,d.default)(e),"fetchSubjectFromHTML",(0,c.default)(o.mark((function t(){var s,r,n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.subjectStore.fetchSubjectFromHTML(e.subjectId);case 2:return s=t.sent,r=s.watchedEps,n=s.book,e.setState({watchedEps:r||"0",chap:n.chap||"0",vol:n.vol||"0"}),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))),(0,p.default)((0,d.default)(e),"fetchSubjectFromOSS",(0,c.default)(o.mark((function t(){var s,r,c,u;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.subjectFormHTML._loaded){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,y.get)("subject_"+e.subjectId);case 5:if(s=t.sent){t.next=9;break}return e.updateSubjectThirdParty(),t.abrupt("return");case 9:r=s.ts,c=(0,n.default)(s,T),u=(0,f.getTimestamp)(),"object"!=typeof c||Array.isArray(c)||e.setState({subject:Object.assign({},c,{_loaded:u})}),u-r>=v.D7&&e.updateSubjectThirdParty(),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(2);case 17:case"end":return t.stop()}}),t,null,[[2,15]])})))),(0,p.default)((0,d.default)(e),"fetchCommentsFromOSS",(0,c.default)(o.mark((function t(){var s,r,c,u;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.subjectComments._loaded){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,y.get)("comments_"+e.subjectId);case 5:if(s=t.sent){t.next=9;break}return e.updateCommentsThirdParty(),t.abrupt("return");case 9:r=s.ts,c=(0,n.default)(s,S),u=(0,f.getTimestamp)(),"object"==typeof c&&e.setState({comments:c}),u-r>=v.D&&e.updateCommentsThirdParty(),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(2);case 17:case"end":return t.stop()}}),t,null,[[2,15]])})))),(0,p.default)((0,d.default)(e),"fetchThirdParty",(r=(0,c.default)(o.mark((function t(s){var r,n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.decode)("bangumi-data");case 2:return(r=(0,g.get)("bangumi-data").find((function(t){return t.id==e.subjectId||t.j===(0,f.HTMLDecode)(s.name)||t.c===(0,f.HTMLDecode)(s.name)})))&&(n=(0,f.unzipBangumiData)(r),e.setState({bangumiInfo:{sites:n.sites,type:n.type}})),t.next=6,e.getThirdParty();case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:if(!v.WEB){t.next=11;break}return t.abrupt("return");case 11:r&&(0,f.postTask)((function(){e.fetchEpsThumbs(n)}),0),!r&&"动画"===e.type||"三次元"===e.type?e.fetchMovieFromDouban(e.cn,e.jp):"游戏"===e.type?e.fetchGameFromDouban(e.cn,e.jp):"音乐"===e.type&&(0,f.postTask)((function(){e.fetchMVFromBilibili(e.cn,e.jp,e.artist)}),2400);case 13:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"fetchCollection",(function(){return j.collectionStore.fetchCollection(e.subjectId)})),(0,p.default)((0,d.default)(e),"fetchSubjectComments",(u=(0,c.default)(o.mark((function t(s,r){var n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.subjectStore.fetchSubjectComments({subjectId:e.subjectId,interest_type:e.state.filterStatus,version:e.state.filterVersion},s,r);case 2:return n=t.sent,e.updateCommentsThirdParty(),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(e,t){return u.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"_fetchTrackUsersInfo",!1),(0,p.default)((0,d.default)(e),"fetchTrackUsersInfo",(a=(0,c.default)(o.mark((function t(s){var r,n,c;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._fetchTrackUsersInfo&&s.length){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,j.usersStore.init("usersInfo");case 4:r=0;case 5:if(!(r<s.length)){t.next=16;break}if(n=s[r],j.usersStore.usersInfo(n)._loaded){t.next=13;break}return t.next=11,j.usersStore.fetchUsers({userId:n});case 11:(c=t.sent).userId&&j.usersStore.updateUsersInfo({avatar:c.avatar,userId:c.userId,userName:c.userName});case 13:r+=1,t.next=5;break;case 16:e._fetchTrackUsersInfo=!0;case 17:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"fetchTrackComments",(function(){if(!e.subjectTypeValue)return!1;var t=j.systemStore.setting["comment"+(0,f.titleCase)(e.subjectTypeValue)];if(null==t||!t.length)return!1;var s=[],o=(0,f.getTimestamp)();return t.forEach((function(t){var r=j.collectionStore.usersSubjectCollection(t,e.subjectId);(!r._loaded||o-Number(r._loaded)>=v.H)&&s.push((function(){return j.collectionStore.fetchUsersCollection(t,e.subjectId)}))})),(0,f.postTask)((function(){e.fetchTrackUsersInfo(t)}),0),(0,f.queue)(s,1)})),(0,p.default)((0,d.default)(e),"fetchEpsData",(0,c.default)(o.mark((function t(){var s,r,n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.WEB&&"动画"===e.type&&!e.nsfw){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,(0,_.xhrCustom)({url:(0,v.CDN_EPS)(e.subjectId)});case 5:s=t.sent,r=s._response,n={_loaded:(0,f.getTimestamp)()},v.SITES.forEach((function(e){return n[e]={}})),JSON.parse(r).eps.forEach((function(e,t){e.sites.forEach((function(e){v.SITES.includes(e.site)&&(n[e.site][t]=e.url)}))})),e.setState({epsData:n}),e.save(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.error(O.NAMESPACE,"fetchEpsData",t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))),(0,p.default)((0,d.default)(e),"fetchPersons",(function(){return j.monoStore.fetchPersons({subjectId:e.subjectId})})),(0,p.default)((0,d.default)(e),"fetchEpsThumbs",(l=(0,c.default)(o.mark((function t(s){var r,n,c,u,i,d,a,l,m,p,j,b,h,y,g,x,O,T,S,E,P,I,w,N,M,k;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.WEB){t.next=2;break}return t.abrupt("return",!1);case 2:if(!(e.state.epsThumbs.length>=12)){t.next=4;break}return t.abrupt("return",!1);case 4:return t.prev=4,c=null==s||null==(r=s.titleTranslate)||null==(n=r["zh-Hans"])?void 0:n[0],u=s.title,t.next=9,e.fetchMovieFromDouban(c,u);case 9:if(!(e.state.epsThumbs.length<12&&e.bilibiliSite.id)){t.next=24;break}return i=(0,f.getBangumiUrl)(e.bilibiliSite),t.next=13,(0,_.xhrCustom)({url:i});case 13:if(d=t.sent,a=d._response,!(l=a.match(/"season_id":(\d+)/))){t.next=24;break}return p=l[1],t.next=20,(0,_.xhrCustom)({url:"https://api.bilibili.com/pgc/web/season/section?season_id="+p});case 20:j=t.sent,b=j._response,h=JSON.parse(b),y=h.message,g=h.result,"success"===y&&null!=g&&null!=(m=g.main_section)&&m.episodes&&(e.setState({epsThumbs:Array.from(new Set(g.main_section.episodes.map((function(e){return e.cover.replace("http://","https://")+"@192w_120h_1c.jpg"})))),epsThumbsHeader:{Referer:"https://www.bilibili.com/"}}),e.save(),e.updateThirdParty());case 24:if(!(e.state.epsThumbs.length<12&&e.youkuSite.id)){t.next=40;break}return x=(0,f.getBangumiUrl)(e.youkuSite),t.next=28,(0,_.xhrCustom)({url:x});case 28:if(O=t.sent,T=O._response,!(S=T.match(/showid:"(\d+)"/))){t.next=40;break}return E=S[1],t.next=35,(0,_.xhrCustom)({url:"https://list.youku.com/show/module?id="+E+"&tab=point&callback=jQuery"});case 35:P=t.sent,I=P._response,e.setState({epsThumbs:Array.from(new Set((decodeURIComponent(I).replace(/\\\/>/g,"/>").replace(/(\\"|"\\)/g,'"').match(/<img.+?src=('|")?([^'"]+)('|")?(?:\s+|>)/gim)||[]).map((function(e){var t=e.match(/src="(.+?)"/);return t?t[1].replace(/\\\//g,"/").replace("http://","https://"):""})).filter((function(e){return!!e})))),epsThumbsHeader:{Referer:"https://list.youku.com/"}}),e.save(),e.updateThirdParty();case 40:if(!(e.state.epsThumbs.length<12&&e.iqiyiSite.id)){t.next=48;break}return w=(0,f.getBangumiUrl)(e.iqiyiSite),t.next=44,(0,_.xhrCustom)({url:w});case 44:N=t.sent,M=N._response,(k=(0,f.HTMLTrim)(M,!0).match(/data-jpg-img="(.+?)"/g))&&(e.setState({epsThumbs:Array.from(new Set(k.map((function(e){return"https:"+e.replace(/(data-jpg-img="|")/g,"")})).filter((function(e,t){return!!t})))),epsThumbsHeader:{Referer:"https://www.iqiyi.com/"}}),e.save(),e.updateThirdParty());case 48:t.next=53;break;case 50:t.prev=50,t.t0=t.catch(4),console.error("Subject","fetchEpsThumbs",t.t0);case 53:case"end":return t.stop()}}),t,null,[[4,50]])}))),function(e){return l.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"fetchMovieFromDouban",(m=(0,c.default)(o.mark((function t(s,r){var n,c,u,i,d;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.WEB&&!e.nsfw){t.next=2;break}return t.abrupt("return",!1);case 2:if(!(n=s||r)){t.next=18;break}return t.next=6,(0,h.search)(n);case 6:return c=t.sent,u=(0,h.matchMovie)(n,c,r,e.year),t.next=10,(0,h.getTrailer)(u);case 10:return(i=t.sent).data.length&&e.setState({videos:i.data,epsThumbsHeader:{Referer:i.referer}}),t.next=14,(0,h.getPreview)(u);case 14:(d=t.sent).data.length&&e.setState({epsThumbs:d.data.slice().reverse(),epsThumbsHeader:{Referer:d.referer}}),e.save(),e.updateThirdParty();case 18:case"end":return t.stop()}}),t)}))),function(e,t){return m.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"fetchGameFromDouban",(x=(0,c.default)(o.mark((function t(s,r){var n,c,u,i,d;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.WEB&&!e.nsfw){t.next=2;break}return t.abrupt("return",!1);case 2:if(!(n=s||r)){t.next=18;break}return t.next=6,(0,h.search)(n,"game");case 6:return c=t.sent,u=(0,h.matchGame)(n,c),t.next=10,(0,h.getVideo)(u,"game");case 10:return(i=t.sent).data.length&&e.setState({videos:i.data,epsThumbsHeader:{Referer:i.referer}}),t.next=14,(0,h.getPreview)(u,"game");case 14:(d=t.sent).data.length&&e.setState({epsThumbs:d.data,epsThumbsHeader:{Referer:d.referer}}),e.save(),e.updateThirdParty();case 18:case"end":return t.stop()}}),t)}))),function(e,t){return x.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"fetchMVFromBilibili",(E=(0,c.default)(o.mark((function t(s,r,n){var c;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.WEB){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,(0,b.search)(s||r,n);case 4:(c=t.sent).length&&(e.setState({videos:c,epsThumbsHeader:{Referer:"https://m.bilibili.com"}}),e.save(),e.updateThirdParty());case 6:case"end":return t.stop()}}),t)}))),function(e,t,s){return E.apply(this,arguments)})),(0,p.default)((0,d.default)(e),"getThirdParty",(0,c.default)(o.mark((function t(){var s,r,n,c,u,i,d,a;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,y.get)("douban_"+e.subjectId);case 3:if(s=t.sent){t.next=6;break}return t.abrupt("return",!0);case 6:if(r=s.ts,n=s.videos,c=void 0===n?[]:n,u=s.epsThumbs,i=void 0===u?[]:u,d=s.epsThumbsHeader,a=void 0===d?{}:d,!(c.length+i.length<=2||(0,f.getTimestamp)()-r>=v.D7||r<(0,f.getTimestamp)("2023-07-14 14:00:00"))){t.next=9;break}return t.abrupt("return",!0);case 9:return e.setState({videos:c,epsThumbs:i,epsThumbsHeader:a}),e.save(),t.abrupt("return",!1);case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",!0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))),(0,p.default)((0,d.default)(e),"updateSubjectThirdParty",(function(){(0,f.postTask)((function(){var t,s=e.subjectFormHTML,o=s._loaded,r=s.formhash;o&&r&&(0,y.update)("subject_"+e.subjectId,Object.assign({},(0,f.omit)(e.subjectFormHTML,["type","watchedEps","friend","who","formhash","_loaded"]),{id:e.subjectId,type:e.subject.type,name:e.jp,name_cn:e.cn,image:null==(t=e.subject.images)?void 0:t.common,eps:e.eps,collection:e.subjectCollection,summary:e.summary,rating:e.rating,rank:e.subject.rank||"",character:e.crt,staff:e.staff,titleLabel:e.titleLabel}))}),1e4)})),(0,p.default)((0,d.default)(e),"updateCommentsThirdParty",(function(){""===e.state.filterStatus&&(0,f.postTask)((function(){var t,s=e.subjectComments;if(null==s||null==(t=s.list)||!t.length||null==s||!s._loaded||null!=s&&s.version||null!=s&&s._reverse)return!1;(0,y.update)("comments_"+e.subjectId,{list:s.list.slice(0,40),pagination:{page:1,pageTotal:1},_loaded:s._loaded,_reverse:!1})}),1e4)})),(0,p.default)((0,d.default)(e),"updateThirdParty",(function(){(0,f.postTask)((function(){(0,y.update)("douban_"+e.subjectId,{videos:e.state.videos,epsThumbs:e.state.epsThumbs,epsThumbsHeader:e.state.epsThumbsHeader})}),0)})),(0,p.default)((0,d.default)(e),"fetchOTA",(function(){var t,s;"动画"!==e.type?"游戏"!==e.type||null!=(t=e.gameInfo)&&t.i&&j.otaStore.fetchGame(e.gameInfo.i):null!=(s=e.animeInfo)&&s.i&&j.otaStore.fetchAnime(e.animeInfo.i)})),(0,p.default)((0,d.default)(e),"fetchAnitabi",(0,c.default)(o.mark((function t(){var s,r,n,c,u,i,d,a,l,m;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("动画"===e.type&&!e.nsfw){t.next=2;break}return t.abrupt("return",!1);case 2:if(-1!==(s=j.systemStore.setting.showAnitabi)&&s){t.next=5;break}return t.abrupt("return",!1);case 5:if(!((r=e.state.anitabi._loaded)&&(0,f.getTimestamp)()-Number(r)<=v.D)){t.next=8;break}return t.abrupt("return",!0);case 8:return n="anitabi_"+e.subjectId,t.prev=9,t.next=12,(0,y.get)(n);case 12:if(!(null!=(c=t.sent)&&c._loaded&&(0,f.getTimestamp)()-Number(null==c?void 0:c._loaded)<=v.D)){t.next=16;break}return e.setState({anitabi:c}),t.abrupt("return",!0);case 16:t.next=20;break;case 18:t.prev=18,t.t0=t.catch(9);case 20:return u="fetchAnitabi|"+e.subjectId,t.next=23,(0,f.getStorage)(u);case 23:if(!t.sent){t.next=25;break}return t.abrupt("return",!1);case 25:return t.prev=25,t.next=28,(0,_.xhrCustom)({url:(0,v.API_ANITABI)(e.subjectId)});case 28:return d=t.sent,a=d._response,null!=(l=a.length?JSON.parse(a):{})&&null!=(i=l.litePoints)&&i.length?m=Object.assign({},l,{_loaded:(0,f.getTimestamp)()}):(m={_loaded:(0,f.getTimestamp)()},e.setState({anitabi:{_loaded:(0,f.getTimestamp)()}})),e.setState({anitabi:m}),e.save(),(0,f.postTask)((function(){(0,y.update)(n,m)}),0),t.abrupt("return",!0);case 38:t.prev=38,t.t1=t.catch(25),(0,f.setStorage)(u,!0);case 41:return t.abrupt("return",!1);case 42:case"end":return t.stop()}}),t,null,[[9,18],[25,38]])})))),(0,p.default)((0,d.default)(e),"fetchVIB",(0,c.default)(o.mark((function t(){var s,r;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!j.systemStore.setting.hideScore&&!0===j.systemStore.setting.showRating){t.next=2;break}return t.abrupt("return",!1);case 2:if(!(0,f.opitimize)(e.vib,v.H12)){t.next=4;break}return t.abrupt("return",e.vib);case 4:return t.prev=4,s="vib_"+e.subjectId,t.next=8,(0,y.get)(s);case 8:if(!(null!=(r=t.sent)&&r._loaded&&(0,f.getTimestamp)()-Number(null==r?void 0:r._loaded)<=v.D)){t.next=13;break}return j.subjectStore.updateVIB(e.subjectId,r),null!=r&&r.avg||(0,f.postTask)((function(){j.subjectStore.fetchVIB(e.subjectId)}),0),t.abrupt("return",!0);case 13:return t.next=15,j.subjectStore.fetchVIB(e.subjectId);case 15:if(!v.WEB){t.next=17;break}return t.abrupt("return",!0);case 17:if("动画"!==e.type){t.next=22;break}return t.next=20,j.subjectStore.fetchMAL(e.subjectId,e.jp||e.cn);case 20:return t.next=22,j.subjectStore.fetchAniDB(e.subjectId,e.jp||e.cn);case 22:return e.vib._loaded&&(0,y.update)(s,e.vib),t.abrupt("return",!0);case 26:t.prev=26,t.t0=t.catch(4);case 28:return t.abrupt("return",!1);case 29:case"end":return t.stop()}}),t,null,[[4,26]])})))),e}return(0,u.default)(s)}(x.default)},"./src/screens/home/subject/store/index.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),u=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),f=s("./src/utils/fetch/index.ts"),b=s("./src/constants/index.ts"),h=r(s("./src/screens/home/subject/store/action.ts")),_=s("./src/screens/home/subject/store/ds.ts");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,a.default)(this,s)}}var g=function(e){(0,d.default)(s,e);var t=y(s);function s(){var e;(0,u.default)(this,s);for(var r=arguments.length,c=new Array(r),d=0;d<r;d++)c[d]=arguments[d];return e=t.call.apply(t,[this].concat(c)),(0,m.default)((0,i.default)(e),"_initDone",!1),(0,m.default)((0,i.default)(e),"init",(0,n.default)(o.mark((function t(){var s,r,n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=(0,j.getTimestamp)(),r=!e._initDone||!e.state._loaded||s-Number(e.state._loaded)>300,n=r?s:e.state._loaded,t.prev=3,t.t0=e,t.t1=Object,t.t2={},t.next=9,e.getStorage(e.namespace);case 9:if(t.t3=t.sent,t.t4=_.EXCLUDE_STATE,t.t5={_loaded:n},t.t6=t.t1.assign.call(t.t1,t.t2,t.t3,t.t4,t.t5),t.t0.setState.call(t.t0,t.t6),e.fetchSubjectFromOSS(),r){t.next=17;break}return t.abrupt("return",!0);case 17:return p.collectionStore.fetchCollectionStatusQueue([e.subjectId]),t.abrupt("return",e.onHeaderRefresh());case 21:t.prev=21,t.t7=t.catch(3);case 23:return e.setState(Object.assign({},_.EXCLUDE_STATE,{_loaded:n})),t.abrupt("return",!0);case 25:case"end":return t.stop()}}),t,null,[[3,21]])})))),(0,m.default)((0,i.default)(e),"onHeaderRefresh",(0,n.default)(o.mark((function t(){var s;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,f.queue)([function(){if(e.state.mounted&&!b.SHARE_MODE)return e.fetchCollection()},function(){if(e.state.mounted&&!b.SHARE_MODE)return p.userStore.isStorybookLogin?p.userStore.fetchUserProgressV0(e.subjectId):p.userStore.fetchUserProgress(e.subjectId)}],1),e.state.mounted){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.fetchSubject();case 5:return s=t.sent,(0,f.queue)([function(){if(e.state.mounted)return e.fetchOTA()},function(){if(e.state.mounted)return e.fetchThirdParty(s)},function(){if(e.state.mounted)return e.fetchAnitabi()},function(){if(e.state.mounted)return b.WEB?e.fetchCommentsFromOSS():void(0,j.postTask)((function(){e.state.mounted&&e.fetchCommentsFromOSS()}),6400)},function(){if(e.state.mounted)return e.fetchTrackComments()},function(){if(e.state.mounted)return e.fetchSubjectComments(!0)},function(){if(e.state.mounted)return e.fetchSubjectFromHTML()},function(){if(e.state.mounted)return e.setRendered()},function(){if(e.state.mounted)return e.fetchVIB()},function(){if(e.state.mounted)return e.fetchEpsData()},function(){var t;if(e.state.mounted)return(null==(t=e.subject.eps)?void 0:t.length)>=1e3?p.subjectStore.fetchSubjectEpV2(e.subjectId):void 0},function(){if(e.state.mounted)return 404===(null==s?void 0:s.code)?e.fetchPersons():void 0},function(){if(e.state.mounted)return null!=s&&s.v0?p.rakuenStore.fetchReviews(e.subjectId,!0):void 0},function(){if(e.state.mounted)return null!=s&&s.v0?p.rakuenStore.fetchBoard({subjectId:e.subjectId}):void 0},function(){e.state.mounted&&(e._initDone=!0)}],2),t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})))),e}return(0,c.default)(s)}(h.default);t.default=g},"./src/screens/home/subject/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),n=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=s("./node_modules/mobx/dist/mobx.esm.js"),m=o(s("./src/utils/store/index.ts")),p=s("./src/screens/home/subject/store/ds.ts");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,i.default)(this,s)}}t.default=function(e){(0,u.default)(s,e);var t=j(s);function s(){var e;(0,n.default)(this,s);for(var o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r)),(0,a.default)((0,c.default)(e),"params",void 0),(0,a.default)((0,c.default)(e),"state",(0,l.observable)(p.STATE)),e}return(0,r.default)(s)}(m.default)},"./src/utils/bilibili/index.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.some.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.search=function(e,t){return m.apply(this,arguments)};var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=s("./src/utils/fetch/index.ts"),u=s("./src/utils/html/index.ts"),i=s("./src/utils/thirdParty/cn-char/index.ts"),d=s("./src/utils/utils/index.ts"),a=function(e){return"https://search.bilibili.com/all?keyword="+e},l=/ORIGINAL|SOUNDTRACK|SOUNDTRACKS|SOUND|TRACKS|TRACK|OST|CD|オリジナルサウンドトラック|剧场版|音乐集|游戏|原声集/g;function m(){return(m=(0,n.default)(o.mark((function e(t,s){var r,n,m,p;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t).length<=10&&s&&s.length<=6&&(r+=" "+s),e.next=4,(0,c.xhrCustom)({url:a(encodeURIComponent(r))});case 4:return n=e.sent,m=n._response,e.prev=6,p=(0,i.t2s)(t.toLocaleUpperCase()).replace(l,"").trim(),e.abrupt("return",(0,u.cheerio)((0,u.htmlMatch)(m,'<div class="search-content','<div id="biliMainFooter"'))(".bili-video-card").map((function(e,t){var s=(0,u.cheerio)(t);return{result_type:"video",title:s.find("h3").text().trim(),cover:"https:"+(s.find("picture img").attr("src")||""),href:"https:"+(s.find("a").attr("href")||"")}})).get().filter((function(e){var t=e.title.toLocaleUpperCase().replace(l,"").trim();if((0,d.similar)(t,p)>=.7||t.includes(p))return!0;if(p.includes("/")&&p.split("/").some((function(e){return t.includes(e)})))return!0;if(p.includes("／")&&p.split("／").some((function(e){return t.includes(e)})))return!0;return!1})).filter((function(e,t){return t<=6})));case 12:e.prev=12,e.t0=e.catch(6),console.error(e.t0);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}},"./src/utils/douban/index.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.getPreview=function(e,t){return h.apply(this,arguments)},t.getTrailer=function(e){return _.apply(this,arguments)},t.getVideo=function(e,t){return y.apply(this,arguments)},t.matchGame=function(e,t){var s=g(e),o=!1;return t.forEach((function(e){o||(0,c.similar)(e.title,s)<.7&&!e.title.includes(s)||(o=e.id)})),t.forEach((function(e){o||e.desc.includes(s)&&(o=e.id)})),o},t.matchMovie=function(e,t,s,o){var r=g(e),n=!1;return t.forEach((function(e){e.name&&e.name===s&&(n=e.id)})),t.forEach((function(t){if(!n){if((0,c.similar)(t.title,r)<.7){if(!t.desc.includes("原名:"))return;if(o&&t.year&&o!=t.year)return;var u=t.desc.split(" / ")[0].replace("原名:","");if((0,c.similar)(u,s||e)<.7)return}n=t.id}})),n},t.search=function(e,t){return b.apply(this,arguments)};var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),c=s("./src/utils/utils/index.ts"),u=s("./src/utils/fetch/index.ts"),i=s("./src/utils/html/index.ts"),d="https://www.douban.com",a="https://movie.douban.com",l=function(e,t){return d+"/search?cat="+("game"===t?3114:1002)+"&q="+e},m=function(e){return a+"/subject/"+e},p=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"o",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"game"===t?"https://www.douban.com/game/"+e+"/photos/?type=1&start=0&sortby=hot":m(e)+"/photos?type=S&start="+o+"&sortby=time&size=a&subtype="+s},j=function(e){return d+"/"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"subject")+"/"+e+"/videos"},f=function(e){return a+"/subject/"+e+"/trailer"};function b(){return(b=(0,n.default)(o.mark((function e(t,s){var r,n,d;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.xhrCustom)({url:l(t,s)});case 2:return r=e.sent,n=r._response,d=(0,i.cheerio)(n),e.prev=5,e.abrupt("return",(d(".result .content").map((function(e,t){var s,o,r,n=(0,i.cheerio)(t),c=n.find("h3 a"),u=g(n.find(".subject-cast").text().trim())||"";return{id:null==(s=c.attr("onclick").match(/sid: (\d+)/))?void 0:s[1],title:g(c.text().trim()),name:(null==(o=u.match(/原名:(.*?)\//))?void 0:o[1])||"",desc:g(n.find("p").text().trim()),year:(null==(r=u.match(/(\d{4})$/))?void 0:r[1])||""}})).get()||[]).filter((function(e){return e.id})).sort((function(e,s){return(0,c.desc)((0,c.similar)(t,e.title),(0,c.similar)(t,s.title))})));case 9:return e.prev=9,e.t0=e.catch(5),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[5,9]])})))).apply(this,arguments)}function h(){return h=(0,n.default)(o.mark((function e(t,s){var r,n,c,d,a,l,j,f,b,h,_,y,g=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>2&&void 0!==g[2]?g[2]:12,t){e.next=3;break}return e.abrupt("return",{data:[],referer:""});case 3:return n="game"===s,e.next=6,(0,u.xhrCustom)({url:p(t,s,n?void 0:"o")});case 6:if(d=e.sent,c=d._response,!n){e.next=11;break}e.next=26;break;case 11:if(a=(0,i.cheerio)(c)(".cover img"),!((l=a.length)>0&&l<12||0===l)){e.next=17;break}return e.next=15,(0,u.xhrCustom)({url:p(t,s,"a")});case 15:j=e.sent,c=j._response;case 17:if(0===l){e.next=26;break}if(f=c.match(/<span class="count">\(共(\d+)张\)<\/span>/),b=f?Number(f[1]):0,!(h=b>=100?b-50:b>=30?b-30:0)){e.next=26;break}return e.next=24,(0,u.xhrCustom)({url:p(t,s,"a",h)});case 24:_=e.sent,c=_._response;case 26:return y=(0,i.cheerio)(c),e.abrupt("return",{data:(y(n?".pholist img":".cover img").map((function(e,t){var s=(0,i.cheerio)(t).attr("src").replace("http://","https://");return n&&(s=s.replace("/photo/thumb/","/photo/photo/")),s})).get()||[]).filter((function(e,t){return t<r})),referer:m(t)});case 28:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function _(){return _=(0,n.default)(o.mark((function e(t){var s,r,n,c,d,a=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.length>1&&void 0!==a[1]?a[1]:2,t){e.next=3;break}return e.abrupt("return",{data:[],referer:""});case 3:return r=f(t),e.next=6,(0,u.xhrCustom)({url:r});case 6:return n=e.sent,c=n._response,d=(0,i.cheerio)(c),e.abrupt("return",{data:(d(".pr-video").map((function(e,t){var s=(0,i.cheerio)(t);return{cover:s.find("img").attr("src").replace("http://","https://"),title:s.text().trim(),href:s.attr("href")||""}})).get()||[]).filter((function(e,t){return t<s})),referer:r});case 10:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function y(){return y=(0,n.default)(o.mark((function e(t,s){var r,n,a,l,m,p,f,b,h,_,y=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>2&&void 0!==y[2]?y[2]:3,t){e.next=3;break}return e.abrupt("return",{data:[],referer:""});case 3:return n=j(t,s),e.next=6,(0,u.xhrCustom)({url:n});case 6:a=e.sent,l=a._response,m=(0,i.cheerio)(l),p=(m(".video-list li").map((function(e,t){var s,o=(0,i.cheerio)(t),r=o.find("p a");return{cover:o.find("img").attr("src").replace("http://","https://"),title:(null==(s=r.text().trim().split("_哔哩哔哩"))?void 0:s[0])||"",href:r.attr("href")||"",src:""}})).get()||[]).filter((function(e,t){return t<3})),f=0;case 11:if(!(f<p.length)){e.next=23;break}return e.next=14,(0,u.xhrCustom)({url:""+d+p[f].href});case 14:return b=e.sent,h=b._response,e.next=18,(0,c.sleep)(800);case 18:(_=(0,i.cheerio)(h)(".video-player-fallback").attr("href")||"").includes("www.bilibili.com")&&(p[f].src=_);case 20:f+=1,e.next=11;break;case 23:return e.abrupt("return",{data:p.filter((function(e){return e.src})).filter((function(e,t){return t<r})),referer:n});case 24:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function g(e){return String(e).replace(/ |(&amp;)|-|：|《|》|（|）|“|”|，|。|之/g,"")}},"./node_modules/core-js/modules/es.string.small.js":(e,t,s)=>{"use strict";var o=s("./node_modules/core-js/internals/export.js"),r=s("./node_modules/core-js/internals/create-html.js");o({target:"String",proto:!0,forced:s("./node_modules/core-js/internals/string-html-forced.js")("small")},{small:function(){return r(this,"small","","")}})}}]);