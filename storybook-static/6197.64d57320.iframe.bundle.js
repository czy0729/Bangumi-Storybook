(self.webpackChunkweb=self.webpackChunkweb||[]).push([[6197],{"./src/screens/tinygrail/rich/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/tinygrail/rich/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Component")},"./src/screens/tinygrail/rich/component/item/avatar/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),i=t("./src/components/index.ts"),o=t("./src/stores/index.ts"),a=t("./src/utils/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/utils/fetch/index.ts"),c=t("./src/screens/tinygrail/rich/component/item/avatar/styles.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.avatar,r=e.nickname,d=e.userId,m=e.lastActiveDate,p=s.navigation,f=(0,c.memoStyles)(),h=(0,a.getTimestamp)(m.replace("T"," "));return(0,u.jsx)(n.default,{style:o._.mt.md,children:(0,u.jsx)(i.UserStatus,{style:f.userStatus,last:h,children:(0,u.jsx)(i.Avatar,{src:(0,a.tinygrailOSS)(t),size:36,borderColor:"transparent",skeletonType:"tinygrail",name:r,onPress:function(){(0,l.t)("番市首富.跳转",{to:"Zone",userId:d}),p.push("Zone",{userId:d,from:"tinygrail"})}})})})}))},"./src/screens/tinygrail/rich/component/item/avatar/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{userStatus:{backgroundColor:r._.colorTinygrailContainer}}}))},"./src/screens/tinygrail/rich/component/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/tinygrail/rich/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Item")},"./src/screens/tinygrail/rich/component/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),i=t("./src/components/index.ts"),o=t("./src/stores/index.ts"),a=t("./src/utils/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/utils/fetch/index.ts"),c=t("./src/screens/tinygrail/_/utils.ts"),u=r(t("./src/screens/tinygrail/rich/component/item/avatar/index.tsx")),m=t("./src/screens/tinygrail/rich/component/item/ds.ts"),p=t("./src/screens/tinygrail/rich/component/item/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t,r=e.index,d=e.title,m=e.page,h=e.limit,y=e.avatar,j=e.userId,x=e.nickname,_=e.total,g=e.share,b=e.assets,v=e.principal,T=e.lastActiveDate,O=e.lastIndex,S=e.state,C=s.navigation,P=(0,p.memoStyles)(),N=(0,a.getTimestamp)(T.replace("T"," ")),R=(0,c.decimal)(Math.abs(_)),M=(0,c.decimal)(Math.abs(b)),E=(0,c.decimal)(Math.abs(g)),I=r+1+(m-1)*h,k="";if(0===O)k="new",t="warning";else{var A=O-I;A<0?(k=A,t="ask"):A>0&&(k="+"+A,t="bid")}var w="",B="";if("股息"===d)w="总值"+M+" / 流动资金"+R,B=E;else if("余额"===d)w="总值"+M+" / 股息"+E,B=R;else if("初始"===d){w="总值"+M+" / 股息"+E+" / 流动资金"+R,B=(0,c.decimal)(Math.abs(v))}else w="周股息"+E+" / 流动资金"+R+" / "+(0,a.lastDate)(N),B=M;return(0,f.jsx)(n.default,{style:P.container,children:(0,f.jsxs)(i.Flex,{align:"start",children:[(0,f.jsx)(u.default,{avatar:y,nickname:x,userId:j,lastActiveDate:T}),(0,f.jsx)(i.Flex.Item,{style:P.wrap,children:(0,f.jsx)(i.Flex,{align:"start",children:(0,f.jsx)(i.Flex.Item,{style:o._.mr.sm,children:(0,f.jsx)(i.Touchable,{style:P.item,onPress:function(){(0,l.t)("番市首富.跳转",{to:"TinygrailTree",userId:j}),C.push("TinygrailTree",{userName:j,name:x})},children:(0,f.jsxs)(i.Flex,{children:[(0,f.jsxs)(i.Flex.Item,{children:[(0,f.jsxs)(i.Flex,{children:[(0,f.jsx)(i.Text,{style:P.rank,size:12,bold:!0,align:"center",children:I}),(0,f.jsxs)(i.Text,{type:666===S?"ask":"tinygrailPlain",bold:!0,children:[x,!!k&&(0,f.jsxs)(i.Text,{type:t,size:15,children:[" ",k]})]})]}),(0,f.jsx)(i.Text,{style:o._.mt.xs,type:"tinygrailText",size:12,lineHeight:13,children:w})]}),(0,f.jsx)(i.Text,{style:o._.ml.sm,type:"tinygrailPlain",children:B}),(0,f.jsx)(i.Iconfont,{style:o._.mr._sm,name:"md-navigate-next",color:o._.colorTinygrailText})]})})})})})]})})}),m.COMPONENT)},"./src/screens/tinygrail/rich/component/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{container:{paddingLeft:r._.wind,backgroundColor:r._.colorTinygrailContainer},wrap:{paddingRight:r._.wind-r._._wind},item:{paddingVertical:r._.md,paddingHorizontal:r._.sm,borderRadius:r._.radiusXs,overflow:"hidden"},bonus:{position:"absolute",zIndex:1,top:10,right:2,width:18,height:18,borderRadius:9,backgroundColor:r._.colorWarning,overflow:"hidden"},rank:{minWidth:20,marginRight:6,color:r._.__colorPlain__,textShadowOffset:{width:1,height:1},textShadowRadius:1,textShadowColor:"rgba(0, 0, 0, 0.48)",backgroundColor:"#ffc107",borderRadius:4,overflow:"hidden"},amount:{marginRight:-r._.xs,marginLeft:r._.md}}}))},"./src/screens/tinygrail/rich/component/list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/tinygrail/rich/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"List")},"./src/screens/tinygrail/rich/component/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.parse-int.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.object.assign.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=r(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),i=(r(t("./node_modules/react/index.js")),t("./node_modules/mobx/dist/mobx.esm.js")),o=t("./src/components/index.ts"),a=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/screens/tinygrail/styles.ts"),c=t("./src/screens/tinygrail/rich/ds.ts"),u=r(t("./src/screens/tinygrail/rich/component/item/index.tsx")),m=t("./src/screens/tinygrail/rich/component/list/ds.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.id,r=e.title,d=void 0===r?"全部":r,m=s.$,f=m.rich(t);if(!f._loaded)return(0,p.jsx)(o.Loading,{style:a._.container.flex,color:a._.colorTinygrailText});var h=f;d===c.TABS[1].title?(h=(0,i.toJS)(f)).list=h.list.slice().sort((function(e,s){return parseInt(s.share)-parseInt(e.share)})):d===c.TABS[2].title?(h=(0,i.toJS)(f)).list=h.list.slice().sort((function(e,s){return parseInt(s.total)-parseInt(e.total)})):d===c.TABS[3].title&&((h=(0,i.toJS)(f)).list=h.list.slice().sort((function(e,s){return parseInt(s.principal)-parseInt(e.principal)})));var y=t.split("/"),j=(0,n.default)(y,2),x=j[0],_=j[1];return(0,p.jsx)(o.ListView,{style:a._.container.flex,contentContainerStyle:a._.container.bottom,keyExtractor:function(e){return String(null==e?void 0:e.userId)},refreshControlProps:l.refreshControlProps,footerTextType:"tinygrailText",data:h,windowSize:6,initialNumToRender:24,maxToRenderPerBatch:24,updateCellsBatchingPeriod:24,lazy:24,scrollToTop:c.TABS[m.state.page].title===d,renderItem:function(e){var s=e.item,t=e.index;return(0,p.jsx)(u.default,Object.assign({index:t,title:d,page:parseInt(x),limit:parseInt(_)},s))},onHeaderRefresh:function(){return m.fetchRich(t)}})}),m.COMPONENT)},"./src/screens/tinygrail/rich/component/tabs/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/tinygrail/rich/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Tabs")},"./src/screens/tinygrail/rich/component/tabs/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/utils/decorators/index.ts"),i=r(t("./src/screens/tinygrail/_/tabs-v2/index.tsx")),o=t("./src/screens/tinygrail/rich/ds.ts"),a=t("./src/screens/tinygrail/rich/component/tabs/utils.tsx"),d=t("./src/screens/tinygrail/rich/component/tabs/ds.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.ob)((function(){return(0,l.jsx)(i.default,{routes:o.TABS,renderItem:a.renderItem})}),d.COMPONENT)},"./src/screens/tinygrail/rich/component/tabs/utils.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.renderItem=o;var n=r(t("./src/screens/tinygrail/rich/component/list/index.tsx")),i=t("./node_modules/react/jsx-runtime.js");function o(e){return(0,i.jsx)(n.default,{id:e.key,title:e.title},e.key)}try{o.displayName="renderItem",o.__docgenInfo={description:"",displayName:"renderItem",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/rich/component/tabs/utils.tsx#renderItem"]={docgenInfo:o.__docgenInfo,name:"renderItem",path:"src/screens/tinygrail/rich/component/tabs/utils.tsx#renderItem"})}catch(e){}},"./src/screens/tinygrail/rich/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.TABS=s.STATE=s.NAMESPACE=s.COMPONENT=void 0;var r=s.COMPONENT="TinygrailRich";s.NAMESPACE="Screen"+r,s.TABS=[{title:"1-100",key:"1/100"},{title:"周股息",key:"1/100/0"},{title:"流动资金",key:"1/100/1"},{title:"初始资金",key:"1/100/3"}],s.STATE={page:0,_loaded:!1}},"./src/screens/tinygrail/rich/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/tinygrail/rich/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Header")},"./src/screens/tinygrail/rich/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),o=t("./src/stores/index.ts"),a=t("./src/utils/decorators/index.ts"),d=t("./src/utils/fetch/index.ts"),l=t("./src/screens/tinygrail/rich/header/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,a.obc)((function(e,s){var t=s.navigation;return(0,c.jsx)(n.Header,{title:"番市首富",hm:["tinygrail/rich","TinygrailRich"],statusBarEvents:!1,statusBarEventsType:"Tinygrail",headerRight:function(){return(0,c.jsx)(i.IconTouchable,{style:o._.mr.xs,name:"md-insert-chart-outlined",color:o._.colorTinygrailPlain,onPress:function(){(0,d.t)("番市首富.跳转",{to:"TinygrailTreeRich"}),t.push("TinygrailTreeRich")}})}})}),l.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/rich/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/tinygrail/rich/header/index.tsx#header"})}catch(e){}},"./src/screens/tinygrail/rich/hooks.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.useTinygrailRichPage=function(e){var s=e.$;(0,r.useRunAfter)((function(){s.init()}))};var r=t("./src/utils/hooks/index.ts")},"./src/screens/tinygrail/rich/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/components/index.ts"),i=t("./src/stores/index.ts"),o=t("./src/utils/decorators/index.ts"),a=t("./src/utils/hooks/index.ts"),d=r(t("./src/screens/tinygrail/rich/component/tabs/index.tsx")),l=r(t("./src/screens/tinygrail/rich/header/index.tsx")),c=t("./src/screens/tinygrail/rich/hooks.ts"),u=r(t("./src/screens/tinygrail/rich/store.tsx")),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.ic)(u.default,(function(e,s){(0,c.useTinygrailRichPage)(s);var t=s.$;return(0,a.useObserver)((function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.default,{}),(0,m.jsx)(n.Page,{style:i._.container.tinygrail,loaded:t.state._loaded,children:(0,m.jsx)(d.default,{})})]})}))}));try{rich.displayName="rich",rich.__docgenInfo={description:"",displayName:"rich",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/rich/index.tsx#rich"]={docgenInfo:rich.__docgenInfo,name:"rich",path:"src/screens/tinygrail/rich/index.tsx#rich"})}catch(e){}},"./src/screens/tinygrail/rich/store.tsx":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.object.assign.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=n(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),o=n(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=n(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=n(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=n(t("./node_modules/@babel/runtime/helpers/inherits.js")),c=n(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=n(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=n(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=t("./node_modules/mobx/dist/mobx.esm.js"),f=t("./src/stores/index.ts"),h=t("./src/utils/index.ts"),y=t("./src/utils/fetch/index.ts"),j=n(t("./src/utils/store/index.ts")),x=t("./src/screens/tinygrail/rich/ds.ts");function _(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,u.default)(e);if(s){var n=(0,u.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,c.default)(this,t)}}s.default=function(e){(0,l.default)(t,e);var s=_(t);function t(){var e;(0,o.default)(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=s.call.apply(s,[this].concat(a)),(0,m.default)((0,d.default)(e),"state",(0,p.observable)(x.STATE)),(0,m.default)((0,d.default)(e),"init",(0,i.default)(r.mark((function s(){var t,n,i,o;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.state._loaded,n=(0,h.getTimestamp)(),i=!t||n-Number(t)>60,s.t0=e,s.t1=Object,s.t2={},s.next=8,e.getStorage(x.NAMESPACE);case 8:return s.t3=s.sent,s.t4={_loaded:i?n:t},s.t5=s.t1.assign.call(s.t1,s.t2,s.t3,s.t4),s.t0.setState.call(s.t0,s.t5),i&&(o=e.state.page,e.fetchRich(e.key(o))),s.abrupt("return",!0);case 14:case"end":return s.stop()}}),s)})))),(0,m.default)((0,d.default)(e),"fetchRich",(function(e){return f.tinygrailStore.fetchRich(e)})),(0,m.default)((0,d.default)(e),"onChange",(function(s){s!==e.state.page&&((0,y.t)("番市首富.标签页切换",{page:s}),e.setState({page:s}),e.setStorage(x.NAMESPACE),e.tabChangeCallback(s))})),(0,m.default)((0,d.default)(e),"tabChangeCallback",(function(s){var t=e.key(s);e.rich(t)._loaded||e.fetchRich(t)})),e}return(0,a.default)(t,[{key:"key",value:function(e){return(0,p.computed)((function(){return x.TABS[e].key})).get()}},{key:"title",value:function(e){return(0,p.computed)((function(){return x.TABS[e].title})).get()}},{key:"rich",value:function(e){return(0,p.computed)((function(){return f.tinygrailStore.rich(e)})).get()}}]),t}(j.default)}}]);