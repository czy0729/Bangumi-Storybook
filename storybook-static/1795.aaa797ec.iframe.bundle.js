(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1795],{"./src/screens/discovery/anime/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/anime/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/discovery/anime/component/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/anime/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Extra")},"./src/screens/discovery/anime/component/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o,n=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),l=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),c=s("./src/screens/discovery/anime/component/extra/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.ob)((function(e){var t=e.$,s=e.title,r=void 0===s?"Anime":s;t&&(o=null==t?void 0:t.isList);var l=void 0!==o||void 0!==(null==t?void 0:t.isList),c=void 0===(null==t?void 0:t.isList)?o:null==t?void 0:t.isList;return(0,u.jsxs)(n.Flex,{style:d._.mr.xs,children:[l&&(0,u.jsx)(i.IconLayout,{style:d._.mr.xs,list:c,onPress:(null==t?void 0:t.switchLayout)||a.FROZEN_FN,children:(0,u.jsx)(n.Heatmap,{right:30,id:r+".切换布局"})}),(0,u.jsx)(i.IconHeader,{name:"md-vertical-align-top",onPress:(null==t?void 0:t.scrollToTop)||a.FROZEN_FN,children:(0,u.jsx)(n.Heatmap,{id:r+".到顶"})})]})}),c.COMPONENT)},"./src/screens/discovery/anime/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.filterDS=t.COMPONENT=t.ADVANCE_LIMIT=void 0;var r=s("./src/utils/subject/anime/index.ts"),o=(t.COMPONENT="Anime",t.ADVANCE_LIMIT=80,[[],[]]);r.ANIME_TAGS.forEach((function(e,t){return o[t%2?1:0].push(e)}));var n=[[],[]];r.ANIME_OFFICIAL.forEach((function(e,t){return n[t%2?1:0].push(e)}));t.filterDS=[{title:"地区",type:"area",data:r.ANIME_AREA},{title:"版本",type:"type",data:r.ANIME_TYPE},{title:"年份",type:"year",data:r.ANIME_YEAR,always:!0},{title:"季度",type:"begin",data:r.ANIME_BEGIN,always:!0},{title:"状态",type:"status",data:r.ANIME_STATUS},{title:"类型",type:"tags",data:o,multiple:!0,multiSelect:!0},{title:"制作",type:"official",data:n,multiple:!0},{title:"排序",type:"sort",data:r.ANIME_SORT,always:!0},{title:"收藏",type:"collected",data:r.ANIME_COLLECTED}]},"./src/screens/discovery/anime/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/anime/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Header")},"./src/screens/discovery/anime/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/discovery/anime/component/extra/index.tsx")),d=s("./src/screens/discovery/anime/header/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=e.title,r=void 0===s?"找番剧":s,n=e.alias,d=void 0===n?"Anime":n,a=e.hm,c=t.$;return(0,l.jsx)(o.Header,{title:r,alias:d,hm:a||["anime","Anime"],headerRight:function(){return(0,l.jsx)(i.default,{$:c,title:d})}})}),d.COMPONENT)},"./src/screens/discovery/wenku/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.filterDS=t.STATE=t.NAMESPACE=t.ADVANCE_LIMIT=void 0;var r=s("./src/utils/subject/wenku/index.ts"),o=s("./src/constants/index.ts"),n=(t.NAMESPACE="ScreenWenku",t.STATE={query:{first:"",year:2022,status:"",anime:"",cate:"",author:"",tags:[],sort:"发行",collected:""},data:o.LIST_EMPTY,layout:"list",expand:!1,_loaded:!1},t.ADVANCE_LIMIT=60,[[],[]]);r.WENKU_TAGS.forEach((function(e,t){return n[t%2?1:0].push(e)}));t.filterDS=[{title:"首字",type:"first",data:r.WENKU_FIRST},{title:"发行",type:"year",data:r.WENKU_YEAR,always:!0},{title:"状态",type:"status",data:r.WENKU_STATUS},{title:"动画",type:"anime",data:r.WENKU_ANIME},{title:"出版",type:"cate",data:r.WENKU_CATE},{title:"作者",type:"author",data:r.WENKU_AUTHOR},{title:"分类",type:"tags",data:n,multiple:!0,multiSelect:!0,always:!0},{title:"排序",type:"sort",data:r.WENKU_SORT,always:!0},{title:"收藏",type:"collected",data:r.WENKU_COLLECTED}]},"./src/screens/discovery/wenku/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/discovery/anime/header/index.tsx")),l=r(s("./src/screens/discovery/wenku/list/index.tsx")),a=r(s("./src/screens/discovery/wenku/store.ts")),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(a.default,(function(e,t){var s=t.$;return(0,i.useRunAfter)((function(){s.init()})),(0,i.useObserver)((function(){return(0,c.jsxs)(o.Component,{id:"screen-wenku",children:[(0,c.jsx)(d.default,{title:"找文库",alias:"文库",hm:["wenku","Wenku"]}),(0,c.jsx)(o.Page,{loaded:s.state._loaded,children:(0,c.jsx)(l.default,{})})]})}))}))},"./src/screens/discovery/wenku/item-grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.slice.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),a=s("./src/screens/discovery/wenku/item-grid/styles.ts"),c=s("./node_modules/react/jsx-runtime.js"),u={id:"文库.跳转"};t.default=(0,d.obc)((function(e,t){var s=e.pickIndex,r=e.index,d=e.num,m=t.navigation,f=(0,a.memoStyles)(),p=i.otaStore.wenkuSubjectId(s),j=i.otaStore.wenku(p),y=j.id,_=j.wid,x=j.image,v=j.cn,b=j.score,h=j.rank,g=j.begin,E=j.update;if(!y){var T=i._.grid(d);return(0,c.jsx)(o.Flex,{style:{width:T.width,height:l.IMG_HEIGHT_LG,marginBottom:T.marginLeft+i._.xs,marginLeft:T.marginLeft},justify:"center",children:(0,c.jsx)(o.Loading.Raw,{})})}return(0,c.jsx)(n.ItemCollectionsGrid,{navigation:m,style:(i._.isPad||i._.isLandscape)&&!(r%d)&&f.left,event:u,num:d,id:y,wid:_,cover:x?"https://lain.bgm.tv/pic/cover/m/"+x+".jpg":l.IMG_DEFAULT,nameCn:v,score:b,rank:h,airtime:g||E?String(g||E).slice(0,7):"",typeCn:"书籍",collection:i.collectionStore.collect(y)})}))},"./src/screens/discovery/wenku/item-grid/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{left:{marginLeft:r._.wind}}}))},"./src/screens/discovery/wenku/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.fill.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/components/cover/utils.ts"),i=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),c=s("./src/utils/dev/index.ts"),u=s("./src/utils/fetch/index.ts"),m=s("./src/constants/index.ts"),f=r(s("./src/screens/discovery/wenku/item/tags.tsx")),p=s("./src/screens/discovery/wenku/item/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=e.index,r=e.pickIndex,a=t.$,y=t.navigation,_=(0,p.memoStyles)(),x=d.otaStore.wenkuSubjectId(r),v=d.otaStore.wenku(x),b=v.id,h=v.wid,g=v.image,E=v.cn,T=v.ep,O=v.status,S=v.begin,I=v.update,w=v.score,M=v.rank,N=v.total,A=v.cate,C=v.author,k=v.len,P=v.hot,L=v.up,R=v.anime,D=v.tags;if(!b)return(0,j.jsx)(o.Flex,{style:_.loading,justify:"center",children:(0,j.jsx)(o.Loading.Raw,{})});var F=E.length>=20?13:E.length>=14?14:15,G=[1===O?"完结":"连载",S||I,A,C,k?k+"万字":"",T];"更新"===a.state.query.sort&&I&&G.push(I+" 更新");var H=G.filter((function(e){return!!e})).join(" / "),q=(0,c.fill)("",P,"◆"),U=(0,c.fill)("",L,"▲"),W=g?"https://lain.bgm.tv/pic/cover/m/"+g+".jpg":m.IMG_DEFAULT,K=d.collectionStore.collect(b);return(0,j.jsxs)(o.Touchable,{style:_.container,animate:!0,onPress:function(){y.push("Subject",{subjectId:b,_cn:E,_image:(0,n.getCoverSrc)(W,m.IMG_WIDTH_LG),_type:"书籍",_wid:h}),(0,u.t)("游戏.跳转",{subjectId:b})},children:[(0,j.jsxs)(o.Flex,{style:_.wrap,align:"start",children:[(0,j.jsx)(i.Cover,{src:W,width:m.IMG_WIDTH_LG,height:m.IMG_HEIGHT_LG,radius:!0,cdn:!(0,l.x18)(b)}),(0,j.jsxs)(o.Flex.Item,{style:d._.ml.wind,children:[(0,j.jsxs)(o.Flex,{align:"start",children:[(0,j.jsx)(o.Flex.Item,{children:(0,j.jsxs)(o.Flex,{style:_.content,direction:"column",justify:"between",align:"start",children:[(0,j.jsx)(o.Text,{size:F,bold:!0,numberOfLines:3,children:E||"-"}),(0,j.jsx)(o.Text,{style:d._.mt.sm,size:11,lineHeight:14,numberOfLines:3,children:H}),(0,j.jsxs)(o.Flex,{style:[d._.container.block,d._.mt.sm],children:[(0,j.jsx)(o.Flex.Item,{children:!!q&&(0,j.jsxs)(o.Text,{size:10,bold:!0,type:"sub",children:["热度　",q]})}),(0,j.jsx)(o.Flex.Item,{children:!!U&&(0,j.jsxs)(o.Text,{size:10,bold:!0,type:"sub",children:["趋势　",U]})})]})]})}),(0,j.jsx)(i.Manage,{subjectId:b,collection:K,typeCn:"书籍",onPress:function(){d.uiStore.showManageModal({subjectId:b,title:E,status:m.MODEL_COLLECTION_STATUS.getValue(K),action:"读"},"找文库")}})]}),(0,j.jsxs)(o.Flex,{style:_.bottom,children:[(0,j.jsx)(i.Rank,{value:M}),(0,j.jsx)(i.Stars,{style:d._.mr.xs,value:w,simple:!0}),!!N&&(0,j.jsxs)(o.Text,{style:d._.mr.sm,type:"sub",size:11,bold:!0,children:["(",N,")"]}),!!R&&(0,j.jsx)(i.Tag,{style:d._.mr.sm,value:"动画化"}),(0,j.jsx)(o.Flex.Item,{children:(0,j.jsx)(f.default,{value:D})})]})]})]}),0===s&&(0,j.jsx)(o.Heatmap,{id:"游戏.跳转"})]})}))},"./src/screens/discovery/wenku/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts"),o=s("./src/constants/index.ts");t.memoStyles=r._.memoStyles((function(){var e=.8*o.IMG_HEIGHT_LG;return{container:{paddingLeft:r._.wind},wrap:{paddingVertical:r._.md,paddingRight:r._.wind},content:{height:e},loading:{height:o.IMG_HEIGHT_LG},bottom:{marginTop:o.IMG_HEIGHT_LG-e-16}}}))},"./src/screens/discovery/wenku/item/tags.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/screens/_/index.ts"),n=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var s=e.value,r=t.$;if(!s||"string"!=typeof s)return null;var i=r.state.query.tags,l=s.split(" ").sort((function(e,t){return(0,n.desc)(i.includes(e),i.includes(t))}));return(0,d.jsx)(o.Tags,{value:l})}))},"./src/screens/discovery/wenku/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.keyExtractor=g;var o=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=r(s("react")),m=s("./src/components/index.ts"),f=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),j=s("./src/utils/decorators/index.ts"),y=s("./src/screens/discovery/wenku/ds.ts"),_=r(s("./src/screens/discovery/wenku/item/index.tsx")),x=r(s("./src/screens/discovery/wenku/item-grid/index.tsx")),v=s("./node_modules/react/jsx-runtime.js");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,l.default)(this,s)}}var h=function(e){(0,d.default)(s,e);var t=b(s);function s(){var e;(0,o.default)(this,s);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return e=t.call.apply(t,[this].concat(n)),(0,c.default)((0,i.default)(e),"connectRef",(function(t){var s=e.context.$;t&&t.scrollToOffset&&(s.scrollToOffset=t.scrollToOffset)})),(0,c.default)((0,i.default)(e),"renderItem",(function(t){var s=t.item,r=t.index;return e.context.$.isList?(0,v.jsx)(_.default,{pickIndex:s,index:r}):(0,v.jsx)(x.default,{pickIndex:s,index:r,num:e.num})})),e}return(0,n.default)(s,[{key:"num",get:function(){return p._.portrait(3,5)}},{key:"renderFilter",value:function(){return(0,v.jsx)(f.Filter,{filterDS:y.filterDS,name:"文库",type:"文库",lastUpdate:"2022-09",information:"数据最后快照于 2022-09-20，在版本更新前数据不会有任何变化，轻小说因变化频率较低预计半年更新一次。\n        \n本页数据非来源自 bgm.tv，并非所有条目都进行了收录。\n        \n有比 bgm.tv 更准确的分类、更丰富的筛选和更多的排序。\n        \n目前本功能对所有用户开放，非高级会员在一个条件下会有最多只显示前 "+y.ADVANCE_LIMIT+" 条数据的限制。\n        \n整理不易，若觉得有用可以通过各种方式给与鼓励支持!"})}},{key:"render",value:function(){var e=this.context.$,t=e.state,s=t._loaded,r=t.layout,o=t.data;if(!s&&!o._loaded)return(0,v.jsxs)(v.Fragment,{children:[this.renderFilter(),(0,v.jsx)(m.Loading,{})]});var n=e.isList?void 0:this.num;return(0,v.jsx)(f.PaginationList2,{keyExtractor:g,connectRef:this.connectRef,contentContainerStyle:p._.container.bottom,numColumns:n,data:e.list,limit:9,ListHeaderComponent:this.renderFilter(),renderItem:this.renderItem,onPage:e.onPage},""+r+n)}}]),s}(u.default.Component);t.default=(0,j.obc)(h);function g(e){return String(e)}},"./src/screens/discovery/wenku/store.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),d=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),m=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),j=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),_=s("./src/stores/index.ts"),x=s("./src/utils/fetch/index.ts"),v=o(s("./src/utils/store/index.ts")),b=s("./src/utils/subject/wenku/index.ts"),h=s("./src/screens/discovery/wenku/ds.ts");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,m.default)(this,s)}}var E=!1;t.default=(n=function(e){(0,u.default)(s,e);var t=g(s);function s(){var e;(0,l.default)(this,s);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n)),(0,p.default)((0,c.default)(e),"params",void 0),(0,p.default)((0,c.default)(e),"state",(0,y.observable)(h.STATE)),(0,p.default)((0,c.default)(e),"init",(0,d.default)(r.mark((function t(){var s,o,n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStorage(h.NAMESPACE);case 2:if(s=t.sent,e.setState(Object.assign({},s,{_loaded:E})),E){t.next=7;break}return t.next=7,(0,b.init)();case 7:E=!0,o=e.params._tags,(n=void 0===o?[]:o).length&&e.initQuery("string"==typeof n?[n]:n),_.collectionStore.fetchUserCollectionsQueue(!1,"书籍"),e.search(),setTimeout((function(){e.setState({_loaded:!0})}),120);case 13:case"end":return t.stop()}}),t)})))),(0,p.default)((0,c.default)(e),"search",(function(){setTimeout((function(){e.setState({data:(0,b.search)(e.state.query)})}),80)})),(0,p.default)((0,c.default)(e),"initQuery",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.setState({expand:!0,query:Object.assign({},e.state.query,{tags:t})})})),(0,p.default)((0,c.default)(e),"onSelect",(function(t,s){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.state.query;if("tags"===t){var n=o.tags,d=void 0===n?[]:n;r?e.setState({query:Object.assign({},o,{tags:""===s?[]:d.includes(s)?d.filter((function(e){return s!==e})):[].concat((0,i.default)(d),[s])})}):e.setState({query:Object.assign({},o,{tags:""===s?[]:[s]})})}else e.setState({query:Object.assign({},o,(0,p.default)({},t,s))});setTimeout((function(){e.search(),e.setStorage(h.NAMESPACE),(0,x.t)("文库.选择",{type:t,value:s,multiple:r})}),0)})),(0,p.default)((0,c.default)(e),"scrollToOffset",null),(0,p.default)((0,c.default)(e),"scrollToTop",(function(){"function"==typeof e.scrollToOffset&&(e.scrollToOffset({x:0,y:0,animated:!0}),(0,x.t)("文库.到顶"))})),(0,p.default)((0,c.default)(e),"switchLayout",(function(){var t=e.isList?"grid":"list";e.setState({layout:t}),e.setStorage(h.NAMESPACE),(0,x.t)("文库.切换布局",{layout:t})})),(0,p.default)((0,c.default)(e),"onExpand",(function(){e.setState({expand:!e.state.expand}),e.setStorage(h.NAMESPACE)})),(0,p.default)((0,c.default)(e),"onPage",(function(e,t){return t&&t%5==0&&(0,x.t)("文库.更多",{page:t}),_.otaStore.onWenkuPage(e)})),e}return(0,a.default)(s,[{key:"isList",get:function(){return"list"===this.state.layout}},{key:"total",get:function(){return this.state.data.list.length}},{key:"list",get:function(){var e=this.state,t=e.data,s=e.query,r=t.list;return"隐藏"===s.collected&&(r=r.filter((function(e){var t=_.otaStore.wenkuSubjectId(e);return!_.collectionStore.collect(t)}))),_.systemStore.advance||(r=r.filter((function(e,t){return t<h.ADVANCE_LIMIT}))),r}}]),s}(v.default),(0,j.default)(n.prototype,"isList",[y.computed],Object.getOwnPropertyDescriptor(n.prototype,"isList"),n.prototype),(0,j.default)(n.prototype,"total",[y.computed],Object.getOwnPropertyDescriptor(n.prototype,"total"),n.prototype),(0,j.default)(n.prototype,"list",[y.computed],Object.getOwnPropertyDescriptor(n.prototype,"list"),n.prototype),n)}}]);