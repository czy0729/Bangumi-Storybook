(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1194],{"./src/screens/rakuen/group/component/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/rakuen/group/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"Component")},"./src/screens/rakuen/group/component/header-title/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COVER_WIDTH=t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/rakuen/group/component/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"HeaderTitle"),t.COVER_WIDTH=28},"./src/screens/rakuen/group/component/header-title/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=r("./src/components/index.ts"),n=r("./src/stores/index.ts"),u=r("./src/utils/decorators/index.ts"),d=r("./src/screens/rakuen/group/component/header-title/ds.ts"),a=r("./src/screens/rakuen/group/component/header-title/styles.ts"),i=r("./node_modules/react/jsx-runtime.js");t.default=(0,u.ob)((function(e){var t=e.$;return(0,i.jsxs)(o.Flex,{style:a.styles.container,children:[!!t.groupThumb&&(0,i.jsx)(o.Image,{size:d.COVER_WIDTH,src:t.groupThumb,radius:!0}),(0,i.jsx)(o.Flex.Item,{style:n._.ml.sm,children:(0,i.jsx)(o.Text,{size:13,numberOfLines:1,children:t.groupInfo.title})})]})}),d.COMPONENT);try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenGroup"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/group/component/header-title/index.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/rakuen/group/component/header-title/index.tsx#headertitle"})}catch(e){}},"./src/screens/rakuen/group/component/header-title/styles.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var s=r("./src/stores/index.ts");t.styles=s._.create({container:{marginTop:s._.ios(4,-10),marginRight:s._.md}})},"./src/screens/rakuen/group/component/info/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/rakuen/group/component/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"Info")},"./src/screens/rakuen/group/component/info/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=s(r("./node_modules/react-native-web/dist/exports/View/index.js")),n=r("./src/components/index.ts"),u=r("./src/stores/index.ts"),d=r("./src/utils/decorators/index.ts"),a=r("./src/screens/rakuen/group/component/info/ds.ts"),i=r("./src/screens/rakuen/group/component/info/styles.ts"),c=r("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var r=t.$;return(0,c.jsxs)(o.default,{style:[i.styles.container,u._.container.inner],children:[(0,c.jsx)(n.HeaderPlaceholder,{}),(0,c.jsx)(n.Text,{size:20,bold:!0,children:r.groupInfo.title||r.params._title}),!!r.groupThumb&&(0,c.jsxs)(n.Flex,{style:u._.mt.md,justify:"center",children:[(0,c.jsx)(n.Image,{src:r.groupThumb,size:u._.r(80),shadow:!0,placeholder:!1,imageViewer:!0,event:{id:"小组.封面图查看",data:{groupId:r.groupId}}}),(0,c.jsx)(n.Heatmap,{id:"小组.封面图查看"})]}),!!r.groupInfo.content&&(0,c.jsx)(n.Expand,{style:u._.mt.lg,ratio:.64,children:(0,c.jsx)(n.RenderHtml,{html:r.groupInfo.content+'<p style="text-align:right;color:#999">'+r.groupInfo.create+"</p><br/>"})}),!r.groupInfo._loaded&&(0,c.jsx)(n.Flex,{style:i.styles.loading,justify:"center",children:(0,c.jsx)(n.Loading,{})})]})}),a.COMPONENT);try{info.displayName="info",info.__docgenInfo={description:"",displayName:"info",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/group/component/info/index.tsx#info"]={docgenInfo:info.__docgenInfo,name:"info",path:"src/screens/rakuen/group/component/info/index.tsx#info"})}catch(e){}},"./src/screens/rakuen/group/component/info/styles.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var s=r("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:328},loading:{height:200}})},"./src/screens/rakuen/group/component/list/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/rakuen/group/component/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"List")},"./src/screens/rakuen/group/component/list/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/web.timers.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=s(r("./node_modules/react-native-web/dist/exports/View/index.js")),n=r("./src/components/index.ts"),u=r("./src/stores/index.ts"),d=r("./src/utils/index.ts"),a=r("./src/utils/decorators/index.ts"),i=r("./src/utils/fetch/index.ts"),c=r("./src/constants/index.ts"),l=r("./src/screens/rakuen/group/component/list/ds.ts"),p=r("./src/screens/rakuen/group/component/list/styles.ts"),f=r("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var r=e.style,s=void 0===r?void 0:r,a=t.$,l=t.navigation,m=(0,p.memoStyles)(),g=a.groupInfo.title,h=a.group,y=h.list;return h._loaded&&!y.length?(0,f.jsxs)(n.Flex,{style:m.empty,direction:"column",justify:"center",children:[(0,f.jsx)(n.Mesume,{}),(0,f.jsx)(n.Text,{style:u._.mt.sm,type:"sub",children:"好像什么都没有"})]}):(0,f.jsx)(o.default,{style:s,children:y.map((function(e,t){var r,s=e.title,p=e.href,h=e.replies,y=e.time,j=e.userName,x=(e.userId,p.replace("/group/topic/","group/")),_=a.readed(x),b=!!_.time,v="+"+h;return b&&Number(h)>_.replies&&(r="+"+(Number(h)-_.replies)),(0,f.jsxs)(n.Touchable,{style:(0,d.stl)(m.item,b&&m.readed),animate:!0,onPress:function(){if(Number(h)>c.LIMIT_TOPIC_PUSH){var e=""+c.HOST+p;(0,i.t)("小组.跳转",{to:"WebBrowser",url:e}),(0,d.info)("该帖评论多, 自动使用浏览器打开"),setTimeout((function(){(0,d.open)(e)}),1500)}else a.onItemPress(x,h),(0,d.appNavigate)(p,l,{_title:s,_replies:"+"+h,_group:g,_time:y},{id:"小组.跳转"})},children:[(0,f.jsxs)(o.default,{style:m.wrap,children:[(0,f.jsxs)(n.Text,{size:15,children:[(0,d.HTMLDecode)(s),(0,f.jsxs)(n.Text,{type:b?"sub":"main",size:12,lineHeight:15,children:[" ",v]}),!!r&&(0,f.jsxs)(n.Text,{type:"main",size:12,lineHeight:15,children:[" ",r]})]}),(0,f.jsxs)(n.Flex,{style:u._.mt.sm,children:[(0,f.jsx)(n.Text,{size:12,bold:!0,children:j}),(0,f.jsx)(n.Text,{style:u._.ml.xs,type:"sub",size:11,bold:!0,children:(0,d.correctAgo)(y)})]})]}),!t&&(0,f.jsx)(n.Heatmap,{id:"小组.跳转"})]},p)}))})}),l.COMPONENT)},"./src/screens/rakuen/group/component/list/styles.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var s=r("./src/stores/index.ts");t.memoStyles=s._.memoStyles((function(){return{item:{paddingLeft:s._.wind-s._._wind+s._.md},wrap:{paddingVertical:s._.md,paddingRight:s._.wind},border:{borderTopColor:s._.colorBorder,borderTopWidth:s._.hairlineWidth},readed:{backgroundColor:s._.colorBg},empty:{minHeight:240}}}))},"./src/screens/rakuen/group/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.HEAT_MAPS=t.COMPONENT=void 0;var s=t.COMPONENT="Group";t.NAMESPACE="Screen"+s,t.STATE={page:1,show:!0,ipt:"1",history:[],ota:{},_loaded:!1},t.HEAT_MAPS={prev:"小组.上一页",next:"小组.下一页",search:"小组.页码跳转"}},"./src/screens/rakuen/group/header/ds.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=r("./src/utils/dev/index.ts"),o=r("./src/screens/rakuen/group/ds.ts");t.COMPONENT=(0,s.rc)(o.COMPONENT,"Header")},"./src/screens/rakuen/group/header/index.tsx":(e,t,r)=>{var s=r("./node_modules/@babel/runtime/regenerator/index.js");r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.string.fixed.js");var o=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=(o(r("react")),r("./src/components/index.ts")),d=r("./src/screens/_/index.ts"),a=r("./src/stores/index.ts"),i=r("./src/utils/index.ts"),c=r("./src/utils/decorators/index.ts"),l=r("./src/utils/fetch/index.ts"),p=r("./src/constants/index.ts"),f=o(r("./src/screens/rakuen/group/component/header-title/index.tsx")),m=r("./src/screens/rakuen/group/header/ds.ts"),g=r("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var r=this,o=e.fixed,c=t.$,m=t.navigation,h=c.groupInfo,y=h.joinUrl,j=h.byeUrl,x=["浏览器查看","小组成员"];return y&&x.push("加入小组"),j&&x.push("退出小组"),(0,g.jsx)(u.Header,{mode:"transition",statusBarEventsType:"Topic",fixed:o,title:c.groupInfo.title,alias:"小组",hm:[c.url,"Group"],headerTitle:(0,g.jsx)(f.default,{$:c}),headerRight:function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.IconTouchable,{style:a._.mr.sm,name:"md-edit",size:18,color:a._.colorTitle,onPress:function(){var e=(0,p.HTML_NEW_TOPIC)(String(c.groupId));m.push("WebBrowser",{url:e,title:"添加新讨论",desc:"发帖组件复杂并没有重新开发实装。若你看见的不是发帖页面，请先在此页面进行登录。请务必刷新一下验证码再登录。成功后点击右上方刷新页面。",injectedViewport:!0}),(0,l.t)("小组.跳转",{to:"WebBrowser",url:e})}}),(0,g.jsx)(u.Header.Popover,{data:x,onSelect:(e=(0,n.default)(s.mark((function e(t){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.t)("小组.右上角菜单",{key:t,groupId:c.groupId}),e.t0=t,e.next="浏览器查看"===e.t0?4:"小组成员"===e.t0?6:"加入小组"===e.t0?8:"退出小组"===e.t0?12:16;break;case 4:return(0,i.open)(c.url),e.abrupt("break",17);case 6:return(0,i.open)(p.HOST+"/group/"+c.groupId+"/members"),e.abrupt("break",17);case 8:return e.next=10,c.doJoin();case 10:case 14:return r.updatePopover(),e.abrupt("break",17);case 12:return e.next=14,c.doBye();case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),children:(0,g.jsx)(u.Heatmap,{id:"小组.右上角菜单"})})]});var e}})}),m.COMPONENT)},"./src/screens/rakuen/group/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.string.fixed.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var o=s(r("./node_modules/react-native-web/dist/exports/View/index.js")),n=r("./src/components/index.ts"),u=r("./src/components/header/utils.tsx"),d=r("./src/stores/index.ts"),a=r("./src/utils/decorators/index.ts"),i=r("./src/utils/hooks/index.ts"),c=s(r("./src/screens/rakuen/group/component/info/index.tsx")),l=s(r("./src/screens/rakuen/group/component/list/index.tsx")),p=s(r("./src/screens/rakuen/group/header/index.tsx")),f=s(r("./src/screens/rakuen/group/store.ts")),m=r("./src/screens/rakuen/group/ds.ts"),g=r("./src/screens/rakuen/group/styles.ts"),h=r("./node_modules/react/jsx-runtime.js");t.default=(0,a.ic)(f.default,(function(e,t){var r=t.$;(0,i.useRunAfter)((function(){r.init()}));var s=(0,u.useOnScroll)(),a=s.fixed,f=s.onScroll;return(0,i.useObserver)((function(){var e=r.state.show;return(0,h.jsxs)(n.Component,{id:"screen-rakuen-group",children:[(0,h.jsxs)(n.Page,{statusBarEvent:!1,children:[(0,h.jsxs)(n.ScrollView,{scrollEventThrottle:16,scrollToTop:!0,onScroll:f,children:[(0,h.jsx)(c.default,{}),e&&(0,h.jsx)(o.default,{style:[{minHeight:d._.window.height},d._.mt.md],children:(0,h.jsx)(l.default,{})})]}),(0,h.jsx)(n.Pagination,{style:g.styles.pagination,input:r.state.ipt,heatmaps:m.HEAT_MAPS,onPrev:r.prev,onNext:r.next,onChange:r.onChange,onSearch:r.doSearch})]}),(0,h.jsx)(p.default,{fixed:a}),(0,h.jsx)(n.Heatmap,{id:"小组",screen:"Group"}),(0,h.jsx)(n.Heatmap,{right:72,bottom:d._.bottom,id:"小组.加入"}),(0,h.jsx)(n.Heatmap,{right:72,bottom:d._.bottom-34,id:"小组.退出"})]})}))}));try{group.displayName="group",group.__docgenInfo={description:"",displayName:"group",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/group/index.tsx#group"]={docgenInfo:group.__docgenInfo,name:"group",path:"src/screens/rakuen/group/index.tsx#group"})}catch(e){}},"./src/screens/rakuen/group/store.ts":(e,t,r)=>{var s=r("./node_modules/@babel/runtime/regenerator/index.js");r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.object.assign.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/web.timers.js"),r("./node_modules/core-js/modules/es.parse-int.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,u=o(r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=o(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(r("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(r("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=o(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),g=r("./node_modules/mobx/dist/mobx.esm.js"),h=r("./src/stores/index.ts"),y=r("./src/utils/index.ts"),j=r("./src/utils/app/ds.ts"),x=r("./src/utils/fetch/index.ts"),_=r("./src/utils/kv/index.ts"),b=o(r("./src/utils/store/index.ts")),v=r("./src/utils/webhooks/index.ts"),O=r("./src/constants/index.ts"),T=r("./src/screens/rakuen/group/ds.ts");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return(0,l.default)(this,r)}}var S=[];t.default=(n=function(e){(0,c.default)(r,e);var t=k(r);function r(){var e;(0,d.default)(this,r);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n)),(0,f.default)((0,i.default)(e),"params",void 0),(0,f.default)((0,i.default)(e),"state",(0,g.observable)(T.STATE)),(0,f.default)((0,i.default)(e),"init",(0,u.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStorage(e.key);case 2:return r=t.sent,e.setState(Object.assign({},r,{ota:{},_loaded:!0})),e.fetchGroup(),t.abrupt("return",e.fetchGroupInfo());case 6:case"end":return t.stop()}}),t)})))),(0,f.default)((0,i.default)(e),"fetchGroupInfo",(function(){return h.rakuenStore.fetchGroupInfo({groupId:e.groupId})})),(0,f.default)((0,i.default)(e),"fetchGroup",(0,u.default)(s.mark((function t(){var r,o,n,u;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetchThirdParty(),r=e.state.page,t.next=4,h.rakuenStore.fetchGroup({groupId:e.groupId,page:r});case 4:return(o=t.sent).list.length&&e.thirdPartyKey in e.state.ota&&(u=(null==(n=e.ota)?void 0:n.ts)||0,(0,y.getTimestamp)()-u>=604800&&e.updateThirdParty()),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})))),(0,f.default)((0,i.default)(e),"fetchThirdParty",(0,u.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ota||e.group._loaded){t.next=8;break}return t.next=3,(0,_.get)(e.thirdPartyKey);case 3:if(r=t.sent){t.next=7;break}return e.setState({ota:(0,f.default)({},e.thirdPartyKey,{list:[],_loaded:0})}),t.abrupt("return");case 7:e.setState({ota:(0,f.default)({},e.thirdPartyKey,Object.assign({},r,{_loaded:(0,y.getTimestamp)()}))});case 8:case"end":return t.stop()}}),t)})))),(0,f.default)((0,i.default)(e),"updateThirdParty",(0,u.default)(s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!S.includes(e.thirdPartyKey)){t.next=2;break}return t.abrupt("return");case 2:setTimeout((function(){(0,_.update)(e.thirdPartyKey,{list:e.group.list}),S.push(e.thirdPartyKey)}),0);case 3:case"end":return t.stop()}}),t)})))),(0,f.default)((0,i.default)(e),"prev",(0,u.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==(r=e.state.page)){t.next=3;break}return t.abrupt("return");case 3:(0,x.t)("小组.上一页",{page:r-1,groupId:e.groupId}),e.setState({page:r-1,show:!1,ipt:String(r-1)}),e.fetchGroup(),setTimeout((function(){e.setState({show:!0}),e.setStorage(void 0,void 0,e.key)}),400);case 7:case"end":return t.stop()}}),t)})))),(0,f.default)((0,i.default)(e),"next",(0,u.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.state.page,(0,x.t)("小组.下一页",{page:r+1,groupId:e.groupId}),e.setState({page:r+1,show:!1,ipt:String(r+1)}),e.fetchGroup(),setTimeout((function(){e.setState({show:!0}),e.setStorage(void 0,void 0,e.key)}),400);case 5:case"end":return t.stop()}}),t)})))),(0,f.default)((0,i.default)(e),"onChange",(function(t){var r=t.nativeEvent.text;e.setState({ipt:r})})),(0,f.default)((0,i.default)(e),"onItemPress",(function(e,t){h.rakuenStore.updateTopicReaded(e,t)})),(0,f.default)((0,i.default)(e),"doSearch",(function(){var t=e.state.ipt,r=""===t?1:parseInt(t);r<1?(0,y.info)("请输入正确页码"):((0,x.t)("小组.页码跳转",{page:r,groupId:e.groupId}),e.setState({page:r,show:!1,ipt:String(r)}),e.fetchGroup(),setTimeout((function(){e.setState({show:!0}),e.setStorage(void 0,void 0,e.key)}),400))})),(0,f.default)((0,i.default)(e),"doJoin",(0,u.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.groupInfo.joinUrl){t.next=3;break}return t.abrupt("return",!1);case 3:return(0,x.t)("小组.加入",{groupId:e.groupId}),t.next=6,(0,x.fetchHTML)({method:"POST",url:""+O.HOST+r,data:{action:"join-bye"}});case 6:return(0,y.feedback)(),(0,y.info)("已加入小组"),(0,v.webhookGroup)(Object.assign({},e.groupInfo,{id:e.groupId}),h.userStore.userInfo),t.abrupt("return",e.fetchGroupInfo());case 10:case"end":return t.stop()}}),t)})))),(0,f.default)((0,i.default)(e),"doBye",(0,u.default)(s.mark((function t(){var r;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.groupInfo.byeUrl){t.next=3;break}return t.abrupt("return",!1);case 3:return(0,x.t)("小组.退出",{groupId:e.groupId}),t.next=6,(0,x.fetchHTML)({method:"POST",url:""+O.HOST+r,data:{action:"join-bye"}});case 6:return(0,y.feedback)(),(0,y.info)("已退出小组"),t.abrupt("return",e.fetchGroupInfo());case 9:case"end":return t.stop()}}),t)})))),e}return(0,a.default)(r,[{key:"groupId",get:function(){var e=this.params.groupId;return void 0===e?"":e}},{key:"key",get:function(){return T.NAMESPACE+"|"+this.groupId}},{key:"groupInfo",get:function(){return h.rakuenStore.groupInfo(this.groupId)}},{key:"group",get:function(){var e=this.state.page,t=h.rakuenStore.group(this.groupId,e);return t._loaded?t:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):O.LIST_EMPTY}},{key:"groupThumb",get:function(){var e="",t=this.groupInfo.cover;if(t)e=t||"";else{var r=this.params._title;r&&(e=h.rakuenStore.groupThumb(r)||"")}var s=h.systemStore.setting,o=s.cdn,n=s.cdnOrigin;return o&&"magma"===n&&"string"==typeof e&&e.includes(j.HOST_IMAGE)&&(e=(0,O.CDN_OSS_MAGMA_PIC)(e)),e}},{key:"url",get:function(){return O.HOST+"/group/"+this.groupId}},{key:"readed",value:function(e){return(0,g.computed)((function(){return h.rakuenStore.readed(e)})).get()}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){var e=this.state.page;return"group_"+[this.groupId,e].join("_").replace("/","_")}}]),r}(b.default),(0,m.default)(n.prototype,"groupId",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"groupId"),n.prototype),(0,m.default)(n.prototype,"key",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"key"),n.prototype),(0,m.default)(n.prototype,"groupInfo",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"groupInfo"),n.prototype),(0,m.default)(n.prototype,"group",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"group"),n.prototype),(0,m.default)(n.prototype,"groupThumb",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"groupThumb"),n.prototype),(0,m.default)(n.prototype,"url",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"url"),n.prototype),(0,m.default)(n.prototype,"ota",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"ota"),n.prototype),(0,m.default)(n.prototype,"thirdPartyKey",[g.computed],Object.getOwnPropertyDescriptor(n.prototype,"thirdPartyKey"),n.prototype),n)},"./src/screens/rakuen/group/styles.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var s=r("./src/stores/index.ts");t.styles=s._.create({pagination:{paddingTop:s._.sm,paddingBottom:s._.ios(s._.md,s._.sm)}})}}]);