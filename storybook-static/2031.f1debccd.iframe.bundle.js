(self.webpackChunkweb=self.webpackChunkweb||[]).push([[2031],{"./src/screens/home/subject/component/anitabi/anitabi.tsx":(e,s,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),n("./node_modules/core-js/modules/es.array.map.js"),n("./node_modules/core-js/modules/es.array.filter.js"),n("./node_modules/core-js/modules/es.string.replace.js"),n("./node_modules/core-js/modules/es.regexp.exec.js"),n("./node_modules/core-js/modules/es.object.assign.js"),n("./node_modules/core-js/modules/es.function.name.js"),n("./node_modules/core-js/modules/es.string.sub.js"),n("./node_modules/core-js/modules/es.array.join.js");var t=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;t(n("./node_modules/react/index.js"));var i=t(n("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),o=t(n("./node_modules/react-native-web/dist/exports/View/index.js")),r=n("./src/components/index.ts"),a=n("./src/screens/_/index.ts"),d=n("./src/stores/index.ts"),l=n("./src/utils/index.ts"),c=n("./src/utils/decorators/index.ts"),u=n("./src/utils/fetch/index.ts"),m=n("./src/utils/hooks/index.ts"),b=n("./src/constants/index.ts"),h=n("./src/screens/home/subject/ds.ts"),j=t(n("./src/screens/home/subject/component/icon/hidden.tsx")),p=n("./src/screens/home/subject/component/anitabi/ds.ts"),x=n("./node_modules/react/jsx-runtime.js"),_=(0,c.memo)((function(e){var s=e.styles,n=e.showAnitabi,t=e.subjectId,c=e.data,_=e.onSwitchBlock,y=c.city,T=c.pointsLength,f=c.imagesLength,g=c.litePoints,I=(0,m.useHorizontalLazy)(g,Math.floor(d._.window.contentWidth/p.THUMB_WIDTH)+1),w=I.list,S=I.onScroll,A=w.filter((function(e){return e.image})).map((function(e){var s;return{url:null==e||null==(s=e.image)?void 0:s.replace("h160","h360")}}));return(0,x.jsxs)(a.InView,{style:(0,l.stl)(s.container,!n&&d._.short),children:[(0,x.jsx)(a.SectionTitle,{style:d._.container.wind,right:!1===n?(0,x.jsx)(j.default,{name:h.TITLE_ANITABI,value:"showAnitabi"}):-1!==n&&(0,x.jsxs)(r.Touchable,{style:s.touch,onPress:function(){(0,u.t)("条目.跳转",{to:"anitabi.cn",from:h.TITLE_ANITABI,subjectId:t}),(0,l.open)("https://anitabi.cn/map?bangumiId="+t)},children:[(0,x.jsxs)(r.Flex,{children:[(0,x.jsx)(r.Text,{type:"sub",children:"动画巡礼地图"}),(0,x.jsx)(r.Iconfont,{style:d._.ml.xs,name:"md-open-in-new",size:17})]}),(0,x.jsx)(r.Heatmap,{id:"条目.跳转",from:h.TITLE_ANITABI})]}),icon:!n&&"md-navigate-next",onPress:function(){return _("showAnitabi")},children:h.TITLE_ANITABI}),n&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(r.Flex,{style:d._.container.windMtMd,children:[(0,x.jsx)(r.Text,{size:11,children:"主要取景城市: "}),(0,x.jsxs)(r.Text,{size:11,bold:!0,children:[y," "]}),(0,x.jsxs)(r.Text,{size:11,type:"sub",children:[" ","(",T," 个地标 、",f," 张截图)"]})]}),(0,x.jsx)(i.default,Object.assign({style:d._.mt.md,contentContainerStyle:d._.container.wind,horizontal:!0},b.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:16,onScroll:S,children:w.map((function(e,n){return(0,x.jsxs)(o.default,{style:d._.mr.sm,children:[(0,x.jsx)(r.Squircle,{width:p.THUMB_WIDTH,height:p.THUMB_HEIGHT,radius:d._.radiusXs,children:e.image?(0,x.jsx)(r.Image,{style:s.image,src:e.image,size:p.THUMB_WIDTH,height:p.THUMB_HEIGHT,onPress:function(){(0,l.showImageViewer)(A,Math.min(n,A.length-1))}}):(0,x.jsxs)(r.Flex,{style:s.void,direction:"column",justify:"center",children:[(0,x.jsx)(r.Text,{type:"sub",size:16,bold:!0,children:n+1}),(0,x.jsx)(r.Text,{style:d._.mt.xs,type:"sub",size:11,bold:!0,children:"尚无截图"})]})}),(0,x.jsx)(r.Text,{style:s.title,size:11,bold:!0,numberOfLines:2,children:e.cn||e.name}),e.ep||e.s?(0,x.jsxs)(r.Text,{style:s.sub,type:"sub",size:11,bold:!0,numberOfLines:1,children:[e.ep?"EP"+e.ep+" ":"",e.s?(0,l.date)("i:s",e.s):""]}):(0,x.jsxs)(r.Text,{style:s.sub,type:"sub",size:11,bold:!0,numberOfLines:1,children:["坐标 ",e.geo.join("，")]})]},e.id)}))})),(0,x.jsx)(a.PreventTouchPlaceholder,{})]})]})}),p.DEFAULT_PROPS,p.COMPONENT_MAIN);s.default=_;try{anitabi.displayName="anitabi",anitabi.__docgenInfo={description:"",displayName:"anitabi",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { minHeight: number; marginTop: number; }; image: { height: number; }; void: { width: number; height: number; backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; }; title: { width: number; paddingTop: number; }; sub: { ...; }; touch: { ...; }; layout: { ...; }; }'}},showAnitabi:{defaultValue:null,description:"",name:"showAnitabi",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AnitabiData"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "tinygrail" | "katakana" | "cdn" | "quality" | "hideScore" | "transition" | "showTags" | "cnFirst" | "userRemark" | "userPagination" | "heatMap" | ... 89 more ... | "baiduKey") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/anitabi/anitabi.tsx#anitabi"]={docgenInfo:anitabi.__docgenInfo,name:"anitabi",path:"src/screens/home/subject/component/anitabi/anitabi.tsx#anitabi"})}catch(e){}}}]);