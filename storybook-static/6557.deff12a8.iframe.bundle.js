(self.webpackChunkweb=self.webpackChunkweb||[]).push([[6557],{"./src/screens/rakuen/history/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/rakuen/history/component/favor-list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"FavorList")},"./src/screens/rakuen/history/component/favor-list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.find-index.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/screens/_/index.ts"),i=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),d=t("./src/screens/rakuen/history/ds.ts"),u=t("./src/screens/rakuen/history/component/favor-list/utils.tsx"),c=t("./src/screens/rakuen/history/component/favor-list/ds.ts"),a=t("./src/screens/rakuen/history/component/favor-list/styles.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=s.$,r=(0,a.memoStyles)(),l=t.state.type;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.SegmentedControl,{style:r.segment,size:11,values:d.DS,selectedIndex:d.DS.findIndex((function(e){return e===l})),onValueChange:t.onValueChange},l),(0,m.jsx)(n.PaginationList2,{keyExtractor:u.keyExtractor,contentContainerStyle:i._.container.bottom,data:t.list,limit:12,scrollToTop:!0,renderItem:u.renderItem,onPage:t.onPage})]})}),c.COMPONENT)},"./src/screens/rakuen/history/component/favor-list/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/favor-list/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Item")},"./src/screens/rakuen/history/component/favor-list/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.match.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.filter.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),c=t("./src/utils/fetch/index.ts"),a=t("./src/screens/rakuen/history/component/favor-list/item/ds.ts"),m=t("./src/screens/rakuen/history/component/favor-list/item/styles.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.item,r=s.$,u=s.navigation,a=(0,m.memoStyles)(),f=r.topic(t);if(!f)return(0,p.jsx)(n.Flex,{style:a.loading,justify:"center",children:(0,p.jsx)(n.Loading.Raw,{})});var j=r.state.type,y=f.userId,h=f.avatar,_=f.userName,b=f.title,v=f.group,x=f.time;return(0,p.jsx)(n.Touchable,{animate:!0,onPress:function(){if((0,c.t)("本地帖子.跳转",{to:"Topic",topicId:t}),"日志"!==j)u.push("Topic",{topicId:t,_noFetch:!0,_title:b,_group:v,_time:x,_avatar:h,_userName:_,_userId:y});else{var e,s=null==(e=String(t).match(/\d+/))?void 0:e[0];s&&u.push("Blog",{blogId:s})}},children:(0,p.jsxs)(n.Flex,{style:a.container,align:"start",children:[(0,p.jsx)(o.default,{style:a.image,children:(0,p.jsx)(n.UserStatus,{userId:y,children:(0,p.jsx)(i.Avatar,{navigation:u,src:h,userId:y,name:_})})}),(0,p.jsx)(n.Flex.Item,{children:(0,p.jsxs)(n.Flex,{style:a.item,align:"start",children:[(0,p.jsxs)(n.Flex.Item,{children:[(0,p.jsx)(n.Text,{style:a.title,bold:!0,children:"undefined"===b?"(此帖子已删除)":b}),"小组"===j?(0,p.jsxs)(n.Text,{style:l._.mt.xs,type:"sub",size:11,lineHeight:12,children:[x.includes("首播")?x:(0,d.simpleTime)(x)," /"," ",(0,p.jsx)(i.Name,{userId:y,type:"sub",size:11,lineHeight:12,showFriend:!0,children:_})," ","/ ",v]}):(0,p.jsx)(n.Text,{style:l._.mt.xs,type:"sub",size:11,lineHeight:12,children:[x.includes("首播")?x:(0,d.simpleTime)(x),_,v].filter((function(e){return!!e})).join(" / ")})]}),r.isFavor(t)&&(0,p.jsx)(n.Iconfont,{style:a.favor,size:16,name:"md-star",color:l._.colorYellow})]})})]})})}),a.COMPONENT)},"./src/screens/rakuen/history/component/favor-list/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{loading:{height:60},container:{paddingLeft:r._.wind,backgroundColor:r._.colorPlain},image:{marginRight:r._.xs,marginTop:r._.md},item:{paddingVertical:12,paddingLeft:r._.sm,paddingRight:r._.wind},title:{marginTop:6},favor:{marginTop:6,marginLeft:r._.md}}}))},"./src/screens/rakuen/history/component/favor-list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{segment:{width:r._.window.width-2*r._.wind,height:30,marginLeft:r._.wind,marginVertical:r._.sm}}}))},"./src/screens/rakuen/history/component/favor-list/utils.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.keyExtractor=function(e){return String(e)},s.renderItem=function(e){var s=e.item;return(0,n.jsx)(o.default,{item:s})};r(t("react"));var o=r(t("./src/screens/rakuen/history/component/favor-list/item/index.tsx")),n=t("./node_modules/react/jsx-runtime.js")},"./src/screens/rakuen/history/component/local-list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"LocalList")},"./src/screens/rakuen/history/component/local-list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),l=t("./src/screens/rakuen/history/component/local-list/utils.tsx"),d=t("./src/screens/rakuen/history/component/local-list/ds.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=s.$;return(0,u.jsx)(o.ListView,{keyExtractor:l.keyExtractor,style:n._.mt.sm,sections:t.sections,scrollToTop:!0,renderSectionHeader:l.renderSectionHeader,renderItem:l.renderItem},t.sections.length)}),d.COMPONENT)},"./src/screens/rakuen/history/component/local-list/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/local-list/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Item")},"./src/screens/rakuen/history/component/local-list/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),u=t("./src/utils/fetch/index.ts"),c=t("./src/screens/rakuen/history/component/local-list/item/ds.ts"),a=t("./src/screens/rakuen/history/component/local-list/item/styles.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t,r,d=e.topicId,c=e.avatar,p=e.userName,f=e.title,j=e.group,y=e.time,h=void 0===y?"":y,_=e.userId,b=s.$,v=s.navigation,x=(0,a.memoStyles)();return[null==(t=h.split(" "))?void 0:t[1],p,j].filter((function(e){return!!e})).join(" / "),(0,m.jsx)(n.Touchable,{animate:!0,onPress:function(){(0,u.t)("本地帖子.跳转",{to:"Topic",topicId:d}),v.push("Topic",{topicId:d,_noFetch:!0,_title:f,_group:j,_time:h,_avatar:c,_userName:p,_userId:_})},children:(0,m.jsxs)(n.Flex,{style:x.container,align:"start",children:[(0,m.jsx)(o.default,{style:x.image,children:(0,m.jsx)(n.UserStatus,{userId:_,children:(0,m.jsx)(i.Avatar,{navigation:v,src:c,userId:_,name:p})})}),(0,m.jsx)(n.Flex.Item,{children:(0,m.jsxs)(n.Flex,{style:x.item,align:"start",children:[(0,m.jsxs)(n.Flex.Item,{children:[(0,m.jsx)(n.Text,{size:15,bold:!0,children:"undefined"===f?"(此帖子已删除)":f}),(0,m.jsxs)(n.Text,{style:l._.mt.xs,type:"sub",size:11,lineHeight:12,children:[null==(r=h.split(" "))?void 0:r[1]," /"," ",(0,m.jsx)(i.Name,{userId:_,type:"sub",size:11,lineHeight:12,showFriend:!0,children:p})," ","/ ",j]})]}),b.isFavor(d)&&(0,m.jsx)(n.Iconfont,{style:x.favor,size:16,name:"md-star",color:l._.colorYellow})]})})]})})}),c.COMPONENT)},"./src/screens/rakuen/history/component/local-list/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{container:{paddingLeft:r._.wind,backgroundColor:r._.colorPlain},image:{marginRight:r._.xs,marginTop:r._.md},item:{paddingVertical:r._.md,paddingLeft:r._.sm,paddingRight:r._.wind},favor:{marginTop:1}}}))},"./src/screens/rakuen/history/component/local-list/utils.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.keyExtractor=function(e){return String(e.topicId)},s.renderItem=function(e){var s=e.item;return(0,i.jsx)(n.default,Object.assign({},s))},s.renderSectionHeader=function(e){var s=e.section.title;return(0,i.jsx)(o.SectionHeader,{size:14,children:s})};r(t("react"));var o=t("./src/screens/_/index.ts"),n=r(t("./src/screens/rakuen/history/component/local-list/item/index.tsx")),i=t("./node_modules/react/jsx-runtime.js")},"./src/screens/rakuen/history/component/reply-list/comment/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),c=t("./src/constants/index.ts"),a=r(t("./src/screens/rakuen/history/component/reply-list/title/index.tsx")),m=t("./src/screens/rakuen/history/component/reply-list/comment/utils.ts"),p=t("./src/screens/rakuen/history/component/reply-list/comment/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.topicId,r=s.$,u=s.navigation,j=r.comment(t);if(!j.length)return null;var y=(0,p.memoStyles)();return(0,f.jsx)(o.default,{style:y.comment,children:j.map((function(e,s){return(0,f.jsxs)(o.default,{style:(0,d.stl)(y.item,s&&y.border),children:[(0,f.jsxs)(n.Flex,{children:[(0,f.jsx)(n.Flex.Item,{children:(0,f.jsxs)(a.default,{size:12,lineHeight:14,numberOfLines:4,children:[(0,f.jsxs)(n.Text,{size:12,lineHeight:14,type:"sub",children:[(0,d.lastDate)((0,d.getTimestamp)(e.time))," ",e.floor,"："]}),(0,m.removeHtmlEntities)((0,d.HTMLDecode)((0,d.removeHTMLTag)(e.message,!1))).replace(/\[来自Bangumi for (iOS|android)\] 获取/,"")]})}),(0,f.jsx)(i.IconTouchable,{style:l._.mr._sm,name:"md-navigate-next",onPress:function(){u.push("Topic",{topicId:t+"#post_"+e.id})}})]}),(0,f.jsx)(i.Likes,{style:y.likes,topicId:t,id:e.id,likeType:c.LIKE_TYPE_RAKUEN,onPress:l.uiStore.showLikesUsers})]},e.id)}))})}))},"./src/screens/rakuen/history/component/reply-list/comment/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{comment:{paddingHorizontal:12,marginHorizontal:r._.wind,marginBottom:r._.md,borderWidth:1,borderColor:r._.colorBorder,borderRadius:r._.radiusMd},item:{paddingVertical:12},border:{borderTopWidth:r._.hairlineWidth,borderTopColor:r._.colorBorder},likes:{marginLeft:"-5%",marginBottom:-12,transform:[{scale:.9}]}}}))},"./src/screens/rakuen/history/component/reply-list/comment/utils.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.removeHtmlEntities=function(e){return e.replace(/&#?[a-zA-Z0-9]+;/g,"")}},"./src/screens/rakuen/history/component/reply-list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"ReplyList")},"./src/screens/rakuen/history/component/reply-list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),i=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),d=r(t("./src/screens/rakuen/history/component/reply-list/list/index.tsx")),u=t("./src/screens/rakuen/history/component/reply-list/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=s.$;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.ScrollView,{children:t.state.show&&(0,c.jsx)(o.default,{style:[{minHeight:i._.window.height},i._.mt.sm],children:(0,c.jsx)(d.default,{})})}),(0,c.jsx)(n.Pagination,{style:i._.mt.xs,input:t.state.ipt,onPrev:t.prev,onNext:t.next,onChange:t.onChange,onSearch:t.doSearch})]})}),u.COMPONENT)},"./src/screens/rakuen/history/component/reply-list/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/reply-list/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Item")},"./src/screens/rakuen/history/component/reply-list/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.string.split.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),c=r(t("./src/screens/rakuen/history/component/reply-list/comment/index.tsx")),a=t("./src/screens/rakuen/history/component/reply-list/item/ds.ts"),m=t("./src/screens/rakuen/history/component/reply-list/item/styles.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t,r,u=e.title,a=e.href,f=e.replies,j=e.userName,y=e.tip,h=void 0===y?"":y,_=e.tipHref,b=void 0===_?"":_,v=e.time,x=s.$,g=s.navigation,k=(0,m.memoStyles)(),O=a.replace("/group/topic/","group/"),P=x.readed(O),T=!!P.time,M="+"+f;T&&Number(f)>P.replies&&(r="+"+(Number(f)-P.replies));var S=x.avatar(O),N=null==(t=b.split("/user/"))?void 0:t[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n.Flex,{style:k.item,align:"start",children:[!!S&&(0,p.jsx)(o.default,{style:k.avatar,children:(0,p.jsx)(n.UserStatus,{userId:N,children:(0,p.jsx)(n.Avatar,{navigation:g,src:S,userId:N})})}),(0,p.jsx)(n.Flex.Item,{children:(0,p.jsx)(n.Touchable,{animate:!0,onPress:function(){l.rakuenStore.updateTopicReaded(O,Number(f)),g.push("Topic",{topicId:O,_title:u,_replies:"+"+f,_time:v})},children:(0,p.jsxs)(o.default,{style:k.wrap,children:[(0,p.jsxs)(n.Text,{size:15,bold:!0,children:[(0,d.HTMLDecode)(u),(0,p.jsxs)(n.Text,{type:T?"sub":"main",size:11,lineHeight:15,children:[" ",M]}),!!r&&(0,p.jsxs)(n.Text,{type:"main",size:11,lineHeight:15,children:[" ",r]})]}),(0,p.jsx)(n.Flex,{style:l._.mt.xs,children:(0,p.jsxs)(n.Text,{type:"sub",size:11,lineHeight:12,children:["最后回复 ",(0,d.correctAgo)(v)," /"," ",(0,p.jsx)(i.Name,{userId:N,type:"sub",size:11,lineHeight:12,showFriend:!0,children:h})," ","/ ",j]})})]})})})]}),(0,p.jsx)(c.default,{topicId:O})]})}),a.COMPONENT)},"./src/screens/rakuen/history/component/reply-list/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{item:{paddingLeft:r._.wind-r._._wind+r._.md},wrap:{paddingVertical:r._.md,paddingRight:r._.wind},avatar:{marginTop:r._.md,marginRight:12}}}))},"./src/screens/rakuen/history/component/reply-list/list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/reply-list/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"List")},"./src/screens/rakuen/history/component/reply-list/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.object.assign.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),l=r(t("./src/screens/rakuen/history/component/reply-list/item/index.tsx")),d=t("./src/screens/rakuen/history/component/reply-list/list/ds.ts"),u=t("./src/screens/rakuen/history/component/reply-list/list/styles.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=s.$.myReply,r=t.list;return t._loaded&&!r.length?(0,c.jsxs)(o.Flex,{style:u.styles.empty,direction:"column",justify:"center",children:[(0,c.jsx)(o.Mesume,{}),(0,c.jsx)(o.Text,{style:n._.mt.sm,type:"sub",children:"好像什么都没有"})]}):(0,c.jsx)(o.ScrollView,{children:r.map((function(e){return(0,c.jsx)(l.default,Object.assign({},e),e.href)}))})}),d.COMPONENT)},"./src/screens/rakuen/history/component/reply-list/list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({empty:{minHeight:240}})},"./src/screens/rakuen/history/component/reply-list/title/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/es.object.assign.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=r(t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),i=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(s);if(t&&t.has(e))return t.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}(t("react")),l=t("./src/components/index.ts"),d=t("./node_modules/react/jsx-runtime.js"),u=["children","numberOfLines"];function c(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:s})(e)}s.default=function(e){var s=e.children,t=e.numberOfLines,r=(0,n.default)(e,u),c=(0,i.useState)(t),a=(0,o.default)(c,2),m=a[0],p=a[1];return(0,d.jsx)(l.Text,Object.assign({},r,{numberOfLines:m,onPress:function(){p(0)},children:s}))}},"./src/screens/rakuen/history/component/tab/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.STATUS_MAP=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Tab"),s.STATUS_MAP={wishes:"wish",collections:"collect",doings:"doing",on_hold:"onHold",dropped:"dropped"}},"./src/screens/rakuen/history/component/tab/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/es.object.assign.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_(s);if(t&&t.has(e))return t.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}(t("react")),n=t("./node_modules/react-native-tab-view/lib/module/index.js"),i=t("./node_modules/mobx-react/dist/mobxreact.esm.js"),l=t("./src/components/index.ts"),d=t("./src/stores/index.ts"),u=t("./src/utils/decorators/index.ts"),c=t("./src/utils/dev/index.ts"),a=t("./src/screens/rakuen/history/ds.ts"),m=r(t("./src/screens/rakuen/history/component/favor-list/index.tsx")),p=r(t("./src/screens/rakuen/history/component/local-list/index.tsx")),f=r(t("./src/screens/rakuen/history/component/reply-list/index.tsx")),j=t("./src/screens/rakuen/history/component/tab/ds.ts"),y=t("./src/screens/rakuen/history/component/tab/styles.ts"),h=t("./node_modules/react/jsx-runtime.js");function _(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(_=function(e){return e?t:s})(e)}s.default=(0,u.c)((function(e,s){var t=s.$;(0,c.r)(j.COMPONENT);var r=(0,o.useMemo)((function(){return(0,n.SceneMap)({reply:function(){return(0,h.jsx)(f.default,{})},favor:function(){return(0,h.jsx)(m.default,{})},local:function(){return(0,h.jsx)(p.default,{})}})}),[]);return(0,i.useObserver)((function(){var e=(0,y.memoStyles)();return(0,h.jsx)(l.TabView,{lazyPreloadDistance:0,navigationState:{index:t.state.page,routes:a.TABS},renderTabBar:function(s){return(0,h.jsx)(l.TabBar,Object.assign({},s,{style:e.tabBar,tabStyle:e.tab,labelStyle:e.label,indicatorStyle:e.indicator,pressOpacity:1,pressColor:"transparent",renderLabel:function(e){var s,r=e.route,o=e.focused,n=r.title;return"收藏"===n?s=t.list.length:"缓存"===n&&(s=t.keys.length),(0,h.jsxs)(l.Flex,{style:d._.container.block,justify:"center",children:[(0,h.jsx)(l.Text,{type:"title",size:13,bold:o,noWrap:!0,children:n}),!!s&&(0,h.jsxs)(l.Text,{type:"sub",size:11,bold:!0,lineHeight:13,noWrap:!0,children:[" ",s," "]})]})}}))},renderScene:r,onIndexChange:t.onIndexChange},d._.orientation)}))}))},"./src/screens/rakuen/history/component/tab/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/screens/rakuen/history/ds.ts");s.memoStyles=r._.memoStyles((function(){var e=r._.window.width/o.TABS.length;return{tabBar:{backgroundColor:r._.ios("transparent",r._.select("transparent",r._.deepDark?r._._colorPlain:r._._colorDarkModeLevel1)),borderBottomWidth:r._.select(r._.ios(0,r._.hairlineWidth),r._.deepDark?0:r._.hairlineWidth),borderBottomColor:r._.colorBorder,elevation:0},tab:{width:e,height:48},label:{padding:0},indicator:{width:16,height:4,marginLeft:(e-16)/2,backgroundColor:r._.colorMain,borderRadius:4}}}))},"./src/screens/rakuen/history/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.TABS=s.DS=s.COMPONENT=void 0;s.COMPONENT="RakuenHistory",s.TABS=[{key:"reply",title:"我回复的"},{key:"favor",title:"收藏"},{key:"local",title:"缓存"}],s.DS=["小组","条目","章节","人物","日志"]},"./src/screens/rakuen/history/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/rakuen/history/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Header")},"./src/screens/rakuen/history/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),i=t("./src/screens/rakuen/history/header/ds.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.navigation;return(0,l.jsx)(o.Header,{title:"帖子聚合",alias:"本地帖子",hm:["rakuen/history","RakuenHistory"],headerRight:function(){return(0,l.jsx)(o.Header.Popover,{data:["说明"],onSelect:function(e){"说明"===e&&t.push("Information",{title:"帖子聚合",advance:!0,message:["能快速查看回复和贴贴信息，图 1 为普通用户示例，图 2 为会员示例支持同时显示更多自己的回复"],images:["https://cdn.nlark.com/yuque/0/2024/png/386799/1718099312472-ca3d7ec4-ebc9-4091-891c-52a10241c0b0.png","https://cdn.nlark.com/yuque/0/2024/png/386799/1718099326689-d6f24f78-4f63-4bef-af1a-d9d21839b52b.png"]})}})}})}),i.COMPONENT)},"./src/screens/rakuen/history/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),i=t("./src/utils/hooks/index.ts"),l=r(t("./src/screens/rakuen/history/component/tab/index.tsx")),d=r(t("./src/screens/rakuen/history/header/index.tsx")),u=r(t("./src/screens/rakuen/history/store/index.ts")),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.ic)(u.default,(function(e,s){var t=s.$;return(0,i.useRunAfter)((function(){t.init()})),(0,i.useObserver)((function(){return(0,c.jsxs)(o.Component,{id:"screen-history",children:[(0,c.jsx)(d.default,{}),(0,c.jsx)(o.Page,{loaded:t.state._loaded,children:(0,c.jsx)(l.default,{})})]})}))}))},"./src/screens/rakuen/history/store/action.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.parse-int.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=t("./src/utils/index.ts"),f=t("./src/utils/kv/index.ts"),j=o(t("./src/screens/rakuen/history/store/fetch.ts")),y=t("./src/screens/rakuen/history/store/ds.ts");function h(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,a.default)(e);if(s){var o=(0,a.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,c.default)(this,t)}}s.default=function(e){(0,u.default)(t,e);var s=h(t);function t(){var e,o;(0,l.default)(this,t);for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return e=s.call.apply(s,[this].concat(u)),(0,m.default)((0,d.default)(e),"onIndexChange",(function(s){e.setState({page:s}),e.setStorage(y.NAMESPACE)})),(0,m.default)((0,d.default)(e),"onValueChange",(function(s){e.setState({type:s}),e.setStorage(y.NAMESPACE)})),(0,m.default)((0,d.default)(e),"onPage",(o=(0,n.default)(r.mark((function s(t){var o,n;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.length){s.next=2;break}return s.abrupt("return",!0);case 2:if(o=[],t.forEach((function(e){var s="favor_"+e.replace("/","_");o.push(s)})),o.length){s.next=6;break}return s.abrupt("return",!0);case 6:return s.next=8,(0,f.gets)(o);case 8:n=s.sent,e.setState({topics:n}),e.setStorage(y.NAMESPACE);case 11:case"end":return s.stop()}}),s)}))),function(e){return o.apply(this,arguments)})),(0,m.default)((0,d.default)(e),"prev",(0,n.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(1!==(t=e.state.replyPage)){s.next=3;break}return s.abrupt("return");case 3:e.setState({replyPage:t-1,show:!1,ipt:String(t-1)}),e.fetchGroup(),setTimeout((function(){e.setState({show:!0}),e.setStorage(y.NAMESPACE)}),400);case 6:case"end":return s.stop()}}),s)})))),(0,m.default)((0,d.default)(e),"next",(0,n.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=e.state.replyPage,e.setState({replyPage:t+1,show:!1,ipt:String(t+1)}),e.fetchGroup(),setTimeout((function(){e.setState({show:!0}),e.setStorage(y.NAMESPACE)}),400);case 4:case"end":return s.stop()}}),s)})))),(0,m.default)((0,d.default)(e),"onChange",(function(s){var t=s.nativeEvent.text;e.setState({ipt:t})})),(0,m.default)((0,d.default)(e),"doSearch",(function(){var s=e.state.ipt,t=""===s?1:parseInt(s);t<1?(0,p.info)("请输入正确页码"):(e.setState({replyPage:t,show:!1,ipt:String(t)}),e.fetchGroup(),setTimeout((function(){e.setState({show:!0}),e.setStorage(y.NAMESPACE)}),400))})),e}return(0,i.default)(t)}(j.default)},"./src/screens/rakuen/history/store/computed.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.array.from.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.set.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.parse-int.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.array.reverse.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.string.sub.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,n=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),i=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=r(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),m=t("./node_modules/mobx/dist/mobx.esm.js"),p=t("./src/stores/index.ts"),f=t("./src/utils/index.ts"),j=r(t("./src/screens/rakuen/history/store/state.ts")),y=t("./src/screens/rakuen/history/store/ds.ts");function h(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,c.default)(e);if(s){var o=(0,c.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,u.default)(this,t)}}s.default=(o=function(e){(0,d.default)(t,e);var s=h(t);function t(){return(0,i.default)(this,t),s.apply(this,arguments)}return(0,l.default)(t,[{key:"keys",get:function(){var e=p.rakuenStore.state,s=e.topic,t=e.cloudTopic;return Array.from(new Set([].concat((0,n.default)(Object.keys(s)),(0,n.default)(Object.keys(t))))).filter((function(e){return!(!e.includes("group/")||e.includes("undefined"))&&!!/^group\/(\d+)$/.test(e)})).sort((function(e,s){var t,r;return(0,f.desc)(parseInt(null==(t=e.split("/"))?void 0:t[1]),parseInt(null==(r=s.split("/"))?void 0:r[1]))}))}},{key:"sections",get:function(){var e=[],s={};return this.keys.forEach((function(t){var r=p.rakuenStore.state.topic[t]||p.rakuenStore.state.cloudTopic[t];if(null!=r&&r.title&&"undefined"!==(null==r?void 0:r.title)){var o=(r.time||"").split(" ")[0];o in s||(s[o]=e.length,e.push({title:o,data:[]})),e[s[o]].data.push(Object.assign({topicId:t},r))}})),e}},{key:"isFavor",value:function(e){return(0,m.computed)((function(){return p.rakuenStore.favorV2(e)})).get()}},{key:"list",get:function(){var e=this.state.type,s=p.rakuenStore.state.favorV2,t=[];return Object.keys(s).map((function(e){s[e]&&t.push(e)})),t.filter((function(s){return"小组"===e?s.includes("group/"):"条目"===e?s.includes("subject/"):"章节"===e?s.includes("ep/"):"人物"===e?s.includes("crt/")||s.includes("prsn/"):"日志"===e?s.includes("blog/"):s.includes("group/")})).sort((function(e,s){var t,r;return(0,f.desc)(parseInt(null==(t=e.split("/"))?void 0:t[1]),parseInt(null==(r=s.split("/"))?void 0:r[1]))}))}},{key:"topic",value:function(e){var s=this;return(0,m.computed)((function(){return s.state.topics["favor_"+e.replace("/","_")]||null})).get()}},{key:"myReply",get:function(){return p.rakuenStore.group("my_reply",this.state.replyPage)}},{key:"readed",value:function(e){return(0,m.computed)((function(){return p.rakuenStore.readed(e)})).get()}},{key:"avatar",value:function(e){return(0,m.computed)((function(){return p.rakuenStore.topic(e).avatar})).get()}},{key:"comment",value:function(e){return(0,m.computed)((function(){var s=p.systemStore.isAdvance?y.COMMENT_LIMIT_ADVANCE:y.COMMENT_LIMIT,t=[];return p.rakuenStore.comments(e).list.slice().reverse().forEach((function(e){t.length>=s||e.userId===p.userStore.myId&&!e.message.includes("删除了回复")&&(t.push({id:e.id,floor:e.floor,time:e.time,message:e.message}),t.length>=s)||e.sub.forEach((function(e){t.length>=s||e.userId!==p.userStore.myId||e.message.includes("删除了回复")||(t.push({id:e.id,floor:e.floor,time:e.time,message:e.message}),t.length)}))})),t})).get()}}]),t}(j.default),(0,a.default)(o.prototype,"keys",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"keys"),o.prototype),(0,a.default)(o.prototype,"sections",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"sections"),o.prototype),(0,a.default)(o.prototype,"list",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"list"),o.prototype),(0,a.default)(o.prototype,"myReply",[m.computed],Object.getOwnPropertyDescriptor(o.prototype,"myReply"),o.prototype),o)},"./src/screens/rakuen/history/store/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.STATE=s.NAMESPACE=s.COMMENT_LIMIT_ADVANCE=s.COMMENT_LIMIT=void 0;var r=t("./src/screens/rakuen/history/ds.ts");s.NAMESPACE="Screen"+r.COMPONENT,s.STATE={page:0,replyPage:0,ipt:"1",show:!0,topics:{},type:"小组",_loaded:!1},s.COMMENT_LIMIT=3,s.COMMENT_LIMIT_ADVANCE=10},"./src/screens/rakuen/history/store/fetch.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.number.constructor.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=t("./src/stores/index.ts"),f=t("./src/stores/rakuen/utils.ts"),j=t("./src/utils/index.ts"),y=t("./src/constants/index.ts"),h=o(t("./src/screens/rakuen/history/store/computed.ts"));function _(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,a.default)(e);if(s){var o=(0,a.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,c.default)(this,t)}}var b={};s.default=function(e){(0,u.default)(t,e);var s=_(t);function t(){var e;(0,l.default)(this,t);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return e=s.call.apply(s,[this].concat(i)),(0,m.default)((0,d.default)(e),"fetchGroup",(0,n.default)(r.mark((function s(){return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,p.rakuenStore.fetchGroup({groupId:"my_reply",page:e.state.replyPage});case 2:return setTimeout((function(){e.fetchTopicQueue()}),4e3),s.abrupt("return",!0);case 4:case"end":return s.stop()}}),s)})))),(0,m.default)((0,d.default)(e),"fetchTopicQueue",(0,n.default)(r.mark((function s(){var t,o,n;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.myReply.list.map((function(e){return e.href.replace("/group/topic/","group/")})),s.next=3,(0,j.queue)(t.map((function(e){return function(){var s="comments"+(0,f.getInt)(e);return p.rakuenStore.init(s)}})));case 3:return o=(0,j.getTimestamp)(),n=[],t.forEach((function(s){if(b[s])return!0;var t=p.rakuenStore.comments(s)._loaded;if(t&&o-Number(t)<=y.H12*Number(e.state.page))return!0;b[s]=!0,n.push((function(){return console.info("fetchTopicQueue",s),p.rakuenStore.fetchTopic({topicId:s})}))})),s.abrupt("return",(0,j.queue)(n));case 7:case"end":return s.stop()}}),s)})))),e}return(0,i.default)(t)}(h.default)},"./src/screens/rakuen/history/store/index.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.object.assign.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=t("./src/stores/index.ts"),f=o(t("./src/screens/rakuen/history/store/action.ts")),j=t("./src/screens/rakuen/history/store/ds.ts");function y(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,a.default)(e);if(s){var o=(0,a.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,c.default)(this,t)}}var h=function(e){(0,u.default)(t,e);var s=y(t);function t(){var e;(0,l.default)(this,t);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return e=s.call.apply(s,[this].concat(i)),(0,m.default)((0,d.default)(e),"init",(0,n.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getStorage(j.NAMESPACE);case 2:return t=s.sent,s.next=5,p.rakuenStore.init("topic");case 5:return s.next=7,p.rakuenStore.init("cloudTopic");case 7:return e.setState(Object.assign({},t,{_loaded:!0})),p.rakuenStore.getFavor(),e.fetchGroup(),s.abrupt("return",!0);case 11:case"end":return s.stop()}}),s)})))),e}return(0,i.default)(t)}(f.default);s.default=h},"./src/screens/rakuen/history/store/state.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),n=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),d=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=t("./node_modules/mobx/dist/mobx.esm.js"),m=r(t("./src/utils/store/index.ts")),p=t("./src/screens/rakuen/history/store/ds.ts");function f(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,u.default)(e);if(s){var o=(0,u.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,d.default)(this,t)}}s.default=function(e){(0,l.default)(t,e);var s=f(t);function t(){var e;(0,n.default)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=s.call.apply(s,[this].concat(o)),(0,c.default)((0,i.default)(e),"state",(0,a.observable)(p.STATE)),e}return(0,o.default)(t)}(m.default)}}]);