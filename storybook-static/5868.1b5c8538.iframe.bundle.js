(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5868],{"./src/screens/tinygrail/clipboard/btn/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.filter.js");var n=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(r("react"));var s=r("./src/components/index.ts"),o=r("./src/utils/index.ts"),i=r("./src/utils/decorators/index.ts"),a=r("./src/screens/tinygrail/clipboard/btn/styles.ts"),l=r("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)((function(e,t){var r=t.$,n=(0,a.memoStyles)(),i=r.list.list.filter((function(e){return!!e.icoId})).map((function(e){return e.icoId}));return i.length?(0,l.jsx)(s.Flex,{style:n.wrap,justify:"center",children:(0,l.jsx)(s.Button,{style:n.btn,type:"bid",onPress:function(){(0,o.confirm)("对列表中 "+i.length+" 个ICO角色进行注资各5000, 确定?",(function(){return r.batchICO(i)}),"小圣杯助手")},children:"一键注资"})}):null}));try{btn.displayName="btn",btn.__docgenInfo={description:"",displayName:"btn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/clipboard/btn/index.tsx#btn"]={docgenInfo:btn.__docgenInfo,name:"btn",path:"src/screens/tinygrail/clipboard/btn/index.tsx#btn"})}catch(e){}},"./src/screens/tinygrail/clipboard/btn/styles.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var n=r("./src/stores/index.ts");t.memoStyles=n._.memoStyles((function(){return{wrap:{position:"absolute",zIndex:1,right:n._.wind,bottom:32,left:n._.wind},btn:{width:104,borderRadius:48}}}))},"./src/screens/tinygrail/clipboard/index.tsx":(e,t,r)=>{var n=r("./node_modules/@babel/runtime/regenerator/index.js");r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),l=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),d=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=s(r("react")),f=r("./src/components/index.ts"),m=r("./src/screens/_/index.ts"),p=r("./src/stores/index.ts"),b=r("./src/utils/decorators/index.ts"),y=r("./src/utils/fetch/index.ts"),j=s(r("./src/screens/tinygrail/clipboard/btn/index.tsx")),h=s(r("./src/screens/tinygrail/clipboard/list/index.tsx")),_=s(r("./src/screens/tinygrail/clipboard/store.ts")),x=r("./node_modules/react/jsx-runtime.js");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var s=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var v=function(e){(0,l.default)(s,e);var t,r=g(s);function s(){return(0,i.default)(this,s),r.apply(this,arguments)}return(0,a.default)(s,[{key:"componentDidMount",value:(t=(0,o.default)(n.mark((function e(){var t,r,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.context,r=t.$,s=t.navigation,r.init(s);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.context.$;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.Header,{title:"粘贴板",hm:["tinygrail/clipboard","TinygrailClipboard"],statusBarEvents:!1,statusBarEventsType:"Tinygrail",headerRight:function(){return(0,x.jsxs)(f.Flex,{children:[(0,x.jsx)(m.IconHeader,{style:p._.mr.xs,name:"md-refresh",color:p._.colorTinygrailPlain,size:22,onPress:function(){(0,y.t)("粘贴板.刷新"),e.init()}}),(0,x.jsx)(m.IconHeader,{name:"md-ios-share",color:p._.colorTinygrailPlain,onPress:function(){(0,y.t)("粘贴板.分享"),e.onShare()}})]})}}),(0,x.jsxs)(f.Page,{style:p._.container.tinygrail,children:[(0,x.jsx)(h.default,{}),(0,x.jsx)(j.default,{})]})]})}}]),s}(u.default.Component);t.default=(0,b.inject)(_.default)((0,b.obc)(v));try{clipboard.displayName="clipboard",clipboard.__docgenInfo={description:"",displayName:"clipboard",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/clipboard/index.tsx#clipboard"]={docgenInfo:clipboard.__docgenInfo,name:"clipboard",path:"src/screens/tinygrail/clipboard/index.tsx#clipboard"})}catch(e){}},"./src/screens/tinygrail/clipboard/list/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.assign.js");var n=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(r("react"));var s=r("./src/components/index.ts"),o=r("./src/stores/index.ts"),i=r("./src/utils/index.ts"),a=r("./src/utils/decorators/index.ts"),l=n(r("./src/screens/tinygrail/_/item/index.tsx")),d=r("./node_modules/react/jsx-runtime.js"),c={id:"粘贴板.跳转"};t.default=(0,a.obc)((function(e,t){var r=t.$;return(0,d.jsx)(s.ListView,{style:o._.container.flex,contentContainerStyle:o._.container.bottom,keyExtractor:i.keyExtractor,refreshControlProps:{color:o._.colorTinygrailText},footerTextType:"tinygrailText",footerEmptyDataText:"您可以复制带有人物链接或id的文本\n进入本页面后会自动获取粘贴板文本中所有角色id\n获取角色数据并生成列表",data:r.list,windowSize:6,initialNumToRender:24,maxToRenderPerBatch:24,updateCellsBatchingPeriod:24,lazy:24,scrollToTop:!0,renderItem:u})}));function u(e){var t=e.item,r=e.index;return(0,d.jsx)(l.default,Object.assign({index:r,event:c},t))}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/clipboard/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/tinygrail/clipboard/list/index.tsx#list"})}catch(e){}},"./src/screens/tinygrail/clipboard/store.ts":(e,t,r)=>{var n=r("./node_modules/@babel/runtime/regenerator/index.js");function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,s=function(){};return{s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.array.find-index.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.is-array.js");var i=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l=i(r("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=i(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=i(r("./node_modules/@babel/runtime/helpers/createClass.js")),u=i(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),f=i(r("./node_modules/@babel/runtime/helpers/inherits.js")),m=i(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=i(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),b=i(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),y=i(r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=i(r("./node_modules/react-native-web/dist/exports/Clipboard/index.js")),h=r("./node_modules/mobx/dist/mobx.esm.js"),_=r("./src/stores/index.ts"),x=r("./src/utils/index.ts"),g=i(r("./src/utils/store/index.ts")),v=r("./src/utils/fetch/index.ts"),S=r("./src/screens/tinygrail/_/utils.ts");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var s=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}t.default=(a=function(e){(0,f.default)(r,e);var t=O(r);function r(){var e,o,i;(0,d.default)(this,r);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return e=t.call.apply(t,[this].concat(c)),(0,b.default)((0,u.default)(e),"state",(0,h.observable)({ids:[],_loaded:!1})),(0,b.default)((0,u.default)(e),"init",(o=(0,l.default)(n.mark((function t(r){var o,i,a,l,d,c,u;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.default.getString();case 2:if(o=t.sent){t.next=5;break}return t.abrupt("return");case 5:if(i=String(o).match(/\d+/g),a=[],i&&(a=i.map((function(e){return Number(e)})).filter((function(e){return Number(e)>100}))).length&&j.default.setString(""),a.length){t.next=10;break}return t.abrupt("return");case 10:l=n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.throttleInfo)(a.findIndex((function(e){return e===t}))+1+" / "+a.length),e.next=3,_.tinygrailStore.fetchCharacters([t]);case 3:case"end":return e.stop()}}),e)})),d=s(a),t.prev=12,d.s();case 14:if((c=d.n()).done){t.next=19;break}return u=c.value,t.delegateYield(l(u),"t0",17);case 17:t.next=14;break;case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(12),d.e(t.t1);case 24:return t.prev=24,d.f(),t.finish(24);case 27:e.setState({ids:a,_loaded:(0,x.getTimestamp)()}),r&&r.setParams({title:"粘贴板 ("+e.list.list.length+")"});case 29:case"end":return t.stop()}}),t,null,[[12,21,24,27]])}))),function(e){return o.apply(this,arguments)})),(0,b.default)((0,u.default)(e),"onShare",(function(){0!==e.list.list.length?(0,x.copy)(e.list.list.map((function(e){return"https://bgm.tv/character/"+e.id+"\n"+e.name})).join("\n"),"已复制 "+e.list.list.length+" 个角色的分享链接"):(0,x.info)("当前没有角色数据")})),(0,b.default)((0,u.default)(e),"batchICO",(i=(0,l.default)(n.mark((function e(t){var r,o,i,a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.t)("粘贴板.一键注资",{length:t.length}),r=n.mark((function e(r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.throttleInfo)(t.findIndex((function(e){return e===r}))+1+" / "+t.length),e.next=3,_.tinygrailStore.doJoin({id:r,amount:5e3});case 3:case"end":return e.stop()}}),e)})),o=s(t),e.prev=3,o.s();case 5:if((i=o.n()).done){e.next=10;break}return a=i.value,e.delegateYield(r(a),"t0",8);case 8:e.next=5;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),o.e(e.t1);case 15:return e.prev=15,o.f(),e.finish(15);case 18:(0,x.feedback)(),(0,x.info)("已完成注资");case 20:case"end":return e.stop()}}),e,null,[[3,12,15,18]])}))),function(e){return i.apply(this,arguments)})),e}return(0,c.default)(r,[{key:"list",get:function(){var e=this.state.ids;return(0,S.relation)({list:e.map((function(e){return _.tinygrailStore.characters(e)})).filter((function(e){return 0!==e.id})),pagination:{page:1,pageTotal:1},_loaded:(0,x.getTimestamp)()})}}]),r}(g.default),(0,y.default)(a.prototype,"list",[h.computed],Object.getOwnPropertyDescriptor(a.prototype,"list"),a.prototype),a)}}]);