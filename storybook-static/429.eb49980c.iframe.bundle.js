(self.webpackChunkweb=self.webpackChunkweb||[]).push([[429],{"./src/screens/user/user-setting/component/avatars/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Avatars")},"./src/screens/user/user-setting/component/avatars/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),i=t("./src/utils/decorators/index.ts"),a=t("./src/utils/user-setting/index.ts"),u=t("./src/screens/user/user-setting/component/utils.ts"),c=t("./src/screens/user/user-setting/component/avatars/ds.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.avatar,r=s.$,i=r.state.avatars;return(0,l.jsxs)(l.Fragment,{children:[(0,d.arrGroup)(i,5).map((function(e,s){return(0,l.jsx)(n.Flex,{justify:"between",children:e.map((function(e,d){return 2===s&&4===d?(0,l.jsx)(n.Touchable,{style:o._.mb.md,animate:!0,scale:.9,onPress:function(){return r.onSelectAvatar("")},children:(0,l.jsx)(n.Image,{src:t,headers:(0,u.getHeaders)(t),size:60,radius:30,border:o._.__colorPlain__,borderWidth:0,placeholder:!1,shadow:!0,fallback:!0})},e):(0,l.jsx)(n.Touchable,{style:o._.mb.md,animate:!0,scale:.9,onPress:function(){return r.onSelectAvatar(e)},children:(0,l.jsx)(n.Image,{src:(0,a.fixedRemote)(e,!0),headers:(0,u.getHeaders)(e),size:60,radius:30,border:o._.__colorPlain__,borderWidth:0,placeholder:!1,shadow:!0,fallback:!0})},e)}))},s)})),(0,l.jsx)(n.Text,{style:o._.mt.md,align:"center",size:10,bold:!0,type:"sub",children:"(以上图来源自 pixiv)"})]})}),c.COMPONENT)},"./src/screens/user/user-setting/component/bgs/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Bgs")},"./src/screens/user/user-setting/component/bgs/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.filter.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),i=t("./src/utils/decorators/index.ts"),a=t("./src/utils/user-setting/index.ts"),u=t("./src/constants/index.ts"),c=t("./src/screens/user/user-setting/component/utils.ts"),l=t("./src/screens/user/user-setting/component/bgs/ds.ts"),m=t("./src/screens/user/user-setting/component/bgs/styles.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.avatar,r=e.more,i=e.onViewOrigin,l=e.onMore,f=s.$,g=(0,m.memoStyles)(),x=f.state.bgs;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n.Flex,{wrap:"wrap",children:[(0,p.jsxs)(n.Touchable,{style:g.bg,animate:!0,onPress:function(){return f.onSelectBg("")},children:[(0,p.jsx)(n.Image,{src:(0,a.fixedRemote)(t),headers:(0,c.getHeaders)(t),width:g.image.width,height:g.image.height,radius:!0,blurRadius:u.IOS?f.state.avatar?64:16:8,fallback:!0},t),(0,p.jsx)(n.Text,{style:g.blurText,type:"__plain__",bold:!0,align:"center",children:"头像毛玻璃"})]}),x.filter((function(e,s){return!!r||s<=x.length/2})).map((function(e,s){return(0,p.jsxs)(n.Touchable,{style:(0,d.stl)(g.bg,s%2==0&&o._.ml.md),animate:!0,onPress:function(){return f.onSelectBg(e)},onLongPress:function(){return i(e,s)},children:[(0,p.jsx)(n.Image,{src:(0,a.fixedRemote)(e),width:g.image.width,height:g.image.height,headers:(0,c.getHeaders)(e),radius:!0},e),!s&&(0,p.jsx)(n.Heatmap,{id:"个人设置.查看原图"})]},s)}))]}),(0,p.jsx)(n.Touchable,{style:[o._.mt.md,o._.mb.md],onPress:l,children:(0,p.jsx)(n.Text,{align:"center",size:13,bold:!0,children:r?"没有更多了":"点击加载更多"})}),(0,p.jsx)(n.Text,{style:o._.mt.md,align:"center",size:10,bold:!0,type:"sub",children:"长按可查看原图 (以上图来源自 pixiv)"})]})}),l.COMPONENT)},"./src/screens/user/user-setting/component/bgs/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){var e=Math.floor((r._.window.width-r._.md-2*r._._wind)/2),s=.72*e;return{bg:{width:e,height:s,marginBottom:r._.md},image:{width:e,height:s},blurText:{position:"absolute",zIndex:1,top:52,left:0,right:0,textShadowOffset:{width:1,height:1},textShadowRadius:1,textShadowColor:"rgba(0, 0, 0, 0.24)",opacity:.8}}}))},"./src/screens/user/user-setting/component/check/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Check")},"./src/screens/user/user-setting/component/check/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),i=t("./src/utils/dev/index.ts"),a=t("./src/screens/user/user-setting/component/check/ds.ts"),u=t("./node_modules/react/jsx-runtime.js");function c(e){var s=e.$;return(0,i.r)(a.COMPONENT),(0,u.jsxs)(n.Flex,{children:[(0,u.jsx)(o.IconHeader,{style:d._.mr.sm,name:"md-remove-circle-outline",onPress:function(){return s.onInit(!0)}}),(0,u.jsx)(o.IconHeader,{style:d._.mr.xs,name:"md-check",onPress:s.onSave,children:(0,u.jsx)(n.Heatmap,{id:"个人设置.保存"})})]})}s.default=c;try{c.displayName="Check",c.__docgenInfo={description:"",displayName:"Check",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenUserSetting"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/user-setting/component/check/index.tsx#Check"]={docgenInfo:c.__docgenInfo,name:"Check",path:"src/screens/user/user-setting/component/check/index.tsx#Check"})}catch(e){}},"./src/screens/user/user-setting/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Component")},"./src/screens/user/user-setting/component/form/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Form")},"./src/screens/user/user-setting/component/form/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),a=t("./src/utils/decorators/index.ts"),u=t("./src/constants/index.ts"),c=t("./src/screens/user/user-setting/component/form/ds.ts"),l=t("./src/screens/user/user-setting/component/form/styles.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,a.obc)((function(e,s){var t=e.expand,r=e.onExpand,a=s.$;return(0,m.jsxs)(m.Fragment,{children:[t&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(n.Flex,{style:d._.mt.md,children:[(0,m.jsx)(n.Text,{children:"昵称"}),(0,m.jsx)(n.Flex.Item,{style:d._.ml.md,children:(0,m.jsx)(n.Input,{style:l.styles.input,defaultValue:a.state.nickname,placeholder:"请填入昵称",autoCapitalize:"none",showClear:!0,onChangeText:function(e){return a.onChangeText("nickname",e)}})})]}),(0,m.jsxs)(n.Flex,{style:d._.mt.md,children:[(0,m.jsx)(n.Text,{children:"签名"}),(0,m.jsx)(n.Flex.Item,{style:d._.ml.md,children:(0,m.jsx)(n.Input,{style:l.styles.input,defaultValue:a.state.sign_input,placeholder:"请填入签名",autoCapitalize:"none",showClear:!0,onChangeText:function(e){return a.onChangeText("sign_input",e)}})})]}),(0,m.jsxs)(n.Flex,{style:d._.mt.md,children:[(0,m.jsx)(n.Text,{children:"头像"}),(0,m.jsx)(n.Flex.Item,{style:d._.ml.md,children:(0,m.jsx)(n.Input,{style:l.styles.input,defaultValue:a.state.avatar,placeholder:"请填入网络地址",autoCapitalize:"none",showClear:!0,onChangeText:function(e){return a.onChangeText("avatar",e)}})}),(0,m.jsx)(o.IconTouchable,{style:d._.ml.xs,name:"md-info-outline",onPress:function(){return(0,i.confirm)("此头像非网页版头像，仅在APP内时光机和个人空间中显示。需要输入图片网络地址，是否前往免费图床？",(function(){return(0,i.open)(u.HOST_IMAGE_UPLOAD)}),"提示")}})]}),(0,m.jsxs)(n.Flex,{style:[d._.mt.md,d._.mb.md],children:[(0,m.jsx)(n.Text,{children:"背景"}),(0,m.jsx)(n.Flex.Item,{style:d._.ml.md,children:(0,m.jsx)(n.Input,{style:l.styles.input,defaultValue:a.state.bg,placeholder:"请填入网络地址",autoCapitalize:"none",showClear:!0,onChangeText:function(e){return a.onChangeText("bg",e)}})}),(0,m.jsx)(o.IconTouchable,{style:d._.ml.xs,name:"md-info-outline",onPress:function(){return(0,i.confirm)("网页版没有背景概念，仅在APP内时光机和个人空间中显示。需要输入图片网络地址，是否前往免费图床？",(function(){return(0,i.open)(u.HOST_IMAGE_UPLOAD)}),"提示")}})]})]}),(0,m.jsx)(n.Touchable,{style:l.styles.more,onPress:r,children:(0,m.jsx)(n.Flex,{justify:"center",children:(0,m.jsx)(n.Text,{style:[d._.mt.sm,d._.mb.sm],size:13,type:"sub",bold:!0,children:t?"收起资料":"展开资料"})})})]})}),c.COMPONENT)},"./src/screens/user/user-setting/component/form/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({input:{height:40,paddingVertical:0,paddingRight:40,borderRadius:r._.radiusMd,overflow:"hidden"},more:{paddingBottom:r._.md,borderRadius:r._.radiusSm,overflow:"hidden"}})},"./src/screens/user/user-setting/component/preview/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Preview")},"./src/screens/user/user-setting/component/preview/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),d=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),a=t("./src/screens/user/user-setting/component/utils.ts"),u=t("./src/screens/user/user-setting/component/preview/ds.ts"),c=t("./src/screens/user/user-setting/component/preview/styles.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.bg,r=e.avatar,i=e.blurRadius,u=s.$,m=s.navigation,p=(0,c.memoStyles)(),f=u.usersInfo,g=f.nickname,x=f.id,h=f.username;return(0,l.jsxs)(n.default,{style:p.preview,children:[(0,l.jsx)(o.Image,{style:p.blurView,src:t,headers:(0,a.getHeaders)(t),width:d._.window.contentWidth,height:p.preview.height,blurRadius:i,fallback:!!i},t),(0,l.jsxs)(o.Flex,{style:p.mask,direction:"column",justify:"center",children:[(0,l.jsx)(o.Image,{style:p.avatar,src:r,headers:(0,a.getHeaders)(r),size:64,radius:32,border:d._.__colorPlain__,borderWidth:1.5,placeholder:!1,shadow:!0,fallback:!0},r),(0,l.jsxs)(o.Text,{style:d._.mt.sm,type:d._.select("plain","title"),size:12,children:[g,(0,l.jsxs)(o.Text,{type:d._.select("plain","title"),size:12,children:[" ",h||x?"@"+(h||x)+" ":""]})]})]}),(0,l.jsx)(n.default,{style:p.example,children:(0,l.jsx)(o.Touchable,{onPress:function(){m.push("Zone",{userId:"sukaretto"})},children:(0,l.jsx)(o.Text,{size:10,lineHeight:16,bold:!0,type:"__plain__",children:"[示例]"})})})]})}),u.COMPONENT)},"./src/screens/user/user-setting/component/preview/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{blurView:{backgroundColor:r._.colorPlain,borderRadius:r._.radiusMd,overflow:"hidden"},preview:{height:Math.floor(.72*r._.window.contentWidth),marginBottom:r._.sm},mask:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.24)",borderRadius:r._.radiusMd,overflow:"hidden"},avatar:{marginTop:r._.md,backgroundColor:"rgba(255, 255, 255, 0.8)"},example:{position:"absolute",zIndex:2,right:12,bottom:12,opacity:.72}}}))},"./src/screens/user/user-setting/component/refresh/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Refresh")},"./src/screens/user/user-setting/component/refresh/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),d=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),a=t("./src/screens/user/user-setting/component/refresh/ds.ts"),u=t("./src/screens/user/user-setting/component/refresh/styles.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.onRefresh;if(1!==s.$.state.selectedIndex)return null;var r=(0,u.memoStyles)();return(0,c.jsx)(n.default,{style:r.btn,children:(0,c.jsx)(o.Touchable,{style:r.touch,onPress:t,children:(0,c.jsx)(o.Flex,{style:r.icon,justify:"center",children:(0,c.jsx)(o.Iconfont,{name:"md-refresh",color:d._.colorPlain,size:20})})})})}),a.COMPONENT)},"./src/screens/user/user-setting/component/refresh/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts"),n=t("./src/constants/index.ts");s.memoStyles=r._.memoStyles((function(){return{btn:{position:"absolute",zIndex:1001,right:r._.wind,bottom:n.DEV?240:64},touch:{backgroundColor:r._.colorTitle,borderRadius:20,overflow:"hidden",opacity:.8},icon:{width:40,height:40}}}))},"./src/screens/user/user-setting/component/segmented/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.DS=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Segmented"),s.DS=["预设背景","随机头像"]},"./src/screens/user/user-setting/component/segmented/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.index-of.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/utils/decorators/index.ts"),d=t("./src/screens/user/user-setting/component/segmented/ds.ts"),i=t("./src/screens/user/user-setting/component/segmented/styles.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=s.$;return(0,a.jsx)(n.SegmentedControl,{style:i.styles.segmented,values:d.DS,selectedIndex:t.state.selectedIndex,onValueChange:function(e){return t.onValueChange(d.DS.indexOf(e))}},String(t.state._loaded))}),d.COMPONENT);try{segmented.displayName="segmented",segmented.__docgenInfo={description:"",displayName:"segmented",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/user-setting/component/segmented/index.tsx#segmented"]={docgenInfo:segmented.__docgenInfo,name:"segmented",path:"src/screens/user/user-setting/component/segmented/index.tsx#segmented"})}catch(e){}},"./src/screens/user/user-setting/component/segmented/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({segmented:{width:r._.window.contentWidth,height:36,marginBottom:24}})},"./src/screens/user/user-setting/component/utils.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.getHeaders=function(e){if("string"!=typeof e||!e.includes("hdslb.com"))return{Referer:""};return{Referer:"https://www.bilibili.com/"}}},"./src/screens/user/user-setting/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.STATE=s.REG_FIXED=s.REG_BG=s.REG_AVATAR=s.ONLINE_BGS_URL=s.NAMESPACE=s.COMPONENT=void 0;var r=t("./src/constants/index.ts"),n=s.COMPONENT="UserSetting";s.NAMESPACE="Screen"+n,s.STATE={nickname:"",sign_input:"",avatar:"",bg:"",selectedIndex:0,bgs:[],pixivs:[],avatars:[],_loaded:!1},s.ONLINE_BGS_URL=r.GITHUB_HOST+"/raw/master/bg.json",s.REG_BG=/\[bg\](.+?)\[\/bg\]/,s.REG_AVATAR=/\[avatar\](.+?)\[\/avatar\]/,s.REG_FIXED=/\[size=0\]\[avatar\]\[\/avatar\]\[\/size\]|\[size=0\]\[bg\]\[\/bg\]\[\/size\]/g},"./src/screens/user/user-setting/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Header")},"./src/screens/user/user-setting/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/utils/decorators/index.ts"),d=r(t("./src/screens/user/user-setting/component/check/index.tsx")),i=t("./src/screens/user/user-setting/header/ds.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=s.$;return(0,a.jsx)(n.Header,{title:"个人设置",hm:["userSetting","UserSetting"],headerRight:function(){return(0,a.jsx)(d.default,{$:t})}})}),i.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/user-setting/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/user/user-setting/header/index.tsx#header"})}catch(e){}},"./src/screens/user/user-setting/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/utils/decorators/index.ts"),d=t("./src/utils/hooks/index.ts"),i=r(t("./src/screens/user/user-setting/header/index.tsx")),a=r(t("./src/screens/user/user-setting/scroll/index.tsx")),u=r(t("./src/screens/user/user-setting/store.ts")),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.ic)(u.default,(function(e,s){var t=s.$;return(0,d.useRunAfter)((function(){t.init()})),(0,d.useObserver)((function(){return(0,c.jsxs)(n.Component,{id:"screen-user-setting",children:[(0,c.jsx)(i.default,{}),(0,c.jsx)(a.default,{})]})}))}));try{usersetting.displayName="usersetting",usersetting.__docgenInfo={description:"",displayName:"usersetting",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/user-setting/index.tsx#usersetting"]={docgenInfo:usersetting.__docgenInfo,name:"usersetting",path:"src/screens/user/user-setting/index.tsx#usersetting"})}catch(e){}},"./src/screens/user/user-setting/scroll/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/user-setting/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Scroll")},"./src/screens/user/user-setting/scroll/index.tsx":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=n(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=n(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=n(t("./node_modules/@babel/runtime/helpers/createClass.js")),a=n(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=n(t("./node_modules/@babel/runtime/helpers/inherits.js")),c=n(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=n(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=n(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=n(t("react")),f=n(t("./node_modules/react-native-web/dist/exports/View/index.js")),g=t("./src/components/index.ts"),x=t("./src/stores/index.ts"),h=t("./src/utils/index.ts"),_=t("./src/utils/decorators/index.ts"),j=t("./src/utils/dev/index.ts"),v=t("./src/utils/fetch/index.ts"),b=t("./src/utils/user-setting/index.ts"),y=t("./src/constants/index.ts"),O=n(t("./src/screens/user/user-setting/component/avatars/index.tsx")),S=n(t("./src/screens/user/user-setting/component/bgs/index.tsx")),T=n(t("./src/screens/user/user-setting/component/form/index.tsx")),C=n(t("./src/screens/user/user-setting/component/preview/index.tsx")),E=n(t("./src/screens/user/user-setting/component/refresh/index.tsx")),P=n(t("./src/screens/user/user-setting/component/segmented/index.tsx")),N=t("./src/screens/user/user-setting/scroll/ds.ts"),w=t("./src/screens/user/user-setting/scroll/styles.ts"),R=t("./node_modules/react/jsx-runtime.js");function M(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.default)(e);if(s){var n=(0,l.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,c.default)(this,t)}}var I=function(e){(0,u.default)(t,e);var s=M(t);function t(){var e;(0,d.default)(this,t);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return e=s.call.apply(s,[this].concat(i)),(0,m.default)((0,a.default)(e),"state",{expand:!1,more:!1}),(0,m.default)((0,a.default)(e),"scrollTo",(function(){})),(0,m.default)((0,a.default)(e),"onViewOrigin",(function(e,s){(0,v.t)("个人设置.查看原图",{index:s}),(0,h.open)(e.replace("small","origin"))})),(0,m.default)((0,a.default)(e),"onExpand",(function(){e.setState({expand:!e.state.expand})})),(0,m.default)((0,a.default)(e),"onMore",(function(){e.setState({more:!0})})),(0,m.default)((0,a.default)(e),"onRefresh",(0,o.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:y.IOS&&e.scrollTo({x:0,y:0,animated:!0}),t=e.context,t.$.onRefresh();case 3:case"end":return s.stop()}}),s)})))),e}return(0,i.default)(t,[{key:"avatar",get:function(){var e;return null==(e=this.context.$.usersInfo.avatar)?void 0:e.large}},{key:"previewAvatarSrc",get:function(){var e,s,t=this.context.$;return t.state.avatar?(0,b.fixedRemote)(t.state.avatar,!0)||(null==(s=t.usersInfo.avatar)?void 0:s.large):null==(e=t.usersInfo.avatar)?void 0:e.large}},{key:"previewBgSrc",get:function(){var e,s=this.context.$;return s.state.bg?(0,b.fixedRemote)(s.state.bg)||(0,b.fixedRemote)(s.state.avatar,!0)||(null==(e=s.usersInfo.avatar)?void 0:e.large):this.previewAvatarSrc}},{key:"blurRadius",get:function(){var e=this.context.$;return e.state.bg?0:y.IOS?""===e.state.bg&&e.state.avatar?48:10:8}},{key:"render",value:function(){var e=this;(0,j.r)(N.COMPONENT);var s=this.context.$.state.selectedIndex,t=this.state.expand,r=(0,R.jsx)(C.default,{bg:this.previewBgSrc,avatar:this.previewAvatarSrc,blurRadius:this.blurRadius});return(0,R.jsxs)(f.default,{style:x._.container.plain,children:[(0,R.jsx)(f.default,{style:this.styles.preview,children:!t&&r}),(0,R.jsxs)(g.ScrollView,{connectRef:function(s){return e.scrollTo=s},contentContainerStyle:this.styles.contentContainerStyle,keyboardDismissMode:"on-drag",children:[t&&r,(0,R.jsx)(T.default,{expand:this.state.expand,onExpand:this.onExpand}),(0,R.jsx)(P.default,{}),0===s&&(0,R.jsx)(S.default,{avatar:this.previewAvatarSrc,more:this.state.more,onViewOrigin:this.onViewOrigin,onMore:this.onMore}),1===s&&(0,R.jsx)(O.default,{avatar:this.avatar})]}),(0,R.jsx)(E.default,{onRefresh:this.onRefresh})]})}},{key:"styles",get:function(){return(0,w.memoStyles)()}}]),t}(p.default.Component);s.default=(0,_.obc)(I);try{scroll.displayName="scroll",scroll.__docgenInfo={description:"",displayName:"scroll",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/user-setting/scroll/index.tsx#scroll"]={docgenInfo:scroll.__docgenInfo,name:"scroll",path:"src/screens/user/user-setting/scroll/index.tsx#scroll"})}catch(e){}},"./src/screens/user/user-setting/scroll/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{contentContainerStyle:{paddingHorizontal:r._.wind,paddingBottom:r._.bottom},preview:{marginHorizontal:r._.wind}}}))},"./src/screens/user/user-setting/store.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.promise.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.match.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,d=n(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=n(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=n(t("./node_modules/@babel/runtime/helpers/createClass.js")),u=n(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=n(t("./node_modules/@babel/runtime/helpers/inherits.js")),l=n(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=n(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=n(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=n(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),g=t("./node_modules/mobx/dist/mobx.esm.js"),x=t("./src/stores/index.ts"),h=t("./src/utils/index.ts"),_=t("./src/utils/fetch/index.ts"),j=n(t("./src/utils/store/index.ts")),v=t("./src/utils/user-setting/index.ts"),b=t("./src/screens/user/user-setting/ds.ts");function y(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,m.default)(e);if(s){var n=(0,m.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,l.default)(this,t)}}s.default=(o=function(e){(0,c.default)(t,e);var s=y(t);function t(){var e;(0,i.default)(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=s.call.apply(s,[this].concat(o)),(0,p.default)((0,u.default)(e),"state",(0,g.observable)(b.STATE)),(0,p.default)((0,u.default)(e),"init",(0,d.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getStorage(b.NAMESPACE);case 2:if(s.t0=s.sent,s.t0){s.next=5;break}s.t0={};case 5:return t=s.t0,e.setState({avatar:t.avatar||"",bg:t.bg||"",selectedIndex:t.selectedIndex||0,bgs:t.bgs||[],pixivs:t.pixivs||[],avatars:t.avatars||[],_loaded:(0,h.getTimestamp)()}),s.next=9,e.onInit();case 9:return e.onRefresh(),s.abrupt("return",!0);case 11:case"end":return s.stop()}}),s)})))),(0,p.default)((0,u.default)(e),"fetchUserSetting",(0,d.default)(r.mark((function s(){var t,n,o,d,i;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,x.userStore.fetchUserSetting();case 2:return t=s.sent,n=t.nickname,o=void 0===n?"":n,d=t.sign_input,i=void 0===d?"":d,e.setState({nickname:o,sign_input:i}),e.setStorage(b.NAMESPACE),s.abrupt("return",t);case 7:case"end":return s.stop()}}),s)})))),(0,p.default)((0,u.default)(e),"fetchBgs",(0,d.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,fetch(b.ONLINE_BGS_URL+"?t="+(0,h.getTimestamp)()).then((function(e){return e.json()}));case 2:if(s.t0=s.sent,s.t0){s.next=5;break}s.t0=[];case 5:return t=s.t0,e.setState({bgs:t}),e.setStorage(b.NAMESPACE),s.abrupt("return",t);case 9:case"end":return s.stop()}}),s)})))),(0,p.default)((0,u.default)(e),"fetchAvatars",(0,d.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=(0,v.randomAvatars)(),e.setState({avatars:t}),e.setStorage(b.NAMESPACE),s.abrupt("return",t);case 4:case"end":return s.stop()}}),s)})))),(0,p.default)((0,u.default)(e),"onInit",(0,d.default)(r.mark((function s(){var t,n,o,d,i=arguments;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],s.next=3,e.fetchUserSetting();case 3:n=e.userSetting.sign,o=n.match(b.REG_BG),d=n.match(b.REG_AVATAR),e.setState({bg:(0,h.HTMLDecode)(String(o?String(o[1]).trim():"").replace(b.REG_FIXED,"")),avatar:(0,h.HTMLDecode)(String(d?String(d[1]).trim():"").replace(b.REG_FIXED,""))}),t&&(0,h.info)("已还原");case 8:case"end":return s.stop()}}),s)})))),(0,p.default)((0,u.default)(e),"onRefresh",(function(){var s=e.state.selectedIndex;return 0===s?e.fetchBgs():1===s?e.fetchAvatars():void 0})),(0,p.default)((0,u.default)(e),"onChangeText",(function(s,t){e.setState((0,p.default)({},s,t))})),(0,p.default)((0,u.default)(e),"onSelectBg",(function(s){e.setState({bg:s})})),(0,p.default)((0,u.default)(e),"onSelectAvatar",(function(s){e.setState({avatar:s})})),(0,p.default)((0,u.default)(e),"onSave",(0,d.default)(r.mark((function s(){var t,n,o,d,i,a,u,c,l,m,p;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=e.userSetting,n=t.formhash,o=t.sign,d=t.timeoffsetnew,i=e.state,a=i.avatar,u=i.bg,c=i.nickname,l=i.sign_input,(m=o).match(b.REG_AVATAR)?m=m.replace(b.REG_AVATAR,"[avatar]"+(a||"")+"[/avatar]"):m+="[size=0][avatar]"+(a||"")+"[/avatar][/size]","string"==typeof(p=u||"")&&p.includes("i.pixiv.re")&&(p=p.replace("/c/540x540_70","")),m.match(b.REG_BG)?m=m.replace(b.REG_BG,"[bg]"+p+"[/bg]"):m+="[size=0][bg]"+p+"[/bg][/size]",m=m.replace(b.REG_FIXED,""),x.userStore.doUpdateUserSetting({formhash:n,nickname:c,sign_input:l,newbio:m,timeoffsetnew:d},(function(){(0,_.t)("个人设置.保存",{id:e.myUserId}),(0,h.feedback)(),(0,h.info)("保存成功"),e.fetchUserSetting(),x.usersStore.fetchUsers({userId:e.myUserId}),e.setState({bg:p}),e.setStorage(b.NAMESPACE)}),(function(){}));case 9:case"end":return s.stop()}}),s)})))),(0,p.default)((0,u.default)(e),"onValueChange",(function(s){e.setState({selectedIndex:s}),(0===s&&!e.state.bgs.length||1===s&&!e.state.avatars.length)&&e.onRefresh(),e.setStorage(b.NAMESPACE)})),e}return(0,a.default)(t,[{key:"userSetting",get:function(){return x.userStore.userSetting}},{key:"myUserId",get:function(){return x.userStore.myUserId}},{key:"usersInfo",get:function(){return x.userStore.usersInfo(this.myUserId)}},{key:"users",get:function(){return x.usersStore.users(this.myUserId)}},{key:"bg",get:function(){var e=this.state.bg;if(e)return e;var s=this.userSetting.sign.match(b.REG_BG);return(0,h.HTMLDecode)(String(s?String(s[1]).trim():"").replace(b.REG_FIXED,""))}},{key:"avatar",get:function(){var e=this.state.avatar;if(e)return e;var s=this.userSetting.sign.match(b.REG_AVATAR);return(0,h.HTMLDecode)(String(s?String(s[1]).trim():"").replace(b.REG_FIXED,""))}}]),t}(j.default),(0,f.default)(o.prototype,"userSetting",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"userSetting"),o.prototype),(0,f.default)(o.prototype,"myUserId",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"myUserId"),o.prototype),(0,f.default)(o.prototype,"usersInfo",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"usersInfo"),o.prototype),(0,f.default)(o.prototype,"users",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"users"),o.prototype),(0,f.default)(o.prototype,"bg",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"bg"),o.prototype),(0,f.default)(o.prototype,"avatar",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"avatar"),o.prototype),o)}}]);