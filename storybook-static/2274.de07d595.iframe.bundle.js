(self.webpackChunkweb=self.webpackChunkweb||[]).push([[2274],{"./src/screens/user/dev/base/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var n=s("./src/components/index.ts"),o=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),u=s("./src/utils/hooks/index.ts"),d=s("./src/screens/user/dev/base/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=function(){return(0,u.useObserver)((function(){var e=(0,d.memoStyles)(),t=a.systemStore.state,s=t.dev,r=t.devEvent;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.ItemSetting,{hd:"Dev Mode",ft:(0,c.jsx)(n.Switch,{style:e.switch,checked:s,onChange:a.systemStore.toggleDev}),withoutFeedback:!0}),a.userStore.isDeveloper&&(0,c.jsx)(o.ItemSetting,{hd:"Track Points",ft:(0,c.jsx)(n.Switch,{style:e.switch,checked:r.enabled,onChange:function(){return a.systemStore.toggleDevEvent("enabled")}}),withoutFeedback:!0}),(0,c.jsx)(o.ItemSetting,{hd:"JS Exception Test",ft:(0,c.jsx)(n.Touchable,{onPress:function(){throw new Error("JS Exception Test")},children:(0,c.jsx)(n.Text,{children:"一键猫叫"})}),withoutFeedback:!0})]})}))}},"./src/screens/user/dev/base/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{switch:{marginRight:-4,transform:[{scale:r._.device(.8,1.12)}]}}}))},"./src/screens/user/dev/db.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.add=w,t.oauth=b,t.put=function(e){return T.apply(this,arguments)},t.read=y,t.update=O;var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=n(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),u=n(s("./node_modules/expo-constants/build/Constants.js")),d=n(s("./src/utils/crypto/index.ts")),c=s("./src/utils/fetch/index.ts"),i=n(s("./src/utils/thirdParty/base64.ts")),l=s("./src/constants/index.ts"),p=d.default.get("U2FsdGVkX19fLWKIpcMloDjdAz++NCIuNnc4GAf/tZF9WpcAWWGZaXujErTngZ1aYg487rZ6AAR+ve0ayzlTvw5nl1m4VNVazEzJNFuJCEVYNYCl7UY93qrYaJft7uwzLOAiJyCdFSzgnmJQLKKQ8QZZf2iLaBrwqnginL/lpVY6puBnmBQyKPKT/e+LtNKjjxItXQXbK7eEpcilLK/vmVdWKTUfbaJARriu3zpIw2ARh5C61hZKcerUwzmpaBagv77hPhR0E9JaHP2lVDiE5JcvQ5eDoLGtsDVenRSuS88v1CDjPE3XEM0hm05oUa0AQB0FBKgUayOszrf8NjSSAjJESpSFiikapkYUhz6lYWoYOrx6ZCdgn2U2auwSBp8sJqYY+VeHRSfESxrd9cAgAQJcxMdmbW53OBUn2+Oz1h4="),m=l.GITHUB_HOST.split("/"),f=(0,a.default)(m,5),j={owner:f[3],repo:f[4]},h="",_="",x={};function b(){return v.apply(this,arguments)}function v(){return(v=(0,o.default)(r.mark((function e(){var t,s,n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=4;break}return e.next=3,u.default.getWebViewUserAgentAsync();case 3:_=e.sent;case 4:return e.next=6,(0,c.xhrCustom)({method:"POST",url:"https://gitee.com/oauth/token",data:p,headers:{"User-Agent":_,"Content-Type":"application/x-www-form-urlencoded"},showLog:!1});case 6:return t=e.sent,console.info(t),s=JSON.parse(t._response),n=s.access_token,h=n,console.info("🗃  oauth "+n),e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return(g=(0,o.default)(r.mark((function e(t){var s,n,o,a,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.path,x[s]){e.next=14;break}if(_){e.next=6;break}return e.next=5,u.default.getWebViewUserAgentAsync();case 5:_=e.sent;case 6:return e.next=8,(0,c.xhrCustom)({method:"GET",url:"https://gitee.com/api/v5/repos/"+j.owner+"/"+j.repo+"/contents/"+s,headers:{"User-Agent":_},showLog:!1});case 8:if(n=e.sent,o=JSON.parse(n._response),a=o.sha,d=o.content,a){e.next=12;break}return e.abrupt("return",{});case 12:x[s]={sha:a,content:i.default.atob(d)},console.info("🗃  read "+s);case 14:return e.abrupt("return",x[s]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=(0,o.default)(r.mark((function e(t){var s,n,o,a,d,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,o=t.content,a=t.message,_){e.next=5;break}return e.next=4,u.default.getWebViewUserAgentAsync();case 4:_=e.sent;case 5:return e.next=7,(0,c.xhrCustom)({method:"POST",url:"https://gitee.com/api/v5/repos/"+j.owner+"/"+j.repo+"/contents/"+n,data:{access_token:h,content:i.default.btoa(o),message:a||"add "+n},headers:{"User-Agent":_,"Content-Type":"application/x-www-form-urlencoded"},showLog:!1});case 7:if(d=e.sent,null!=(l=JSON.parse(d._response))&&null!=(s=l.content)&&s.sha){e.next=11;break}return e.abrupt("return",!1);case 11:return x[n]={sha:l.content.sha,content:o},console.info("🗃  add "+n),e.abrupt("return",x[n]);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return S.apply(this,arguments)}function S(){return(S=(0,o.default)(r.mark((function e(t){var s,n,o,a,d,l,p,m;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(n=t||{}).path,a=n.content,d=n.sha,l=n.message,a!==x[o].content){e.next=3;break}return e.abrupt("return",x[o]);case 3:if(_){e.next=7;break}return e.next=6,u.default.getWebViewUserAgentAsync();case 6:_=e.sent;case 7:return e.next=9,(0,c.xhrCustom)({method:"PUT",url:"https://gitee.com/api/v5/repos/"+j.owner+"/"+j.repo+"/contents/"+o,data:{access_token:h,content:i.default.btoa(a),sha:d,message:l||"update "+o},headers:{"User-Agent":_,"Content-type":"application/x-www-form-urlencoded"},showLog:!1});case 9:if(p=e.sent,null!=(m=JSON.parse(p._response))&&null!=(s=m.content)&&s.sha){e.next=13;break}return e.abrupt("return",!1);case 13:return x[o]={sha:m.content.sha,content:a},console.info("🗃  update "+o),e.abrupt("return",x[o]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,o.default)(r.mark((function e(t){var s,n,o,a,u,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(s=t||{}).path,o=s.content,a=s.message,e.prev=1,h){e.next=5;break}return e.next=5,b();case 5:return e.next=7,y({path:n});case 7:return u=e.sent,d=u.sha,e.abrupt("return",d?O({path:n,content:o,sha:d,message:a}):w({path:n,content:o,message:a}));case 12:return e.prev=12,e.t0=e.catch(1),console.error("utils/db","put",e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}},"./src/screens/user/dev/detail/block.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.map.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=l(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,s&&s.set(e,r),r}(s("react")),a=s("./src/components/index.ts"),u=s("./src/stores/index.ts"),d=s("./src/utils/hooks/index.ts"),c=s("./src/screens/user/dev/detail/styles.ts"),i=s("./node_modules/react/jsx-runtime.js");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(l=function(e){return e?s:t})(e)}t.default=function(e){var t=e.title,s=e.value,r=void 0===s?[]:s,l=e.children,p=(0,o.useState)(!1),m=(0,n.default)(p,2),f=m[0],j=m[1];return(0,d.useObserver)((function(){var e=(0,c.memoStyles)();return(0,i.jsxs)(a.Flex,{style:[e.code,u._.mt.md],children:[(0,i.jsx)(a.Flex.Item,{children:(0,i.jsxs)(a.Text,{size:12,lineHeight:16,selectable:!0,children:[!!t&&(0,i.jsx)(a.Text,{size:12,lineHeight:16,type:"sub",children:t}),f&&(0,i.jsxs)(i.Fragment,{children:["string"==typeof r?r:r.map((function(e){return"\n"+JSON.stringify(e,null,2)})),l]})]})}),!f&&(0,i.jsx)(a.Touchable,{onPress:function(){return j(!0)},children:(0,i.jsx)(a.Text,{children:"open"})})]})}))}},"./src/screens/user/dev/detail/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.keys.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var n=r(s("./node_modules/react-native-web/dist/exports/Platform/index.js")),o=r(s("./node_modules/expo-constants/build/Constants.js")),a=s("./src/stores/index.ts"),u=s("./src/utils/hooks/index.ts"),d=s("./src/constants/index.ts"),c=r(s("./src/screens/user/dev/detail/block.tsx")),i=s("./node_modules/react/jsx-runtime.js"),l={},p={};t.default=function(){return(0,u.useObserver)((function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.default,{value:JSON.stringify({tourist:1,accessToken:a.userStore.accessToken,userCookie:a.userStore.userCookie})}),(0,i.jsx)(c.default,{title:"OTA",value:[{hashSubject:Object.keys(l).length,hashSubjectOTA:Object.keys((0,d.getHashSubjectOTA)()).length,hashAvatar:Object.keys(p).length,hashAvatarOTA:Object.keys((0,d.getHashAvatarOTA)()).length,xsbRelationOTA:Object.keys((0,d.getXsbRelationOTA)().data).length}]}),(0,i.jsx)(c.default,{title:"CDN",value:[a.systemStore.state.ota]}),(0,i.jsx)(c.default,{title:"Window",value:[a._.window]}),(0,i.jsx)(c.default,{title:"Login",value:[{accessToken:a.userStore.accessToken},{userCookie:a.userStore.userCookie},{setCookie:a.userStore.setCookie}]}),(0,i.jsx)(c.default,{title:"Platform",value:[n.default]}),(0,i.jsx)(c.default,{title:"Constants",value:[o.default]})]})}))}},"./src/screens/user/dev/detail/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{code:{paddingVertical:r._.md,paddingHorizontal:r._.md,marginHorizontal:r._.wind,backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1),borderWidth:1,borderColor:r._.colorBorder,borderRadius:r._.radiusXs,overflow:"hidden"}}}))},"./src/screens/user/dev/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var n=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),o=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),u=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/user/dev/base/index.tsx")),c=r(s("./src/screens/user/dev/detail/index.tsx")),i=r(s("./src/screens/user/dev/screen-orientation/index.tsx")),l=r(s("./src/screens/user/dev/update-advance/index.tsx")),p=r(s("./src/screens/user/dev/update-key/index.tsx")),m=r(s("./src/screens/user/dev/update-tourist/index.tsx")),f=r(s("./src/screens/user/dev/users-advance/index.tsx")),j=s("./src/screens/user/dev/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=function(e){var t=e.navigation;return(0,u.useObserver)((function(){var e=(0,j.memoStyles)();return(0,h.jsxs)(o.Component,{id:"screen-dev",children:[(0,h.jsx)(o.Header,{title:"开发菜单",hm:["dev","DEV"]}),(0,h.jsxs)(o.ScrollView,{style:a._.container.plain,contentContainerStyle:a._.container.bottom,scrollToTop:!0,children:[(0,h.jsxs)(n.default,{style:e.container,children:[(0,h.jsx)(d.default,{}),(0,h.jsx)(i.default,{}),a.userStore.isDeveloper&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(m.default,{}),(0,h.jsx)(l.default,{navigation:t}),(0,h.jsx)(f.default,{navigation:t}),(0,h.jsx)(p.default,{})]})]}),(0,h.jsx)(c.default,{})]})]})}))}},"./src/screens/user/dev/screen-orientation/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=c(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,s&&s.set(e,r),r}(s("./node_modules/expo-screen-orientation/build/ScreenOrientation.js")),o=s("./src/components/index.ts"),a=s("./src/screens/_/index.ts"),u=s("./src/utils/hooks/index.ts"),d=s("./node_modules/react/jsx-runtime.js");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(c=function(e){return e?s:t})(e)}t.default=function(){return(0,u.useObserver)((function(){return(0,d.jsx)(a.ItemSetting,{hd:"Screen Orientation Lock",ft:(0,d.jsx)(o.Touchable,{onPress:function(){return n.unlockAsync()},children:(0,d.jsx)(o.Text,{children:"解锁旋转"})}),withoutFeedback:!0})}))}},"./src/screens/user/dev/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingHorizontal:r._.wind-r._._wind}}}))},"./src/screens/user/dev/update-advance/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=n(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=_(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,s&&s.set(e,r),r}(s("react")),d=n(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),m=s("./src/utils/hooks/index.ts"),f=s("./src/screens/user/dev/db.ts"),j=s("./src/screens/user/dev/update-advance/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(_=function(e){return e?s:t})(e)}t.default=function(e){var t=e.navigation,s=(0,u.useState)(!0),n=(0,a.default)(s,2),_=n[0],x=n[1],b=(0,u.useState)(""),v=(0,a.default)(b,2),y=v[0],g=v[1],w=(0,u.useState)(""),k=(0,a.default)(w,2),O=k[0],S=k[1],T=(0,u.useState)("w"),P=(0,a.default)(T,2),C=P[0],A=P[1],M=(0,u.useState)({}),I=(0,a.default)(M,2),D=I[0],R=I[1],F=(0,u.useCallback)((0,o.default)(r.mark((function e(){var t,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.read)({path:"advance.json"});case 2:t=e.sent,s=t.content,R(JSON.parse(s));case 5:case"end":return e.stop()}}),e)}))),[]),U=(0,u.useCallback)((function(e){var t=e.nativeEvent.text;g(t)}),[g]),z=(0,u.useCallback)((function(e){var t=e.nativeEvent.text;S(t)}),[S]),W=(0,u.useCallback)((0,o.default)(r.mark((function e(){var t,s,n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.read)({path:"advance.json"});case 2:return t=e.sent,s=t.content,(n=JSON.parse(s))[y]=C+"|"+O,e.next=8,(0,f.put)({path:"advance.json",content:JSON.stringify(n,null,2)});case 8:(0,p.info)("update db success"),F();case 10:case"end":return e.stop()}}),e)}))),[F,C,y,O]);return(0,m.useMount)((function(){F()})),(0,m.useObserver)((function(){var e=(0,j.memoStyles)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.ItemSetting,{hd:"Update Advance",ft:(0,h.jsx)(c.Touchable,{onPress:function(){return x(!_)},children:(0,h.jsx)(c.Text,{children:"使用"})}),withoutFeedback:!0}),_&&(0,h.jsxs)(d.default,{style:e.container,children:[(0,h.jsxs)(c.Flex,{children:[(0,h.jsx)(c.Flex.Item,{children:(0,h.jsx)(c.Input,{style:e.input,value:y,placeholder:"uid",onChange:U})}),(0,h.jsx)(c.SegmentedControl,{style:e.segmentedControl,size:12,values:["微信","支付宝"],selectedIndex:0,onValueChange:function(e){A("微信"===e?"w":"a")}}),(0,h.jsx)(c.Flex.Item,{style:l._.ml.md,children:(0,h.jsx)(c.Input,{style:e.input,value:O,keyboardType:"decimal-pad",placeholder:"val",onChange:z})})]}),(0,h.jsxs)(c.Flex,{style:l._.mt.md,children:[(0,h.jsx)(c.Flex.Item,{children:(0,h.jsx)(c.Text,{bold:!0,children:D[y]||"-"})}),(0,h.jsxs)(c.Flex,{style:l._.ml.lg,children:[(0,h.jsx)(c.Touchable,{onPress:function(){y&&t.push("Zone",{userId:y})},children:(0,h.jsx)(c.Iconfont,{name:"md-arrow-forward"})}),(0,h.jsx)(c.Touchable,{style:l._.ml.lg,onPress:W,children:(0,h.jsx)(c.Iconfont,{name:"md-check"})})]})]})]})]})}))}},"./src/screens/user/dev/update-advance/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingTop:r._.xs,paddingHorizontal:r._.wind,paddingBottom:r._.md},input:Object.assign({height:40,paddingVertical:0,paddingHorizontal:r._.device(r._.sm,r._.md)},r._.device(r._.fontSize12,r._.fontSize15),{backgroundColor:r._.colorBg}),segmentedControl:{height:40,width:120,marginLeft:r._.md}}}))},"./src/screens/user/dev/update-key/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=n(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=h(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,s&&s.set(e,r),r}(s("react")),d=n(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),p=s("./src/utils/kv/index.ts"),m=s("./src/utils/hooks/index.ts"),f=s("./src/screens/user/dev/update-key/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(h=function(e){return e?s:t})(e)}t.default=function(){var e=(0,u.useState)(!1),t=(0,a.default)(e,2),s=t[0],n=t[1],h=(0,u.useState)(""),_=(0,a.default)(h,2),x=_[0],b=_[1],v=(0,u.useState)(""),y=(0,a.default)(v,2),g=y[0],w=y[1],k=(0,u.useCallback)((function(e){var t=e.nativeEvent.text;b(t)}),[b]),O=(0,u.useCallback)((function(e){var t=e.nativeEvent.text;w(t)}),[w]),S=(0,u.useCallback)((0,o.default)(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.update)(x,JSON.parse(g),!1);case 2:t=e.sent,(0,c.devLog)(t);case 4:case"end":return e.stop()}}),e)}))),[x,g]);return(0,m.useObserver)((function(){var e=(0,f.memoStyles)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.ItemSetting,{hd:"Update Key",ft:(0,j.jsx)(c.Touchable,{onPress:function(){return n(!s)},children:(0,j.jsx)(c.Text,{children:"使用"})}),withoutFeedback:!0}),s&&(0,j.jsx)(d.default,{style:e.container,children:(0,j.jsxs)(c.Flex,{children:[(0,j.jsx)(c.Flex.Item,{children:(0,j.jsx)(c.Input,{style:e.input,value:x,placeholder:"key",onChange:k})}),(0,j.jsx)(c.Flex.Item,{style:l._.ml.md,children:(0,j.jsx)(c.Input,{style:e.input,value:g,placeholder:"val",onChange:O})}),(0,j.jsx)(c.Touchable,{style:l._.ml.lg,onPress:S,children:(0,j.jsx)(c.Iconfont,{name:"md-check"})})]})})]})}))}},"./src/screens/user/dev/update-key/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingTop:r._.xs,paddingHorizontal:r._.wind,paddingBottom:r._.md},input:Object.assign({height:40,paddingVertical:0,paddingHorizontal:r._.device(r._.sm,r._.md)},r._.device(r._.fontSize12,r._.fontSize15),{backgroundColor:r._.colorBg}),segmentedControl:{height:40,width:120,marginLeft:r._.md}}}))},"./src/screens/user/dev/update-tourist/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=n(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=v(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,s&&s.set(e,r),r}(s("react")),d=n(s("./node_modules/react-native-web/dist/exports/Image/index.js")),c=n(s("./node_modules/@ant-design/react-native/lib/activity-indicator/index.js")),i=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),f=s("./src/utils/hooks/index.ts"),j=s("./src/constants/index.ts"),h=s("./src/screens/user/dev/db.ts"),_=s("./src/screens/user/dev/update-tourist/utils.ts"),x=s("./src/screens/user/dev/update-tourist/styles.ts"),b=s("./node_modules/react/jsx-runtime.js");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(v=function(e){return e?s:t})(e)}t.default=function(){var e=(0,u.useState)(!1),t=(0,a.default)(e,2),s=t[0],n=t[1],v=(0,u.useState)({}),y=(0,a.default)(v,2),g=y[0],w=y[1],k=(0,u.useState)(""),O=(0,a.default)(k,2),S=O[0],T=O[1],P=(0,u.useCallback)((function(e){var t=e.nativeEvent.text;T(t)}),[T]),C=(0,u.useCallback)((0,o.default)(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.t0=w,e.next=5,(0,_.getConfig)();case 5:e.t1=e.sent,(0,e.t0)(e.t1),T("");case 8:case"end":return e.stop()}}),e)}))),[s]),A=(0,u.useCallback)((0,o.default)(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,m.info)("do login"),e.next=4,(0,_.doLogin)(g,S);case 4:return(t=e.sent)||(0,m.info)("login fail"),e.next=8,(0,h.put)({path:"tourist.json",content:JSON.stringify(t)});case 8:(0,m.info)("update db success"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,m.info)("catch error: login fail");case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[g,S]);return(0,u.useEffect)((function(){C()}),[C]),(0,f.useObserver)((function(){var e=(0,x.memoStyles)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.ItemSetting,{hd:"Update Tourist",ft:(0,b.jsx)(i.Touchable,{onPress:function(){return n(!s)},children:(0,b.jsx)(i.Text,{children:"使用"})}),withoutFeedback:!0}),s&&(0,b.jsxs)(i.Flex,{style:e.container,children:[(0,b.jsx)(i.Flex.Item,{children:(0,b.jsx)(i.Input,{style:e.input,value:S,placeholder:"验证码",onChange:P})}),(0,b.jsx)(i.Touchable,{style:e.captchaTouch,onPress:C,children:(0,b.jsx)(i.Flex,{style:e.captchaContainer,justify:"center",children:g.base64?(0,b.jsx)(d.default,{style:e.captcha,source:{uri:g.base64}}):(0,b.jsx)(c.default,{size:"small"})})}),(0,b.jsx)(i.Touchable,{style:p._.ml.md,onPress:A,children:(0,b.jsx)(i.Iconfont,{name:"md-check"})}),(0,b.jsx)(i.Touchable,{style:p._.ml.md,onPress:function(){return(0,m.open)(j.GITHUB_HOST+"/commits/master/tourist.json")},children:(0,b.jsx)(i.Iconfont,{name:"md-arrow-forward"})})]})]})}))}},"./src/screens/user/dev/update-tourist/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingTop:r._.xs,paddingHorizontal:r._.wind,paddingBottom:r._.md},input:Object.assign({height:40,paddingVertical:0,paddingHorizontal:r._.device(r._.sm,r._.md)},r._.device(r._.fontSize12,r._.fontSize15),{backgroundColor:r._.colorBg}),captchaTouch:{marginLeft:r._.sm,borderRadius:r._.radiusXs,overflow:"hidden"},captchaContainer:{width:118,height:38},captcha:{width:118,height:38}}}))},"./src/screens/user/dev/update-tourist/utils.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/es.regexp.constructor.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.regexp.to-string.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.split.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.doLogin=function(e,t){return m.apply(this,arguments)},t.getConfig=function(){return p.apply(this,arguments)};var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=n(s("./node_modules/cheerio-without-node-native/index.js")),u=s("./src/utils/index.ts"),d=n(s("./src/utils/thirdParty/axios.js")),c=n(s("./src/utils/thirdParty/base64.ts")),i=s("./src/constants/index.ts");function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};return["__cfduid","chii_sid","chii_sec_id","chii_cookietime","chii_auth"].forEach((function(s){var r=new RegExp(s+"=(.+?);"),n=e.match(r);n&&(t[s]=n[1])})),Object.keys(t).map((function(e){return e+"="+t[e]})).join("; ")}function p(){return(p=(0,o.default)(r.mark((function e(){var t,s,n,o,a,c,p,m,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Mobile Safari/537.36",d.default.defaults.withCredentials=!1,e.next=4,(0,d.default)({method:"get",url:i.HOST+"/login",headers:{"User-Agent":n}});case 4:return o=e.sent,a=o.data,c=o.headers,p=l(null==c||null==(t=c["set-cookie"])?void 0:t[0]),e.next=10,(0,d.default)({method:"get",url:i.HOST+"/signup/captcha?"+(0,u.getTimestamp)(),headers:{Cookie:p,"User-Agent":n},responseType:"arraybuffer"});case 10:return m=e.sent,f=m.request,e.abrupt("return",{ua:n,cookie:p,formhash:null==(s=a.match(/<input type="hidden" name="formhash" value="(.+?)">/))?void 0:s[1],base64:"data:image/gif;base64,"+(null==f?void 0:f._response)});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return m=(0,o.default)(r.mark((function e(t,s){var n,p,m,f,j,h,_,x,b,v,y,g,w,k,O,S,T;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T=function(){return T=(0,o.default)(r.mark((function e(){var t,s,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.default)({method:"post",maxRedirects:0,validateStatus:null,url:i.HOST+"/oauth/access_token",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":f},data:(0,u.urlStringify)({grant_type:"authorization_code",client_id:i.APP_ID,client_secret:i.APP_SECRET,code:null==k||null==(t=k.responseURL)?void 0:t.split("=").slice(1).join("="),redirect_uri:i.URL_OAUTH_REDIRECT,state:(0,u.getTimestamp)()})});case 2:if(s=e.sent,n=s.status,o=s.data,200===n){e.next=12;break}if(!((O+=1)>5)){e.next=9;break}return e.abrupt("return",!1);case 9:return e.abrupt("return",S());case 12:return e.abrupt("return",{tourist:1,accessToken:o,userCookie:{cookie:h,userAgent:f,v:0,tourist:0}});case 13:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)},S=function(){return T.apply(this,arguments)},m=t.ua,f=void 0===m?"":m,j=t.cookie,h=void 0===j?"":j,_=t.formhash,x=void 0===_?"":_,d.default.defaults.withCredentials=!1,e.next=6,(0,d.default)({method:"post",url:i.HOST+"/FollowTheRabbit",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":f,Cookie:h},data:(0,u.urlStringify)({formhash:x,referer:"",dreferer:"",email:c.default.atob("c2F5YWlmb3J1OThAMTYzLmNvbQ=="),password:c.default.atob("MTIzcXdlYXNkenhj"),captcha_challenge_field:s,loginsubmit:"登录"})});case 6:return b=e.sent,v=b.headers,e.next=10,(0,d.default)({method:"get",url:i.HOST+"/oauth/authorize?client_id="+i.APP_ID+"&response_type=code&redirect_uri="+i.URL_OAUTH_REDIRECT,headers:{"User-Agent":f,Cookie:l(null==v||null==(n=v["set-cookie"])?void 0:n[0])}});case 10:return y=e.sent,g=y.data,e.next=14,(0,d.default)({method:"post",maxRedirects:0,validateStatus:null,url:i.HOST+"/oauth/authorize?client_id="+i.APP_ID+"&response_type=code&redirect_uri="+i.URL_OAUTH_REDIRECT,headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":f,Cookie:l(null==v||null==(p=v["set-cookie"])?void 0:p[0])},data:(0,u.urlStringify)({formhash:a.default.load(g)("input[name=formhash]").attr("value"),redirect_uri:"",client_id:i.APP_ID,submit:"授权"})});case 14:return w=e.sent,k=w.request,O=0,e.abrupt("return",S());case 18:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},"./src/screens/user/dev/users-advance/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=n(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=x(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,s&&s.set(e,r),r}(s("react")),d=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),p=s("./src/utils/hooks/index.ts"),m=s("./src/utils/fetch/index.ts"),f=s("./src/screens/user/dev/db.ts"),j=s("./src/screens/user/dev/users-advance/utils.ts"),h=s("./src/screens/user/dev/users-advance/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(x=function(e){return e?s:t})(e)}t.default=function(e){var t=e.navigation,s=(0,u.useState)(!1),n=(0,a.default)(s,2),x=n[0],b=n[1],v=(0,u.useState)([]),y=(0,a.default)(v,2),g=y[0],w=y[1],k=(0,u.useCallback)((0,o.default)(r.mark((function e(){var t,s,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,(0,f.read)({path:"advance.json"});case 3:return t=e.sent,s=t.content,n=JSON.parse(s),o=Object.keys(n),w(o.sort((function(e,t){return(0,j.sortByRecent)(i.usersStore.users(e).recent,i.usersStore.users(t).recent)}))),e.next=10,(0,m.queue)(o.map((function(e){return function(){return i.usersStore.fetchUsers({userId:e})}})));case 10:(0,l.info)("update users done"),w(o.sort((function(e,t){return(0,j.sortByRecent)(i.usersStore.users(e).recent,i.usersStore.users(t).recent)})));case 12:case"end":return e.stop()}}),e)}))),[]);return(0,p.useObserver)((function(){var e=(0,h.memoStyles)();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(c.ItemSetting,{hd:"Users Advance",ft:(0,_.jsx)(d.Touchable,{onPress:k,children:(0,_.jsx)(d.Text,{children:"查看"})}),withoutFeedback:!0}),x&&(0,_.jsx)(d.ScrollView,{style:e.scrollView,children:g.map((function(e){return(0,_.jsx)(c.ItemFriends,Object.assign({navigation:t},i.usersStore.users(e)),e)}))})]})}))}},"./src/screens/user/dev/users-advance/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{scrollView:{height:342,marginTop:r._.sm,marginHorizontal:r._.wind,borderWidth:1,borderColor:r._.colorBorder,borderRadius:r._.radiusXs,overflow:"hidden"}}}))},"./src/screens/user/dev/users-advance/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.sortByRecent=function(e,t){return e.includes("-")&&t.includes("-")?(0,r.desc)((0,r.getTimestamp)(e),(0,r.getTimestamp)(t)):e.includes("-")&&!t.includes("-")?1:!e.includes("-")&&t.includes("-")?-1:(0,r.asc)(n(e),n(t))};var r=s("./src/utils/index.ts");function n(e){try{var t=0,s=e.match(/\d+d/g);s&&(t+=24*parseInt(s[0])*60*60);var n=e.match(/\d+h/g);n&&(t+=60*parseInt(n[0])*60);var o=e.match(/\d+m/g);o&&(t+=60*parseInt(o[0]));var a=e.match(/\d+s/g);return a&&(t+=parseInt(a[0])),t}catch(e){return(0,r.getTimestamp)()}}}}]);