(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5499],{"./src/screens/timeline/say/component/chat/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/timeline/say/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Chat")},"./src/screens/timeline/say/component/chat/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/screens/_/index.ts"),n=s("./src/stores/index.ts"),l=s("./src/utils/decorators/index.ts"),i=s("./src/screens/timeline/say/component/chat/utils.tsx"),a=s("./src/screens/timeline/say/component/chat/ds.ts"),u=s("./src/screens/timeline/say/component/chat/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var s=e.forwardRef,r=t.$,l=(0,u.memoStyles)(),a=r.say.list;return(0,c.jsx)(o.PaginationList2,{forwardRef:s,keyExtractor:i.keyExtractor,style:n._.container.screen,contentContainerStyle:l.container,data:a,inverted:!0,renderItem:i.renderItem,showFooter:!1,ListFooterComponent:null},a.length)}),a.COMPONENT)},"./src/screens/timeline/say/component/chat/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingTop:r._.bottom+r._.lg,paddingHorizontal:r._.wind,paddingBottom:r._.lg}}}))},"./src/screens/timeline/say/component/chat/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=function(e){return String(e.uid)},t.renderItem=function(e){var t=e.item,s=e.index;return(0,n.jsx)(o.default,{item:t,index:s})};r(s("react"));var o=r(s("./src/screens/timeline/say/component/item/index.tsx")),n=s("./node_modules/react/jsx-runtime.js")},"./src/screens/timeline/say/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/timeline/say/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/timeline/say/component/heatmaps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/timeline/say/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Heatmaps")},"./src/screens/timeline/say/component/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),l=s("./src/utils/decorators/index.ts"),i=s("./src/screens/timeline/say/component/heatmaps/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.ob)((function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Heatmap,{bottom:n._.bottom,id:"吐槽",screen:"Say"}),(0,a.jsx)(o.Heatmap,{right:67,bottom:n._.bottom,id:"吐槽.显示评论框",transparent:!0}),(0,a.jsx)(o.Heatmap,{right:67,bottom:n._.bottom-34,id:"吐槽.新吐槽",transparent:!0}),(0,a.jsx)(o.Heatmap,{right:67,bottom:n._.bottom-68,id:"吐槽.回复吐槽",transparent:!0}),(0,a.jsx)(o.Heatmap,{right:121,bottom:n._.bottom-68,id:"吐槽.回复失败",transparent:!0})]})}),i.COMPONENT)},"./src/screens/timeline/say/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/timeline/say/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Item"),t.EVENT={id:"吐槽.跳转"}},"./src/screens/timeline/say/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),c=s("./src/screens/timeline/say/component/item/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s,r=e.item,a=e.index,m=t.$;if(!r.id)return null;var f=m.say.list,p=0===a?{}:f[a-1],y=r.id===l.userStore.myId;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.ItemSay,Object.assign({},r,{event:c.EVENT,position:y?"right":"left",avatar:(0,i.getAvatarLocal)(r.id)||(0,u.API_AVATAR)(r.id),showName:p.name!==r.name,onLongPress:function(){return m.at(r.id)}})),a+1===f.length&&!!r.date&&(0,d.jsx)(o.Text,{size:12,type:"sub",align:"center",children:null==(s=f[a])?void 0:s.date})]})}),c.COMPONENT)},"./src/screens/timeline/say/component/page/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/timeline/say/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Page")},"./src/screens/timeline/say/component/page/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=o(s("react")),p=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),y=s("./src/components/index.ts"),h=s("./src/stores/index.ts"),j=s("./src/utils/decorators/index.ts"),b=s("./src/utils/dev/index.ts"),v=o(s("./src/screens/timeline/say/component/chat/index.tsx")),_=s("./src/screens/timeline/say/component/page/ds.ts"),x=s("./src/screens/timeline/say/component/page/styles.ts"),O=s("./node_modules/react/jsx-runtime.js");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}var T=function(e){(0,u.default)(o,e);var t,s=g(o);function o(){var e;(0,l.default)(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=s.call.apply(s,[this].concat(r)),(0,m.default)((0,a.default)(e),"scrollView",void 0),(0,m.default)((0,a.default)(e),"connectRefScrollView",(function(t){t&&(e.$.scrollViewRef=t,e.scrollView=t)})),e}return(0,i.default)(o,[{key:"componentDidMount",value:(t=(0,n.default)(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$.init(this.scrollView);case 3:setTimeout((function(){t.$.scrollToBottom(t.scrollView)}),480);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.$.scrollViewRef=null}},{key:"renderTextarea",value:function(e){var t=this;return h.userStore.isWebLogin?(0,O.jsx)(y.FixedTextarea,{placeholder:e,simple:!0,value:this.$.state.value,onChange:this.$.onChange,onClose:this.$.closeFixedTextarea,onSubmit:function(e){return t.$.doSubmit(e,t.scrollView,t.navigation)}}):null}},{key:"renderNew",value:function(){return(0,O.jsxs)(p.default,{style:h._.container.flex,children:[(0,O.jsx)(v.default,{forwardRef:this.connectRefScrollView}),(0,O.jsx)(y.Text,{style:x.styles.notice,type:"sub",children:"点击底部输入框录入吐槽内容"}),this.renderTextarea("新吐槽")]})}},{key:"renderList",value:function(){return this.$.say._loaded?(0,O.jsxs)(p.default,{style:h._.container.flex,children:[(0,O.jsx)(v.default,{forwardRef:this.connectRefScrollView}),this.renderTextarea("回复吐槽, 长按头像@某人")]}):(0,O.jsx)(y.Flex,{style:h._.container.screen,justify:"center",children:(0,O.jsx)(y.Loading,{})})}},{key:"$",get:function(){return this.context.$}},{key:"navigation",get:function(){return this.context.navigation}},{key:"render",value:function(){return(0,b.r)(_.COMPONENT),(0,O.jsx)(y.Page,{style:h._.container.screen,children:this.$.isNew?this.renderNew():this.renderList()})}}]),o}(f.default.Component);t.default=(0,j.obc)(T)},"./src/screens/timeline/say/component/page/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var r=s("./src/stores/index.ts");t.styles=r._.create({list:{paddingBottom:r._.bottom+r._.lg},notice:{marginTop:r._.md,marginLeft:r._.md}})},"./src/screens/timeline/say/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;t.COMPONENT="Say"},"./src/screens/timeline/say/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/timeline/say/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Header")},"./src/screens/timeline/say/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),c=s("./src/constants/index.ts"),d=s("./src/screens/timeline/say/header/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s,r,a=t.$,d=a.say.list,f=null==(s=d[d.length-1])?void 0:s.date;return(0,m.jsx)(o.Header,{title:a.isNew?"新吐槽":"吐槽 ("+d.length+")"+(f?" · "+(null==(r=f.split(" "))?void 0:r[0]):""),alias:"吐槽",hm:[a.url,"Say"],headerTitleAlign:"left",headerRight:function(){return a.isNew?null:(0,m.jsxs)(o.Flex,{children:[!c.WEB&&d.length>=10&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.IconTouchable,{style:l._.mr._xs,name:"md-keyboard-arrow-up",size:24,color:l._.colorTitle,onPress:function(){a.scrollToTop(a.scrollViewRef,!0)}}),(0,m.jsx)(n.IconTouchable,{name:"md-keyboard-arrow-down",size:24,color:l._.colorTitle,onPress:function(){a.scrollToBottom(a.scrollViewRef,!0)}})]}),(0,m.jsx)(o.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,u.t)("吐槽.右上角菜单",{key:e}),(0,i.open)(a.url))},children:(0,m.jsx)(o.Heatmap,{id:"吐槽.右上角菜单"})})]})}})}),d.COMPONENT)},"./src/screens/timeline/say/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useSayPage=function(){(0,r.useKeyboardAdjustResize)()};var r=s("./src/utils/hooks/index.ts")},"./src/screens/timeline/say/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),i=r(s("./src/screens/timeline/say/component/heatmaps/index.tsx")),a=r(s("./src/screens/timeline/say/component/page/index.tsx")),u=r(s("./src/screens/timeline/say/header/index.tsx")),c=s("./src/screens/timeline/say/hooks.ts"),d=r(s("./src/screens/timeline/say/store/index.ts")),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(d.default,(function(){return(0,c.useSayPage)(),(0,l.useObserver)((function(){return(0,m.jsxs)(o.Component,{id:"screen-say",children:[(0,m.jsx)(u.default,{}),(0,m.jsx)(a.default,{}),(0,m.jsx)(i.default,{})]})}))}))},"./src/screens/timeline/say/store/action.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),y=s("./src/utils/fetch/index.ts"),h=s("./src/utils/webhooks/index.ts"),j=s("./src/constants/index.ts"),b=o(s("./src/constants/i18n/index.ts")),v=o(s("./src/screens/timeline/say/store/fetch.ts"));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}t.default=function(e){(0,u.default)(s,e);var t=_(s);function s(){var e;(0,i.default)(this,s);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return e=t.call.apply(t,[this].concat(l)),(0,m.default)((0,a.default)(e),"scrollToBottom",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null!=e&&e.scrollToIndex&&setTimeout((function(){try{e.scrollToIndex({animated:t,index:0,viewOffset:200})}catch(e){}}),160)})),(0,m.default)((0,a.default)(e),"scrollToTop",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null!=e&&e.scrollToEnd&&setTimeout((function(){try{e.scrollToEnd({animated:t,duration:640})}catch(e){}}),160)})),(0,m.default)((0,a.default)(e),"closeFixedTextarea",(function(){e.setState({placeholder:"",replySub:"",message:""}),(0,y.t)("吐槽.显示评论框")})),(0,m.default)((0,a.default)(e),"onChange",(function(t){e.setState({value:t})})),(0,m.default)((0,a.default)(e),"at",(function(t){e.setState({value:e.state.value+" @"+t+" "}),(0,y.t)("吐槽.at",{id:t})})),(0,m.default)((0,a.default)(e),"recoveryContent",(function(t){(0,p.info)("操作失败，可能是cookie失效了"),e.setState({value:""}),setTimeout((function(){e.setState({value:t})}),160),(0,y.t)("吐槽.回复失败")})),(0,m.default)((0,a.default)(e),"doSubmit",(function(t,s,r){if(e.isNew)return e.formhash?void e.doSay(t,r):void(0,p.info)("获取表单授权码失败, 请检查"+b.default.login()+"状态");var o=e.say.list,n=void 0===o?[]:o;n.length||n[0].formhash?e.doReply(t,s):(0,p.info)("获取表单授权码失败")})),(0,m.default)((0,a.default)(e),"doSay",(function(t,s){var o;f.timelineStore.doSay({content:t,formhash:e.formhash},(o=(0,n.default)(r.mark((function o(l){var i,a;return r.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i={};try{i=JSON.parse(l)}catch(e){}if(!j.IOS||"ok"===i.status){o.next=5;break}return e.recoveryContent(t),o.abrupt("return");case 5:"function"==typeof(a=e.params.onNavigationCallback)&&a(!0),e.setState({value:""}),(0,p.feedback)(),(0,p.info)("吐槽成功"),s.goBack(),setTimeout((0,n.default)(r.mark((function t(){var s,o,n,l,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchTimeline();case 2:o=t.sent,null!=(n=null==o||null==(s=o.list)?void 0:s[0])&&n.clearHref&&(0,h.webhookSay)({content:null==n||null==(l=n.reply)?void 0:l.content,url:null==n||null==(i=n.reply)?void 0:i.url},f.userStore.userInfo);case 5:case"end":return t.stop()}}),t)}))),4e3);case 12:case"end":return o.stop()}}),o)}))),function(e){return o.apply(this,arguments)})),(0,y.t)("吐槽.新吐槽")})),(0,m.default)((0,a.default)(e),"doReply",(function(t,s){var o,l=f.timelineStore.say(e.id).list,i=void 0===l?[]:l;f.timelineStore.doReply({id:String(e.id).split("#")[0],content:t,formhash:i[0].formhash},(o=(0,n.default)(r.mark((function o(n){var l;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:l={};try{l=JSON.parse(n)}catch(e){}if(!j.IOS||"ok"===l.status){r.next=5;break}return e.recoveryContent(t),r.abrupt("return");case 5:return e.setState({value:""}),r.next=8,e.fetchSay();case 8:(0,p.feedback)(),setTimeout((function(){e.scrollToBottom(s,!0)}),80);case 10:case"end":return r.stop()}}),o)}))),function(e){return o.apply(this,arguments)})),(0,y.t)("吐槽.回复吐槽")})),e}return(0,l.default)(s)}(v.default)},"./src/screens/timeline/say/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),d=s("./node_modules/mobx/dist/mobx.esm.js"),m=s("./src/stores/index.ts"),f=s("./src/constants/index.ts"),p=r(s("./src/screens/timeline/say/store/state.ts"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,a.default)(this,s)}}t.default=(o=function(e){(0,i.default)(s,e);var t=y(s);function s(){return(0,n.default)(this,s),t.apply(this,arguments)}return(0,l.default)(s,[{key:"id",get:function(){return this.params.sayId||this.params.id}},{key:"isNew",get:function(){return!this.id}},{key:"say",get:function(){var e=m.timelineStore.say(this.id);return Object.assign({},e,{list:e.list.slice().reverse()})}},{key:"formhash",get:function(){return m.timelineStore.formhash}},{key:"url",get:function(){return this.isNew?f.HOST+"/timeline?type=say":f.HOST+"/user/"+this.params.userId+"/timeline/status/"+this.id}}]),s}(p.default),(0,c.default)(o.prototype,"id",[d.computed],Object.getOwnPropertyDescriptor(o.prototype,"id"),o.prototype),(0,c.default)(o.prototype,"isNew",[d.computed],Object.getOwnPropertyDescriptor(o.prototype,"isNew"),o.prototype),(0,c.default)(o.prototype,"say",[d.computed],Object.getOwnPropertyDescriptor(o.prototype,"say"),o.prototype),(0,c.default)(o.prototype,"formhash",[d.computed],Object.getOwnPropertyDescriptor(o.prototype,"formhash"),o.prototype),(0,c.default)(o.prototype,"url",[d.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),o)},"./src/screens/timeline/say/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=void 0;t.STATE={value:"",placeholder:"",replySub:"",message:"",_loaded:!1}},"./src/screens/timeline/say/store/fetch.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=s("./src/stores/index.ts"),m=s("./src/constants/index.ts"),f=r(s("./src/screens/timeline/say/store/computed.ts"));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,a.default)(this,s)}}t.default=function(e){(0,i.default)(s,e);var t=p(s);function s(){var e;(0,n.default)(this,s);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,c.default)((0,l.default)(e),"fetchSay",(function(){return d.timelineStore.fetchSay({id:e.id})})),(0,c.default)((0,l.default)(e),"fetchTimeline",(function(){return d.timelineStore.fetchTimeline({scope:"friend",type:m.MODEL_TIMELINE_TYPE.getValue("吐槽")},!0)})),e}return(0,o.default)(s)}(f.default)},"./src/screens/timeline/say/store/index.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=s("./src/stores/index.ts"),p=s("./src/utils/index.ts");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}var h=function(e){(0,u.default)(s,e);var t=y(s);function s(){var e,o;(0,i.default)(this,s);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return e=t.call.apply(t,[this].concat(u)),(0,m.default)((0,a.default)(e),"scrollViewRef",null),(0,m.default)((0,a.default)(e),"init",(o=(0,n.default)(r.mark((function t(s){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s&&(e.scrollViewRef=s),!e.isNew){t.next=6;break}if(f.userStore.isWebLogin){t.next=5;break}return(0,p.info)("请先登录"),t.abrupt("return");case 5:return t.abrupt("return",f.timelineStore.fetchFormHash());case 6:return e.say._loaded&&e.scrollToBottom(e.scrollViewRef),t.next=9,e.fetchSay();case 9:f.userStore.isWebLogin&&f.timelineStore.fetchFormHash();case 10:case"end":return t.stop()}}),t)}))),function(e){return o.apply(this,arguments)})),e}return(0,l.default)(s)}(o(s("./src/screens/timeline/say/store/action.ts")).default);t.default=h},"./src/screens/timeline/say/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=s("./node_modules/mobx/dist/mobx.esm.js"),m=r(s("./src/utils/store/index.ts")),f=s("./src/screens/timeline/say/store/ds.ts");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,a.default)(this,s)}}t.default=function(e){(0,i.default)(s,e);var t=p(s);function s(){var e;(0,n.default)(this,s);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,c.default)((0,l.default)(e),"params",void 0),(0,c.default)((0,l.default)(e),"state",(0,d.observable)(f.STATE)),e}return(0,o.default)(s)}(m.default)}}]);