(self.webpackChunkweb=self.webpackChunkweb||[]).push([[8330],{"./src/screens/tinygrail/_/item-advance/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.object.assign.js"),r("./node_modules/core-js/modules/es.array.flat.js"),r("./node_modules/core-js/modules/es.parse-int.js"),r("./node_modules/core-js/modules/es.number.to-fixed.js"),r("./node_modules/core-js/modules/es.number.constructor.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var n=s(r("./node_modules/react-native-web/dist/exports/View/index.js")),i=r("./node_modules/mobx-react/dist/mobxreact.esm.js"),o=s(r("./node_modules/prop-types/index.js")),a=r("./src/components/index.ts"),c=r("./src/stores/index.ts"),l=r("./src/utils/index.ts"),d=r("./src/utils/app/index.ts"),u=r("./src/utils/fetch/index.ts"),f=r("./src/constants/index.ts"),m=s(r("./src/screens/tinygrail/_/rank/index.tsx")),p=r("./src/screens/tinygrail/_/utils.ts"),y=r("./src/screens/tinygrail/_/item-advance/styles.ts"),j=r("./node_modules/react/jsx-runtime.js");function x(e,t){var r=t.navigation,s=(0,y.memoStyles)(),i=e.event,o=void 0===i?f.EVENT:i,x=e.assets,b=e.index,h=e.id,v=e.name,_=e.icon,g=e.bonus,T=e.level,S=e.amount,P=e.current,k=e.firstAsks,w=e.firstBids,R=e.firstAmount,O=e.rate,C=e.rank,I=e.stars,L=e.mark,D=e.isAuctioning,A=o.id,z=o.data,F=!w&&!k,B=!!w,H=0===b;return(0,j.jsxs)(a.Flex,{style:s.container,align:"start",children:[(0,j.jsx)(n.default,{style:c._.mt.md,children:(0,j.jsx)(a.Avatar,{src:(0,d.tinygrailOSS)(_),name:v,borderColor:"transparent",skeletonType:"tinygrail",onPress:function(){(0,u.t)(A,Object.assign({to:"Mono",monoId:h},z)),r.push("Mono",{monoId:"character/"+h,_name:v})}})}),(0,j.jsx)(a.Flex.Item,{style:!H&&!c._.flat&&s.border,children:(0,j.jsx)(a.Touchable,{style:s.item,onPress:function(){if(F)return(0,u.t)(A,Object.assign({to:"TinygrailSacrifice",monoId:h},z)),void r.push("TinygrailSacrifice",{monoId:"character/"+h});(0,u.t)(A,Object.assign({to:"TinygrailDeal",monoId:h},z)),r.push("TinygrailDeal",{monoId:"character/"+h,type:B?"ask":"bid"})},children:(0,j.jsxs)(a.Flex,{children:[(0,j.jsxs)(a.Flex.Item,{children:[(0,j.jsxs)(a.Flex,{children:[(0,j.jsx)(m.default,{value:C}),(0,j.jsx)(a.Flex.Item,{children:(0,j.jsxs)(a.Text,{type:"tinygrailPlain",size:v.length>16?13:v.length>13?14:15,lineHeight:15,bold:!0,children:[b+1,". ",v,!!g&&(0,j.jsxs)(a.Text,{size:12,lineHeight:15,type:"warning",children:[" ","x",g]}),parseInt(T)>1&&(0,j.jsxs)(a.Text,{type:"ask",size:12,lineHeight:15,children:[" ","lv",T]})]})})]}),(0,j.jsxs)(a.Text,{style:c._.mt.xs,type:"tinygrailText",size:12,children:[!!S&&(0,j.jsxs)(a.Text,{type:"warning",size:12,bold:!0,children:[S,"股"]}),!!S&&" / ",!!R&&(0,j.jsxs)(a.Text,{type:B?"bid":"ask",size:12,bold:!0,children:[B&&"收",R,"股"]}),x&&(0,j.jsxs)(a.Text,{type:"bid",size:12,children:[x.state||"-"," (",x.sacrifices||"-",")"]}),x&&" / ",!!R&&" / ","₵",(0,l.toFixed)(k||w||P,2)," / +",(0,l.toFixed)(O,1)," (",Number((0,l.toFixed)((0,p.calculateRate)(O,C,I),1)),")"]})]}),D&&(0,j.jsxs)(a.Text,{style:c._.ml.sm,type:"bid",children:[" ","[竞拍中]"]}),(0,j.jsx)(a.Text,{style:c._.ml.md,type:"tinygrailPlain",size:16,children:L})]})})})]})}x.contextTypes={navigation:o.default.object};t.default=(0,i.observer)(x)},"./src/screens/tinygrail/_/item-advance/styles.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var s=r("./src/stores/index.ts");t.memoStyles=s._.memoStyles((function(){return{container:{paddingLeft:s._.wind,backgroundColor:s._.colorTinygrailContainer},active:{backgroundColor:s._.colorTinygrailActive},item:{paddingVertical:s._.md,paddingRight:s._.wind,paddingLeft:s._.sm},border:{borderTopColor:s._.colorTinygrailBorder,borderTopWidth:s._.hairlineWidth}}}))},"./src/screens/tinygrail/advance-sacrifice/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),o=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),a=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=s(r("react")),d=s(r("./node_modules/react-native-web/dist/exports/View/index.js")),u=r("./src/screens/_/index.ts"),f=r("./src/stores/index.ts"),m=r("./src/utils/decorators/index.ts"),p=r("./src/utils/fetch/index.ts"),y=r("./src/utils/ui/index.ts"),j=r("./src/screens/tinygrail/styles.ts"),x=s(r("./src/screens/tinygrail/advance-sacrifice/list/index.tsx")),b=s(r("./src/screens/tinygrail/advance-sacrifice/store.ts")),h=r("./node_modules/react/jsx-runtime.js");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,a.default)(this,r)}}var _=function(e){(0,o.default)(r,e);var t=v(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.context,t=e.$,r=e.navigation;t.init(),r.setParams({extra:(0,h.jsx)(u.IconHeader,{style:f._.mr._right,name:"md-info-outline",color:f._.colorTinygrailPlain,onPress:function(){(0,p.t)("献祭推荐.提示"),(0,y.alert)("从持仓列表里面查找\n圣殿股息 - 流动股息 = 分数","当前计算方式")}})})}},{key:"render",value:function(){return(0,h.jsx)(d.default,{style:f._.container.tinygrail,children:(0,h.jsx)(x.default,{})})}}]),r}(l.default.Component);t.default=(0,m.inject)(b.default)((0,m.withHeader)({screen:"献祭推荐",hm:["tinygrail/advance-sacrifice","TinygrailAdvanceSacrifice"],withHeaderParams:j.withHeaderParams})((0,m.obc)(_)))},"./src/screens/tinygrail/advance-sacrifice/list/index.tsx":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.assign.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(r("react"));var n=r("./src/components/index.ts"),i=r("./src/stores/index.ts"),o=r("./src/utils/index.ts"),a=r("./src/utils/decorators/index.ts"),c=s(r("./src/screens/tinygrail/_/item-advance/index.tsx")),l=r("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var r=t.$;if(!r.advanceSacrificeList._loaded)return(0,l.jsx)(n.Loading,{style:i._.container.flex,color:i._.colorTinygrailText});var s={id:"献祭推荐.跳转",data:{userId:r.myUserId}};return(0,l.jsx)(n.ListView,{style:i._.container.flex,contentContainerStyle:i._.container.bottom,keyExtractor:o.keyExtractor,refreshControlProps:{color:i._.colorTinygrailText},footerTextType:"tinygrailText",data:r.advanceSacrificeList,windowSize:6,initialNumToRender:24,maxToRenderPerBatch:24,updateCellsBatchingPeriod:24,lazy:24,scrollToTop:!0,renderItem:function(e){var t=e.item,r=e.index;return(0,l.jsx)(c.default,Object.assign({index:r,event:s},t))},onHeaderRefresh:r.fetchAdvanceSacrificeList})}))},"./src/screens/tinygrail/advance-sacrifice/store.ts":(e,t,r)=>{r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.number.constructor.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=s(r("./node_modules/@babel/runtime/helpers/classCallCheck.js")),o=s(r("./node_modules/@babel/runtime/helpers/createClass.js")),a=s(r("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=s(r("./node_modules/@babel/runtime/helpers/inherits.js")),l=s(r("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=s(r("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=s(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=s(r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),m=r("./node_modules/mobx/dist/mobx.esm.js"),p=r("./src/stores/index.ts"),y=r("./src/utils/index.ts"),j=s(r("./src/utils/store/index.ts")),x=r("./src/constants/index.ts");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,l.default)(this,r)}}t.default=(n=function(e){(0,c.default)(r,e);var t=b(r);function r(){var e;(0,i.default)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),(0,u.default)((0,a.default)(e),"init",(function(){e.advanceSacrificeList._loaded||e.fetchAdvanceSacrificeList(!1)})),(0,u.default)((0,a.default)(e),"fetchAdvanceSacrificeList",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=e.advanceSacrificeList._loaded;return r?!e.advance&&(0,y.getTimestamp)()-Number(r)<14400?(t&&(0,y.info)("普通用户4小时内只能刷新一次"),!0):!x.DEV&&e.advance&&(0,y.getTimestamp)()-Number(r)<60?(t&&(0,y.info)("为避免服务器压力, 1分钟后再刷新吧"),!0):p.tinygrailStore.fetchAdvanceSacrificeList():p.tinygrailStore.fetchAdvanceSacrificeList()})),e}return(0,o.default)(r,[{key:"advance",get:function(){return p.tinygrailStore.advance}},{key:"advanceSacrificeList",get:function(){return p.tinygrailStore.advanceSacrificeList}},{key:"myUserId",get:function(){return p.userStore.myUserId}}]),r}(j.default),(0,f.default)(n.prototype,"advance",[m.computed],Object.getOwnPropertyDescriptor(n.prototype,"advance"),n.prototype),(0,f.default)(n.prototype,"advanceSacrificeList",[m.computed],Object.getOwnPropertyDescriptor(n.prototype,"advanceSacrificeList"),n.prototype),(0,f.default)(n.prototype,"myUserId",[m.computed],Object.getOwnPropertyDescriptor(n.prototype,"myUserId"),n.prototype),n)}}]);