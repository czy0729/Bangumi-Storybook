(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5812],{"./src/screens/rakuen/notify/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/rakuen/notify/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/rakuen/notify/component/heatmaps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Heatmaps")},"./src/screens/rakuen/notify/component/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/notify/component/heatmaps/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.ob)((function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Heatmap,{right:86,bottom:n._.bottom+20,id:"电波提醒.跳转",to:"Topic",alias:"帖子",transparent:!0}),(0,u.jsx)(o.Heatmap,{right:86,bottom:n._.bottom-13,id:"电波提醒.跳转",to:"PM",transparent:!0}),(0,u.jsx)(o.Heatmap,{right:260,bottom:n._.bottom-13,id:"电波提醒.跳转",to:"Zone",alias:"空间",transparent:!0}),(0,u.jsx)(o.Heatmap,{right:86,bottom:n._.bottom-46,id:"电波提醒.跳转",to:"Blog",alias:"日志",transparent:!0})]})}),i.COMPONENT)},"./src/screens/rakuen/notify/component/item-notify/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"ItemNotify"),t.EVENT={id:"电波提醒.跳转"}},"./src/screens/rakuen/notify/component/item-notify/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.repeat.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/screens/rakuen/notify/component/item-notify/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=e.item,r=e.index,n=t.navigation;return(0,i.jsx)(o.ItemNotify,Object.assign({},s,{navigation:n,event:d.EVENT,index:r-(s.repeat||0),repeat:s.repeat||0}))}),d.COMPONENT)},"./src/screens/rakuen/notify/component/item-pm/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"ItemPM"),t.EVENT={id:"电波提醒.跳转"}},"./src/screens/rakuen/notify/component/item-pm/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/screens/rakuen/notify/component/item-pm/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=e.id,r=e.item,n=e.index,u=t.$,c=t.navigation;return(0,i.jsx)(o.ItemPM,Object.assign({},r,{navigation:c,event:d.EVENT,index:n,onRefresh:function(){return u.fetchPM(!0,s)}}))}),d.COMPONENT)},"./src/screens/rakuen/notify/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"List")},"./src/screens/rakuen/notify/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/screens/rakuen/notify/component/list/utils.tsx"),i=s("./src/screens/rakuen/notify/component/list/ds.ts"),u=s("./src/screens/rakuen/notify/component/list/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=e.id,r=t.$,n={keyExtractor:d.keyExtractor,contentContainerStyle:u.styles.contentContainerStyle,scrollEventThrottle:16,onScroll:r.onScroll};switch(s){case"notify":n.data=r.mergeNotify,n.renderItem=d.renderNotifyItem,n.onHeaderRefresh=r.fetchNotify;break;case"pmIn":n.data=r.pmIn,n.renderItem=d.renderPmInItem,n.onHeaderRefresh=function(){return r.fetchPM(!0,"pmIn")},n.onFooterRefresh=function(){return r.fetchPM(!1,"pmIn")};break;case"pmOut":n.data=r.pmOut,n.renderItem=d.renderPmOutItem,n.onHeaderRefresh=function(){return r.fetchPM(!0,"pmOut")},n.onFooterRefresh=function(){return r.fetchPM(!1,"pmOut")}}return(0,c.jsx)(o.ListView,Object.assign({},n))}),i.COMPONENT)},"./src/screens/rakuen/notify/component/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var r=s("./src/stores/index.ts");t.styles=r._.create({contentContainerStyle:{paddingTop:r._.md,paddingBottom:r._.bottom}})},"./src/screens/rakuen/notify/component/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=function(e,t){return String(t)},t.renderNotifyItem=function(e){var t=e.item,s=e.index;return(0,d.jsx)(o.default,{item:t,index:s})},t.renderPmInItem=function(e){var t=e.item,s=e.index;return(0,d.jsx)(n.default,{id:"pmIn",item:t,index:s})},t.renderPmOutItem=function(e){var t=e.item,s=e.index;return(0,d.jsx)(n.default,{id:"pmOut",item:t,index:s})};r(s("react"));var o=r(s("./src/screens/rakuen/notify/component/item-notify/index.tsx")),n=r(s("./src/screens/rakuen/notify/component/item-pm/index.tsx")),d=s("./node_modules/react/jsx-runtime.js")},"./src/screens/rakuen/notify/component/tabs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Tabs")},"./src/screens/rakuen/notify/component/tabs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/notify/ds.ts"),u=s("./src/screens/rakuen/notify/component/tabs/utils.tsx"),c=s("./src/screens/rakuen/notify/component/tabs/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=t.$,r=s.state.page;return(0,a.jsx)(o.TabsV2,{style:n._.mt._sm,routes:i.TABS,page:r,backgroundColor:n._.colorPlain,renderItem:u.renderItem,onChange:s.onTabsChange},n._.orientation)}),c.COMPONENT)},"./src/screens/rakuen/notify/component/tabs/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=function(e){return(0,n.jsx)(o.default,{id:e.key})};r(s("react"));var o=r(s("./src/screens/rakuen/notify/component/list/index.tsx")),n=s("./node_modules/react/jsx-runtime.js")},"./src/screens/rakuen/notify/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_PAGE=t.TABS=t.STATE=t.COMPONENT=void 0;var r=s("./src/stores/index.ts");t.COMPONENT="Notify",t.STATE={visibleBottom:r._.window.height,page:0,_loaded:!1},t.TABS=[{key:"notify",title:"提醒"},{key:"pmIn",title:"收件箱"},{key:"pmOut",title:"已发送"}],t.TYPE_PAGE={pm:1,out:2}},"./src/screens/rakuen/notify/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/rakuen/notify/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Header")},"./src/screens/rakuen/notify/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),i=s("./src/utils/fetch/index.ts"),u=s("./src/constants/index.ts"),c=s("./src/screens/rakuen/notify/header/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.ob)((function(){return(0,a.jsx)(o.Header,{title:"电波提醒",hm:["notify/all","Notify"],headerRight:function(){return(0,a.jsx)(o.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("电波提醒.右上角菜单",{key:e}),(0,n.open)((0,u.HTML_NOTIFY)()))},children:(0,a.jsx)(o.Heatmap,{id:"电波提醒.右上角菜单"})})}})}),c.COMPONENT)},"./src/screens/rakuen/notify/hooks.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.useNotifyPage=function(e){var t=e.$;(0,d.useRunAfter)((0,n.default)(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:t.doClearNotify();case 3:case"end":return e.stop()}}),e)}))))};var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=s("./src/utils/hooks/index.ts")},"./src/screens/rakuen/notify/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/utils/hooks/index.ts"),i=r(s("./src/screens/rakuen/notify/component/heatmaps/index.tsx")),u=r(s("./src/screens/rakuen/notify/component/tabs/index.tsx")),c=r(s("./src/screens/rakuen/notify/header/index.tsx")),a=s("./src/screens/rakuen/notify/hooks.ts"),l=r(s("./src/screens/rakuen/notify/store.ts")),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(l.default,(function(e,t){(0,a.useNotifyPage)(t);var s=t.$;return(0,d.useObserver)((function(){return(0,m.jsxs)(o.Component,{id:"screen-notify",children:[(0,m.jsx)(c.default,{}),(0,m.jsx)(o.Page,{loaded:s.state._loaded,children:(0,m.jsx)(u.default,{})}),(0,m.jsx)(i.default,{})]})}))}))},"./src/screens/rakuen/notify/store.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.string.repeat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),p=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),y=s("./src/utils/fetch/index.ts"),b=r(s("./src/utils/store/index.ts")),_=s("./src/screens/rakuen/notify/ds.ts");function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,a.default)(e);if(t){var o=(0,a.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}t.default=(o=function(e){(0,u.default)(s,e);var t=x(s);function s(){var e;(0,n.default)(this,s);for(var r=arguments.length,o=new Array(r),d=0;d<r;d++)o[d]=arguments[d];return e=t.call.apply(t,[this].concat(o)),(0,l.default)((0,i.default)(e),"params",void 0),(0,l.default)((0,i.default)(e),"state",(0,f.observable)(_.STATE)),(0,l.default)((0,i.default)(e),"init",(function(){var t=e.params.type;return e.setState({page:_.TYPE_PAGE[t]||0,_loaded:!0}),(0,y.queue)([function(){return e.fetchNotify()},function(){return e.fetchPM(!0,"pmIn")},function(){return e.fetchPM(!0,"pmOut")}])})),(0,l.default)((0,i.default)(e),"fetchNotify",(function(){return p.rakuenStore.fetchNotify(!0)})),(0,l.default)((0,i.default)(e),"fetchPM",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return p.userStore.fetchPM(e,t)})),(0,l.default)((0,i.default)(e),"onTabsChange",(function(t){e.setState({page:t})})),(0,l.default)((0,i.default)(e),"onScroll",j.updateVisibleBottom.bind((0,i.default)(e))),(0,l.default)((0,i.default)(e),"doClearNotify",(function(){(0,y.t)("电波提醒.清除"),p.rakuenStore.doClearNotify()})),e}return(0,d.default)(s,[{key:"notify",get:function(){return p.rakuenStore.notify}},{key:"mergeNotify",get:function(){try{var e=this.notify.list,t=[];return e.forEach((function(s,r){var o=e[r-1];o&&o.userId===s.userId&&o.title===s.title&&o.message===s.message&&o.message2===s.message2?t[t.length-1].repeat+=1:t.push(Object.assign({},s,{repeat:0}))})),Object.assign({},this.notify,{list:t})}catch(e){return this.notify}}},{key:"pmIn",get:function(){return p.userStore.pmIn}},{key:"pmOut",get:function(){return p.userStore.pmOut}}]),s}(b.default),(0,m.default)(o.prototype,"notify",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"notify"),o.prototype),(0,m.default)(o.prototype,"mergeNotify",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"mergeNotify"),o.prototype),(0,m.default)(o.prototype,"pmIn",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"pmIn"),o.prototype),(0,m.default)(o.prototype,"pmOut",[f.computed],Object.getOwnPropertyDescriptor(o.prototype,"pmOut"),o.prototype),o)}}]);