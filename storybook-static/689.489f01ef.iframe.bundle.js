(self.webpackChunkweb=self.webpackChunkweb||[]).push([[689],{"./src/screens/discovery/tags/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/tags/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/discovery/tags/component/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/tags/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Extra")},"./src/screens/discovery/tags/component/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./src/screens/discovery/tags/component/extra/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.ob)((function(){return(0,c.jsx)(o.Heatmap,{right:n._.wind,bottom:n._.window.height-n._.tabsHeaderHeight-12,id:"标签索引.标签页切换",transparent:!0})}),d.COMPONENT)},"./src/screens/discovery/tags/component/filter/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/tags/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Filter")},"./src/screens/discovery/tags/component/filter/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=f(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,s&&s.set(e,r),r}(s("react")),a=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),d=s("./node_modules/mobx-react/dist/mobxreact.esm.js"),c=s("./src/components/index.ts"),i=s("./src/utils/decorators/index.ts"),l=s("./src/utils/dev/index.ts"),u=s("./src/screens/discovery/tags/component/filter/ds.ts"),m=s("./src/screens/discovery/tags/component/filter/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(f=function(e){return e?s:t})(e)}t.default=(0,i.c)((function(e,t){var s=t.$;(0,l.r)(u.COMPONENT);var r=(0,n.useState)(!1),i=(0,o.default)(r,2),f=i[0],y=i[1],j=(0,n.useCallback)((function(){return y(!0)}),[]),v=(0,n.useCallback)((function(){return y(!1)}),[]);return(0,d.useObserver)((function(){var e=(0,m.memoStyles)(),t=s.state.ipt;return(0,p.jsxs)(a.default,{style:e.filter,children:[(0,p.jsx)(c.Input,{style:e.input,clearButtonMode:"never",value:t,returnKeyType:"search",returnKeyLabel:"搜索",onFocus:j,onBlur:v,onChangeText:s.onFilterChange,onSubmitEditing:s.onSubmitEditing}),!f&&!t&&(0,p.jsx)(c.Flex,{style:e.icon,justify:"center",pointerEvents:"none",children:(0,p.jsx)(c.Iconfont,{name:"md-search",size:18})})]})}))}))},"./src/screens/discovery/tags/component/filter/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{filter:{height:64,paddingVertical:12,paddingHorizontal:r._.wind,marginBottom:r._._wind,backgroundColor:r._.colorBg},input:Object.assign({height:40,paddingVertical:0},r._.fontSize16,{textAlign:"center",backgroundColor:r._.select(r._.colorBorder,r._.colorPlain),borderRadius:40}),icon:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0}}}))},"./src/screens/discovery/tags/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/tags/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Item")},"./src/screens/discovery/tags/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),i=s("./src/screens/discovery/tags/utils.ts"),l=s("./src/screens/discovery/tags/component/item/ds.ts"),u=s("./src/screens/discovery/tags/component/item/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=e.type,r=e.name,d=e.nums,l=e.index,p=t.$,f=t.navigation,y=(0,u.memoStyles)(),j=y.item,v=j.width,_=j.height,b=d;p.state.rec?b=(0,i.getTyperankNums)(s,r):d>1e4&&(b=(0,a.formatNumber)(d/1e4,1)+"w");var g=n._.num(4),h=(0,a.HTMLDecode)(r);return(0,m.jsx)(o.Touchable,{style:(0,a.stl)(y.container,(n._.isPad||n._.isLandscape)&&!(l%g)&&n._.container.left),animate:!0,scale:.85,onPress:function(){if(p.state.rec&&b)return(0,c.t)("标签索引.跳转",{to:"Typerank",type:s,tag:h}),void f.push("Typerank",{type:s,tag:h});f.push("Tag",{type:s,tag:h}),(0,c.t)("标签索引.跳转",{to:"Tag",type:s,tag:h})},children:(0,m.jsxs)(o.Squircle,{width:v,height:_,radius:!0,children:[(0,m.jsxs)(o.Flex,{style:y.item,direction:"column",justify:"center",children:[(0,m.jsx)(o.Highlight,{align:"center",size:12,bold:!0,numberOfLines:3,value:p.state.filter,children:h}),(0,m.jsx)(o.Text,{style:n._.mt.xs,type:"sub",align:"center",size:10,children:b||"--"})]}),0===l&&(0,m.jsx)(o.Heatmap,{id:"标签索引.跳转"})]})})}),l.COMPONENT)},"./src/screens/discovery/tags/component/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){var e=r._.grid(r._.num(4)),t=e.width,s=e.marginLeft;return{container:{marginBottom:r._.md,marginLeft:s},item:{width:t,height:t,paddingHorizontal:r._.sm,backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1)}}}))},"./src/screens/discovery/tags/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/tags/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"List")},"./src/screens/discovery/tags/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=r(s("react")),m=s("./src/components/index.ts"),p=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),y=s("./src/utils/decorators/index.ts"),j=s("./src/utils/dev/index.ts"),v=s("./src/screens/discovery/tags/ds.ts"),_=r(s("./src/screens/discovery/tags/component/filter/index.tsx")),b=r(s("./src/screens/discovery/tags/component/item/index.tsx")),g=s("./src/screens/discovery/tags/component/list/utils.ts"),h=s("./src/screens/discovery/tags/component/list/ds.ts"),x=s("./node_modules/react/jsx-runtime.js");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}var T=function(e){(0,d.default)(s,e);var t=O(s);function s(){var e;(0,o.default)(this,s);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return e=t.call.apply(t,[this].concat(n)),(0,l.default)((0,a.default)(e),"renderItem",(function(t){var s=t.item,r=t.index;return(0,x.jsx)(b.default,Object.assign({type:e.id,index:r},s))})),(0,l.default)((0,a.default)(e),"onHeaderRefresh",(function(){return e.context.$.fetchList(e.id,!0)})),(0,l.default)((0,a.default)(e),"onFooterRefresh",(function(){return e.context.$.fetchList(e.id)})),e}return(0,n.default)(s,[{key:"id",get:function(){return this.props.id}},{key:"render",value:function(){(0,j.r)(h.COMPONENT);var e=this.context.$,t=e.list(this.id),s=f._.num(4);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(_.default,{}),t._loaded?(0,x.jsx)(m.ListView,{keyExtractor:g.keyExtractor,contentContainerStyle:f._.container.bottom,data:t,lazy:32,numColumns:s,scrollToTop:v.TABS[e.state.page].key===this.id,keyboardDismissMode:"on-drag",ListHeaderComponent:e.state.rec&&(0,x.jsx)(p.Notice,{style:f._.mb.md,children:"「排名」为作者整理的对应标签下评分最高的前 100 个条目。若没有足够数据则跳转到正常的标签页面。"}),renderItem:this.renderItem,onHeaderRefresh:this.onHeaderRefresh,onFooterRefresh:this.onFooterRefresh},""+f._.orientation+s):(0,x.jsx)(m.Loading,{})]})}}]),s}(u.default.Component);(0,l.default)(T,"defaultProps",{title:"全部"});t.default=(0,y.obc)(T);try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"enum",value:[{value:'"anime"'},{value:'"book"'},{value:'"game"'},{value:'"music"'},{value:'"real"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/tags/component/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/discovery/tags/component/list/index.tsx#list"})}catch(e){}},"./src/screens/discovery/tags/component/list/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=function(e){return e.name+"|"+e.nums}},"./src/screens/discovery/tags/component/rec-segment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DS=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/tags/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"RecSegement"),t.DS=["数量","排名"]},"./src/screens/discovery/tags/component/rec-segment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/screens/discovery/tags/component/rec-segment/ds.ts"),d=s("./src/screens/discovery/tags/component/rec-segment/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)((function(e){var t=e.value,s=e.onValueChange;return(0,c.jsx)(o.SegmentedControl,{style:d.styles.segment,size:11,values:a.DS,selectedIndex:t?1:0,onValueChange:s})}),a.COMPONENT);try{recsegment.displayName="recsegment",recsegment.__docgenInfo={description:"",displayName:"recsegment",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},onValueChange:{defaultValue:null,description:"",name:"onValueChange",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/tags/component/rec-segment/index.tsx#recsegment"]={docgenInfo:recsegment.__docgenInfo,name:"recsegment",path:"src/screens/discovery/tags/component/rec-segment/index.tsx#recsegment"})}catch(e){}},"./src/screens/discovery/tags/component/rec-segment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var r=s("./src/stores/index.ts");t.styles=r._.create({segment:{width:r._.r(88),height:r._.r(28),marginRight:r._.sm}})},"./src/screens/discovery/tags/component/tabs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/tags/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Tabs")},"./src/screens/discovery/tags/component/tabs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./src/screens/discovery/tags/ds.ts"),c=s("./src/screens/discovery/tags/component/tabs/utils.tsx"),i=s("./src/screens/discovery/tags/component/tabs/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$;return(0,l.jsx)(o.TabsV2,{style:n._.mt._sm,routes:d.TABS,page:s.state.page,backgroundColor:n._.colorPlain,renderItem:c.renderItem,onChange:s.onChange},n._.orientation)}),i.COMPONENT)},"./src/screens/discovery/tags/component/tabs/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=a;r(s("react"));var o=r(s("./src/screens/discovery/tags/component/list/index.tsx")),n=s("./node_modules/react/jsx-runtime.js");function a(e){return(0,n.jsx)(o.default,{id:e.key},e.key)}try{a.displayName="renderItem",a.__docgenInfo={description:"",displayName:"renderItem",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/tags/component/tabs/utils.tsx#renderItem"]={docgenInfo:a.__docgenInfo,name:"renderItem",path:"src/screens/discovery/tags/component/tabs/utils.tsx#renderItem"})}catch(e){}},"./src/screens/discovery/tags/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.COMPONENT=void 0;var r=s("./src/constants/index.ts");t.COMPONENT="Tags",t.TABS=r.SUBJECT_TYPE.map((function(e){return{title:e.title,key:e.label}}))},"./src/screens/discovery/tags/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_SPA=t.TEXT_BROWSER=t.DATA=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/constants/index.ts"),n=s("./src/screens/discovery/tags/ds.ts"),a=(t.COMPONENT=(0,r.rc)(n.COMPONENT,"Header"),t.TEXT_BROWSER="浏览器查看"),d=t.TEXT_SPA="网页版查看",c=t.DATA=[a];o.STORYBOOK||c.push(d)},"./src/screens/discovery/tags/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),c=s("./src/constants/index.ts"),i=r(s("./src/screens/discovery/tags/component/rec-segment/index.tsx")),l=s("./src/screens/discovery/tags/header/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$;return(0,u.jsx)(o.Header,{title:"标签",alias:"标签索引",hm:[s.url,"Tags"],headerTitleAlign:"left",headerRight:function(){return(0,u.jsxs)(o.Flex,{children:[!!s.state._loaded&&(0,u.jsx)(i.default,{value:s.state.rec,onValueChange:s.onValueChange}),(0,u.jsx)(o.Header.Popover,{data:l.DATA,onSelect:function(e){if((0,d.t)("标签索引.右上角菜单",{key:e}),e!==l.TEXT_BROWSER)if(e!==l.TEXT_SPA);else{var t=c.URL_SPA+"/"+(0,n.getSPAParams)("Tags");(0,n.open)(t)}else(0,n.open)(s.url)},children:(0,u.jsx)(o.Heatmap,{id:"标签索引.右上角菜单"})})]})}})}),l.COMPONENT)},"./src/screens/discovery/tags/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/discovery/tags/component/extra/index.tsx")),c=r(s("./src/screens/discovery/tags/component/tabs/index.tsx")),i=r(s("./src/screens/discovery/tags/header/index.tsx")),l=r(s("./src/screens/discovery/tags/store/index.ts")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(l.default,(function(e,t){var s=t.$;return(0,a.useRunAfter)((function(){s.init()})),(0,a.useObserver)((function(){return(0,u.jsxs)(o.Component,{id:"screen-tags",children:[(0,u.jsx)(i.default,{}),(0,u.jsx)(o.Page,{loaded:s.state._loaded,children:(0,u.jsx)(c.default,{})}),(0,u.jsx)(d.default,{})]})}))}));try{tags.displayName="tags",tags.__docgenInfo={description:"",displayName:"tags",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/tags/index.tsx#tags"]={docgenInfo:tags.__docgenInfo,name:"tags",path:"src/screens/discovery/tags/index.tsx#tags"})}catch(e){}},"./src/screens/discovery/tags/store/action.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.slice.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/utils/fetch/index.ts"),f=s("./src/screens/discovery/tags/ds.ts"),y=s("./src/screens/discovery/tags/utils.ts"),j=o(s("./src/screens/discovery/tags/store/fetch.ts"));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,l.default)(this,s)}}t.default=function(e){(0,i.default)(s,e);var t=v(s);function s(){var e,o,a;(0,d.default)(this,s);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return e=t.call.apply(t,[this].concat(l)),(0,m.default)((0,c.default)(e),"onChange",(o=(0,n.default)(r.mark((function t(s){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s!==e.state.page){t.next=2;break}return t.abrupt("return");case 2:if(o=(0,y.getType)(s),!e.state.rec){t.next=6;break}return t.next=6,(0,y.loadTyperankIdsData)(o);case 6:e.setState({page:s}),e.tabChangeCallback(s),e.save(),(0,p.t)("标签索引.标签页切换",{type:o});case 10:case"end":return t.stop()}}),t)}))),function(e){return o.apply(this,arguments)})),(0,m.default)((0,c.default)(e),"onValueChange",(a=(0,n.default)(r.mark((function t(s){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o="排名"===s)){t.next=4;break}return t.next=4,(0,y.loadTyperankIdsData)(e.type);case 4:e.setState({rec:o}),e.save(),(0,p.t)("标签索引.标签类型切换",{rec:o});case 7:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)})),(0,m.default)((0,c.default)(e),"tabChangeCallback",(function(t){var s=f.TABS[t].key;e.list(s)._loaded||e.fetchList(s,!0)})),(0,m.default)((0,c.default)(e),"onFilterChange",(function(t){var s=t.trim();s?e.setState({ipt:s}):e.setState({ipt:s,filter:""})})),(0,m.default)((0,c.default)(e),"onSubmitEditing",(function(){var t=e.state.ipt;t&&t.length&&(e.setState({filter:t}),e.fetchList(e.type,!0),e.save(),(0,p.t)("标签索引.筛选",{filter:t.slice(0,8),type:e.type}))})),e}return(0,a.default)(s)}(j.default)},"./src/screens/discovery/tags/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),u=s("./node_modules/mobx/dist/mobx.esm.js"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),f=s("./src/constants/index.ts"),y=s("./src/screens/discovery/tags/ds.ts"),j=r(s("./src/screens/discovery/tags/store/state.ts"));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}t.default=(o=function(e){(0,d.default)(s,e);var t=v(s);function s(){return(0,n.default)(this,s),t.apply(this,arguments)}return(0,a.default)(s,[{key:"type",get:function(){return y.TABS[this.state.page].key}},{key:"url",get:function(){return(0,f.HTML_TAGS)(this.type,this.state.page,this.state.filter)}},{key:"thirdPartyKey",get:function(){return"tags_"+[this.type,this.state.filter].join("_")}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"list",value:function(e){var t=this;return(0,u.computed)((function(){var s=m.discoveryStore.tags(e,t.state.filter);return s._loaded?m.userStore.isLimit?Object.assign({},s,{list:s.list.filter((function(e){return!(0,p.x18s)(e.name)}))}):s:t.ota?Object.assign({},t.ota,{pagination:{page:1,pageTotal:10}}):f.LIST_EMPTY})).get()}}]),s}(j.default),(0,l.default)(o.prototype,"type",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"type"),o.prototype),(0,l.default)(o.prototype,"url",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"url"),o.prototype),(0,l.default)(o.prototype,"thirdPartyKey",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"thirdPartyKey"),o.prototype),(0,l.default)(o.prototype,"ota",[u.computed],Object.getOwnPropertyDescriptor(o.prototype,"ota"),o.prototype),o)},"./src/screens/discovery/tags/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;var r=s("./src/screens/discovery/tags/ds.ts"),o=(t.NAMESPACE="Screen"+r.COMPONENT,t.EXCLUDE_STATE={ipt:"",filter:"",isFocused:!0,ota:{}});t.STATE=Object.assign({page:0,rec:!1},o,{_loaded:!1})},"./src/screens/discovery/tags/store/fetch.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),y=s("./src/utils/kv/index.ts"),j=s("./src/constants/index.ts"),v=o(s("./src/screens/discovery/tags/store/computed.ts"));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,l.default)(this,s)}}var b=[];t.default=function(e){(0,i.default)(s,e);var t=_(s);function s(){var e,o;(0,d.default)(this,s);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),(0,m.default)((0,c.default)(e),"fetchList",(o=(0,n.default)(r.mark((function t(s){var o,n,a,d,c,i=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=i.length>1&&void 0!==i[1]&&i[1])&&e.fetchThirdParty(),n=e.state.filter,t.next=5,p.discoveryStore.fetchTags({type:s,filter:n},o);case 5:return(a=t.sent).list.length&&e.thirdPartyKey in e.state.ota&&(c=(null==(d=e.ota)?void 0:d.ts)||0,(0,f.getTimestamp)()-c>=j.D7&&e.updateThirdParty()),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)}))),function(e){return o.apply(this,arguments)})),(0,m.default)((0,c.default)(e),"fetchThirdParty",(0,n.default)(r.mark((function t(){var s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ota||e.list(e.type)._loaded){t.next=8;break}return t.next=3,(0,y.get)(e.thirdPartyKey);case 3:if(s=t.sent){t.next=7;break}return e.setState({ota:(0,m.default)({},e.thirdPartyKey,{list:[],_loaded:0})}),t.abrupt("return");case 7:e.setState({ota:(0,m.default)({},e.thirdPartyKey,Object.assign({},s,{_loaded:(0,f.getTimestamp)()}))});case 8:case"end":return t.stop()}}),t)})))),(0,m.default)((0,c.default)(e),"updateThirdParty",(0,n.default)(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.includes(e.thirdPartyKey)){t.next=2;break}return t.abrupt("return");case 2:setTimeout((function(){(0,y.update)(e.thirdPartyKey,{list:e.list(e.type).list}),b.push(e.thirdPartyKey)}),0);case 3:case"end":return t.stop()}}),t)})))),e}return(0,a.default)(s)}(v.default)},"./src/screens/discovery/tags/store/index.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/screens/discovery/tags/utils.ts"),f=o(s("./src/screens/discovery/tags/store/action.ts")),y=s("./src/screens/discovery/tags/store/ds.ts");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,l.default)(this,s)}}var v=function(e){(0,i.default)(s,e);var t=j(s);function s(){var e;(0,d.default)(this,s);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,c.default)(e),"init",(0,n.default)(r.mark((function t(){var s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStorage(y.NAMESPACE);case 2:if(!(s=t.sent).rec){t.next=6;break}return t.next=6,(0,p.loadTyperankIdsData)((0,p.getType)(s.page));case 6:return e.setState(Object.assign({},s,y.EXCLUDE_STATE,{_loaded:!0})),t.abrupt("return",e.fetchList(e.type,!0));case 8:case"end":return t.stop()}}),t)})))),e}return(0,a.default)(s)}(f.default);t.default=v},"./src/screens/discovery/tags/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=s("./node_modules/mobx/dist/mobx.esm.js"),m=r(s("./src/utils/store/index.ts")),p=s("./src/screens/discovery/tags/store/ds.ts");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}t.default=function(e){(0,d.default)(s,e);var t=f(s);function s(){var e;(0,n.default)(this,s);for(var r=arguments.length,o=new Array(r),d=0;d<r;d++)o[d]=arguments[d];return e=t.call.apply(t,[this].concat(o)),(0,l.default)((0,a.default)(e),"state",(0,u.observable)(p.STATE)),(0,l.default)((0,a.default)(e),"save",(function(){return e.saveStorage(p.NAMESPACE,p.EXCLUDE_STATE)})),e}return(0,o.default)(s)}(m.default)},"./src/screens/discovery/tags/utils.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.getType=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(null==d.TABS||null==(e=d.TABS[t])?void 0:e.key)||d.TABS[0].key},t.getTyperankNums=function(e,t){var s,r;"anime"===e?r=(0,a.getJSON)("typerank/anime-ids"):"book"===e?r=(0,a.getJSON)("typerank/book-ids"):"game"===e?r=(0,a.getJSON)("typerank/game-ids"):"music"===e?r=(0,a.getJSON)("typerank/music-ids"):"real"===e&&(r=(0,a.getJSON)("typerank/real-ids"));return r&&(null==(s=r[t])?void 0:s.length)||0},t.loadTyperankIdsData=function(e){return c.apply(this,arguments)};var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=s("./src/assets/json/index.web.ts"),d=s("./src/screens/discovery/tags/ds.ts");function c(){return(c=(0,n.default)(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.loadJSON)("typerank/"+t+"-ids");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);