(self.webpackChunkweb=self.webpackChunkweb||[]).push([[8964],{"./src/screens/rakuen/notify/component/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=n("./src/utils/dev/index.ts"),r=n("./src/screens/rakuen/notify/ds.ts");t.COMPONENT=(0,s.rc)(r.COMPONENT,"Component")},"./src/screens/rakuen/notify/component/heatmaps/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=n("./src/utils/dev/index.ts"),r=n("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,s.rc)(r.COMPONENT,"Heatmaps")},"./src/screens/rakuen/notify/component/heatmaps/index.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("./node_modules/react/index.js"));var r=n("./src/components/index.ts"),o=n("./src/stores/index.ts"),d=n("./src/utils/decorators/index.ts"),i=n("./src/screens/rakuen/notify/component/heatmaps/ds.ts"),u=n("./node_modules/react/jsx-runtime.js");t.default=(0,d.ob)((function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.Heatmap,{right:86,bottom:o._.bottom+20,id:"电波提醒.跳转",to:"Topic",alias:"帖子",transparent:!0}),(0,u.jsx)(r.Heatmap,{right:86,bottom:o._.bottom-13,id:"电波提醒.跳转",to:"PM",transparent:!0}),(0,u.jsx)(r.Heatmap,{right:260,bottom:o._.bottom-13,id:"电波提醒.跳转",to:"Zone",alias:"空间",transparent:!0}),(0,u.jsx)(r.Heatmap,{right:86,bottom:o._.bottom-46,id:"电波提醒.跳转",to:"Blog",alias:"日志",transparent:!0})]})}),i.COMPONENT)},"./src/screens/rakuen/notify/component/item-notify/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var s=n("./src/utils/dev/index.ts"),r=n("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,s.rc)(r.COMPONENT,"ItemNotify"),t.EVENT={id:"电波提醒.跳转"}},"./src/screens/rakuen/notify/component/item-notify/index.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),n("./node_modules/core-js/modules/es.object.assign.js"),n("./node_modules/core-js/modules/es.string.repeat.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("./node_modules/react/index.js"));var r=n("./src/screens/_/index.ts"),o=n("./src/utils/decorators/index.ts"),d=n("./src/screens/rakuen/notify/component/item-notify/ds.ts"),i=n("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)((function(e,t){var n=e.item,s=e.index,o=t.navigation;return(0,i.jsx)(r.ItemNotify,Object.assign({},n,{navigation:o,event:d.EVENT,index:s-(n.repeat||0),repeat:n.repeat||0}))}),d.COMPONENT)},"./src/screens/rakuen/notify/component/item-pm/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var s=n("./src/utils/dev/index.ts"),r=n("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,s.rc)(r.COMPONENT,"ItemPM"),t.EVENT={id:"电波提醒.跳转"}},"./src/screens/rakuen/notify/component/item-pm/index.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),n("./node_modules/core-js/modules/es.object.assign.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("./node_modules/react/index.js"));var r=n("./src/screens/_/index.ts"),o=n("./src/utils/decorators/index.ts"),d=n("./src/screens/rakuen/notify/component/item-pm/ds.ts"),i=n("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)((function(e,t){var n=e.id,s=e.item,o=e.index,u=t.$,a=t.navigation;return(0,i.jsx)(r.ItemPM,Object.assign({},s,{navigation:a,event:d.EVENT,index:o,onRefresh:function(){return u.fetchPM(!0,n)}}))}),d.COMPONENT)},"./src/screens/rakuen/notify/component/list/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=n("./src/utils/dev/index.ts"),r=n("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,s.rc)(r.COMPONENT,"List")},"./src/screens/rakuen/notify/component/list/index.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),n("./node_modules/core-js/modules/es.object.assign.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("./node_modules/react/index.js"));var r=n("./src/components/index.ts"),o=n("./src/utils/decorators/index.ts"),d=n("./src/screens/rakuen/notify/component/list/utils.tsx"),i=n("./src/screens/rakuen/notify/component/list/ds.ts"),u=n("./src/screens/rakuen/notify/component/list/styles.ts"),a=n("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)((function(e,t){var n=e.id,s=t.$,o={keyExtractor:d.keyExtractor,contentContainerStyle:u.styles.contentContainerStyle,scrollEventThrottle:16,onScroll:s.onScroll};switch(n){case"notify":o.data=s.mergeNotify,o.renderItem=d.renderNotifyItem,o.onHeaderRefresh=s.fetchNotify;break;case"pmIn":o.data=s.pmIn,o.renderItem=d.renderPmInItem,o.onHeaderRefresh=function(){return s.fetchPM(!0,"pmIn")},o.onFooterRefresh=function(){return s.fetchPM(!1,"pmIn")};break;case"pmOut":o.data=s.pmOut,o.renderItem=d.renderPmOutItem,o.onHeaderRefresh=function(){return s.fetchPM(!0,"pmOut")},o.onFooterRefresh=function(){return s.fetchPM(!1,"pmOut")}}return(0,a.jsx)(r.ListView,Object.assign({},o))}),i.COMPONENT)},"./src/screens/rakuen/notify/component/list/styles.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var s=n("./src/stores/index.ts");t.styles=s._.create({contentContainerStyle:{paddingTop:s._.md,paddingBottom:s._.bottom}})},"./src/screens/rakuen/notify/component/list/utils.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=function(e,t){return String(t)},t.renderNotifyItem=i,t.renderPmInItem=u,t.renderPmOutItem=a;s(n("./node_modules/react/index.js"));var r=s(n("./src/screens/rakuen/notify/component/item-notify/index.tsx")),o=s(n("./src/screens/rakuen/notify/component/item-pm/index.tsx")),d=n("./node_modules/react/jsx-runtime.js");function i(e){var t=e.item,n=e.index;return(0,d.jsx)(r.default,{item:t,index:n})}function u(e){var t=e.item,n=e.index;return(0,d.jsx)(o.default,{id:"pmIn",item:t,index:n})}function a(e){var t=e.item,n=e.index;return(0,d.jsx)(o.default,{id:"pmOut",item:t,index:n})}try{i.displayName="renderNotifyItem",i.__docgenInfo={description:"",displayName:"renderNotifyItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/component/list/utils.tsx#renderNotifyItem"]={docgenInfo:i.__docgenInfo,name:"renderNotifyItem",path:"src/screens/rakuen/notify/component/list/utils.tsx#renderNotifyItem"})}catch(e){}try{u.displayName="renderPmInItem",u.__docgenInfo={description:"",displayName:"renderPmInItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/component/list/utils.tsx#renderPmInItem"]={docgenInfo:u.__docgenInfo,name:"renderPmInItem",path:"src/screens/rakuen/notify/component/list/utils.tsx#renderPmInItem"})}catch(e){}try{a.displayName="renderPmOutItem",a.__docgenInfo={description:"",displayName:"renderPmOutItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/component/list/utils.tsx#renderPmOutItem"]={docgenInfo:a.__docgenInfo,name:"renderPmOutItem",path:"src/screens/rakuen/notify/component/list/utils.tsx#renderPmOutItem"})}catch(e){}},"./src/screens/rakuen/notify/component/tabs/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=n("./src/utils/dev/index.ts"),r=n("./src/screens/rakuen/notify/component/ds.ts");t.COMPONENT=(0,s.rc)(r.COMPONENT,"Tabs")},"./src/screens/rakuen/notify/component/tabs/index.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("./node_modules/react/index.js"));var r=n("./src/components/index.ts"),o=n("./src/stores/index.ts"),d=n("./src/utils/decorators/index.ts"),i=n("./src/screens/rakuen/notify/ds.ts"),u=n("./src/screens/rakuen/notify/component/tabs/utils.tsx"),a=n("./src/screens/rakuen/notify/component/tabs/ds.ts"),c=n("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var n=t.$,s=n.state.page;return(0,c.jsx)(r.TabsV2,{style:o._.mt._sm,routes:i.TABS,page:s,backgroundColor:o._.colorPlain,renderItem:u.renderItem,onChange:n.onTabsChange},o._.orientation)}),a.COMPONENT);try{tabs.displayName="tabs",tabs.__docgenInfo={description:"",displayName:"tabs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/component/tabs/index.tsx#tabs"]={docgenInfo:tabs.__docgenInfo,name:"tabs",path:"src/screens/rakuen/notify/component/tabs/index.tsx#tabs"})}catch(e){}},"./src/screens/rakuen/notify/component/tabs/utils.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=d;s(n("./node_modules/react/index.js"));var r=s(n("./src/screens/rakuen/notify/component/list/index.tsx")),o=n("./node_modules/react/jsx-runtime.js");function d(e){return(0,o.jsx)(r.default,{id:e.key})}try{d.displayName="renderItem",d.__docgenInfo={description:"",displayName:"renderItem",props:{key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"enum",value:[{value:'"notify"'},{value:'"pmIn"'},{value:'"pmOut"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/component/tabs/utils.tsx#renderItem"]={docgenInfo:d.__docgenInfo,name:"renderItem",path:"src/screens/rakuen/notify/component/tabs/utils.tsx#renderItem"})}catch(e){}},"./src/screens/rakuen/notify/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_PAGE=t.TABS=t.STATE=t.COMPONENT=void 0;var s=n("./src/stores/index.ts");t.COMPONENT="Notify",t.STATE={visibleBottom:s._.window.height,page:0,_loaded:!1},t.TABS=[{key:"notify",title:"提醒"},{key:"pmIn",title:"收件箱"},{key:"pmOut",title:"已发送"}],t.TYPE_PAGE={pm:1,out:2}},"./src/screens/rakuen/notify/header/ds.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var s=n("./src/utils/dev/index.ts"),r=n("./src/screens/rakuen/notify/ds.ts");t.COMPONENT=(0,s.rc)(r.COMPONENT,"Header")},"./src/screens/rakuen/notify/header/index.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("./node_modules/react/index.js"));var r=n("./src/components/index.ts"),o=n("./src/utils/index.ts"),d=n("./src/utils/decorators/index.ts"),i=n("./src/utils/fetch/index.ts"),u=n("./src/constants/index.ts"),a=n("./src/screens/rakuen/notify/header/ds.ts"),c=n("./node_modules/react/jsx-runtime.js");t.default=(0,d.ob)((function(){return(0,c.jsx)(r.Header,{title:"电波提醒",hm:["notify/all","Notify"],headerRight:function(){return(0,c.jsx)(r.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("电波提醒.右上角菜单",{key:e}),(0,o.open)((0,u.HTML_NOTIFY)()))},children:(0,c.jsx)(r.Heatmap,{id:"电波提醒.右上角菜单"})})}})}),a.COMPONENT)},"./src/screens/rakuen/notify/hooks.ts":(e,t,n)=>{var s=n("./node_modules/@babel/runtime/regenerator/index.js");n("./node_modules/core-js/modules/es.object.define-property.js");var r=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.useNotifyPage=function(e){var t=e.$;(0,d.useRunAfter)((0,o.default)(s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:t.doClearNotify();case 3:case"end":return e.stop()}}),e)}))))};var o=r(n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=n("./src/utils/hooks/index.ts")},"./src/screens/rakuen/notify/index.tsx":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("./node_modules/react/index.js"));var r=n("./src/components/index.ts"),o=n("./src/utils/decorators/index.ts"),d=n("./src/utils/hooks/index.ts"),i=s(n("./src/screens/rakuen/notify/component/heatmaps/index.tsx")),u=s(n("./src/screens/rakuen/notify/component/tabs/index.tsx")),a=s(n("./src/screens/rakuen/notify/header/index.tsx")),c=n("./src/screens/rakuen/notify/hooks.ts"),l=s(n("./src/screens/rakuen/notify/store.ts")),m=n("./node_modules/react/jsx-runtime.js");t.default=(0,o.ic)(l.default,(function(e,t){(0,c.useNotifyPage)(t);var n=t.$;return(0,d.useObserver)((function(){return(0,m.jsxs)(r.Component,{id:"screen-notify",children:[(0,m.jsx)(a.default,{}),(0,m.jsx)(r.Page,{loaded:n.state._loaded,children:(0,m.jsx)(u.default,{})}),(0,m.jsx)(i.default,{})]})}))}));try{notify.displayName="notify",notify.__docgenInfo={description:"",displayName:"notify",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/index.tsx#notify"]={docgenInfo:notify.__docgenInfo,name:"notify",path:"src/screens/rakuen/notify/index.tsx#notify"})}catch(e){}},"./src/screens/rakuen/notify/store.ts":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.define-property.js"),n("./node_modules/core-js/modules/es.reflect.construct.js"),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.function.bind.js"),n("./node_modules/core-js/modules/es.array.for-each.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.string.repeat.js"),n("./node_modules/core-js/modules/es.object.assign.js"),n("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=s(n("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=s(n("./node_modules/@babel/runtime/helpers/createClass.js")),i=s(n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=s(n("./node_modules/@babel/runtime/helpers/inherits.js")),a=s(n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=s(n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=s(n("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=s(n("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=n("./node_modules/mobx/dist/mobx.esm.js"),p=n("./src/stores/index.ts"),y=n("./src/utils/index.ts"),j=n("./src/utils/fetch/index.ts"),_=s(n("./src/utils/store/index.ts")),b=n("./src/screens/rakuen/notify/ds.ts");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return(0,a.default)(this,n)}}t.default=(r=function(e){(0,u.default)(n,e);var t=O(n);function n(){var e;(0,o.default)(this,n);for(var s=arguments.length,r=new Array(s),d=0;d<s;d++)r[d]=arguments[d];return e=t.call.apply(t,[this].concat(r)),(0,l.default)((0,i.default)(e),"params",void 0),(0,l.default)((0,i.default)(e),"state",(0,f.observable)(b.STATE)),(0,l.default)((0,i.default)(e),"init",(function(){var t=e.params.type;return e.setState({page:b.TYPE_PAGE[t]||0,_loaded:!0}),(0,j.queue)([function(){return e.fetchNotify()},function(){return e.fetchPM(!0,"pmIn")},function(){return e.fetchPM(!0,"pmOut")}])})),(0,l.default)((0,i.default)(e),"fetchNotify",(function(){return p.rakuenStore.fetchNotify(!0)})),(0,l.default)((0,i.default)(e),"fetchPM",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return p.userStore.fetchPM(e,t)})),(0,l.default)((0,i.default)(e),"onTabsChange",(function(t){e.setState({page:t})})),(0,l.default)((0,i.default)(e),"onScroll",y.updateVisibleBottom.bind((0,i.default)(e))),(0,l.default)((0,i.default)(e),"doClearNotify",(function(){(0,j.t)("电波提醒.清除"),p.rakuenStore.doClearNotify()})),e}return(0,d.default)(n,[{key:"notify",get:function(){return p.rakuenStore.notify}},{key:"mergeNotify",get:function(){try{var e=this.notify.list,t=[];return e.forEach((function(n,s){var r=e[s-1];r&&r.userId===n.userId&&r.title===n.title&&r.message===n.message&&r.message2===n.message2?t[t.length-1].repeat+=1:t.push(Object.assign({},n,{repeat:0}))})),Object.assign({},this.notify,{list:t})}catch(e){return this.notify}}},{key:"pmIn",get:function(){return p.userStore.pmIn}},{key:"pmOut",get:function(){return p.userStore.pmOut}}]),n}(_.default),(0,m.default)(r.prototype,"notify",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"notify"),r.prototype),(0,m.default)(r.prototype,"mergeNotify",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"mergeNotify"),r.prototype),(0,m.default)(r.prototype,"pmIn",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"pmIn"),r.prototype),(0,m.default)(r.prototype,"pmOut",[f.computed],Object.getOwnPropertyDescriptor(r.prototype,"pmOut"),r.prototype),r)}}]);