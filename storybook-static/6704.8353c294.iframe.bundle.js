(self.webpackChunkweb=self.webpackChunkweb||[]).push([[6704],{"./src/screens/home/tag/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/tag/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"Component")},"./src/screens/home/tag/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/tag/component/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"List")},"./src/screens/home/tag/component/list/grid/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=void 0;t.EVENT={id:"用户标签.跳转",data:{type:"grid"}}},"./src/screens/home/tag/component/list/grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/screens/_/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/tag/component/list/grid/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)((function(e,t){var s=e.item,o=e.index,d=e.numColumns,u=t.$,i=t.navigation;return(0,c.jsx)(r.ItemCollectionsGrid,Object.assign({navigation:i,style:(n._.isPad||n._.isLandscape)&&!(o%d)&&n._.container.left,index:o,event:l.EVENT,num:d},s,{typeCn:u.typeCn,collection:n.collectionStore.collect(String(s.id).replace("/subject/","")),airtime:""===u.state.airtime&&(0,a.matchYear)(s.tip),isCollect:s.collected}))}))},"./src/screens/home/tag/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),u=o(s("./src/screens/home/tag/component/tool-bar/index.tsx")),i=o(s("./src/screens/home/tag/component/list/grid/index.tsx")),m=o(s("./src/screens/home/tag/component/list/list/index.tsx")),f=s("./src/screens/home/tag/component/list/ds.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var s=t.$;if(!s.list._loaded||s.state.hide)return(0,p.jsxs)(p.Fragment,{children:[!s.state.fixed&&(0,p.jsx)(u.default,{}),(0,p.jsx)(r.Loading,{})]});var o=s.state.list?void 0:a._.portrait(3,5);return(0,p.jsx)(r.ListView,{keyExtractor:d.keyExtractor,contentContainerStyle:a._.container.bottom,numColumns:o,data:s.list,scrollToTop:!0,footerEmptyDataText:(0,d.x18s)(s.params.tag)?c.TEXT_18X:void 0,ListHeaderComponent:(0,p.jsxs)(p.Fragment,{children:[!s.state.fixed&&(0,p.jsx)(u.default,{}),"rank"===s.state.order&&(0,p.jsx)(n.Notice,{children:"因标签为用户自行添加， 「按排名」排序在关联条目过多情况下可能毫无意义，推荐「按标注」排序。"})]}),renderItem:function(e){var t=e.item,r=e.index;return s.state.list?(0,p.jsx)(m.default,{item:t,index:r}):(0,p.jsx)(i.default,{item:t,index:r,numColumns:o})},scrollEventThrottle:16,onScroll:s.onScroll,onHeaderRefresh:s.onHeaderRefresh,onFooterRefresh:s.onFooterRefresh},""+a._.orientation+o)}),f.COMPONENT)},"./src/screens/home/tag/component/list/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=void 0;t.EVENT={id:"用户标签.跳转",data:{type:"list"}}},"./src/screens/home/tag/component/list/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/screens/_/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/tag/component/list/list/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=e.item,o=e.index,a=t.$,c=t.navigation;return(0,l.jsx)(r.ItemSearch,Object.assign({style:n._.container.item,navigation:c,index:o,event:d.EVENT},s,{collection:n.collectionStore.collect(String(s.id).replace("/subject/","")),typeCn:a.typeCn}))}))},"./src/screens/home/tag/component/tool-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),r=s("./src/screens/home/tag/component/ds.ts");t.COMPONENT=(0,o.rc)(r.COMPONENT,"ToolBar")},"./src/screens/home/tag/component/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/tag/component/tool-bar/month.tsx")),l=o(s("./src/screens/home/tag/component/tool-bar/more.tsx")),c=o(s("./src/screens/home/tag/component/tool-bar/sort.tsx")),u=o(s("./src/screens/home/tag/component/tool-bar/year.tsx")),i=s("./src/screens/home/tag/component/tool-bar/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$;return(0,m.jsxs)(r.ToolBar,{style:!s.state.list&&n._.mb.sm,children:[(0,m.jsx)(c.default,{}),(0,m.jsx)(u.default,{}),(0,m.jsx)(d.default,{}),(0,m.jsx)(l.default,{})]})}),i.COMPONENT)},"./src/screens/home/tag/component/tool-bar/month.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=t.$,o=s.state.month;return(0,d.jsx)(r.ToolBar.Popover,{data:a.DATA_MONTH,text:o?o+"月":"月",type:o?"desc":"sub",heatmap:"用户标签.月选择",onSelect:s.onMonthSelect})}));try{month.displayName="month",month.__docgenInfo={description:"",displayName:"month",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/component/tool-bar/month.tsx#month"]={docgenInfo:month.__docgenInfo,name:"month",path:"src/screens/home/tag/component/tool-bar/month.tsx#month"})}catch(e){}},"./src/screens/home/tag/component/tool-bar/more.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$,o=s.state,a=o.fixed,l=o.list,c=o.collected;return(0,d.jsx)(r.ToolBar.Popover,{data:["选项 · "+(a?"锁定上方":"浮动"),"布局 · "+(l?"列表":"网格"),"收藏 · "+(c?"显示":"隐藏")],icon:"md-more-vert",iconColor:n._.colorDesc,iconSize:16,type:"desc",transparent:!0,onSelect:function(e){return e.includes("选项")?s.onToggleFixed():e.includes("布局")?s.onToggleList():e.includes("收藏")?s.onToggleCollected():void 0}})}));try{more.displayName="more",more.__docgenInfo={description:"",displayName:"more",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/component/tool-bar/more.tsx#more"]={docgenInfo:more.__docgenInfo,name:"more",path:"src/screens/home/tag/component/tool-bar/more.tsx#more"})}catch(e){}},"./src/screens/home/tag/component/tool-bar/sort.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$,o=s.state.order;return(0,l.jsx)(r.ToolBar.Popover,{data:d.TAG_ORDERBY.map((function(e){return e.label})),icon:"md-sort",iconColor:n._.colorDesc,text:o?d.MODEL_TAG_ORDERBY.getLabel(o):"名称",type:"desc",heatmap:"用户标签.排序选择",onSelect:s.onOrderSelect})}));try{sort.displayName="sort",sort.__docgenInfo={description:"",displayName:"sort",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/component/tool-bar/sort.tsx#sort"]={docgenInfo:sort.__docgenInfo,name:"sort",path:"src/screens/home/tag/component/tool-bar/sort.tsx#sort"})}catch(e){}},"./src/screens/home/tag/component/tool-bar/year.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=t.$,o=s.state.airtime;return(0,d.jsx)(r.ToolBar.Popover,{data:a.DATA_AIRTIME,text:o||"年",type:o?"desc":"sub",heatmap:"用户标签.年选择",onSelect:s.onAirdateSelect})}));try{year.displayName="year",year.__docgenInfo={description:"",displayName:"year",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/component/tool-bar/year.tsx#year"]={docgenInfo:year.__docgenInfo,name:"year",path:"src/screens/home/tag/component/tool-bar/year.tsx#year"})}catch(e){}},"./src/screens/home/tag/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;t.COMPONENT="Tag"},"./src/screens/home/tag/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$,o=s.params.tag;return(0,l.jsx)(r.Header,{title:o?s.typeCn+" · "+o:s.typeCn+"标签",alias:"用户标签",hm:[s.url,"Tag"],headerRight:function(){return(0,l.jsx)(r.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,d.t)("用户标签.右上角菜单",{key:e}),(0,n.open)(s.url))},children:(0,l.jsx)(r.Heatmap,{id:"用户标签.右上角菜单"})})}})}))},"./src/screens/home/tag/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o(s("react"));var r=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/tag/component/list/index.tsx")),l=o(s("./src/screens/home/tag/component/tool-bar/index.tsx")),c=o(s("./src/screens/home/tag/header/index.tsx")),u=o(s("./src/screens/home/tag/store/index.ts")),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(u.default,(function(e,t){var s=t.$;return(0,a.useRunAfter)((function(){s.init()})),(0,a.useObserver)((function(){return(0,i.jsxs)(r.Component,{id:"screen-tag",children:[(0,i.jsx)(c.default,{}),(0,i.jsxs)(r.Page,{children:[s.state.fixed&&(0,i.jsx)(l.default,{}),s.state._loaded&&(0,i.jsx)(d.default,{})]})]})}))}));try{tag.displayName="tag",tag.__docgenInfo={description:"",displayName:"tag",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/index.tsx#tag"]={docgenInfo:tag.__docgenInfo,name:"tag",path:"src/screens/home/tag/index.tsx#tag"})}catch(e){}},"./src/screens/home/tag/store/action.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.function.bind.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),n=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=s("./src/utils/index.ts"),m=s("./src/utils/fetch/index.ts"),f=s("./src/constants/index.ts"),p=o(s("./src/screens/home/tag/store/fetch.ts"));function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,l.default)(this,s)}}t.default=function(e){(0,d.default)(s,e);var t=j(s);function s(){var e;(0,n.default)(this,s);for(var o=arguments.length,r=new Array(o),d=0;d<o;d++)r[d]=arguments[d];return e=t.call.apply(t,[this].concat(r)),(0,u.default)((0,a.default)(e),"resetScrollView",(function(){e.setState({hide:!0}),setTimeout((function(){e.setState({hide:!1}),e.save()}),0)})),(0,u.default)((0,a.default)(e),"onOrderSelect",(function(t){e.resetScrollView(),(0,m.t)("用户标签.排序选择",{label:t}),e.setState({order:f.MODEL_TAG_ORDERBY.getValue(t)}),e.fetchTag(!0)})),(0,u.default)((0,a.default)(e),"onAirdateSelect",(function(t){e.resetScrollView(),(0,m.t)("用户标签.年选择",{airtime:t}),e.setState({airtime:"全部"===t?"":t,month:""}),e.fetchTag(!0)})),(0,u.default)((0,a.default)(e),"onMonthSelect",(function(t){""!==e.state.airtime?(e.resetScrollView(),(0,m.t)("用户标签.月选择",{month:t}),e.setState({month:"全部"===t?"":t}),e.fetchTag(!0)):(0,i.info)("请先选择年")})),(0,u.default)((0,a.default)(e),"onToggleList",(function(){e.resetScrollView();var t=e.state.list;(0,m.t)("用户标签.切换布局",{list:!t}),e.setState({list:!t})})),(0,u.default)((0,a.default)(e),"onToggleFixed",(function(){var t=e.state.fixed;e.setState({fixed:!t}),e.save()})),(0,u.default)((0,a.default)(e),"onToggleCollected",(function(){var t=e.state.collected;e.setState({collected:!t}),e.save()})),(0,u.default)((0,a.default)(e),"onScroll",i.updateVisibleBottom.bind((0,a.default)(e))),e}return(0,r.default)(s)}(p.default)},"./src/screens/home/tag/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),i=s("./node_modules/mobx/dist/mobx.esm.js"),m=s("./src/stores/index.ts"),f=s("./src/constants/index.ts"),p=o(s("./src/screens/home/tag/store/state.ts"));function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,l.default)(this,s)}}t.default=(r=function(e){(0,d.default)(s,e);var t=j(s);function s(){return(0,n.default)(this,s),t.apply(this,arguments)}return(0,a.default)(s,[{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"tag",get:function(){var e=this.params,t=e.type,s=e.tag,o=this.state,r=o.airtime,n=o.month;return m.tagStore.tag(s,t,n?r+"-"+n:r)}},{key:"typeCn",get:function(){return f.MODEL_SUBJECT_TYPE.getTitle(this.params.type)||"动画"}},{key:"list",get:function(){return this.tag._loaded?this.state.collected?this.tag:Object.assign({},this.tag,{list:this.tag.list.filter((function(e){return!e.collected}))}):this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):f.LIST_EMPTY}},{key:"url",get:function(){var e=this.params,t=e.type,s=e.tag,o=this.state,r=o.order,n=void 0===r?"collects":r,a=o.airtime,d=o.month;return(0,f.HTML_TAG)(encodeURIComponent(s),t,n,1,d?a+"-"+d:a)}},{key:"thirdPartyKey",get:function(){var e=this.params,t=e.type,s=e.tag,o=this.state,r=o.airtime,n=o.month;return"tag_"+[s,t,n?r+"-"+n:r].join("_")}},{key:"subject",value:function(e){return(0,i.computed)((function(){return m.subjectStore.subject(e)})).get()}}]),s}(p.default),(0,u.default)(r.prototype,"ota",[i.computed],Object.getOwnPropertyDescriptor(r.prototype,"ota"),r.prototype),(0,u.default)(r.prototype,"tag",[i.computed],Object.getOwnPropertyDescriptor(r.prototype,"tag"),r.prototype),(0,u.default)(r.prototype,"typeCn",[i.computed],Object.getOwnPropertyDescriptor(r.prototype,"typeCn"),r.prototype),(0,u.default)(r.prototype,"list",[i.computed],Object.getOwnPropertyDescriptor(r.prototype,"list"),r.prototype),(0,u.default)(r.prototype,"url",[i.computed],Object.getOwnPropertyDescriptor(r.prototype,"url"),r.prototype),(0,u.default)(r.prototype,"thirdPartyKey",[i.computed],Object.getOwnPropertyDescriptor(r.prototype,"thirdPartyKey"),r.prototype),r)},"./src/screens/home/tag/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;var o=s("./src/stores/index.ts"),r=s("./src/constants/index.ts"),n=s("./src/screens/home/tag/ds.ts"),a=(t.NAMESPACE="Screen"+n.COMPONENT,t.EXCLUDE_STATE={visibleBottom:o._.window.height,airtime:"",month:"",hide:!1,ota:{}});t.STATE=Object.assign({order:r.MODEL_TAG_ORDERBY.getValue("标注数"),list:!0,fixed:!1,collected:!0},a,{_loaded:!1})},"./src/screens/home/tag/store/fetch.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),a=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),h=s("./src/utils/kv/index.ts"),_=s("./src/constants/index.ts"),b=r(s("./src/screens/home/tag/store/computed.ts")),y=["collected"];function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,i.default)(this,s)}}var x=[];t.default=function(e){(0,u.default)(s,e);var t=g(s);function s(){var e,r;(0,l.default)(this,s);for(var d=arguments.length,u=new Array(d),i=0;i<d;i++)u[i]=arguments[i];return e=t.call.apply(t,[this].concat(u)),(0,f.default)((0,c.default)(e),"fetchTag",(r=(0,a.default)(o.mark((function t(s){var r,n,a,d,l,c,u,i,m,f;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s&&e.fetchThirdParty(),r=e.params,n=r.type,a=r.tag,d=e.state,l=d.order,c=d.airtime,u=d.month,t.next=5,p.tagStore.fetchTag({text:a,type:n,order:l,airtime:u?c+"-"+u:c},s);case 5:return(i=t.sent).list.length&&e.thirdPartyKey in e.state.ota&&(f=(null==(m=e.ota)?void 0:m.ts)||0,(0,j.getTimestamp)()-f>=_.D7&&e.updateThirdParty()),setTimeout((function(){p.collectionStore.fetchCollectionStatusQueue(i.list.filter((function(e){return e.collected})).map((function(e){return String(e.id).replace("/subject/","")})))}),160),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})),(0,f.default)((0,c.default)(e),"fetchThirdParty",(0,a.default)(o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.tagStore.init("tag");case 2:setTimeout((0,a.default)(o.mark((function t(){var s;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ota||e.tag._loaded){t.next=8;break}return t.next=3,(0,h.get)(e.thirdPartyKey);case 3:if(s=t.sent){t.next=7;break}return e.setState({ota:(0,f.default)({},e.thirdPartyKey,{list:[],_loaded:0})}),t.abrupt("return");case 7:e.setState({ota:(0,f.default)({},e.thirdPartyKey,Object.assign({},s,{_loaded:(0,j.getTimestamp)()}))});case 8:case"end":return t.stop()}}),t)}))),80);case 3:case"end":return t.stop()}}),t)})))),(0,f.default)((0,c.default)(e),"updateThirdParty",(0,a.default)(o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x.includes(e.thirdPartyKey)){t.next=2;break}return t.abrupt("return");case 2:setTimeout((function(){(0,h.update)(e.thirdPartyKey,{list:e.tag.list.map((function(e){e.collected;return(0,n.default)(e,y)}))}),x.push(e.thirdPartyKey)}),0);case 3:case"end":return t.stop()}}),t)})))),(0,f.default)((0,c.default)(e),"onHeaderRefresh",(function(){return e.fetchTag(!0)})),(0,f.default)((0,c.default)(e),"onFooterRefresh",(function(){return!(e.tag.list.length<24)&&e.fetchTag()})),e}return(0,d.default)(s)}(b.default)},"./src/screens/home/tag/store/index.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=r(s("./src/screens/home/tag/store/action.ts")),p=s("./src/screens/home/tag/store/ds.ts");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,i.default)(e);if(t){var r=(0,i.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,u.default)(this,s)}}var h=function(e){(0,c.default)(s,e);var t=j(s);function s(){var e;(0,d.default)(this,s);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),(0,m.default)((0,l.default)(e),"init",(0,n.default)(o.mark((function t(){var s,r,n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStorage(p.NAMESPACE);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return"rank"===(s=t.t0).order&&(s.order="collects"),r=Object.assign({},s,p.EXCLUDE_STATE,{_loaded:!0}),(n=e.params.airtime)&&(r.airtime=n),e.setState(r),t.abrupt("return",e.fetchTag(!0));case 12:case"end":return t.stop()}}),t)})))),e}return(0,a.default)(s)}(f.default);t.default=h},"./src/screens/home/tag/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),n=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=s("./node_modules/mobx/dist/mobx.esm.js"),m=o(s("./src/utils/store/index.ts")),f=s("./src/screens/home/tag/store/ds.ts");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,o=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;s=Reflect.construct(o,arguments,r)}else s=o.apply(this,arguments);return(0,l.default)(this,s)}}t.default=function(e){(0,d.default)(s,e);var t=p(s);function s(){var e;(0,n.default)(this,s);for(var o=arguments.length,r=new Array(o),d=0;d<o;d++)r[d]=arguments[d];return e=t.call.apply(t,[this].concat(r)),(0,u.default)((0,a.default)(e),"params",void 0),(0,u.default)((0,a.default)(e),"state",(0,i.observable)(f.STATE)),(0,u.default)((0,a.default)(e),"save",(function(){return e.saveStorage(f.NAMESPACE,f.EXCLUDE_STATE)})),e}return(0,r.default)(s)}(m.default)}}]);