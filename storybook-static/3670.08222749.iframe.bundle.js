(self.webpackChunkweb=self.webpackChunkweb||[]).push([[3670],{"./src/screens/discovery/catalog/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/catalog/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/discovery/catalog/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/catalog/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"List"),t.EVENT={id:"目录.跳转"}},"./src/screens/discovery/catalog/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),a=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),d=r(s("./src/screens/discovery/catalog/component/pagination/index.tsx")),u=r(s("./src/screens/discovery/catalog/component/tool-bar/index.tsx")),i=s("./src/screens/discovery/catalog/component/list/ds.ts"),f=s("./src/screens/discovery/catalog/component/list/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)((function(e,t){var s=t.$;return(0,p.jsxs)(n.ScrollView,{contentContainerStyle:l._.mb.md,scrollToTop:!0,children:[!s.state.fixedFilter&&(0,p.jsx)(u.default,{}),s.isLimit?(0,p.jsxs)(n.Flex,{style:f.styles.empty,direction:"column",justify:"center",children:[(0,p.jsx)(n.Mesume,{size:80}),(0,p.jsx)(n.Text,{style:[f.styles.text,l._.mt.sm],type:"sub",size:13,lineHeight:15,align:"center",children:"此功能仅对正常注册用户开放"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.default,{style:f.styles.container,children:s.state.show&&(s.catalog._loaded&&!s.catalog.list.length?(0,p.jsxs)(n.Flex,{style:f.styles.empty,direction:"column",justify:"center",children:[(0,p.jsx)(n.Mesume,{size:80}),(0,p.jsx)(n.Text,{style:[f.styles.text,l._.mt.sm],type:"sub",size:13,lineHeight:15,align:"center",children:"到底了"})]}):s.catalog.list.map((function(e,t){return(0,p.jsx)(a.ItemCatalog,Object.assign({event:i.EVENT},e,{index:t,filter:"不限"===s.state.filterKey?"":s.state.filterKey}),e.id)})))}),!s.state.fixedPagination&&s.state.show&&(0,p.jsx)(d.default,{})]})]})}),i.COMPONENT)},"./src/screens/discovery/catalog/component/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var r=s("./src/stores/index.ts");t.styles=r._.create({container:{minHeight:.64*r._.window.height,marginBottom:r._.md},empty:{minHeight:.5*r._.window.height},text:Object.assign({maxWidth:r._.window.contentWidth-2*r._.md},r._.fontSize14)})},"./src/screens/discovery/catalog/component/pagination/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.HEAT_MAPS=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/catalog/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Pagination"),t.HEAT_MAPS={onPrev:"目录.上一页",onNext:"目录.下一页",search:"目录.页码跳转"}},"./src/screens/discovery/catalog/component/pagination/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/screens/discovery/catalog/component/pagination/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$;return(0,c.jsx)(o.Pagination,{style:n._.mt.xs,input:s.state.ipt,heatmaps:l.HEAT_MAPS,onPrev:s.onPrev,onNext:s.onNext,onChange:s.onChange,onSearch:s.doSearch})}),l.COMPONENT)},"./src/screens/discovery/catalog/component/tool-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/catalog/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"ToolBar")},"./src/screens/discovery/catalog/component/tool-bar/filter-key.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=u(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,s&&s.set(e,r),r}(s("react")),o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),c=s("./src/screens/discovery/catalog/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(u=function(e){return e?s:t})(e)}t.default=(0,a.c)((function(e,t){var s=t.$,a=(0,r.useMemo)((function(){return c.FILTER_KEY_DS.map((function(e){return e[0]+" ("+e[1]+")"}))}),[]);return(0,l.useObserver)((function(){var e=s.state.filterKey;return(0,d.jsx)(o.ToolBar.Popover,{data:a,iconColor:n._.colorDesc,text:e.includes("不限")?"关键字":e,type:"desc",onSelect:function(e){var t;return s.onFilterChange("filterKey",null==(t=e.split(" ("))?void 0:t[0])}})}))}))},"./src/screens/discovery/catalog/component/tool-bar/filter-type.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/screens/discovery/catalog/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$,r=l.FILTER_TYPE_DS.find((function(e){return e===s.state.filterType}));return(0,c.jsx)(o.ToolBar.Popover,{data:l.FILTER_TYPE_DS,iconColor:n._.colorDesc,text:"不限"===r?"类型":r,type:"desc",onSelect:function(e){return s.onFilterChange("filterType",e)}})}))},"./src/screens/discovery/catalog/component/tool-bar/filter-year.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/screens/discovery/catalog/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$,r=s.state.filterYear;return(0,c.jsx)(o.ToolBar.Popover,{data:l.FILTER_YEAR_DS,iconColor:n._.colorDesc,text:"不限"===r?"年份":r,type:"desc",onSelect:function(e){return s.onFilterChange("filterYear",e)}})}))},"./src/screens/discovery/catalog/component/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/screens/discovery/catalog/ds.ts"),l=r(s("./src/screens/discovery/catalog/component/tool-bar/filter-key.tsx")),c=r(s("./src/screens/discovery/catalog/component/tool-bar/filter-type.tsx")),d=r(s("./src/screens/discovery/catalog/component/tool-bar/filter-year.tsx")),u=r(s("./src/screens/discovery/catalog/component/tool-bar/more.tsx")),i=r(s("./src/screens/discovery/catalog/component/tool-bar/type.tsx")),f=s("./src/screens/discovery/catalog/component/tool-bar/ds.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s,r=t.$,n=null==(s=a.TYPE_DS.find((function(e){return e.key===r.state.type})))?void 0:s.title;return(0,p.jsxs)(o.ToolBar,{children:[(0,p.jsx)(i.default,{type:n}),"高级"===n&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.default,{}),(0,p.jsx)(d.default,{}),(0,p.jsx)(l.default,{})]}),(0,p.jsx)(u.default,{})]})}),f.COMPONENT)},"./src/screens/discovery/catalog/component/tool-bar/more.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=t.$,r=s.state,a=r.fixedFilter,c=r.fixedPagination;return(0,l.jsx)(o.ToolBar.Popover,{data:["选项 · "+(a?"锁定上方":"浮动"),"分页 · "+(c?"锁定下方":"浮动")],icon:"md-more-vert",iconColor:n._.colorDesc,iconSize:16,type:"desc",transparent:!0,onSelect:function(e){return e.includes("选项")?s.onToggleFixed("fixedFilter"):e.includes("分页")?s.onToggleFixed("fixedPagination"):void 0}})}))},"./src/screens/discovery/catalog/component/tool-bar/type.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/screens/discovery/catalog/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)((function(e,t){var s=e.type,r=t.$;return(0,c.jsx)(o.ToolBar.Popover,{data:l.TYPE_DS.map((function(e){return e.title})),iconColor:n._.colorDesc,text:s,type:"desc",onSelect:r.onToggleType})}))},"./src/screens/discovery/catalog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_DS=t.FILTER_YEAR_DS=t.FILTER_TYPE_DS=t.FILTER_KEY_DS=t.COMPONENT=void 0;t.COMPONENT="Catalog",t.TYPE_DS=[{key:"advance",title:"高级"},{key:"collect",title:"热门"},{key:"",title:"最新"}],t.FILTER_TYPE_DS=["不限","动画","书籍","游戏","音乐","三次元"],t.FILTER_YEAR_DS=["不限","近1年","近3年",2024,2023,2022,2021,2020,2019,2018,2017,2016,2015,2014,2013,2012,2011,2010],t.FILTER_KEY_DS=[["不限",1e3],["画",266],["动画",169],["作",156],["漫",113],["漫画",87],["作品",78],["推荐",61],["游戏",58],["目录",51],["个人",49],["系",46],["小说",41],["榜",41],["日本",40],["裏",38],["排行",36],["排行榜",34],["轻",33],["完",33],["选",31],["补",30],["百合",29],["全",27],["汉化",26],["最",25],["版",25],["看",24],["佳",22],["真",21],["原",20],["神",20],["销量",18],["世界",18],["评分",17],["黄油",17],["店",16],["名作",15],["葉",15],["史",15],["剧场",15],["网站",14],["实用",14],["已",14],["收录",14],["女性",13],["计划",13],["组",13],["世纪",13],["动漫",13],["男",13],["空间",12],["综合",12],["收集",12],["佳作",12],["记录",12],["合集",12],["赏",12],["列表",11],["批评",11],["厉害",11],["补完",11],["动画短片",11],["少女",11],["剧场版",11],["同人",10],["排名",10],["历年",10],["妹",10],["自用",9],["冷门",9],["收藏",9],["坑",9],["一般",8],["经典",8],["相关",8],["适合",8],["资源",8],["值得",8],["中文",8],["后宫",8],["致",8],["作画",7],["完结",7],["音乐",7],["剧情",7],["动画电影",7],["纯爱",7],["更新",7],["角色",7],["年鉴",7],["物",7],["美少女",6],["国产",6],["含有",6],["持续",6],["施工",6],["萌",6],["選",6],["人气",6],["群友",6],["回",6],["元素",6],["提及",6],["文化",6],["异",6],["待",6],["获奖",6],["制作",5],["独立",5],["整理",5],["部门",5],["艺术",5],["不错",5],["本子",5],["推理",5],["评选",5],["超级",5],["优秀",5],["狂",5],["战士",5],["泡面",5],["选集",5]]},"./src/screens/discovery/catalog/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/discovery/catalog/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Header")},"./src/screens/discovery/catalog/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),c=s("./src/constants/index.ts"),d=s("./src/screens/discovery/catalog/header/ds.ts"),u=s("./node_modules/react/jsx-runtime.js"),i="浏览器查看",f="网页版查看",p=[i];c.WEB||p.push(f);t.default=(0,a.obc)((function(){return(0,u.jsx)(o.Header,{title:"目录",hm:["discovery/catalog","Catalog"],headerRight:function(){return(0,u.jsx)(o.Header.Popover,{data:p,onSelect:function(e){if((0,l.t)("目录.右上角菜单",{key:e}),e!==i)if(e!==f);else{var t=c.URL_SPA+"/"+(0,n.getSPAParams)("Catalog");(0,n.open)(t)}else(0,n.open)(c.HOST+"/index/browser?orderby=collect")},children:(0,u.jsx)(o.Heatmap,{id:"目录.右上角菜单"})})}})}),d.COMPONENT)},"./src/screens/discovery/catalog/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("react"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),l=r(s("./src/screens/discovery/catalog/component/list/index.tsx")),c=r(s("./src/screens/discovery/catalog/component/pagination/index.tsx")),d=r(s("./src/screens/discovery/catalog/component/tool-bar/index.tsx")),u=r(s("./src/screens/discovery/catalog/header/index.tsx")),i=r(s("./src/screens/discovery/catalog/store/index.ts")),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(i.default,(function(e,t){var s=t.$;return(0,a.useRunAfter)((function(){s.init()})),(0,a.useObserver)((function(){return(0,f.jsxs)(o.Component,{id:"screen-catalog",children:[(0,f.jsx)(u.default,{}),(0,f.jsxs)(o.Page,{loaded:s.state._loaded,children:[s.state.fixedFilter&&(0,f.jsx)(d.default,{}),(0,f.jsx)(l.default,{}),s.state.fixedPagination&&(0,f.jsx)(c.default,{})]})]})}))}))},"./src/screens/discovery/catalog/store/action.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.parse-int.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/utils/index.ts"),m=s("./src/utils/fetch/index.ts"),j=o(s("./src/screens/discovery/catalog/store/fetch.ts"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,u.default)(this,s)}}t.default=function(e){(0,d.default)(s,e);var t=y(s);function s(){var e,o;(0,l.default)(this,s);for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];return e=t.call.apply(t,[this].concat(d)),(0,f.default)((0,c.default)(e),"onShow",(function(){setTimeout((function(){e.setState({show:!0}),e.save()}),400)})),(0,f.default)((0,c.default)(e),"onToggleType",(o=(0,n.default)(r.mark((function t(s){var o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.state.type,!s){t.next=8;break}if("最新"!==s||""!==o){t.next=4;break}return t.abrupt("return");case 4:if("热门"!==s||"collect"!==o){t.next=6;break}return t.abrupt("return");case 6:if("高级"!==s||"advance"!==o){t.next=8;break}return t.abrupt("return");case 8:return e.setState({type:"热门"===s?"collect":"高级"===s?"advance":"",page:1,ipt:"1",show:!1}),t.next=11,e.fetchCatalog();case 11:e.setState({show:!0}),e.save(),(0,m.t)("目录.切换类型",{type:s});case 14:case"end":return t.stop()}}),t)}))),function(e){return o.apply(this,arguments)})),(0,f.default)((0,c.default)(e),"onPrev",(0,n.default)(r.mark((function t(){var s,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==(s=e.state.page)){t.next=3;break}return t.abrupt("return");case 3:o=s-1,e.setState({page:o,show:!1,ipt:String(o)}),e.fetchCatalog(),e.onShow(),(0,m.t)("目录.上一页",{page:o});case 8:case"end":return t.stop()}}),t)})))),(0,f.default)((0,c.default)(e),"onNext",(0,n.default)(r.mark((function t(){var s,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=e.state.page,o=s+1,e.setState({page:o,show:!1,ipt:String(o)}),e.fetchCatalog(),e.onShow(),(0,m.t)("目录.下一页",{page:o});case 6:case"end":return t.stop()}}),t)})))),(0,f.default)((0,c.default)(e),"onChange",(function(t){var s=t.nativeEvent;e.setState({ipt:s.text})})),(0,f.default)((0,c.default)(e),"onFilterChange",(function(t,s){e.setState((0,f.default)({page:1,show:!1,ipt:"1"},t,s)),e.onShow(),e.fetchCatalog(),(0,m.t)("目录.高级筛选",{value:t+"|"+s})})),(0,f.default)((0,c.default)(e),"onToggleFixed",(function(t){var s=!e.state[t];e.setState((0,f.default)({},t,s)),e.save(),(0,m.t)("目录.切换锁定",{value:t+"|"+s})})),(0,f.default)((0,c.default)(e),"doSearch",(function(){var t=e.state.ipt,s=""===t?1:parseInt(t);s<1?(0,p.info)("请输入正确页码"):(e.setState({page:s,show:!1,ipt:String(s)}),e.fetchCatalog(),setTimeout((function(){e.setState({show:!0}),e.save()}),400),(0,m.t)("目录.页码跳转",{page:s}))})),e}return(0,a.default)(s)}(j.default)},"./src/screens/discovery/catalog/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),i=s("./node_modules/mobx/dist/mobx.esm.js"),f=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),m=s("./src/utils/protobuf/index.web.ts"),j=s("./src/constants/index.ts"),y=r(s("./src/screens/discovery/catalog/store/state.ts"));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}t.default=(o=function(e){(0,l.default)(s,e);var t=v(s);function s(){return(0,n.default)(this,s),t.apply(this,arguments)}return(0,a.default)(s,[{key:"catalogAdvance",get:function(){return this.state.loadedCatalog?(0,m.get)("catalog").map((function(e){var t;return t=e.r>=Math.max(e.a||0,e.b||0,e.m||0,e.g||0)?"real":e.g>=Math.max(e.a||0,e.b||0,e.m||0)?"game":e.m>=Math.max(e.a||0,e.b||0)?"music":e.b>=(e.a||0)?"book":"anime",{id:e.i,title:e.t,last:e.d,anime:e.a||0,book:e.b||0,music:e.m||0,game:e.g||0,real:e.r||0,_type:t}})):[]}},{key:"catalogAdvanceFilter",get:function(){var e=this.state,t=e.page,s=e.filterType,r=e.filterYear,o=e.filterKey,n=this.catalogAdvance;if(s&&"不限"!==s&&(n=n.filter((function(e){return j.MODEL_SUBJECT_TYPE.getTitle(e._type)===s}))),r&&"不限"!==r)if("近1年"===r){var a=(0,p.getTimestamp)(),l=Number(""+(Number((0,p.date)("Y",a))-1)+(0,p.date)("md",a));n=n.filter((function(e){return Number(e.last.replace(/-/g,""))>=l}))}else if("近3年"===r){var c=(0,p.getTimestamp)(),d=Number(""+(Number((0,p.date)("Y",c))-3)+(0,p.date)("md",c));n=n.filter((function(e){return Number(e.last.replace(/-/g,""))>=d}))}else n=n.filter((function(e){return e.last.includes(String(r))}));o&&"不限"!==o&&(n=n.filter((function(e){return e.title.includes(o)})));return{list:n.slice(10*(t-1),10*t),_loaded:!0}}},{key:"catalog",get:function(){if("advance"===this.state.type)return this.catalogAdvanceFilter;var e=f.discoveryStore.catalog(this.state.type,this.state.page);return f.userStore.isLimit?Object.assign({},e,{list:e.list.filter((function(e){return!(0,p.x18s)(e.title)}))}):e}},{key:"isLimit",get:function(){if(j.WEB||"advance"!==this.state.type)return!1;if(!f.userStore.isLogin)return!0;var e=f.userStore.userInfo.id;return!e||e==j.APP_USERID_TOURIST||e==j.APP_USERID_IOS_AUTH||void 0}}]),s}(y.default),(0,u.default)(o.prototype,"catalogAdvance",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"catalogAdvance"),o.prototype),(0,u.default)(o.prototype,"catalogAdvanceFilter",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"catalogAdvanceFilter"),o.prototype),(0,u.default)(o.prototype,"catalog",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"catalog"),o.prototype),(0,u.default)(o.prototype,"isLimit",[i.computed],Object.getOwnPropertyDescriptor(o.prototype,"isLimit"),o.prototype),o)},"./src/screens/discovery/catalog/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;var r=s("./src/screens/discovery/catalog/ds.ts"),o=(t.NAMESPACE="Screen"+r.COMPONENT,t.EXCLUDE_STATE={loadedCatalog:!1});t.STATE=Object.assign({type:r.TYPE_DS[0].key,page:1,show:!0,ipt:"1",filterType:r.FILTER_TYPE_DS[0],filterYear:r.FILTER_YEAR_DS[1],filterKey:r.FILTER_KEY_DS[0][0],fixedFilter:!1,fixedPagination:!1},o,{_loaded:!1})},"./src/screens/discovery/catalog/store/fetch.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),j=s("./src/utils/fetch/index.ts"),y=s("./src/utils/kv/index.ts"),v=s("./src/utils/protobuf/index.web.ts"),b=o(s("./src/screens/discovery/catalog/store/computed.ts"));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,u.default)(this,s)}}t.default=function(e){(0,d.default)(s,e);var t=_(s);function s(){var e,o;(0,l.default)(this,s);for(var a=arguments.length,d=new Array(a),u=0;u<a;u++)d[u]=arguments[u];return e=t.call.apply(t,[this].concat(d)),(0,f.default)((0,c.default)(e),"fetchCatalog",(0,n.default)(r.mark((function t(){var s,o,n,a,l;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.state,o=s.type,n=s.page,a=s.loadedCatalog,"advance"!==o){t.next=9;break}if(a){t.next=6;break}return t.next=5,(0,v.decode)("catalog");case 5:e.setState({loadedCatalog:!0});case 6:l=e.catalogAdvanceFilter.list,t.next=12;break;case 9:return t.next=11,p.discoveryStore.fetchCatalog({type:o,page:n});case 11:l=t.sent;case 12:return(0,j.queue)(l.map((function(t){return function(){return e.fetchCatalogDetail(t.id)}}))),t.abrupt("return",l);case 14:case"end":return t.stop()}}),t)})))),(0,f.default)((0,c.default)(e),"fetchCatalogDetail",(o=(0,n.default)(r.mark((function t(s){var o,n,a,l;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p.discoveryStore.catalogDetail(s)._loaded){t.next=2;break}return t.abrupt("return",!0);case 2:if(null==(a=p.discoveryStore.catalogDetailFromOSS(s))||!a._loaded||null==a||null==(o=a.list)||!o.length){t.next=5;break}return t.abrupt("return",!0);case 5:if(null!=a&&a._loaded){t.next=11;break}return t.next=8,p.discoveryStore.fetchCatalogDetailFromOSS({id:s});case 8:if(!t.sent){t.next=11;break}return t.abrupt("return",!0);case 11:return t.next=13,p.discoveryStore.fetchCatalogDetail({id:s});case 13:return null!=(l=t.sent)&&null!=(n=l.list)&&n.length&&e.updateCatalogDetail(Object.assign({},l,{id:s})),t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)}))),function(e){return o.apply(this,arguments)})),(0,f.default)((0,c.default)(e),"updateCatalogDetail",(function(e){setTimeout((function(){var t=e.id,s=e.title,r=e.info,o=e.content,n=e.avatar,a=e.nickname,l=e.userId,c=e.time,d=e.collect,u=e.list,i=(0,m.HTMLDecode)((0,m.removeHTMLTag)(r||o));(0,y.update)("catalog_"+t,{id:t,title:s,info:i?i.slice(0,40):"",avatar:n,nickname:a,userId:l,time:c,collect:d,list:u.filter((function(e,t){return t<3})).map((function(e){return{id:e.id,image:e.image,title:e.title,type:e.type,info:e.info,comment:e.comment}})),total:u.length})}),2e3)})),e}return(0,a.default)(s)}(b.default)},"./src/screens/discovery/catalog/store/index.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),i=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/utils/protobuf/index.web.ts"),m=o(s("./src/screens/discovery/catalog/store/action.ts")),j=s("./src/screens/discovery/catalog/store/ds.ts");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,i.default)(e);if(t){var o=(0,i.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,u.default)(this,s)}}var v=function(e){(0,d.default)(s,e);var t=y(s);function s(){var e;(0,l.default)(this,s);for(var o=arguments.length,a=new Array(o),d=0;d<o;d++)a[d]=arguments[d];return e=t.call.apply(t,[this].concat(a)),(0,f.default)((0,c.default)(e),"init",(0,n.default)(r.mark((function t(){var s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=Object,t.t2={},t.next=5,e.getStorage(j.NAMESPACE);case 5:return t.t3=t.sent,t.t4=j.EXCLUDE_STATE,t.t5={loadedCatalog:!(null==(s=(0,p.get)("catalog"))||!s.length),_loaded:!0},t.t6=t.t1.assign.call(t.t1,t.t2,t.t3,t.t4,t.t5),t.t0.setState.call(t.t0,t.t6),t.abrupt("return",e.fetchCatalog());case 11:case"end":return t.stop()}}),t)})))),e}return(0,a.default)(s)}(m.default);t.default=v},"./src/screens/discovery/catalog/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=s("./node_modules/mobx/dist/mobx.esm.js"),f=r(s("./src/utils/store/index.ts")),p=s("./src/screens/discovery/catalog/store/ds.ts");function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,c.default)(this,s)}}t.default=function(e){(0,l.default)(s,e);var t=m(s);function s(){var e;(0,n.default)(this,s);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),(0,u.default)((0,a.default)(e),"state",(0,i.observable)(p.STATE)),(0,u.default)((0,a.default)(e),"save",(function(){return e.saveStorage(p.NAMESPACE,p.EXCLUDE_STATE)})),e}return(0,o.default)(s)}(f.default)}}]);