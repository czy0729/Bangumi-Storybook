(self.webpackChunkweb=self.webpackChunkweb||[]).push([[863],{"./src/screens/rakuen/blog/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Blog=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/blog/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Blog",component:n.default},t.Blog=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Blog")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Blog')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/board/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Board=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/board/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Board",component:n.default},t.Board=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Board")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Board')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/group/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Group=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/group/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Group",component:n.default},t.Group=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Group")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Group')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/history/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.History=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/history/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/History",component:n.default},t.History=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("History")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('History')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/mine/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Mine=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/mine/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Mine",component:n.default},t.Mine=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Mine")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Mine')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/notify/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Notify=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/notify/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Notify",component:n.default},t.Notify=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Notify")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Notify')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/reviews/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Reviews=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/reviews/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Reviews",component:n.default},t.Reviews=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Reviews")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Reviews')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/setting/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RakuenSetting=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/setting/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/RakuenSetting",component:n.default},t.RakuenSetting=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("RakuenSetting")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('RakuenSetting')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/topic/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Topic=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/topic/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Topic",component:n.default},t.Topic=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Topic")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Topic')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/v2/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Rakuen=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/rakuen/v2/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Rakuen",component:n.default},t.Rakuen=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Rakuen")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Rakuen')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/timeline/say/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Say=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/timeline/say/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Say",component:n.default},t.Say=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Say")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Say')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/timeline/v2/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Timeline=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/timeline/v2/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Timeline",component:n.default},t.Timeline=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Timeline")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Timeline')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/tinygrail/index/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Tinygrail=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/tinygrail/index/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Tinygrail",component:n.default},t.Tinygrail=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("Tinygrail")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Tinygrail')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/tinygrail/overview/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TinygrailOverview=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=r(s("./src/screens/tinygrail/overview/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/TinygrailOverview",component:n.default},t.TinygrailOverview=function(){return(0,i.jsx)(o.StorybookSPA,{children:(0,i.jsx)(o.StorybookList,{children:(0,i.jsx)(n.default,Object.assign({},(0,o.getStorybookArgs)("TinygrailOverview")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('TinygrailOverview')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/rakuen/blog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;t.NAMESPACE="ScreenBlog";s=t.EXCLUDE_STATE={placeholder:"",value:"",replySub:"",message:"",ota:{},showHeaderTitle:!1};t.STATE=Object.assign({},s,{_loaded:!1})},"./src/screens/rakuen/blog/header-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./src/screens/rakuen/blog/header-title/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.$,e=e.navigation;return(0,a.jsxs)(o.Flex,{style:d.styles.container,children:[!!t.avatar&&(0,a.jsx)(n.Avatar,{navigation:e,size:28,src:t.avatar,userId:t.userId,name:t.userName}),(0,a.jsxs)(o.Flex.Item,{style:i._.ml.sm,children:[(0,a.jsx)(o.Text,{size:13,numberOfLines:1,children:t.title}),!!t.userName&&(0,a.jsx)(o.Text,{type:"sub",size:10,bold:!0,numberOfLines:1,children:t.userName})]})]})});try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenBlog"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/blog/header-title/index.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/rakuen/blog/header-title/index.tsx#headertitle"})}catch(e){}},"./src/screens/rakuen/blog/header-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{marginTop:s._.platforms(4,-8,-10,-14),marginLeft:s._.device(-s._.md,-s._.sm),marginRight:s._.md}})},"./src/screens/rakuen/blog/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),a=s("./src/constants/index.ts"),l=r(s("./src/screens/rakuen/blog/header-title/index.tsx")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,e=e.fixed,r=t.$,t=t.navigation,o=(null==(s=r.params)?void 0:s._url)||a.HOST+"/blog/"+r.blogId;return(0,u.jsx)(n.Header,{mode:"transition",statusBarEventsType:"Topic",fixed:e,title:r.title,alias:"日志",hm:[o,"Blog"],headerTitle:(0,u.jsx)(l.default,{$:r,navigation:t}),headerRight:function(){return(0,u.jsx)(n.Header.Popover,{data:["浏览器查看","复制链接","复制分享"],onSelect:function(e){switch((0,d.t)("日志.右上角菜单",{key:e}),e){case"浏览器查看":(0,i.open)(o);break;case"复制链接":(0,i.copy)(o,"已复制链接");break;case"复制分享":(0,i.copy)("【链接】"+r.title+" | Bangumi番组计划\n"+o,"已复制分享文案")}},children:(0,u.jsx)(n.Heatmap,{id:"日志.右上角菜单"})})}})})},"./src/screens/rakuen/blog/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),n=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Heatmap,{right:2,bottom:160,id:"日志.楼层跳转",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:76,bottom:84,id:"日志.删除回复",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:76,bottom:51,id:"日志.回复",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:119,bottom:51,id:"日志.回复失败",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:76,bottom:18,id:"日志.显示评论框",transparent:!0}),(0,n.jsx)(o.Heatmap,{id:"日志",screen:"Blog"})]})})},"./src/screens/rakuen/blog/index.tsx":(e,t,s)=>{var n=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),d=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/components/header/utils.tsx"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),u=r(s("./src/screens/rakuen/blog/header/index.tsx")),c=r(s("./src/screens/rakuen/blog/list/index.tsx")),p=r(s("./src/screens/rakuen/blog/heatmaps/index.tsx")),r=r(s("./src/screens/rakuen/blog/store.ts")),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ic)(r.default,function(e,t){var s=t.$,t=(0,a.useOnScroll)(),r=t.fixed,o=t.onScroll;return(0,l.useRunAfter)((0,i.default)(n.mark(function e(){return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.init();case 2:case"end":return e.stop()}},e)}))),(0,l.useKeyboardAdjustResize)(),(0,l.useObserver)(function(){return(0,m.jsxs)(d.Component,{id:"screen-blog",children:[(0,m.jsx)(d.Page,{statusBarEvent:!1,children:(0,m.jsx)(c.default,{onScroll:o})}),(0,m.jsx)(u.default,{fixed:r}),(0,m.jsx)(p.default,{})]})})});try{blog.displayName="blog",blog.__docgenInfo={description:"",displayName:"blog",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/blog/index.tsx#blog"]={docgenInfo:blog.__docgenInfo,name:"blog",path:"src/screens/rakuen/blog/index.tsx#blog"})}catch(e){}},"./src/screens/rakuen/blog/list/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(s("./node_modules/react/index.js")),f=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),y=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),b=s("./src/utils/decorators/index.ts"),h=s("./src/utils/fetch/index.ts"),g=o(s("./src/screens/rakuen/blog/top/index.tsx")),v=o(s("./src/screens/rakuen/blog/touch-scroll/index.tsx")),S=s("./node_modules/react/jsx-runtime.js");function O(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}o=m.default.Component,(0,l.default)(k,o),T=O(k),(0,d.default)(k,[{key:"componentDidMount",value:function(){var s=this;(0,x.runAfter)((0,n.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.context,t=t.$,e.next=3,t.init();case 3:t.postId&&s.jump();case 4:case"end":return e.stop()}},e)})))}},{key:"render",value:function(){var e=this.context.$,t=this.props.onScroll,s=e.state,r=s.placeholder,s=s.value;return(0,S.jsxs)(f.default,{style:_._.container.content,children:[(0,S.jsx)(y.ListView,{ref:this.connectListViewRef,style:_._.container.content,contentContainerStyle:_._.container.bottom,keyExtractor:x.keyExtractor,data:e.comments,scrollEventThrottle:4,initialNumToRender:50,removeClippedSubviews:!1,scrollToTop:!0,ListHeaderComponent:(0,S.jsx)(g.default,{}),renderItem:this.renderItem,onScroll:t,onScrollToIndexFailed:this.onScrollToIndexFailed,onHeaderRefresh:e.fetchBlog,onFooterRefresh:e.fetchBlog,onEndReachedThreshold:.5}),e.isWebLogin&&(0,S.jsx)(y.FixedTextarea,{ref:this.connectFixedTextareaRef,placeholder:r?"回复 "+r:void 0,value:s,source:!0,onChange:e.onChange,onClose:e.closeFixedTextarea,onSubmit:e.doSubmit}),(0,S.jsx)(v.default,{onPress:this.scrollToThenFeedback})]})}}]);var T,s=k;function k(){var o;(0,i.default)(this,k);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o=T.call.apply(T,[this].concat(t)),(0,p.default)((0,a.default)(o),"listView",void 0),(0,p.default)((0,a.default)(o),"fixedTextarea",void 0),(0,p.default)((0,a.default)(o),"scrollFailCount",0),(0,p.default)((0,a.default)(o),"connectListViewRef",function(e){return o.listView=e}),(0,p.default)((0,a.default)(o),"connectFixedTextareaRef",function(e){return o.fixedTextarea=e}),(0,p.default)((0,a.default)(o),"jump",function(){var s=o.context.$;if(s.postId){var e=s.comments,t=e.list;if(e._loaded)try{var r=0;t.forEach(function(e,t){r||(e.id===s.postId?r=t:e.sub&&e.sub.forEach(function(e){e.id===s.postId&&(r=t)}))}),r&&o.scrollTo(r)}catch(e){console.error("blog/index.js","jump",e)}}}),(0,p.default)((0,a.default)(o),"scrollTo",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=o.context.$.comments.list;(0,x.info)(t[e].floor,.8);try{o.listView.scrollToIndex({animated:!1,index:e,viewOffset:0})}catch(e){console.error("blog/index.js","scrollTo",e)}}),(0,p.default)((0,a.default)(o),"scrollToThenFeedback",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=o.context.$;if((0,h.t)("日志.楼层跳转",{blogId:t.blogId,index:e}),-1===e)(0,x.info)("#0",.8),o.listView.scrollToOffset({animated:!0,offset:0-_._.headerHeight});else{t=t.comments.list;(0,x.info)(t[e].floor,.8);try{o.listView.scrollToIndex({animated:!0,index:e,viewOffset:0+_._.headerHeight})}catch(e){console.error("blog/index.js","scrollToThenFeedback",e)}}}),(0,p.default)((0,a.default)(o),"onScrollToIndexFailed",function(e){var t=e.highestMeasuredFrameIndex,s=e.index;o.scrollTo(t),setTimeout(function(){10<o.scrollFailCount||(o.scrollFailCount+=1,o.scrollTo(s))},100)}),(0,p.default)((0,a.default)(o),"showFixedTextare",function(){return o.fixedTextarea.onFocus()}),(0,p.default)((0,a.default)(o),"renderItem",function(e){var t=e.item,e=e.index,s=o.context.$,r={id:"日志.跳转",data:{blogId:s.blogId}};return(0,S.jsx)(j.ItemPost,Object.assign({index:e,postId:s.postId,authorId:s.blog.userId},t,{showFixedTextare:o.showFixedTextare,event:r}))}),o}t.default=(0,b.obc)(s);try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{onScroll:{defaultValue:null,description:"",name:"onScroll",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/blog/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/rakuen/blog/list/index.tsx#list"})}catch(e){}},"./src/screens/rakuen/blog/section-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.string.sub.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/blog/section-title/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var t=t.$,s=(0,i.memoStyles)(),t=t.comments.list,r=0;return(void 0===t?[]:t).forEach(function(e){r+=1,e.sub&&(r+=e.sub.length)}),(0,d.jsxs)(n.SectionTitle,{style:s.title,children:["吐槽"," ",0!==r&&(0,d.jsx)(o.Text,{size:12,type:"sub",lineHeight:24,children:r})]})});try{sectiontitle.displayName="sectiontitle",sectiontitle.__docgenInfo={description:"",displayName:"sectiontitle",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/blog/section-title/index.tsx#sectiontitle"]={docgenInfo:sectiontitle.__docgenInfo,name:"sectiontitle",path:"src/screens/rakuen/blog/section-title/index.tsx#sectiontitle"})}catch(e){}},"./src/screens/rakuen/blog/section-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{title:{paddingHorizontal:r._.wind,marginTop:r._.lg,marginBottom:r._.md},sort:{marginRight:-r._.sm,marginLeft:r._.xs}}})},"./src/screens/rakuen/blog/store.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),_=s("./src/constants/index.ts"),x=s("./src/utils/index.ts"),b=o(s("./src/utils/store/index.ts")),h=s("./src/utils/fetch/index.ts"),g=s("./src/utils/kv/index.ts"),v=o(s("./src/utils/thirdParty/html-entities-decoder.ts")),S=s("./src/screens/rakuen/blog/ds.ts");function O(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(s);return e=r?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var T,k=[];t.default=(o=b.default,(0,l.default)(P,o),T=O(P),(0,d.default)(P,[{key:"blogId",get:function(){var e=this.params.blogId,e=void 0===e?"":e;return e?String(e).split("#")[0]:"0"}},{key:"postId",get:function(){var e=this.params.blogId,e=String(void 0===e?"":e).split("#post_");return(0,u.default)(e,2)[1]}},{key:"namespace",get:function(){return S.NAMESPACE+"|"+this.blogId}},{key:"blog",get:function(){var e=j.rakuenStore.blog(this.blogId);return e._loaded?e:this.ota||{}}},{key:"comments",get:function(){return j.rakuenStore.blogComments(this.blogId)}},{key:"isWebLogin",get:function(){return j.userStore.isWebLogin}},{key:"readed",get:function(){return!0}},{key:"myId",get:function(){return j.userStore.myId}},{key:"myFriendsMap",get:function(){return j.usersStore.myFriendsMap}},{key:"setting",get:function(){return j.rakuenStore.setting}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){return"blog_"+this.blogId}},{key:"title",get:function(){return this.blog.title||this.params._title||""}},{key:"time",get:function(){return this.blog.time||this.params._time||""}},{key:"avatar",get:function(){return this.blog.avatar||this.params._avatar||""}},{key:"userId",get:function(){return this.blog.userId||this.params._userId||""}},{key:"userName",get:function(){return this.blog.userName||this.params._userName||""}},{key:"userSign",get:function(){return this.blog.userSign||""}},{key:"html",get:function(){return this.blog.message||""}},{key:"isUGCAgree",get:function(){return j.systemStore.isUGCAgree}}]),(0,f.default)((s=P).prototype,"blogId",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"blogId"),s.prototype),(0,f.default)(s.prototype,"postId",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"postId"),s.prototype),(0,f.default)(s.prototype,"namespace",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"namespace"),s.prototype),(0,f.default)(s.prototype,"blog",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"blog"),s.prototype),(0,f.default)(s.prototype,"comments",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"comments"),s.prototype),(0,f.default)(s.prototype,"isWebLogin",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"isWebLogin"),s.prototype),(0,f.default)(s.prototype,"readed",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"readed"),s.prototype),(0,f.default)(s.prototype,"myId",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"myId"),s.prototype),(0,f.default)(s.prototype,"myFriendsMap",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"myFriendsMap"),s.prototype),(0,f.default)(s.prototype,"setting",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"setting"),s.prototype),(0,f.default)(s.prototype,"ota",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"ota"),s.prototype),(0,f.default)(s.prototype,"thirdPartyKey",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"thirdPartyKey"),s.prototype),(0,f.default)(s.prototype,"title",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"title"),s.prototype),(0,f.default)(s.prototype,"time",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"time"),s.prototype),(0,f.default)(s.prototype,"avatar",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"avatar"),s.prototype),(0,f.default)(s.prototype,"userId",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"userId"),s.prototype),(0,f.default)(s.prototype,"userName",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"userName"),s.prototype),(0,f.default)(s.prototype,"userSign",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"userSign"),s.prototype),(0,f.default)(s.prototype,"html",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"html"),s.prototype),(0,f.default)(s.prototype,"isUGCAgree",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"isUGCAgree"),s.prototype),s);function P(){var l;(0,i.default)(this,P);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return l=T.call.apply(T,[this].concat(t)),(0,m.default)((0,a.default)(l),"params",void 0),(0,m.default)((0,a.default)(l),"state",(0,y.observable)(S.STATE)),(0,m.default)((0,a.default)(l),"init",(0,n.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getStorage(l.namespace);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,l.setState(Object.assign({},t,S.EXCLUDE_STATE,{_loaded:!0})),j.usersStore.updateFriendsMap(),e.abrupt("return",l.fetchBlog());case 9:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(l),"fetchBlog",(0,n.default)(r.mark(function e(){var t,s;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.fetchThirdParty(),e.next=3,j.rakuenStore.fetchBlog({blogId:l.blogId});case 3:return t=e.sent,(t=t.blog).title&&l.thirdPartyKey in l.state.ota&&(s=(null==(s=l.ota)?void 0:s.ts)||0,604800<=(0,x.getTimestamp)()-s)&&l.updateThirdParty(),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(l),"fetchThirdParty",(0,n.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.ota||l.blog._loaded){e.next=8;break}return e.next=3,(0,g.get)(l.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return l.setState({ota:(0,m.default)({},l.thirdPartyKey,{_loaded:0})}),e.abrupt("return");case 7:l.setState({ota:(0,m.default)({},l.thirdPartyKey,Object.assign({},t,{_loaded:(0,x.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(l),"updateThirdParty",(0,n.default)(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.includes(l.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,g.update)(l.thirdPartyKey,Object.assign({},(0,x.omit)(l.blog,["formhash"]))),k.push(l.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(l),"showFixedTextarea",function(e,t,s){(0,h.t)("日志.显示评论框",{blogId:l.blogId}),l.setState({placeholder:e,replySub:t,message:s})}),(0,m.default)((0,a.default)(l),"closeFixedTextarea",function(){l.setState({placeholder:"",replySub:"",message:""})}),(0,m.default)((0,a.default)(l),"onChange",function(e){l.setState({value:e})}),(0,m.default)((0,a.default)(l),"recoveryContent",function(e){(0,h.t)("日志.回复失败",{blogId:l.blogId}),(0,x.info)("回复失败，可能是cookie失效了"),l.setState({value:""}),setTimeout(function(){l.setState({value:e})},160)}),(0,m.default)((0,a.default)(l),"updateShowHeaderTitle",function(e){l.setState({showHeaderTitle:e})}),(0,m.default)((0,a.default)(l),"doSubmit",function(e){l.state.replySub?l.doReplySub(e):l.doReply(e)}),(0,m.default)((0,a.default)(l),"doReply",function(s){(0,h.t)("日志.回复",{blogId:l.blogId,sub:!1});var e=l.blog.formhash;j.rakuenStore.doReplyBlog({blogId:l.blogId.match(/\d+/g)[0],content:s,formhash:e},function(e){var t={};try{t=JSON.parse(e)}catch(e){}_.IOS&&"ok"!==t.status?l.recoveryContent(s):l.setState({value:""}),(0,x.feedback)(),l.fetchBlog()})}),(0,m.default)((0,a.default)(l),"doReplySub",function(s){(0,h.t)("日志.回复",{blogId:l.blogId,sub:!0});var e=l.state,t=e.placeholder,r=e.replySub,e=e.message,o=l.blog.formhash,r=r.split(","),r=(0,u.default)(r,6),n=r[1],i=r[2],d=r[4],r=r[5],a=s;e&&(e=(0,v.default)(e).replace(/<div class="quote"><q>.*<\/q><\/div>/,""),a="[quote][b]"+t+"[/b] 说: "+(0,x.removeHTMLTag)(e)+"[/quote]\n"+s),j.rakuenStore.doReplyBlog({content:a,formhash:o,blogId:String(n||"").trim(),related:String(i||"").trim(),sub_reply_uid:String(d||"").trim(),post_uid:String(r||"").trim()},function(e){var t={};try{t=JSON.parse(e)}catch(e){}_.IOS&&"ok"!==t.status?l.recoveryContent(s):l.setState({value:""}),(0,x.feedback)(),l.fetchBlog()})}),(0,m.default)((0,a.default)(l),"doDeleteReply",function(e){e&&((0,h.t)("日志.删除回复",{blogId:l.blogId}),j.rakuenStore.doDeleteReplyBlog({url:_.HOST+"/"+e},function(){(0,x.feedback)(),(0,x.info)("已删除"),l.fetchBlog()}))}),l}},"./src/screens/rakuen/blog/top/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),a=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),p=r(s("./src/screens/rakuen/blog/section-title/index.tsx")),m=s("./src/screens/rakuen/blog/top/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,r=t.navigation,t=s.blog,o=void 0===(o=t.related)?[]:o,t=t._loaded,n={id:"日志.跳转",data:{from:"#0",blogId:s.blogId}};return t?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.HeaderPlaceholder,{}),(0,f.jsxs)(i.default,{style:m.styles.container,children:[(0,f.jsxs)(d.Text,{type:"title",size:20,bold:!0,children:[s.title,!!s.time&&(0,f.jsxs)(d.Text,{type:"sub",size:13,lineHeight:20,children:[" ",(0,u.simpleTime)(s.time)]})]}),(0,f.jsxs)(d.Flex,{style:[m.styles.userWrap,l._.mt.md],children:[!!s.avatar&&(0,f.jsx)(d.UserStatus,{userId:s.userId,children:(0,f.jsx)(a.Avatar,{navigation:r,event:n,size:40,src:s.avatar,userId:s.userId,name:s.userName})}),!!s.userId&&(0,f.jsx)(d.Flex.Item,{style:l._.ml.sm,children:(0,f.jsxs)(d.Text,{numberOfLines:2,children:[s.userName,(0,f.jsxs)(d.Text,{type:"sub",children:[" @",s.userId]})]})})]}),(0,f.jsx)(i.default,{style:m.styles.html,children:!!s.html&&(0,f.jsx)(d.RenderHtml,{style:l._.mt.md,html:s.html,onLinkPress:function(e){return(0,u.appNavigate)(e,r,{},n)}})})]}),(0,f.jsx)(d.Divider,{}),!!o.length&&(0,f.jsx)(a.HorizontalList,{style:l._.mt.sm,data:o,width:80,height:106,findCn:!0,onPress:function(e){var t=e.id,s=e.name,e=e.image;(0,c.t)("日志.跳转",{to:"Subject",from:"关联条目",subjectId:t}),r.push("Subject",{subjectId:t,_jp:s,_image:e})}}),(0,f.jsx)(p.default,{})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.HeaderPlaceholder,{}),(0,f.jsx)(d.Flex,{style:m.styles.loading,justify:"center",children:(0,f.jsx)(d.Loading,{})})]})});try{top.displayName="top",top.__docgenInfo={description:"",displayName:"top",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/blog/top/index.tsx#top"]={docgenInfo:top.__docgenInfo,name:"top",path:"src/screens/rakuen/blog/top/index.tsx#top"})}catch(e){}},"./src/screens/rakuen/blog/top/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{paddingVertical:s._.sm,paddingHorizontal:s._.wind},groupWrap:{height:32},groupThumbWrap:{width:30},userWrap:{height:42},html:{minHeight:120},loading:{height:240}})},"./src/screens/rakuen/blog/touch-scroll/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/TouchableWithoutFeedback/index.js"))),l=s("./src/components/index.ts"),u=(s("./src/stores/index.ts"),s("./src/utils/index.ts")),r=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),p=s("./src/screens/rakuen/blog/touch-scroll/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var r,o,n,i,d=void 0===(e=e.onPress)?function(){}:e,e=t.$;return!c.STORYBOOK&&(t=e.setting.scrollDirection,r=e.comments.list,t!==c.MODEL_RAKUEN_SCROLL_DIRECTION.getValue("隐藏"))&&r.length?(o=(0,p.memoStyles)(),n=[Math.floor(.33333*r.length),Math.floor(.66666*r.length),r.length-1],i=t===c.MODEL_RAKUEN_SCROLL_DIRECTION.getValue("右侧")||t===c.MODEL_RAKUEN_SCROLL_DIRECTION.getValue("左侧"),(0,m.jsxs)(l.Flex,{style:o["container"+(0,u.titleCase)(t)],direction:i?"column":void 0,children:[(0,m.jsx)(l.Flex.Item,{flex:i?1:3,children:(0,m.jsx)(a.default,{onPressIn:function(){return d(-1)},children:(0,m.jsx)(l.Flex,{style:i?o.itemVertical:o.itemHorizontal,children:(0,m.jsx)(l.Text,{style:o.text,size:8,type:"icon",align:"center",children:"0"})})})}),r.map(function(e,t){var s=n.includes(t);return(0,m.jsx)(l.Flex.Item,{flex:!i&&s?3:1,children:(0,m.jsx)(a.default,{onPressIn:function(){return d(t)},children:(0,m.jsx)(l.Flex,{style:(0,u.stl)(i?o.itemVertical:o.itemHorizontal,!1),children:s&&(0,m.jsx)(l.Text,{style:o.text,size:8,type:"icon",align:"center",children:String(r[t].floor||"").replace("#","")})})})},t)})]})):null})},"./src/screens/rakuen/blog/touch-scroll/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{containerRight:{position:"absolute",zIndex:1,top:r._.headerHeight,right:0,bottom:42,width:16},containerLeft:{position:"absolute",zIndex:1,top:r._.headerHeight,left:0,bottom:42,width:16},containerBottom:{position:"absolute",left:0,right:0,bottom:40,width:"100%",height:24,backgroundColor:r._.select(r._.colorPlain,r._._colorDarkModeLevel1)},itemVertical:{width:16,height:"100%"},itemHorizontal:{width:"100%",height:"100%"},itemNew:{backgroundColor:r._.select("rgba(254, 138, 149, 0.64)","rgba(254, 113, 127, 0.16)")},text:{width:"100%"}}})},"./src/screens/rakuen/board/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=void 0;t.NAMESPACE="ScreenBoard",t.STATE={history:[],ota:{},_loaded:!1}},"./src/screens/rakuen/board/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$;return(0,d.jsx)(o.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的讨论版":"讨论版",alias:"讨论版",hm:[s.url,"Board"],headerRight:function(){return(0,d.jsx)(o.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("讨论版.右上角菜单",{key:e}),(0,n.open)(s.url))},children:(0,d.jsx)(o.Heatmap,{id:"讨论版.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/board/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/rakuen/board/header/index.tsx#header"})}catch(e){}},"./src/screens/rakuen/board/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/rakuen/board/header/index.tsx")),a=r(s("./src/screens/rakuen/board/list/index.tsx")),r=r(s("./src/screens/rakuen/board/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(r.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){return(0,l.jsxs)(o.Component,{id:"screen-board",children:[(0,l.jsx)(d.default,{}),(0,l.jsx)(o.Page,{loaded:s.board._loaded,children:(0,l.jsx)(a.default,{})})]})})});try{board.displayName="board",board.__docgenInfo={description:"",displayName:"board",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/board/index.tsx#board"]={docgenInfo:board.__docgenInfo,name:"board",path:"src/screens/rakuen/board/index.tsx#board"})}catch(e){}},"./src/screens/rakuen/board/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),m=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),f=s("./src/components/index.ts"),y=s("./src/screens/_/index.ts"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),x=s("./src/utils/fetch/index.ts"),b=s("./src/constants/index.ts"),o=s("./src/screens/rakuen/board/list/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var u=t.$,c=t.navigation,p=(0,o.memoStyles)(),s=(t=u.board).list;return t._loaded&&!s.length?(0,h.jsxs)(f.Flex,{style:p.empty,direction:"column",justify:"center",children:[(0,h.jsx)(f.Mesume,{}),(0,h.jsx)(f.Text,{style:j._.mt.sm,type:"sub",children:"好像什么都没有"})]}):(0,h.jsx)(f.ScrollView,{contentContainerStyle:j._.container.bottom,scrollToTop:!0,children:s.map(function(e,t){var s=e.title,r=e.href,o=e.replies,n=e.time,i=e.userId,e=e.userName,d=r.replace("/subject/topic/","subject/"),a=!!u.readed(d).time,l="+"+o.replace(" replies","");return(0,h.jsxs)(f.Touchable,{style:(0,_.stl)(p.item,a&&p.readed),animate:!0,onPress:function(){var e;Number(o)>b.LIMIT_TOPIC_PUSH?(e=""+b.HOST+r,(0,x.t)("讨论版.跳转",{to:"WebBrowser",url:e}),(0,_.info)("该帖评论多, 自动使用浏览器打开"),setTimeout(function(){(0,_.open)(e)},1600)):(u.onItemPress(d,o),(0,_.appNavigate)(r,c,{_title:s,_replies:l,_time:n},{id:"讨论版.跳转"}))},children:[(0,h.jsxs)(f.Flex,{style:p.wrap,align:"start",children:[(0,h.jsx)(m.default,{style:j._.mr.sm,children:(0,h.jsx)(y.Avatar,{navigation:c,userId:i,name:e,src:(0,b.API_AVATAR)(i)})}),(0,h.jsxs)(f.Flex.Item,{children:[(0,h.jsxs)(f.Text,{size:15,children:[(0,_.HTMLDecode)(s),"+0"!=l&&(0,h.jsxs)(f.Text,{type:a?"sub":"main",size:12,lineHeight:15,bold:!0,children:[" ",l]})]}),(0,h.jsxs)(f.Text,{style:j._.mt.xs,type:"sub",size:12,children:[(0,_.correctAgo)(n)," /"," ",(0,h.jsx)(f.Text,{size:12,bold:!0,children:e})]})]})]}),!t&&(0,h.jsx)(f.Heatmap,{id:"讨论版.跳转"})]},r)})})});try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/board/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/rakuen/board/list/index.tsx#list"})}catch(e){}},"./src/screens/rakuen/board/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{item:{paddingLeft:r._.wind-r._._wind+r._.md},wrap:{paddingVertical:r._.md,paddingRight:r._.wind-r._._wind+r._.md},border:{borderTopColor:r._.colorBorder,borderTopWidth:r._.hairlineWidth},readed:{backgroundColor:r._.colorBg},empty:{minHeight:240}}})},"./src/screens/rakuen/board/store.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),r=r(s("./src/utils/store/index.ts")),_=s("./src/utils/kv/index.ts"),x=s("./src/constants/index.ts"),b=s("./src/screens/rakuen/board/ds.ts");function h(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var g,v=[];t.default=(s=r.default,(0,l.default)(S,s),g=h(S),(0,d.default)(S,[{key:"subjectId",get:function(){var e=this.params.subjectId;return void 0===e?"":e}},{key:"key",get:function(){return b.NAMESPACE+"|"+this.subjectId}},{key:"board",get:function(){var e=y.rakuenStore.board(this.subjectId);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):x.LIST_EMPTY}},{key:"url",get:function(){return(0,x.HTML_BOARD)(this.subjectId)}},{key:"readed",value:function(e){return(0,f.computed)(function(){return y.rakuenStore.readed(e)}).get()}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){return"board_"+this.subjectId}}]),(0,m.default)((t=S).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,m.default)(t.prototype,"key",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"key"),t.prototype),(0,m.default)(t.prototype,"board",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"board"),t.prototype),(0,m.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,m.default)(t.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,m.default)(t.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function S(){var r;(0,i.default)(this,S);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r=g.call.apply(g,[this].concat(t)),(0,p.default)((0,a.default)(r),"params",void 0),(0,p.default)((0,a.default)(r),"state",(0,f.observable)(b.STATE)),(0,p.default)((0,a.default)(r),"init",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(r.key);case 2:return t=e.sent,r.setState(Object.assign({},t,{ota:{},_loaded:!0})),e.abrupt("return",r.fetchBoard());case 5:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"fetchBoard",(0,n.default)(o.mark(function e(){var t,s;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.fetchThirdParty(),e.next=3,y.rakuenStore.fetchBoard({subjectId:r.subjectId});case 3:return(t=e.sent).list.length&&r.thirdPartyKey in r.state.ota&&(s=(null==(s=r.ota)?void 0:s.ts)||0,604800<=(0,j.getTimestamp)()-s)&&r.updateThirdParty(),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"fetchThirdParty",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ota||r.board._loaded){e.next=8;break}return e.next=3,(0,_.get)(r.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return r.setState({ota:(0,p.default)({},r.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:r.setState({ota:(0,p.default)({},r.thirdPartyKey,Object.assign({},t,{_loaded:(0,j.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"updateThirdParty",(0,n.default)(o.mark(function e(){return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.includes(r.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,_.update)(r.thirdPartyKey,{list:r.board.list}),v.push(r.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"onItemPress",function(e,t){return y.rakuenStore.updateTopicReaded(e,t)}),r}},"./src/screens/rakuen/group/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=void 0;t.NAMESPACE="ScreenGroup",t.STATE={page:1,show:!0,ipt:"1",history:[],ota:{},_loaded:!1}},"./src/screens/rakuen/group/header-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/group/header-title/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=(e=e.$).groupInfo.title;return(0,d.jsxs)(o.Flex,{style:i.styles.container,children:[!!e.groupThumb&&(0,d.jsx)(o.Image,{size:28,src:e.groupThumb,radius:!0}),(0,d.jsx)(o.Flex.Item,{style:n._.ml.sm,children:(0,d.jsx)(o.Text,{size:13,numberOfLines:1,children:t})})]})});try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenGroup"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/group/header-title/index.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/rakuen/group/header-title/index.tsx#headertitle"})}catch(e){}},"./src/screens/rakuen/group/header-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{marginTop:s._.ios(4,-10),marginRight:s._.md}})},"./src/screens/rakuen/group/header/index.tsx":(e,t,s)=>{var d=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),l=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),u=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),m=s("./src/utils/fetch/index.ts"),f=s("./src/constants/index.ts"),y=r(s("./src/screens/rakuen/group/header-title/index.tsx")),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=this,e=e.fixed,r=t.$,o=t.navigation,n=(t=r.groupInfo).joinUrl,t=t.byeUrl,i=["浏览器查看","小组成员"];return n&&i.push("加入小组"),t&&i.push("退出小组"),(0,j.jsx)(l.Header,{mode:"transition",statusBarEventsType:"Topic",fixed:e,title:r.groupInfo.title,alias:"小组",hm:[r.url,"Group"],headerTitle:(0,j.jsx)(y.default,{$:r}),headerRight:function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.IconTouchable,{style:c._.mr.sm,name:"md-edit",size:18,color:c._.colorTitle,onPress:function(){var e=(0,f.HTML_NEW_TOPIC)(String(r.groupId));o.push("WebBrowser",{url:e,title:"添加新讨论",desc:"发帖组件复杂并没有重新开发实装。若你看见的不是发帖页面，请先在此页面进行登录。请务必刷新一下验证码再登录。成功后点击右上方刷新页面。",injectedViewport:!0}),(0,m.t)("小组.跳转",{to:"WebBrowser",url:e})}}),(0,j.jsx)(l.Header.Popover,{data:i,onSelect:(t=(0,a.default)(d.mark(function e(t){return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,m.t)("小组.右上角菜单",{key:t,groupId:r.groupId}),e.t0=t,e.next="浏览器查看"===e.t0?4:"小组成员"===e.t0?6:"加入小组"===e.t0?8:"退出小组"===e.t0?12:16;break;case 4:return(0,p.open)(r.url),e.abrupt("break",17);case 6:return(0,p.open)(f.HOST+"/group/"+r.groupId+"/members"),e.abrupt("break",17);case 8:return e.next=10,r.doJoin();case 10:return s.updatePopover(),e.abrupt("break",17);case 12:return e.next=14,r.doBye();case 14:return s.updatePopover(),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),children:(0,j.jsx)(l.Heatmap,{id:"小组.右上角菜单"})})]});var t}})})},"./src/screens/rakuen/group/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/components/index.ts"),d=s("./src/components/header/utils.tsx"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),u=r(s("./src/screens/rakuen/group/header/index.tsx")),c=r(s("./src/screens/rakuen/group/info/index.tsx")),p=r(s("./src/screens/rakuen/group/list/index.tsx")),r=r(s("./src/screens/rakuen/group/store.ts")),m=s("./src/screens/rakuen/group/styles.ts"),f=s("./node_modules/react/jsx-runtime.js"),y={prev:"小组.上一页",next:"小组.下一页",search:"小组.页码跳转"};t.default=(0,o.ic)(r.default,function(e,t){var s=t.$,t=((0,l.useRunAfter)(function(){s.init()}),(0,d.useOnScroll)()),r=t.fixed,o=t.onScroll;return(0,l.useObserver)(function(){var e=s.state.show;return(0,f.jsxs)(i.Component,{id:"screen-rakuen-group",children:[(0,f.jsxs)(i.Page,{statusBarEvent:!1,children:[(0,f.jsxs)(i.ScrollView,{scrollEventThrottle:4,scrollToTop:!0,onScroll:o,children:[(0,f.jsx)(c.default,{}),e&&(0,f.jsx)(n.default,{style:[{minHeight:a._.window.height},a._.mt.md],children:(0,f.jsx)(p.default,{})})]}),(0,f.jsx)(i.Pagination,{style:m.styles.pagination,input:s.state.ipt,heatmaps:y,onPrev:s.prev,onNext:s.next,onChange:s.onChange,onSearch:s.doSearch})]}),(0,f.jsx)(u.default,{fixed:r}),(0,f.jsx)(i.Heatmap,{id:"小组",screen:"Group"}),(0,f.jsx)(i.Heatmap,{right:72,bottom:a._.bottom,id:"小组.加入"}),(0,f.jsx)(i.Heatmap,{right:72,bottom:a._.bottom-34,id:"小组.退出"})]})})});try{group.displayName="group",group.__docgenInfo={description:"",displayName:"group",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/group/index.tsx#group"]={docgenInfo:group.__docgenInfo,name:"group",path:"src/screens/rakuen/group/index.tsx#group"})}catch(e){}},"./src/screens/rakuen/group/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),l=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),u=s("./src/screens/rakuen/group/info/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=(t=t.$).params._title,r=(i=t.groupInfo).title,o=i.content,n=i.create,i=i._loaded;return(0,c.jsxs)(d.default,{style:[u.styles.container,l._.container.inner],children:[(0,c.jsx)(a.HeaderPlaceholder,{}),(0,c.jsx)(a.Text,{size:20,bold:!0,children:r||s}),!!t.groupThumb&&(0,c.jsxs)(a.Flex,{style:l._.mt.md,justify:"center",children:[(0,c.jsx)(a.Image,{src:t.groupThumb,size:l._.r(80),shadow:!0,placeholder:!1,imageViewer:!0,event:{id:"小组.封面图查看",data:{groupId:t.groupId}}}),(0,c.jsx)(a.Heatmap,{id:"小组.封面图查看"})]}),!!o&&(0,c.jsx)(a.Expand,{style:l._.mt.lg,ratio:.64,children:(0,c.jsx)(a.RenderHtml,{html:o+'<p style="text-align:right;color:#999">'+n+"</p><br/>"})}),!i&&(0,c.jsx)(a.Flex,{style:u.styles.loading,justify:"center",children:(0,c.jsx)(a.Loading,{})})]})});try{info.displayName="info",info.__docgenInfo={description:"",displayName:"info",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/group/info/index.tsx#info"]={docgenInfo:info.__docgenInfo,name:"info",path:"src/screens/rakuen/group/info/index.tsx#info"})}catch(e){}},"./src/screens/rakuen/group/info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:328},loading:{height:200}})},"./src/screens/rakuen/group/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),j=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),_=s("./src/components/index.ts"),x=s("./src/screens/_/index.ts"),b=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),g=s("./src/utils/fetch/index.ts"),v=s("./src/constants/index.ts"),o=s("./src/screens/rakuen/group/list/styles.ts"),S=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var e=void 0===(e=e.style)?void 0:e,p=t.$,m=t.navigation,f=(0,o.memoStyles)(),y=p.groupInfo.title,s=(t=p.group).list;return t._loaded&&!s.length?(0,S.jsxs)(_.Flex,{style:f.empty,direction:"column",justify:"center",children:[(0,S.jsx)(_.Mesume,{}),(0,S.jsx)(_.Text,{style:b._.mt.sm,type:"sub",children:"好像什么都没有"})]}):(0,S.jsx)(j.default,{style:e,children:s.map(function(e,t){var s,r=e.title,o=e.href,n=e.replies,i=e.time,d=e.userName,e=e.userId,a=o.replace("/group/topic/","group/"),l=p.readed(a),u=!!l.time,c="+"+n;return u&&Number(n)>l.replies&&(s="+"+(Number(n)-l.replies)),(0,S.jsxs)(_.Touchable,{style:(0,h.stl)(f.item,u&&f.readed),animate:!0,onPress:function(){var e;Number(n)>v.LIMIT_TOPIC_PUSH?(e=""+v.HOST+o,(0,g.t)("小组.跳转",{to:"WebBrowser",url:e}),(0,h.info)("该帖评论多, 自动使用浏览器打开"),setTimeout(function(){(0,h.open)(e)},1500)):(p.onItemPress(a,n),(0,h.appNavigate)(o,m,{_title:r,_replies:"+"+n,_group:y,_time:i},{id:"小组.跳转"}))},children:[(0,S.jsxs)(j.default,{style:f.wrap,children:[(0,S.jsxs)(_.Text,{size:15,children:[(0,h.HTMLDecode)(r),(0,S.jsxs)(_.Text,{type:u?"sub":"main",size:12,lineHeight:15,children:[" ",c]}),!!s&&(0,S.jsxs)(_.Text,{type:"main",size:12,lineHeight:15,children:[" ",s]})]}),(0,S.jsxs)(_.Flex,{style:b._.mt.sm,children:[(0,S.jsx)(_.UserStatus,{userId:e,mini:!0,children:(0,S.jsx)(x.Avatar,{navigation:m,size:18,src:(0,v.API_AVATAR)(e),userId:e})}),(0,S.jsx)(_.Text,{style:b._.ml.sm,size:12,bold:!0,children:d}),(0,S.jsx)(_.Text,{style:b._.ml.xs,type:"sub",size:11,bold:!0,children:(0,h.correctAgo)(i)})]})]}),!t&&(0,S.jsx)(_.Heatmap,{id:"小组.跳转"})]},o)})})})},"./src/screens/rakuen/group/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{item:{paddingLeft:r._.wind-r._._wind+r._.md},wrap:{paddingVertical:r._.md,paddingRight:r._.wind},border:{borderTopColor:r._.colorBorder,borderTopWidth:r._.hairlineWidth},readed:{backgroundColor:r._.colorBg},empty:{minHeight:240}}})},"./src/screens/rakuen/group/store.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),r=r(s("./src/utils/store/index.ts")),_=s("./src/utils/fetch/index.ts"),x=s("./src/utils/kv/index.ts"),b=s("./src/utils/webhooks/index.ts"),h=s("./src/utils/app/ds.ts"),g=s("./src/constants/index.ts"),v=s("./src/screens/rakuen/group/ds.ts");function S(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var O,T=[];t.default=(s=r.default,(0,l.default)(k,s),O=S(k),(0,d.default)(k,[{key:"groupId",get:function(){var e=this.params.groupId;return void 0===e?"":e}},{key:"key",get:function(){return v.NAMESPACE+"|"+this.groupId}},{key:"groupInfo",get:function(){return y.rakuenStore.groupInfo(this.groupId)}},{key:"group",get:function(){var e=this.state.page,e=y.rakuenStore.group(this.groupId,e);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):g.LIST_EMPTY}},{key:"groupThumb",get:function(){var e="",t=this.groupInfo.cover,t=(t?e=t||"":(t=this.params._title)&&(e=y.rakuenStore.groupThumb(t)||""),y.systemStore.setting),s=t.cdn,t=t.cdnOrigin;return e=s&&"magma"===t&&"string"==typeof e&&e.includes(h.HOST_IMAGE)?(0,g.CDN_OSS_MAGMA_PIC)(e):e}},{key:"url",get:function(){return g.HOST+"/group/"+this.groupId}},{key:"readed",value:function(e){return(0,f.computed)(function(){return y.rakuenStore.readed(e)}).get()}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){var e=this.state.page;return"group_"+[this.groupId,e].join("_").replace("/","_")}}]),(0,m.default)((t=k).prototype,"groupId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"groupId"),t.prototype),(0,m.default)(t.prototype,"key",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"key"),t.prototype),(0,m.default)(t.prototype,"groupInfo",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"groupInfo"),t.prototype),(0,m.default)(t.prototype,"group",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"group"),t.prototype),(0,m.default)(t.prototype,"groupThumb",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"groupThumb"),t.prototype),(0,m.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,m.default)(t.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,m.default)(t.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function k(){var r;(0,i.default)(this,k);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r=O.call.apply(O,[this].concat(t)),(0,p.default)((0,a.default)(r),"params",void 0),(0,p.default)((0,a.default)(r),"state",(0,f.observable)(v.STATE)),(0,p.default)((0,a.default)(r),"init",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(r.key);case 2:return t=e.sent,r.setState(Object.assign({},t,{ota:{},_loaded:!0})),r.fetchGroup(),e.abrupt("return",r.fetchGroupInfo());case 6:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"fetchGroupInfo",function(){return y.rakuenStore.fetchGroupInfo({groupId:r.groupId})}),(0,p.default)((0,a.default)(r),"fetchGroup",(0,n.default)(o.mark(function e(){var t,s;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.fetchThirdParty(),t=r.state.page,e.next=4,y.rakuenStore.fetchGroup({groupId:r.groupId,page:t});case 4:return(t=e.sent).list.length&&r.thirdPartyKey in r.state.ota&&(s=(null==(s=r.ota)?void 0:s.ts)||0,604800<=(0,j.getTimestamp)()-s)&&r.updateThirdParty(),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"fetchThirdParty",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ota||r.group._loaded){e.next=8;break}return e.next=3,(0,x.get)(r.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return r.setState({ota:(0,p.default)({},r.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:r.setState({ota:(0,p.default)({},r.thirdPartyKey,Object.assign({},t,{_loaded:(0,j.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"updateThirdParty",(0,n.default)(o.mark(function e(){return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.includes(r.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,x.update)(r.thirdPartyKey,{list:r.group.list}),T.push(r.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"prev",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1===(t=r.state.page))return e.abrupt("return");e.next=3;break;case 3:(0,_.t)("小组.上一页",{page:t-1,groupId:r.groupId}),r.setState({page:t-1,show:!1,ipt:String(t-1)}),r.fetchGroup(),setTimeout(function(){r.setState({show:!0}),r.setStorage(void 0,void 0,r.key)},400);case 7:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"next",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r.state.page,(0,_.t)("小组.下一页",{page:t+1,groupId:r.groupId}),r.setState({page:t+1,show:!1,ipt:String(t+1)}),r.fetchGroup(),setTimeout(function(){r.setState({show:!0}),r.setStorage(void 0,void 0,r.key)},400);case 5:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"onChange",function(e){e=e.nativeEvent.text;r.setState({ipt:e})}),(0,p.default)((0,a.default)(r),"onItemPress",function(e,t){y.rakuenStore.updateTopicReaded(e,t)}),(0,p.default)((0,a.default)(r),"doSearch",function(){var e=r.state.ipt,e=""===e?1:parseInt(e);e<1?(0,j.info)("请输入正确页码"):((0,_.t)("小组.页码跳转",{page:e,groupId:r.groupId}),r.setState({page:e,show:!1,ipt:String(e)}),r.fetchGroup(),setTimeout(function(){r.setState({show:!0}),r.setStorage(void 0,void 0,r.key)},400))}),(0,p.default)((0,a.default)(r),"doJoin",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.groupInfo.joinUrl){e.next=3;break}return e.abrupt("return",!1);case 3:return(0,_.t)("小组.加入",{groupId:r.groupId}),e.next=6,(0,_.fetchHTML)({method:"POST",url:""+g.HOST+t,data:{action:"join-bye"}});case 6:return(0,j.feedback)(),(0,j.info)("已加入小组"),(0,b.webhookGroup)(Object.assign({},r.groupInfo,{id:r.groupId}),y.userStore.userInfo),e.abrupt("return",r.fetchGroupInfo());case 10:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"doBye",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.groupInfo.byeUrl){e.next=3;break}return e.abrupt("return",!1);case 3:return(0,_.t)("小组.退出",{groupId:r.groupId}),e.next=6,(0,_.fetchHTML)({method:"POST",url:""+g.HOST+t,data:{action:"join-bye"}});case 6:return(0,j.feedback)(),(0,j.info)("已退出小组"),e.abrupt("return",r.fetchGroupInfo());case 9:case"end":return e.stop()}},e)}))),r}},"./src/screens/rakuen/group/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({pagination:{paddingTop:s._.sm,paddingBottom:s._.ios(s._.md,s._.sm)}})},"./src/screens/rakuen/history/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.DS=void 0;t.NAMESPACE="ScreenRakuenHistory",t.DS=["小组","条目","章节","人物"],t.STATE={favor:!1,topics:{},type:"小组",_loaded:!1}},"./src/screens/rakuen/history/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/rakuen/history/icon-favor/index.tsx")),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=t.$,t=s.state.favor;return(0,d.jsx)(o.Header,{title:t?"收藏 ("+s.list.length+")":"缓存 ("+s.keys.length+")",alias:"本地帖子",hm:["rakuen/history","RakuenHistory"],headerTitleAlign:"left",headerRight:function(){return(0,d.jsx)(i.default,{$:s})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/history/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/rakuen/history/header/index.tsx#header"})}catch(e){}},"./src/screens/rakuen/history/icon-favor/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./src/components/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/history/icon-favor/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=(e=e.$).state.favor;return(0,d.jsxs)(o.default,{children:[(0,d.jsx)(n.SegmentedControl,{style:i.styles.segment,size:11,values:["收藏","缓存"],selectedIndex:t?0:1,onValueChange:e.toggleFavor},String(e.state._loaded)),(0,d.jsx)(n.Heatmap,{id:"本地帖子.切换收藏"})]})});try{iconfavor.displayName="iconfavor",iconfavor.__docgenInfo={description:"",displayName:"iconfavor",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenRakuenHistory"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/history/icon-favor/index.tsx#iconfavor"]={docgenInfo:iconfavor.__docgenInfo,name:"iconfavor",path:"src/screens/rakuen/history/icon-favor/index.tsx#iconfavor"})}catch(e){}},"./src/screens/rakuen/history/icon-favor/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({segment:{width:s._.r(96),height:s._.r(28),marginRight:s._.sm}})},"./src/screens/rakuen/history/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/rakuen/history/header/index.tsx")),a=r(s("./src/screens/rakuen/history/section-list/index.tsx")),l=r(s("./src/screens/rakuen/history/list/index.tsx")),r=r(s("./src/screens/rakuen/history/store.ts")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(r.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){var e=s.state.favor;return(0,u.jsxs)(o.Component,{id:"screen-history",children:[(0,u.jsx)(d.default,{}),(0,u.jsx)(o.Page,{loaded:s.state._loaded,children:e?(0,u.jsx)(l.default,{}):(0,u.jsx)(a.default,{})})]})})});try{history.displayName="history",history.__docgenInfo={description:"",displayName:"history",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/history/index.tsx#history"]={docgenInfo:history.__docgenInfo,name:"history",path:"src/screens/rakuen/history/index.tsx#history"})}catch(e){}},"./src/screens/rakuen/history/item-lazy/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),p=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),y=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),j=s("./src/utils/fetch/index.ts"),_=s("./src/screens/rakuen/history/item-lazy/styles.ts"),x=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r,o,n,i,d,a=e.item,e=t.$,l=t.navigation,t=(0,_.memoStyles)(),u=e.topic(a);return u?(s=u.userId,r=u.avatar,o=u.userName,n=u.title,i=u.group,u=[(d=u.time).includes("首播")?d:(0,y.simpleTime)(d),o,i].filter(function(e){return!!e}).join(" / "),(0,x.jsx)(p.Touchable,{animate:!0,onPress:function(){(0,j.t)("本地帖子.跳转",{to:"Topic",topicId:a}),l.push("Topic",{topicId:a,_noFetch:!0,_title:n,_group:i,_time:d,_avatar:r,_userName:o,_userId:s})},children:(0,x.jsxs)(p.Flex,{style:t.container,align:"start",children:[(0,x.jsx)(c.default,{style:t.image,children:(0,x.jsx)(p.UserStatus,{userId:s,children:(0,x.jsx)(m.Avatar,{navigation:l,src:r,userId:s,name:o})})}),(0,x.jsx)(p.Flex.Item,{children:(0,x.jsxs)(p.Flex,{style:t.item,align:"start",children:[(0,x.jsxs)(p.Flex.Item,{children:[(0,x.jsx)(p.Text,{bold:!0,children:"undefined"===n?"(此帖子已删除)":n}),(0,x.jsx)(p.Text,{style:f._.mt.sm,type:"sub",size:11,children:u})]}),e.isFavor(a)&&(0,x.jsx)(p.Iconfont,{style:t.favor,size:16,name:"md-star",color:f._.colorYellow})]})})]})})):(0,x.jsx)(p.Flex,{style:t.loading,justify:"center",children:(0,x.jsx)(p.Loading.Raw,{})})})},"./src/screens/rakuen/history/item-lazy/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{loading:{height:60},container:{paddingLeft:r._.wind,backgroundColor:r._.colorPlain},image:{marginRight:r._.xs,marginTop:r._.md},item:{paddingVertical:r._.md,paddingLeft:r._.sm,paddingRight:r._.wind},border:{borderTopColor:r._.colorBorder,borderTopWidth:r._.hairlineWidth},favor:{marginTop:1}}})},"./src/screens/rakuen/history/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),p=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),y=s("./src/utils/fetch/index.ts"),j=s("./src/screens/rakuen/history/item/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=e.topicId,r=e.avatar,o=e.userName,n=e.title,i=e.group,d=void 0===(l=e.time)?"":l,a=e.userId,l=t.$,u=t.navigation,e=(0,j.memoStyles)(),t=[null==(t=d.split(" "))?void 0:t[1],o,i].filter(function(e){return!!e}).join(" / ");return(0,_.jsx)(p.Touchable,{animate:!0,onPress:function(){(0,y.t)("本地帖子.跳转",{to:"Topic",topicId:s}),u.push("Topic",{topicId:s,_noFetch:!0,_title:n,_group:i,_time:d,_avatar:r,_userName:o,_userId:a})},children:(0,_.jsxs)(p.Flex,{style:e.container,align:"start",children:[(0,_.jsx)(c.default,{style:e.image,children:(0,_.jsx)(p.UserStatus,{userId:a,children:(0,_.jsx)(m.Avatar,{navigation:u,src:r,userId:a,name:o})})}),(0,_.jsx)(p.Flex.Item,{children:(0,_.jsxs)(p.Flex,{style:e.item,align:"start",children:[(0,_.jsxs)(p.Flex.Item,{children:[(0,_.jsx)(p.Text,{bold:!0,children:"undefined"===n?"(此帖子已删除)":n}),(0,_.jsx)(p.Text,{style:f._.mt.sm,type:"sub",size:11,children:t})]}),l.isFavor(s)&&(0,_.jsx)(p.Iconfont,{style:e.favor,size:16,name:"md-star",color:f._.colorYellow})]})})]})})})},"./src/screens/rakuen/history/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingLeft:r._.wind,backgroundColor:r._.colorPlain},image:{marginRight:r._.xs,marginTop:r._.md},item:{paddingVertical:r._.md,paddingLeft:r._.sm,paddingRight:r._.wind},favor:{marginTop:1}}})},"./src/screens/rakuen/history/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find-index.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),a=r(s("./src/screens/rakuen/history/item-lazy/index.tsx")),l=s("./src/screens/rakuen/history/ds.ts"),u=s("./src/screens/rakuen/history/list/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)(function(e,t){var t=t.$,s=(0,u.memoStyles)(),r=t.state.type;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.SegmentedControl,{style:s.segment,size:11,values:l.DS,selectedIndex:l.DS.findIndex(function(e){return e===r}),onValueChange:t.onChange},r),(0,c.jsx)(n.PaginationList2,{keyExtractor:p,contentContainerStyle:i._.container.bottom,data:t.list,limit:12,scrollToTop:!0,renderItem:m,onPage:t.onPage})]})});function p(e){return String(e)}function m(e){e=e.item;return(0,c.jsx)(a.default,{item:e})}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/history/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/rakuen/history/list/index.tsx#list"})}catch(e){}},"./src/screens/rakuen/history/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{segment:{width:r._.window.width-2*r._.wind,height:30,marginLeft:r._.wind,marginVertical:r._.sm}}})},"./src/screens/rakuen/history/section-list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),a=r(s("./src/screens/rakuen/history/item/index.tsx")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)(function(e,t){return t=t.$,(0,l.jsx)(o.ListView,{keyExtractor:u,style:i._.mt.sm,sections:t.sections,scrollToTop:!0,renderSectionHeader:c,renderItem:p},t.sections.length)});function u(e){return String(e.topicId)}function c(e){e=e.section.title;return(0,l.jsx)(n.SectionHeader,{size:14,children:e})}function p(e){e=e.item;return(0,l.jsx)(a.default,Object.assign({},e))}try{sectionlist.displayName="sectionlist",sectionlist.__docgenInfo={description:"",displayName:"sectionlist",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/history/section-list/index.tsx#sectionlist"]={docgenInfo:sectionlist.__docgenInfo,name:"sectionlist",path:"src/screens/rakuen/history/section-list/index.tsx#sectionlist"})}catch(e){}},"./src/screens/rakuen/history/store.ts":(e,t,s)=>{var n=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.from.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.set.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),i=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),x=r(s("./src/utils/store/index.ts")),b=s("./src/utils/kv/index.ts"),h=s("./src/utils/fetch/index.ts"),g=r(s("./src/constants/i18n/index.ts")),v=s("./src/screens/rakuen/history/ds.ts");function S(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(s);return e=r?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var O;t.default=(r=x.default,(0,u.default)(T,r),O=S(T),(0,a.default)(T,[{key:"isLogin",get:function(){return j.userStore.isLogin}},{key:"keys",get:function(){var t=this,s=this.state.favor,e=j.rakuenStore.state,r=e.topic,e=e.cloudTopic;return Array.from(new Set([].concat((0,o.default)(Object.keys(r)),(0,o.default)(Object.keys(e))))).filter(function(e){return!(!e.includes("group/")||e.includes("undefined")||!/^group\/(\d+)$/.test(e))&&(!s||t.isFavor(e))}).sort(function(e,t){return(0,_.desc)(parseInt(null==(e=e.split("/"))?void 0:e[1]),parseInt(null==(e=t.split("/"))?void 0:e[1]))})}},{key:"sections",get:function(){var r=[],o={};return this.keys.forEach(function(e){var t,s=j.rakuenStore.state.topic[e]||j.rakuenStore.state.cloudTopic[e];null!=s&&s.title&&"undefined"!==(null==s?void 0:s.title)&&((t=(s.time||"").split(" ")[0])in o||(o[t]=r.length,r.push({title:t,data:[]})),r[o[t]].data.push(Object.assign({topicId:e},s)))}),r}},{key:"isFavor",value:function(e){return(0,y.computed)(function(){return j.rakuenStore.favorV2(e)}).get()}},{key:"list",get:function(){var t=this.state.type,s=j.rakuenStore.state.favorV2,r=[];return Object.keys(s).map(function(e){s[e]&&r.push(e)}),r.filter(function(e){return"条目"===t?e.includes("subject/"):"章节"===t?e.includes("ep/"):"人物"===t?e.includes("crt/")||e.includes("prsn/"):e.includes("group/")}).sort(function(e,t){return(0,_.desc)(parseInt(null==(e=e.split("/"))?void 0:e[1]),parseInt(null==(e=t.split("/"))?void 0:e[1]))})}},{key:"topic",value:function(e){var t=this;return(0,y.computed)(function(){return t.state.topics["favor_"+e.replace("/","_")]||null}).get()}}]),(0,f.default)((s=T).prototype,"isLogin",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"isLogin"),s.prototype),(0,f.default)(s.prototype,"keys",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"keys"),s.prototype),(0,f.default)(s.prototype,"sections",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"sections"),s.prototype),(0,f.default)(s.prototype,"list",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"list"),s.prototype),s);function T(){var o;(0,d.default)(this,T);for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return o=O.call.apply(O,[this].concat(s)),(0,m.default)((0,l.default)(o),"state",(0,y.observable)(v.STATE)),(0,m.default)((0,l.default)(o),"init",(0,i.default)(n.mark(function e(){var t;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getStorage(v.NAMESPACE);case 2:return t=e.sent,e.next=5,j.rakuenStore.init("topic");case 5:return e.next=7,j.rakuenStore.init("cloudTopic");case 7:return o.setState(Object.assign({},t,{_loaded:!0})),j.rakuenStore.getFavor(),e.abrupt("return",t);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(o),"toggleFavor",function(e){var t=o.state.favor;if(e){if("收藏"===e&&t)return;if("缓存"===e&&!t)return}e=!t;(0,h.t)("本地帖子.切换收藏",{favor:e}),o.setState({favor:e}),o.setStorage(v.NAMESPACE)}),(0,m.default)((0,l.default)(o),"onPage",(t=(0,i.default)(n.mark(function e(t){var s,r;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return",!0);case 2:if(s=[],t.forEach(function(e){e="favor_"+e.replace("/","_");s.push(e)}),s.length){e.next=6;break}return e.abrupt("return",!0);case 6:return e.next=8,(0,b.gets)(s);case 8:r=e.sent,o.setState({topics:r}),o.setStorage(v.NAMESPACE);case 11:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,m.default)((0,l.default)(o),"onChange",function(e){o.setState({type:e}),o.setStorage(v.NAMESPACE)}),(0,m.default)((0,l.default)(o),"sync",function(){o.isLogin&&j.userStore.userInfo.id?j.rakuenStore.uploadFavorTopic():(0,_.info)("云同步需先"+g.default.login())}),o}},"./src/screens/rakuen/mine/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;var s=s("./src/constants/index.ts"),r=(t.NAMESPACE="ScreenMine",t.EXCLUDE_STATE={ipt:"",filter:"",isFocused:!0});t.STATE=Object.assign({type:s.STORYBOOK?"all":"mine"},r,{_loaded:!1})},"./src/screens/rakuen/mine/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r,o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/mine/extra/styles.ts"),d=s("./node_modules/react/jsx-runtime.js"),a=["我的","全部"];t.default=(0,o.ob)(function(e){(e=e.$)&&(r=e.state.type);var t=void 0===(null==e?void 0:e.state.type)?r:null==e?void 0:e.state.type;return(0,d.jsx)(n.SegmentedControl,{style:i.styles.segment,size:11,values:a,selectedIndex:"mine"===t?0:1,onValueChange:null==e?void 0:e.onChange},t)});try{extra.displayName="extra",extra.__docgenInfo={description:"",displayName:"extra",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenMine"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/mine/extra/index.tsx#extra"]={docgenInfo:extra.__docgenInfo,name:"extra",path:"src/screens/rakuen/mine/extra/index.tsx#extra"})}catch(e){}},"./src/screens/rakuen/mine/extra/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({segment:{width:s._.r(96),height:s._.r(28),marginRight:s._.sm}})},"./src/screens/rakuen/mine/filter/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/react/index.js")),p=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),m=s("./src/components/index.ts"),r=s("./src/utils/decorators/index.ts"),f=s("./src/screens/rakuen/mine/filter/styles.ts"),y=s("./node_modules/react/jsx-runtime.js");function j(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=c.default.Component,(0,d.default)(x,s),_=j(x),(0,n.default)(x,[{key:"render",value:function(){var e=this.context.$,t=e.state.ipt,s=this.state.focus;return(0,y.jsxs)(p.default,{style:this.styles.filter,children:[(0,y.jsx)(m.Input,{style:this.styles.input,clearButtonMode:"never",value:t,returnKeyType:"search",returnKeyLabel:"搜索",onFocus:this.onFocus,onBlur:this.onBlur,onChangeText:e.onFilterChange,onSubmitEditing:e.onSubmitEditing}),!s&&!t&&(0,y.jsx)(m.Flex,{style:this.styles.icon,justify:"center",pointerEvents:"none",children:(0,y.jsx)(m.Iconfont,{name:"md-search",size:18})})]})}},{key:"styles",get:function(){return(0,f.memoStyles)()}}]);var _,c=x;function x(){var e;(0,o.default)(this,x);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=_.call.apply(_,[this].concat(s)),(0,u.default)((0,i.default)(e),"state",{focus:!1}),(0,u.default)((0,i.default)(e),"onFocus",function(){e.setState({focus:!0})}),(0,u.default)((0,i.default)(e),"onBlur",function(){e.setState({focus:!1})}),e}t.default=(0,r.obc)(c);try{filter.displayName="filter",filter.__docgenInfo={description:"",displayName:"filter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/mine/filter/index.tsx#filter"]={docgenInfo:filter.__docgenInfo,name:"filter",path:"src/screens/rakuen/mine/filter/index.tsx#filter"})}catch(e){}},"./src/screens/rakuen/mine/filter/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{filter:{height:64,paddingVertical:12,paddingHorizontal:r._.wind,marginBottom:r._._wind,backgroundColor:r._.colorBg},input:Object.assign({},r._.fontSize(16),{fontWeight:"800",textAlign:"center",backgroundColor:r._.select(r._.colorBorder,r._.colorPlain),borderRadius:40}),icon:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0}}})},"./src/screens/rakuen/mine/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/rakuen/mine/extra/index.tsx")),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=t.$;return(0,d.jsx)(o.Header,{title:"小组",hm:["group/mine","Mine"],headerRight:function(){return(0,d.jsx)(i.default,{$:s})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/mine/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/rakuen/mine/header/index.tsx#header"})}catch(e){}},"./src/screens/rakuen/mine/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/rakuen/mine/header/index.tsx")),a=r(s("./src/screens/rakuen/mine/list/index.tsx")),l=r(s("./src/screens/rakuen/mine/list-all/index.tsx")),r=r(s("./src/screens/rakuen/mine/store.ts")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(r.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){var e=s.state.type;return(0,u.jsxs)(o.Component,{id:"screen-mine",children:[(0,u.jsx)(d.default,{}),(0,u.jsx)(o.Page,{children:"mine"===e?(0,u.jsx)(a.default,{}):(0,u.jsx)(l.default,{})})]})})});try{mine.displayName="mine",mine.__docgenInfo={description:"",displayName:"mine",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/mine/index.tsx#mine"]={docgenInfo:mine.__docgenInfo,name:"mine",path:"src/screens/rakuen/mine/index.tsx#mine"})}catch(e){}},"./src/screens/rakuen/mine/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),p=s("./src/utils/fetch/index.ts"),m=s("./src/utils/app/ds.ts"),f=s("./src/constants/index.ts"),y=s("./src/screens/rakuen/mine/item/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=e.id,r=e.cover,o=e.name,e=e.num,n=t.navigation,t=(0,y.memoStyles)(),i=(d=c.systemStore.setting).cdn,d=d.cdnOrigin;return i&&"magma"===d&&"string"==typeof r&&r.includes(m.HOST_IMAGE)&&(r=(0,f.CDN_OSS_MAGMA_PIC)(r)),(0,j.jsx)(a.default,{style:t.container,children:(0,j.jsx)(l.Touchable,{animate:!0,scale:.92,onPress:function(){(0,p.t)("我的小组.跳转",{groupId:s}),n.push("Group",{groupId:s})},children:(0,j.jsxs)(l.Flex,{align:"start",children:[(0,j.jsx)(u.Cover,{size:t.body.height,src:r,border:!0,radius:!0}),(0,j.jsx)(l.Flex.Item,{style:c._.ml.sm,children:(0,j.jsxs)(l.Flex,{style:t.body,direction:"column",align:"start",justify:"center",children:[(0,j.jsx)(l.Text,{size:11,numberOfLines:2,bold:!0,children:o}),(0,j.jsxs)(l.Text,{style:c._.mt.xs,type:"sub",size:10,children:[(0,j.jsx)(l.Text,{type:"sub",size:10,bold:!0,children:e})," ","位成员"]})]})})]})})})})},"./src/screens/rakuen/mine/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{width:"50%",paddingVertical:r._.sm+4,paddingHorizontal:r._.sm,borderRadius:r._.radiusSm,overflow:"hidden"},body:{height:r._.r(40)}}})},"./src/screens/rakuen/mine/list-all/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=r(s("./src/assets/json/group.json")),l=r(s("./src/screens/rakuen/mine/filter/index.tsx")),u=r(s("./src/screens/rakuen/mine/item/index.tsx")),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)(function(e,t){var s=t.$.state.filter;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.default,{}),(0,c.jsx)(o.PaginationList,{style:n._.mt._md,contentContainerStyle:n._.container.outer,data:s?a.default.filter(function(e){return e.t.toLowerCase().includes(s.toLowerCase())}):a.default,numColumns:2,renderItem:p})]})});var p=function(e){var t,s,e=e.item;return(0,c.jsx)(u.default,{id:e.i||e.u,name:e.t,cover:(t=e.i)?(s=String(Math.floor(t/100)),"https://lain.bgm.tv/pic/icon/m/000/00/"+(0,i.pad)(s)+"/"+t+".jpg"):"",num:e.n})};try{listall.displayName="listall",listall.__docgenInfo={description:"",displayName:"listall",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/mine/list-all/index.tsx#listall"]={docgenInfo:listall.__docgenInfo,name:"listall",path:"src/screens/rakuen/mine/list-all/index.tsx#listall"})}catch(e){}},"./src/screens/rakuen/mine/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=r(s("./src/screens/rakuen/mine/item/index.tsx")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){t=t.$;return(0,a.jsx)(o.ScrollView,{contentContainerStyle:n._.container.outer,scrollToTop:!0,children:(0,a.jsx)(o.Flex,{style:n._.mt._sm,wrap:"wrap",children:t.mine.list.map(function(e){return(0,a.jsx)(d.default,Object.assign({},e),e.id)})})})});try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/mine/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/rakuen/mine/list/index.tsx#list"})}catch(e){}},"./src/screens/rakuen/mine/store.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),r=r(s("./src/utils/store/index.ts")),_=s("./src/screens/rakuen/mine/ds.ts");function x(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var b,h="ScreenMine",g={ipt:"",filter:"",isFocused:!0};t.default=(s=r.default,(0,l.default)(v,s),b=x(v),(0,d.default)(v,[{key:"mine",get:function(){return Object.assign({},y.rakuenStore.mine,{list:y.rakuenStore.mine.list.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return e.num})})})}}]),(0,m.default)((t=v).prototype,"mine",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"mine"),t.prototype),t);function v(){var s;(0,i.default)(this,v);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s=b.call.apply(b,[this].concat(t)),(0,p.default)((0,a.default)(s),"state",(0,f.observable)(_.STATE)),(0,p.default)((0,a.default)(s),"init",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getStorage(h);case 2:return t=e.sent,s.setState(Object.assign({},t,g,{_loaded:!0})),e.abrupt("return",y.rakuenStore.fetchMine());case 5:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(s),"onChange",function(e){if(e){var t=s.state.type;if("我的"===e&&"mine"===t)return;if("全部"===e&&"all"===t)return}s.setState({type:"全部"===e?"all":"mine"}),s.setStorage(h)}),(0,p.default)((0,a.default)(s),"onFilterChange",function(e){e=e.trim();e?s.setState({ipt:e}):s.setState({ipt:e,filter:""})}),(0,p.default)((0,a.default)(s),"onSubmitEditing",function(){var e=s.state.ipt;e&&e.length&&s.setState({filter:e})}),s}},"./src/screens/rakuen/notify/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_PAGE=t.TABS=t.STATE=void 0;s=s("./src/stores/index.ts");t.STATE={visibleBottom:s._.window.height,page:0,_loaded:!1},t.TABS=[{key:"notify",title:"提醒"},{key:"pmIn",title:"收件箱"},{key:"pmOut",title:"已发送"}],t.TYPE_PAGE={pm:1,out:2}},"./src/screens/rakuen/notify/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,a.jsx)(o.Header,{title:"电波提醒",hm:["notify/all","Notify"],headerRight:function(){return(0,a.jsx)(o.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("电波提醒.右上角菜单",{key:e}),(0,n.open)((0,d.HTML_NOTIFY)()))},children:(0,a.jsx)(o.Heatmap,{id:"电波提醒.右上角菜单"})})}})})},"./src/screens/rakuen/notify/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Heatmap,{right:86,bottom:n._.bottom+20,id:"电波提醒.跳转",to:"Topic",alias:"帖子",transparent:!0}),(0,i.jsx)(o.Heatmap,{right:86,bottom:n._.bottom-13,id:"电波提醒.跳转",to:"PM",transparent:!0}),(0,i.jsx)(o.Heatmap,{right:260,bottom:n._.bottom-13,id:"电波提醒.跳转",to:"Zone",alias:"空间",transparent:!0}),(0,i.jsx)(o.Heatmap,{right:86,bottom:n._.bottom-46,id:"电波提醒.跳转",to:"Blog",alias:"日志",transparent:!0})]})})},"./src/screens/rakuen/notify/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),l=o(s("./src/screens/rakuen/notify/header/index.tsx")),u=o(s("./src/screens/rakuen/notify/tabs/index.tsx")),c=o(s("./src/screens/rakuen/notify/heatmaps/index.tsx")),o=o(s("./src/screens/rakuen/notify/store.ts")),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.ic)(o.default,function(e,t){var s=t.$;return(0,a.useRunAfter)((0,n.default)(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.init();case 2:s.doClearNotify();case 3:case"end":return e.stop()}},e)}))),(0,a.useObserver)(function(){return(0,p.jsxs)(i.Component,{id:"screen-notify",children:[(0,p.jsx)(l.default,{}),(0,p.jsx)(i.Page,{loaded:s.state._loaded,children:(0,p.jsx)(u.default,{})}),(0,p.jsx)(c.default,{})]})})});try{notify.displayName="notify",notify.__docgenInfo={description:"",displayName:"notify",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/index.tsx#notify"]={docgenInfo:notify.__docgenInfo,name:"notify",path:"src/screens/rakuen/notify/index.tsx#notify"})}catch(e){}},"./src/screens/rakuen/notify/item-notify/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/utils/decorators/index.ts"),n=s("./node_modules/react/jsx-runtime.js"),i={id:"电波提醒.跳转"},d=0;t.default=(0,r.obc)(function(e,t){var s=e.item,e=e.index,r=t.$,t=t.navigation;return(r=r.notify.list[e+1])&&r.userId===s.userId&&r.title===s.title&&r.message===s.message&&r.message2===s.message2?(d+=1,null):(r=d,(d=0,n.jsx)(o.ItemNotify,Object.assign({navigation:t,index:e-d,event:i},s,{repeat:r})))})},"./src/screens/rakuen/notify/item-pm/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js"),d={id:"电波提醒.跳转"};t.default=(0,r.obc)(function(e,t){var s=e.id,r=e.item,e=e.index,o=t.$,t=t.navigation;return(0,i.jsx)(n.ItemPM,Object.assign({navigation:t,event:d,index:e},r,{onRefresh:function(){return o.fetchPM(!0,s)}}))})},"./src/screens/rakuen/notify/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=r(s("./src/screens/rakuen/notify/item-notify/index.tsx")),a=r(s("./src/screens/rakuen/notify/item-pm/index.tsx")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.id,r=t.$,e={keyExtractor:u,contentContainerStyle:n._.container.bottom,scrollEventThrottle:4,onScroll:r.onScroll};return"notify"===s?(0,l.jsx)(o.ListView,Object.assign({},e,{data:r.notify,renderItem:function(e){var t=e.item,e=e.index;return(0,l.jsx)(d.default,{item:t,index:e})},onHeaderRefresh:r.fetchNotify})):(0,l.jsx)(o.ListView,Object.assign({},e,{data:r[s],renderItem:function(e){var t=e.item,e=e.index;return(0,l.jsx)(a.default,{item:t,id:s,index:e})},onHeaderRefresh:function(){return r.fetchPM(!0,s)},onFooterRefresh:function(){return r.fetchPM(!1,s)}}))});function u(e,t){return String(t)}},"./src/screens/rakuen/notify/store.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),p=s("./node_modules/mobx/dist/mobx.esm.js"),m=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),r=r(s("./src/utils/store/index.ts")),y=s("./src/utils/fetch/index.ts"),j=s("./src/screens/rakuen/notify/ds.ts");function _(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var x;t.default=(s=r.default,(0,d.default)(b,s),x=_(b),(0,n.default)(b,[{key:"notify",get:function(){return m.rakuenStore.notify}},{key:"pmIn",get:function(){return m.userStore.pmIn}},{key:"pmOut",get:function(){return m.userStore.pmOut}}]),(0,c.default)((t=b).prototype,"notify",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"notify"),t.prototype),(0,c.default)(t.prototype,"pmIn",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"pmIn"),t.prototype),(0,c.default)(t.prototype,"pmOut",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"pmOut"),t.prototype),t);function b(){var t;(0,o.default)(this,b);for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=x.call.apply(x,[this].concat(s)),(0,u.default)((0,i.default)(t),"params",void 0),(0,u.default)((0,i.default)(t),"state",(0,p.observable)(j.STATE)),(0,u.default)((0,i.default)(t),"init",function(){var e=t.params.type;return t.setState({page:j.TYPE_PAGE[e]||0,_loaded:!0}),(0,y.queue)([function(){return t.fetchNotify()},function(){return t.fetchPM(!0,"pmIn")},function(){return t.fetchPM(!0,"pmOut")}])}),(0,u.default)((0,i.default)(t),"fetchNotify",function(){return m.rakuenStore.fetchNotify(!0)}),(0,u.default)((0,i.default)(t),"fetchPM",function(){return m.userStore.fetchPM(0<arguments.length&&void 0!==arguments[0]&&arguments[0],1<arguments.length?arguments[1]:void 0)}),(0,u.default)((0,i.default)(t),"onTabsChange",function(e){t.setState({page:e})}),(0,u.default)((0,i.default)(t),"onScroll",f.updateVisibleBottom.bind((0,i.default)(t))),(0,u.default)((0,i.default)(t),"doClearNotify",function(){(0,y.t)("电波提醒.清除"),m.rakuenStore.doClearNotify()}),t}},"./src/screens/rakuen/notify/tabs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=r(s("./src/screens/rakuen/notify/list/index.tsx")),a=s("./src/screens/rakuen/notify/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=(t=t.$).state.page;return(0,l.jsx)(o.TabsV2,{style:n._.mt._sm,routes:a.TABS,page:s,backgroundColor:n._.colorPlain,renderItem:u,onChange:t.onTabsChange},n._.orientation)});function u(e){return(0,l.jsx)(d.default,{id:e.key})}try{tabs.displayName="tabs",tabs.__docgenInfo={description:"",displayName:"tabs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/notify/tabs/index.tsx#tabs"]={docgenInfo:tabs.__docgenInfo,name:"tabs",path:"src/screens/rakuen/notify/tabs/index.tsx#tabs"})}catch(e){}},"./src/screens/rakuen/reviews/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=void 0;t.NAMESPACE="ScreenBoard",t.STATE={history:[],ota:{},_loaded:!1}},"./src/screens/rakuen/reviews/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$;return(0,i.jsx)(o.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的影评":"影评",alias:"影评",hm:[s.url,"Reviews"],headerRight:function(){return(0,i.jsx)(o.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&(0,n.open)(s.url)}})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/reviews/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/rakuen/reviews/header/index.tsx#header"})}catch(e){}},"./src/screens/rakuen/reviews/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/utils/hooks/index.ts"),a=r(s("./src/screens/rakuen/reviews/header/index.tsx")),l=r(s("./src/screens/rakuen/reviews/list/index.tsx")),r=r(s("./src/screens/rakuen/reviews/store.ts")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(r.default,function(e,t){var s=t.$;return(0,d.useRunAfter)(function(){s.init()}),(0,d.useObserver)(function(){return(0,u.jsxs)(o.Component,{id:"screen-reviews",children:[(0,u.jsx)(a.default,{}),(0,u.jsx)(o.Page,{loaded:s.reviews._loaded,children:(0,u.jsx)(o.ScrollView,{contentContainerStyle:n._.container.bottom,scrollToTop:!0,children:(0,u.jsx)(l.default,{})})})]})})});try{reviews.displayName="reviews",reviews.__docgenInfo={description:"",displayName:"reviews",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/reviews/index.tsx#reviews"]={docgenInfo:reviews.__docgenInfo,name:"reviews",path:"src/screens/rakuen/reviews/index.tsx#reviews"})}catch(e){}},"./src/screens/rakuen/reviews/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),p=s("./src/screens/_/index.ts"),m=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),o=s("./src/screens/rakuen/reviews/list/styles.ts"),y=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$,a=t.navigation,l=(0,o.memoStyles)(),s=(t=s.reviews).list;return t._loaded&&!s.length?(0,y.jsxs)(c.Flex,{style:l.empty,direction:"column",justify:"center",children:[(0,y.jsx)(c.Mesume,{}),(0,y.jsx)(c.Text,{style:m._.mt.sm,type:"sub",children:"好像什么都没有"})]}):(0,y.jsx)(c.ScrollView,{contentContainerStyle:m._.container.bottom,scrollToTop:!0,children:s.map(function(e,t){var s=e.id,r=e.title,o=e.replies,n=e.time,i=e.avatar,d=e.userId,e=e.userName;return(0,y.jsx)(c.Touchable,{style:l.item,animate:!0,onPress:function(){a.push("Blog",{blogId:s})},children:(0,y.jsxs)(c.Flex,{style:l.wrap,align:"start",children:[(0,y.jsx)(u.default,{style:m._.mr.sm,children:(0,y.jsx)(p.Avatar,{navigation:a,userId:d,name:e,src:i})}),(0,y.jsxs)(c.Flex.Item,{children:[(0,y.jsxs)(c.Text,{size:15,children:[(0,f.HTMLDecode)(r),"+0"!==o&&(0,y.jsxs)(c.Text,{type:"main",size:12,lineHeight:15,bold:!0,children:[" ",o]})]}),(0,y.jsxs)(c.Text,{style:m._.mt.xs,type:"sub",size:12,children:[(0,f.correctAgo)(n)," /"," ",(0,y.jsx)(c.Text,{size:12,bold:!0,children:e})]}),!t&&(0,y.jsx)(c.Heatmap,{id:"讨论版.跳转"})]})]})},s)})})});try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/reviews/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/rakuen/reviews/list/index.tsx#list"})}catch(e){}},"./src/screens/rakuen/reviews/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{item:{paddingLeft:r._.wind-r._._wind+r._.md},wrap:{paddingVertical:r._.md,paddingRight:r._.wind-r._._wind+r._.md},border:{borderTopColor:r._.colorBorder,borderTopWidth:r._.hairlineWidth},readed:{backgroundColor:r._.colorBg},empty:{minHeight:240}}})},"./src/screens/rakuen/reviews/store.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),r=r(s("./src/utils/store/index.ts")),_=s("./src/utils/kv/index.ts"),x=s("./src/constants/index.ts"),b=s("./src/screens/rakuen/reviews/ds.ts");function h(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var g,v=[];t.default=(s=r.default,(0,l.default)(S,s),g=h(S),(0,d.default)(S,[{key:"subjectId",get:function(){var e=this.params.subjectId;return void 0===e?"":e}},{key:"key",get:function(){return b.NAMESPACE+"|"+this.subjectId}},{key:"reviews",get:function(){var e=y.rakuenStore.reviews(this.subjectId);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):x.LIST_EMPTY}},{key:"url",get:function(){return(0,x.HTML_REVIEWS)(this.subjectId)}},{key:"readed",value:function(e){return(0,f.computed)(function(){return y.rakuenStore.readed(e)}).get()}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){return"reviews_"+this.subjectId}}]),(0,m.default)((t=S).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,m.default)(t.prototype,"key",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"key"),t.prototype),(0,m.default)(t.prototype,"reviews",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"reviews"),t.prototype),(0,m.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,m.default)(t.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,m.default)(t.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function S(){var r;(0,i.default)(this,S);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r=g.call.apply(g,[this].concat(t)),(0,p.default)((0,a.default)(r),"params",void 0),(0,p.default)((0,a.default)(r),"state",(0,f.observable)(b.STATE)),(0,p.default)((0,a.default)(r),"init",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(r.key);case 2:return t=e.sent,r.setState(Object.assign({},t,{ota:{},_loaded:!0})),e.abrupt("return",r.fetchReviews());case 5:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"fetchReviews",(0,n.default)(o.mark(function e(){var t,s;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.fetchThirdParty(),e.next=3,y.rakuenStore.fetchReviews({subjectId:r.subjectId});case 3:return(t=e.sent).list.length&&r.thirdPartyKey in r.state.ota&&(s=(null==(s=r.ota)?void 0:s.ts)||0,604800<=(0,j.getTimestamp)()-s)&&r.updateThirdParty(),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"fetchThirdParty",(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ota||r.reviews._loaded){e.next=8;break}return e.next=3,(0,_.get)(r.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return r.setState({ota:(0,p.default)({},r.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:r.setState({ota:(0,p.default)({},r.thirdPartyKey,Object.assign({},t,{_loaded:(0,j.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"updateThirdParty",(0,n.default)(o.mark(function e(){return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.includes(r.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,_.update)(r.thirdPartyKey,{list:r.reviews.list}),v.push(r.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"onItemPress",function(e,t){return y.rakuenStore.updateTopicReaded(e,t)}),r}},"./src/screens/rakuen/setting/blocks/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.string.trim.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=o?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js")),c=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),y=s("./src/utils/fetch/index.ts"),j=s("./src/utils/hooks/index.ts"),_=r(s("./src/screens/user/setting/component/block/index.tsx")),x=r(s("./src/screens/user/setting/component/tip/index.tsx")),b=r(s("./src/screens/rakuen/setting/history/index.tsx")),h=s("./src/screens/rakuen/setting/blocks/styles.ts"),g=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}function o(e){var o=e.navigation,e=e.onNavigate,n=void 0===e?void 0:e,e=(0,u.useState)(""),e=(0,l.default)(e,2),i=e[0],t=e[1],d=(0,u.useCallback)(function(e){t(e.trim())},[]),a=(0,u.useCallback)(function(){i.length?(m.rakuenStore.addBlockKeyword(i),t("")):(0,f.info)("不能为空")},[i]);return(0,j.useObserver)(function(){var e=(0,h.memoStyles)(),t=m.rakuenStore.setting,s=t.blockUserIds,r=t.blockKeywords,t=t.blockGroups;return(0,g.jsxs)(c.default,{style:e.container,children:[(0,g.jsxs)(_.default,{children:[(0,g.jsx)(x.default,{children:"屏蔽用户（对条目评论、时间胶囊、超展开相关信息生效）"}),(0,g.jsx)(b.default,{navigation:o,data:s,showAvatar:!0,onNavigate:n,onDelete:function(e){(0,y.t)("超展开设置.取消用户",{item:e}),m.rakuenStore.deleteBlockUser(e)}})]}),(0,g.jsxs)(_.default,{children:[(0,g.jsx)(x.default,{children:"屏蔽关键字（对超展开标题、帖子正文内容生效）"}),(0,g.jsx)(b.default,{data:r,onDelete:function(e){(0,y.t)("超展开设置.取消关键字",{item:e}),m.rakuenStore.deleteBlockKeyword(e)}}),(0,g.jsxs)(p.Flex,{style:e.section,children:[(0,g.jsx)(p.Flex.Item,{children:(0,g.jsx)(p.Input,{style:e.input,value:i,placeholder:"输入关键字",returnKeyType:"search",returnKeyLabel:"添加",onChangeText:d,onSubmitEditing:a})}),(0,g.jsx)(p.Touchable,{style:m._.ml.md,onPress:a,children:(0,g.jsx)(p.Flex,{style:e.icon,justify:"center",children:(0,g.jsx)(p.Iconfont,{name:"md-add",size:24})})})]})]}),(0,g.jsxs)(_.default,{children:[(0,g.jsx)(x.default,{children:"屏蔽小组 / 条目（对帖子所属小组名生效）"}),(0,g.jsx)(b.default,{data:t,onDelete:function(e){(0,y.t)("超展开设置.取消关键字",{item:e}),m.rakuenStore.deleteBlockGroup(e)}})]})]})})}t.default=o;try{o.displayName="Blocks",o.__docgenInfo={description:"",displayName:"Blocks",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"any"}},onNavigate:{defaultValue:{value:"undefined"},description:"",name:"onNavigate",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/setting/blocks/index.tsx#Blocks"]={docgenInfo:o.__docgenInfo,name:"Blocks",path:"src/screens/rakuen/setting/blocks/index.tsx#Blocks"})}catch(e){}},"./src/screens/rakuen/setting/blocks/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingBottom:.32*r._.window.height},icon:{width:36,height:36},section:{paddingVertical:r._.sm,paddingRight:r._.sm,paddingLeft:r._._wind},input:{height:44,paddingVertical:0}}})},"./src/screens/rakuen/setting/history/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),c=(r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),p=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),o=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),y=s("./src/constants/index.ts"),j=s("./src/screens/rakuen/setting/history/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var n=e.navigation,t=e.style,s=void 0===(s=e.data)?[]:s,r=e.showAvatar,i=void 0!==r&&r,d=e.onNavigate,a=void 0===(r=e.onDelete)?function(){}:r,l=(0,j.memoStyles)();return s.length?(0,_.jsx)(c.default,{style:(0,o.stl)(l.container,t),children:s.map(function(e){var t="";try{var s=e.replace("@undefined","").split("@"),r=(0,u.default)(s,2)[1];r&&(t=r)}catch(e){}function o(){n&&("function"==typeof d?d("Zone",{userId:t}):n.push("Zone",{userId:t}))}s=0;return t&&(s=f.rakuenStore.blockedUsersTrack(t)),(0,_.jsx)(c.default,{style:l.item,children:(0,_.jsxs)(p.Flex,{style:l.content,children:[i&&!!t&&(0,_.jsx)(c.default,{style:f._.mr.sm,children:(0,_.jsx)(m.Avatar,{src:(0,y.API_AVATAR)(t),size:28,onPress:o})}),(0,_.jsxs)(p.Flex.Item,{children:[(0,_.jsx)(p.Text,{size:s?13:14,bold:!0,onPress:o,children:e.replace("@undefined","")}),!!s&&(0,_.jsxs)(p.Text,{style:f._.mt.xxs,size:10,type:"sub",bold:!0,children:["已屏蔽 ",s," 次"]})]}),(0,_.jsx)(p.Touchable,{style:[l.touch,f._.ml.md],onPress:function(){return a(e)},children:(0,_.jsx)(p.Flex,{style:l.icon,justify:"center",children:(0,_.jsx)(p.Iconfont,{name:"md-close",size:20})})})]})},e)})}):(0,_.jsx)(c.default,{style:(0,o.stl)(l.container,t),children:(0,_.jsx)(c.default,{style:l.item,children:(0,_.jsx)(p.Flex,{style:l.content,children:(0,_.jsx)(p.Text,{type:"title",size:15,bold:!0,children:"空"})})})})});try{history.displayName="history",history.__docgenInfo={description:"",displayName:"history",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/setting/history/index.tsx#history"]={docgenInfo:history.__docgenInfo,name:"history",path:"src/screens/rakuen/setting/history/index.tsx#history"})}catch(e){}},"./src/screens/rakuen/setting/history/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingLeft:r._._wind,paddingBottom:r._.sm},item:{paddingRight:r._.sm},content:{marginTop:r._.sm},touch:{borderRadius:20,overflow:"hidden"},icon:{width:36,height:36}}})},"./src/screens/rakuen/setting/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=o?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js"))),n=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/hooks/index.ts"),l=r(s("./src/screens/rakuen/setting/page/index.tsx")),u=s("./node_modules/react/jsx-runtime.js");function c(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(c=function(e){return e?s:t})(e))}t.default=function(e){var t=e.navigation,s=(0,a.useIsFocused)();return(0,o.useEffect)(function(){s||d.uiStore.closePopableSubject()},[s]),(0,a.useObserver)(function(){return(0,u.jsxs)(n.Component,{id:"screen-rakuen-setting",children:[(0,u.jsx)(n.Header,{title:"超展开设置",hm:["rakuen/settings","RakuenSetting"]}),(0,u.jsx)(i.TapListener,{children:(0,u.jsx)(l.default,{navigation:t})})]})})};try{setting.displayName="setting",setting.__docgenInfo={description:"",displayName:"setting",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/setting/index.tsx#setting"]={docgenInfo:setting.__docgenInfo,name:"setting",path:"src/screens/rakuen/setting/index.tsx#setting"})}catch(e){}},"./src/screens/rakuen/setting/page/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.find-index.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/react/index.js")),p=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),y=s("./src/utils/decorators/index.ts"),j=s("./src/utils/fetch/index.ts"),_=s("./src/constants/index.ts"),x=r(s("./src/screens/user/setting/component/block/index.tsx")),b=r(s("./src/screens/user/setting/component/tip/index.tsx")),h=r(s("./src/screens/rakuen/setting/blocks/index.tsx")),g=s("./src/screens/rakuen/setting/page/utils.ts"),v=s("./src/screens/rakuen/setting/page/styles.ts"),S=s("./node_modules/react/jsx-runtime.js");function O(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var T,k=_.RAKUEN_SCROLL_DIRECTION.map(function(e){return e.label}),P=_.RAKUEN_SUB_EXPAND.map(function(e){return e.label}),s=(r=c.default.Component,(0,d.default)(R,r),T=O(R),(0,n.default)(R,[{key:"renderLikes",value:function(){var e=f.rakuenStore.setting.likes;return(0,S.jsxs)(x.default,{children:[(0,S.jsx)(b.default,{children:"贴贴"}),(0,S.jsx)(m.ItemSetting,{hd:"贴贴模块",information:"近期新增的帖子回复上面贴表情的功能\n长按数字按钮展开贴过的用户列表\n因在网页版随处可见，不建议关闭",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:e,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"贴贴模块",checked:!e}),f.rakuenStore.switchSetting("likes")}}),thumb:(0,g.getYuqueThumbs)(["0/2023/png/386799/1684389118526-fa7066b5-5c37-4280-abe0-0325e05aa4c7.png","0/2023/png/386799/1688332532626-a8958a19-e023-4cf8-bba6-4ca94f71752c.png"]),withoutFeedback:!0})]})}},{key:"renderSlider",value:function(){var e=f.rakuenStore.setting,t=e.switchSlider,s=e.sliderAnimated,r=e.scrollDirection;return(0,S.jsxs)(x.default,{children:[(0,S.jsx)(b.default,{children:"楼层跳转"}),(0,S.jsx)(m.ItemSetting,{hd:"跳转滚动动画",information:"频繁跳动可能会产生视觉疲劳，若您经常使用跳转功能，建议关闭",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:s,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"楼层跳转滚动动画",checked:!s}),f.rakuenStore.switchSetting("sliderAnimated")}}),withoutFeedback:!0}),(0,S.jsx)(m.ItemSetting,{hd:"交换跳转按钮",information:"为了方便左手持机用户，启用后左侧按钮为下一楼，右侧按钮为上一楼",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:t,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"交换楼层跳转按钮",checked:!t}),f.rakuenStore.switchSetting("switchSlider")}}),thumb:(0,g.getYuqueThumbs)(["0/2023/png/386799/1684388975121-fbe54014-9b5b-4b08-94e4-f7ad9a463e71.png","0/2023/png/386799/1684388990177-37b68af2-7d66-4e0b-827d-3c390410a943.png"]),withoutFeedback:!0}),(0,S.jsx)(m.ItemSetting,{hd:"楼层直达条",ft:(0,S.jsx)(p.SegmentedControl,{style:this.styles.segmentedControl,backgroundColor:f._.select(f._.colorBg,f._.colorPlain),size:12,values:k,selectedIndex:_.RAKUEN_SCROLL_DIRECTION.findIndex(function(e){return e.value===r}),onValueChange:function(e){(0,j.t)("超展开设置.切换",{title:"楼层导航条方向",value:e}),f.rakuenStore.setScrollDirection(_.MODEL_RAKUEN_SCROLL_DIRECTION.getValue(e))}}),thumb:(0,g.getYuqueThumbs)(["0/2022/png/386799/1661159480188-a1279dab-0af3-4985-ba54-cda3581a5cbf.png"])})]})}},{key:"renderMedia",value:function(){var e=f.rakuenStore.setting,t=e.acSearch,s=e.acSearchPopable,r=e.matchLink;return(0,S.jsxs)(x.default,{children:[(0,S.jsx)(b.default,{children:"媒体信息块"}),(0,S.jsx)(m.ItemSetting,{hd:"楼层链接显示成信息块",information:"若楼层出现特定页面链接，使用不同的 UI 代替",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:r,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"显示信息块",checked:!r}),f.rakuenStore.switchSetting("matchLink")}}),withoutFeedback:!0,thumb:(0,g.getYuqueThumbs)(["0/2022/png/386799/1661155814563-74ea244f-c48c-49d2-8fa0-be0bc220724e.png","0/2022/png/386799/1661155854261-970ecf62-6eaa-4b0f-b280-347233ada8f1.png"])}),(0,S.jsx)(m.ItemSetting,{hd:"楼层内容猜测条目",information:"使用条目词库对楼层文字进行猜测匹配，若匹配成功文字下方显示下划线，点击直接去到条目页面",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:t,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"猜测条目",checked:!t}),f.rakuenStore.switchSetting("acSearch")}}),withoutFeedback:!0,thumb:(0,g.getYuqueThumbs)(["0/2022/png/386799/1661156697962-47872ab9-dd71-40e7-84c6-842d014fa85e.png","0/2022/png/386799/1661156404852-5419bd25-408e-49b3-9e0a-57b480b54ecf.png"])}),(0,S.jsx)(m.ItemSetting,{hd:"猜测条目先显示缩略信息",information:"若猜测命中关键字，为了不打断阅读，会在图层上方先显示缩略信息，再次点击才会进入条目页面",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:s,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"猜测条目",checked:!t}),f.rakuenStore.switchSetting("acSearchPopable")}}),withoutFeedback:!0,thumb:(0,g.getYuqueThumbs)(["0/2022/png/386799/1661157003238-c24ee52e-85ba-43b1-81fb-71e2596c6562.png","0/2022/png/386799/1661157009090-307ff23e-1734-4914-8c8e-1537faa7e9f9.png"])}),(0,S.jsxs)(p.Flex,{style:this.styles.acSearchPopable,children:[(0,S.jsx)(p.Text,{size:13,children:"试一试∶"}),(0,S.jsxs)(p.Text,{size:13,children:[(0,S.jsx)(p.Text,{size:13,bold:!0,underline:!0,onPress:function(){f.uiStore.showPopableSubject({subjectId:364450})},children:"石蒜"}),"物语是什么鬼翻译[bgm38]"]})]})]})}},{key:"renderTopic",value:function(){var e=f.rakuenStore.setting,t=e.autoLoadImage,s=e.quote,r=e.quoteAvatar,o=e.subExpand,n=e.wide;return(0,S.jsxs)(x.default,{children:[(0,S.jsx)(b.default,{children:"帖子"}),(0,S.jsx)(m.ItemSetting,{hd:"楼层中图片自动加载",information:"对于大于 2M 的图片开启后依然不会自动加载\n不推荐使用，因为观察到用户使用的图床都很慢，而且不压缩图片很大",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:t,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"楼层中图片自动加载",checked:!t}),f.rakuenStore.switchSetting("autoLoadImage")}}),withoutFeedback:!0}),(0,S.jsx)(m.ItemSetting,{hd:"展开引用",information:"展开子回复中上一级的回复内容",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:s,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"展开引用",checked:!s}),f.rakuenStore.switchSetting("quote")}}),withoutFeedback:!0,thumb:(0,g.getYuqueThumbs)(["0/2022/png/386799/1661157694142-917c49b1-96f4-4d51-9cdc-a39ea80a4de5.png","0/2022/png/386799/1661157697155-91a59c53-a075-423b-8116-717583a7f5f2.png"])}),s&&(0,S.jsx)(m.ItemSetting,{hd:"显示引用头像",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:r,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"显示引用头像",checked:!r}),f.rakuenStore.switchSetting("quoteAvatar")}}),withoutFeedback:!0,thumb:(0,g.getYuqueThumbs)(["0/2022/png/386799/1661157853356-0ecf0000-acd2-4faf-acfb-9804498ee85c.png","0/2022/png/386799/1661157856095-60c6b420-8aba-406b-8c82-97a8360c84c1.png"])}),(0,S.jsx)(m.ItemSetting,{hd:"楼层内容加宽展示",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:n,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"加宽展示",checked:!n}),f.rakuenStore.switchSetting("wide")}}),withoutFeedback:!0,thumb:(0,g.getYuqueThumbs)(["0/2022/png/386799/1661327786769-cd143b43-e267-4648-af34-179efbe052af.png","0/2022/png/386799/1661327416446-79d19833-ed5c-4a44-a86e-06c00e83f12d.png"])}),(0,S.jsx)(m.ItemSetting,{hd:"子楼层折叠",information:"子回复超过此值后折叠，需手动展开。0 代表一直折叠，因性能问题暂不提供不折叠。",ft:(0,S.jsx)(p.SegmentedControl,{style:this.styles.segmentedControl,backgroundColor:f._.select(f._.colorBg,f._.colorPlain),size:12,values:P,selectedIndex:_.RAKUEN_SUB_EXPAND.findIndex(function(e){return e.value===o}),onValueChange:function(e){(0,j.t)("超展开设置.切换",{title:"子楼层折叠",value:e}),f.rakuenStore.setSubExpand(_.MODEL_RAKUEN_SUB_EXPAND.getValue(e))}})})]})}},{key:"renderList",value:function(){var e=f.rakuenStore.setting,t=e.filterDelete,s=e.isBlockDefaultUser,r=e.isMarkOldTopic;return(0,S.jsxs)(x.default,{children:[(0,S.jsx)(b.default,{children:"列表"}),(0,S.jsx)(m.ItemSetting,{hd:"过滤用户删除的楼层",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:t,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"过滤删除",checked:!t}),f.rakuenStore.switchSetting("filterDelete")}}),withoutFeedback:!0}),(0,S.jsx)(m.ItemSetting,{hd:"屏蔽疑似广告姬",information:"屏蔽默认头像发布且回复数小于 4 的帖子",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:s,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"屏蔽广告",checked:!s}),f.rakuenStore.switchSetting("isBlockDefaultUser")}}),withoutFeedback:!0}),(0,S.jsx)(m.ItemSetting,{information:"标记发布时间大于 1 年的帖子",hd:"标记坟贴",ft:(0,S.jsx)(p.SwitchPro,{style:this.styles.switch,value:r,onSyncPress:function(){(0,j.t)("超展开设置.切换",{title:"坟贴",checked:!r}),f.rakuenStore.switchSetting("isMarkOldTopic")}}),withoutFeedback:!0})]})}},{key:"render",value:function(){var e=this.props.navigation;return(0,S.jsx)(p.Page,{style:f._.select(f._.container.bg,f._.container.plain),children:(0,S.jsxs)(p.ScrollView,{contentContainerStyle:this.styles.container,onScroll:this.onScroll,children:[this.renderLikes(),this.renderTopic(),this.renderSlider(),this.renderMedia(),this.renderList(),(0,S.jsx)(h.default,{navigation:e})]})})}},{key:"styles",get:function(){return(0,v.memoStyles)()}}]),R);function R(){var e;(0,o.default)(this,R);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=T.call.apply(T,[this].concat(s)),(0,u.default)((0,i.default)(e),"onScroll",function(){f.uiStore.closePopableSubject()}),e}t.default=(0,y.ob)(s);try{page.displayName="page",page.__docgenInfo={description:"",displayName:"page",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/setting/page/index.tsx#page"]={docgenInfo:page.__docgenInfo,name:"page",path:"src/screens/rakuen/setting/page/index.tsx#page"})}catch(e){}},"./src/screens/rakuen/setting/page/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingTop:r._.sm,paddingBottom:r._.bottom},segmentedControl:{height:r._.r(32),width:r._.r(184)},switch:{marginRight:-4,transform:[{scale:r._.device(.8,1.12)}]},icon:{width:36,height:36},information:{maxWidth:"80%",marginTop:r._.xs},section:{paddingVertical:r._.sm,paddingRight:r._.sm,paddingLeft:r._._wind},input:{height:44,paddingVertical:0},acSearchPopable:{paddingTop:r._.sm,paddingBottom:r._.md,paddingLeft:r._._wind}}})},"./src/screens/rakuen/setting/page/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.getYuqueThumbs=function(e){return e.map(function(e){return{url:"https://cdn.nlark.com/yuque/"+e}})}},"./src/screens/rakuen/topic/bottom/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.MARKS=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Bottom"),t.MARKS=["+1","mark","(bgm38)"]},"./src/screens/rakuen/topic/bottom/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/bottom/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Extra")},"./src/screens/rakuen/topic/bottom/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),d=s("./src/utils/dev/index.ts"),a=s("./src/utils/hooks/index.ts"),l=s("./src/screens/rakuen/topic/bottom/extra/ds.ts"),u=s("./src/screens/rakuen/topic/bottom/extra/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");function o(e){var t=e.onDirect,s=((0,d.r)(l.COMPONENT),(0,u.memoStyles)()),r=i.rakuenStore.setting.switchSlider,o=i._.ios("height","bottom");return(0,a.useObserver)(function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.SafeAreaBottom,{style:s.left,type:o,children:(0,c.jsx)(n.Touchable,{useRN:!0,onPress:function(){return t(!!r)},onLongPress:function(){return t(!!r,20)},children:(0,c.jsx)(n.Flex,{style:s.btn,justify:"center",children:(0,c.jsx)(n.Iconfont,{style:i._.mr.md,name:r?"md-navigate-next":"md-navigate-before",size:24})})})}),(0,c.jsx)(n.SafeAreaBottom,{style:s.center,type:o,pointerEvents:"none",children:(0,c.jsx)(n.Flex,{style:s.btn,justify:"center",children:(0,c.jsx)(n.Iconfont,{name:"md-edit",size:15})})}),(0,c.jsx)(n.SafeAreaBottom,{style:s.right,type:o,children:(0,c.jsx)(n.Touchable,{useRN:!0,onPress:function(){return t(!r)},onLongPress:function(){return t(!r,20)},children:(0,c.jsx)(n.Flex,{style:s.btn,justify:"center",children:(0,c.jsx)(n.Iconfont,{style:i._.ml.md,name:r?"md-navigate-before":"md-navigate-next",size:24})})})})]})})}t.default=o;try{o.displayName="Extra",o.__docgenInfo={description:"",displayName:"Extra",props:{onDirect:{defaultValue:null,description:"",name:"onDirect",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/bottom/extra/index.tsx#Extra"]={docgenInfo:o.__docgenInfo,name:"Extra",path:"src/screens/rakuen/topic/bottom/extra/index.tsx#Extra"})}catch(e){}},"./src/screens/rakuen/topic/bottom/extra/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){var e=r._.ios(36,"auto");return{left:{position:"absolute",zIndex:1002,left:0,bottom:0,height:e,paddingRight:r._.md},center:{position:"absolute",zIndex:1001,left:r._.window.width/3,bottom:0,height:e},right:{position:"absolute",zIndex:1002,right:0,bottom:0,height:e},btn:{width:r._.window.width/3,height:48}}})},"./src/screens/rakuen/topic/bottom/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),u=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=r(s("./src/screens/rakuen/topic/bottom/extra/index.tsx")),m=s("./src/screens/rakuen/topic/bottom/ds.ts"),f=s("./src/screens/rakuen/topic/bottom/styles.ts"),y=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,r,o,n,i=e.fixedTextareaRef,e=e.onDirect,d=t.$,a=t.navigation;return!d.isWebLogin||d.isLimit?null:(t=(0,f.memoStyles)(),s=(r=d.state).placeholder,r=r.value,o=(n=d.topic).tip,n=n.close,(void 0===o?"":o).includes("半公开")?(0,y.jsx)(l.SafeAreaBottom,{style:t.fixedBottom,type:u._.ios("height","bottom"),children:(0,y.jsxs)(l.Flex,{children:[(0,y.jsx)(l.Text,{children:"半公开小组只有成员才能发言, "}),(0,y.jsx)(l.Text,{type:"main",onPress:function(){return(0,c.appNavigate)(d.groupHref,a)},children:"点击加入"})]})}):n?(0,y.jsx)(l.SafeAreaBottom,{style:t.fixedBottom,type:u._.ios("height","bottom"),children:(0,y.jsxs)(l.Flex,{children:[(0,y.jsx)(l.Text,{children:"主题已被关闭"}),!!n&&(0,y.jsxs)(l.Text,{type:"sub",children:[": ",n]})]})}):(0,y.jsx)(l.FixedTextarea,{ref:i,placeholder:s||void 0,value:r,source:!0,marks:m.MARKS,extraComponent:(0,y.jsx)(p.default,{onDirect:e}),onChange:d.onChange,onClose:d.closeFixedTextarea,onSubmit:d.doSubmit}))},m.COMPONENT)},"./src/screens/rakuen/topic/bottom/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts"),o=s("./src/constants/index.ts");t.memoStyles=r._.memoStyles(function(){return{fixedBottom:Object.assign({position:"absolute",zIndex:1,right:0,bottom:0,left:0,height:r._.ios(32,"auto"),paddingVertical:16,paddingHorizontal:r._.wind,backgroundColor:r._.select(r._.colorPlain,r._._colorDarkModeLevel1)},o.IOS?{shadowColor:r._.colorShadow,shadowOffset:{width:1,height:-2},shadowOpacity:.06,shadowRadius:6}:{elevation:8})}})},"./src/screens/rakuen/topic/component/content/content.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),p=s("./src/screens/_/index.ts"),m=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),o=s("./src/screens/rakuen/topic/component/content/ds.ts"),y=s("./src/screens/rakuen/topic/component/content/styles.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,r.memo)(function(e){var t=e.topicId,s=e.html,r=e.isEp,o=e.id,n=e.formhash,i=e.likeType,d=e.translateResult,a=e.doTranslate,e=e.onLinkPress,l=t.includes("group/");return(0,j.jsxs)(u.default,{style:y.styles.html,children:[l&&!s&&(0,j.jsx)(c.Flex,{style:y.styles.loading,justify:"center",children:(0,j.jsx)(c.Loading,{})}),d.length?(0,j.jsx)(u.default,{children:d.map(function(e,t){return(0,j.jsxs)(u.default,{children:[(0,j.jsx)(c.Text,{style:m._.mt.md,size:13,lineHeight:14,type:"sub",children:e.src.trim()}),(0,j.jsx)(c.Text,{style:m._.mt.xs,size:15,lineHeight:17,children:e.dst.trim()})]},t)})}):!!s&&(0,j.jsxs)(j.Fragment,{children:[r&&!(0,f.isChineseParagraph)((0,f.removeURLs)((0,f.removeHTMLTag)(s)))&&(0,j.jsxs)(u.default,{style:y.styles.iconTranslate,children:[(0,j.jsx)(p.IconTouchable,{name:"md-g-translate",size:18,onPress:a}),(0,j.jsx)(c.Heatmap,{id:"帖子.翻译内容"})]}),(0,j.jsxs)(u.default,{style:m._.mt.md,children:[(0,j.jsx)(c.RenderHtml,{html:s,matchLink:!0,onLinkPress:e}),(0,j.jsx)(c.Heatmap,{bottom:133,id:"帖子.跳转",to:"Blog",alias:"日志",transparent:!0}),(0,j.jsx)(c.Heatmap,{bottom:100,id:"帖子.跳转",to:"CatalogDetail",alias:"目录",transparent:!0}),(0,j.jsx)(c.Heatmap,{bottom:67,id:"帖子.跳转",to:"Topic",alias:"帖子",transparent:!0}),(0,j.jsx)(c.Heatmap,{bottom:34,id:"帖子.跳转",to:"Mono",alias:"人物",transparent:!0}),(0,j.jsx)(c.Heatmap,{id:"帖子.跳转",to:"WebBrowser",alias:"浏览器",transparent:!0})]})]}),(0,j.jsx)(p.Likes,{show:!0,topicId:t,id:o,formhash:n,likeType:i,onLongPress:m.uiStore.showLikesUsers})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{content.displayName="content",content.__docgenInfo={description:"",displayName:"content",props:{topicId:{defaultValue:null,description:"",name:"topicId",required:!0,type:{name:"`subject/${string}` | `subject/${number}` | `group/${string}` | `group/${number}` | `ep/${string}` | `ep/${number}` | `prsn/${string}` | `prsn/${number}`"}},html:{defaultValue:null,description:"",name:"html",required:!0,type:{name:"string"}},isEp:{defaultValue:null,description:"",name:"isEp",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"Id"}},formhash:{defaultValue:null,description:"",name:"formhash",required:!0,type:{name:"string"}},likeType:{defaultValue:null,description:"",name:"likeType",required:!0,type:{name:"string"}},translateResult:{defaultValue:null,description:"",name:"translateResult",required:!0,type:{name:"any[]"}},doTranslate:{defaultValue:null,description:"",name:"doTranslate",required:!0,type:{name:"() => Promise<void>"}},onLinkPress:{defaultValue:null,description:"",name:"onLinkPress",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/content/content.tsx#content"]={docgenInfo:content.__docgenInfo,name:"content",path:"src/screens/rakuen/topic/component/content/content.tsx#content"})}catch(e){}},"./src/screens/rakuen/topic/component/content/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/constants/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts"),s=t.COMPONENT=(0,r.rc)(s.COMPONENT,"Content");t.COMPONENT_MAIN=(0,r.rc)(s),t.DEFAULT_PROPS={topicId:"",html:"",isEp:!1,id:"",formhash:"",likeType:"",translateResult:[],doTranslate:o.FN,onLinkPress:o.FN}},"./src/screens/rakuen/topic/component/content/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=o?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js"))),i=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),d=r(s("./src/screens/rakuen/topic/component/content/content.tsx")),r=s("./src/screens/rakuen/topic/component/content/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");function l(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(l=function(e){return e?s:t})(e))}t.default=(0,o.obc)(function(e,t){var s,r=t.$,o=t.navigation,t=(0,n.useCallback)(function(e){(0,i.appNavigate)(e,o,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{id:"帖子.跳转",data:{from:"#1",topicId:r.topicId}})},[r.topicId,o]);return(0,a.jsx)(d.default,{topicId:r.topicId,html:r.html,isEp:r.isEp,id:null==(s=r.topic)?void 0:s.id,formhash:null==(s=r.topic)?void 0:s.formhash,likeType:null==(s=r.topic)?void 0:s.likeType,translateResult:r.state.translateResult,doTranslate:r.doTranslate,onLinkPress:t})},r.COMPONENT);try{content.displayName="content",content.__docgenInfo={description:"",displayName:"content",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/content/index.tsx#content"]={docgenInfo:content.__docgenInfo,name:"content",path:"src/screens/rakuen/topic/component/content/index.tsx#content"})}catch(e){}},"./src/screens/rakuen/topic/component/content/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({html:{minHeight:s._.r(120)},loading:{height:s._.r(120)},iconTranslate:{position:"absolute",zIndex:1,top:0,right:-4}})},"./src/screens/rakuen/topic/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Component")},"./src/screens/rakuen/topic/component/ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Ep")},"./src/screens/rakuen/topic/component/ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),u=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),o=s("./src/screens/rakuen/topic/component/ep/ds.ts"),m=s("./src/screens/rakuen/topic/component/ep/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r,o,n,i,d=t.$,a=t.navigation;return null!=(t=d.groupHref)&&t.includes("/subject/")&&(t=Number(d.groupHref.replace("/subject/","")),null!=(r=c.subjectStore.subject(t).eps))&&r.length&&(s=[],-1!==(t=(s=1e3<=r.length?[].concat((0,l.default)(r),(0,l.default)(c.subjectStore.epV2(t).list)).filter(function(e){return 0===e.type}):r.filter(function(e){return 0===e.type})).findIndex(function(e){return null==(e=e.url)?void 0:e.includes(d.topicId)})))&&(r=(0,m.memoStyles)(),0<=t-1&&(o=s[t-1]),t+1<=s.length-1&&(n=s[t+1]),o||n)?(i=function(e){var t;a.replace("Topic",{topicId:"ep/"+(null==(t=e.url)?void 0:t.split("/ep/")[1]),_title:(1===e.type?"sp":"ep")+e.sort+"."+(0,p.cnjp)(e.name_cn,e.name)})},(0,f.jsxs)(u.Flex,{style:r.container,children:[(0,f.jsx)(u.Flex.Item,{children:o&&(0,f.jsxs)(u.Touchable,{style:r.item,animate:!0,onPress:function(){return i(o)},children:[(0,f.jsxs)(u.Flex,{children:[(0,f.jsx)(u.Iconfont,{style:r.left,name:"md-navigate-before",size:18,color:c._.colorDesc}),(0,f.jsxs)(u.Text,{size:16,bold:!0,children:[1===o.type?"sp":"ep",o.sort]})]}),(0,f.jsx)(u.Text,{style:c._.mt.xs,size:12,type:"sub",numberOfLines:1,children:(0,p.HTMLDecode)((0,p.cnjp)(o.name_cn,o.name))})]})}),(0,f.jsx)(u.Flex.Item,{style:c._.ml.md,children:n&&(0,f.jsxs)(u.Touchable,{style:r.item,animate:!0,onPress:function(){return i(n)},children:[(0,f.jsxs)(u.Flex,{justify:"end",children:[(0,f.jsxs)(u.Text,{size:16,bold:!0,align:"right",children:[1===n.type?"sp":"ep",n.sort]}),(0,f.jsx)(u.Iconfont,{style:r.right,name:"md-navigate-next",size:18,color:c._.colorDesc})]}),(0,f.jsx)(u.Text,{style:c._.mt.xs,size:12,type:"sub",align:"right",numberOfLines:1,children:(0,p.HTMLDecode)((0,p.cnjp)(n.name_cn,n.name))})]})})]})):null},o.COMPONENT);try{ep.displayName="ep",ep.__docgenInfo={description:"",displayName:"ep",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/ep/index.tsx#ep"]={docgenInfo:ep.__docgenInfo,name:"ep",path:"src/screens/rakuen/topic/component/ep/index.tsx#ep"})}catch(e){}},"./src/screens/rakuen/topic/component/ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingVertical:r._.md,paddingHorizontal:r._.wind,marginRight:r._.xs},item:{paddingTop:r._.sm,paddingBottom:r._.sm+4,paddingHorizontal:r._.md,borderWidth:1,borderColor:r._.colorBorder,borderRadius:r._.radiusSm},left:{marginTop:2,marginLeft:-2},right:{marginTop:2,marginRight:-2}}})},"./src/screens/rakuen/topic/component/header-title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.IMG_WIDTH=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts"),s=t.COMPONENT=(0,r.rc)(s.COMPONENT,"HeaderTitle");t.COMPONENT_MAIN=(0,r.rc)(s),t.IMG_WIDTH=28,t.DEFAULT_PROPS={navigation:{},avatar:"",userId:"",userName:"",title:"",group:""}},"./src/screens/rakuen/topic/component/header-title/header-title.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),l=s("./src/screens/rakuen/topic/component/header-title/ds.ts"),u=s("./src/screens/rakuen/topic/component/header-title/styles.ts"),c=s("./node_modules/react/jsx-runtime.js"),s=(0,r.memo)(function(e){var t=e.navigation,s=e.avatar,r=e.userId,o=e.userName,n=e.title,e=e.group,e=[o||e,e].filter(function(e){return!!e}).join(" · ");return(0,c.jsxs)(i.Flex,{style:u.styles.container,children:[!!s&&(0,c.jsx)(i.UserStatus,{userId:r,children:(0,c.jsx)(d.Avatar,{navigation:t,size:l.IMG_WIDTH,src:s,userId:r,name:o})}),(0,c.jsxs)(i.Flex.Item,{style:a._.ml.sm,children:[(0,c.jsx)(i.Text,{size:13,numberOfLines:1,children:n}),!!e&&(0,c.jsx)(i.Text,{type:"sub",size:10,lineHeight:12,bold:!0,numberOfLines:1,children:e})]})]})},l.DEFAULT_PROPS,l.COMPONENT_MAIN);t.default=s;try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},avatar:{defaultValue:null,description:"",name:"avatar",required:!0,type:{name:"string"}},userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"UserId"}},userName:{defaultValue:null,description:"",name:"userName",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/header-title/header-title.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/rakuen/topic/component/header-title/header-title.tsx#headertitle"})}catch(e){}},"./src/screens/rakuen/topic/component/header-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),n=s("./src/constants/index.ts"),i=r(s("./src/screens/rakuen/topic/component/header-title/header-title.tsx")),r=s("./src/screens/rakuen/topic/component/header-title/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ob)(function(e){var t=e.$,e=e.navigation;return(0,d.jsx)(i.default,{navigation:e,avatar:t.avatar===n.IMG_DEFAULT_AVATAR?t.groupThumb:t.avatar,userId:t.userId,userName:t.userName,title:t.title,group:t.group})},r.COMPONENT);try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenTopic"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/header-title/index.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/rakuen/topic/component/header-title/index.tsx#headertitle"})}catch(e){}},"./src/screens/rakuen/topic/component/header-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{marginTop:s._.platforms(4,-8,-10,-14,-8),marginLeft:-s._.sm,marginRight:s._.lg}})},"./src/screens/rakuen/topic/component/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),n=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Heatmap,{right:2,bottom:160,id:"帖子.楼层跳转",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:76,bottom:84,id:"帖子.删除回复",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:76,bottom:51,id:"帖子.回复",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:119,bottom:51,id:"帖子.回复失败",transparent:!0}),(0,n.jsx)(o.Heatmap,{right:76,bottom:18,id:"帖子.显示评论框",transparent:!0}),(0,n.jsx)(o.Heatmap,{id:"帖子",screen:"Topic"})]})})},"./src/screens/rakuen/topic/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.PRE_RENDER_INDEX=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Item"),t.PRE_RENDER_INDEX=8},"./src/screens/rakuen/topic/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./src/screens/rakuen/topic/component/item/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r=e.item,o=e.index,e=e.onShowFixedTextarea;return!(t=t.$).postId&&!t.state.rendered&&o>d.PRE_RENDER_INDEX-1?null:(s={id:"帖子.跳转",data:{topicId:t.topicId}},(0,a.jsx)(n.ItemPost,Object.assign({inViewY:.8*i._.window.height,index:o,postId:t.postId,authorId:t.topic.userId},r,{event:s,showFixedTextare:e})))},d.COMPONENT)},"./src/screens/rakuen/topic/component/milestone/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Milestone")},"./src/screens/rakuen/topic/component/milestone/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./node_modules/react-native-webview/index.js"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/topic/component/milestone/ds.ts"),d=s("./src/screens/rakuen/topic/component/milestone/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r;return"group/366561"!==(t=t.$).topicId?null:(s=(0,d.memoStyles)(),t=t.state.showHeaderTitle,r='<!DOCTYPE html><html lang=en><head><meta charset="UTF-8"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Bangumi Open Source</title><style>*{padding:0;margin:0}::-webkit-scrollbar{display:none}body{overflow:hidden;background:#000}</style><body><div style=position:relative;width:'+s.body.width+"px;height:"+s.body.height+"px><canvas id=canvas_matrix style=display:block;background-color:transparent;position:absolute;left:0;top:0;width:"+s.body.width+"px;height:"+s.body.height+"px width=300 height=150></canvas><canvas id=canvas_matrix_2 style=display:block;background-color:transparent;position:absolute;left:0;top:0;width:"+s.body.width+"px;height:"+s.body.height+'px;border-radius:15px width=300 height=150></canvas><div style="font-family:Courier New,serif;position:absolute;width:100%;height:100%;text-align:center;top:45%;font-size:20px;color:#fff;text-shadow:0 0 15px #0f0,0 0 9px #56b000,0 0 15px #006400,0 0 5px #006400">Bangumi Open Source</div></div><script>function m(t,e){return Math.floor(Math.random()*(e-t)+t)}function v(t,e){return Math.random()*(e-t)+t}function d(t,e){this.x=t,this.y=e}var t=document.getElementById("canvas_matrix"),n=t.getContext("2d"),i=document.getElementById("canvas_matrix_2"),s=i.getContext("2d"),a=t.width,h=t.height,r=["b","a","n","g","u","m","i","o","p","e","n","s","o","u","r","c","e"],e=10,u=[],o=10,c=10,f=a/o;t.width=i.width=a,t.height=i.height=h,d.prototype.t=function(t){this.value=r[m(0,r.length-1)].toUpperCase(),this.speed=v(.5,1.5),s.fillStyle="rgba(255,255,255,0.3)",s.font=c+"px san-serif",s.fillText(this.value,this.x,this.y),t.fillStyle="#0F0",t.font=c+"px san-serif",t.fillText(this.value,this.x,this.y),this.y+=this.speed,this.y>h&&(this.y=v(-100,10),this.speed=v(.5,3))};for(var x=0;f>x;x++)u.push(new d(x*o,v(-500,0)));var b=function(){n.fillStyle="rgba(0, 0, 0, 0.05)",n.fillRect(0,0,a,h),s.clearRect(0,0,a,h);for(var t=u.length;t--;){u[t].t(n);{u[t]}}requestAnimationFrame(b)};b();<\/script>',(0,a.jsx)(o.default,{style:s.container,children:!t&&(0,a.jsx)(n.WebView,{style:s.body,source:{html:r},scrollEnabled:!1,androidHardwareAccelerationDisabled:!0,androidLayerType:"software"})}))},i.COMPONENT);try{milestone.displayName="milestone",milestone.__docgenInfo={description:"",displayName:"milestone",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/milestone/index.tsx#milestone"]={docgenInfo:milestone.__docgenInfo,name:"milestone",path:"src/screens/rakuen/topic/component/milestone/index.tsx#milestone"})}catch(e){}},"./src/screens/rakuen/topic/component/milestone/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){var e=r._.window.contentWidth-(r._.wind-r._._wind);return{container:{height:160,marginTop:-r._.md,marginBottom:r._.md,borderRadius:r._.radiusMd,overflow:"hidden"},body:{width:e,height:160,backgroundColor:"#000",opacity:.99}}})},"./src/screens/rakuen/topic/component/section-title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"SectionTitle")},"./src/screens/rakuen/topic/component/section-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.string.sub.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=r(s("./src/screens/rakuen/topic/component/segment/index.tsx")),r=s("./src/screens/rakuen/topic/component/section-title/ds.ts"),u=s("./src/screens/rakuen/topic/component/section-title/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var t=t.$,s=(0,u.memoStyles)(),r=void 0===(r=t.comments.list)?[]:r,o=t.state.reverse,n=0;return r.forEach(function(e){n+=1,e.sub&&(n+=e.sub.length)}),(0,c.jsxs)(d.SectionTitle,{style:s.title,right:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.default,{}),(0,c.jsx)(d.IconReverse,{style:o?s.reverse:void 0,iconStyle:s.reverseIcon,color:o?a._.colorMain:a._.colorIcon,size:18,onPress:t.toggleReverseComments,children:(0,c.jsx)(i.Heatmap,{right:10,bottom:29,id:"帖子.吐槽倒序"})})]}),children:["吐槽"," ",!!n&&(0,c.jsx)(i.Text,{size:12,type:"sub",lineHeight:24,children:n})]})},r.COMPONENT);try{sectiontitle.displayName="sectiontitle",sectiontitle.__docgenInfo={description:"",displayName:"sectiontitle",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/section-title/index.tsx#sectiontitle"]={docgenInfo:sectiontitle.__docgenInfo,name:"sectiontitle",path:"src/screens/rakuen/topic/component/section-title/index.tsx#sectiontitle"})}catch(e){}},"./src/screens/rakuen/topic/component/section-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{title:{paddingHorizontal:r._.wind,marginTop:r._.lg,marginBottom:r._.md},reverse:{transform:[{rotateX:"180deg"}]},reverseIcon:{marginRight:4,marginLeft:r._.md}}})},"./src/screens/rakuen/topic/component/segment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Segement")},"./src/screens/rakuen/topic/component/segment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),o=s("./src/screens/rakuen/topic/component/segment/ds.ts"),l=s("./src/screens/rakuen/topic/component/segment/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$,r=(t=s.state).filterMe,o=t.filterFriends,t=["全部"],n=((n=!!s.myId)&&s.commentMeCount&&t.push("我 "+s.commentMeCount),n&&s.commentFriendsCount&&t.push("好友 "+s.commentFriendsCount),0);return 1<t.length&&(r&&t.find(function(e){return e.includes("我")})?n=1:o&&(n=t.length-1)),t.length<=1?null:(0,u.jsxs)(i.default,{children:[(0,u.jsx)(d.SegmentedControl,{style:[l.styles.segmentedControl,{width:t.length*a._.r(56)}],size:11,values:t,selectedIndex:n,onValueChange:function(e){if(e.includes("我")&&!r||"全部"===e&&r)return s.toggleFilterMe();(e.includes("好友")&&!o||"全部"===e&&o)&&s.toggleFilterFriends()}}),(0,u.jsx)(d.Heatmap,{right:74,bottom:24,id:"帖子.好友相关"}),(0,u.jsx)(d.Heatmap,{right:24,bottom:24,id:"帖子.与我相关"})]})},o.COMPONENT);try{segment.displayName="segment",segment.__docgenInfo={description:"",displayName:"segment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/segment/index.tsx#segment"]={docgenInfo:segment.__docgenInfo,name:"segment",path:"src/screens/rakuen/topic/component/segment/index.tsx#segment"})}catch(e){}},"./src/screens/rakuen/topic/component/segment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({segmentedControl:{height:s._.r(28)}})},"./src/screens/rakuen/topic/component/top/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts"),s=t.COMPONENT=(0,r.rc)(s.COMPONENT,"Top");t.COMPONENT_MAIN=(0,r.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},topicId:"",title:"",subTitle:"",time:"",replies:"",group:"",groupHref:"",groupThumb:"",groupThumbFallback:"",avatar:"",userId:"",userName:"",userSign:"",monoId:"",isMono:!1,delete:!1}},"./src/screens/rakuen/topic/component/top/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),a=s("./src/utils/app/ds.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=r(s("./src/screens/rakuen/topic/component/top/top.tsx")),r=s("./src/screens/rakuen/topic/component/top/ds.ts"),c=s("./src/screens/rakuen/topic/component/top/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,t=t.navigation,r=s.params._replies,o=(n=d.systemStore.setting).cdn,n=n.cdnOrigin,i=s.groupThumb,o=(o&&"magma"===n&&"string"==typeof i&&i.includes(a.HOST_IMAGE)&&(i=(0,l.CDN_OSS_MAGMA_PIC)(i)),(0,c.memoStyles)());return(0,p.jsx)(u.default,{navigation:t,styles:o,topicId:s.topicId,title:s.title,subTitle:s.subTitle,time:s.time,replies:r,group:s.group,groupHref:s.groupHref,groupThumb:i,groupThumbFallback:s.groupThumb,avatar:s.avatar,userId:s.userId,userName:s.userName,userSign:s.userSign,monoId:s.monoId,isMono:s.isMono,delete:s.topic.delete})},r.COMPONENT);try{top.displayName="top",top.__docgenInfo={description:"",displayName:"top",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/top/index.tsx#top"]={docgenInfo:top.__docgenInfo,name:"top",path:"src/screens/rakuen/topic/component/top/index.tsx#top"})}catch(e){}},"./src/screens/rakuen/topic/component/top/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingVertical:r._.sm,paddingHorizontal:r._.wind},groupWrap:{minHeight:r._.r(32),marginTop:r._.sm,marginBottom:r._.xs},groupLabel:{overflow:"hidden",maxWidth:"100%",padding:4,paddingRight:10,marginRight:r._.sm,backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1),borderRadius:r._.radiusXs},group:{maxWidth:.6*r._.window.contentWidth,marginLeft:r._.sm},userWrap:{height:r._.r(42),marginTop:r._.sm},katakana:{marginTop:-12},loading:{height:r._.r(240)}}})},"./src/screens/rakuen/topic/component/top/top.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.slice.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),S=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=o?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js")),T=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),k=s("./src/components/index.ts"),P=s("./src/stores/index.ts"),R=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),I=s("./src/constants/index.ts"),C=r(s("./src/screens/rakuen/topic/component/content/index.tsx")),E=r(s("./src/screens/rakuen/topic/component/ep/index.tsx")),w=r(s("./src/screens/rakuen/topic/component/milestone/index.tsx")),A=r(s("./src/screens/rakuen/topic/component/section-title/index.tsx")),r=s("./src/screens/rakuen/topic/component/top/ds.ts"),N=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}s=(0,o.memo)(function(e){var t=e.navigation,s=e.styles,r=e.topicId,o=e.title,n=e.subTitle,i=e.time,d=e.replies,a=e.group,l=e.groupHref,u=e.groupThumb,c=e.groupThumbFallback,p=e.avatar,m=e.userId,f=e.userName,y=e.userSign,j=e.monoId,_=e.isMono,e=e.delete,x=(0,O.useState)(1),x=(0,S.default)(x,2),b=x[0],h=x[1],x=(0,O.useCallback)(function(){return h(2)},[]),g={id:"帖子.跳转",data:{from:"#1",topicId:r}},v=r.includes("group/"),r=r.includes("ep/");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k.HeaderPlaceholder,{}),(0,N.jsxs)(T.default,{style:s.container,children:[(0,N.jsx)(w.default,{}),(0,N.jsxs)(k.Text,{type:"title",size:20,bold:!0,selectable:!0,children:[o,!!d&&(0,N.jsx)(k.Text,{type:"main",size:12,lineHeight:26,bold:!0,children:"  "+(d.includes("+")?"":"+")+d.trim()})]}),!!n&&(0,N.jsx)(k.Text,{style:P._.mv.sm,type:"sub",size:14,bold:!0,selectable:!0,children:n}),(0,N.jsxs)(k.Flex,{style:s.groupWrap,children:[!!a&&(0,N.jsx)(k.Flex,{style:s.groupLabel,children:(0,N.jsx)(k.Touchable,{animate:!0,onPress:function(){_?(0,R.appNavigate)(I.HOST+"/"+j,t,{},g):(0,R.appNavigate)(l,t,{_jp:a},g)},children:(0,N.jsxs)(k.Flex,{children:[(0,N.jsx)(k.Cover,{size:r?40:20,src:u||P._.select(I.IMG_EMPTY,I.IMG_EMPTY_DARK),radius:P._.radiusXs,fallback:!0,fallbackSrc:String(c).replace("/r/100x100","")}),(0,N.jsx)(k.Text,{style:s.group,size:13,numberOfLines:1,children:(0,R.HTMLDecode)((0,R.findSubjectCn)(a))})]})})}),!!i&&(0,N.jsx)(k.Flex.Item,{children:(0,N.jsx)(k.Text,{type:"sub",size:13,children:(0,R.simpleTime)(i)})}),(0,N.jsx)(k.Heatmap,{right:74,id:"帖子.跳转",to:"Group",alias:"小组"}),(0,N.jsx)(k.Heatmap,{id:"帖子.跳转",to:"Subject",alias:"条目",transparent:!0})]}),v&&(0,N.jsxs)(k.Flex,{style:s.userWrap,children:[!!p&&(0,N.jsx)(k.UserStatus,{userId:m,children:(0,N.jsx)(k.Avatar,{navigation:t,event:g,size:40,src:p,userId:m,name:f})}),!!m&&(0,N.jsxs)(k.Flex.Item,{style:P._.ml.sm,children:[(0,N.jsx)(k.Text,{numberOfLines:1,bold:!0,children:f}),(0,N.jsxs)(k.Text,{style:P._.mt.xs,type:"sub",size:12,numberOfLines:b,onPress:x,children:["@",m,!!y&&" ("+y.slice(1,y.length-1)+")"]})]}),(0,N.jsx)(k.Heatmap,{id:"帖子.跳转",to:"Zone",alias:"空间"})]}),(0,N.jsx)(C.default,{}),!!e&&(0,N.jsxs)(k.Text,{style:P._.mb.md,size:15,lineHeight:18,bold:!0,align:"center",children:["数据库中没有查询到指定话题","\n","话题可能正在审核或已被删除"]})]}),(0,N.jsx)(k.Divider,{}),(0,N.jsx)(E.default,{}),(0,N.jsx)(A.default,{})]})},r.DEFAULT_PROPS,r.COMPONENT_MAIN);t.default=s;try{top.displayName="top",top.__docgenInfo={description:"",displayName:"top",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { paddingVertical: number; paddingHorizontal: number; }; groupWrap: { minHeight: number; marginTop: number; marginBottom: number; }; groupLabel: { overflow: "hidden"; maxWidth: string; ... 4 more ...; borderRadius: number; }; group: { ...; }; userWrap: { ...; }; katakana: { ...; }; loading: { ...; }; }'}},topicId:{defaultValue:null,description:"",name:"topicId",required:!0,type:{name:"`subject/${string}` | `subject/${number}` | `group/${string}` | `group/${number}` | `ep/${string}` | `ep/${number}` | `prsn/${string}` | `prsn/${number}`"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!0,type:{name:"string"}},time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"string"}},replies:{defaultValue:null,description:"",name:"replies",required:!0,type:{name:"string"}},group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:"string"}},groupHref:{defaultValue:null,description:"",name:"groupHref",required:!0,type:{name:"string"}},groupThumb:{defaultValue:null,description:"",name:"groupThumb",required:!0,type:{name:"string"}},groupThumbFallback:{defaultValue:null,description:"",name:"groupThumbFallback",required:!0,type:{name:"string"}},avatar:{defaultValue:null,description:"",name:"avatar",required:!0,type:{name:"string"}},userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"UserId"}},userName:{defaultValue:null,description:"",name:"userName",required:!0,type:{name:"string"}},userSign:{defaultValue:null,description:"",name:"userSign",required:!0,type:{name:"string"}},monoId:{defaultValue:null,description:"",name:"monoId",required:!0,type:{name:"string"}},isMono:{defaultValue:null,description:"",name:"isMono",required:!0,type:{name:"boolean"}},delete:{defaultValue:null,description:"",name:"delete",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/top/top.tsx#top"]={docgenInfo:top.__docgenInfo,name:"top",path:"src/screens/rakuen/topic/component/top/top.tsx#top"})}catch(e){}},"./src/screens/rakuen/topic/component/touch-scroll/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.HIT_SLOP=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/constants/index.ts"),s=s("./src/screens/rakuen/topic/component/ds.ts"),s=t.COMPONENT=(0,r.rc)(s.COMPONENT,"TouchScroll");t.COMPONENT_MAIN=(0,r.rc)(s),t.DEFAULT_PROPS={styles:{},list:[],readedTime:0,scrollDirection:o.MODEL_RAKUEN_SCROLL_DIRECTION.getValue("右侧"),directFloor:"",isWebLogin:!1,onPress:function(){}},t.HIT_SLOP={top:0,right:2,bottom:0,left:2}},"./src/screens/rakuen/topic/component/touch-scroll/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),o=s("./src/constants/index.ts"),n=s("./src/screens/rakuen/topic/component/touch-scroll/touch-scroll.tsx"),i=s("./src/screens/rakuen/topic/component/touch-scroll/ds.ts"),d=s("./src/screens/rakuen/topic/component/touch-scroll/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var e=e.onPress,s=(t=t.$).setting.scrollDirection,r=t.comments.list;return s!==o.MODEL_RAKUEN_SCROLL_DIRECTION.getValue("隐藏")&&r.length?(0,a.jsx)(n.TouchScroll,{styles:(0,d.memoStyles)(),list:r,readedTime:t.readed._time,scrollDirection:s,directFloor:t.state.directFloor,isWebLogin:t.isWebLogin,onPress:e}):null},i.COMPONENT)},"./src/screens/rakuen/topic/component/touch-scroll/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{containerRight:{position:"absolute",top:r._.headerHeight,right:0,bottom:r._.ios(64,46),width:16,backgroundColor:r._.colorPlain},containerLeft:{position:"absolute",top:r._.headerHeight,left:0,bottom:r._.ios(64,46),width:16,backgroundColor:r._.colorPlain},containerBottom:{position:"absolute",left:0,right:0,bottom:40,width:"100%",height:24,backgroundColor:r._.select(r._.colorPlain,r._._colorDarkModeLevel1)},notLogin:{bottom:0,height:32,paddingBottom:8},itemVertical:{width:16,height:"100%"},itemHorizontal:{width:"100%",height:"100%"},itemNew:{borderRightWidth:6,borderColor:r._.select(r._.colorMainLightBorder,"rgb(59, 48, 51)")},itemText:{minHeight:16},dot:{width:4,height:4,backgroundColor:r._.colorIcon,borderRadius:4}}})},"./src/screens/rakuen/topic/component/touch-scroll/touch-scroll.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),p=(Object.defineProperty(t,"__esModule",{value:!0}),t.TouchScroll=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/TouchableWithoutFeedback/index.js"))),m=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),f=s("./src/components/index.ts"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),_=s("./src/constants/index.ts"),x=s("./src/screens/rakuen/topic/component/touch-scroll/ds.ts"),b=s("./node_modules/react/jsx-runtime.js"),s=t.TouchScroll=(0,r.memo)(function(e){var n=e.styles,i=e.list,d=e.readedTime,t=e.scrollDirection,s=e.directFloor,r=e.isWebLogin,a=e.onPress,l=s?Number((null==(e=s.match(/\d+/))?void 0:e[0])||0):0,u=[Math.floor(.33333*i.length)-1,Math.floor(.66666*i.length)-1,i.length-1],c=t===_.MODEL_RAKUEN_SCROLL_DIRECTION.getValue("右侧")||t===_.MODEL_RAKUEN_SCROLL_DIRECTION.getValue("左侧"),s={hitSlop:x.HIT_SLOP};return _.IOS?s.onPress=function(){return a(-1)}:s.onPressIn=function(){return a(-1)},(0,b.jsxs)(f.Flex,{style:(0,j.stl)(n["container"+(0,j.titleCase)(t)],!r&&!c&&n.notLogin),direction:c?"column":void 0,children:[(0,b.jsx)(f.Flex.Item,{style:n.itemText,flex:c?1:3,children:(0,b.jsx)(p.default,Object.assign({},s,{children:(0,b.jsx)(f.Flex,{style:c?n.itemVertical:n.itemHorizontal,children:(0,b.jsx)(f.Text,{style:y._.container.block,size:8,type:"icon",align:"center",children:"1"})})}))}),i.map(function(e,t){var s=l&&"#"+l===e.floor,r=!1,e=(!d||(r=(0,j.getTimestamp)(e.time)>d||r)||e.sub&&e.sub.forEach(function(e){(0,j.getTimestamp)(e.time)>d&&(r=!0)}),u.includes(t)),o={hitSlop:x.HIT_SLOP};return _.IOS?o.onPress=function(){return a(t)}:o.onPressIn=function(){return a(t)},(0,b.jsx)(f.Flex.Item,{style:e&&n.itemText,flex:!c&&e?3:1,children:(0,b.jsx)(p.default,Object.assign({},o,{children:(0,b.jsx)(f.Flex,{style:(0,j.stl)(c?n.itemVertical:n.itemHorizontal,r&&n.itemNew),justify:"center",children:e?(0,b.jsx)(f.Text,{style:y._.container.block,size:8,type:r?y._.select("plain","icon"):"icon",bold:s,align:"center",children:String((null==(o=i[t])?void 0:o.floor)||"").replace("#","")}):s?(0,b.jsx)(m.default,{style:n.dot}):null})}))},t)})]})},x.DEFAULT_PROPS,x.COMPONENT_MAIN,function(e){return Object.assign({},e,{list:e.list.length})});try{s.displayName="TouchScroll",s.__docgenInfo={description:"",displayName:"TouchScroll",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ containerRight: { position: "absolute"; top: number; right: number; bottom: number; width: number; backgroundColor: "rgb(255, 255, 255)" | "rgb(36, 36, 36)"; }; containerLeft: { position: "absolute"; ... 4 more ...; backgroundColor: "rgb(255, 255, 255)" | "rgb(36, 36, 36)"; }; ... 6 more ...; dot: { ...; }; }'}},list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"any[]"}},readedTime:{defaultValue:null,description:"",name:"readedTime",required:!0,type:{name:"number"}},scrollDirection:{defaultValue:null,description:"",name:"scrollDirection",required:!0,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"none"'},{value:'"bottom"'}]}},directFloor:{defaultValue:null,description:"",name:"directFloor",required:!0,type:{name:"string"}},isWebLogin:{defaultValue:null,description:"",name:"isWebLogin",required:!0,type:{name:"boolean"}},onPress:{defaultValue:null,description:"",name:"onPress",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/component/touch-scroll/touch-scroll.tsx#TouchScroll"]={docgenInfo:s.__docgenInfo,name:"TouchScroll",path:"src/screens/rakuen/topic/component/touch-scroll/touch-scroll.tsx#TouchScroll"})}catch(e){}},"./src/screens/rakuen/topic/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;t.COMPONENT="Topic"},"./src/screens/rakuen/topic/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_SPA=t.TEXT_SHARE=t.TEXT_REPORT=t.TEXT_COPY=t.DATA=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/constants/index.ts"),s=s("./src/screens/rakuen/topic/ds.ts"),r=(t.COMPONENT=(0,r.rc)(s.COMPONENT,"Header"),t.TEXT_SPA="网页版查看",t.TEXT_COPY="复制链接",t.TEXT_SHARE="复制分享",t.TEXT_REPORT="举报",t.DATA=["复制链接","复制分享","举报"]);o.STORYBOOK||r.unshift("网页版查看")},"./src/screens/rakuen/topic/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),d=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/constants/index.ts"),c=r(s("./src/screens/rakuen/topic/component/header-title/index.tsx")),p=r(s("./src/screens/rakuen/topic/icon/favor.tsx")),m=s("./src/screens/rakuen/topic/header/ds.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,r=t.$,t=t.navigation,o=r.state.fixed,n=(null==(s=r.params)?void 0:s._url)||u.HOST+"/rakuen/topic/"+r.topicId;return(0,f.jsx)(d.Header,{mode:"transition",statusBarEventsType:"Topic",fixed:o,title:r.topic.title,alias:"帖子",hm:[n,"Topic"],headerTitle:(0,f.jsx)(c.default,{$:r,navigation:t}),headerRight:function(){return(0,f.jsxs)(d.Flex,{children:[(0,f.jsx)(p.default,{$:r}),(0,f.jsx)(d.Header.Popover,{data:["帖子 · "+r.topicId].concat((0,i.default)(m.DATA)),onSelect:function(e){switch((0,l.t)("帖子.右上角菜单",{key:e.includes("帖子")?"浏览器查看":e}),e){case m.TEXT_SPA:(0,a.open)(u.URL_SPA+"/"+(0,a.getSPAParams)("Topic",{topicId:r.topicId}));break;case m.TEXT_COPY:(0,a.copy)(n,"已复制链接");break;case m.TEXT_SHARE:(0,a.copy)("【链接】"+r.title+" | Bangumi番组计划\n"+n,"已复制分享文案");break;case m.TEXT_REPORT:(0,a.open)(u.HOST+"/group/forum");break;default:(0,a.open)(n)}},children:(0,f.jsx)(d.Heatmap,{id:"帖子.右上角菜单"})})]})}})},m.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/rakuen/topic/header/index.tsx#header"})}catch(e){}},"./src/screens/rakuen/topic/hooks.ts":(e,t,s)=>{var c=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.useTopicPage=function(e){var p=e.$,t=(0,g.useIsFocused)(),s=(0,g.useIsFocusedRef)(),m=(0,y.useRef)(null),r=(0,y.useRef)(null),o=(0,y.useRef)(0),n=(0,y.useCallback)(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;try{var t,s,r,o=p.comments.list[e];if((0,x.info)(null==o?void 0:o.floor,.8),v.STORYBOOK)return-1===e?void(0,b.scrollToTop)():void((r=null==(s=document.querySelector('item-post[data-key="'+o.id+'"]'))?void 0:s.offsetTop)&&(0,b.scrollToTop)(r-_._.headerHeight));null!=(t=m.current)&&t.scrollToIndex({animated:!1,index:e,viewOffset:0})}catch(e){console.error("topic/index.js","scrollTo",e)}},[p.comments]),u=(0,y.useCallback)(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;try{(0,h.t)("帖子.楼层跳转",{topicId:p.topicId,index:e});var r,o,n,i,d,a=_.rakuenStore.setting.sliderAnimated;-1===e?(t&&(0,x.info)("#1",.8),v.STORYBOOK?(0,b.scrollToTop)():null!=(r=m.current)&&r.scrollToOffset({animated:!!a||t,offset:0-_._.headerHeight}),(0,x.feedback)(!0),p.updateDirection(-1,"")):(o=p.comments.list[e],t&&(0,x.info)(null==o?void 0:o.floor,.8),v.STORYBOOK?(i=null==(n=document.querySelector('item-post[data-key="'+o.id+'"]'))?void 0:n.offsetTop)&&(0,b.scrollToTop)(i-_._.headerHeight):null!=(d=m.current)&&d.scrollToIndex({animated:!!a||t,index:e,viewOffset:0+_._.headerHeight+s}),(0,x.feedback)(!0))}catch(e){console.error("topic/index.js","onScrollTo",e);try{var l,u,c=null==(l=String(e).match(/but maximum is (\d+)/))?void 0:l[1];c&&(t&&(0,x.info)("#"+c,.5),null!=(u=m.current))&&u.scrollToIndex({animated:t,index:Number(c),viewOffset:0+_._.headerHeight})}catch(e){}}},[p]),e=(0,y.useCallback)(function(e){var t=e.highestMeasuredFrameIndex,s=e.index;try{n(t),setTimeout(function(){8<=o.current||(o.current+=1,n(s))},100)}catch(e){console.error("topic/index.js","onScrollToIndexFailed",e)}},[n]),i=(0,y.useCallback)(function(e){console.log("onJumpTo",e);var s=e||p.postId;if(s){var e=p.comments,t=e.list;if(e._loaded)try{var r=0;t.forEach(function(e,t){r||(e.id===s?(r=t,console.log("scrollIndex",r)):e.sub&&e.sub.forEach(function(e){e.id===s&&(r=t),console.log("scrollIndex sub",r)}))}),r&&n(r)}catch(e){console.error("topic/index.js","onJumpTo",e)}}},[p.comments,p.postId,n]),d=(0,y.useCallback)(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;try{u(t);var e=p.directItems.findIndex(function(e){return e.floor==="#"+(t+1)});e&&-1!==e&&p.updateDirection(e)}catch(e){console.error("topic/index.js","onFloorPress",e)}},[p,u]),a=(0,y.useCallback)(function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;try{var t,r,o,n,i,d,a,l=p.directItems.length;p.directItems.length&&(t=p.state.directIndex,r=Math.min(l-1,Math.max(0,t+(e?1:-1)*s)),0===t&&0===r||-1===t&&0===r&&!e?u(-1,!1):(o=p.directItems[r])&&(n=o.index,i=o.floor,d=S,1===n.length?(u(n[0],!1,d),1<s&&(0,x.info)(i,.8)):(a=_.rakuenStore.setting.subExpand,n[1]>Number(a)-1&&p.onExpand(o.pid),setTimeout(function(){var e=o.pid,t=o.sibling;d=(d+=S)-(j.layoutHeightMap.get(e)||0),t.forEach(function(e){d-=j.layoutHeightMap.get(e)||0}),u(n[0],!1,d),1<s&&(0,x.info)(i,.8)},40)),p.updateDirection(r,i)))}catch(e){console.error("topic/index.js","onDirect",e)}},[p,u]),l=(0,y.useCallback)(function(){try{var e;null!=(e=r.current)&&e.onFocus()}catch(e){console.error("topic/index.js","onShowFixedTextarea",e)}},[]);return(0,g.useRunAfter)((0,f.default)(c.mark(function e(){return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,x.androidKeyboardAdjust)("setAdjustResize"),setTimeout(function(){s.current&&p.setRendered(!0)},400),e.next=4,p.init();case 4:p.postId&&i();case 5:case"end":return e.stop()}},e)}))),(0,g.useKeyboardAdjustResize)(),(0,y.useEffect)(function(){t||(_.uiStore.closePopableSubject(),_.uiStore.closeLikesGrid())},[t]),(0,g.useMount)(function(){return function(){setTimeout(function(){p.setState({fixed:!1})},480)}}),{fixedTextareaRef:r,forwardRef:m,onDirect:a,onFloorPress:d,onJumpTo:i,onScrollToIndexFailed:e,onShowFixedTextarea:l}},r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),y=s("./node_modules/react/index.js"),j=s("./src/screens/_/item/post/utils.ts"),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),b=s("./src/utils/dom/index.ts"),h=s("./src/utils/fetch/index.ts"),g=s("./src/utils/hooks/index.ts"),v=s("./src/constants/index.ts"),S=.2*_._.window.height},"./src/screens/rakuen/topic/icon/favor.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./src/screens/rakuen/topic/icon/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){return e=e.$,(0,l.jsxs)(o.default,{style:e.favorCount?a.styles.withCollect:d._.mr.xs,children:[(0,l.jsx)(i.IconHeader,{name:e.isFavor?"md-star":"md-star-outline",color:e.isFavor?d._.colorYellow:d._.colorDesc,onPress:e.setFavor,children:(0,l.jsx)(n.Heatmap,{right:33,bottom:7,id:"帖子.设置收藏"})}),!!e.favorCount&&(0,l.jsx)(n.Text,{style:a.styles.num,size:10,bold:!0,children:e.favorCount})]})});try{favor.displayName="favor",favor.__docgenInfo={description:"",displayName:"favor",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenTopic"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/icon/favor.tsx#favor"]={docgenInfo:favor.__docgenInfo,name:"favor",path:"src/screens/rakuen/topic/icon/favor.tsx#favor"})}catch(e){}},"./src/screens/rakuen/topic/icon/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({withCollect:{paddingRight:s._.sm},num:{position:"absolute",right:7,bottom:5}})},"./src/screens/rakuen/topic/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),l=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/utils/hooks/index.ts"),c=r(s("./src/screens/rakuen/topic/bottom/index.tsx")),p=r(s("./src/screens/rakuen/topic/component/heatmaps/index.tsx")),m=r(s("./src/screens/rakuen/topic/component/touch-scroll/index.tsx")),f=r(s("./src/screens/rakuen/topic/header/index.tsx")),y=s("./src/screens/rakuen/topic/hooks.ts"),j=r(s("./src/screens/rakuen/topic/list/index.tsx")),r=r(s("./src/screens/rakuen/topic/store/index.ts")),_=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ic)(r.default,function(e,t){var t=(0,y.useTopicPage)(t),s=t.forwardRef,r=t.fixedTextareaRef,o=t.onFloorPress,n=t.onShowFixedTextarea,i=t.onScrollToIndexFailed,d=t.onDirect;return(0,u.useObserver)(function(){return(0,_.jsxs)(a.Component,{id:"screen-topic",children:[(0,_.jsx)(l.TapListener,{children:(0,_.jsxs)(a.Page,{statusBarEvent:!1,children:[(0,_.jsx)(j.default,{forwardRef:s,onScrollToIndexFailed:i,onShowFixedTextarea:n}),(0,_.jsx)(m.default,{onPress:o})]})}),(0,_.jsx)(f.default,{}),(0,_.jsx)(c.default,{fixedTextareaRef:r,onDirect:d}),(0,_.jsx)(p.default,{})]})})});try{topic.displayName="topic",topic.__docgenInfo={description:"",displayName:"topic",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/index.tsx#topic"]={docgenInfo:topic.__docgenInfo,name:"topic",path:"src/screens/rakuen/topic/index.tsx#topic"})}catch(e){}},"./src/screens/rakuen/topic/list/ds.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.LISTVIEW_PROPS=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0,s("./src/utils/index.ts")),n=s("./src/utils/dev/index.ts"),i=s("./src/constants/index.ts"),r=r(s("./src/screens/rakuen/topic/component/top/index.tsx")),d=s("./src/screens/rakuen/topic/ds.ts"),s=s("./node_modules/react/jsx-runtime.js"),d=t.COMPONENT=(0,n.rc)(d.COMPONENT,"List");t.COMPONENT_MAIN=(0,n.rc)(d),t.LISTVIEW_PROPS={keyExtractor:o.keyExtractor,scrollEventThrottle:4,initialNumToRender:120,maxToRenderPerBatch:120,updateCellsBatchingPeriod:120,scrollToTop:!0,keyboardDismissMode:"on-drag",ListHeaderComponent:(0,s.jsx)(r.default,{})},t.DEFAULT_PROPS={forwardRef:i.FN,data:i.LIST_EMPTY,postId:"",onScroll:i.FN,onScrollToIndexFailed:i.FN,onHeaderRefresh:i.FN,onShowFixedTextarea:i.FN}},"./src/screens/rakuen/topic/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),n=r(s("./src/screens/rakuen/topic/list/list.tsx")),r=s("./src/screens/rakuen/topic/list/ds.tsx"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.forwardRef,r=e.onShowFixedTextarea,e=e.onScrollToIndexFailed,t=t.$;return(0,i.jsx)(n.default,{forwardRef:s,data:t.comments,postId:t.postId,onScroll:t.onScroll,onScrollToIndexFailed:e,onHeaderRefresh:t.fetchTopic,onShowFixedTextarea:r})},r.COMPONENT)},"./src/screens/rakuen/topic/list/list.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var n;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((n=o?Object.getOwnPropertyDescriptor(e,s):null)&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js"))),l=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),m=r(s("./src/screens/rakuen/topic/component/item/index.tsx")),f=s("./src/screens/rakuen/topic/list/ds.tsx"),y=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}r=(0,o.memo)(function(e){var t=e.forwardRef,s=e.data,r=e.postId,o=e.onScroll,n=e.onScrollToIndexFailed,i=e.onHeaderRefresh,d=e.onShowFixedTextarea,e=(0,a.useCallback)(function(e){var t=e.item,e=e.index;return(0,y.jsx)(m.default,{item:t,index:e,onShowFixedTextarea:d})},[d]),r=Object.assign({},f.LISTVIEW_PROPS,{keyExtractor:p.keyExtractor,style:c._.container.content,contentContainerStyle:c._.container.bottom,lazy:r?void 0:4,progressViewOffset:c._.ios(c._.statusBarHeight,0),renderItem:e,onScroll:o,onScrollToIndexFailed:n,onHeaderRefresh:i}),e=s.list;return e.length<=80?(0,y.jsx)(l.ListView,Object.assign({},r,{ref:t,data:s})):(0,y.jsx)(u.PaginationList2,Object.assign({},r,{forwardRef:t,data:e,limit:24}))},f.DEFAULT_PROPS,f.COMPONENT_MAIN);t.default=r;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{forwardRef:{defaultValue:null,description:"",name:"forwardRef",required:!0,type:{name:"Fn"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"{ list: any[]; pagination: { page: number; pageTotal: number; }; _list: any[]; _loaded: number | boolean; } | { list: any[]; pagination?: { page: number; pageTotal: number; }; _list?: { floor: string; avatar: Avatar<...>; ... 8 more ...; sub: CommentsItem[]; }[]; _loaded?: Loaded; }"}},postId:{defaultValue:null,description:"",name:"postId",required:!0,type:{name:"string"}},onScroll:{defaultValue:null,description:"",name:"onScroll",required:!0,type:{name:"Fn"}},onScrollToIndexFailed:{defaultValue:null,description:"",name:"onScrollToIndexFailed",required:!0,type:{name:"Fn"}},onHeaderRefresh:{defaultValue:null,description:"",name:"onHeaderRefresh",required:!0,type:{name:"Fn"}},onShowFixedTextarea:{defaultValue:null,description:"",name:"onShowFixedTextarea",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/topic/list/list.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/rakuen/topic/list/list.tsx#list"})}catch(e){}},"./src/screens/rakuen/topic/store/action.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),n=r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),d=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),p=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),y=s("./src/components/header/utils.tsx"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),x=r(s("./src/utils/cache-manager/index.ts")),b=s("./src/utils/fetch/index.ts"),h=s("./src/utils/kv/index.ts"),g=r(s("./src/utils/thirdParty/html-entities-decoder.ts")),v=s("./src/constants/index.ts"),r=r(s("./src/screens/rakuen/topic/store/fetch.ts")),S=s("./src/screens/rakuen/topic/store/ds.ts");function O(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=r?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,p.default)(this,e)}}var T;t.default=(s=r.default,(0,u.default)(k,s),T=O(k),(0,o.default)(k));function k(){var u;(0,a.default)(this,k);for(var s,r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return u=T.call.apply(T,[this].concat(t)),(0,f.default)((0,l.default)(u),"cacheAvatars",function(){u.comments.list.forEach(function(e){var t="avatar|"+e.userId;x.default.has(t)||x.default.set(t,e.avatar),e.sub.forEach(function(e){var t="avatar|"+e.userId;x.default.has(t)||x.default.set(e.userId,e.avatar)})})}),(0,f.default)((0,l.default)(u),"toggleReverseComments",function(){var e=u.state.reverse;(0,b.t)("帖子.吐槽倒序",{topicId:u.topicId,reverse:!e}),u.setState({reverse:!e}),u.setStorage(S.NAMESPACE)}),(0,f.default)((0,l.default)(u),"toggleFilterMe",function(){var e=u.state.filterMe;(0,b.t)("帖子.与我相关",{topicId:u.topicId,filterMe:!e}),u.setState({filterMe:!e,filterFriends:!1}),u.save()}),(0,f.default)((0,l.default)(u),"toggleFilterFriends",function(){var e=u.state.filterFriends;(0,b.t)("帖子.好友相关",{topicId:u.topicId,filterFriends:!e}),u.setState({filterMe:!1,filterFriends:!e}),u.save()}),(0,f.default)((0,l.default)(u),"showFixedTextarea",function(e,t,s,r){(0,b.t)("帖子.显示评论框",{topicId:u.topicId});e=e?"回复 "+e+"：":"";r&&(e+=r=64<=(r=(0,_.HTMLDecode)((0,_.removeHTMLTag)(r,!1))).length?r.slice(0,64)+"...":r),u.setState({placeholder:e,replySub:t,message:s})}),(0,f.default)((0,l.default)(u),"closeFixedTextarea",function(){u.setState({placeholder:"",replySub:"",message:"",editPostId:""})}),(0,f.default)((0,l.default)(u),"showFixedTextareaEdit",(s=(0,d.default)(i.mark(function e(t,s){var r;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.rakuenStore.fetchTopicEdit(t);case 2:if(r=e.sent){e.next=6;break}return(0,_.info)("未能获取到回复内容，可能授权过期了"),e.abrupt("return");case 6:u.setState({value:""}),setTimeout(function(){u.setState({editPostId:t,value:r}),s()},0);case 8:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})),(0,f.default)((0,l.default)(u),"onChange",function(e){u.setState({value:e})}),(0,f.default)((0,l.default)(u),"recoveryContent",function(e){(0,b.t)("帖子.回复失败",{topicId:u.topicId}),(0,_.info)("回复失败，可能是cookie失效了"),u.setState({value:""}),setTimeout(function(){u.setState({value:e})},160)}),(0,f.default)((0,l.default)(u),"setFavor",(0,d.default)(i.mark(function e(){var t,s,r;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!u.isFavor,e.next=3,j.rakuenStore.setFavorV2(u.topicId,t);case 3:200===(null==(s=e.sent)?void 0:s.code)&&((0,b.t)("帖子.设置收藏",{topicId:u.topicId,isFavor:t}),t)&&(s={avatar:u.avatar,userId:u.userId,userName:u.userName,title:u.title,group:u.group,time:u.time},null!=(r=s.avatar)&&r.includes("icon.jpg")&&(s.avatar=u.groupThumb),u.topicId.includes("ep/")&&(r=null==(r=String(u.epFormHTML).match(/\/ 首播:(.+?)<\/span>/))?void 0:r[1])&&(s.time="首播:"+r),(0,h.update)("favor_"+u.topicId.replace("/","_"),s));case 5:case"end":return e.stop()}},e)}))),(0,f.default)((0,l.default)(u),"updateShowHeaderTitle",function(e){u.setState({showHeaderTitle:e})}),(0,f.default)((0,l.default)(u),"toggleExpand",function(t){var e=u.state.expands;u.setState({expands:e.includes(t)?e.filter(function(e){return e!==t}):[].concat((0,n.default)(e),[t])}),u.save()}),(0,f.default)((0,l.default)(u),"onExpand",function(e){u.state.expands.includes(String(e))||u.toggleExpand(String(e))}),(0,f.default)((0,l.default)(u),"updateDirection",function(e){u.setState({directIndex:e,directFloor:1<arguments.length&&void 0!==arguments[1]?arguments[1]:""}),u.save()}),(0,f.default)((0,l.default)(u),"updateVisibleBottom",_.updateVisibleBottom.bind((0,l.default)(u))),(0,f.default)((0,l.default)(u),"onScrollY",0),(0,f.default)((0,l.default)(u),"onScroll",function(e){u.updateVisibleBottom(e),j.uiStore.closePopableSubject(),j.uiStore.closeLikesGrid();var e=e.nativeEvent.contentOffset.y,t=(u.onScrollY=e,u.state.fixed);t&&e>y.HEADER_TRANSITION_HEIGHT||!t&&e<=y.HEADER_TRANSITION_HEIGHT||u.setState({fixed:e>y.HEADER_TRANSITION_HEIGHT})}),(0,f.default)((0,l.default)(u),"setRendered",function(e){u.setState({rendered:e})}),(0,f.default)((0,l.default)(u),"doSubmit",function(e){var t;if(u.topicId.includes("group/"))t="group/topic";else if(u.topicId.includes("subject/"))t="subject/topic";else if(u.topicId.includes("ep/"))t="subject/ep";else if(u.topicId.includes("crt/"))t="character";else{if(!u.topicId.includes("prsn/"))return;t="person"}var s=u.state,r=s.replySub,s=s.editPostId;s?u.doEditReply(s,e):r?u.doReplySub(e,t):u.doReply(e,t)}),(0,f.default)((0,l.default)(u),"doEditReply",function(e,t){(0,b.t)("帖子.编辑回复",{topicId:u.topicId,postId:e});var s=u.topic.formhash;j.rakuenStore.doEditReply({postId:e,content:t,formhash:s},(0,d.default)(i.mark(function e(){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.setState({value:"",editPostId:""}),e.next=3,u.fetchTopic();case 3:(0,_.feedback)();case 4:case"end":return e.stop()}},e)})))}),(0,f.default)((0,l.default)(u),"doReply",function(s,e){(0,b.t)("帖子.回复",{topicId:u.topicId,sub:!1});var t=u.topic.formhash;j.rakuenStore.doReply({type:e,topicId:u.topicId.match(/\d+/g)[0],content:s,formhash:t},function(e){var t={};try{t=JSON.parse(e)}catch(e){}v.IOS&&"ok"!==t.status?u.recoveryContent(s):u.setState({value:""}),(0,_.feedback)(),u.fetchTopic()})}),(0,f.default)((0,l.default)(u),"doReplySub",function(s,e){(0,b.t)("帖子.回复",{topicId:u.topicId,sub:!0});var t=u.state,r=t.placeholder,o=t.replySub,t=t.message,n=u.topic.formhash,o=o.split(","),o=(0,c.default)(o,6),i=o[1],d=o[2],a=o[4],o=o[5],l=s;t&&(t=(0,g.default)(t).replace(/<div class="quote"><q>.*<\/q><\/div>/,""),l="[quote][b]"+r+"[/b] 说: "+(0,_.removeHTMLTag)(t,!1)+"[/quote]\n"+s),j.rakuenStore.doReply({type:e,content:l,formhash:n,topicId:String(i||"").trim(),related:String(d||"").trim(),sub_reply_uid:String(a||"").trim(),post_uid:String(o||"").trim()},function(e){var t={};try{t=JSON.parse(e)}catch(e){}v.IOS&&"ok"!==t.status?u.recoveryContent(s):u.setState({value:""}),(0,_.feedback)(),u.fetchTopic()})}),(0,f.default)((0,l.default)(u),"doDeleteReply",function(e){e&&((0,b.t)("帖子.删除回复",{topicId:u.topicId}),j.rakuenStore.doDeleteReply({url:v.HOST+"/"+e},function(){(0,_.feedback)(),(0,_.info)("已删除"),u.fetchTopic()}))}),(0,f.default)((0,l.default)(u),"doTranslate",(0,d.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.state.translateResult.length)return e.abrupt("return");e.next=2;break;case 2:return(0,b.t)("帖子.翻译内容",{topicId:u.topicId}),e.prev=3,t=(0,_.loading)(),e.next=7,(0,b.baiduTranslate)(String(u.title+"\n"+u.html).replace(/<br \/>/g,"\n").replace(/<\/?[^>]*>/g,""));case 7:if(s=e.sent,t(),s=JSON.parse(s),s=s.trans_result,Array.isArray(s))return u.setState({translateResult:s}),e.abrupt("return");e.next=13;break;case 13:(0,_.info)("翻译失败, 请重试"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),t&&t(),(0,_.info)("翻译失败, 请重试");case 20:case"end":return e.stop()}},e,null,[[3,16]])}))),(0,f.default)((0,l.default)(u),"doTranslateFloor",(r=(0,d.default)(i.mark(function e(t,s){var r,o,n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=u.state.translateResultFloor)[t])return e.abrupt("return");e.next=3;break;case 3:return(0,b.t)("帖子.翻译内容",{floorId:t}),e.prev=4,o=(0,_.loading)(),e.next=8,(0,b.baiduTranslate)((0,_.removeHTMLTag)(s.replace(/<br>/g,"\n"),!1));case 8:if(n=e.sent,o(),n=JSON.parse(n),n=n.trans_result,Array.isArray(n))return u.setState({translateResultFloor:Object.assign({},r,(0,f.default)({},t,n.map(function(e){return e.dst}).join("\n")))}),e.abrupt("return");e.next=14;break;case 14:(0,_.info)("翻译失败, 请重试"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),o&&o(),(0,_.info)("翻译失败, 请重试");case 21:case"end":return e.stop()}},e,null,[[4,17]])})),function(e,t){return r.apply(this,arguments)})),u}},"./src/screens/rakuen/topic/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.index-of.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),o=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),m=s("./node_modules/mobx/dist/mobx.esm.js"),f=s("./src/stores/index.ts"),y=s("./src/utils/index.ts"),j=r(s("./src/utils/cache-manager/index.ts")),_=s("./src/constants/index.ts"),r=r(s("./src/screens/rakuen/topic/store/state.ts")),x=s("./src/screens/rakuen/topic/store/ds.ts");function b(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var h;t.default=(s=r.default,(0,a.default)(g,s),h=b(g),(0,n.default)(g,[{key:"topicId",get:function(){var e=this.params.topicId,e=void 0===e?"":e;return e?(null==(e=e.split("#"))?void 0:e[0])||"":"0"}},{key:"postId",get:function(){var e=this.params.topicId,e=(void 0===e?"":e).split("#post_");return(0,i.default)(e,2)[1]}},{key:"namespace",get:function(){return x.NAMESPACE+"|"+this.topicId}},{key:"topic",get:function(){return f.rakuenStore.topic(this.topicId)}},{key:"topicFormCDN",get:function(){var e=this.state.topic;return e._loaded?e:f.rakuenStore.topicFormCDN(this.topicId.replace("group/",""))}},{key:"comments",get:function(){var t=this,e=this.state,s=e.filterMe,r=e.filterFriends,e=e.reverse,o=f.systemStore.setting.filterDefault,n=f.rakuenStore.comments(this.topicId),n=n._loaded?n:this.state.comments,e=e?n.list.slice().reverse():n.list;return(o||this.isLimit)&&(e=e.filter(function(e){return!(null!=(e=e.avatar)&&e.includes(_.URL_DEFAULT_AVATAR))}).map(function(e){return Object.assign({},e,{sub:e.sub.filter(function(e){return!(null!=(e=e.avatar)&&e.includes(_.URL_DEFAULT_AVATAR))})})})),s?Object.assign({},n,{list:e.filter(function(e){return-1!==e.sub.findIndex(function(e){return e.userId===t.myId})||e.userId===t.myId}),pagination:{page:1,pageTotal:1}}):r?Object.assign({},n,{list:e.filter(function(e){return-1!==e.sub.findIndex(function(e){return t.myFriendsMap[e.userId]})||t.myFriendsMap[e.userId]}),pagination:{page:1,pageTotal:1}}):Object.assign({},n,{list:e})}},{key:"commentMeCount",get:function(){var t=this;return f.rakuenStore.comments(this.topicId).list.filter(function(e){return-1!==e.sub.findIndex(function(e){return e.userId===t.myId})||e.userId===t.myId}).length}},{key:"commentFriendsCount",get:function(){var t=this;return f.rakuenStore.comments(this.topicId).list.filter(function(e){return-1!==e.sub.findIndex(function(e){return t.myFriendsMap[e.userId]})||t.myFriendsMap[e.userId]}).length}},{key:"directItems",get:function(){var n,e=this.comments,t=e.list,e=e._loaded,e="directItems|"+this.topicId+"|"+e;return j.default.get(e)?j.default.get(e):(n=[],t.forEach(function(s,r){n.push({id:Number(s.id),floor:s.floor,index:[r]});var o=[];s.sub.forEach(function(e,t){o.push(Number(e.id)),n.push({pid:Number(s.id),id:Number(e.id),floor:e.floor,index:[r,t],sibling:[].concat(o)})})}),n.sort(function(e,t){return(0,y.asc)(e.id,t.id)}),j.default.set(e,n))}},{key:"isEp",get:function(){return 0===this.topicId.indexOf("ep/")}},{key:"isMono",get:function(){return 0===this.topicId.indexOf("prsn/")||0===this.topicId.indexOf("crt/")}},{key:"monoId",get:function(){return 0===this.topicId.indexOf("prsn/")?this.topicId.replace("prsn/","person/"):0===this.topicId.indexOf("crt/")?this.topicId.replace("crt/","character/"):this.topicId}},{key:"epFormHTML",get:function(){var e=this.topicId.replace("ep/","");return f.subjectStore.epFormHTML(e)}},{key:"isWebLogin",get:function(){return f.userStore.isWebLogin}},{key:"readed",get:function(){return f.rakuenStore.readed(this.topicId)}},{key:"myId",get:function(){return f.userStore.myId}},{key:"myFriendsMap",get:function(){return f.usersStore.myFriendsMap}},{key:"isUGCAgree",get:function(){return f.systemStore.isUGCAgree}},{key:"isFavor",get:function(){return f.rakuenStore.favorV2(this.topicId)}},{key:"favorCount",get:function(){return f.rakuenStore.favorCount(this.topicId)}},{key:"setting",get:function(){return f.rakuenStore.setting}},{key:"isLimit",get:function(){return f.userStore.isLimit}},{key:"filterDelete",get:function(){return f.rakuenStore.setting.filterDelete}},{key:"postUsersMap",get:function(){var t={};return f.rakuenStore.comments(this.topicId).list.forEach(function(e){t[e.userName]||(t[e.userName]={userId:e.userId,userName:e.userName,avatar:e.avatar}),e.sub.forEach(function(e){t[e.userName]||(t[e.userName]={userId:e.userId,userName:e.userName,avatar:e.avatar})})}),t}},{key:"isBlockUser",value:function(r,o){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return(0,m.computed)(function(){return-1!==f.rakuenStore.setting.blockUserIds.findIndex(function(e){var e=e.split("@"),e=(0,i.default)(e,2),t=e[0],e=e[1];if("undefined"===e)return t===o;if(n){var s=n.split(",");if(7===s.length&&e==s[5])return!0}return e==r||t===o})}).get()}},{key:"title",get:function(){return(0,y.HTMLDecode)(("undefined"===this.topic.title?"":this.topic.title)||this.params._title||this.topicFormCDN.title||"")}},{key:"subTitle",get:function(){var e;return!this.topicId.includes("ep/")||(e=(0,y.HTMLDecode)(this.params._title||""))===this.title?"":e}},{key:"group",get:function(){return this.isMono?this.topic.title||this.params._title:this.topic.group||this.params._group||this.topicFormCDN.group||""}},{key:"groupThumb",get:function(){var e=this.params,t=e._group,e=e._groupThumb;return e||(t?f.rakuenStore.groupThumb(t):this.topic.groupThumb||this.topicFormCDN.groupThumb||"")}},{key:"groupHref",get:function(){return this.topic.groupHref||this.topicFormCDN.groupHref||""}},{key:"time",get:function(){return this.topic.time||this.topicFormCDN.time||""}},{key:"avatar",get:function(){return this.topic.avatar||this.params._avatar||this.topicFormCDN.avatar||""}},{key:"userId",get:function(){return this.topic.userId||this.params._userId||this.topicFormCDN.userId||""}},{key:"userName",get:function(){return(0,y.HTMLDecode)(this.topic.userName||this.params._userName||this.topicFormCDN.userName||"")}},{key:"userSign",get:function(){return this.topic.userSign||this.topicFormCDN.userSign||""}},{key:"html",get:function(){return this.isEp?this.epFormHTML||this.params._desc:(this.topic.message||this.topicFormCDN.message||"").replace(/(<br>)+/g,"<br>")}}]),(0,p.default)((t=g).prototype,"topicId",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"topicId"),t.prototype),(0,p.default)(t.prototype,"postId",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"postId"),t.prototype),(0,p.default)(t.prototype,"namespace",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"namespace"),t.prototype),(0,p.default)(t.prototype,"topic",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"topic"),t.prototype),(0,p.default)(t.prototype,"topicFormCDN",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"topicFormCDN"),t.prototype),(0,p.default)(t.prototype,"comments",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"comments"),t.prototype),(0,p.default)(t.prototype,"commentMeCount",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"commentMeCount"),t.prototype),(0,p.default)(t.prototype,"commentFriendsCount",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"commentFriendsCount"),t.prototype),(0,p.default)(t.prototype,"directItems",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"directItems"),t.prototype),(0,p.default)(t.prototype,"isEp",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"isEp"),t.prototype),(0,p.default)(t.prototype,"isMono",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"isMono"),t.prototype),(0,p.default)(t.prototype,"monoId",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoId"),t.prototype),(0,p.default)(t.prototype,"epFormHTML",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"epFormHTML"),t.prototype),(0,p.default)(t.prototype,"isWebLogin",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"isWebLogin"),t.prototype),(0,p.default)(t.prototype,"readed",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"readed"),t.prototype),(0,p.default)(t.prototype,"myId",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"myId"),t.prototype),(0,p.default)(t.prototype,"myFriendsMap",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"myFriendsMap"),t.prototype),(0,p.default)(t.prototype,"isUGCAgree",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"isUGCAgree"),t.prototype),(0,p.default)(t.prototype,"isFavor",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"isFavor"),t.prototype),(0,p.default)(t.prototype,"favorCount",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"favorCount"),t.prototype),(0,p.default)(t.prototype,"setting",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"setting"),t.prototype),(0,p.default)(t.prototype,"isLimit",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"isLimit"),t.prototype),(0,p.default)(t.prototype,"filterDelete",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"filterDelete"),t.prototype),(0,p.default)(t.prototype,"postUsersMap",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"postUsersMap"),t.prototype),(0,p.default)(t.prototype,"title",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"title"),t.prototype),(0,p.default)(t.prototype,"subTitle",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"subTitle"),t.prototype),(0,p.default)(t.prototype,"group",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"group"),t.prototype),(0,p.default)(t.prototype,"groupThumb",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"groupThumb"),t.prototype),(0,p.default)(t.prototype,"groupHref",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"groupHref"),t.prototype),(0,p.default)(t.prototype,"time",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"time"),t.prototype),(0,p.default)(t.prototype,"avatar",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"avatar"),t.prototype),(0,p.default)(t.prototype,"userId",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"userId"),t.prototype),(0,p.default)(t.prototype,"userName",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"userName"),t.prototype),(0,p.default)(t.prototype,"userSign",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"userSign"),t.prototype),(0,p.default)(t.prototype,"html",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"html"),t.prototype),t);function g(){var e;(0,o.default)(this,g);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=h.call.apply(h,[this].concat(s)),(0,c.default)((0,d.default)(e),"save",function(){return e.saveStorage(e.namespace,x.EXCLUDE_STATE)}),e}},"./src/screens/rakuen/topic/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;var r=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),s=(t.NAMESPACE="ScreenTopic",t.EXCLUDE_STATE={fixed:!1,rendered:s.STORYBOOK,visibleBottom:r._.window.height,showHeaderTitle:!1,placeholder:"",value:"",replySub:"",editPostId:"",message:"",translateResult:[],translateResultFloor:{},topic:{_loaded:0},comments:{list:[],pagination:{page:0,pageTotal:0},_list:[],_loaded:0}});t.STATE=Object.assign({},s,{expands:[],filterMe:!1,filterFriends:!1,reverse:!1,favor:{favored:!1,count:0,_loaded:0},directIndex:-1,directFloor:"",_loaded:!1})},"./src/screens/rakuen/topic/store/fetch.ts":(e,t,s)=>{var a=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),y=s("./src/utils/kv/index.ts"),j=r(s("./src/utils/thirdParty/html-entities-decoder.ts")),r=r(s("./src/screens/rakuen/topic/store/computed.ts"));function _(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var x;t.default=(s=r.default,(0,d.default)(b,s),x=_(b),(0,n.default)(b));function b(){var d;(0,i.default)(this,b);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return d=x.call.apply(x,[this].concat(t)),(0,p.default)((0,l.default)(d),"fetchTopic",function(){return m.rakuenStore.fetchTopic({topicId:d.topicId})}),(0,p.default)((0,l.default)(d),"fetchEpFormHTML",function(){var e=d.topicId.replace("ep/","");return m.subjectStore.fetchEpFormHTML(e)}),(0,p.default)((0,l.default)(d),"fetchTopicFromOSS",(0,o.default)(a.mark(function e(){var t,s,r,o,n,i;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.topic._loaded)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,e.next=5,(0,y.get)("topic_"+d.topicId.replace("/","_"));case 5:if(t=e.sent){e.next=9;break}return d.updateTopicThirdParty(),e.abrupt("return");case 9:s=t.ts,i=t.topic,r=t.comments,o=(0,f.getTimestamp)(),"object"==typeof i&&"object"==typeof r&&(i={topic:Object.assign({},i,{_loaded:o})},null!=r&&null!=(n=r.list)&&null!=(n=n[0])&&n.floor&&!(2<=r.list.length&&1===r.list[0].floor.localeCompare(r.list[1].floor))&&(i.comments=Object.assign({},r,{_loaded:o})),d.setState(i)),14400<=o-s&&d.updateTopicThirdParty(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(2);case 17:case"end":return e.stop()}},e,null,[[2,15]])}))),(0,p.default)((0,l.default)(d),"updateTopicThirdParty",function(){setTimeout(function(){var e=d.topic,t=e._loaded,e=e.formhash;if(t&&e)try{(0,y.update)("topic_"+d.topicId.replace("/","_"),{topic:(0,f.omit)(d.topic,["formhash","lastview","close","_loaded"]),comments:Object.assign({},d.comments,{list:d.comments.list.filter(function(e,t){return t<16}).map(function(e){return Object.assign({},(0,f.omit)(e,["replySub","erase","message","sub"]),{message:(0,j.default)(e.message),sub:e.sub.filter(function(e,t){return t<8}).map(function(e){return Object.assign({},(0,f.omit)(e,["replySub","erase","message"]),{message:(0,j.default)(e.message)})})})})})})}catch(e){}},1e4)}),d}},"./src/screens/rakuen/topic/store/index.ts":(e,t,s)=>{var d=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),r=r(s("./src/screens/rakuen/topic/store/action.ts")),y=s("./src/screens/rakuen/topic/store/ds.ts");function j(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var _,x=!1,r=(s=r.default,(0,i.default)(b,s),_=j(b),(0,n.default)(b));function b(){var i;(0,a.default)(this,b);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i=_.call.apply(_,[this].concat(t)),(0,p.default)((0,l.default)(i),"init",(0,o.default)(d.mark(function e(){var t,s,r,o,n;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.state._loaded,s=(0,f.getTimestamp)(),r=!t||60<s-Number(t),e.next=5,i.getStorage(y.NAMESPACE);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:return o=e.t0,e.prev=9,e.next=12,i.getStorage(i.namespace);case 12:if(e.t1=e.sent,e.t1){e.next=15;break}e.t1={};case 15:if(n=e.t1,i.setState(Object.assign({},n,y.EXCLUDE_STATE,{reverse:o.reverse,_loaded:r?s:t})),i.fetchTopicFromOSS(),x||(m.rakuenStore.getFavor(),x=!0),!r){e.next=28;break}if(i.isEp?i.fetchEpFormHTML():m.rakuenStore.checkIsFavor(i.topicId),m.usersStore.updateFriendsMap(),i.params._noFetch){e.next=28;break}return e.next=26,i.fetchTopic();case 26:return setTimeout(function(){i.cacheAvatars()},0),e.abrupt("return",!0);case 28:return e.abrupt("return",!0);case 31:return e.prev=31,e.t2=e.catch(9),i.setState(Object.assign({},y.EXCLUDE_STATE,{reverse:o.reverse,_loaded:r?s:t})),e.abrupt("return",!0);case 35:case"end":return e.stop()}},e,null,[[9,31]])}))),i}t.default=r},"./src/screens/rakuen/topic/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/createClass.js"))),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=s("./node_modules/mobx/dist/mobx.esm.js"),r=r(s("./src/utils/store/index.ts")),p=s("./src/screens/rakuen/topic/store/ds.ts");function m(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var f;t.default=(s=r.default,(0,d.default)(y,s),f=m(y),(0,o.default)(y));function y(){var e;(0,n.default)(this,y);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=f.call.apply(f,[this].concat(s)),(0,u.default)((0,i.default)(e),"params",void 0),(0,u.default)((0,i.default)(e),"state",(0,c.observable)(p.STATE)),e}},"./src/screens/rakuen/v2/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Component")},"./src/screens/rakuen/v2/component/heapmaps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Heatmaps")},"./src/screens/rakuen/v2/component/heapmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/v2/component/heapmaps/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Heatmap,{right:n._.wind+62,bottom:n._.window.height-n._.tabsHeaderHeight-12,id:"超展开.标签页切换",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:n._.wind,bottom:n._.window.height-n._.tabsHeaderHeight-12,id:"超展开.标签页点击",transparent:!0}),(0,d.jsx)(o.Heatmap,{bottom:n._.bottom,id:"超展开",screen:"Rakuen"})]})},i.COMPONENT)},"./src/screens/rakuen/v2/component/item/avatar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=void 0;t.EVENT={id:"超展开.跳转"}},"./src/screens/rakuen/v2/component/item/avatar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./src/screens/_/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/v2/component/item/avatar/ds.ts"),d=s("./src/screens/rakuen/v2/component/item/avatar/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=e.avatar,r=e.userName,e=e.userId,t=t.navigation;return(0,a.jsx)(o.default,{style:d.styles.avatar,children:(0,a.jsx)(n.Avatar,{navigation:t,src:s,name:r,userId:e,event:i.EVENT})})})},"./src/screens/rakuen/v2/component/item/avatar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({avatar:{marginTop:s._.md-5}})},"./src/screens/rakuen/v2/component/item/btn-popover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),p=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),r=s("./src/utils/decorators/index.ts"),f=s("./src/constants/index.ts"),y=s("./src/screens/rakuen/v2/component/item/btn-popover/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r=e.groupCn,o=e.groupHref,n=e.href,i=e.topicId,d=e.userId,a=e.userName,e=e.isGroup,l=t.$,u=t.navigation;return f.SHARE_MODE?(0,j.jsx)(c.default,{style:y.styles.placeholder}):(t=i.includes("subject/"),s=["进入"+(s=e?"小组":t||i.includes("ep/")?"条目":"人物"),"屏蔽"+s],(e||t)&&s.push("屏蔽用户"),(0,j.jsx)(m.Popover,{style:y.styles.touch,data:s,onSelect:function(e){l.onExtraSelect(e,{topicId:i,href:n,groupCn:r,groupHref:o,userId:d,userName:a},u)},children:(0,j.jsx)(p.Flex,{style:y.styles.icon,justify:"center",children:(0,j.jsx)(p.Iconfont,{name:"md-more-vert",size:18})})}))})},"./src/screens/rakuen/v2/component/item/btn-popover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({placeholder:{minWidth:s._._wind},touch:{marginRight:4,marginTop:2,borderRadius:20,overflow:"hidden"},icon:{width:36,height:36}})},"./src/screens/rakuen/v2/component/item/content/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),o=s("./src/utils/decorators/index.ts"),l=r(s("./src/screens/rakuen/v2/component/item/detail/index.tsx")),u=r(s("./src/screens/rakuen/v2/component/item/title/index.tsx")),c=s("./src/screens/rakuen/v2/component/item/content/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e){var t=e.groupCn,s=e.replyCount,r=e.time,o=e.title,n=e.topicId,i=e.userId,d=e.userName,e=e.isGroup;return(0,p.jsxs)(a.default,{style:c.styles.item,children:[(0,p.jsx)(u.default,{topicId:n,title:o,replyCount:s,isGroup:e}),(0,p.jsx)(l.default,{time:r,groupCn:t,userName:d,userId:i})]})});try{content.displayName="content",content.__docgenInfo={description:"",displayName:"content",props:{groupCn:{defaultValue:null,description:"",name:"groupCn",required:!0,type:{name:"any"}},replyCount:{defaultValue:null,description:"",name:"replyCount",required:!0,type:{name:"any"}},time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"any"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"any"}},topicId:{defaultValue:null,description:"",name:"topicId",required:!0,type:{name:"any"}},userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"any"}},userName:{defaultValue:null,description:"",name:"userName",required:!0,type:{name:"any"}},isGroup:{defaultValue:null,description:"",name:"isGroup",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/component/item/content/index.tsx#content"]={docgenInfo:content.__docgenInfo,name:"content",path:"src/screens/rakuen/v2/component/item/content/index.tsx#content"})}catch(e){}},"./src/screens/rakuen/v2/component/item/content/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({item:{paddingTop:s._.md-s._.web(7,4),paddingBottom:s._.md-4,paddingLeft:s._.sm+1,marginTop:-3,borderRadius:s._.radiusXs,overflow:"hidden"}})},"./src/screens/rakuen/v2/component/item/detail/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.time,s=e.groupCn,r=e.userName,e=e.userId;return(0,a.jsxs)(o.Text,{style:i._.mt.xs,size:11,lineHeight:13,numberOfLines:1,children:[(0,a.jsxs)(o.Text,{type:"sub",size:11,lineHeight:13,children:[t?(0,d.correctAgo)(t):"",s&&t?" / ":""]}),(0,a.jsx)(o.Text,{type:"sub",size:11,lineHeight:13,children:s}),!!r&&(0,a.jsxs)(n.Name,{userId:e,showFriend:!0,type:"sub",size:11,lineHeight:13,disabled:!0,children:[" ","/ ",r]})]})});try{detail.displayName="detail",detail.__docgenInfo={description:"",displayName:"detail",props:{time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"any"}},groupCn:{defaultValue:null,description:"",name:"groupCn",required:!0,type:{name:"any"}},userName:{defaultValue:null,description:"",name:"userName",required:!0,type:{name:"any"}},userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/component/item/detail/index.tsx#detail"]={docgenInfo:detail.__docgenInfo,name:"detail",path:"src/screens/rakuen/v2/component/item/detail/index.tsx#detail"})}catch(e){}},"./src/screens/rakuen/v2/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.LIMIT_HEAVY=t.ITEM_HEIGHT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=t.AD_REPLIES_COUNT=void 0;var r=s("./src/stores/index.ts"),o=s("./src/utils/dev/index.ts"),n=s("./src/constants/index.ts"),s=s("./src/screens/rakuen/v2/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Item");t.COMPONENT_MAIN=(0,o.rc)(s),t.LIMIT_HEAVY=r._.device(10,20),t.ITEM_HEIGHT=60,t.AD_REPLIES_COUNT=4,t.DEFAULT_PROPS={styles:{},index:0,avatar:"",userId:"",userName:"",groupHref:"",groupCn:"",href:"",title:"",time:"",topicId:"",replyCount:"",isGroup:!1,onPress:n.FN}},"./src/screens/rakuen/v2/component/item/icon-favor/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/v2/component/item/icon-favor/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){return e=e.topicId,t.$.isFavor(e)?(0,d.jsx)(o.Iconfont,{style:i.styles.icon,size:15,name:"md-star",color:n._.colorYellow}):null})},"./src/screens/rakuen/v2/component/item/icon-favor/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({icon:{position:"absolute",right:15,bottom:12}})},"./src/screens/rakuen/v2/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),j=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/utils/index.ts")),o=s("./src/utils/decorators/index.ts"),_=r(s("./src/screens/rakuen/v2/component/item/item.tsx")),x=s("./src/screens/rakuen/v2/component/item/utils.ts"),b=s("./src/screens/rakuen/v2/component/item/ds.ts"),h=s("./src/screens/rakuen/v2/component/item/styles.ts"),g=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,r,o,n=e.index,i=e.avatar,d=e.userId,a=e.userName,l=e.group,u=e.groupHref,c=e.href,p=e.title,m=e.time,e=e.replies,f=t.$,y=t.navigation;return n>=b.LIMIT_HEAVY&&!f.state._mounted||(s=(0,x.getTopicId)(c),t=(0,j.findSubjectCn)(l),r=d||(0,x.getUserId)(i),o=(0,x.getReplyCount)(e),(0,x.getIsBlockKeyword)(f.setting.blockKeywords,p))||(0,x.getIsBlockGroup)(f.setting.blockGroups,t)||(0,j.getIsBlockUser)(f.setting.blockUserIds,a,r,"Rakuen|"+s+"|"+n)||(0,x.getIsAd)(f.setting.isBlockDefaultUser,i,o)?null:(0,g.jsx)(_.default,{styles:(0,h.memoStyles)(),index:n,avatar:i,userId:r,userName:a,groupHref:u,groupCn:t,href:c,title:p,time:m,topicId:s,replyCount:o,isGroup:(0,x.getIsGroup)(s),onPress:function(){return(0,x.handlePress)(y,f.onItemPress,{avatar:i,group:l,href:c,replyCount:o,time:m,title:p,topicId:s,userId:d,userName:a})}})},b.COMPONENT)},"./src/screens/rakuen/v2/component/item/item.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.slice.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),y=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),j=r(s("./src/screens/rakuen/v2/component/item/avatar/index.tsx")),_=r(s("./src/screens/rakuen/v2/component/item/btn-popover/index.tsx")),x=r(s("./src/screens/rakuen/v2/component/item/content/index.tsx")),b=r(s("./src/screens/rakuen/v2/component/item/icon-favor/index.tsx")),h=r(s("./src/screens/rakuen/v2/component/item/readed/index.tsx")),g=s("./src/screens/rakuen/v2/component/item/ds.ts"),v=s("./node_modules/react/jsx-runtime.js"),r=(0,o.memo)(function(e){var t=e.styles,s=e.index,r=e.avatar,o=e.userId,n=e.userName,i=e.groupHref,d=e.groupCn,a=e.href,l=e.title,u=e.time,c=e.topicId,p=e.replyCount,m=e.isGroup,e=e.onPress;return(0,v.jsx)(f.Touchable,{animate:!0,onPress:e,children:(0,v.jsxs)(h.default,{topicId:c,children:[(0,v.jsxs)(f.Flex,{align:"start",children:[(0,v.jsx)(f.UserStatus,{userId:o,children:(0,v.jsx)(y.InView,{style:t.inView,index:s,y:g.ITEM_HEIGHT*s+1,children:(0,v.jsx)(j.default,{avatar:r,userName:n,userId:o})})}),(0,v.jsx)(f.Flex.Item,{style:t.wrap,children:(0,v.jsxs)(f.Flex,{align:"start",children:[(0,v.jsx)(f.Flex.Item,{children:(0,v.jsx)(x.default,{groupCn:d,title:l,time:u,topicId:c,replyCount:p,userId:o,userName:n,isGroup:m})}),(0,v.jsx)(_.default,{groupCn:d,groupHref:i,href:a,topicId:c,userId:o,userName:n,isGroup:m})]})})]}),(0,v.jsx)(b.default,{topicId:c})]})})},g.DEFAULT_PROPS,g.COMPONENT_MAIN,function(e,t,s){return Object.assign({},e,{index:Math.min(t.index,s.index),time:e.time.slice(0,4)})});t.default=r;try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ inView: { minWidth: number; minHeight: number; }; wrap: { paddingRight: number; marginTop: number; }; }"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},avatar:{defaultValue:null,description:"",name:"avatar",required:!0,type:{name:"string"}},userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}},userName:{defaultValue:null,description:"",name:"userName",required:!0,type:{name:"string"}},groupHref:{defaultValue:null,description:"",name:"groupHref",required:!0,type:{name:"string"}},groupCn:{defaultValue:null,description:"",name:"groupCn",required:!0,type:{name:"string"}},href:{defaultValue:null,description:"",name:"href",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},time:{defaultValue:null,description:"",name:"time",required:!0,type:{name:"string"}},topicId:{defaultValue:null,description:"",name:"topicId",required:!0,type:{name:"string"}},replyCount:{defaultValue:null,description:"",name:"replyCount",required:!0,type:{name:"string | number"}},isGroup:{defaultValue:null,description:"",name:"isGroup",required:!0,type:{name:"boolean"}},onPress:{defaultValue:null,description:"",name:"onPress",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/component/item/item.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"src/screens/rakuen/v2/component/item/item.tsx#item"})}catch(e){}},"./src/screens/rakuen/v2/component/item/readed/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/rakuen/v2/component/item/readed/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=e.topicId,e=e.children,t=t.$,r=(0,i.memoStyles)();return(0,d.jsx)(o.default,{style:(0,n.stl)(r.container,t.readed(s).time&&r.readed),children:e})})},"./src/screens/rakuen/v2/component/item/readed/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{width:"100%",paddingLeft:r._.wind,backgroundColor:r._.colorPlain},readed:{backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1)}}})},"./src/screens/rakuen/v2/component/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{inView:{minWidth:40,minHeight:40},wrap:{paddingRight:r._.wind-r._._wind,marginTop:2}}})},"./src/screens/rakuen/v2/component/item/title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.OLD_GROUP_ID=void 0;t.OLD_GROUP_ID=374218},"./src/screens/rakuen/v2/component/item/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.parse-int.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),l=s("./src/screens/rakuen/v2/component/item/title/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r=e.topicId,o=e.title,n=e.replyCount,e=e.isGroup,i=(t=t.$).readed(r).time,d="+"+n,t=(i&&n>(t=t.readed(r)).replies&&(s="+"+(n-t.replies)),!1);return e&&parseInt(r.substring(6))<l.OLD_GROUP_ID&&(t=!0),(0,u.jsxs)(a.Text,{bold:!0,children:[o,!!n&&(0,u.jsxs)(a.Text,{type:i?"sub":"main",size:11,lineHeight:14,bold:!0,children:[" ",d]}),!!s&&(0,u.jsxs)(a.Text,{type:"main",size:11,lineHeight:14,bold:!0,children:[" ",s]}),t&&(0,u.jsxs)(a.Text,{size:11,lineHeight:14,type:"warning",children:[" ","旧帖"]})]})})},"./src/screens/rakuen/v2/component/item/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.some.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.getIsAd=function(e,t,s){return e&&t===y.IMG_DEFAULT_AVATAR&&s<n.AD_REPLIES_COUNT},t.getIsBlockGroup=function(e,t){return e.includes(t)},t.getIsBlockKeyword=function(e,t){return e.some(function(e){return t.includes(e)})},t.getIsBlockUser=function(e,s,r){return-1!==e.findIndex(function(e){var e=e.split("@"),e=(0,o.default)(e,2),t=e[0],e=e[1];return e&&"undefined"!==e?e===r:t===s})},t.getIsGroup=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return null==e?void 0:e.includes("group/")},t.getReplyCount=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return Number(String(e).match(/\d+/g))},t.getTopicId=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").replace("/rakuen/topic/","")},t.getUserId=function(e){var t,e=null==e?void 0:e.match(/\/(\d+).jpg/);e&&(t=e[1]);return t},t.handlePress=function(e,t,s){function r(){(0,m.appNavigate)(i,e,{_title:l,_replies:"+"+d,_group:n,_time:a,_avatar:o,_userName:p,_userId:c},{id:"超展开.跳转"}),setTimeout(function(){t(u,d)},400)}var o=s.avatar,n=s.group,i=s.href,d=s.replyCount,a=s.time,l=s.title,u=s.topicId,c=s.userId,p=s.userName;d>y.LIMIT_TOPIC_PUSH?(0,m.confirm)("帖子内容基于网页分析, 帖子回复数过大可能会导致闪退, 仍使用 App 打开?",r,void 0,function(){var e=""+y.HOST+i;(0,f.t)("超展开.跳转",{to:"WebBrowser",url:e}),setTimeout(function(){open(e)},800)}):r()},r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),m=s("./src/utils/index.ts"),f=s("./src/utils/fetch/index.ts"),y=s("./src/constants/index.ts"),n=s("./src/screens/rakuen/v2/component/item/ds.ts")},"./src/screens/rakuen/v2/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"List")},"./src/screens/rakuen/v2/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/utils/decorators/index.ts"),d=r(s("./src/constants/i18n/index.ts")),a=r(s("./src/screens/rakuen/v2/component/item/index.tsx")),r=s("./src/screens/rakuen/v2/component/list/ds.ts"),l=s("./src/screens/rakuen/v2/component/list/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.index,r=t.$;return"hot"!==(e=r.type(s))||r.isWebLogin?(t=r.rakuen(e))._loaded?(0,u.jsx)(o.ListView,{keyExtractor:c,ref:function(e){return r.connectRef(e,s)},contentContainerStyle:l.styles.contentContainerStyle,data:t,progressViewOffset:l.styles.contentContainerStyle.paddingTop,renderItem:p,scrollEventThrottle:4,onScroll:r.onScroll,onHeaderRefresh:r.onHeaderRefresh,onFooterRefresh:r.fetchRakuen},e):(0,u.jsx)(o.Loading,{}):(0,u.jsx)(n.Login,{text:"热门帖子需"+d.default.login()+"才能显示",btnText:"去"+d.default.login()})},r.COMPONENT);function c(e){return e.href}function p(e){var t=e.item,e=e.index;return(0,u.jsx)(a.default,Object.assign({index:e},t))}},"./src/screens/rakuen/v2/component/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var r=s("./src/stores/index.ts"),s=s("./src/screens/rakuen/v2/ds.ts");t.styles=r._.create({contentContainerStyle:{paddingTop:r._.headerHeight+s.H_TABBAR,paddingBottom:r._.bottom}})},"./src/screens/rakuen/v2/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.STATE=t.PREFETCH_COUNT=t.NAMESPACE=t.INIT_PREFETCH_STATE=t.H_TABBAR=t.EXCLUDE_STATE=t.COMPONENT=void 0;var r=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),o=(t.COMPONENT="Rakuen",t.NAMESPACE="ScreenRakuen",t.H_TABBAR=48,t.TABS=s.RAKUEN_TYPE.map(function(e){return{title:e.label,key:e.value}}).filter(function(e){return!!e.title}),t.PREFETCH_COUNT=20,t.INIT_PREFETCH_STATE={prefetching:!1,prefetchTotal:0,prefetchCurrent:0}),r=t.EXCLUDE_STATE={visibleBottom:r._.window.height,isFocused:!0,_mounted:s.STORYBOOK};t.STATE=Object.assign({scope:s.MODEL_RAKUEN_SCOPE.getValue("全局聚合"),page:1,group:s.MODEL_RAKUEN_TYPE_GROUP.getValue("全部"),mono:s.MODEL_RAKUEN_TYPE_MONO.getValue("全部")},o,r,{_loaded:!1})},"./src/screens/rakuen/v2/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Extra")},"./src/screens/rakuen/v2/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/rakuen/v2/component/heapmaps/index.tsx")),r=s("./src/screens/rakuen/v2/extra/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)(function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Track,{title:"超展开",hm:["rakuen","Rakuen"]}),(0,d.jsx)(i.default,{})]})},r.COMPONENT)},"./src/screens/rakuen/v2/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Header")},"./src/screens/rakuen/v2/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=r(s("./src/screens/rakuen/v2/icon/group.tsx")),a=r(s("./src/screens/rakuen/v2/icon/more.tsx")),r=s("./src/screens/rakuen/v2/header/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ob)(function(){return(0,l.jsx)(o.LogoHeader,{left:(0,l.jsx)(d.default,{}),right:(0,l.jsx)(a.default,{style:n._.ml.sm})})},r.COMPONENT)},"./src/screens/rakuen/v2/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useRakuenPage=function(e){var t=e.$,s=e.navigation;(0,r.useRunAfter)(function(){t.init(),s.addListener(o.EVENT_APP_TAB_PRESS+"|Rakuen",function(){t.onRefreshThenScrollTop()})})};var r=s("./src/utils/hooks/index.ts"),o=s("./src/navigations/tab-bar/index.tsx")},"./src/screens/rakuen/v2/icon/group.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.navigation;return(0,l.jsx)(n.IconTabsHeader,{style:(0,d.stl)(u.icon,i._.isPad&&u.iconPad),name:"md-filter-none",size:18,onPress:function(){(0,a.t)("超展开.跳转",{to:"Mine"}),s.push("Mine")},children:(0,l.jsx)(o.Heatmap,{right:-40,id:"超展开.跳转",to:"Mine",alias:"我的小组"})})});var u=i._.create({icon:{marginBottom:0,marginLeft:i._.xs,borderRadius:40,overflow:"hidden"},iconPad:{height:52}});try{group.displayName="group",group.__docgenInfo={description:"",displayName:"group",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/icon/group.tsx#group"]={docgenInfo:group.__docgenInfo,name:"group",path:"src/screens/rakuen/v2/icon/group.tsx#group"})}catch(e){}},"./src/screens/rakuen/v2/icon/more.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/constants/index.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var e=e.style,s=t.navigation,t=[];return l.STORYBOOK||t.push("小组搜索"),t.push("超展开设置","添加新讨论"),(0,u.jsxs)(o.Flex,{style:i._.mr.xs,children:[!l.STORYBOOK&&(0,u.jsx)(o.Touchable,{onPress:function(){s.push("RakuenHistory")},children:(0,u.jsx)(o.Flex,{style:c.icon,justify:"center",children:(0,u.jsx)(o.Iconfont,{name:"md-star-outline",color:i._.colorTitle})})}),(0,u.jsxs)(n.Popover,{style:(0,d.stl)(c.touch,e),data:t,onSelect:function(e){switch((0,a.t)("超展开.右上角菜单",{key:e}),e){case"小组搜索":s.push("RakuenSearch");break;case"超展开设置":s.push("RakuenSetting");break;case"添加新讨论":s.push("WebBrowser",{url:(0,l.HTML_NEW_TOPIC)(),title:"添加新讨论",desc:"发帖组件复杂并没有重新开发实装。若你看见的不是发帖页面，请先在此页面进行登录。请务必刷新一下验证码再登录。成功后点击右上方刷新页面。",injectedViewport:!0})}},children:[(0,u.jsx)(o.Flex,{style:c.icon,justify:"center",children:(0,u.jsx)(o.Iconfont,{name:"md-more-horiz",color:i._.colorTitle})}),(0,u.jsx)(o.Heatmap,{id:"超展开.右上角菜单"}),(0,u.jsx)(o.Heatmap,{right:57,bottom:-32,id:"超展开.取消预读取"}),(0,u.jsx)(o.Heatmap,{bottom:-32,id:"超展开.预读取"})]})]})});var c=i._.create({touch:{marginRight:i._.xs,borderRadius:20,overflow:"hidden"},icon:{width:36,height:36}})},"./src/screens/rakuen/v2/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/rakuen/v2/extra/index.tsx")),a=r(s("./src/screens/rakuen/v2/header/index.tsx")),l=s("./src/screens/rakuen/v2/hooks.ts"),u=r(s("./src/screens/rakuen/v2/store.ts")),c=r(s("./src/screens/rakuen/v2/tab/index.tsx")),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(u.default,function(e,t){return(0,l.useRakuenPage)(t),(0,i.useObserver)(function(){return(0,p.jsxs)(o.Component,{id:"screen-rakuen",children:[(0,p.jsxs)(o.Page,{children:[(0,p.jsx)(a.default,{}),(0,p.jsx)(c.default,{})]}),(0,p.jsx)(d.default,{})]})})});try{v2.displayName="v2",v2.__docgenInfo={description:"",displayName:"v2",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/index.tsx#v2"]={docgenInfo:v2.__docgenInfo,name:"v2",path:"src/screens/rakuen/v2/index.tsx#v2"})}catch(e){}},"./src/screens/rakuen/v2/store.ts":(e,t,s)=>{var d=s("./node_modules/@babel/runtime/regenerator/index.js");function a(e,t){var s,r,o,n,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return r=!(s=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(i=function(e,t){var s;if(e)return"string"==typeof e?l(e,t):"Map"===(s="Object"===(s=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:s)||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?l(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.some.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.from.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.symbol.description.js"),s("./node_modules/core-js/modules/es.symbol.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.is-array.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),u=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),p=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),y=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),r=r(s("./src/utils/store/index.ts")),b=s("./src/utils/fetch/index.ts"),h=s("./src/constants/index.ts"),g=s("./src/screens/rakuen/v2/ds.ts");function v(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=r?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,p.default)(this,e)}}var S;t.default=(s=r.default,(0,c.default)(O,s),S=v(O),(0,i.default)(O,[{key:"navigationState",get:function(){return{index:this.state.page,routes:g.TABS}}},{key:"backgroundColor",get:function(){return _._.select(_._.colorPlain,_._._colorDarkModeLevel1)}},{key:"isWebLogin",get:function(){return _.userStore.isWebLogin}},{key:"rakuen",value:function(s){var n=this.state.scope;return(0,j.computed)(function(){var e="hot"===s?_.rakuenStore.hot:_.rakuenStore.rakuen(n,s),t=_.systemStore.setting,r=t.filterDefault,o=t.filter18x;return r||o||_.userStore.isLimit?Object.assign({},e,{list:e.list.filter(function(e){var t,s;return!((r||_.userStore.isLimit)&&null!=e&&null!=(t=e.avatar)&&t.includes(h.URL_DEFAULT_AVATAR)||(o||_.userStore.isLimit)&&(s=String(e.group).toLocaleLowerCase(),["gal","性","癖","里番"].some(function(e){return s.includes(e)})))})}):e}).get()}},{key:"readed",value:function(e){return(0,j.computed)(function(){return _.rakuenStore.readed(e)}).get()}},{key:"type",value:function(s){var r=this;return(0,j.computed)(function(){var e,t=g.TABS[s].title;return"小组"===t?(e=r.state.group,e=h.MODEL_RAKUEN_TYPE_GROUP.getLabel(e),h.MODEL_RAKUEN_TYPE_GROUP.getValue(e)):"人物"===t?(e=r.state.mono,e=h.MODEL_RAKUEN_TYPE_MONO.getLabel(e),h.MODEL_RAKUEN_TYPE_MONO.getValue(e)):h.MODEL_RAKUEN_TYPE.getValue(t)}).get()}},{key:"setting",get:function(){return _.rakuenStore.setting}},{key:"title",get:function(){var e=this.state.page;return g.TABS[e].title}},{key:"cnFirst",get:function(){return _.systemStore.setting.cnFirst}},{key:"characterId",value:function(e){return e.includes("/crt/")?e.split("/crt/")[1]:0}},{key:"isFavor",value:function(e){return(0,j.computed)(function(){return _.rakuenStore.favorV2(e)}).get()}}]),(0,y.default)((t=O).prototype,"navigationState",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"navigationState"),t.prototype),(0,y.default)(t.prototype,"backgroundColor",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"backgroundColor"),t.prototype),(0,y.default)(t.prototype,"isWebLogin",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"isWebLogin"),t.prototype),(0,y.default)(t.prototype,"setting",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"setting"),t.prototype),(0,y.default)(t.prototype,"title",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"title"),t.prototype),(0,y.default)(t.prototype,"cnFirst",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"cnFirst"),t.prototype),t);function O(){var i;(0,n.default)(this,O);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i=S.call.apply(S,[this].concat(t)),(0,f.default)((0,u.default)(i),"state",(0,j.observable)(g.STATE)),(0,f.default)((0,u.default)(i),"init",(0,o.default)(d.mark(function e(){var t;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getStorage(g.NAMESPACE);case 2:return t=e.sent,i.setState(Object.assign({},t,g.INIT_PREFETCH_STATE,g.EXCLUDE_STATE,{_loaded:!0})),i.fetchRakuen(!0),setTimeout(function(){i.setState({_mounted:!0})},80),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e)}))),(0,f.default)((0,u.default)(i),"onHeaderRefresh",function(){return i.fetchRakuen(!0)}),(0,f.default)((0,u.default)(i),"save",function(){return i.saveStorage(g.NAMESPACE,g.EXCLUDE_STATE)}),(0,f.default)((0,u.default)(i),"fetchRakuen",(0,o.default)(d.mark(function e(){var t,s,r,o=arguments;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<o.length&&void 0!==o[0]&&o[0],r=i.state,s=r.scope,r=r.page,"hot"===(r=i.type(r)))return e.abrupt("return",_.rakuenStore.fetchRakuenHot());e.next=5;break;case 5:return e.abrupt("return",_.rakuenStore.fetchRakuen({scope:s,type:r},t));case 6:case"end":return e.stop()}},e)}))),(0,f.default)((0,u.default)(i),"onChange",function(e){(0,b.t)("超展开.标签页切换",{page:e}),i.setState({page:e}),i.shouldFetchRakuen(e)}),(0,f.default)((0,u.default)(i),"shouldFetchRakuen",function(e){var e=i.rakuen(i.type(e)),t=e._loaded,e=e.list;t&&0!==e.length||i.fetchRakuen(!0),i.save()}),(0,f.default)((0,u.default)(i),"onGroupMenuPress",function(e){(0,b.t)("超展开.小组菜单点击",{title:e}),i.setState({group:h.MODEL_RAKUEN_TYPE_GROUP.getValue(e)}),i.fetchRakuen(!0),i.save()}),(0,f.default)((0,u.default)(i),"onMonoMenuPress",function(e){(0,b.t)("超展开.人物菜单点击",{title:e}),i.setState({mono:h.MODEL_RAKUEN_TYPE_MONO.getValue(e)}),i.fetchRakuen(!0),i.save()}),(0,f.default)((0,u.default)(i),"onItemPress",function(e,t){_.rakuenStore.updateTopicReaded(e,t)}),(0,f.default)((0,u.default)(i),"onExtraSelect",function(e,t,s){var r,o="超展开.项额外点击";switch(e){case"进入小组":r=t.groupHref.replace("/group/",""),(0,b.t)(o,{title:e,groupId:r}),s.push("Group",{groupId:r,_title:t.groupCn});break;case"进入条目":r=t.groupHref.replace("/subject/",""),(0,b.t)(o,{title:e,subjectId:r}),s.push("Subject",{subjectId:r});break;case"进入人物":r=t.topicId.replace("prsn/","person/").replace("crt/","character/"),(0,b.t)(o,{title:e,monoId:r}),s.push("Mono",{monoId:r});break;case"屏蔽小组":case"屏蔽条目":case"屏蔽人物":(0,x.confirm)("确定"+e+"?",function(){(0,b.t)(o,{title:e,groupCn:t.groupCn}),_.rakuenStore.addBlockGroup(t.groupCn),(0,x.info)("已屏蔽 "+t.groupCn)});break;case"屏蔽用户":(0,x.confirm)("屏蔽来自 "+(null==t?void 0:t.userName)+"@"+(null==t?void 0:t.userId)+" 的包括条目评论、时间胶囊、超展开相关信息，确定?",function(){(0,b.t)(o,{title:e,userName:t.userName}),_.rakuenStore.addBlockUser(t.userName+"@"+t.userId),(0,x.info)("已屏蔽 "+t.userName)})}}),(0,f.default)((0,u.default)(i),"getUnreadTopicIds",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],s=_.rakuenStore.state.topic,r=[];return e.forEach(function(e){try{var t;parseInt(String(e.replies||"0").replace(/\(\+|\)/g,""))<=h.LIMIT_TOPIC_PUSH&&(t=String(e.href).replace("/rakuen/topic/",""),s[t]||r.push(t))}catch(e){}}),r}),(0,f.default)((0,u.default)(i),"prefetchConfirm",function(){var e=i.state.page,e=i.type(e),e=i.rakuen(e).list,t=i.getUnreadTopicIds(e);t.length?(0,x.confirm)("当前 "+t.length+" 个未读帖子, 1次操作最多预读前 "+g.PREFETCH_COUNT+" 个, 建议在WIFI下进行, 确定?",function(){return i.prefetch(t)},"预读取未读帖子"):(0,x.info)("当前没有未读取数据的帖子")}),(0,f.default)((0,u.default)(i),"prefetch",(0,o.default)(d.mark(function e(){var t,s,r,o,n=arguments;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=0<n.length&&void 0!==n[0]?n[0]:[]).length){e.next=3;break}return e.abrupt("return");case 3:(0,b.t)("超展开.预读取",{length:t.length}),r=t.filter(function(e,t){return t<g.PREFETCH_COUNT}),s=0,i.setState({prefetching:!0,prefetchTotal:r.length,prefetchCurrent:s}),r=a(r),e.prev=8,r.s();case 10:if((o=r.n()).done)e.next=21;else{if(o=o.value,i.state.prefetching)return(0,x.info)("预读中... "+s),e.next=17,_.rakuenStore.fetchTopic({topicId:o});e.next=19}break;case 17:s+=1,i.setState({prefetchCurrent:s});case 19:e.next=10;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(8),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:i.setState(Object.assign({},g.INIT_PREFETCH_STATE)),(0,x.info)("预读取完毕");case 31:case"end":return e.stop()}},e,null,[[8,23,26,29]])}))),(0,f.default)((0,u.default)(i),"cancelPrefetch",function(){(0,b.t)("超展开.取消预读取"),i.setState(Object.assign({},g.INIT_PREFETCH_STATE))}),(0,f.default)((0,u.default)(i),"scrollToIndex",{}),(0,f.default)((0,u.default)(i),"connectRef",function(e,t){i.scrollToIndex[t]=null==e?void 0:e.scrollToIndex}),(0,f.default)((0,u.default)(i),"onRefreshThenScrollTop",function(){try{var e=i.state.page;"function"==typeof i.scrollToIndex[e]&&((0,b.t)("其他.刷新到顶",{screen:"Rakuen"}),i.scrollToIndex[e]({animated:!0,index:0,viewOffset:8e3}),setTimeout(function(){(0,x.feedback)()},400),i.onHeaderRefresh())}catch(e){console.error("Rakuen","onRefreshThenScrollTop",e)}}),(0,f.default)((0,u.default)(i),"onScroll",x.updateVisibleBottom.bind((0,u.default)(i))),i}},"./src/screens/rakuen/v2/tab/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Tab")},"./src/screens/rakuen/v2/tab/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/screens/rakuen/v2/ds.ts"),l=r(s("./src/screens/rakuen/v2/tab/renderScene.tsx")),u=r(s("./src/screens/rakuen/v2/tab/tab-bar/index.tsx")),r=s("./src/screens/rakuen/v2/tab/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)(function(e,t){return(t=t.$).state._loaded?(0,c.jsxs)(n.BlurViewRoot,{children:[(0,c.jsx)(o.TabView,{style:i._.mt._sm,lazy:!0,lazyPreloadDistance:0,navigationState:t.navigationState,renderTabBar:p,renderBackground:(0,c.jsx)(n.BlurViewTab,{length:a.TABS.length}),renderScene:l.default,onIndexChange:t.onChange},i._.orientation),(0,c.jsx)(n.BlurViewBottomTab,{})]}):null},r.COMPONENT);function p(e){return(0,c.jsx)(u.default,Object.assign({},e))}try{tab.displayName="tab",tab.__docgenInfo={description:"",displayName:"tab",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/tab/index.tsx#tab"]={docgenInfo:tab.__docgenInfo,name:"tab",path:"src/screens/rakuen/v2/tab/index.tsx#tab"})}catch(e){}},"./src/screens/rakuen/v2/tab/label/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/tab/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Label")},"./src/screens/rakuen/v2/tab/label/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),o=s("./src/screens/rakuen/v2/tab/label/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.focused,s=e.model,r=e.label,o=e.value,e=e.onSelect;return(0,l.jsx)(i.Popover,{style:d._.container.block,data:s.data.map(function(e){return e.label}),onSelect:e,children:(0,l.jsxs)(n.Flex,{style:d._.container.block,justify:"center",children:[(0,l.jsx)(n.Text,{type:"title",size:13,bold:t,noWrap:!0,children:r}),!a.STORYBOOK&&(0,l.jsxs)(n.Text,{size:10,lineHeight:13,type:"sub",noWrap:!0,children:[" ",s.getLabel(o)," "]})]})})},o.COMPONENT);try{label.displayName="label",label.__docgenInfo={description:"",displayName:"label",props:{focused:{defaultValue:null,description:"",name:"focused",required:!0,type:{name:"any"}},model:{defaultValue:null,description:"",name:"model",required:!0,type:{name:"any"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"any"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/tab/label/index.tsx#label"]={docgenInfo:label.__docgenInfo,name:"label",path:"src/screens/rakuen/v2/tab/label/index.tsx#label"})}catch(e){}},"./src/screens/rakuen/v2/tab/renderScene.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.index-of.js");function r(e,t){return function(){return(0,l.jsx)(d.default,{index:t})}}var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/defineProperty.js"))),i=(o(s("./node_modules/react/index.js")),s("./node_modules/react-native-tab-view/lib/module/index.js")),d=o(s("./src/screens/rakuen/v2/component/list/index.tsx")),a=s("./src/screens/rakuen/v2/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.SceneMap)(a.TABS.reduce(function(e,t){return Object.assign({},e,(0,n.default)({},t.key,r(0,a.TABS.indexOf(t))))},{}));try{r.displayName="renderScene",r.__docgenInfo={description:"",displayName:"renderScene",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"Layout"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"AnimatedNode<number>"}},jumpTo:{defaultValue:null,description:"",name:"jumpTo",required:!0,type:{name:"(key: string) => void"}},route:{defaultValue:null,description:"",name:"route",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/tab/renderScene.tsx#renderScene"]={docgenInfo:r.__docgenInfo,name:"renderScene",path:"src/screens/rakuen/v2/tab/renderScene.tsx#renderScene"})}catch(e){}},"./src/screens/rakuen/v2/tab/tab-bar-label/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/tab/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"TabBarLabel")},"./src/screens/rakuen/v2/tab/tab-bar-label/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/rakuen/v2/ds.ts"),u=r(s("./src/screens/rakuen/v2/tab/label/index.tsx")),r=s("./src/screens/rakuen/v2/tab/tab-bar-label/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.route,e=e.focused,t=t.$,r=(n=t.state).page,o=n.group,n=n.mono;return"小组"===s.title&&"小组"===l.TABS[r].title?(0,c.jsx)(u.default,{focused:e,model:a.MODEL_RAKUEN_TYPE_GROUP,label:"小组",value:o,onSelect:t.onGroupMenuPress}):"人物"===s.title&&"人物"===l.TABS[r].title?(0,c.jsx)(u.default,{focused:e,model:a.MODEL_RAKUEN_TYPE_MONO,label:"人物",value:n,onSelect:t.onMonoMenuPress}):(0,c.jsx)(i.Flex,{style:d._.container.block,justify:"center",children:(0,c.jsx)(i.Text,{type:"title",size:13,bold:e,noWrap:!0,children:s.title})})},r.COMPONENT)},"./src/screens/rakuen/v2/tab/tab-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/rakuen/v2/tab/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"TabBar")},"./src/screens/rakuen/v2/tab/tab-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/rakuen/v2/tab/tab-bar-label/index.tsx")),r=s("./src/screens/rakuen/v2/tab/tab-bar/ds.ts"),d=s("./src/screens/rakuen/v2/tab/tab-bar/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)(function(e){var t=(0,d.memoStyles)();return(0,a.jsx)(o.TabBar,Object.assign({},e,{style:t.tabBar,tabStyle:t.tab,labelStyle:t.label,indicatorStyle:t.indicator,pressOpacity:1,pressColor:"transparent",scrollEnabled:!0,renderLabel:l}))},r.COMPONENT);function l(e){var t=e.route,e=e.focused;return(0,a.jsx)(i.default,{route:t,focused:e})}try{tabbar.displayName="tabbar",tabbar.__docgenInfo={description:"",displayName:"tabbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/rakuen/v2/tab/tab-bar/index.tsx#tabbar"]={docgenInfo:tabbar.__docgenInfo,name:"tabbar",path:"src/screens/rakuen/v2/tab/tab-bar/index.tsx#tabbar"})}catch(e){}},"./src/screens/rakuen/v2/tab/tab-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){var e=r._.window.width/5,t=r._.r(16);return{tabBar:{position:"absolute",zIndex:2,top:r._.headerHeight,right:0,left:0,paddingLeft:0,backgroundColor:"transparent",borderBottomWidth:0,elevation:0},tab:{width:e,height:r._.r(48)},label:{padding:0},labelText:{width:"100%"},indicator:{width:t,height:4,marginLeft:(e-t)/2+0,backgroundColor:r._.colorMain,borderRadius:4}}})},"./src/screens/timeline/say/chat/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=r(s("./src/screens/timeline/say/chat/item/index.tsx")),l=s("./src/screens/timeline/say/chat/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)(function(e,t){var e=e.forwardRef,t=t.$,s=(0,l.memoStyles)(),t=t.say.list;return(0,u.jsx)(o.PaginationList2,{forwardRef:e,style:n._.container.screen,contentContainerStyle:s.container,keyExtractor:i.keyExtractor,data:t,inverted:!0,renderItem:c,ListFooterComponent:null},t.length)});function c(e){var t=e.item,e=e.index;return(0,u.jsx)(a.default,{item:t,index:e})}},"./src/screens/timeline/say/chat/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=s("./node_modules/react/jsx-runtime.js"),c={id:"吐槽.跳转"};t.default=(0,r.obc)(function(e,t){var s,r,o=e.item,e=e.index,n=t.$;return o.id?(t=n.say.list,s=0===e?{}:t[e-1],r=o.id===n.myId,(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.ItemSay,Object.assign({},o,{event:c,position:r?"right":"left",avatar:(0,a.getAvatarLocal)(o.id)||(0,l.API_AVATAR)(o.id),showName:s.name!==o.name,onLongPress:function(){return n.at(o.id)}})),e+1===t.length&&!!o.date&&(0,u.jsx)(i.Text,{size:12,type:"sub",align:"center",children:null==(r=t[e])?void 0:r.date})]})):null})},"./src/screens/timeline/say/chat/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingTop:r._.bottom+r._.lg,paddingHorizontal:r._.wind,paddingBottom:r._.lg}}})},"./src/screens/timeline/say/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=void 0;t.STATE={value:"",placeholder:"",replySub:"",message:"",_loaded:!1}},"./src/screens/timeline/say/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),a=s("./src/utils/fetch/index.ts"),r=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$,r=s.say.list,t=null==(t=r[r.length-1])?void 0:t.date;return(0,u.jsx)(o.Header,{title:s.isNew?"新吐槽":"吐槽 ("+r.length+")"+(t?" · "+(null==(t=t.split(" "))?void 0:t[0]):""),alias:"吐槽",hm:[s.url,"Say"],headerTitleAlign:"left",headerRight:function(){return s.isNew?null:(0,u.jsxs)(o.Flex,{children:[!l.STORYBOOK&&10<=r.length&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n.IconTouchable,{style:i._.mr._xs,name:"md-keyboard-arrow-up",size:24,color:i._.colorTitle,onPress:function(){s.scrollToTop(s.scrollViewRef,!0)}}),(0,u.jsx)(n.IconTouchable,{name:"md-keyboard-arrow-down",size:24,color:i._.colorTitle,onPress:function(){s.scrollToBottom(s.scrollViewRef,!0)}})]}),(0,u.jsx)(o.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,a.t)("吐槽.右上角菜单",{key:e}),(0,d.open)(s.url))},children:(0,u.jsx)(o.Heatmap,{id:"吐槽.右上角菜单"})})]})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/say/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/timeline/say/header/index.tsx#header"})}catch(e){}},"./src/screens/timeline/say/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Heatmap,{bottom:n._.bottom,id:"吐槽",screen:"Say"}),(0,i.jsx)(o.Heatmap,{right:67,bottom:n._.bottom,id:"吐槽.显示评论框",transparent:!0}),(0,i.jsx)(o.Heatmap,{right:67,bottom:n._.bottom-34,id:"吐槽.新吐槽",transparent:!0}),(0,i.jsx)(o.Heatmap,{right:67,bottom:n._.bottom-68,id:"吐槽.回复吐槽",transparent:!0}),(0,i.jsx)(o.Heatmap,{right:121,bottom:n._.bottom-68,id:"吐槽.回复失败",transparent:!0})]})})},"./src/screens/timeline/say/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/timeline/say/header/index.tsx")),a=r(s("./src/screens/timeline/say/page/index.web.tsx")),l=r(s("./src/screens/timeline/say/heatmaps/index.tsx")),r=r(s("./src/screens/timeline/say/store.ts")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(r.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useKeyboardAdjustResize)(),(0,i.useObserver)(function(){return(0,u.jsxs)(o.Component,{id:"screen-say",children:[(0,u.jsx)(d.default,{}),(0,u.jsx)(a.default,{}),(0,u.jsx)(l.default,{})]})})});try{say.displayName="say",say.__docgenInfo={description:"",displayName:"say",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/say/index.tsx#say"]={docgenInfo:say.__docgenInfo,name:"say",path:"src/screens/timeline/say/index.tsx#say"})}catch(e){}},"./src/screens/timeline/say/page/index.web.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/react/index.js")),p=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),f=s("./src/utils/decorators/index.ts"),y=s("./src/constants/index.ts"),j=r(s("./src/screens/timeline/say/chat/index.tsx")),_=s("./node_modules/react/jsx-runtime.js");function x(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}r=c.default.Component,(0,d.default)(h,r),b=x(h),(0,n.default)(h,[{key:"renderNew",value:function(){var e=this.context,t=e.$,s=e.navigation,e=t.state.value;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(p.ScrollView,Object.assign({style:m._.container.screen,contentContainerStyle:m._.container.bottom},y.SCROLL_VIEW_RESET_PROPS,{children:[(0,_.jsx)(j.default,{}),(0,_.jsx)(p.Text,{style:[m._.mt._md,m._.ml.md],type:"sub",children:"点击底部输入框录入吐槽内容"})]})),t.isWebLogin&&(0,_.jsx)(p.FixedTextarea,{placeholder:"新吐槽",simple:!0,value:e,onChange:t.onChange,onClose:t.closeFixedTextarea,onSubmit:function(e){return t.doSubmit(e,null,s)}})]})}},{key:"renderList",value:function(){return this.context.$.say._loaded?(0,_.jsx)(p.ScrollView,Object.assign({contentContainerStyle:m._.container.bottom},y.SCROLL_VIEW_RESET_PROPS,{children:(0,_.jsx)(j.default,{})})):(0,_.jsx)(p.Flex,{style:m._.container.screen,justify:"center",children:(0,_.jsx)(p.Loading,{})})}},{key:"renderTextarea",value:function(){var e=this.context,t=e.$,s=e.navigation,e=t.state.value;return t.isWebLogin&&(0,_.jsx)(p.FixedTextarea,{placeholder:"回复吐槽, 长按头像@某人",simple:!0,value:e,onChange:t.onChange,onClose:t.closeFixedTextarea,onSubmit:function(e){return t.doSubmit(e,null,s)}})}},{key:"render",value:function(){var e=this.context.$;return(0,_.jsx)(p.Page,{style:m._.container.screen,children:e.isNew?this.renderNew():this.renderList()})}}]);var b,s=h;function h(){var e;(0,o.default)(this,h);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return e=b.call.apply(b,[this].concat(s)),(0,u.default)((0,i.default)(e),"state",{expand:!1}),(0,u.default)((0,i.default)(e),"onExpand",function(){e.setState({expand:!0})}),e}t.default=(0,f.obc)(s);try{indexweb.displayName="indexweb",indexweb.__docgenInfo={description:"",displayName:"indexweb",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/say/page/index.web.tsx#indexweb"]={docgenInfo:indexweb.__docgenInfo,name:"indexweb",path:"src/screens/timeline/say/page/index.web.tsx#indexweb"})}catch(e){}},"./src/screens/timeline/say/store.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),o=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),_=r(s("./src/utils/store/index.ts")),x=s("./src/utils/fetch/index.ts"),b=s("./src/utils/webhooks/index.ts"),h=s("./src/constants/index.ts"),g=r(s("./src/constants/i18n/index.ts")),v=s("./src/screens/timeline/say/ds.ts");function S(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var O;t.default=(r=_.default,(0,l.default)(T,r),O=S(T),(0,n.default)(T,[{key:"id",get:function(){var e=this.params,t=e.id;return e.sayId||t}},{key:"isNew",get:function(){return!this.id}},{key:"say",get:function(){var e=y.timelineStore.say(this.id);return Object.assign({},e,{list:e.list.slice().reverse()})}},{key:"myId",get:function(){return y.userStore.myId}},{key:"userInfo",get:function(){return y.userStore.userInfo}},{key:"isWebLogin",get:function(){return y.userStore.isWebLogin}},{key:"formhash",get:function(){return y.timelineStore.formhash}},{key:"url",get:function(){var e=this.params.userId;return this.isNew?h.HOST+"/timeline?type=say":h.HOST+"/user/"+e+"/timeline/status/"+this.id}}]),(0,m.default)((s=T).prototype,"id",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"id"),s.prototype),(0,m.default)(s.prototype,"isNew",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"isNew"),s.prototype),(0,m.default)(s.prototype,"say",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"say"),s.prototype),(0,m.default)(s.prototype,"myId",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"myId"),s.prototype),(0,m.default)(s.prototype,"userInfo",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"userInfo"),s.prototype),(0,m.default)(s.prototype,"isWebLogin",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"isWebLogin"),s.prototype),(0,m.default)(s.prototype,"formhash",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"formhash"),s.prototype),(0,m.default)(s.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(s.prototype,"url"),s.prototype),s);function T(){var n;(0,o.default)(this,T);for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return n=O.call.apply(O,[this].concat(s)),(0,p.default)((0,a.default)(n),"params",void 0),(0,p.default)((0,a.default)(n),"state",(0,f.observable)(v.STATE)),(0,p.default)((0,a.default)(n),"scrollViewRef",null),(0,p.default)((0,a.default)(n),"init",(t=(0,d.default)(i.mark(function e(t){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&(n.scrollViewRef=t),n.isNew)return e.abrupt("return",y.timelineStore.fetchFormHash());e.next=3;break;case 3:return n.say._loaded&&n.scrollToBottom(n.scrollViewRef),e.next=7,n.fetchSay();case 7:y.timelineStore.fetchFormHash();case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,p.default)((0,a.default)(n),"fetchSay",function(){return y.timelineStore.fetchSay({id:n.id})}),(0,p.default)((0,a.default)(n),"fetchTimeline",function(){var e=h.MODEL_TIMELINE_TYPE.getValue("吐槽");return y.timelineStore.fetchTimeline({scope:"friend",type:e},!0)}),(0,p.default)((0,a.default)(n),"scrollToBottom",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];null!=e&&e.scrollToIndex&&setTimeout(function(){try{e.scrollToIndex({animated:t,index:0,viewOffset:0})}catch(e){}},160)}),(0,p.default)((0,a.default)(n),"scrollToTop",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];null!=e&&e.scrollToEnd&&setTimeout(function(){try{e.scrollToEnd({animated:t,duration:640})}catch(e){}},160)}),(0,p.default)((0,a.default)(n),"closeFixedTextarea",function(){(0,x.t)("吐槽.显示评论框"),n.setState({placeholder:"",replySub:"",message:""})}),(0,p.default)((0,a.default)(n),"onChange",function(e){n.setState({value:e})}),(0,p.default)((0,a.default)(n),"at",function(e){(0,x.t)("吐槽.at",{id:e});var t=n.state.value;n.setState({value:t+" @"+e+" "})}),(0,p.default)((0,a.default)(n),"recoveryContent",function(e){(0,x.t)("吐槽.回复失败"),(0,j.info)("操作失败，可能是cookie失效了"),n.setState({value:""}),setTimeout(function(){n.setState({value:e})},160)}),(0,p.default)((0,a.default)(n),"doSubmit",function(e,t,s){if(n.isNew)return n.formhash?void n.doSay(e,s):void(0,j.info)("获取表单授权码失败, 请检查"+g.default.login()+"状态");s=n.say.list,s=void 0===s?[]:s;s.length||s[0].formhash?n.doReply(e,t):(0,j.info)("获取表单授权码失败")}),(0,p.default)((0,a.default)(n),"doSay",function(r,o){var t;(0,x.t)("吐槽.新吐槽"),y.timelineStore.doSay({content:r,formhash:n.formhash},(t=(0,d.default)(i.mark(function e(t){var s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s={};try{s=JSON.parse(t)}catch(e){}if(h.IOS&&"ok"!==s.status)return n.recoveryContent(r),e.abrupt("return");e.next=5;break;case 5:(s=n.params.onNavigationCallback)&&s(!0),n.setState({value:""}),(0,j.feedback)(),(0,j.info)("吐槽成功"),o.goBack(),setTimeout((0,d.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchTimeline();case 2:t=e.sent,null!=(t=null==t||null==(t=t.list)?void 0:t[0])&&t.clearHref&&(0,b.webhookSay)({content:null==t||null==(s=t.reply)?void 0:s.content,url:null==t||null==(s=t.reply)?void 0:s.url},y.userStore.userInfo);case 5:case"end":return e.stop()}},e)})),4e3);case 12:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}))}),(0,p.default)((0,a.default)(n),"doReply",function(r,o){(0,x.t)("吐槽.回复吐槽");var t,e=y.timelineStore.say(n.id).list,e=void 0===e?[]:e;y.timelineStore.doReply({id:String(n.id).split("#")[0],content:r,formhash:e[0].formhash},(t=(0,d.default)(i.mark(function e(t){var s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s={};try{s=JSON.parse(t)}catch(e){}if(h.IOS&&"ok"!==s.status)return n.recoveryContent(r),e.abrupt("return");e.next=5;break;case 5:return n.setState({value:""}),e.next=8,n.fetchSay();case 8:(0,j.feedback)(),setTimeout(function(){n.scrollToBottom(o,!0)},80);case 10:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}))}),n}},"./src/screens/timeline/v2/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Component")},"./src/screens/timeline/v2/component/heatmaps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Heatmaps")},"./src/screens/timeline/v2/component/heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/timeline/v2/component/heatmaps/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Heatmap,{right:n._.wind+62,bottom:n._.window.height-n._.tabsHeaderHeight-12,id:"时间胶囊.标签页切换",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:n._.wind,bottom:n._.window.height-n._.tabsHeaderHeight-12,id:"时间胶囊.标签页点击",transparent:!0}),(0,d.jsx)(o.Heatmap,{bottom:n._.bottom,id:"时间胶囊",screen:"Timeline"})]})},i.COMPONENT)},"./src/screens/timeline/v2/component/item-heatmaps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"ItemHeatmaps")},"./src/screens/timeline/v2/component/item-heatmaps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/timeline/v2/component/item-heatmaps/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Heatmap,{right:2,bottom:64,id:"时间胶囊.删除时间线",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:n._.window.contentWidth-80,bottom:59,id:"时间胶囊.跳转",to:"Zone",alias:"空间",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:2,bottom:26,id:"时间胶囊.跳转",to:"Subject",alias:"条目",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:83,bottom:26,id:"时间胶囊.跳转",to:"Mono",alias:"人物",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:2,bottom:59,id:"时间胶囊.跳转",to:"CatalogDetail",alias:"目录",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:135,bottom:59,id:"时间胶囊.跳转",to:"Group",alias:"小组",transparent:!0}),(0,d.jsx)(o.Heatmap,{right:64,bottom:59,id:"时间胶囊.跳转",to:"Topic",alias:"帖子",transparent:!0})]})},i.COMPONENT)},"./src/screens/timeline/v2/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Item")},"./src/screens/timeline/v2/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),u=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=r(s("./src/screens/timeline/v2/component/item-heatmaps/index.tsx")),r=s("./src/screens/timeline/v2/component/item/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.scope,r=e.title,o=e.item,e=e.index,n=t.$,t=t.navigation,i=(null==(d=o.p1)?void 0:d.url)||"";if(i.includes("/user/")){var d=(null==d?void 0:d.text)||"",a=u.rakuenStore.setting.blockUserIds;if((0,c.getIsBlockUser)(a,d,null==(a=i.split("/user/"))?void 0:a[1],"Timeline|"+e))return null}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.ItemTimeline,Object.assign({style:u._.container._item,navigation:t},o,{index:e,event:{id:"时间胶囊.跳转",data:{scope:s,title:r}},onDelete:n.doDelete,onHidden:n.onHidden})),1===e&&(0,m.jsx)(p.default,{})]})},r.COMPONENT)},"./src/screens/timeline/v2/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"List")},"./src/screens/timeline/v2/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/react/index.js")),p=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),y=s("./src/utils/index.ts"),j=s("./src/utils/decorators/index.ts"),_=s("./src/utils/dev/index.ts"),x=s("./src/constants/index.ts"),b=s("./src/screens/timeline/v2/ds.ts"),h=r(s("./src/screens/timeline/v2/component/item/index.tsx")),g=s("./src/screens/timeline/v2/component/list/ds.ts"),v=s("./src/screens/timeline/v2/component/list/styles.ts"),S=s("./node_modules/react/jsx-runtime.js");function O(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}r=c.default.Component,(0,d.default)(k,r),T=O(k),(0,o.default)(k,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e.scope!==this.props.scope&&(this.setState({hide:!0}),setTimeout(function(){t.setState({hide:!1})},0))}},{key:"render",value:function(){(0,_.r)(g.COMPONENT);var e=this.context.$,t=e.state,s=t.scope,r=t.page,t=t.isFocused,o=this.props.title,n=x.MODEL_TIMELINE_SCOPE.getLabel(s);return!e.isWebLogin&&["好友","自己"].includes(n)?(0,S.jsx)(m.Login,{}):this.state.hide?null:(n=e.timeline(s,x.MODEL_TIMELINE_TYPE.getValue(o)))._loaded?e.showItem(o)?(0,S.jsx)(p.ListView,{ref:this.forwardRef,contentContainerStyle:v.styles.contentContainerStyle,keyExtractor:y.keyExtractor,data:n,sectionKey:"date",stickySectionHeadersEnabled:!1,progressViewOffset:v.styles.contentContainerStyle.paddingTop,scrollToTop:t&&b.TABS[r].title===o,renderSectionHeader:P,renderItem:this.renderItem,scrollEventThrottle:4,onScroll:this.onScroll,onHeaderRefresh:e.onHeaderRefresh,onFooterRefresh:e.fetchTimeline}):null:(0,S.jsx)(p.Loading,{})}}]);var T,s=k;function k(){var o;(0,n.default)(this,k);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o=T.call.apply(T,[this].concat(t)),(0,u.default)((0,i.default)(o),"state",{hide:!1}),(0,u.default)((0,i.default)(o),"forwardRef",function(e){var t=o.context.$,s=o.props.title,r=b.TABS.findIndex(function(e){return e.title===s});return t.forwardRef(e,r)}),(0,u.default)((0,i.default)(o),"onScroll",function(e){f.uiStore.closePopableSubject(),f.uiStore.closeLikesGrid(),o.context.$.onScroll(e)}),(0,u.default)((0,i.default)(o),"renderItem",function(e){var t=e.item,e=e.index,s=o.props,r=s.scope,s=s.title;return(0,S.jsx)(h.default,{scope:r,title:s,item:t,index:e})}),o}t.default=(0,j.obc)(s);function P(e){e=e.section.title;return(0,S.jsx)(m.SectionHeader,{children:e})}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{scope:{defaultValue:null,description:"",name:"scope",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"friend"'},{value:'"self"'}]}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"enum",value:[{value:'""'},{value:'"人物"'},{value:'"吐槽"'},{value:'"好友"'},{value:'"小组"'},{value:'"日志"'},{value:'"全部"'},{value:'"目录"'},{value:'"进度"'},{value:'"收藏"'},{value:'"维基"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/component/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/timeline/v2/component/list/index.tsx#list"})}catch(e){}},"./src/screens/timeline/v2/component/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var r=s("./src/stores/index.ts"),s=s("./src/screens/timeline/v2/ds.ts");t.styles=r._.create({contentContainerStyle:{paddingTop:r._.headerHeight+s.H_TABBAR,paddingBottom:r._.bottom}})},"./src/screens/timeline/v2/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.STATE=t.NAMESPACE=t.H_TABBAR=t.EXCLUDE_STATE=t.COMPONENT=void 0;var r=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),r=(t.COMPONENT="Timeline",t.NAMESPACE="ScreenTimeline",t.TABS=s.TIMELINE_TYPE.map(function(e){return{title:e.label,key:e.value}}).filter(function(e){return!!e.title}),t.H_TABBAR=48,t.EXCLUDE_STATE={visibleBottom:r._.window.height,isFocused:!0});t.STATE=Object.assign({scope:s.MODEL_TIMELINE_SCOPE.getValue("全站"),page:0,renderedTabsIndex:[]},r,{_loaded:!1})},"./src/screens/timeline/v2/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Extra")},"./src/screens/timeline/v2/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/timeline/v2/component/heatmaps/index.tsx")),r=s("./src/screens/timeline/v2/extra/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)(function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Track,{title:"时间胶囊",hm:["timeline","Timeline"]}),(0,d.jsx)(i.default,{})]})},r.COMPONENT)},"./src/screens/timeline/v2/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Header")},"./src/screens/timeline/v2/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/constants/index.ts"),u=r(s("./src/constants/i18n/index.ts")),r=s("./src/screens/timeline/v2/header/ds.ts"),c=s("./src/screens/timeline/v2/header/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)(function(e,t){var s=t.$,r=t.navigation;return(0,p.jsx)(n.LogoHeader,{right:(0,p.jsx)(n.IconTabsHeader,{style:c.styles.icon,name:"md-add",onPress:function(){l.STORYBOOK?open(l.HOST+"/timeline"):s.isWebLogin?((0,a.t)("时间胶囊.新吐槽"),r.push("Say",{onNavigationCallback:s.fetchTimeline})):(0,i.info)("请先"+u.default.login())},children:(0,p.jsx)(o.Heatmap,{id:"时间胶囊.新吐槽"})})})},r.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/timeline/v2/header/index.tsx#header"})}catch(e){}},"./src/screens/timeline/v2/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({icon:{marginRight:s._.xs,marginBottom:0,borderRadius:40,overflow:"hidden"}})},"./src/screens/timeline/v2/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useTimelinePage=function(e){var t=e.$,s=e.navigation,r=(0,i.useIsFocused)();(0,i.useRunAfter)(function(){t.init(),s.addListener(d.EVENT_APP_TAB_PRESS+"|Timeline",function(){t.onRefreshThenScrollTop()})}),(0,o.useEffect)(function(){r||n.uiStore.closePopableSubject()},[r])};var o=s("./node_modules/react/index.js"),n=s("./src/stores/index.ts"),i=s("./src/utils/hooks/index.ts"),d=s("./src/navigations/tab-bar/index.tsx")},"./src/screens/timeline/v2/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/utils/hooks/index.ts"),a=r(s("./src/screens/timeline/v2/extra/index.tsx")),l=r(s("./src/screens/timeline/v2/header/index.tsx")),u=s("./src/screens/timeline/v2/hooks.ts"),c=r(s("./src/screens/timeline/v2/store.ts")),p=r(s("./src/screens/timeline/v2/tab/index.tsx")),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(c.default,function(e,t){(0,u.useTimelinePage)(t);var s=t.$;return(0,d.useObserver)(function(){return(0,m.jsxs)(o.Component,{id:"screen-timeline",children:[(0,m.jsx)(n.TapListener,{children:(0,m.jsxs)(o.Page,{children:[(0,m.jsx)(l.default,{}),s.state._loaded&&(0,m.jsx)(p.default,{})]})}),(0,m.jsx)(a.default,{})]})})});try{v2.displayName="v2",v2.__docgenInfo={description:"",displayName:"v2",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/index.tsx#v2"]={docgenInfo:v2.__docgenInfo,name:"v2",path:"src/screens/timeline/v2/index.tsx#v2"})}catch(e){}},"./src/screens/timeline/v2/store.ts":(e,t,s)=>{var n=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),d=r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),x=s("./src/utils/fetch/index.ts"),r=r(s("./src/utils/store/index.ts")),b=s("./src/constants/index.ts"),h=s("./src/screens/timeline/v2/ds.ts");function g(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(s);return e=r?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var v;t.default=(s=r.default,(0,u.default)(S,s),v=g(S),(0,o.default)(S,[{key:"navigationState",get:function(){return{index:this.state.page,routes:h.TABS}}},{key:"backgroundColor",get:function(){return j._.select(j._.colorPlain,j._._colorDarkModeLevel1)}},{key:"isWebLogin",get:function(){return j.userStore.isWebLogin}},{key:"myUserId",get:function(){return j.userStore.myUserId}},{key:"timeline",value:function(o,n){return(0,y.computed)(function(){var e=j.timelineStore.timeline(o,n),t=j.systemStore.setting,s=t.filterDefault,r=t.filter18x;return s||r||j.userStore.isLimit?(t=e.list.filter(function(e){if((s||j.userStore.isLimit)&&null!=(t=e.avatar)&&null!=(t=t.src)&&t.includes(b.URL_DEFAULT_AVATAR))return!1;if((r||j.userStore.isLimit)&&null!=e&&null!=(t=e.p3)&&null!=(t=t.url)&&t[0]){var t=String(e.p3.url[0]);if(t.match(/\/subject\/\d+/))return!(0,_.x18)(t.replace("https://bgm.tv/subject/",""))}return!0}),Object.assign({},e,{list:t})):e}).get()}},{key:"showItem",value:function(t){var s=this;return(0,y.computed)(function(){var e;return!b.IOS||(e=h.TABS.findIndex(function(e){return e.title===t}),s.state.renderedTabsIndex.includes(e))}).get()}}]),(0,f.default)((t=S).prototype,"navigationState",[y.computed],Object.getOwnPropertyDescriptor(t.prototype,"navigationState"),t.prototype),(0,f.default)(t.prototype,"backgroundColor",[y.computed],Object.getOwnPropertyDescriptor(t.prototype,"backgroundColor"),t.prototype),(0,f.default)(t.prototype,"isWebLogin",[y.computed],Object.getOwnPropertyDescriptor(t.prototype,"isWebLogin"),t.prototype),(0,f.default)(t.prototype,"myUserId",[y.computed],Object.getOwnPropertyDescriptor(t.prototype,"myUserId"),t.prototype),t);function S(){var r;(0,a.default)(this,S);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return r=v.call.apply(v,[this].concat(s)),(0,m.default)((0,l.default)(r),"state",(0,y.observable)(h.STATE)),(0,m.default)((0,l.default)(r),"init",(0,d.default)(n.mark(function e(){var t,s;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(h.NAMESPACE);case 2:return t=e.sent,4<=(s=(null==t?void 0:t.page)||0)&&(s=0),r.setState(Object.assign({},t,h.EXCLUDE_STATE,{page:s,renderedTabsIndex:[s],_loaded:!0})),setTimeout(function(){r.fetchTimeline(!0)},0),e.abrupt("return",!0);case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(r),"onHeaderRefresh",function(){return r.fetchTimeline(!0)}),(0,m.default)((0,l.default)(r),"save",function(){return r.saveStorage(h.NAMESPACE,h.EXCLUDE_STATE)}),(0,m.default)((0,l.default)(r),"fetchTimeline",function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=r.state,s=t.scope,t=t.page,t=b.MODEL_TIMELINE_TYPE.getValue(h.TABS[t].title);return j.timelineStore.fetchTimeline({scope:s,type:t},e)}),(0,m.default)((0,l.default)(r),"onChange",function(e){var t=r.state.scope,s=((0,x.t)("时间胶囊.标签页切换",{page:e,scope:t}),(0,i.default)(r.state.renderedTabsIndex));s.includes(e)||s.push(e),r.setState({page:e,renderedTabsIndex:s}),r.timeline(t,b.TIMELINE_TYPE[e].value)._loaded||r.fetchTimeline(!0),r.save()}),(0,m.default)((0,l.default)(r),"onSelectScope",function(e){(0,x.t)("时间胶囊.切换类型",{label:e});var t=r.state.scope,e=b.MODEL_TIMELINE_SCOPE.getValue(e);e!==t&&(r.setState({scope:e}),r.fetchTimeline(!0),r.save())}),(0,m.default)((0,l.default)(r),"scrollToLocation",{}),(0,m.default)((0,l.default)(r),"forwardRef",function(e,t){r.scrollToLocation[t]=null==e?void 0:e.scrollToLocation}),(0,m.default)((0,l.default)(r),"onRefreshThenScrollTop",function(){try{var e=r.state.page;"function"==typeof r.scrollToLocation[e]&&((0,x.t)("其他.刷新到顶",{screen:"Timeline"}),r.scrollToLocation[e]({animated:!0,itemIndex:0,sectionIndex:0,viewOffset:800,viewPosition:0}),setTimeout(function(){(0,_.feedback)()},400),r.onHeaderRefresh())}catch(e){console.error("Timeline","onRefreshThenScrollTop",e)}}),(0,m.default)((0,l.default)(r),"onHidden",function(e,t){e="1天不看TA"===e?1:"3天不看TA"===e?3:"7天不看TA"===e?7:0;j.timelineStore.updateHidden(t,e),(0,x.t)("时间胶囊.隐藏",{userId:t,day:e})}),(0,m.default)((0,l.default)(r),"onScroll",_.updateVisibleBottom.bind((0,l.default)(r))),(0,m.default)((0,l.default)(r),"doDelete",(t=(0,d.default)(n.mark(function e(t){var s;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return s=r.state.scope,(0,x.t)("时间胶囊.删除时间线",{scope:s}),s=(0,x.fetchHTML)({method:"POST",url:t}),e.next=7,s;case 7:return(0,_.feedback)(),r.fetchTimeline(!0),e.abrupt("return",s);case 10:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),r}},"./src/screens/timeline/v2/tab/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Tab")},"./src/screens/timeline/v2/tab/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),n=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/screens/timeline/v2/ds.ts"),u=r(s("./src/screens/timeline/v2/tab/renderScene.tsx")),c=r(s("./src/screens/timeline/v2/tab/tab-bar/index.tsx")),p=r(s("./src/screens/timeline/v2/tab/tab-bar-left/index.tsx")),r=s("./src/screens/timeline/v2/tab/ds.ts"),m=s("./src/screens/timeline/v2/tab/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,a.obc)(function(e,t){var t=t.$,s=(0,m.memoStyles)();return(0,f.jsxs)(i.BlurViewRoot,{children:[(0,f.jsx)(n.TabView,{style:d._.mt._sm,lazy:!0,lazyPreloadDistance:0,navigationState:t.navigationState,renderTabBar:y,renderBackground:(0,f.jsx)(i.BlurViewTab,{length:l.TABS.length}),renderScene:u.default,onIndexChange:t.onChange},d._.orientation),(0,f.jsx)(o.default,{style:s.tabBarLeft,children:(0,f.jsx)(p.default,{})}),(0,f.jsx)(i.BlurViewBottomTab,{})]})},r.COMPONENT);function y(e){return(0,f.jsx)(c.default,Object.assign({},e))}try{tab.displayName="tab",tab.__docgenInfo={description:"",displayName:"tab",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/tab/index.tsx#tab"]={docgenInfo:tab.__docgenInfo,name:"tab",path:"src/screens/timeline/v2/tab/index.tsx#tab"})}catch(e){}},"./src/screens/timeline/v2/tab/renderScene.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.object.assign.js");function r(e){var t=e.title;return function(){return(0,a.jsx)(d.default,{title:t})}}var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/defineProperty.js"))),i=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=o(s("./src/screens/timeline/v2/component/list/index.tsx")),o=s("./src/screens/timeline/v2/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.SceneMap)(o.TABS.reduce(function(e,t){return Object.assign({},e,(0,n.default)({},t.key,r(t)))},{}));try{r.displayName="renderScene",r.__docgenInfo={description:"",displayName:"renderScene",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"Layout"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"AnimatedNode<number>"}},jumpTo:{defaultValue:null,description:"",name:"jumpTo",required:!0,type:{name:"(key: string) => void"}},route:{defaultValue:null,description:"",name:"route",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/tab/renderScene.tsx#renderScene"]={docgenInfo:r.__docgenInfo,name:"renderScene",path:"src/screens/timeline/v2/tab/renderScene.tsx#renderScene"})}catch(e){}},"./src/screens/timeline/v2/tab/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{tabBarLeft:{position:"absolute",zIndex:3,top:r._.headerHeight-r._.sm+2,left:0}}})},"./src/screens/timeline/v2/tab/tab-bar-label/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/tab/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"TabBarLabel")},"./src/screens/timeline/v2/tab/tab-bar-label/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/timeline/v2/tab/tab-bar-label/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.route,e=e.focused;return(0,d.jsx)(o.Flex,{style:n._.container.block,justify:"center",children:(0,d.jsx)(o.Text,{type:"title",size:13,bold:e,noWrap:!0,children:t.title})})},i.COMPONENT);try{tabbarlabel.displayName="tabbarlabel",tabbarlabel.__docgenInfo={description:"",displayName:"tabbarlabel",props:{route:{defaultValue:null,description:"",name:"route",required:!0,type:{name:"any"}},focused:{defaultValue:null,description:"",name:"focused",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/tab/tab-bar-label/index.tsx#tabbarlabel"]={docgenInfo:tabbarlabel.__docgenInfo,name:"tabbarlabel",path:"src/screens/timeline/v2/tab/tab-bar-label/index.tsx#tabbarlabel"})}catch(e){}},"./src/screens/timeline/v2/tab/tab-bar-left/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DATA=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/constants/index.ts"),s=s("./src/screens/timeline/v2/tab/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"TabBarLeft"),t.DATA=o.TIMELINE_SCOPE.map(function(e){return e.label})},"./src/screens/timeline/v2/tab/tab-bar-left/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),d=s("./src/screens/timeline/v2/tab/tab-bar-left/ds.ts"),a=s("./src/screens/timeline/v2/tab/tab-bar-left/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var t=t.$,s=(0,a.memoStyles)(),r=t.state.scope;return(0,l.jsxs)(n.Popover,{data:d.DATA,onSelect:t.onSelectScope,children:[(0,l.jsx)(o.Flex,{style:s.tabBarLeft,justify:"center",children:(0,l.jsx)(o.Button,{style:s.btn,type:"ghostMain",size:"sm",children:i.MODEL_TIMELINE_SCOPE.getLabel(r)})}),(0,l.jsx)(o.Heatmap,{id:"时间胶囊.切换类型"})]})},d.COMPONENT);try{tabbarleft.displayName="tabbarleft",tabbarleft.__docgenInfo={description:"",displayName:"tabbarleft",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/tab/tab-bar-left/index.tsx#tabbarleft"]={docgenInfo:tabbarleft.__docgenInfo,name:"tabbarleft",path:"src/screens/timeline/v2/tab/tab-bar-left/index.tsx#tabbarleft"})}catch(e){}},"./src/screens/timeline/v2/tab/tab-bar-left/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{tabBarLeft:{height:r._.r(42),paddingLeft:r._.r(r._._wind),paddingRight:r._.sm,marginTop:r._.device(0,2),backgroundColor:"transparent"},btn:{width:r._.r(48),height:r._.r(24),borderRadius:r._.r(16)}}})},"./src/screens/timeline/v2/tab/tab-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/timeline/v2/tab/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"TabBar")},"./src/screens/timeline/v2/tab/tab-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/timeline/v2/tab/tab-bar-label/index.tsx")),r=s("./src/screens/timeline/v2/tab/tab-bar/ds.ts"),d=s("./src/screens/timeline/v2/tab/tab-bar/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)(function(e){var t=(0,d.memoStyles)();return(0,a.jsx)(o.TabBar,Object.assign({},e,{style:t.tabBar,tabStyle:t.tab,labelStyle:t.label,indicatorStyle:t.indicator,pressOpacity:1,pressColor:"transparent",scrollEnabled:!0,renderLabel:l}))},r.COMPONENT);function l(e){var t=e.route,e=e.focused;return(0,a.jsx)(i.default,{route:t,focused:e})}try{tabbar.displayName="tabbar",tabbar.__docgenInfo={description:"",displayName:"tabbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/timeline/v2/tab/tab-bar/index.tsx#tabbar"]={docgenInfo:tabbar.__docgenInfo,name:"tabbar",path:"src/screens/timeline/v2/tab/tab-bar/index.tsx#tabbar"})}catch(e){}},"./src/screens/timeline/v2/tab/tab-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts"),o=s("./src/styles/index.ts");t.memoStyles=r._.memoStyles(function(){var e=r._.r(68),t=r._.device(5,r._.isLandscape?6:7),t=(o.window.width-e)/t,s=r._.r(16);return{tabBar:{position:"absolute",zIndex:2,top:r._.headerHeight,right:0,left:0,paddingLeft:e,backgroundColor:"transparent",borderBottomWidth:0,elevation:0},tab:{width:t,height:r._.r(48)},label:{padding:0},indicator:{width:s,height:4,marginLeft:(t-s)/2+e,backgroundColor:r._.colorMain,borderRadius:4}}})},"./src/screens/tinygrail/_/icon-go/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./node_modules/mobx-react/dist/mobxreact.esm.js")),o=s("./src/components/index.ts"),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/screens/tinygrail/_/icon-go/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),l=["资产重组","买入","卖出","K线"],u={top:4,right:8,bottom:4,left:8};t.default=(0,r.observer)(function(e){var t=(e=e.$).state.go;return(0,a.jsx)(n.Popover,{style:d.styles.touch,data:l,hitSlop:u,onSelect:e.onSelectGo,children:(0,a.jsxs)(o.Flex,{children:[(0,a.jsx)(o.Iconfont,{name:"md-read-more",size:24,color:i._.colorTinygrailPlain}),(0,a.jsx)(o.Text,{style:i._.ml.xs,type:"tinygrailPlain",size:13,bold:!0,children:t})]})})});try{icongo.displayName="icongo",icongo.__docgenInfo={description:"",displayName:"icongo",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/icon-go/index.tsx#icongo"]={docgenInfo:icongo.__docgenInfo,name:"icongo",path:"src/screens/tinygrail/_/icon-go/index.tsx#icongo"})}catch(e){}},"./src/screens/tinygrail/_/icon-go/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{padding:s._.sm,marginRight:s._.xs,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/tinygrail/_/item/auction/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),l=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.type,s=e.price,r=e.state,e=e.amount,o="竞拍中",n="warning",i="";return"auction"===t&&(i="₵"+s+" / "+(0,u.formatNumber)(e,0),1===r?(o="成功",n="bid"):2===r&&(o="失败",n="ask")),(0,c.jsxs)(d.default,{children:[(0,c.jsx)(a.Text,{type:n,bold:!0,align:"right",children:o}),(0,c.jsx)(a.Text,{style:l._.mt.xs,type:"tinygrailText",size:12,align:"right",children:i})]})});try{auction.displayName="auction",auction.__docgenInfo={description:"",displayName:"auction",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/auction/index.tsx#auction"]={docgenInfo:auction.__docgenInfo,name:"auction",path:"src/screens/tinygrail/_/item/auction/index.tsx#auction"})}catch(e){}},"./src/screens/tinygrail/_/item/control/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),y=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),x=r(s("./src/screens/tinygrail/_/popover/index.tsx")),b=r(s("./src/screens/tinygrail/_/stock-preview/index.tsx")),h=s("./src/screens/tinygrail/_/item/control/styles.ts"),g=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e){var t=e._subject,s=e._subjectId,r=e._relation,o=e.id,n=e.type,i=e.monoId,d=e.event,a=e.showMenu,l=e.state,u=e.end,c=e.withoutFeedback,p=void 0===(m=e.onAuctionCancel)?function(){}:m,m=!!u,u="auction"===n,f="竞拍中";return"auction"===n&&(1===l?f="成功":2===l&&(f="失败")),(0,g.jsxs)(g.Fragment,{children:[u&&"竞拍中"===f&&(0,g.jsx)(y.IconTouchable,{style:h.styles.auctionCancel,name:"md-close",color:j._.colorTinygrailPlain,size:18,withoutFeedback:c,onPress:function(){(0,_.confirm)("周六取消需要收取手续费, 确定取消?",function(){return p(o)})}}),!u&&(0,g.jsx)(b.default,Object.assign({},e,{style:h.styles.stockPreview,_loaded:!0})),a&&!m&&(0,g.jsx)(x.default,{event:d,id:i||o,relation:r,subject:t,subjectId:s,onCollect:j.tinygrailStore.toggleCollect})]})});try{control.displayName="control",control.__docgenInfo={description:"",displayName:"control",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/control/index.tsx#control"]={docgenInfo:control.__docgenInfo,name:"control",path:"src/screens/tinygrail/_/item/control/index.tsx#control"})}catch(e){}},"./src/screens/tinygrail/_/item/control/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({auctionCancel:{paddingVertical:s._.md,paddingLeft:s._.sm,marginTop:1.5},stockPreview:{marginTop:-.5,marginRight:-12}})},"./src/screens/tinygrail/_/item/detail/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.date.to-string.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.array.join.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),k=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),P=s("./src/stores/index.ts"),R=s("./src/utils/index.ts"),I=s("./src/utils/app/index.ts"),o=s("./src/utils/decorators/index.ts"),C=s("./src/screens/tinygrail/_/utils.ts"),E=r(s("./src/screens/tinygrail/_/stars/index.tsx")),w=s("./node_modules/react/jsx-runtime.js"),A=["bid","asks","chara","merge"],N={bid:"bid",asks:"ask",chara:"warning",ico:"primary",auction:"warning",merge:"warning"},M=(new Date).getTimezoneOffset()/-60;1===String(M).length&&(M="0"+M);t.default=(0,o.ob)(function(e){var t,s,r,o,n,i=e.assets,d=e.end,a=e.lastOrder,l=e.marketValue,u=e.price,c=e.rank,p=e.rate,m=e.sa,f=e.sacrifices,y=e.starForces,j=e.stars,_=e.state,x=e.total,b=e.type,e=e.users,h=P.tinygrailStore.state._stockPreview,g=!!d,v="auction"===b,S="valhall"===b,l=((h||g)&&(l&&(t=(0,C.decimal)(l)),x)&&(s=(0,C.decimal)(x)),[]),x=[],O=[],T=[],d=(g?(g=(g=d)&&d+"+"+M+":00",l.push((0,I.formatTime)(g)),l.push("已筹"+s)):(l.push("+"+(0,R.toFixed)(p,1)+"("+Number((0,R.toFixed)((0,C.calculateRate)(p,c,j),1))+")"),h&&(_||f)&&x.push("+"+(0,C.decimal)((0,C.calculateTotalRate)({rate:p,rank:c,stars:j,state:_,sacrifices:f,assets:i},!0))+"("+(0,C.decimal)((0,C.calculateTotalRate)({rate:p,rank:c,stars:j,state:_,sacrifices:f,assets:i}))+")"),S?(x.push("底价"+(0,R.toFixed)(u,1)),x.push("数量"+(0,R.formatNumber)(_,0))):((h||v)&&a&&T.push(""+(0,R.lastDate)((0,R.getTimestamp)((0,I.tinygrailFixedTime)(a)))),s&&T.push("流通量"+s),t&&T.push("总值"+t))),h&&(m&&O.push("献祭"+(0,C.decimal)(m)),y)&&O.push("通天塔"+(0,C.decimal)(y)),e&&"ico"!==e&&(r=e,o=9<Number(r||0)&&Number(r||0)<15),A.includes(b)&&_?n=_+"股":"ico"===b&&(n="注资"+(0,C.decimal)(_)),h?10:11);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(k.Text,{style:P._.mt.xs,type:"tinygrailText",size:d,lineHeight:12,children:[!!n&&(0,w.jsxs)(k.Text,{type:N[b],size:d,bold:!0,lineHeight:12,children:[n,(0,w.jsx)(k.Text,{type:"tinygrailText",size:d,lineHeight:12,children:" / "})]}),!!f&&(0,w.jsxs)(k.Text,{type:"bid",size:d,bold:!0,lineHeight:12,children:["塔",h&&i&&i!==f?f+"("+i+")":f,(0,w.jsx)(k.Text,{type:"tinygrailText",size:d,lineHeight:12,children:" / "})]}),l.join(" / "),!!r&&(0,w.jsxs)(k.Text,{size:d,lineHeight:12,type:o?"warning":"tinygrailText",bold:o,children:[" / ","当前",r,"人"]})," ",!h&&(0,w.jsx)(E.default,{value:j})]}),!!x.length&&(0,w.jsx)(k.Text,{type:"tinygrailText",size:d,lineHeight:12,children:x.join(" / ")}),!!O.length&&(0,w.jsxs)(k.Text,{type:"tinygrailText",size:d,lineHeight:12,children:[O.join(" / "),!!j&&" / ",(0,w.jsx)(E.default,{value:j})]}),!!T.length&&(0,w.jsx)(k.Text,{type:"tinygrailText",size:d,lineHeight:12,children:T.join(" / ")})]})});try{detail.displayName="detail",detail.__docgenInfo={description:"",displayName:"detail",props:{assets:{defaultValue:null,description:"",name:"assets",required:!0,type:{name:"any"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"any"}},lastOrder:{defaultValue:null,description:"",name:"lastOrder",required:!0,type:{name:"any"}},marketValue:{defaultValue:null,description:"",name:"marketValue",required:!0,type:{name:"any"}},price:{defaultValue:null,description:"",name:"price",required:!0,type:{name:"any"}},rank:{defaultValue:null,description:"",name:"rank",required:!0,type:{name:"any"}},rate:{defaultValue:null,description:"",name:"rate",required:!0,type:{name:"any"}},sa:{defaultValue:null,description:"",name:"sa",required:!0,type:{name:"any"}},sacrifices:{defaultValue:null,description:"",name:"sacrifices",required:!0,type:{name:"any"}},starForces:{defaultValue:null,description:"",name:"starForces",required:!0,type:{name:"any"}},stars:{defaultValue:null,description:"",name:"stars",required:!0,type:{name:"any"}},state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"any"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"any"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"any"}},users:{defaultValue:null,description:"",name:"users",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/detail/index.tsx#detail"]={docgenInfo:detail.__docgenInfo,name:"detail",path:"src/screens/tinygrail/_/item/detail/index.tsx#detail"})}catch(e){}},"./src/screens/tinygrail/_/item/icon/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),u=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),m=s("./src/utils/fetch/index.ts"),r=s("./src/utils/decorators/index.ts"),f=s("./src/utils/app/ds.ts"),y=s("./src/constants/index.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=e.id,r=e.monoId,o=e.name,n=e.icon,i=e.event,d=t.navigation,e=c.tinygrailStore.collected(s),a=(t=c.systemStore.setting).cdn,t=t.cdnOrigin;return"string"==typeof(n=(0,p.tinygrailOSS)(n))&&(n=n.replace("/r/400/pic/crt/l/","/pic/crt/g/")),a&&"magma"===t&&"string"==typeof n&&n.includes(f.HOST_IMAGE)&&(n=(0,y.CDN_OSS_MAGMA_MONO)(n)),(0,j.jsx)(l.default,{style:c._.mt.md,children:(0,j.jsx)(u.Avatar,{src:n,name:o,borderWidth:e?2:0,borderColor:e?"#ffc107":"transparent",onPress:function(){(0,m.t)(i.id,Object.assign({to:"Mono",monoId:r||s},i.data)),d.push("Mono",{monoId:"character/"+(r||s),_name:o})}})})})},"./src/screens/tinygrail/_/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),y=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),x=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),n=s("./src/constants/index.ts"),b=r(s("./src/screens/tinygrail/_/item/auction/index.tsx")),h=r(s("./src/screens/tinygrail/_/item/control/index.tsx")),g=r(s("./src/screens/tinygrail/_/item/detail/index.tsx")),v=r(s("./src/screens/tinygrail/_/item/icon/index.tsx")),S=r(s("./src/screens/tinygrail/_/item/title/index.tsx")),O=s("./src/screens/tinygrail/_/item/utils.ts"),T=s("./src/screens/tinygrail/_/item/styles.ts"),k=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,r=t.navigation,t=(0,T.memoStyles)(),o=e.style,n=e.id,i=e.monoId,d=e.event,a=e.type,l=e.end,u=e.withoutFeedback,c=e.go||s.state.go,p=!!l,m="auction"===a,f="valhall"===a;return(0,k.jsxs)(y.Flex,{style:(0,_.stl)(t.container,o),align:"start",children:[(0,k.jsx)(v.default,Object.assign({},e)),(0,k.jsx)(y.Flex.Item,{style:t.wrap,children:(0,k.jsxs)(y.Flex,{align:"start",children:[(0,k.jsx)(y.Flex.Item,{style:j._.mr.sm,children:(0,k.jsx)(y.Touchable,{style:t.item,withoutFeedback:u,onPress:function(){var e;return p?((0,x.t)(d.id,Object.assign({to:"TinygrailICODeal",monoId:i||n},d.data)),r.push("TinygrailICODeal",{monoId:"character/"+(i||n)})):(e=(m||f)&&i||n,c?(0,O.getOnPress)(e,c,r,d.id,d.data)():((0,x.t)(d.id,Object.assign({to:"TinygrailDeal",monoId:e},d.data)),r.push("TinygrailDeal",{monoId:"character/"+e})))},children:(0,k.jsxs)(y.Flex,{align:"start",children:[(0,k.jsxs)(y.Flex.Item,{children:[(0,k.jsx)(S.default,Object.assign({},e)),(0,k.jsx)(g.default,Object.assign({},e))]}),m&&(0,k.jsx)(b.default,Object.assign({},e))]})})}),(0,k.jsx)(h.default,Object.assign({},e))]})})]})},{event:n.EVENT,showMenu:!0,withoutFeedback:!1,onAuctionCancel:function(){},onCollect:function(){}});try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/index.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"src/screens/tinygrail/_/item/index.tsx#item"})}catch(e){}},"./src/screens/tinygrail/_/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingLeft:r._.wind,backgroundColor:r._.colorTinygrailContainer},wrap:{paddingRight:r._.wind-r._._wind},item:{paddingVertical:r._.md,paddingLeft:r._.sm,borderRadius:r._.radiusXs,overflow:"hidden"}}})},"./src/screens/tinygrail/_/item/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.parse-int.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=r(s("./src/screens/tinygrail/_/rank/index.tsx")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ob)(function(e){var t=e.rank,s=void 0===(s=e.name)?"":s,r=e.level,e=e.bonus;return(0,a.jsxs)(o.Flex,{wrap:"wrap",children:[(0,a.jsx)(d.default,{value:t}),(0,a.jsx)(o.Text,{type:"tinygrailPlain",size:12<s.length?10:8<s.length?12:14,lineHeight:14,bold:!0,children:s}),1<parseInt(r)&&(0,a.jsxs)(o.Text,{style:n._.ml.xs,type:"ask",size:11,lineHeight:14,bold:!0,children:["lv",r]}),!!e&&(0,a.jsxs)(o.Text,{style:n._.ml.xs,type:"warning",size:11,lineHeight:14,bold:!0,children:["x",e]})]})});try{title.displayName="title",title.__docgenInfo={description:"",displayName:"title",props:{rank:{defaultValue:null,description:"",name:"rank",required:!0,type:{name:"any"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},level:{defaultValue:null,description:"",name:"level",required:!0,type:{name:"any"}},bonus:{defaultValue:null,description:"",name:"bonus",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/title/index.tsx#title"]={docgenInfo:title.__docgenInfo,name:"title",path:"src/screens/tinygrail/_/item/title/index.tsx#title"})}catch(e){}},"./src/screens/tinygrail/_/item/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.getOnPress=function(s,r,o,n,i){return function(){var e,t;switch(r){case"K线":e="TinygrailTrade";break;case"买入":e="TinygrailDeal",t={type:"bid"};break;case"卖出":e="TinygrailDeal",t={type:"asks"};break;case"资产重组":e="TinygrailSacrifice";break;default:return}(0,d.t)(n,Object.assign({to:e,monoId:s},i)),o.push(e,Object.assign({monoId:"character/"+s},t))}};var d=s("./src/utils/fetch/index.ts")},"./src/screens/tinygrail/_/popover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),p=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),m=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),y=s("./src/utils/fetch/index.ts"),j=s("./src/constants/index.ts"),_=s("./src/screens/tinygrail/_/popover/styles.ts"),x=s("./node_modules/react/jsx-runtime.js"),b=["收藏","K线","买入","卖出","资产重组"];t.default=(0,r.obc)(function(e,t){var s=e.id,r=void 0===(i=e.relation)?[]:i,o=e.subject,n=e.subjectId,i=void 0===(i=e.event)?j.EVENT:i,d=void 0===(e=e.onCollect)?function(){}:e,a=t.navigation,l=i.id,u=i.data,e=[].concat(b);return o&&n&&(e=[].concat((0,c.default)(e),[o])),r.length&&(e=[].concat((0,c.default)(e),["关联角色 ("+(r.length+1)+")"])),(0,x.jsx)(m.Popover,{style:_.styles.touch,contentStyle:_.styles.content,data:e,onSelect:function(e){switch(e){case"收藏":d(s);break;case"K线":(0,y.t)(l,Object.assign({to:"TinygrailTrade",from:"popover",monoId:s},u)),a.push("TinygrailTrade",{monoId:"character/"+s});break;case"买入":(0,y.t)(l,Object.assign({to:"TinygrailDeal",from:"popover",type:"bid",monoId:s},u)),a.push("TinygrailDeal",{monoId:"character/"+s,type:"bid"});break;case"卖出":(0,y.t)(l,Object.assign({to:"TinygrailDeal",from:"popover",type:"ask",monoId:s},u)),a.push("TinygrailDeal",{monoId:"character/"+s,type:"ask"});break;case"资产重组":(0,y.t)(l,Object.assign({to:"TinygrailSacrifice",from:"popover",monoId:s},u)),a.push("TinygrailSacrifice",{monoId:"character/"+s});break;default:e.includes("关联角色")?((0,y.t)(l,Object.assign({to:"TinygrailRelation",from:"popover",monoId:s},u)),a.push("TinygrailRelation",{ids:[s].concat((0,c.default)(r)),name:o+" ("+(r.length+1)+")"})):((0,y.t)(l,Object.assign({to:"Subject",from:"popover",monoId:s},u)),a.push("Subject",{subjectId:n}))}},children:(0,x.jsx)(p.Flex,{style:_.styles.icon,justify:"center",children:(0,x.jsx)(p.Iconfont,{name:"md-more-vert",size:16,color:f._.colorTinygrailText})})})})},"./src/screens/tinygrail/_/popover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{marginTop:s._.r(8),borderRadius:20,overflow:"hidden"},content:{borderTopRightRadius:0},icon:{width:36,height:36}})},"./src/screens/tinygrail/_/rank/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/tinygrail/_/rank/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t,s=void 0===(s=e.style)?void 0:s,r=void 0===(r=e.size)?10:r;return(e=void 0===(e=e.value)?void 0:e)?(t=(0,i.memoStyles)(),(0,d.jsx)(o.Text,{style:(0,n.stl)(t.rank,{backgroundColor:e<=500?"#ffc107":"#aaa"},s),size:r,bold:!0,align:"center",children:e})):null});try{rank.displayName="rank",rank.__docgenInfo={description:"",displayName:"rank",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/rank/index.tsx#rank"]={docgenInfo:rank.__docgenInfo,name:"rank",path:"src/screens/tinygrail/_/rank/index.tsx#rank"})}catch(e){}},"./src/screens/tinygrail/_/rank/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{rank:{minWidth:30,marginRight:r._.xs,color:r._.__colorPlain__,textShadowOffset:{width:1,hegith:1},textShadowRadius:1,textShadowColor:"rgba(0, 0, 0, 0.48)",borderRadius:4,overflow:"hidden"}}})},"./src/screens/tinygrail/_/stars/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.fill.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var s,t,r=void 0===(r=e.value)?0:r,o=void 0===(e=e.size)?11:e;return r?(s={lineHeight:i._.fontSize(12).lineHeight},t=r-25*(e=Math.floor(r/25))-5*(r=Math.floor((r-25*e)/5)),(0,d.jsxs)(d.Fragment,{children:[!!e&&new Array(e).fill("").map(function(e,t){return(0,d.jsx)(n.Iconfont,{style:s,name:"ios-sunny",size:o,color:"#ffc107"},t)}),!!r&&new Array(r).fill("").map(function(e,t){return(0,d.jsx)(n.Iconfont,{style:s,name:"ios-moon",size:o,color:"#ffc107"},t)}),!!t&&new Array(t).fill("").map(function(e,t){return(0,d.jsx)(n.Iconfont,{style:s,name:"ios-star",size:o,color:"#ffc107"},t)})]})):null});try{stars.displayName="stars",stars.__docgenInfo={description:"",displayName:"stars",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"number"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/stars/index.tsx#stars"]={docgenInfo:stars.__docgenInfo,name:"stars",path:"src/screens/tinygrail/_/stars/index.tsx#stars"})}catch(e){}},"./src/screens/tinygrail/_/stock-preview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=r(s("./node_modules/react/index.js")),f=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),y=s("./src/components/index.ts"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),x=s("./src/screens/tinygrail/_/utils.ts"),c=s("./src/screens/tinygrail/_/stock-preview/styles.ts"),b=s("./node_modules/react/jsx-runtime.js");function p(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=r?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var m,h={0:"#aaa",1:j._.colorBid,2:j._.colorPrimary,3:"#ffdc51",4:j._.colorWarning,5:j._.colorMain},s={style:void 0,id:0,bids:0,asks:0,change:0,current:0,fluctuation:0,total:0,marketValue:0,users:0,theme:"dark",_loaded:!1},i=(u=u.default.Component,(0,i.default)(g,u),m=p(g),(0,n.default)(g,[{key:"renderICO",value:function(){var e=this.props.total,t=(0,_.caculateICO)(this.props),s=t.level,t=t.next,e=(0,_.toFixed)(e/t*100,0);return(0,b.jsxs)(y.Flex,{style:this.styles.ico,children:[(0,b.jsxs)(y.Text,{style:this.styles.iconText,type:"tinygrailPlain",size:11,align:"center",bold:!0,children:["lv",s," ",e,"%"]}),(0,b.jsx)(f.default,{style:this.styles.icoBar,children:(0,b.jsx)(f.default,{style:[this.styles.icoProcess,{width:Number(e)+"%",backgroundColor:h[s]||j._.colorAsk}]})})]})}},{key:"isDark",get:function(){return"dark"===this.props.theme}},{key:"render",value:function(){var e,t,s,r,o,n,i=this.props,d=i.style,a=i.current,l=i.fluctuation,u=i.change,c=i.bids,p=i.asks,m=i.users;return i._loaded?m?this.renderICO():(i=j.tinygrailStore.state._stockPreview,(m=[this.styles.fluctuation,j._.ml.sm]).push(l<0?this.styles.danger:0<l?this.styles.success:this.styles.plain),e=!0,s=t=0,c||p?c&&!p?t=100:s=!c&&p?100:(r=1.1*(c+p),t=Math.min(c/r*100,100),Math.min(p/r*100,100)):e=!1,r="-%",o="0.00",i?0<l?o="+"+(0,_.toFixed)(a-a/(1+l/100),2):l<0&&(o="-"+(0,_.toFixed)(a/(1+l/100),2)):0<l?r="+"+(0,_.toFixed)(l,2)+"%":l<0&&(r=(0,_.toFixed)(l,2)+"%"),l=11,(8<r.length||7<r.length)&&(l=10),n=i?"0.00"===o:"-%"===r,(0,b.jsxs)(y.Touchable,{style:(0,_.stl)(this.styles.container,d),onPress:j.tinygrailStore.toggleStockPreview,children:[(0,b.jsxs)(y.Flex,{justify:"end",children:[(0,b.jsx)(y.Text,{type:"tinygrailPlain",size:13,lineHeight:14,bold:!0,align:"right",children:a?(0,_.toFixed)(a,2):"-"}),!n&&(0,b.jsx)(y.Text,{style:[{color:j._.__colorPlain__},m],size:l,lineHeight:14,align:"center",bold:!0,children:i?o:r})]}),(0,b.jsxs)(y.Flex,{style:this.styles.bottom,justify:"end",children:[i&&!!u&&10<=u&&(0,b.jsxs)(y.Text,{type:"tinygrailText",size:10,children:["量",u," "]}),e&&(0,b.jsxs)(y.Flex,{children:[i&&!!c&&(0,b.jsx)(y.Text,{type:"bid",size:10,children:(0,x.decimal)(c)}),i&&(0,b.jsxs)(y.Flex,{style:(0,_.stl)(i?this.styles.floorShowDetail:this.styles.floor,j._.ml.xs),justify:"between",children:[(0,b.jsx)(f.default,{style:[this.styles.bids,{width:t+"%"}]}),(0,b.jsx)(f.default,{style:[this.styles.asks,{width:s+"%"}]})]}),i&&!!p&&(0,b.jsx)(y.Text,{style:j._.ml.xs,type:"ask",size:10,children:(0,x.decimal)(p)})]})]})]})):null}},{key:"styles",get:function(){return(0,c.memoStyles)()}}]),g);function g(){return(0,o.default)(this,g),m.apply(this,arguments)}(0,l.default)(i,"defaultProps",s);t.default=(0,r.ob)(i);try{stockpreview.displayName="stockpreview",stockpreview.__docgenInfo={description:"",displayName:"stockpreview",props:{style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"Id"}},bids:{defaultValue:null,description:"",name:"bids",required:!0,type:{name:"0"}},asks:{defaultValue:null,description:"",name:"asks",required:!0,type:{name:"0"}},change:{defaultValue:null,description:"",name:"change",required:!0,type:{name:"0"}},current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"0"}},fluctuation:{defaultValue:null,description:"",name:"fluctuation",required:!0,type:{name:"0"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"0"}},marketValue:{defaultValue:null,description:"",name:"marketValue",required:!0,type:{name:"0"}},users:{defaultValue:null,description:"",name:"users",required:!0,type:{name:"0"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:'"dark"'}},_loaded:{defaultValue:null,description:"",name:"_loaded",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/stock-preview/index.tsx#stockpreview"]={docgenInfo:stockpreview.__docgenInfo,name:"stockpreview",path:"src/screens/tinygrail/_/stock-preview/index.tsx#stockpreview"})}catch(e){}},"./src/screens/tinygrail/_/stock-preview/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingVertical:17,paddingHorizontal:r._.r(r._.sm)},absolute:{position:"absolute",zIndex:1,right:r._.r(64)},fluctuation:{minWidth:r._.r(56),paddingHorizontal:r._.xs,paddingBottom:.5,borderRadius:2,overflow:"hidden"},danger:{backgroundColor:r._.colorAsk},success:{backgroundColor:r._.colorBid},plain:{backgroundColor:r._.colorTinygrailIcon},floor:{width:r._.r(64)},floorShowDetail:{width:r._.r(24)},bids:{height:2,backgroundColor:r._.colorBid,borderRadius:2,overflow:"hidden"},asks:{height:2,backgroundColor:r._.colorAsk,borderRadius:2,overflow:"hidden"},ico:{height:"100%",maxHeight:68,paddingRight:r._._wind},icoBar:{width:r._.r(96),height:16,backgroundColor:r._.tSelect(r._.colorTinygrailBorder,r._.colorTinygrailBg),borderRadius:8,overflow:"hidden"},icoProcess:{height:16,borderRadius:8,overflow:"hidden"},iconText:{position:"absolute",zIndex:1,left:0,right:r._.sm},bottom:{marginTop:4}}})},"./src/screens/tinygrail/_/tabs-v2/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),i=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js"),l=["routes","renderItem"];t.default=(0,r.obc)(function(e,t){var s=e.routes,r=e.renderItem,e=(0,n.default)(e,l),o=(t=t.$).state.page;return(0,a.jsx)(i.TabsV2,Object.assign({style:d._.mt._sm,routes:s,page:o,textColor:d._.colorTinygrailPlain,backgroundColor:d._.colorTinygrailContainer,borderBottomColor:d._.colorTinygrailBorder,underlineColor:d._.colorWarning,renderItem:r,onChange:t.onChange},e),d._.orientation)})},"./src/screens/tinygrail/_/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),p=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),m=(r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),f=s("./src/components/index.ts"),y=s("./src/screens/_/index.ts"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),x=s("./src/constants/index.ts"),b=s("./src/screens/tinygrail/_/tool-bar/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.style,s=void 0===(s=e.data)?[]:s,r=e.sort,o=e.level,n=void 0===(d=e.levelMap)?{}:d,i=e.direction,d=e.renderLeft,a=e.onSortPress,l=void 0===a?function(){}:a,u=void 0===(a=e.onLevelSelect)?function(){}:a,c=(0,b.memoStyles)(),e=["全部 ("+Object.keys(n).reduce(function(e,t){return e+n[t]},0)+")"].concat((0,p.default)(Object.keys(n).map(function(e){return"lv"+e+" ("+n[e]+")"})));return(0,h.jsxs)(f.Flex,{style:(0,_.stl)(c.container,t),children:[d,(0,h.jsx)(y.Popover,{data:e,onSelect:function(e){e=e.split(" ")[0];u("全部"===e?"":e.replace("lv",""))},children:(0,h.jsxs)(f.Flex,{style:c.item,justify:"center",children:[(0,h.jsx)(f.Iconfont,{name:"md-filter-list",size:16,color:o?j._.colorAsk:j._.colorTinygrailText}),(0,h.jsxs)(f.Text,{style:j._.ml.xs,size:13,type:o?"ask":"tinygrailText",children:[o?"lv"+o:"等级",n[o]?" ("+n[o]+")":""]})]})}),!!s.length&&(0,h.jsx)(m.default,Object.assign({contentContainerStyle:c.contentContainerStyle,horizontal:!0},x.SCROLL_VIEW_RESET_PROPS,{children:s.map(function(e){var t=r===e.value;return(0,h.jsx)(f.Touchable,{withoutFeedback:!0,onPress:function(){return l(e.value)},children:(0,h.jsxs)(f.Flex,{style:c.item,justify:"center",children:[(0,h.jsx)(f.Text,{type:t?"warning":"tinygrailText",size:13,bold:t,children:e.label}),t&&!!i&&(0,h.jsx)(f.Iconfont,{style:j._.ml._xs,name:"md-arrow-drop-"+i,color:j._.colorWarning})]})},e.label)})}))]})});try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"ViewStyle"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any[] | readonly any[]"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"any"}},level:{defaultValue:null,description:"",name:"level",required:!1,type:{name:"any"}},levelMap:{defaultValue:null,description:"",name:"levelMap",required:!1,type:{name:"Record<string, number>"}},direction:{defaultValue:null,description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:'""'},{value:'"up"'},{value:'"down"'}]}},renderLeft:{defaultValue:null,description:"",name:"renderLeft",required:!1,type:{name:"any"}},onSortPress:{defaultValue:null,description:"",name:"onSortPress",required:!1,type:{name:"Fn"}},onLevelSelect:{defaultValue:null,description:"",name:"onLevelSelect",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/tinygrail/_/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/tinygrail/_/tool-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingLeft:r._._wind,height:r._.r(46),borderBottomWidth:r._.hairlineWidth,borderBottomColor:r._.colorTinygrailBorder},contentContainerStyle:{height:r._.r(44),paddingLeft:r._.r(r._.xs),paddingRight:r._.r(r._._wind)},item:{height:r._.r(44),paddingHorizontal:r._.r(6)}}})},"./src/screens/tinygrail/_/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.SORT_ZGX=t.SORT_XX=t.SORT_XFJL=t.SORT_SSZGX=t.SORT_SSGX=t.SORT_SDGXB=t.SORT_SDGX=t.SORT_SCJ=t.SORT_SC=t.SORT_RK=t.SORT_HYD=t.SORT_GXB=t.SORT_GX=t.SORT_GF=t.SORT_GDZC=t.SORT_GDS=t.SORT_FHL=t.SORT_DQZD=t.SORT_DQJ=t.SORT_DJ=t.SORT_CGS=t.SORT_CCJZ=void 0,t.calculateRate=d,t.calculateTotalRate=a,t.decimal=function(e){var t=Math.abs(e);return t>=i.B?(e<0?"-":"")+(0,n.toFixed)(t/i.B,1)+"亿":t>=i.M?(e<0?"-":"")+(0,n.toFixed)(t/i.M,1)+"万":(e<0?"-":"")+(0,n.formatNumber)(t,0)},t.levelList=function(t,e){return void 0===t?e:e.filter(function(e){return e.level==t})},t.relation=function(e){var r=(0,i.getXsbRelationOTA)();return Object.assign({},e,{list:e.list.map(function(e){var t=Object.assign({},e),e=r.data[e.monoId||e.id]||{},s=e.s,e=e.r;return s&&(t._subject=r.name[s],t._subjectId=s),e&&(t._relation=e),t})})},t.sortList=function(e,t,s){var r="down"===t?1:-1;switch(e){case y.value:return s.slice().sort(function(e,t){return(d(t.rate,t.rank,t.stars)-d(e.rate,e.rank,e.stars))*r});case j.value:return s.slice().sort(function(e,t){return(a(t)-a(e))*r});case f.value:return s.slice().sort(function(e,t){return(a(t,!0)-a(e,!0))*r});case l.value:return s.slice().sort(function(e,t){return((e.rank||0)-(t.rank||0))*r});case u.value:return s.slice().sort(function(e,t){return((t.stars||0)-(e.stars||0))*r});case c.value:return s.slice().sort(function(e,t){return((t.amount||0)-(e.amount||0))*r});case p.value:return s.slice().sort(function(e,t){e=o.tinygrailStore.collected(e.id||0);return(o.tinygrailStore.collected(t.id||0)-e)*r});case m.value:return s.slice().sort(function(e,t){return((t.rate||0)-(e.rate||0))*r});case _.value:return s.slice().sort(function(e,t){return((t.rate||0)/(t.current||10)-(e.rate||0)/(e.current||10))*r});case x.value:return s.slice().sort(function(e,t){return((t.rate||0)*(t.level||0)-(e.rate||0)*(e.level||0))*r});case b.value:return s.slice().sort(function(e,t){return((t.rate||0)*(t.level||0)/(t.current||10)-(e.rate||0)*(e.level||0)/(e.current||10))*r});case h.value:return s.slice().sort(function(e,t){return((t.level||1)-(e.level||1))*r});case g.value:return s.slice().sort(function(e,t){return((t.state||0)-(e.state||0))*r});case v.value:return s.slice().sort(function(e,t){return((t.sacrifices||0)-(e.sacrifices||0))*r});case S.value:return s.slice().sort(function(e,t){return((t.state||0)*(t.current||0)-(e.state||0)*(e.current||0))*r});case O.value:return s.slice().sort(function(e,t){return(0,n.desc)(String(t.lastOrder||""),String(e.lastOrder||""))*r});case T.value:return s.slice().sort(function(e,t){return((t.marketValue||0)-(e.marketValue||0))*r});case k.value:return s.slice().sort(function(e,t){return((t.total||0)-(e.total||0))*r});case P.value:return s.slice().sort(function(e,t){return((t.current||0)-(e.current||0))*r});case R.value:return s.slice().sort(function(e,t){return((t.fluctuation||0)-(e.fluctuation||0))*r});case I.value:return s.slice().sort(function(e,t){return(parseInt(t.bonus||0)-parseInt(e.bonus||0))*r});default:return s}},t.throttleInfo=void 0,r(s("./node_modules/react-native-web/dist/exports/ToastAndroid/index.js"))),o=s("./src/stores/index.ts"),n=s("./src/utils/index.ts"),i=s("./src/constants/index.ts");function d(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t<501&&0<e?.005*(601-t)*e:2*(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e.rate||0:d(e.rate,e.rank,e.stars);return((e.state||0)+(e.assets||e.sacrifices||0))*t}var l=t.SORT_RK={label:"通天塔",value:"rk"},u=t.SORT_XX={label:"星星",value:"xx"},c=t.SORT_GF={label:"股份",value:"gf"},p=t.SORT_SC={label:"收藏",value:"sc"},m=t.SORT_GX={label:"股息",value:"gx"},f=t.SORT_ZGX={label:"总股息",value:"zgx"},y=t.SORT_SSGX={label:"生效股息",value:"ssgx"},j=t.SORT_SSZGX={label:"生效总股息",value:"sszgx"},_=t.SORT_GXB={label:"流动股息比",value:"gxb"},x=t.SORT_SDGX={label:"圣殿股息",value:"sdgx"},b=t.SORT_SDGXB={label:"圣殿股息比",value:"sdgxb"},h=t.SORT_DJ={label:"等级",value:"dj"},g=(t.SORT_GDS={label:"挂单",value:"cgs"},t.SORT_CGS={label:"持股",value:"cgs"}),v=t.SORT_GDZC={label:"塔",value:"gdzc"},S=t.SORT_CCJZ={label:"持仓价值",value:"ccjz"},O=t.SORT_HYD={label:"活跃度",value:"hyd"},T=t.SORT_SCJ={label:"市场价",value:"scj"},k=t.SORT_FHL={label:"发行量",value:"fhl"},P=t.SORT_DQJ={label:"当前价",value:"dqj"},R=t.SORT_DQZD={label:"当前涨跌",value:"dqzd"},I=t.SORT_XFJL={label:"新番奖励",value:"xfjl"};t.throttleInfo=(0,n.throttle)(function(e){(0,n.info)(e,.4)},i.IOS?400:r.default.SHORT)},"./src/screens/tinygrail/index/assets/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),y=s("./src/screens/_/index.ts"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),x=s("./src/constants/index.ts"),b=s("./src/screens/tinygrail/index/assets/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r,o,n,t=t.$,i=(0,b.memoStyles)(),d=(u=t.state).currentBalance,a=u.currentTotal,l=u.lastBalance,u=u.lastTotal,c=(p=t.assets).balance,p=p.lastIndex,m=t.total,m=t.short?(c=1e3<c?(0,_.toFixed)(c/x.M,1)+"万":(0,_.formatNumber)(c,1),1e3<m?(0,_.toFixed)(m/x.M,1)+"万":(0,_.formatNumber)(m,1)):(c=(0,_.formatNumber)(c,1),(0,_.formatNumber)(m,1)),d=d-l,l=a-u,a=t.short&&1e3<=Math.abs(d)?(0,_.toFixed)(Math.abs(d)/x.M,1)+"万":(0,_.formatNumber)(Math.abs(d),1);return 0<d?(s="+"+a,r="bid"):d<0&&(s="-"+a,r="ask"),u=t.short&&1e3<=Math.abs(l)?(0,_.toFixed)(Math.abs(l)/x.M,1)+"万":(0,_.formatNumber)(Math.abs(l),1),0<l?(o="+"+u,n="bid"):l<0&&(o="-"+u,n="ask"),(0,h.jsxs)(f.Flex,{style:i.assets,children:[(0,h.jsx)(f.Flex.Item,{children:(0,h.jsx)(f.Touchable,{style:i.touch,onPress:t.toogleShort,children:(0,h.jsxs)(f.Text,{type:"tinygrailPlain",size:13,bold:!0,children:[c,s&&(0,h.jsxs)(f.Text,{type:r,size:10,lineHeight:13,bold:!0,children:[" ",s]})," ","/ ",m," ",o&&(0,h.jsxs)(f.Text,{type:n,size:10,lineHeight:13,bold:!0,children:[o," "]}),!!p&&"/ #"+p,(0,h.jsxs)(f.Text,{type:"tinygrailPlain",size:13,bold:!0,children:[" ",t.short?"[-]":"[+]"]})]})})}),(0,h.jsx)(y.IconTouchable,{style:j._.mr._sm,name:"md-calculate",color:j._.colorTinygrailPlain,onPress:t.doTest})]})});try{assets.displayName="assets",assets.__docgenInfo={description:"",displayName:"assets",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/assets/index.tsx#assets"]={docgenInfo:assets.__docgenInfo,name:"assets",path:"src/screens/tinygrail/index/assets/index.tsx#assets"})}catch(e){}},"./src/screens/tinygrail/index/assets/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{assets:{width:"100%",minHeight:r._.ios(56,32),paddingBottom:r._.ios(16,0),marginTop:r._.ios(-20,0)},touch:{paddingVertical:r._.xs,paddingHorizontal:r._.sm,marginLeft:-r._.sm,borderRadius:r._.radiusSm,overflow:"hidden"}}})},"./src/screens/tinygrail/index/auth/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=r(s("./src/screens/tinygrail/index/btns/index.tsx")),m=s("./src/screens/tinygrail/index/auth/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,r=t.navigation,t=(0,m.memoStyles)(),o=s.state._loaded,n=(i=s.userInfo).nickname,i=i.avatar;return(0,f.jsxs)(a.Flex,{style:u._.mb.sm,children:[(0,f.jsx)(l.IconBack,{style:t.back,navigation:r,color:u._.colorTinygrailPlain}),(0,f.jsx)(d.default,{style:u._.ml.xs,children:(0,f.jsx)(l.Avatar,{src:(0,c.tinygrailOSS)(null==i?void 0:i.large),size:36,name:n,borderColor:"transparent"},(0,c.tinygrailOSS)(null==i?void 0:i.large))}),(0,f.jsx)(a.Flex.Item,{children:(0,f.jsxs)(a.Flex,{children:[(0,f.jsxs)(a.Touchable,{style:t.touch,onPress:function(){return r.push("Qiafan")},children:[(0,f.jsx)(a.Text,{type:"tinygrailPlain",size:13,bold:!0,children:n}),s.advance?(0,f.jsx)(a.Text,{size:11,lineHeight:12,type:"warning",children:"高级会员"}):!!o&&(0,f.jsx)(a.Text,{type:"tinygrailText",size:11,lineHeight:12,children:"普通会员"})]}),(0,f.jsx)(l.IconTouchable,{style:u._.ml._xs,name:u._.tSelect("md-brightness-2","md-brightness-5"),color:u._.colorTinygrailPlain,size:18,onPress:function(){u._.toggleTinygrailThemeMode(),setTimeout(function(){u._.tinygrailThemeMode!==u._.mode&&u._.toggleMode()},40)}})]})}),(0,f.jsx)(p.default,{})]})});try{auth.displayName="auth",auth.__docgenInfo={description:"",displayName:"auth",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/auth/index.tsx#auth"]={docgenInfo:auth.__docgenInfo,name:"auth",path:"src/screens/tinygrail/index/auth/index.tsx#auth"})}catch(e){}},"./src/screens/tinygrail/index/auth/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{back:{marginLeft:-8},touch:{paddingVertical:r._.xs,paddingHorizontal:r._.sm,borderRadius:r._.radiusSm,overflow:"hidden"}}})},"./src/screens/tinygrail/index/bonus-modal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/react/index.js")),p=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),m=r(s("./node_modules/react-native-web/dist/exports/BackHandler/index.js")),f=s("./src/components/index.ts"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),_=s("./src/constants/index.ts"),x=s("./src/screens/tinygrail/index/bonus-modal/styles.ts"),b=s("./node_modules/react/jsx-runtime.js");function h(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=c.default.Component,(0,d.default)(v,s),g=h(v),(0,n.default)(v,[{key:"componentDidMount",value:function(){m.default.addEventListener("hardwareBackPress",this.onBackAndroid)}},{key:"componentWillUnmount",value:function(){m.default.removeEventListener("hardwareBackPress",this.onBackAndroid)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){_.IOS||f.StatusBar.setHidden(e.visible)}},{key:"imageWidth",get:function(){return this.context.$.state.bonus.length<=4?Math.floor(.5*(Math.min(y._.window.width-2*y._.wind,400)-2*y._._wind-y._.md)):Math.floor(.33*(Math.min(y._.window.width-2*y._.wind,400)-2*(y._._wind+y._.md)))}},{key:"imageHeight",get:function(){return 1.28*this.imageWidth}},{key:"total",get:function(){return this.context.$.state.bonus.reduce(function(e,t){return e+t.Amount*t.CurrentPrice},0)}},{key:"render",value:function(){var s=this,e=this.context,r=e.$,o=e.navigation,e=r.state,n=e.bonus,t=e.isBonus2,e=e.loadingBonus,i=this.props.visible;return(0,b.jsx)(f.Modal,{style:this.styles.modal,visible:i,title:"刮刮乐",type:"tinygrailPlain",onClose:r.onCloseModal,children:(0,b.jsxs)(p.default,{style:this.styles.wrap,children:[(0,b.jsx)(f.Flex,{align:"start",wrap:"wrap",children:n.map(function(e,t){return(0,b.jsxs)(p.default,{style:(0,j.stl)(s.styles.item,{width:s.imageWidth},(t+1)%(n.length<=4?2:3)&&y._.mr.md),children:[(0,b.jsx)(f.Image,{size:s.imageWidth,height:s.imageHeight,src:(0,j.tinygrailOSS)(e.Cover,480),radius:!0,imageViewer:!0,imageViewerSrc:(0,j.tinygrailOSS)(e.Cover,480)}),(0,b.jsxs)(f.Touchable,{style:y._.mt.sm,onPress:function(){r.onCloseModal(),o.push("TinygrailDeal",{monoId:"character/"+e.Id,type:"ask"})},children:[(0,b.jsxs)(f.Text,{type:"tinygrailPlain",bold:!0,align:"center",children:[e.Name,(0,b.jsxs)(f.Text,{type:"ask",size:12,lineHeight:14,children:[" ","lv",e.Level]})]}),(0,b.jsxs)(f.Text,{style:y._.mt.xxs,type:y._.tSelect("tinygrailText","tinygrailPlain"),size:12,bold:!0,align:"center",children:["₵",(0,j.toFixed)(e.CurrentPrice)," ",(0,b.jsxs)(f.Text,{type:"warning",size:12,children:["x",e.Amount]})]})]})]},String(e.Id))})}),(0,b.jsxs)(f.Text,{type:y._.tSelect("tinygrailPlain","tinygrailText"),align:"center",bold:!0,children:["总价值",(0,b.jsxs)(f.Text,{type:y._.tSelect("tinygrailText","tinygrailPlain"),bold:!0,children:[" ","₵",(0,j.toFixed)(this.total)," "]})]}),(0,b.jsx)(f.Flex,{style:y._.mt.md,justify:"center",children:(0,b.jsxs)(f.Button,{style:this.styles.btn,styleText:this.styles.text,size:"sm",loading:e,onPress:function(){return r.doLottery(o,t)},children:["再刮一次 (",r.nextPrice,")"]})})]})})}},{key:"styles",get:function(){return(0,x.memoStyles)()}}]);var g,c=v;function v(){var t;(0,o.default)(this,v);for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=g.call.apply(g,[this].concat(s)),(0,u.default)((0,i.default)(t),"onBackAndroid",function(){var e=t.context.$;return!!t.props.visible&&(e.onCloseModal(),!0)}),t}(0,u.default)(c,"defaultProps",{visible:!1});t.default=(0,r.obc)(c);try{bonusmodal.displayName="bonusmodal",bonusmodal.__docgenInfo={description:"",displayName:"bonusmodal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/bonus-modal/index.tsx#bonusmodal"]={docgenInfo:bonusmodal.__docgenInfo,name:"bonusmodal",path:"src/screens/tinygrail/index/bonus-modal/index.tsx#bonusmodal"})}catch(e){}},"./src/screens/tinygrail/index/bonus-modal/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{modal:{width:r._.window.width-2*r._.wind,maxWidth:400,backgroundColor:r._.tSelect(r._.colorTinygrailContainer,r._.__colorBg__),borderRadius:r._.radiusMd},focus:{marginTop:-Math.floor(.56*r._.window.height)},wrap:{width:"100%",maxWidth:r._.window.maxWidth,paddingBottom:r._.sm,marginTop:r._.md},item:{marginBottom:r._.md},btn:{width:240,backgroundColor:r._.tSelect(r._.colorTinygrailIcon,r._.colorTinygrailBg),borderColor:r._.tSelect(r._.colorTinygrailIcon,r._.colorTinygrailBg)},text:{width:160,color:r._.tSelect(r._.__colorPlain__,r._.colorTinygrailPlain)}}})},"./src/screens/tinygrail/index/btns/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),p=s("./src/screens/tinygrail/index/btns/styles.ts"),m=s("./node_modules/react/jsx-runtime.js"),f=["重新授权","粘贴板","意见反馈","设置"];t.default=(0,r.obc)(function(e,t){var s=t.$,r=t.navigation,t=(0,p.memoStyles)(),o=s.state,n=o.loading,i=o.count;return o._loaded?(o=2e3*Math.pow(2,void 0===i?0:i),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.Popover,{style:t.touch,data:["刮刮乐","幻想乡刮刮乐("+o+")","每周分红","每日签到","节日福利"],onSelect:function(e){setTimeout(function(){switch(e){case"刮刮乐":s.doLottery(r);break;case"每周分红":(0,u.confirm)("确定领取每周分红? (每周日0点刷新)",s.doGetBonusWeek);break;case"每日签到":s.doGetBonusDaily();break;case"节日福利":s.doGetBonusHoliday();break;default:s.doLottery(r,!0)}},400)},children:(0,m.jsx)(d.Button,{style:t.btn,styleText:t.text,size:"sm",children:"每日"})}),(0,m.jsx)(a.Popover,{style:[t.touch,l._.ml.sm],data:f,onSelect:function(e){setTimeout(function(){switch(e){case"重新授权":s.doAuth();break;case"粘贴板":r.push("TinygrailClipboard");break;case"意见反馈":r.push("Say",{sayId:c.APP_ID_SAY_TINYGRAIL});break;case"设置":r.push("Setting")}},400)},children:(0,m.jsx)(d.Button,{style:t.btn,styleText:t.text,size:"sm",children:"更多"})})]})):(0,m.jsx)(d.Button,{style:t.btn,styleText:t.text,size:"sm",loading:n,onPress:s.doAuth,children:"授权"})});try{btns.displayName="btns",btns.__docgenInfo={description:"",displayName:"btns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/btns/index.tsx#btns"]={docgenInfo:btns.__docgenInfo,name:"btns",path:"src/screens/tinygrail/index/btns/index.tsx#btns"})}catch(e){}},"./src/screens/tinygrail/index/btns/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{touch:{borderRadius:r._.radiusXs,overflow:"hidden"},btn:{width:r._.r(64),height:r._.r(36),backgroundColor:r._.tSelect(r._.colorTinygrailIcon,r._.colorTinygrailBg),borderColor:r._.tSelect(r._.colorTinygrailIcon,r._.colorTinygrailBg)},text:Object.assign({color:r._.tSelect(r._.__colorPlain__,r._.colorTinygrailPlain)},r._.fontSize13)}})},"./src/screens/tinygrail/index/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.MAX_ERROR_COUNT=t.EXCLUDE_STATE=t.ERROR_STR=void 0;t.NAMESPACE="ScreenTinygrail",t.ERROR_STR="/false",t.MAX_ERROR_COUNT=3;s=t.EXCLUDE_STATE={loading:!1,visible:!1,count:0,bonus:[],isBonus2:!1,_loaded:!1};t.STATE=Object.assign({loadingAssets:!1,loadingBonus:!1,currentBalance:0,currentTotal:0,lastBalance:0,lastTotal:0},s)},"./src/screens/tinygrail/index/footer/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/tinygrail/index/footer/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$,r=t.navigation;return(0,u.jsxs)(o.Flex,{style:n._.mb.md,justify:"center",children:[(0,u.jsx)(o.Touchable,{style:l.styles.touch,onPress:function(){(0,d.t)("小圣杯.跳转",{to:"Topic",title:"更新内容"}),(0,i.appNavigate)(a.TINYGRAIL_UPDATES_LOGS_URL,r)},children:(0,u.jsxs)(o.Text,{type:"tinygrailText",size:12,children:[a.VERSION_TINYGRAIL_PLUGIN," 更新内容"]})}),(0,u.jsx)(o.Text,{type:"tinygrailText",children:"·"}),(0,u.jsx)(o.Touchable,{style:l.styles.touch,onPress:function(){(0,d.t)("小圣杯.跳转",{to:"Topic",title:"游戏指南"}),r.push("Topic",{topicId:"group/358232"})},children:(0,u.jsx)(o.Text,{type:"tinygrailText",size:12,children:"游戏wiki"})}),(0,u.jsx)(o.Text,{type:"tinygrailText",children:"·"}),(0,u.jsx)(o.Touchable,{style:l.styles.touch,onPress:function(){(0,d.t)("小圣杯.跳转",{to:"Group",title:"小组讨论 "}),r.push("Group",{groupId:"tinygrail"})},children:(0,u.jsx)(o.Text,{type:"tinygrailText",size:12,children:"小组讨论"})}),(0,u.jsx)(o.Text,{type:"tinygrailText",children:"·"}),(0,u.jsx)(o.Touchable,{style:l.styles.touch,onPress:s.doSend,children:(0,u.jsx)(o.Text,{type:"tinygrailText",size:12,children:"点我看看"})})]})});try{footer.displayName="footer",footer.__docgenInfo={description:"",displayName:"footer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/footer/index.tsx#footer"]={docgenInfo:footer.__docgenInfo,name:"footer",path:"src/screens/tinygrail/index/footer/index.tsx#footer"})}catch(e){}},"./src/screens/tinygrail/index/footer/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{paddingVertical:s._.xs,paddingHorizontal:s._.sm,borderRadius:s._.radiusXs,overflow:"hidden"}})},"./src/screens/tinygrail/index/index.tsx":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/react/index.js")),f=r(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),y=r(s("./node_modules/react-native-web/dist/exports/RefreshControl/index.js")),j=s("./src/components/index.ts"),_=s("./src/screens/_/index.ts"),x=s("./src/stores/index.ts"),b=s("./src/utils/decorators/index.ts"),h=s("./src/utils/fetch/index.ts"),g=s("./src/constants/index.ts"),v=s("./src/screens/tinygrail/styles.ts"),S=r(s("./src/screens/tinygrail/index/auth/index.tsx")),O=r(s("./src/screens/tinygrail/index/menus/index.tsx")),T=r(s("./src/screens/tinygrail/index/footer/index.tsx")),k=r(s("./src/screens/tinygrail/index/bonus-modal/index.tsx")),r=r(s("./src/screens/tinygrail/index/store.ts")),P=s("./src/screens/tinygrail/index/styles.ts"),R=s("./node_modules/react/jsx-runtime.js");function I(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}s=m.default.Component,(0,l.default)(E,s),C=I(E),(0,d.default)(E,[{key:"componentDidMount",value:function(){this.context.$.init(),(0,h.hm)("tinygrail","Tinygrail")}},{key:"render",value:function(){var e=this.context.$.state.visible,t=this.state.refreshing;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(f.default,Object.assign({style:this.styles.container,contentContainerStyle:this.styles.contentContainerStyle,refreshControl:(0,R.jsx)(y.default,Object.assign({},v.refreshControlProps,{progressBackgroundColor:x._.select(x._.colorPlain,x._._colorDarkModeLevel2),colors:[x._.colorMain],refreshing:t,onRefresh:this.onRefresh}))},g.SCROLL_VIEW_RESET_PROPS,{children:[(0,R.jsx)(j.UM,{title:"小圣杯"}),(0,R.jsx)(_.StatusBarPlaceholder,{}),(0,R.jsx)(S.default,{}),(0,R.jsx)(O.default,{}),(0,R.jsx)(T.default,{})]})),(0,R.jsx)(k.default,{visible:e})]})}},{key:"styles",get:function(){return(0,P.memoStyles)()}}]);var C,m=E;function E(){var s;(0,i.default)(this,E);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s=C.call.apply(C,[this].concat(t)),(0,p.default)((0,a.default)(s),"state",{refreshing:!1}),(0,p.default)((0,a.default)(s),"onRefresh",function(){return s.setState({refreshing:!0},(0,n.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.context,t=t.$,e.next=3,t.refresh();case 3:setTimeout(function(){s.setState({refreshing:!1})},1200);case 4:case"end":return e.stop()}},e)})))}),s}t.default=(0,b.inject)(r.default)((0,b.obc)(m));try{index.displayName="index",index.__docgenInfo={description:"",displayName:"index",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/index.tsx#index"]={docgenInfo:index.__docgenInfo,name:"index",path:"src/screens/tinygrail/index/index.tsx#index"})}catch(e){}},"./src/screens/tinygrail/index/menu-item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),m=s("./src/utils/fetch/index.ts"),f=s("./src/screens/tinygrail/index/menu-item/styles.ts"),y=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=void 0===(s=e.style)?void 0:s,r=void 0===(r=e.index)?void 0:r,o=void 0===(o=e.iconStyle)?void 0:o,n=void 0===(d=e.pathname)?void 0:d,i=void 0===(d=e.config)?void 0:d,d=void 0===(d=e.title)?void 0:d,e=void 0===(e=e.icon)?void 0:e,a=t.navigation,t=(0,f.memoStyles)(),l=c._.portrait(2,4);return(0,y.jsx)(u.Touchable,{style:(0,p.stl)(t.container,r%l==0&&t.left),onPress:function(){(0,m.t)("小圣杯.跳转",Object.assign({to:n},i)),a.push(n,i)},children:(0,y.jsxs)(u.Flex,{style:(0,p.stl)(t.block,s),children:[(0,y.jsx)(u.Text,{type:"tinygrailPlain",size:18,bold:!0,children:d}),(0,y.jsx)(u.Iconfont,{style:o?[t.icon,o]:t.icon,name:e,size:46})]})})})},"./src/screens/tinygrail/index/menu-item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts"),o=s("./src/constants/index.ts");t.memoStyles=r._.memoStyles(function(){var e=r._.portrait(2,4),t=r._.md,e=(r._.window.width-2*r._.wind-r._.md*(e-1))/e;return o.STORYBOOK&&(e-=18),{container:{width:e,marginBottom:t,marginLeft:t,borderRadius:r._.radiusSm,overflow:"hidden"},left:{marginLeft:0},block:{width:e,height:e*r._.device(.39,.34),paddingLeft:20,backgroundColor:r._.tSelect(r._.colorTinygrailBorder,r._.colorTinygrailBg)},icon:{position:"absolute",top:"50%",right:-10,marginTop:-24,color:r._.colorTinygrailIcon,opacity:.24}}})},"./src/screens/tinygrail/index/menus/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=r(s("./src/screens/tinygrail/index/menu-item/index.tsx")),l=r(s("./src/screens/tinygrail/index/assets/index.tsx")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=(t=t.$).list("bid").list.length,r=t.list("asks").list.length,t=t.list("auction").list.filter(function(e){return 0===e.state}).length;return(0,u.jsxs)(o.Flex,{style:d.IOS&&n._.mt.sm,wrap:"wrap",children:[(0,u.jsx)(a.default,{index:0,title:"热门榜单",pathname:"TinygrailOverview",icon:"md-whatshot"}),(0,u.jsx)(a.default,{index:1,title:"新番榜单",pathname:"TinygrailNew",icon:"md-local-play"}),(0,u.jsx)(a.default,{index:2,title:"ICO榜单",pathname:"TinygrailICO",icon:"md-attach-money"}),(0,u.jsx)(a.default,{index:3,title:"番市首富",pathname:"TinygrailRich",icon:"md-money"}),(0,u.jsx)(a.default,{index:4,title:"英灵殿",pathname:"TinygrailValhall",icon:"md-looks"}),(0,u.jsx)(a.default,{index:5,title:"最新圣殿",pathname:"TinygrailTemples",icon:"md-image-aspect-ratio"}),(0,u.jsx)(a.default,{index:6,title:"每周萌王",pathname:"TinygrailTopWeek",icon:"md-favorite-outline"}),(0,u.jsx)(a.default,{index:7,title:"通天塔(α)",pathname:"TinygrailStar",icon:"md-change-history"}),(0,u.jsx)(l.default,{}),(0,u.jsx)(a.default,{index:8,style:{backgroundColor:n._.colorDepthBid},title:(0,u.jsxs)(u.Fragment,{children:["我的买单",(0,u.jsxs)(o.Text,{type:"tinygrailPlain",size:15,lineHeight:19,bold:!0,children:["  ",s||""]})]}),pathname:"TinygrailBid",config:{type:"bid"},icon:"md-add-circle-outline"}),(0,u.jsx)(a.default,{index:9,style:{backgroundColor:n._.colorDepthAsk},title:(0,u.jsxs)(u.Fragment,{children:["我的卖单",(0,u.jsxs)(o.Text,{type:"tinygrailPlain",size:15,lineHeight:19,bold:!0,children:["  ",r||""]})]}),pathname:"TinygrailBid",config:{type:"asks"},icon:"md-remove-circle-outline"}),(0,u.jsx)(a.default,{index:10,title:(0,u.jsxs)(u.Fragment,{children:["我的拍卖",(0,u.jsxs)(o.Text,{type:"tinygrailPlain",size:15,lineHeight:19,bold:!0,children:["  ",t||""]})]}),pathname:"TinygrailBid",config:{type:"auction"},icon:"md-gavel"}),(0,u.jsx)(a.default,{index:11,title:"我的持仓",pathname:"TinygrailCharaAssets",icon:"md-inbox"}),(0,u.jsx)(a.default,{index:12,title:"资金日志",pathname:"TinygrailLogs",icon:"md-insert-chart-outlined"}),(0,u.jsx)(a.default,{index:13,title:"人物查询",pathname:"TinygrailSearch",icon:"md-search"}),(0,u.jsx)(a.default,{index:14,style:{backgroundColor:n._.colorTinygrailActive},title:"高级功能",pathname:"TinygrailAdvance",icon:"md-card-membership"}),(0,u.jsx)(a.default,{index:15,title:"我的道具",pathname:"TinygrailItems",icon:"md-workspaces-outline"})]})});try{menus.displayName="menus",menus.__docgenInfo={description:"",displayName:"menus",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/menus/index.tsx#menus"]={docgenInfo:menus.__docgenInfo,name:"menus",path:"src/screens/tinygrail/index/menus/index.tsx#menus"})}catch(e){}},"./src/screens/tinygrail/index/store.ts":(e,t,s)=>{var p=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=r(s("./node_modules/cheerio-without-node-native/index.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),x=r(s("./src/utils/store/index.ts")),b=s("./src/utils/fetch/index.ts"),h=r(s("./src/utils/thirdParty/axios.js")),g=s("./src/constants/index.ts"),v=r(s("./src/constants/i18n/index.ts")),S=s("./src/screens/tinygrail/index/ds.ts");function O(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var T;t.default=(r=x.default,(0,a.default)(k,r),T=O(k),(0,i.default)(k,[{key:"short",get:function(){return j.systemStore.setting.xsbShort}},{key:"userCookie",get:function(){return j.userStore.userCookie}},{key:"advance",get:function(){return j.tinygrailStore.advance}},{key:"userInfo",get:function(){return j.userStore.userInfo}},{key:"hash",get:function(){return j.tinygrailStore.hash}},{key:"assets",get:function(){return j.tinygrailStore.assets}},{key:"charaAssets",get:function(){return j.tinygrailStore.charaAssets(this.hash)}},{key:"total",get:function(){return this.assets.assets}},{key:"nextPrice",get:function(){var e=this.state,t=e.count;return e.isBonus2?2e3*Math.pow(2,void 0===t?0:t):1e3}},{key:"list",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"bid";return(0,y.computed)(function(){return j.tinygrailStore.list(e)}).get()}}]),(0,c.default)((s=k).prototype,"short",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"short"),s.prototype),(0,c.default)(s.prototype,"userCookie",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"userCookie"),s.prototype),(0,c.default)(s.prototype,"advance",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"advance"),s.prototype),(0,c.default)(s.prototype,"userInfo",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"userInfo"),s.prototype),(0,c.default)(s.prototype,"hash",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"hash"),s.prototype),(0,c.default)(s.prototype,"assets",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"assets"),s.prototype),(0,c.default)(s.prototype,"charaAssets",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"charaAssets"),s.prototype),(0,c.default)(s.prototype,"total",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"total"),s.prototype),(0,c.default)(s.prototype,"nextPrice",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"nextPrice"),s.prototype),s);function k(){var c;(0,n.default)(this,k);for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return c=T.call.apply(T,[this].concat(s)),(0,m.default)((0,d.default)(c),"state",(0,y.observable)(S.STATE)),(0,m.default)((0,d.default)(c),"formhash",""),(0,m.default)((0,d.default)(c),"errorCount",0),(0,m.default)((0,d.default)(c),"init",(0,o.default)(p.mark(function e(){var t;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j.tinygrailStore.fetchAdvance(),e.next=3,c.getStorage(S.NAMESPACE);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return t=e.t0,c.setState(Object.assign({},t,S.EXCLUDE_STATE,{_loaded:!!j.tinygrailStore.cookie&&(0,_.getTimestamp)()})),e.next=10,j.tinygrailStore.fetchAssets();case 10:if(t=e.sent,t._loaded||g.DEV){e.next=15;break}return e.next=15,c.doAuth();case 15:return e.next=17,(0,b.queue)([function(){return j.tinygrailStore.fetchAssets()},function(){return j.tinygrailStore.fetchHash()},function(){return c.fetchCharaAssets()}]);case 17:return j.tinygrailStore.fetchAdvance(),c.caculateChange(),c.fetchCount(),c.checkCount(),(0,_.runAfter)(function(){(0,g.initXsbRelationOTA)()}),e.abrupt("return",!0);case 23:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(c),"fetchCharaAssets",(0,o.default)(p.mark(function e(){var t;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({loadingAssets:!0}),t=j.tinygrailStore.fetchCharaAssets(c.hash),e.next=4,t;case 4:return c.setState({loadingAssets:!1}),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(c),"fetchCount",function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[];!e&&c.list("bid")._loaded||t.push(function(){return j.tinygrailStore.fetchBid()}),!e&&c.list("asks")._loaded||t.push(function(){return j.tinygrailStore.fetchAsks()}),!e&&c.list("auction")._loaded||t.push(function(){return j.tinygrailStore.fetchAuction()}),t.length&&(0,b.queue)(t)}),(0,m.default)((0,d.default)(c),"refresh",(0,o.default)(p.mark(function e(){var t;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([j.tinygrailStore.fetchAssets(),c.fetchCharaAssets()]);case 2:return t=e.sent,c.caculateChange(),setTimeout(function(){c.fetchCount(!0)},400),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(c),"_doAuthFailCount",0),(0,m.default)((0,d.default)(c),"doAuth",(0,o.default)(p.mark(function e(){var t;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({loading:!0}),e.prev=1,e.next=4,c.oauth();case 4:return t=c.authorize(),e.next=7,t;case 7:(0,b.t)("小圣杯.授权成功"),(c._doAuthFailCount=0,_.feedback)(),(0,_.info)("已更新授权"),c.setState({loading:!1,_loaded:(0,_.getTimestamp)()}),c.setStorage(S.NAMESPACE),e.next=25;break;case 15:if(e.prev=15,e.t0=e.catch(1),(0,b.t)("小圣杯.授权失败"),c._doAuthFailCount<5)return c._doAuthFailCount+=1,(0,_.info)("重试授权 ["+c._doAuthFailCount+"]"),e.abrupt("return",c.doAuth());e.next=22;break;case 22:(c._doAuthFailCount=0,_.info)("授权失败请重试, 或检查"+v.default.login()+"状态"),c.setState({loading:!1});case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}},e,null,[[1,15]])}))),(0,m.default)((0,d.default)(c),"doTest",(0,o.default)(p.mark(function e(){var t,s,r,o,n,i,d,a,l,u;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j.tinygrailStore.cookie){e.next=3;break}return(0,_.info)("请先授权"),e.abrupt("return");case 3:return(0,b.t)("小圣杯.预测股息"),e.prev=4,h.default.defaults.withCredentials=!1,t=(0,h.default)({method:"get",url:(0,g.API_TINYGRAIL_TEST)(),headers:{Cookie:j.tinygrailStore.cookie}}),e.next=9,t;case 9:t=e.sent,o=t.data.Value,l=o.Total,s=o.Temples,u=o.Share,r=o.Tax,o=o.Daily,n=u-r,l=c.short?(i=l>g.M?(0,_.toFixed)(l/g.M,1)+"万":(0,_.formatNumber)(l,2),d=u>g.M?(0,_.toFixed)(u/g.M,1)+"万":(0,_.formatNumber)(u,2),a=r>g.M?(0,_.toFixed)(r/g.M,1)+"万":(0,_.formatNumber)(r,2),n>g.M?(0,_.toFixed)(n/g.M,1)+"万":(0,_.formatNumber)(n,2)):(i=(0,_.formatNumber)(l,0),d=(0,_.formatNumber)(u,2),a=(0,_.formatNumber)(r,2),(0,_.formatNumber)(n,2)),u="本期计息共"+i+"股, 圣殿"+s+"座, 预期股息"+d,r&&(u+=", 个人所得税"+a+", 税后"+l),o&&(u+=", 签到奖励"+o),(0,_.alert)(u,"股息预测"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),(0,_.info)("获取股息预测失败");case 22:case"end":return e.stop()}},e,null,[[4,19]])}))),(0,m.default)((0,d.default)(c),"doLottery",(t=(0,o.default)(p.mark(function e(t){var s,r,o,n,i=arguments;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=1<i.length&&void 0!==i[1]&&i[1],j.tinygrailStore.cookie){e.next=4;break}return(0,_.info)("请先授权"),e.abrupt("return");case 4:return e.prev=4,c.setState({loadingBonus:!0}),e.next=8,j.tinygrailStore.doLottery(s);case 8:n=e.sent,r=n.State,o=n.Value,n=n.Message,c.setState({loadingBonus:!1}),(0,_.feedback)(),0===r?(s?(0,b.t)("小圣杯.幻想乡刮刮乐",{nextPrice:c.nextPrice}):(0,b.t)("小圣杯.刮刮乐"),c.setState({bonus:o,isBonus2:s}),c.onShowModal(),c.checkCount()):(0,_.info)(n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,_.info)("操作失败，可能授权过期了");case 21:case"end":return e.stop()}},e,null,[[4,17]])})),function(e){return t.apply(this,arguments)})),(0,m.default)((0,d.default)(c),"doGetBonusWeek",(0,o.default)(p.mark(function e(){var t,s,r;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j.tinygrailStore.cookie){e.next=3;break}return(0,_.info)("请先授权"),e.abrupt("return");case 3:return(0,b.t)("小圣杯.每周分红"),e.prev=4,c.setState({loadingBonus:!0}),e.next=8,j.tinygrailStore.doBonus();case 8:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,c.setState({loadingBonus:!1}),(0,_.feedback)(),0===t)return(0,_.info)(s),e.next=18,j.tinygrailStore.fetchAssets();e.next=21;break;case 18:c.caculateChange(),e.next=22;break;case 21:(0,_.info)(r);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,_.info)("操作失败，可能授权过期了");case 28:case"end":return e.stop()}},e,null,[[4,24]])}))),(0,m.default)((0,d.default)(c),"doGetBonusDaily",(0,o.default)(p.mark(function e(){var t,s,r;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j.tinygrailStore.cookie){e.next=3;break}return(0,_.info)("请先授权"),e.abrupt("return");case 3:return(0,b.t)("小圣杯.每日签到"),e.prev=4,c.setState({loadingBonus:!0}),e.next=8,j.tinygrailStore.doBonusDaily();case 8:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,c.setState({loadingBonus:!1}),(0,_.feedback)(),0===t)return(0,_.info)(s),e.next=18,j.tinygrailStore.fetchAssets();e.next=21;break;case 18:c.caculateChange(),e.next=22;break;case 21:(0,_.info)(r);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,_.info)("操作失败，可能授权过期了");case 28:case"end":return e.stop()}},e,null,[[4,24]])}))),(0,m.default)((0,d.default)(c),"doGetBonusHoliday",(0,o.default)(p.mark(function e(){var t,s,r;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j.tinygrailStore.cookie){e.next=3;break}return(0,_.info)("请先授权"),e.abrupt("return");case 3:return(0,b.t)("小圣杯.节日福利"),e.prev=4,c.setState({loadingBonus:!0}),e.next=8,j.tinygrailStore.doBonusHoliday();case 8:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,c.setState({loadingBonus:!1}),(0,_.feedback)(),0===t)return(0,_.info)(s),e.next=18,j.tinygrailStore.fetchAssets();e.next=21;break;case 18:c.caculateChange(),e.next=22;break;case 21:(0,_.info)(r);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,_.info)("操作失败，可能授权过期了");case 28:case"end":return e.stop()}},e,null,[[4,24]])}))),(0,m.default)((0,d.default)(c),"doSend",function(){(0,_.confirm)("是否给作者发送10000cc?",(0,o.default)(p.mark(function e(){var t,s,r;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.tinygrailStore.doSend();case 2:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,(0,_.feedback)(),0===t)return(0,_.info)(s),e.next=11,j.tinygrailStore.fetchAssets();e.next=14;break;case 11:c.caculateChange(),e.next=15;break;case 14:(0,_.info)(r);case 15:case"end":return e.stop()}},e)})),"小圣杯助手")}),(0,m.default)((0,d.default)(c),"logout",(0,o.default)(p.mark(function e(){return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.default)({method:"post",url:(0,g.API_TINYGRAIL_LOGOUT)()}));case 1:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(c),"oauth",(0,o.default)(p.mark(function e(){var t,s,r;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.userCookie,t=s.cookie,s=s.userAgent,h.default.defaults.withCredentials=!1,t=(0,h.default)({method:"get",url:g.HOST+"/oauth/authorize?client_id="+g.TINYGRAIL_APP_ID+"&response_type=code&redirect_uri="+g.TINYGRAIL_URL_OAUTH_REDIRECT,headers:{Cookie:"chii_cookietime=2592000; "+t,"User-Agent":s}}),e.next=5,t;case 5:return s=e.sent,r=s.request,r=r._response,c.formhash=f.default.load(r)("input[name=formhash]").attr("value"),e.abrupt("return",t);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(c),"authorize",(0,o.default)(p.mark(function e(){var t,s,r;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.userCookie,t=r.cookie,r=r.userAgent,h.default.defaults.withCredentials=!1,t=(0,h.default)({method:"post",maxRedirects:0,validateStatus:null,url:g.HOST+"/oauth/authorize?client_id="+g.TINYGRAIL_APP_ID+"&response_type=code&redirect_uri="+g.TINYGRAIL_URL_OAUTH_REDIRECT+S.ERROR_STR,headers:{"Content-Type":"application/x-www-form-urlencoded",Cookie:"chii_cookietime=2592000; "+t,"User-Agent":r},data:(0,_.urlStringify)({formhash:c.formhash,redirect_uri:"",client_id:g.TINYGRAIL_APP_ID,submit:"授权"})}),e.next=5,t;case 5:if(s=e.sent,r=s.request,r.responseURL.includes("code="))e.next=13;else{if(c.errorCount+=1,c.errorCount<S.MAX_ERROR_COUNT)return e.abrupt("return",c.authorize());e.next=12}break;case 12:return e.abrupt("return",!1);case 13:return(0,_.feedback)(),j.tinygrailStore.updateCookie(s.headers["set-cookie"][0].split(";")[0]+";"),e.abrupt("return",t);case 16:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(c),"caculateChange",function(){var e=c.state,t=e.currentBalance,e=e.currentTotal,s=c.assets.balance;c.setState({currentBalance:s,currentTotal:c.total,lastBalance:t,lastTotal:e}),c.setStorage(S.NAMESPACE)}),(0,m.default)((0,d.default)(c),"toogleShort",function(){j.systemStore.switchSetting("xsbShort"),(0,b.t)("小圣杯.缩略资金",{short:c.short})}),(0,m.default)((0,d.default)(c),"onShowModal",function(){return c.setState({visible:!0})}),(0,m.default)((0,d.default)(c),"onCloseModal",function(){c.setState({visible:!1}),setTimeout(function(){c.setState({bonus:[]})},400)}),(0,m.default)((0,d.default)(c),"checkCount",(0,o.default)(p.mark(function e(){var t,s;return p.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j.tinygrailStore.cookie){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,j.tinygrailStore.doCheckDaily();case 4:s=e.sent,t=s.State,s=s.Value,0===t&&c.setState({count:s});case 8:case"end":return e.stop()}},e)}))),c}},"./src/screens/tinygrail/index/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{flex:1,paddingHorizontal:r._.wind,backgroundColor:r._.colorTinygrailContainer},contentContainerStyle:{paddingTop:r._.sm,paddingBottom:r._.md}}})},"./src/screens/tinygrail/overview/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.tabs=t.sortDS=t.TABS=t.SORT_DS=t.NAMESPACE=void 0;s=s("./src/screens/tinygrail/_/utils.ts"),t.NAMESPACE="ScreenTinygrailOverview",s=t.sortDS=[s.SORT_SC,s.SORT_GX,s.SORT_SSGX,s.SORT_RK,s.SORT_XX,s.SORT_HYD,s.SORT_DQJ,s.SORT_SCJ,s.SORT_DQZD,s.SORT_DJ,s.SORT_XFJL,s.SORT_FHL],t.SORT_DS=s,s=t.tabs=[{title:"最近活跃",key:"recent"},{title:"最高市值",key:"mvc"},{title:"最高股息",key:"msrc"},{title:"最大涨幅",key:"mrc"},{title:"最大跌幅",key:"mfc"}];t.TABS=s},"./src/screens/tinygrail/overview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.sort.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=r(s("./node_modules/react/index.js")),u=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),p=s("./src/utils/decorators/index.ts"),m=r(s("./src/screens/tinygrail/_/tabs-v2/index.tsx")),f=r(s("./src/screens/tinygrail/_/tool-bar/index.tsx")),y=r(s("./src/screens/tinygrail/_/icon-go/index.tsx")),j=r(s("./src/screens/tinygrail/overview/list/index.tsx")),r=r(s("./src/screens/tinygrail/overview/store.ts")),_=s("./src/screens/tinygrail/overview/ds.ts"),x=s("./node_modules/react/jsx-runtime.js");function b(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=r?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}s=l.default.Component,(0,i.default)(g,s),h=b(g),(0,n.default)(g,[{key:"componentDidMount",value:function(){this.context.$.init()}},{key:"renderContentHeaderComponent",value:function(){var e=this.context.$,t=e.state,s=t.level,r=t.sort,t=t.direction;return(0,x.jsx)(f.default,{data:_.SORT_DS,level:s,levelMap:e.levelMap,sort:r,direction:t,onLevelSelect:e.onLevelSelect,onSortPress:e.onSortPress})}},{key:"render",value:function(){var e=this.context.$,t=e.state._loaded;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Header,{title:"热门榜单",hm:["tinygrail/overview","TinygrailOverview"],statusBarEvents:!1,statusBarEventsType:"Tinygrail",headerRight:function(){return(0,x.jsx)(y.default,{$:e})}}),(0,x.jsx)(u.Page,{style:c._.container.tinygrail,loaded:t,loadingColor:c._.colorTinygrailText,children:(0,x.jsx)(m.default,{routes:_.TABS,renderContentHeaderComponent:this.renderContentHeaderComponent(),renderItem:function(e){return(0,x.jsx)(j.default,{id:e.key},e.key)}})})]})}}]);var h,l=g;function g(){return(0,o.default)(this,g),h.apply(this,arguments)}t.default=(0,p.inject)(r.default)((0,p.obc)(l));try{overview.displayName="overview",overview.__docgenInfo={description:"",displayName:"overview",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/overview/index.tsx#overview"]={docgenInfo:overview.__docgenInfo,name:"overview",path:"src/screens/tinygrail/overview/index.tsx#overview"})}catch(e){}},"./src/screens/tinygrail/overview/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),l=r(s("./src/screens/tinygrail/_/item/index.tsx")),u=s("./src/screens/tinygrail/styles.ts"),c=s("./src/screens/tinygrail/overview/ds.ts"),p=s("./node_modules/react/jsx-runtime.js"),m={id:"热门榜单.跳转"};t.default=(0,a.obc)(function(e,t){var s=e.id,r=t.$;return(e=r.computedList(s))._loaded?(t=r.state.page,(0,p.jsx)(n.PaginationList2,{style:i._.container.flex,contentContainerStyle:i._.container.bottom,keyExtractor:d.keyExtractor,refreshControlProps:u.refreshControlProps,footerTextType:"tinygrailText",data:e.list,limit:24,scrollToTop:c.TABS[t].key===s,renderItem:f,onHeaderRefresh:function(){return r.fetchList(s)}})):(0,p.jsx)(o.Loading,{style:i._.container.flex,color:i._.colorTinygrailText})},{title:"全部"});function f(e){var t=e.item,e=e.index;return(0,p.jsx)(l.default,Object.assign({index:e,event:m},t))}},"./src/screens/tinygrail/overview/store.ts":(e,t,s)=>{var d=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),y=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),r=r(s("./src/utils/store/index.ts")),_=s("./src/utils/fetch/index.ts"),x=s("./src/screens/tinygrail/_/utils.ts"),b=s("./src/screens/tinygrail/overview/ds.ts");function h(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var g;t.default=(s=r.default,(0,l.default)(v,s),g=h(v),(0,i.default)(v,[{key:"currentKey",get:function(){var e=this.state.page;return b.TABS[e].key}},{key:"levelMap",get:function(){var e=this.list(this.currentKey).list,t={};return e.forEach(function(e){return t[e.level]?t[e.level]+=1:t[e.level]=1}),t}},{key:"list",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"recent";return(0,f.computed)(function(){return(0,x.relation)(y.tinygrailStore.list(e))}).get()}},{key:"computedList",value:function(s){var r=this,e=this.state,o=e.sort,n=e.level,i=e.direction;return(0,f.computed)(function(){var e,t=r.list(s);return t._loaded?(e=t,n&&(e=Object.assign({},e,{list:(0,x.levelList)(n,e.list)})),o?Object.assign({},e,{list:(0,x.sortList)(o,i,e.list)}):e):t}).get()}}]),(0,m.default)((t=v).prototype,"currentKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"currentKey"),t.prototype),(0,m.default)(t.prototype,"levelMap",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"levelMap"),t.prototype),t);function v(){var i;(0,n.default)(this,v);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i=g.call.apply(g,[this].concat(t)),(0,p.default)((0,a.default)(i),"state",(0,f.observable)({page:0,level:"",sort:"",direction:"",go:"卖出",_loaded:!1})),(0,p.default)((0,a.default)(i),"init",(0,o.default)(d.mark(function e(){var t,s,r,o,n;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.state._loaded,s=(0,j.getTimestamp)(),r=!t||60<s-Number(t),o=i.getStorage(b.NAMESPACE),e.next=6,o;case 6:return n=e.sent,i.setState(Object.assign({},n,{_loaded:r?s:t})),r&&i.fetchList(i.currentKey),e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(i),"fetchList",function(e){return y.tinygrailStore.fetchList(e)}),(0,p.default)((0,a.default)(i),"onChange",function(e){e!==i.state.page&&((0,_.t)("热门榜单.标签页切换",{page:e}),i.setState({page:e}),i.setStorage(b.NAMESPACE),i.tabChangeCallback(e))}),(0,p.default)((0,a.default)(i),"onSelectGo",function(e){(0,_.t)("热门榜单.设置前往",{title:e}),i.setState({go:e}),i.setStorage(b.NAMESPACE)}),(0,p.default)((0,a.default)(i),"tabChangeCallback",function(e){var e=b.TABS[e],t=e.title,e=e.key;i.list(e)._loaded&&"最近活跃"!==t||i.fetchList(e)}),(0,p.default)((0,a.default)(i),"onLevelSelect",function(e){(0,_.t)("热门榜单.筛选",{level:e}),i.setState({level:e}),i.setStorage(b.NAMESPACE)}),(0,p.default)((0,a.default)(i),"onSortPress",function(e){var t,s=i.state,r=s.sort,s=s.direction;e===r?(r=e,(t="down")===s?t="up":"up"===s&&(t=r=""),(0,_.t)("热门榜单.排序",{sort:r,direction:t}),i.setState({sort:r,direction:t})):((0,_.t)("热门榜单.排序",{sort:e,direction:"down"}),i.setState({sort:e,direction:"down"})),i.setStorage(b.NAMESPACE)}),i}},"./src/screens/tinygrail/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.withHeaderParams=t.refreshControlProps=void 0;var r=s("./src/stores/index.ts");t.withHeaderParams=function(){return{headerStyle:{backgroundColor:r._.colorTinygrailContainer,borderBottomColor:r._.colorTinygrailContainer},headerTitleStyle:{color:r._.colorTinygrailPlain},iconBackColor:r._.colorTinygrailPlain,statusBarEvents:!1}},t.refreshControlProps={titleColor:r._.colorTinygrailText,tintColor:r._.colorTinygrailText}}}]);