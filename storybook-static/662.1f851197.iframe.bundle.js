(self.webpackChunkweb=self.webpackChunkweb||[]).push([[662],{"./src/screens/user/smb/component/config/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Config")},"./src/screens/user/smb/component/config/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.number.constructor.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),c=t("./src/constants/index.ts"),a=t("./src/screens/user/smb/component/item/folder-ep/ds.ts"),m=t("./src/screens/user/smb/component/config/ds.ts"),p=t("./src/screens/user/smb/component/config/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=s.$,r=(0,p.memoStyles)(),u=t.state,m=u.configVisible,j=u.configs;return(0,f.jsx)(n.Modal,{style:r.modal,visible:m,title:"通用配置",onClose:t.onCloseConfig,children:(0,f.jsxs)(o.default,{style:r.body,children:[(0,f.jsx)(n.Text,{style:l._.mt.sm,type:"sub",size:12,bold:!0,children:"UI"}),(0,f.jsx)(d.ItemSetting,{hd:"布局",hdSize:14,ft:(0,f.jsx)(n.SegmentedControl,{style:r.segmentedControl,size:12,values:["列表","网格"],selectedIndex:j.layoutList?0:1,onValueChange:function(e){(!1===j.layoutList&&"列表"===e||!0===j.layoutList&&"网格"===e)&&t.onSwitchConfig("layoutList")}})}),(0,f.jsx)(d.ItemSetting,{show:!j.layoutList,hd:"列数",hdSize:14,ft:(0,f.jsx)(n.SegmentedControl,{style:r.segmentedControl,size:12,values:["2","3","4"],selectedIndex:Number(j.layoutGridNums-2),onValueChange:t.onSwitchLayoutGridNums})}),(0,f.jsxs)(n.Text,{style:l._.mt.md,type:"sub",size:12,bold:!0,children:["视频菜单",(0,f.jsxs)(n.Text,{type:"sub",size:12,children:[" ","(目前貌似只有弹弹Play是可用的)"]})]}),(0,f.jsx)(d.ItemSetting,{hd:a.ACTION_DDPLAY,hdSize:14,information:a.URL_TEMPLATES[a.ACTION_DDPLAY],ft:(0,f.jsx)(n.SwitchPro,{style:r.switch,value:j.showDDPlay,onSyncPress:function(){return t.onSwitchConfig("showDDPlay")}})}),(0,f.jsx)(d.ItemSetting,{style:l._.mt._sm,hd:a.ACTION_POTPLAYER,hdSize:14,information:a.URL_TEMPLATES[a.ACTION_POTPLAYER],ft:(0,f.jsx)(n.SwitchPro,{style:r.switch,value:j.showPotPlayer,onSyncPress:function(){return t.onSwitchConfig("showPotPlayer")}})}),(0,f.jsx)(d.ItemSetting,{style:l._.mt._sm,hd:a.ACTION_VLC,hdSize:14,information:a.URL_TEMPLATES[a.ACTION_VLC],ft:(0,f.jsx)(n.SwitchPro,{style:r.switch,value:j.showVLC,onSyncPress:function(){return t.onSwitchConfig("showVLC")}})}),(0,f.jsx)(d.ItemSetting,{style:l._.mt._sm,hd:a.ACTION_MPV,hdSize:14,information:a.URL_TEMPLATES[a.ACTION_MPV],ft:(0,f.jsx)(n.SwitchPro,{style:r.switch,value:j.showMPV,onSyncPress:function(){return t.onSwitchConfig("showMPV")}})}),c.STORYBOOK&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Text,{style:l._.mt.md,type:"sub",size:12,bold:!0,children:"浏览器插件"}),(0,f.jsx)(d.ItemSetting,{hd:"Local Explorer",hdSize:14,information:"出于安全原因，浏览器不允许访问本地资源。若浏览器安装了此插件，即可通过外部调用方式使用本地资源管理器，直接打开文件夹。点击上方提示按钮进一步了解。",ft:(0,f.jsx)(n.SwitchPro,{style:r.switch,value:j.showOpenLocalFolder,onSyncPress:function(){return t.onSwitchConfig("showOpenLocalFolder")}}),onInfoPress:function(){(0,i.open)((0,c.HTML_SINGLE_DOC)("nogol0viqd1flhqt")+"#DuNXM")}})]})]})})}),m.COMPONENT)},"./src/screens/user/smb/component/config/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{modal:{width:r._.r(r._.window.contentWidth),marginTop:r._.web(.22*-r._.window.height,0),maxWidth:r._.device(408,560),paddingTop:r._.device(r._.md+2,28),paddingHorizontal:r._.device(0,r._.sm),backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1),borderRadius:r._.radiusMd},body:{paddingHorizontal:6,marginTop:r._.web(0,r._.md)},switch:{marginRight:-4,transform:[{scale:.72}]},segmentedControl:{width:160,height:28}}}))},"./src/screens/user/smb/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/user/smb/component/filter/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Filter")},"./src/screens/user/smb/component/filter/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.array.filter.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),i=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=r(t("react")),m=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),p=t("./src/components/index.ts"),f=t("./src/utils/decorators/index.ts"),j=t("./src/utils/dev/index.ts"),b=t("./src/screens/user/smb/component/filter/ds.ts"),_=t("./src/screens/user/smb/component/filter/styles.ts"),x=t("./node_modules/react/jsx-runtime.js");function y(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,u.default)(e);if(s){var o=(0,u.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,i.default)(this,t)}}var h=function(e){(0,l.default)(t,e);var s=y(t);function t(){var e;(0,o.default)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=s.call.apply(s,[this].concat(n)),(0,c.default)((0,d.default)(e),"state",{focus:!1}),(0,c.default)((0,d.default)(e),"onFocus",(function(){e.setState({focus:!0})})),(0,c.default)((0,d.default)(e),"onBlur",(function(){e.setState({focus:!1})})),e}return(0,n.default)(t,[{key:"render",value:function(){(0,j.r)(b.COMPONENT);var e=this.context.$,s=e.state._filter,t=this.state.focus;return(0,x.jsxs)(m.default,{style:this.styles.filter,children:[(0,x.jsx)(p.Input,{style:this.styles.input,clearButtonMode:"never",value:s,returnKeyType:"search",returnKeyLabel:"搜索",onFocus:this.onFocus,onBlur:this.onBlur,onChange:e.onFilterInputChange,onSubmitEditing:e.onFilterInputSubmit}),!t&&!s&&(0,x.jsx)(p.Flex,{style:this.styles.icon,justify:"center",pointerEvents:"none",children:(0,x.jsx)(p.Iconfont,{name:"md-search",size:16})})]})}},{key:"styles",get:function(){return(0,_.memoStyles)()}}]),t}(a.default.Component);s.default=(0,f.obc)(h)},"./src/screens/user/smb/component/filter/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{filter:{height:60,paddingVertical:12,paddingHorizontal:r._.wind,marginTop:-4},input:Object.assign({height:34,paddingVertical:0},r._.fontSize14,{textAlign:"center",borderWidth:2,borderColor:r._.colorBorder,backgroundColor:"transparent",borderRadius:34}),icon:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0}}}))},"./src/screens/user/smb/component/form/directory-item/index.web.tsx":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/es.function.name.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=o(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),l=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=j(s);if(t&&t.has(e))return t.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var d=o?Object.getOwnPropertyDescriptor(e,n):null;d&&(d.get||d.set)?Object.defineProperty(r,n,d):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}(t("react")),i=t("./src/components/index.ts"),u=t("./src/stores/index.ts"),c=t("./src/utils/decorators/index.ts"),a=t("./src/screens/user/smb/utils/directory.ts"),m=t("./src/screens/user/smb/utils/load-data.ts"),p=t("./src/screens/user/smb/component/form/directory-item/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");function j(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(j=function(e){return e?t:s})(e)}s.default=(0,c.obc)((function(e,s){var t,o=s.$,c=(0,l.useRef)(null),j=(0,l.useState)(!1),b=(0,d.default)(j,2),_=b[0],x=b[1],y=(0,l.useState)(0),h=(0,d.default)(y,2),v=h[0],g=h[1],O=(t=(0,n.default)(r.mark((function e(){var s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((s=c.current.files).length>0)){e.next=5;break}return e.next=4,(0,m.loadJAData)();case 4:S(s);case 5:x(!1);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),T=[],S=function(e){for(var s=0;s<e.length;s+=1){var t=e[s];T.push({lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type,webkitRelativePath:t.webkitRelativePath})}var r=o.state.autoJA;o.memoDirectory=(0,a.transformData)(T,r,o.extendsJA),g(e.length)};return(0,f.jsxs)(i.Flex,{style:u._.mt.sm,children:[(0,f.jsx)(i.Text,{style:p.styles.label,size:12,lineHeight:13,children:"选择"}),(0,f.jsxs)(i.Flex.Item,{children:[(0,f.jsx)("input",{ref:c,style:p.styles.input,type:"file",id:"folderInput",webkitdirectory:"true",directory:"true",multiple:!0,onChange:O}),(0,f.jsxs)(i.Flex,{children:[(0,f.jsx)(i.Button,{style:p.styles.btn,styleText:u._.fontSize12,type:"ghostPlain",onPress:function(){c.current.click(),x(!0)},children:"选择文件夹"}),(0,f.jsx)(i.Flex.Item,{style:u._.ml.sm,children:v||!_?(0,f.jsxs)(i.Text,{size:12,type:"sub",children:["已读取 ",v," 个文件"]}):(0,f.jsx)(i.Text,{size:12,type:"warning",children:"读取文件夹结构中，请等待"})})]})]})]})}))},"./src/screens/user/smb/component/form/directory-item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({label:{width:60},input:{display:"none"},btn:{width:88,height:36}})},"./src/screens/user/smb/component/form/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.URL_VLC=s.URL_POTPLAYRER=s.URL_MPV=s.URL_DDPLAY=s.DEFAULT_PROPS=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/constants/index.ts"),n=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Form"),s.DEFAULT_PROPS={store:{},styles:{},visible:!1,name:"",onClose:o.FROZEN_FN},s.URL_DDPLAY="ddplay:[PATH]/[FILE]",s.URL_POTPLAYRER="potplayer://[PATH]/[FILE]",s.URL_VLC="vlc://[PATH]/[FILE]",s.URL_MPV="mpv://weblink?url=[PATH]/[FILE]"},"./src/screens/user/smb/component/form/example/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/constants/index.ts"),i=t("./src/screens/user/smb/component/form/example/styles.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t,r=e.store,d=s.$,c=(d=d||r).state.webDAV;return t=l.STORYBOOK?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.Text,{size:10,lineHeight:12,type:"sub",children:[(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"ddplay:"}),"①"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"D:/Anime"}),"② /"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"2023S4/[bangumi-404115] 星灵感应/01.mp4"}),"③"]}),(0,u.jsx)(o.Text,{style:n._.mt.xs,size:10,lineHeight:12,type:"sub",children:"①调用协议 ②路径[PATH] ③文件[FILE]"}),(0,u.jsx)(o.Text,{style:n._.mt.sm,size:10,lineHeight:12,type:"sub",children:"上面例子为选择了 D:/Anime/2023S4 文件夹，你需要在路径里面填 D:/Anime。不建议读取太深文件夹，否则可能会崩溃。"})]}):c?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.Text,{size:10,lineHeight:12,type:"sub",children:["http://"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"192.168.1.1"}),"① :"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"5081"}),"② /"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"my_dav/anime"}),"③"]}),(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",children:"①主机 ②端口 ③路径"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.Text,{size:10,lineHeight:12,type:"sub",children:["smb://"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"192.168.1.1"}),"① :"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"445"}),"② /"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"my_smb"}),"③ /"," ",(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",underline:!0,children:"anime"}),"④"]}),(0,u.jsx)(o.Text,{size:10,lineHeight:12,type:"sub",children:"①主机 ②端口 ③路径 ④文件夹"})]}),(0,u.jsxs)(o.Flex,{style:n._.mv.sm,align:"start",children:[(0,u.jsx)(o.Text,{style:i.styles.label,size:12,lineHeight:13,children:"说明"}),(0,u.jsx)(o.Flex.Item,{children:t})]})}))},"./src/screens/user/smb/component/form/example/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({label:{width:60}})},"./src/screens/user/smb/component/form/form.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/web.timers.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y(s);if(t&&t.has(e))return t.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var d=o?Object.getOwnPropertyDescriptor(e,n):null;d&&(d.get||d.set)?Object.defineProperty(r,n,d):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}(t("react")),n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),d=t("./src/components/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./src/constants/index.ts"),u=r(t("./src/screens/user/smb/component/form/type-item/index.tsx")),c=r(t("./src/screens/user/smb/component/form/example/index.tsx")),a=r(t("./src/screens/user/smb/component/form/directory-item/index.web.tsx")),m=r(t("./src/screens/user/smb/component/form/input-item/index.tsx")),p=r(t("./src/screens/user/smb/component/form/url-item/index.tsx")),f=r(t("./src/screens/user/smb/component/form/switch-item/index.tsx")),j=r(t("./src/screens/user/smb/component/form/save-item/index.tsx")),b=r(t("./src/screens/user/smb/component/form/information/index.tsx")),_=t("./src/screens/user/smb/component/form/ds.ts"),x=t("./node_modules/react/jsx-runtime.js");function y(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(y=function(e){return e?t:s})(e)}s.default=(0,l.memo)((function(e){var s=e.store,t=e.styles,r=e.visible,l=e.name,_=e.onClose,y=(0,o.useRef)(null),h=(0,o.useRef)(null),v=(0,o.useRef)(null),g=(0,o.useRef)(null),O=(0,o.useRef)(null),T=(0,o.useRef)(null),S=(0,o.useRef)(null),P=(0,o.useRef)(null),C=(0,o.useRef)(null);return(0,o.useEffect)((function(){setTimeout((function(){if(r&&!l.length)try{var e;"function"==typeof(null==y||null==(e=y.current)?void 0:e.focus)&&y.current.focus()}catch(e){}}),400)}),[r,l]),(0,x.jsxs)(d.Modal,{style:t.modal,visible:r,title:"连接本地服务",onClose:_,children:[(0,x.jsxs)(n.default,{style:t.body,children:[!i.STORYBOOK&&(0,x.jsx)(u.default,{store:s}),(0,x.jsx)(c.default,{store:s}),i.STORYBOOK&&(0,x.jsx)(a.default,{}),(0,x.jsx)(m.default,{store:s,label:"别名",placeholder:"选填，区分不同服务，如 Anime",name:"name",connectRef:function(e){return y.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==h||null==(e=h.current)?void 0:e.focus)&&h.current.focus()}catch(e){}}}),!i.STORYBOOK&&(0,x.jsx)(m.default,{store:s,label:"主机",placeholder:"必填，如内网 192.168.1.1",name:"ip",connectRef:function(e){return h.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==O||null==(e=O.current)?void 0:e.focus)&&O.current.focus()}catch(e){}}}),!i.STORYBOOK&&(0,x.jsx)(m.default,{store:s,label:"端口",placeholder:"默认 445",name:"port",connectRef:function(e){return O.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==v||null==(e=v.current)?void 0:e.focus)&&v.current.focus()}catch(e){}}}),!i.STORYBOOK&&(0,x.jsx)(m.default,{store:s,label:"用户",placeholder:"必填",name:"username",connectRef:function(e){return v.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==g||null==(e=g.current)?void 0:e.focus)&&g.current.focus()}catch(e){}}}),!i.STORYBOOK&&(0,x.jsx)(m.default,{store:s,label:"密码",placeholder:"必填",name:"password",connectRef:function(e){return g.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==T||null==(e=T.current)?void 0:e.focus)&&T.current.focus()}catch(e){}}}),(0,x.jsx)(m.default,{store:s,label:"路径",information:i.STORYBOOK?"同时支持读取所有子文件夹，若你直接选择了 D:/Anime，那路径应该填 D: 就可以了，可能不同版本浏览器之间有差异。若填入后在结果列表中出现了 D:/D:/ 这种不寻常的情况，可能你并不需要填写此项，可以随时修改。":"",placeholder:i.STORYBOOK?"选填，硬盘名，如 D:、D:/Anime，头尾不需要斜杠":"选填，常为顶文件夹，头尾不需要斜杠",name:"sharedFolder",connectRef:function(e){return T.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==S||null==(e=S.current)?void 0:e.focus)&&S.current.focus()}catch(e){}}}),!i.STORYBOOK&&(0,x.jsx)(m.default,{store:s,label:"文件夹",placeholder:"通常不填，多个用英文逗号分割",name:"path",connectRef:function(e){return S.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==P||null==(e=P.current)?void 0:e.focus)&&P.current.focus()}catch(e){}}}),!i.STORYBOOK&&(0,x.jsx)(m.default,{store:s,label:"工作组",placeholder:"通常不填，默认空",name:"workGroup",connectRef:function(e){return P.current=null==e?void 0:e.inputRef},onSubmitEditing:function(){try{var e;"function"==typeof(null==C||null==(e=C.current)?void 0:e.focus)&&C.current.focus()}catch(e){}}}),(0,x.jsx)(p.default,{store:s,connectRef:function(e){return C.current=null==e?void 0:e.inputRef}}),i.STORYBOOK&&(0,x.jsx)(f.default,{}),(0,x.jsx)(j.default,{store:s})]}),(0,x.jsx)(b.default,{})]})}),_.DEFAULT_PROPS)},"./src/screens/user/smb/component/form/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/utils/decorators/index.ts"),n=r(t("./src/screens/user/smb/component/form/form.tsx")),d=t("./src/screens/user/smb/component/form/ds.ts"),l=t("./src/screens/user/smb/component/form/styles.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=s.$;return(0,i.jsx)(n.default,{store:t,styles:(0,l.memoStyles)(),visible:t.state.visible,name:t.state.name,onClose:t.onClose})}),d.COMPONENT)},"./src/screens/user/smb/component/form/information/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/utils/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./src/constants/index.ts"),u=t("./src/screens/user/smb/component/form/information/styles.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.ob)((function(){return(0,c.jsx)(o.default,{style:u.styles.info,children:(0,c.jsx)(n.Touchable,{onPress:function(){i.STORYBOOK?(0,d.open)("https://www.yuque.com/chenzhenyu-k0epm/znygb4/nogol0viqd1flhqt"):(0,d.open)("https://www.yuque.com/chenzhenyu-k0epm/znygb4/rrb8zh")},children:(0,c.jsx)(n.Text,{size:14,type:"sub",children:"教程"})})})}))},"./src/screens/user/smb/component/form/information/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.styles=r._.create({info:{position:"absolute",zIndex:1,top:0,right:o.STORYBOOK?0:20,marginTop:-20}})},"./src/screens/user/smb/component/form/input-item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/async/index.ts"),i=t("./src/utils/decorators/index.ts"),u=t("./src/screens/user/smb/component/form/input-item/styles.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.store,r=e.label,i=e.information,a=void 0===i?"":i,m=e.placeholder,p=e.name,f=e.connectRef,j=e.onSubmitEditing,b=s.$,_=(b=b||t).state[p];return(0,c.jsxs)(o.Flex,{style:d._.mt.sm,children:[(0,c.jsxs)(o.Flex,{style:u.styles.label,children:[(0,c.jsx)(o.Text,{size:12,children:r}),!!a&&(0,c.jsx)(n.IconTouchable,{style:d._.ml._xs,name:"md-info-outline",size:14,onPress:function(){alert((0,l.s2tAsync)(a))}})]}),(0,c.jsx)(o.Flex.Item,{children:(0,c.jsx)(o.Input,{ref:f,style:u.styles.input,placeholder:m,defaultValue:_,showClear:!0,returnKeyType:"next",onChangeText:function(e){return b.onChange(p,e)},onSubmitEditing:j})})]})}))},"./src/screens/user/smb/component/form/input-item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({label:{width:60},input:Object.assign({height:36,paddingVertical:0},r._.fontSize12)})},"./src/screens/user/smb/component/form/save-item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/constants/index.ts"),i=t("./src/screens/user/smb/component/form/save-item/styles.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.store,r=s.$,d=(r=r||t).state.id;return(0,u.jsxs)(o.Flex,{style:l.STORYBOOK?n._.mt.md:n._.mt.sm,justify:"center",children:[(0,u.jsx)(o.Touchable,{style:i.styles.touch,onPress:r.onSubmit,children:(0,u.jsx)(o.Text,{style:i.styles.btn,type:"main",children:d?"保存":"新增"})}),(0,u.jsx)(o.Touchable,{style:i.styles.touch,onPress:r.onClose,children:(0,u.jsx)(o.Text,{style:i.styles.btn,type:"sub",children:"取消"})})]})}))},"./src/screens/user/smb/component/form/save-item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({touch:{marginHorizontal:r._.sm,borderRadius:r._.radiusSm,overflow:"hidden"},btn:{paddingVertical:r._.sm,paddingHorizontal:r._.md}})},"./src/screens/user/smb/component/form/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{modal:{width:r._.r(r._.window.contentWidth),marginTop:r._.web(.22*-r._.window.height,0),maxWidth:r._.device(408,560),paddingTop:r._.device(r._.md+2,28),paddingHorizontal:r._.device(0,r._.sm),backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1),borderRadius:r._.radiusMd},body:{paddingHorizontal:6,paddingTop:r._.md}}}))},"./src/screens/user/smb/component/form/switch-item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/index.ts"),i=t("./src/utils/async/index.ts"),u=t("./src/utils/decorators/index.ts"),c=t("./src/screens/user/smb/component/form/switch-item/styles.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=s.$,r=t.state.autoJA;return(0,a.jsxs)(o.Flex,{style:d._.mt.sm,children:[(0,a.jsxs)(o.Flex,{style:c.styles.label,children:[(0,a.jsx)(o.Text,{size:12,children:"刮削"}),(0,a.jsx)(n.IconTouchable,{style:d._.ml._xs,name:"md-info-outline",size:14,onPress:function(){(0,l.alert)((0,i.s2tAsync)("保存后是否对所有文件夹，尽可能离线刮削动画条目信息。\n                \n在文件夹结构读取完毕的那一刻就会完成刮削，若你更改了开关，请重新选择文件夹。\n                \n仅建议在管理动画时打开此选项。"))}})]}),(0,a.jsx)(o.Flex.Item,{children:(0,a.jsx)(o.SwitchPro,{style:c.styles.switch,value:r,onSyncPress:t.onSwitchAutoJA})})]})}))},"./src/screens/user/smb/component/form/switch-item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({label:{width:60},switch:{marginLeft:-8,transform:[{scale:.72}]}})},"./src/screens/user/smb/component/form/type-item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/constants/index.ts"),l=t("./src/screens/user/smb/component/form/type-item/styles.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=e.store,r=s.$,n=(r=r||t).state.webDAV,u=(0,i.jsx)(o.SegmentedControl,{style:l.styles.segmentedControl,size:11,values:["SMB","webDAV"],selectedIndex:n?1:0,enabled:!d.IOS,onChange:function(){return r.onChange("webDAV",!n)}});return(0,i.jsxs)(o.Flex,{children:[(0,i.jsx)(o.Text,{style:l.styles.label,size:12,children:"类型"}),(0,i.jsx)(o.Flex.Item,{children:d.IOS?(0,i.jsx)(o.Touchable,{onPress:function(){alert("iOS 目前仅支持 webDAV 模式")},children:u}):u})]})}))},"./src/screens/user/smb/component/form/type-item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({label:{width:60},segmentedControl:{width:144,height:30}})},"./src/screens/user/smb/component/form/url-item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.TITLE=s.CONTENT_SMB=s.CONTENT_DIRECTORY=void 0;var r=t("./src/screens/user/smb/component/form/ds.ts"),o=t("./src/screens/user/smb/component/item/folder-ep/ds.ts");s.TITLE="自定义跳转",s.CONTENT_SMB="自定义第三方跳转规则。点击文件复制地址，长按跳转。\n\n[IP] = 主机:端口\n[USERNAME] = 用户\n[PASSWORD] = 密码\n[PATH] = 文件夹路径\n[FILE] = 文件路径\n\n若使用 SMB 务必使用 smb:// 开头，webDAV 务必使用 http | https:// 开头\n\n推荐播放安装 VLC，直接使用 smb:// 能播；其次推荐 nPlayer，支持 nplayer-smb:// 前缀的直接跳转。\n目前已知只有 smb 1.0 协议可以直接播放，2.0会被强制关闭连接，待解决。",s.CONTENT_DIRECTORY="自定义第三方跳转规则，点击文件复制地址，长按跳转。\n[PATH] = 文件夹路径\n[FILE] = 文件路径\n\n内置外部跳转播放协议：\n弹弹Play："+r.URL_DDPLAY+"\nPotPlayer："+r.URL_POTPLAYRER+"\nVLC："+r.URL_VLC+"\nMPV："+r.URL_MPV+"\n\n当此处有值时，菜单中才会显示 ["+o.ACTION_LINKING+"] 和 ["+o.ACTION_COPY_LINK+"]。"},"./src/screens/user/smb/component/form/url-item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/Alert/index.js")),n=t("./src/components/index.ts"),d=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),u=t("./src/utils/async/index.ts"),c=t("./src/utils/decorators/index.ts"),a=t("./src/constants/index.ts"),m=t("./src/screens/user/smb/component/form/url-item/ds.ts"),p=t("./src/screens/user/smb/component/form/url-item/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.obc)((function(e,s){var t=e.store,r=e.connectRef,c=s.$,j=(c=c||t).state.url;return(0,f.jsxs)(n.Flex,{style:l._.mt.sm,align:"start",children:[(0,f.jsxs)(n.Flex,{style:p.styles.label,children:[(0,f.jsx)(n.Text,{size:12,children:"跳转"}),(0,f.jsx)(d.IconTouchable,{style:l._.ml._xs,name:"md-info-outline",size:14,onPress:function(){a.WEB?(0,i.alert)((0,u.s2tAsync)(m.CONTENT_DIRECTORY),(0,u.s2tAsync)(m.TITLE)):o.default.alert((0,u.s2tAsync)(m.TITLE),(0,u.s2tAsync)(m.CONTENT_SMB),[{text:(0,u.s2tAsync)("已知问题和详细教程"),onPress:function(){(0,i.open)("https://www.yuque.com/chenzhenyu-k0epm/znygb4/rrb8zh")}},{text:(0,u.s2tAsync)("确定"),onPress:a.FROZEN_FN}])}})]}),(0,f.jsx)(n.Flex.Item,{children:a.WEB?(0,f.jsx)(n.Input,{ref:r,style:p.styles.input,defaultValue:j,placeholder:"选填，[PATH]=路径，[FILE]=文件，头尾不需要斜杠",showClear:!0,returnKeyType:"done",returnKeyLabel:"新增",onChangeText:function(e){return c.onChange("url",e)}}):(0,f.jsx)(n.Input,{ref:r,style:[p.styles.input,p.styles.inputMultiline],inputStyle:p.styles.multilineInputStyle,defaultValue:j,showClear:!0,multiline:!0,numberOfLines:3,textAlignVertical:"top",returnKeyType:"done",returnKeyLabel:"新增",onChangeText:function(e){return c.onChange("url",e)}})})]})}))},"./src/screens/user/smb/component/form/url-item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({label:{width:60},input:Object.assign({height:36,paddingVertical:0},r._.fontSize12),inputMultiline:{paddingVertical:6,height:100},multilineInputStyle:Object.assign({},r._.fontSize12)})},"./src/screens/user/smb/component/item-grid/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=s.COLORS=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"ItemGrid"),s.COLORS=["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.24)","rgba(0, 0, 0, 0.72)","rgba(0, 0, 0, 0.92)"]},"./src/screens/user/smb/component/item-grid/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),n=(r(t("react")),r(t("./node_modules/react-native-web/dist/exports/StyleSheet/index.js"))),d=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),l=t("./node_modules/expo-linear-gradient/build/LinearGradient.js"),i=t("./src/components/index.ts"),u=t("./src/components/cover/utils.ts"),c=t("./src/stores/index.ts"),a=t("./src/utils/index.ts"),m=t("./src/utils/decorators/index.ts"),p=t("./src/utils/fetch/index.ts"),f=t("./src/constants/index.ts"),j=t("./src/screens/user/smb/component/item-grid/ds.ts"),b=t("./src/screens/user/smb/component/item-grid/styles.ts"),_=t("./node_modules/react/jsx-runtime.js"),x=["subjectId","merge"];s.default=(0,m.obc)((function(e,s){var t=e.subjectId,r=e.merge,m=(0,o.default)(e,x),y=s.$,h=s.navigation,v=(0,b.memoStyles)(),g=y.subjectV2(t),O=g.jp,T=g.cn,S=g.image,P=g.type,C=f.MODEL_SUBJECT_TYPE.getTitle(P),E=c.collectionStore.collect(t,C),w="";E.includes("过")?w="warning":E.includes("在")?w="primary":E.includes("想")?w="main":(E.includes("搁置")||E.includes("抛弃"))&&(w="desc");var M,L=y.state.configs.layoutGridNums,A=(c._.window.contentWidth-c._.md*(L-1))/L,I=Math.floor(1.4*A),R=T||O||m.name,D=function(){y.onShowModalFolders({title:R,subjectId:t,folder:m,merge:r})};M=f.STORYBOOK?t?R.length>=16?14:15:12:L>=4?10:L>=3?12:14;var N=(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.LinearGradient,{style:n.default.absoluteFill,colors:j.COLORS,pointerEvents:"none"}),(0,_.jsx)(d.default,{style:(0,a.stl)(v.content,!t&&v.folderContent),children:(0,_.jsx)(i.Touchable,{onPress:D,children:(0,_.jsx)(i.Flex,{style:v.title,align:"end",children:(0,_.jsx)(i.Text,{size:M,bold:!0,children:R})})})})]});return(0,_.jsxs)(i.Touchable,{style:[v.container,{width:A}],onPress:function(){if(t)return h.push("Subject",{subjectId:t,_jp:O,_cn:T,_image:(0,u.getCoverSrc)(S,A),_type:C}),void(0,p.t)("SMB.跳转",{to:"Subject",subjectId:t,from:"ItemGrid"});D()},children:[t?(0,_.jsx)(i.Cover,{src:S,size:A,height:I}):(0,_.jsx)(i.Image,{src:f.ASSETS_ICONS.folder,size:A,height:I,placeholder:!1,resizeMode:"contain"}),t?(0,_.jsx)(i.Hover,{type:w,children:N}):N]})}),j.COMPONENT)},"./src/screens/user/smb/component/item-grid/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{container:{width:(r._.window.contentWidth-2*r._.md)/3,marginBottom:r._.md,backgroundColor:r._.colorPlain},content:{position:"absolute",zIndex:1,right:0,bottom:0,left:0,opacity:.88},manage:{position:"absolute",zIndex:1,top:0,right:0,opacity:.88},folderContent:{bottom:32},title:{minHeight:48,paddingHorizontal:10,paddingVertical:10},folderTitle:{marginBottom:-24}}}))},"./src/screens/user/smb/component/item/cover/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/components/cover/utils.ts"),d=t("./src/screens/_/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./src/utils/fetch/index.ts"),u=t("./src/constants/index.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.ob)((function(e){var s=e.navigation,t=e.loaded,r=e.subjectId,l=e.image,a=e.typeCn,m=e.jp,p=e.cn;return t?(0,c.jsx)(d.Cover,{src:l||u.IMG_DEFAULT,width:u.IMG_WIDTH_LG,height:u.IMG_HEIGHT_LG,radius:!0,shadow:!0,type:a,onPress:function(){(0,i.t)("SMB.跳转",{to:"Subject",subjectId:r,from:"Item"}),s.push("Subject",{subjectId:r,_jp:m,_cn:p,_image:(0,n.getCoverSrc)(l,u.IMG_WIDTH_LG),_type:a})}}):(0,c.jsx)(o.Image,{src:u.ASSETS_ICONS.folder,size:u.IMG_WIDTH_LG,placeholder:!1,resizeMode:"contain"})}))},"./src/screens/user/smb/component/item/dev-ja/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react")),t("./src/components/index.ts");var o=t("./src/utils/decorators/index.ts");t("./src/utils/thirdParty/ja.ts"),t("./src/screens/user/smb/utils/directory.ts"),t("./node_modules/react/jsx-runtime.js");s.default=(0,o.ob)((function(e){return e.folderName,null}))},"./src/screens/user/smb/component/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.SORT_ORDER=s.DEFAULT_PROPS=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Item"),s.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,loaded:!1,jp:"",cn:"",image:"",type:"",folder:{},merge:[]},s.SORT_ORDER={folder:110,video:100,music:90,pic:80,zip:70,origin:11,file:10}},"./src/screens/user/smb/component/item/folder-ep/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.URL_TEMPLATES=s.EP_ACTIONS=s.EPS_TYPE_COUNT=s.ACTION_VLC=s.ACTION_POTPLAYER=s.ACTION_OPEN_DIRECTORY=s.ACTION_MPV=s.ACTION_LINKING=s.ACTION_DDPLAY=s.ACTION_COPY_PATH=s.ACTION_COPY_LINK=void 0;var o,n=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=t("./src/screens/user/smb/component/form/ds.ts"),l=s.ACTION_LINKING="外部跳转",i=s.ACTION_COPY_LINK="复制外部跳转链接",u=s.ACTION_COPY_PATH="复制完整路径",c=(s.ACTION_OPEN_DIRECTORY="打开文件夹",s.ACTION_DDPLAY="弹弹Play"),a=s.ACTION_POTPLAYER="PotPlayer",m=s.ACTION_VLC="VLC",p=s.ACTION_MPV="MPV";s.URL_TEMPLATES=(o={},(0,n.default)(o,c,d.URL_DDPLAY),(0,n.default)(o,a,d.URL_POTPLAYRER),(0,n.default)(o,m,d.URL_VLC),(0,n.default)(o,p,d.URL_MPV),o),s.EP_ACTIONS=[l,i,u,c,m],s.EPS_TYPE_COUNT={ep:0,mov:0,ova:0,oad:0,sp:0,op:0,ed:0,other:0}},"./src/screens/user/smb/component/item/folder-ep/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.object.entries.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v(s);if(t&&t.has(e))return t.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var d=o?Object.getOwnPropertyDescriptor(e,n):null;d&&(d.get||d.set)?Object.defineProperty(r,n,d):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}(t("react")),d=r(t("./node_modules/react-native-web/dist/exports/Linking/index.js")),l=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),u=t("./src/stores/index.ts"),c=t("./src/utils/index.ts"),a=t("./src/utils/decorators/index.ts"),m=t("./src/utils/fetch/index.ts"),p=t("./src/utils/hooks/index.ts"),f=t("./src/screens/user/smb/component/item/ds.ts"),j=t("./src/screens/user/smb/utils/index.ts"),b=r(t("./src/screens/user/smb/component/item/last-modified/index.tsx")),_=t("./src/screens/user/smb/component/item/folder-ep/utils.ts"),x=t("./src/screens/user/smb/component/item/folder-ep/ds.ts"),y=t("./src/screens/user/smb/component/item/folder-ep/styles.ts"),h=t("./node_modules/react/jsx-runtime.js");function v(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(v=function(e){return e?t:s})(e)}s.default=(0,a.c)((function(e,s){var t=e.folder,r=s.$,a=(0,n.useState)(""),v=(0,o.default)(a,2),g=v[0],O=v[1];return(0,p.useObserver)((function(){var e=t.name,s=t.lastModified,n=t.list.filter((function(e){return"video"===e.type})).sort((function(e,s){return(f.SORT_ORDER[e.type]||0)===(f.SORT_ORDER[s.type]||0)?(0,c.desc)(e.name,s.name):(0,c.desc)(f.SORT_ORDER[e.type]||0,f.SORT_ORDER[s.type]||0)})),a=r.state.configs,p=[x.ACTION_COPY_PATH];a.showDDPlay&&p.push(x.ACTION_DDPLAY),a.showPotPlayer&&p.push(x.ACTION_POTPLAYER),a.showVLC&&p.push(x.ACTION_VLC),a.showMPV&&p.push(x.ACTION_MPV);var v=r.current.smb,T=v.sharedFolder;v.url&&p.unshift(x.ACTION_LINKING,x.ACTION_COPY_LINK);var S={},P=Object.assign({},x.EPS_TYPE_COUNT);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.Flex,{style:y.styles.btns,wrap:"wrap",children:n.length?n.map((function(s,n){var u=(0,_.getEp)(s.name),a=(0,o.default)(u,2),f=a[0],b=a[1],v=null===f?"["+n+"]":f;b&&(v=null===f?b:b+"\n"+v),b?P[b in P?b:"other"]+=1:P.ep+=1;var O=S[v]?"disabled":"ghostPlain";return S[v]=!0,!g||g===b||"ep"===g&&!b||"other"===g&&b&&!(b in P)?(0,h.jsx)(i.Popover,{title:[s.size?s.name+" ("+s.size+")":s.name],data:p,onSelect:function(o){(0,m.t)("SMB.章节菜单",{title:o}),o!==x.ACTION_LINKING?o!==x.ACTION_COPY_LINK?o!==x.ACTION_OPEN_DIRECTORY?o!==x.ACTION_COPY_PATH?Object.keys(x.URL_TEMPLATES).includes(o)&&d.default.openURL(r.url(T,t.path,e,s.name,x.URL_TEMPLATES[o])):(0,c.copy)((0,j.fixedUrl)([T,t.path,e,s.name].filter((function(e){return e})).join("/")),"已复制路径"):window.open((0,j.fixedUrl)([T,t.path,e].filter((function(e){return e})).join("/"))):(0,c.copy)(r.url(T,t.path,e,s.name),"已复制路径"):d.default.openURL(r.url(T,t.path,e,s.name))},children:(0,h.jsx)(l.Button,{style:y.styles.btn,styleText:y.styles.btnText,type:O,size:"sm",noWrap:!1,children:v})},s.name):null})):(0,h.jsx)(l.Text,{size:11,lineHeight:12,children:"(空)"})}),(0,h.jsxs)(l.Flex,{style:u._.mt.sm,children:[(0,h.jsx)(l.Flex.Item,{children:(0,h.jsx)(l.Flex,{children:Object.entries(P).filter((function(e){return(0,o.default)(e,2)[1]})).map((function(e){var s=(0,o.default)(e,2),t=s[0],r=s[1];return(0,h.jsx)(l.Touchable,{style:u._.mr.xs,onPress:function(){O(g===t?"":t)},children:(0,h.jsxs)(l.Text,{size:12,type:g&&g===t?"desc":"icon",children:["[",t,"*",r,"]"]})},t)}))})}),(0,h.jsx)(l.Touchable,{style:u._.mr.xs,onPress:function(){r.onFile(e)},children:(0,h.jsx)(l.Text,{size:12,type:"icon",children:"[视频]"})}),(0,h.jsx)(b.default,{value:s})]})]})}))}))},"./src/screens/user/smb/component/item/folder-ep/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({item:{paddingVertical:r._.xs},btns:{marginRight:-r._.sm},btn:{marginRight:r._.sm,marginVertical:r._.sm/2},btnText:{marginTop:-2,fontSize:12,lineHeight:13}})},"./src/screens/user/smb/component/item/folder-ep/utils.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.getEp=function(e){if(!e)return[null,""];if(n.has(e))return n.get(e);var s=e.toLocaleLowerCase().replace(" end ",""),t=(0,o.default)(s),r="";for(var l in d)if(s.includes(l)){r=d[l];break}var i=[t,r];return n.set(s,i),i};var o=r(t("./node_modules/aniep/src/index.js")),n=new Map,d={nced:"ed",ncop:"op",ova:"ova",oad:"oad","[ed":"ed"," ed":"ed","[op":"op"," op ":"op"," sp":"sp","[sp":"sp","[mov":"mov"," pv":"pv","[pv":"pv"," cm":"cm","[cm":"cm"," menu":"mn","[menu":"mn",recap:"re"}},"./src/screens/user/smb/component/item/folder-list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.some.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.slice.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/Linking/index.js")),n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),d=t("./src/components/index.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),c=t("./src/constants/index.ts"),a=r(t("./src/screens/user/smb/component/item/folder-ep/index.tsx")),m=r(t("./src/screens/user/smb/component/item/last-modified/index.tsx")),p=t("./src/screens/user/smb/component/item/folder-list/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.folder,r=s.$,u=r.current.smb,j=t.name,b=t.lastModified,_=t.list,x=r.isFiles(j);return x||null===x&&!_.some((function(e){return"video"===e.type}))?(0,f.jsxs)(n.default,{children:[_.slice().sort((function(e,s){return(0,i.desc)("video"===e.type?1:0,"video"===s.type?1:0)})).map((function(e){return(0,f.jsx)(d.Touchable,{style:p.styles.item,onPress:function(){(0,i.copy)(r.url(u.sharedFolder,t.path,j,e.name),"已复制路径")},onLongPress:function(){var s=r.url(u.sharedFolder,t.path,j,e.name);o.default.openURL(s)},children:(0,f.jsxs)(d.Flex,{align:"start",children:[(0,f.jsx)(d.Image,{src:c.ASSETS_ICONS[e.type],size:14,placeholder:!1,resizeMode:"contain"}),(0,f.jsx)(d.Flex.Item,{style:l._.ml.sm,children:(0,f.jsxs)(d.Text,{size:11,lineHeight:12,numberOfLines:2,children:[e.name,!!e.size&&(0,f.jsxs)(d.Text,{type:"icon",size:11,lineHeight:12,children:[" ","(",e.size,")"]})]})})]})},e.name)})),(0,f.jsxs)(d.Flex,{style:l._.mt.sm,children:[(0,f.jsx)(d.Flex.Item,{children:(0,f.jsx)(d.Text,{size:12,type:"icon",children:"点击复制地址，长按跳转"})}),(0,f.jsx)(d.Touchable,{style:l._.mr.xs,onPress:function(){r.onFile(j)},children:(0,f.jsx)(d.Text,{size:12,type:"icon",children:"[文件]"})}),(0,f.jsx)(m.default,{value:b})]})]}):(0,f.jsx)(a.default,{folder:t})}))},"./src/screens/user/smb/component/item/folder-list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({item:{paddingVertical:r._.xs}})},"./src/screens/user/smb/component/item/folder/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),c=t("./src/utils/fetch/index.ts"),a=t("./src/constants/index.ts"),m=t("./src/screens/user/smb/utils/index.ts"),p=r(t("./src/screens/user/smb/component/item/folder-list/index.tsx")),f=t("./src/screens/user/smb/component/item/folder/styles.ts"),j=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.folder,r=e.defaultShow,u=void 0!==r&&r,b=s.$,_=(0,f.memoStyles)(),x=b.current.smb,y=b.isExpanded(t.name);null===y&&u&&(y=!0);var h=[];x.ip&&x.port?h.push(x.ip+":"+x.port):x.ip&&h.push(x.ip),y&&x.sharedFolder&&h.push(x.sharedFolder),y&&t.path&&h.push(t.path),t.name&&h.push(t.name);var v=b.state.configs.showOpenLocalFolder?(0,j.jsx)(d.IconTouchable,{style:_.folderOpen,name:"md-folder-open",size:16,onPress:function(){var e=(0,m.fixedUrl)([x.ip&&x.port?x.ip+":"+x.port:x.ip,x.sharedFolder,t.path,t.name].filter((function(e){return!!e})).join("/"));(0,m.openURL)("localexplorer:"+e),(0,c.t)("SMB.打开本地")}}):null;if(!y){var g=h.join("/").split("/");return(0,j.jsx)(n.Touchable,{onPress:function(){b.onExpand(t.name)},children:(0,j.jsxs)(n.Flex,{style:_.folder,children:[(0,j.jsx)(n.Flex.Item,{children:(0,j.jsx)(n.Text,{size:11,lineHeight:12,bold:!0,numberOfLines:1,children:(null==g?void 0:g[g.length-1])||"/"})}),(0,j.jsx)(n.Iconfont,{style:_.next,name:"md-navigate-next"})]})})}return(0,j.jsxs)(o.default,{style:[_.folder,_.folderList],children:[(0,j.jsx)(n.Touchable,{onPress:function(){b.onExpand(t.name)},onLongPress:function(){(0,i.copy)((0,m.fixedUrl)(h.join("/")),"已复制路径")},children:(0,j.jsxs)(n.Flex,{align:"start",children:[(0,j.jsx)(n.Image,{style:l._.mr.sm,src:a.ASSETS_ICONS.open,size:14,placeholder:!1,resizeMode:"contain"}),(0,j.jsx)(n.Flex.Item,{children:(0,j.jsx)(n.Text,{size:11,lineHeight:12,bold:!0,children:h.join("/")||"/"})}),v,(0,j.jsx)(n.Iconfont,{style:_.up,name:"md-keyboard-arrow-up"})]})}),(0,j.jsx)(o.default,{style:_.path,children:(0,j.jsx)(p.default,{folder:t})})]})}))},"./src/screens/user/smb/component/item/folder/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{folder:{paddingRight:4,paddingVertical:5,paddingLeft:12,marginTop:12,backgroundColor:r._.select(r._.colorBg,"rgb(24, 24, 24)"),borderWidth:1,borderColor:r._.colorBorder,borderRadius:r._.radiusSm,overflow:"hidden"},folderList:{paddingRight:12,paddingVertical:r._.sm},next:{marginHorizontal:r._.xs},up:{marginTop:-3,marginRight:-4,marginLeft:r._.xs},folderOpen:{marginTop:-8,marginRight:-4,marginLeft:2},folderOpenFixed:{height:22,transform:[{translateY:3}]},path:{paddingTop:8,marginTop:8,borderTopWidth:r._.hairlineWidth,borderColor:r._.colorBorder}}}))},"./src/screens/user/smb/component/item/folders/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.array.some.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.string.starts-with.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(r(t("react")),r(t("./node_modules/react-native-web/dist/exports/View/index.js"))),d=t("./src/components/index.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),c=r(t("./src/screens/user/smb/component/item/folder/index.tsx")),a=t("./src/screens/user/smb/component/item/folders/styles.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.fixedStyle,r=void 0===t||t,u=e.folder,p=e.merge,f=e.defaultShow,j=void 0!==f&&f,b=s.$,_=b.state.configs.layoutList,x=[u.name];null!=p&&p.length&&p.forEach((function(e){return x.push(e.name)}));var y=x.some((function(e){return b.isExpanded(e)})),h=[u].concat((0,o.default)(p||[])),v=!_||b.isFoldersExpanded(u.name);return(0,m.jsx)(n.default,{style:r&&!y&&a.styles.folders,pointerEvents:l._.web("none","auto"),children:(0,m.jsxs)(n.default,{pointerEvents:"auto",children:[h.sort((function(e,s){return e.name.startsWith("[")&&s.name.startsWith("[")?e.name.localeCompare(s.name):(0,i.desc)(e.name,s.name)})).filter((function(e,s){return!!v||s<3})).map((function(e,s){return(0,m.jsx)(c.default,{folder:e,defaultShow:0===s?j:void 0},e.name)})),_&&h.length>3&&(0,m.jsx)(d.Flex,{justify:"center",children:(0,m.jsx)(d.Touchable,{style:a.styles.expand,onPress:function(){return b.onFoldersExpand(u.name)},children:(0,m.jsx)(d.Text,{type:"sub",size:12,bold:!0,children:v?"收起":"展开 "+(h.length-3)+" 个文件夹"})})})]})})}))},"./src/screens/user/smb/component/item/folders/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.styles=r._.create({folders:{paddingLeft:o.IMG_WIDTH_LG+r._.md,marginTop:-45},expand:{paddingVertical:r._.sm,paddingHorizontal:r._.md,marginTop:r._.sm}})},"./src/screens/user/smb/component/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),n=(r(t("react")),t("./src/utils/decorators/index.ts")),d=r(t("./src/screens/user/smb/component/item/item.tsx")),l=t("./src/screens/user/smb/component/item/ds.ts"),i=t("./src/screens/user/smb/component/item/styles.ts"),u=t("./node_modules/react/jsx-runtime.js"),c=["subjectId","merge"];s.default=(0,n.obc)((function(e,s){var t,r=e.subjectId,n=e.merge,l=(0,o.default)(e,c),a=s.$,m=s.navigation;if(null==l||null==(t=l.list)||!t.length)return null;var p=a.subjectV2(r),f=p.id,j=p.jp,b=p.cn,_=p.image,x=p.type;return(0,u.jsx)(d.default,{navigation:m,styles:(0,i.memoStyles)(),loaded:!!f,subjectId:r,jp:j,cn:b,image:_,type:x,folder:l,merge:n})}),l.COMPONENT)},"./src/screens/user/smb/component/item/item.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/constants/index.ts"),i=r(t("./src/screens/user/smb/component/subject/index.tsx")),u=r(t("./src/screens/user/smb/component/item/cover/index.tsx")),c=r(t("./src/screens/user/smb/component/item/dev-ja/index.tsx")),a=r(t("./src/screens/user/smb/component/item/folders/index.tsx")),m=t("./src/screens/user/smb/component/item/ds.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.memo)((function(e){var s=e.navigation,t=e.styles,r=e.subjectId,d=e.loaded,m=e.jp,f=e.cn,j=e.image,b=e.type,_=e.folder,x=e.merge,y=l.MODEL_SUBJECT_TYPE.getTitle(b);return(0,p.jsx)(o.default,{style:t.container,children:(0,p.jsxs)(o.default,{style:t.wrap,children:[(0,p.jsxs)(n.Flex,{align:"start",children:[(0,p.jsx)(u.default,{navigation:s,loaded:d,subjectId:r,image:j,typeCn:y,jp:m,cn:f}),(0,p.jsx)(n.Flex.Item,{style:t.body,children:d?(0,p.jsx)(i.default,{subjectId:r}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.Text,{size:15,bold:!0,children:_.name}),(0,p.jsx)(c.default,{folderName:_.name})]})})]}),(0,p.jsx)(a.default,{folder:_,merge:x})]})})}),m.DEFAULT_PROPS)},"./src/screens/user/smb/component/item/last-modified/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.string.replace.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(s);if(t&&t.has(e))return t.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var d=o?Object.getOwnPropertyDescriptor(e,n):null;d&&(d.get||d.set)?Object.defineProperty(r,n,d):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}(t("react")),d=t("./src/components/index.ts"),l=t("./src/utils/hooks/index.ts"),i=t("./src/screens/user/smb/component/item/last-modified/utils.ts"),u=t("./node_modules/react/jsx-runtime.js");function c(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:s})(e)}s.default=function(e){var s=e.value,t=(0,n.useState)(!1),r=(0,o.default)(t,2),c=r[0],a=r[1];return(0,l.useObserver)((function(){var e;return(0,u.jsx)(d.Touchable,{onPress:function(){a(!c)},children:(0,u.jsxs)(d.Text,{size:11,lineHeight:12,type:"icon",children:["[",c?null==(e=String(s).replace("T"," ").split("."))?void 0:e[0]:(0,i.timeAgo)(s),"]"]})})}))}},"./src/screens/user/smb/component/item/last-modified/utils.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.date.to-string.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.timeAgo=function(e){var s=new Date(e),t=new Date,r=t.getTime()-s.getTime(),o=Math.floor(r/1e3),n=Math.floor(o/60),d=Math.floor(n/60),l=Math.floor(d/24),i=t.getMonth()-s.getMonth()+12*(t.getFullYear()-s.getFullYear()),u=Math.floor(i/12);if(u>0)return u+"年前";if(i>0)return i+"月前";if(l>0)return l+"天前";if(d>0)return d+"小时前";if(n>0)return n+"分钟前";return o+"秒前"}},"./src/screens/user/smb/component/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.memoStyles=r._.memoStyles((function(){var e={flex:1,paddingLeft:r._.wind,backgroundColor:r._.colorPlain};return o.STORYBOOK&&delete e.flex,{container:e,wrap:{paddingVertical:r._.md,paddingRight:r._.wind},body:{marginTop:-1,marginLeft:r._.md},tag:{paddingRight:6,paddingLeft:6,marginRight:r._.sm,marginBottom:r._.sm}}}))},"./src/screens/user/smb/component/list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"List")},"./src/screens/user/smb/component/list/empty/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.string.trim.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/constants/index.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$,r=s.navigation,d=t.state.filter.trim();return(0,i.jsx)(o.Empty,{text:t.smbs.length?"当前没有文件夹数据\n"+(l.STORYBOOK?"请确保你选择的文件夹存在文件或者有权限读取":"请先点击右上方菜单扫描文件夹"):"当前没有服务器数据\n请先点击右上方菜单新增服务",children:!!d&&(0,i.jsx)(o.Touchable,{style:n._.mt.sm,onPress:function(){r.push("Search",{value:d})},children:(0,i.jsxs)(o.Text,{type:"sub",align:"center",children:["前往搜索"," ",(0,i.jsx)(o.Text,{type:"sub",underline:!0,children:d.trim()})]})})})}))},"./src/screens/user/smb/component/list/grids/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.fill.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),i=r(t("./src/screens/user/smb/component/item-grid/index.tsx")),u=t("./src/screens/user/smb/component/list/grids/styles.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=s.$,r=t.state.configs.layoutGridNums;return(0,c.jsxs)(n.Flex,{style:u.styles.grids,justify:"between",wrap:"wrap",children:[t.pageList.map((function(e,s){return(0,c.jsx)(i.default,Object.assign({},e),String((null==e?void 0:e.name)||s))})),Array(r-1).fill("").map((function(e,s){return(0,c.jsx)(o.default,{style:{width:(d._.window.contentWidth-d._.md*(r-1))/r}},s)}))]})}))},"./src/screens/user/smb/component/list/grids/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({grids:{paddingVertical:r._.sm,paddingHorizontal:r._.md}})},"./src/screens/user/smb/component/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=r(t("./src/screens/user/smb/component/filter/index.tsx")),l=r(t("./src/screens/user/smb/component/pagination/index.tsx")),i=r(t("./src/screens/user/smb/component/top/index.tsx")),u=r(t("./src/screens/user/smb/component/list/empty/index.tsx")),c=r(t("./src/screens/user/smb/component/list/grids/index.tsx")),a=r(t("./src/screens/user/smb/component/list/lists/index.tsx")),m=t("./src/screens/user/smb/component/list/ds.ts"),p=t("./src/screens/user/smb/component/list/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.$;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.default,{}),(0,f.jsxs)(o.ScrollView,{contentContainerStyle:p.styles.scrollView,children:[!!t.smbs.length&&(0,f.jsx)(d.default,{}),t.pageList.length?t.state.configs.layoutList?(0,f.jsx)(a.default,{}):(0,f.jsx)(c.default,{}):(0,f.jsx)(u.default,{})]},t.refreshKey),!!t.pageList.length&&(0,f.jsx)(l.default,{})]})}),m.COMPONENT)},"./src/screens/user/smb/component/list/lists/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/utils/decorators/index.ts"),n=r(t("./src/screens/user/smb/component/item/index.tsx")),d=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=s.$;return(0,d.jsx)(d.Fragment,{children:t.pageList.map((function(e,s){return(0,d.jsx)(n.default,Object.assign({},e),String((null==e?void 0:e.name)||s))}))})}))},"./src/screens/user/smb/component/list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.styles=r._.create({scrollView:o.STORYBOOK?{paddingTop:104,paddingBottom:32}:{}})},"./src/screens/user/smb/component/modal-folders/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"ModalFolders")},"./src/screens/user/smb/component/modal-folders/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/web.timers.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/components/cover/utils.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),u=t("./src/utils/fetch/index.ts"),c=t("./src/constants/index.ts"),a=r(t("./src/screens/user/smb/component/item/folders/index.tsx")),m=r(t("./src/screens/user/smb/component/subject/index.tsx")),p=t("./src/screens/user/smb/component/modal-folders/ds.ts"),f=t("./src/screens/user/smb/component/modal-folders/styles.ts"),j=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=s.$,r=s.navigation,i=(0,f.memoStyles)(),p=t.state.folders,b=p.visible,_=p.subjectId,x=p.folder,y=p.merge,h=t.subjectV2(_),v=h.jp,g=h.cn,O=h.image,T=c.IMG_WIDTH_SM/1.2;return(0,j.jsxs)(n.ModalFixed,{style:i.modal,visible:b,onClose:t.onCloseModalFolders,children:[!!_&&(0,j.jsxs)(n.Flex,{style:l._.mb.md,children:[(0,j.jsx)(o.default,{style:l._.mr.md,children:(0,j.jsx)(n.Cover,{src:O,size:T,height:c.IMG_HEIGHT_SM/1.2,onPress:function(){r.push("Subject",{subjectId:_,_jp:v,_cn:g,_image:(0,d.getCoverSrc)(O,T)}),(0,u.t)("SMB.跳转",{to:"Subject",subjectId:_,from:"ModalFolders"}),setTimeout((function(){t.onCloseModalFolders()}),40)}})}),(0,j.jsx)(n.Flex.Item,{style:i.subject,children:(0,j.jsx)(m.default,{subjectId:_})})]}),(0,j.jsx)(n.ScrollView,{style:i.body,children:(0,j.jsx)(o.default,{style:i.folders,children:(0,j.jsx)(a.default,{fixedStyle:!1,folder:x,merge:y,defaultShow:!0})})})]})}),p.COMPONENT)},"./src/screens/user/smb/component/modal-folders/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{modal:{width:r._.r(r._.window.contentWidth)+2,marginTop:.22*-r._.window.height,maxWidth:r._.device(408,560),paddingTop:r._.device(r._.md+2,28),paddingHorizontal:r._.device(0,r._.sm),backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1),borderRadius:r._.radiusMd},body:{maxHeight:.64*r._.window.height},folders:{marginTop:-12},subject:{marginTop:r._.xs,marginRight:2}}}))},"./src/screens/user/smb/component/pagination/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Pagination")},"./src/screens/user/smb/component/pagination/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/screens/user/smb/component/pagination/ds.ts"),l=t("./src/screens/user/smb/component/pagination/styles.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.$;return(0,i.jsx)(o.Pagination,{style:l.styles.pagination,inputStyle:l.styles.input,input:t.state._page,onPrev:t.onPrev,onNext:t.onNext,onChange:t.onPaginationInputChange,onSearch:t.onPaginationInputSubmit})}),d.COMPONENT)},"./src/screens/user/smb/component/pagination/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({pagination:r._.web({position:"absolute",zIndex:1,right:0,bottom:0,left:0,paddingTop:r._.xs,backgroundColor:"rgba(0, 0, 0, 0.84)"},{marginTop:r._.xs}),input:Object.assign({height:32,paddingVertical:0},r._.fontSize14,{textAlign:"center",borderWidth:0,backgroundColor:"transparent",borderRadius:0})})},"./src/screens/user/smb/component/scrape/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Scrape")},"./src/screens/user/smb/component/scrape/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./src/screens/user/smb/component/scrape/ds.ts"),u=t("./src/screens/user/smb/component/scrape/styles.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=s.$,r=(0,u.memoStyles)();return(0,c.jsx)(n.Modal,{style:r.modal,visible:t.state.extendsJAVisible,title:"扩展刮削词",onClose:t.onCloseExtendsJA,children:(0,c.jsxs)(o.default,{style:r.body,children:[(0,c.jsx)(n.Text,{size:12,bold:!0,type:"sub",children:"若你并不想修改本地，也可以在下面输入一些文件夹关键词匹配指定条目。"}),(0,c.jsx)(n.Text,{style:d._.mt.xs,size:12,bold:!0,type:"sub",children:"一行一个，举例（注意是半角逗号）：Tenten Kakumei, 395714"}),(0,c.jsx)(n.Input,{style:r.input,inputStyle:r.multilineInputStyle,defaultValue:t.state.extendsJA.value,placeholder:"关键字, 条目数字id",multiline:!0,numberOfLines:10,textAlignVertical:"top",onChangeText:function(e){t.setState({extendsJA:{value:e}})}})]})})}),i.COMPONENT)},"./src/screens/user/smb/component/scrape/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{modal:{width:r._.r(r._.window.contentWidth),marginTop:.22*-r._.window.height,maxWidth:r._.device(408,560),paddingTop:r._.device(r._.md+2,28),paddingHorizontal:r._.device(0,r._.sm),backgroundColor:r._.select(r._.colorBg,r._._colorDarkModeLevel1),borderRadius:r._.radiusMd},body:{paddingHorizontal:6},input:Object.assign({marginTop:r._.md},r._.fontSize12),multilineInputStyle:Object.assign({},r._.fontSize12)}}))},"./src/screens/user/smb/component/servers/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Servers")},"./src/screens/user/smb/component/servers/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.map.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),u=t("./src/screens/user/smb/component/servers/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t,r=e.store,i=s.$,u=null==(t=(i=i||r).current)?void 0:t.smb;if(!u)return null;var a=u.name,m=u.ip,p=u.sharedFolder;return(0,c.jsxs)(o.default,{children:[(0,c.jsx)(d.Popover,{data:i.smbs.map((function(e,s){return e.name||"未命名服务 "+(s+1)})),onSelect:i.onSwitch,children:(0,c.jsxs)(n.Flex,{children:[(0,c.jsx)(n.Text,{bold:!0,numberOfLines:1,children:a||m||"未命名服务"}),(0,c.jsx)(n.Iconfont,{name:"md-arrow-drop-down",color:l._.colorDesc})]})}),(0,c.jsx)(n.Text,{size:10,type:"sub",bold:!0,numberOfLines:1,children:p})]})}),u.COMPONENT)},"./src/screens/user/smb/component/subject/bottom/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./src/screens/user/smb/component/subject/bottom/styles.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.ob)((function(e){var s=e.rating,t=e.rank;return(0,u.jsxs)(o.Flex,{style:i.styles.rating,children:[!!t&&(0,u.jsx)(n.Rank,{style:d._.mr.sm,value:t}),!(null==s||!s.score)&&(0,u.jsx)(n.Stars,{style:d._.mr.sm,value:s.score}),!(null==s||!s.total)&&(0,u.jsxs)(o.Text,{size:11,type:"sub",children:["(",s.total,"人评分)"]})]})}))},"./src/screens/user/smb/component/subject/bottom/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({rating:{marginTop:12,marginBottom:4}})},"./src/screens/user/smb/component/subject/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Subject")},"./src/screens/user/smb/component/subject/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=r(t("./src/screens/user/smb/component/subject/bottom/index.tsx")),i=r(t("./src/screens/user/smb/component/subject/manage/index.tsx")),u=r(t("./src/screens/user/smb/component/subject/title/index.tsx")),c=t("./src/screens/user/smb/component/subject/ds.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.subjectId,r=s.$;if(!t)return null;var d=r.subjectV2(t),c=d.jp,m=d.cn,p=d.eps,f=void 0===p?0:p,j=d.rank,b=d.rating;return(0,a.jsxs)(o.Flex,{align:"start",children:[(0,a.jsxs)(o.Flex.Item,{children:[(0,a.jsx)(u.default,{name:c,nameCn:m}),(0,a.jsxs)(o.Text,{style:n._.mt.sm,size:11,bold:!0,numberOfLines:2,children:[!!f&&f+"话 / ",r.airDate(t)||"-"]}),(0,a.jsx)(l.default,{rank:j,rating:b})]}),(0,a.jsx)(i.default,{subjectId:t})]})}),c.COMPONENT)},"./src/screens/user/smb/component/subject/manage/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/screens/_/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./src/constants/index.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=e.subjectId,r=s.$;if(!t)return null;var l=r.subjectV2(t),c=l.jp,a=l.cn,m=l.type,p=r.collection(t).status,f=void 0===p?{name:""}:p,j=n.collectionStore.collect(t)||f.name,b=i.MODEL_SUBJECT_TYPE.getTitle(m),_="看";return"书籍"===b&&(_="读"),"音乐"===b&&(_="听"),"游戏"===b&&(_="玩"),(0,u.jsx)(o.Manage,{collection:j,typeCn:b,subjectId:t,showRedirect:!n.userStore.isStorybookLogin,onPress:function(){n.uiStore.showManageModal({subjectId:t,title:(0,d.cnjp)(c,a),desc:(0,d.cnjp)(a,c),status:j,action:_},"本地管理",(function(){n.collectionStore.fetchCollectionStatusQueue([t])}))}})}))},"./src/screens/user/smb/component/subject/title/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.filter.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/constants/index.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.name,r=e.nameCn,d=s.$.state.filter,u=!!t,c=(0,n.HTMLDecode)((0,n.cnjp)(r,t)),a=(0,n.HTMLDecode)((0,n.cnjp)(t,r)),m=c.length,p=a.length,f=m>=20?13:m>=12?14:15,j=p>=24?9:p>=16?10:11;return(0,i.jsxs)(o.Flex,{wrap:"wrap",align:"end",children:[(0,i.jsx)(o.Highlight,{size:f,bold:!0,numberOfLines:1,value:d,children:""+c+l.TEXT_SPACE}),u&&a!==c&&(0,i.jsx)(o.Highlight,{type:"sub",size:j,lineHeight:24-j,bold:!0,numberOfLines:1,value:d,children:a})]})}))},"./src/screens/user/smb/component/tool-bar/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"ToolBar")},"./src/screens/user/smb/component/tool-bar/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/constants/index.ts"),l=r(t("./src/screens/user/smb/component/tool-bar/sort.tsx")),i=r(t("./src/screens/user/smb/component/tool-bar/tag.tsx")),u=r(t("./src/screens/user/smb/component/tool-bar/type.tsx")),c=t("./src/screens/user/smb/component/tool-bar/ds.ts"),a=t("./src/screens/user/smb/component/tool-bar/styles.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.ob)((function(){return(0,m.jsxs)(o.ToolBar,{style:a.styles.toolBar,children:[(0,m.jsx)(l.default,{}),(0,m.jsx)(u.default,{}),d.STORYBOOK&&(0,m.jsx)(i.default,{})]})}),c.COMPONENT)},"./src/screens/user/smb/component/tool-bar/sort.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/web.timers.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/screens/user/smb/ds.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$,r=t.state.sort;return(0,i.jsx)(o.ToolBar.Popover,{data:l.ACTIONS_SORT,icon:"md-sort",iconColor:n._.colorDesc,text:r,type:"desc",onSelect:function(e){setTimeout((function(){t.onSelectSort(e)}),0)}})}))},"./src/screens/user/smb/component/tool-bar/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({toolBar:{paddingBottom:0}})},"./src/screens/user/smb/component/tool-bar/tag.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(r(t("react")),t("./src/components/index.ts")),d=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=s.$,r=t.state.subjectTags,l=t.tagsSubjectCount();return(0,i.jsx)(n.ToolBar.Popover,{data:["全部"].concat((0,o.default)(t.memoSubjectTags.filter((function(e,s){return s<100})).map((function(e){return e+" ("+l[e]+")"})))),icon:"md-bookmark-outline",iconSize:17,iconColor:d._.colorDesc,text:r.length?r[0]:"标签",type:"desc",onSelect:function(e){setTimeout((function(){var s,r="";"全部"!==e&&(r=(null==(s=e.split(" "))?void 0:s[0])||""),t.onSelectSubjectTag(r)}),0)}})}))},"./src/screens/user/smb/component/tool-bar/type.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(r(t("react")),t("./src/components/index.ts")),d=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),i=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=s.$,r=t.state.tags,l=t.tagsCount();return(0,i.jsx)(n.ToolBar.Popover,{data:["全部"].concat((0,o.default)(t.memoTags.map((function(e){return e+" ("+l[e]+")"})))),icon:"md-folder-open",iconSize:17,iconColor:d._.colorDesc,text:r.length?r[0]:"类型",type:"desc",onSelect:function(e){setTimeout((function(){var s,r="";"全部"!==e&&(r=(null==(s=e.split(" "))?void 0:s[0])||""),t.onSelectTag(r)}),0)}})}))},"./src/screens/user/smb/component/top/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/user/smb/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Top")},"./src/screens/user/smb/component/top/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/screens/_/index.ts"),l=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),u=t("./src/screens/user/smb/ds.ts"),c=r(t("./src/screens/user/smb/component/servers/index.tsx")),a=r(t("./src/screens/user/smb/component/tool-bar/index.tsx")),m=t("./src/screens/user/smb/component/top/ds.ts"),p=t("./src/screens/user/smb/component/top/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t,r=s.$,i=s.navigation;if(!(null==(t=r.current)?void 0:t.smb))return null;var m=(0,p.memoStyles)(),j=r.state.loading;return(0,f.jsxs)(o.default,{style:m.top,children:[(0,f.jsxs)(n.Flex,{style:m.container,children:[(0,f.jsx)(n.Flex.Item,{flex:.5,children:(0,f.jsx)(c.default,{store:r})}),(0,f.jsx)(n.Flex.Item,{children:(0,f.jsx)(a.default,{})}),(0,f.jsx)(n.Flex.Item,{flex:.5,children:(0,f.jsx)(n.Flex,{justify:"end",children:(0,f.jsx)(d.Popover,{style:[m.popover,m.more],data:u.ACTIONS_SMB,onSelect:function(e){return r.onSelectSMB(e,i)},children:(0,f.jsx)(n.Iconfont,{name:"md-more-vert",color:l._.colorDesc})})})})]}),!!j&&(0,f.jsxs)(n.Flex,{style:l._.mb.sm,justify:"center",children:[(0,f.jsx)(o.default,{style:m.loading,children:(0,f.jsx)(n.Loading.Raw,{size:"small",color:l._.colorSub})}),(0,f.jsxs)(n.Text,{style:l._.ml.sm,size:12,type:"sub",children:["正在刷新条目数据 ",j]})]})]})}),m.COMPONENT)},"./src/screens/user/smb/component/top/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.memoStyles=r._.memoStyles((function(){return{top:o.STORYBOOK?{position:"absolute",zIndex:1,top:56,right:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.84)"}:{},container:{paddingTop:o.STORYBOOK?0:r._.xs,paddingHorizontal:r._.wind,paddingBottom:r._.sm},popover:{padding:r._.sm,marginLeft:r._.sm,borderRadius:20,overflow:"hidden"},more:{marginRight:r._.ios(-13,-11)},loading:{marginLeft:-24,transform:[{scale:.4}]}}}))},"./src/screens/user/smb/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.URL_WEBDAV_DEFAULT=s.URL_SMB_DEFAULT=s.URL_DIRECTORY_DEFAULT=s.STATE=s.REG_AIRDATE=s.NAMESPACE=s.LIMIT=s.EXCLUDE_STATE=s.DICT_ORDER=s.DICT=s.COMPONENT=s.ACTION_OPEN_DIRECTORY=s.ACTION_EDIT=s.ACTION_DELETE=s.ACTION_COPY_AND_CREATE_FOLDER=s.ACTION_COPY_AND_CREATE=s.ACTION_CONNECT=s.ACTION_CLOSE_DIRECTORY=s.ACTIONS_SORT=s.ACTIONS_SMB=void 0;var r=t("./src/constants/index.ts"),o=(s.COMPONENT="SMB",s.LIMIT=24,s.ACTIONS_SORT=["日期","评分","评分人数","名称","文件夹修改时间"]),n=s.ACTION_EDIT="编辑",d=s.ACTION_OPEN_DIRECTORY="展开文件夹",l=s.ACTION_CLOSE_DIRECTORY="收起文件夹",i=s.ACTION_DELETE="删除",u=s.ACTION_CONNECT="扫描",c=s.ACTION_COPY_AND_CREATE="复制配置新建",a=s.ACTION_COPY_AND_CREATE_FOLDER="创建用户目录",m=(s.ACTIONS_SMB=r.STORYBOOK?[n,d,l,i]:[u,n,c,a,i],s.NAMESPACE="ScreenSmb",s.URL_DIRECTORY_DEFAULT=""),p=s.URL_SMB_DEFAULT="smb://[USERNAME]:[PASSWORD]@[IP]/[PATH]/[FILE]",f=s.URL_WEBDAV_DEFAULT="smb://[USERNAME]:[PASSWORD]@[IP]/[PATH]/[FILE]",j=s.EXCLUDE_STATE={data:[],tags:[],subjectTags:[],loading:!1,fetchingCollections:!1,expand:!1,more:!1,refreshKey:0,visible:!1,id:"",name:"",ip:"",port:"",username:"",password:"",sharedFolder:"",workGroup:"",path:"",url:r.STORYBOOK?m:r.IOS?f:p,configVisible:!1,extendsJAVisible:!1,folders:{visible:!1,title:"",subjectId:0,folder:{name:"",lastModified:"",path:"",list:[],ids:[],tags:[]},merge:[]}};s.STATE=Object.assign({uuid:"",sort:o[0],_filter:"",filter:"",_page:"1",page:1,files:{},expands:{},foldersExpands:{},configs:{layoutList:!1,layoutGridNums:3,showDDPlay:!0,showPotPlayer:!1,showVLC:!1,showMPV:!1,showOpenLocalFolder:!1},extendsJA:{value:""},webDAV:r.IOS,autoJA:!0,subjects:{}},j,{_loaded:!1}),s.DICT=[{reg:/(1080(P|p)|1920(X|×)1080)/,val:"1080P"},{reg:/2160(P|p)/,val:"2160P"},{reg:/1440(P|p)/,val:"1440P"},{reg:/(720(P|p)|1280(X|×)720)/,val:"720P"},{reg:/60fps/,val:"60FPS"},{reg:/(AVC|x264|h264)/,val:"AVC"},{reg:/(HEVC|x265|H265)/,val:"HEVC"},{reg:/ma10p/,val:"Ma10p"},{reg:/8bit/,val:"8bit"},{reg:/Hi10p|10bit/,val:"10bit"},{reg:/yuv420p10/,val:"YUV-4:2:0 10bit"},{reg:/(ACC|AAC)/,val:"AAC"},{reg:/flac|FLAC/,val:"FLAC"},{reg:/(opus|OPUSx2)/,val:"OPUS"},{reg:/(web-dl|webrip)/,val:"WEBRip"},{reg:/(bdrip|BD)/,val:"BDRip"},{reg:/(dvdrip|DVD)/,val:"DVDRip"},{reg:/(剧场版|movie|MOVIE)/,val:"剧场版"},{reg:/(ova|OVA)/,val:"OVA"},{reg:/(sp|SP)/,val:"SP"},{reg:/(NCOP)/,val:"无字OP"},{reg:/(NCED)/,val:"无字ED"},{reg:/\.mp4/,val:"MP4"},{reg:/\.mkv/,val:"MKV"}],s.DICT_ORDER={条目:1101,文件夹:1100,动画:1005,书籍:1004,游戏:1003,音乐:1002,三次元:1001,在看:965,看过:964,想看:963,在读:955,读过:954,想读:953,在玩:945,玩过:944,想玩:943,在听:935,听过:934,想听:933,搁置:902,抛弃:901,未收藏:900,"2160P(2K)":104,"1440P":103,"1080P":102,"720P":101,BDRip:93,WEBRip:92,DVDRip:91,"10bit 色深":81,"8bit 色深":80,剧场版:73,OVA:72,SP:71},s.REG_AIRDATE=/<li><span>(发售日|放送开始|上映年度|上映时间|开始|开始时间|发行日期|连载时间|连载期间|连载日期|连载开始|発表期間|发表期间|発表号): <\/span>(.+?)<\/li>/},"./src/screens/user/smb/header/index.web.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/utils/fetch/index.ts"),i=t("./src/constants/index.ts"),u=t("./src/screens/user/smb/header/styles.ts");t("./src/screens/user/smb/header/index.scss");var c=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$,r=s.navigation,d=t.state.fetchingCollections;return(0,c.jsx)(o.Header,{title:"本地管理",mode:"float",fixed:!0,hm:["smb","Smb"],headerRight:function(){return(0,c.jsxs)(o.Flex,{children:[d&&(0,c.jsx)(o.Touchable,{style:u.styles.activity,onPress:function(){return(0,n.info)("批量请求收藏状态中")},children:(0,c.jsx)(o.Activity,{})}),(0,c.jsx)(o.Header.Popover,{name:"md-menu",data:["新增服务","通用配置","扩展刮削词","用户令牌","功能说明"],onSelect:function(e){switch(e){case"新增服务":t.onShow();break;case"通用配置":t.onShowConfig();break;case"扩展刮削词":t.onShowExtendsJA();break;case"用户令牌":r.push("LoginToken"),(0,l.t)("SMB.跳转",{to:"LoginToken",from:"Header"});break;case"功能说明":(0,n.open)((0,i.HTML_SINGLE_DOC)("nogol0viqd1flhqt")),(0,l.t)("SMB.功能说明")}}})]})},onBackPress:function(){r.push("Discovery")}})}))},"./src/screens/user/smb/header/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({activity:{marginRight:r._.sm,transform:[{scale:.8}]}})},"./src/screens/user/smb/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/utils/hooks/index.ts"),l=r(t("./src/screens/user/smb/component/config/index.tsx")),i=r(t("./src/screens/user/smb/component/form/index.tsx")),u=r(t("./src/screens/user/smb/component/list/index.tsx")),c=r(t("./src/screens/user/smb/component/modal-folders/index.tsx")),a=r(t("./src/screens/user/smb/component/scrape/index.tsx")),m=r(t("./src/screens/user/smb/header/index.web.tsx")),p=r(t("./src/screens/user/smb/store.ts")),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.ic)(p.default,(function(e,s){var t=s.$;return(0,d.useMount)((function(){t.init()})),(0,d.useObserver)((function(){return(0,f.jsxs)(o.Component,{id:"screen-smb",children:[(0,f.jsx)(m.default,{}),(0,f.jsxs)(o.Page,{loaded:t.state._loaded,children:[(0,f.jsx)(u.default,{}),(0,f.jsx)(i.default,{})]}),(0,f.jsx)(c.default,{}),(0,f.jsx)(l.default,{}),(0,f.jsx)(a.default,{})]})}))}))},"./src/screens/user/smb/store.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.object.entries.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.string.match.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.is-array.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.array.find-index.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.array.some.js"),t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.promise.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n,d=o(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),l=o(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),i=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),m=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),p=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),f=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),j=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),b=o(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),_=t("./node_modules/mobx/dist/mobx.esm.js"),x=t("./src/stores/index.ts"),y=t("./src/utils/index.ts"),h=o(t("./src/utils/crypto/index.ts")),v=t("./src/utils/fetch/index.ts"),g=t("./src/utils/kv/index.ts"),O=t("./src/utils/protobuf/index.web.ts"),T=o(t("./src/utils/store/index.ts")),S=t("./src/constants/index.ts"),P=o(t("./src/constants/i18n/index.ts")),C=t("./src/screens/user/smb/utils/index.ts"),E=t("./src/screens/user/smb/ds.ts");function w(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,f.default)(e);if(s){var o=(0,f.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,p.default)(this,t)}}s.default=(n=function(e){(0,m.default)(t,e);var s=w(t);function t(){var e,o;(0,u.default)(this,t);for(var n=arguments.length,c=new Array(n),m=0;m<n;m++)c[m]=arguments[m];return e=s.call.apply(s,[this].concat(c)),(0,j.default)((0,a.default)(e),"state",(0,_.observable)(E.STATE)),(0,j.default)((0,a.default)(e),"init",(0,i.default)(r.mark((function s(){var t,o;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getStorage(E.NAMESPACE);case 2:if(s.t0=s.sent,s.t0){s.next=5;break}s.t0={};case 5:return t=s.t0,o={},S.STORYBOOK&&(o.tags=t.tags||E.EXCLUDE_STATE.tags),e.setState(Object.assign({},t,E.EXCLUDE_STATE,o,{_loaded:!1})),s.next=11,(0,v.queue)([function(){return x.smbStore.init("data")},function(){return x.subjectStore.initSubjectV2(e.subjectIds)},function(){return x.collectionStore.init("collection")},function(){return x.collectionStore.init("collectionStatus")},function(){return(0,O.decode)("bangumi-data")}]);case 11:e.cacheList(),e.setState({_loaded:!0});case 13:case"end":return s.stop()}}),s)})))),(0,j.default)((0,a.default)(e),"save",(function(){e.setStorage(E.NAMESPACE)})),(0,j.default)((0,a.default)(e),"memoDirectory",[]),(0,j.default)((0,a.default)(e),"memoList",[]),(0,j.default)((0,a.default)(e),"memoTags",[]),(0,j.default)((0,a.default)(e),"memoSubjectTags",[]),(0,j.default)((0,a.default)(e),"cacheList",(function(){e.memoList=e.mergeList(),e.cacheTags(),e.cacheSubjectTags(),S.STORYBOOK&&e.fetchCollectionsWeb()})),(0,j.default)((0,a.default)(e),"cacheTags",(function(){e.memoTags=e.tagsActions()})),(0,j.default)((0,a.default)(e),"cacheSubjectTags",(function(){e.memoSubjectTags=e.tagsSubjectActions()})),(0,j.default)((0,a.default)(e),"fetchInfos",(0,i.default)(r.mark((function s(){var t,o,n,d,l=arguments;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=l.length>0&&void 0!==l[0]&&l[0],!S.STORYBOOK){s.next=3;break}return s.abrupt("return",e.fetchInfosWeb());case 3:if(!e.state.loading){s.next=6;break}return s.abrupt("return");case 6:return o=(0,y.getTimestamp)(),n=[],d=[],e.subjectIds.forEach((function(s,l){var u=e.subjectV2(s);if((t||!u.id||!u._loaded||o-Number(u._loaded)>=3600)&&(n.push((0,i.default)(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.loading){t.next=2;break}return t.abrupt("return");case 2:return e.setState({loading:l+1+" / "+e.subjectIds.length}),t.abrupt("return",x.subjectStore.fetchSubjectV2(s));case 4:case"end":return t.stop()}}),t)})))),e.isLogin)){var c=e.collection(s)._loaded;(t||!c||o-Number(c)>=300)&&d.push((function(){return x.collectionStore.fetchCollection(s)}))}})),e.setState({loading:!0}),(0,v.t)("SMB.请求条目",{length:n.length}),s.next=14,(0,v.queue)(n,1);case 14:return e.setState({loading:!1}),s.abrupt("return",(0,v.queue)(d));case 16:case"end":return s.stop()}}),s)})))),(0,j.default)((0,a.default)(e),"fetchInfosWeb",(0,i.default)(r.mark((function s(){var t,o,n,d,i;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e.state.loading){s.next=3;break}return s.abrupt("return");case 3:if(t=e.state.subjects,o=[],n=(0,y.getTimestamp)(),e.subjectIds.forEach((function(s){var r=(t[s]||{})._loaded;if(!r||n-Number(r)>=43200){var d=e.subjectOSS(s)._loaded;(!d||n-Number(d)>=43200)&&o.push("subject_"+s)}})),o.length){s.next=10;break}return s.abrupt("return",!0);case 10:return e.setState({loading:!0}),s.prev=11,d=["id","name","name_cn","image","rank","rating","totalEps","info","type","tags"],s.next=15,(0,g.gets)(o,d);case 15:i=s.sent,Object.entries(i).forEach((function(e){var s=(0,l.default)(e,2),t=s[0],r=s[1];try{var o,n;if(i[t]=(0,y.pick)(r,d),i[t].jp=i[t].name,delete i[t].name,i[t].cn=i[t].name_cn,delete i[t].name_cn,i[t].eps=Number(i[t].totalEps)||"",delete i[t].totalEps,i[t].info)i[t].date=(null==(n=i[t].info.match(E.REG_AIRDATE))?void 0:n[2])||"";delete i[t].info,Array.isArray(null==(o=i[t])?void 0:o.tags)?i[t].tags=i[t].tags.filter((function(e){return Number(null==e?void 0:e.count)>=25})).map((function(e){return e.name})):delete i[t].tags,i[t]._loaded=(0,y.getTimestamp)()}catch(e){}})),e.setState({subjects:i}),e.save(),s.next=23;break;case 21:s.prev=21,s.t0=s.catch(11);case 23:return e.setState({loading:!1}),e.fetchCollectionsThenCacheTagsWeb(),s.abrupt("return",!0);case 26:case"end":return s.stop()}}),s,null,[[11,21]])})))),(0,j.default)((0,a.default)(e),"fetchCollectionsWeb",(0,i.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=!0,setTimeout((function(){t&&e.setState({fetchingCollections:!0})}),1600),s.next=4,x.collectionStore.fetchCollectionStatusQueue(e.pageList.map((function(e){return e.subjectId})));case 4:return e.setState({fetchingCollections:!1}),t=!1,s.abrupt("return",!0);case 7:case"end":return s.stop()}}),s)})))),(0,j.default)((0,a.default)(e),"fetchCollectionsThenCacheTagsWeb",(0,i.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=!0,setTimeout((function(){t&&e.setState({fetchingCollections:!0})}),1600),s.next=4,x.collectionStore.fetchCollectionStatusQueue(e.subjectIds);case 4:return e.setState({fetchingCollections:!1}),t=!1,e.cacheTags(),s.abrupt("return",!0);case 8:case"end":return s.stop()}}),s)})))),(0,j.default)((0,a.default)(e),"connectSmb",(0,i.default)(r.mark((function s(){var t,o,n,d,l;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.current.smb,s.next=3,S.IOS||t.webDAV?(0,C.webDAVList)(t):(0,C.smbList)(t);case 3:if(!(o=s.sent).length){s.next=17;break}if(n=(0,_.toJS)(e.data),d=e.state.uuid,-1===(l=n.findIndex((function(e){return e.smb.uuid===d})))){s.next=17;break}return n[l].smb.loaded=(0,y.getTimestamp)(),n[l].list=o,x.smbStore.updateData(n),s.next=14,e.fetchInfos();case 14:e.setState(Object.assign({},E.EXCLUDE_STATE,{_page:"1",page:1})),e.cacheList(),e.save();case 17:(0,v.t)("SMB.扫描",{length:o.length,type:e.eventType});case 18:case"end":return s.stop()}}),s)})))),(0,j.default)((0,a.default)(e),"connectWebDirectory",(0,i.default)(r.mark((function s(){var t,o,n,d;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(t=e.memoDirectory).length){s.next=14;break}if(o=(0,_.toJS)(e.data),n=e.state.uuid,-1===(d=o.findIndex((function(e){return e.smb.uuid===n})))){s.next=14;break}return o[d].smb.loaded=(0,y.getTimestamp)(),o[d].list=t,x.smbStore.updateData(o),s.next=11,e.fetchInfos();case 11:e.setState(Object.assign({},E.EXCLUDE_STATE,{_filter:"",filter:"",_page:"1",page:1})),e.cacheList(),e.save();case 14:(0,v.t)("SMB.扫描",{length:t.length,type:e.eventType}),e.memoDirectory=[],setTimeout((function(){e.setState({refreshKey:e.state.refreshKey+1})}),0);case 17:case"end":return s.stop()}}),s)})))),(0,j.default)((0,a.default)(e),"onHeaderRefresh",(0,i.default)(r.mark((function s(){return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.fetchInfos();case 2:return e.cacheList(),s.next=5,(0,y.sleep)(400);case 5:return s.abrupt("return",!0);case 6:case"end":return s.stop()}}),s)})))),(0,j.default)((0,a.default)(e),"url",(function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4?arguments[4]:void 0;return(0,_.computed)((function(){try{if(!e.current)return"";var d=e.current.smb,l=[];s&&l.push(s),t&&l.push(t),r&&l.push(r);var i=(n||d.url||"[PATH]/[FILE]").replace(/\[USERNAME\]/g,d.username).replace(/\[PASSWORD\]/g,d.password).replace(/\[IP\]/g,d.port?d.ip+":"+d.port:d.ip).replace(/\[PATH\]/g,l.join("/")).replace(/\[FILE\]/g,o);return(0,C.fixedUrl)(i)}catch(e){return""}})).get()})),(0,j.default)((0,a.default)(e),"isFiles",(function(s){return(0,_.computed)((function(){var t=e.state.files;return s in t?!!t[s]:null})).get()})),(0,j.default)((0,a.default)(e),"isExpanded",(function(s){return(0,_.computed)((function(){var t=e.state.expands;return s in t?!!t[s]:null})).get()})),(0,j.default)((0,a.default)(e),"isFoldersExpanded",(function(s){return(0,_.computed)((function(){var t=e.state.foldersExpands;return s in t?!!t[s]:null})).get()})),(0,j.default)((0,a.default)(e),"list",(function(){var s,t,r=[];return null!=(s=e.current)&&null!=(t=s.list)&&t.length&&e.current.list.slice().sort((function(e,s){return(0,y.desc)(String(e.ids.length?e.lastModified:""),String(s.ids.length?s.lastModified:""))})).forEach((function(e){e.ids.length?e.ids.forEach((function(s){r.push(Object.assign({},e,{subjectId:s}))})):r.push(Object.assign({},e,{subjectId:0}))})),r})),(0,j.default)((0,a.default)(e),"sortList",(function(){var s=e.state.sort;return"评分"===s?e.list().slice().sort((function(s,t){var r,o,n=e.subjectV2(s.subjectId||""),d=e.subjectV2(t.subjectId||"");return(0,y.desc)(Number(n._loaded?((null==n||null==(r=n.rating)?void 0:r.score)||0)+(null!=n&&n.rank?1e4-(null==n?void 0:n.rank):-1e4):-9999),Number(d._loaded?((null==d||null==(o=d.rating)?void 0:o.score)||0)+(null!=d&&d.rank?1e4-(null==d?void 0:d.rank):-1e4):-9999))})):"评分人数"===s?e.list().slice().sort((function(s,t){var r,o,n,d;return(0,y.desc)(Number((null==(r=e.subjectV2(s.subjectId||""))||null==(o=r.rating)?void 0:o.total)||0),Number((null==(n=e.subjectV2(t.subjectId||""))||null==(d=n.rating)?void 0:d.total)||0))})):"名称"===s?e.list().slice().sort((function(s,t){var r=e.subjectV2(s.subjectId||""),o=e.subjectV2(t.subjectId||""),n=(0,y.cnjp)(r.cn,r.jp)||"",d=(0,y.cnjp)(o.cn,o.jp)||"";return n.localeCompare(d)})):"文件夹修改时间"===s?e.list().sort((function(e,s){return(0,y.desc)(String(s.lastModified||""),String(e.lastModified||""))})):e.list().slice().sort((function(s,t){return(0,y.desc)(String(e.airDate(t.subjectId||"")),String(e.airDate(s.subjectId||"")))}))})),(0,j.default)((0,a.default)(e),"tagList",(function(){var s=e.state.tags;return s.length?e.sortList().filter((function(t){var r,o,n,d=t.subjectId;if(s.includes("条目")?r=!!d:s.includes("文件夹")&&(r=!d),r||(r=t.tags.some((function(e){return s.includes(e)}))),!r){var l=e.subjectV2(d).type,i=S.MODEL_SUBJECT_TYPE.getTitle(l);r=!!d&&s.includes(i)}r||(r=!!d&&s.includes(x.collectionStore.collect(d)||(null==(o=e.collection(d))||null==(n=o.status)?void 0:n.name)||"未收藏"));if(!r&&/\d{4}/.test(s[0])){var u=e.subjectV2(d).date;r=!!u&&u.includes(s[0])}return r})):e.sortList()})),(0,j.default)((0,a.default)(e),"subjectTagList",(function(){var s=e.state.subjectTags;return s.length?e.tagList().filter((function(t){var r=t.subjectId;return!!r&&e.subjectV2(r).tags.some((function(e){return"string"==typeof e?s.includes(e):!(null==e||!e.name)&&s.includes(null==e?void 0:e.name)}))})):e.tagList()})),(0,j.default)((0,a.default)(e),"filterList",(function(){var s=e.state.filter;return s?e.subjectTagList().filter((function(t){if(!t.subjectId)return t.name.includes(s);var r=e.subjectV2(t.subjectId),o=r.cn,n=void 0===o?"":o,d=r.jp,l=void 0===d?"":d;return n.includes(s)||l.includes(s)})):e.subjectTagList()})),(0,j.default)((0,a.default)(e),"mergeList",(function(){var s={},t=[];return e.filterList().forEach((function(e){var r=e.subjectId;if(!r||!(r in s))return t.push(e),void(s[r]=t.length-1);var o=s[r];t[o].merge?t[o].merge.push(e):t[o]=Object.assign({},t[o],{merge:[e]})})),t})),(0,j.default)((0,a.default)(e),"tagsCount",(function(){var s={条目:0,文件夹:0};return e.list().forEach((function(t){var r=t.subjectId;if(r){var o,n;s["条目"]+=1;var d=e.subjectV2(r),l=d.type,i=d.date,u=S.MODEL_SUBJECT_TYPE.getTitle(l);if(u&&(s[u]?s[u]+=1:s[u]=1),"string"==typeof i){var c=i.slice(0,4);c&&(s[c]?s[c]+=1:s[c]=1)}var a=x.collectionStore.collect(r)||(null==(o=e.collection(r))||null==(n=o.status)?void 0:n.name)||"未收藏";s[a]?s[a]+=1:s[a]=1,t.tags.forEach((function(e){s[e]?s[e]+=1:s[e]=1}))}else s["文件夹"]+=1})),s})),(0,j.default)((0,a.default)(e),"tagsActions",(function(){var s=e.tagsCount();return Object.keys(s).sort((function(e,t){return(0,y.desc)(E.DICT_ORDER[e]||s[e]||0,E.DICT_ORDER[t]||s[t]||0)}))})),(0,j.default)((0,a.default)(e),"tagsSubjectCount",(function(){var s={},t={};return e.list().forEach((function(r){var o=r.subjectId;if(o&&!(o in s)){s[o]=!0;var n=e.subjectV2(o).tags;"function"==typeof(null==n?void 0:n.forEach)&&n.forEach((function(e){var s="";(s="string"==typeof e?e:null==e?void 0:e.name)&&(t[s]||(t[s]=0),t[s]+=1)}))}})),t})),(0,j.default)((0,a.default)(e),"tagsSubjectActions",(function(){var s=e.tagsSubjectCount();return Object.keys(s).sort((function(e,t){return(0,y.desc)(s[e]||0,s[t]||0)}))})),(0,j.default)((0,a.default)(e),"onShow",(function(){e.setState({visible:!0}),(0,v.t)("SMB.显示表单",{type:e.eventType})})),(0,j.default)((0,a.default)(e),"onClose",(function(){e.setState(Object.assign({},E.EXCLUDE_STATE)),e.memoDirectory=[]})),(0,j.default)((0,a.default)(e),"onEdit",(function(){if(e.current){var s=e.current.smb;e.setState({visible:!0,id:s.uuid,name:s.name||E.EXCLUDE_STATE.name,ip:s.ip||E.EXCLUDE_STATE.ip,port:s.port||E.EXCLUDE_STATE.port,username:s.username||E.EXCLUDE_STATE.username,password:s.password||E.EXCLUDE_STATE.password,sharedFolder:s.sharedFolder||E.EXCLUDE_STATE.sharedFolder,workGroup:s.workGroup||E.EXCLUDE_STATE.workGroup,path:s.path||E.EXCLUDE_STATE.path,url:s.url||E.EXCLUDE_STATE.url,webDAV:s.webDAV}),(0,v.t)("SMB.编辑",{type:e.eventType})}})),(0,j.default)((0,a.default)(e),"onCopy",(function(){if(e.current){var s=e.current.smb;e.setState({visible:!0,id:"",name:"",ip:s.ip||E.EXCLUDE_STATE.ip,port:s.port||E.EXCLUDE_STATE.port,username:s.username||E.EXCLUDE_STATE.username,password:s.password||E.EXCLUDE_STATE.password,sharedFolder:s.sharedFolder||E.EXCLUDE_STATE.sharedFolder,workGroup:s.workGroup||E.EXCLUDE_STATE.workGroup,path:s.path||E.EXCLUDE_STATE.path,url:s.url||E.EXCLUDE_STATE.url,webDAV:!!S.IOS||s.webDAV}),(0,v.t)("SMB.复制")}})),(0,j.default)((0,a.default)(e),"onChange",(function(s,t){e.setState((0,j.default)({},s,t))})),(0,j.default)((0,a.default)(e),"onSubmit",(function(){var s=e.state,t=s.id,r=s.name,o=s.ip,n=s.port,l=s.username,i=s.password,u=s.sharedFolder,c=s.workGroup,a=s.path,m=s.url,p=s.webDAV;if(S.STORYBOOK);else if(!o||!l||!u)return void(0,y.info)("请填写所有必填项");var f=(0,_.toJS)(e.data),j=f.findIndex((function(e){return e.smb.uuid===t}));if(-1===j){var b=(0,y.getTimestamp)();x.smbStore.updateData([{smb:{uuid:b,name:r,ip:o,username:l,password:i,sharedFolder:u,path:a,port:n,workGroup:c,url:m||E.EXCLUDE_STATE.url,webDAV:!!S.IOS||p},list:[]}].concat((0,d.default)(f))),e.setState(Object.assign({uuid:b},E.EXCLUDE_STATE)),(0,v.t)("SMB.新增",{type:e.eventType})}else f[j].smb.name=r,f[j].smb.ip=o,f[j].smb.username=l,f[j].smb.password=i,f[j].smb.sharedFolder=u,f[j].smb.path=a,f[j].smb.port=n,f[j].smb.workGroup=c,f[j].smb.url=m||E.EXCLUDE_STATE.url,f[j].smb.webDAV=!!S.IOS||p,x.smbStore.updateData(f),e.setState(Object.assign({},E.EXCLUDE_STATE)),(0,v.t)("SMB.保存",{type:e.eventType});e.save(),S.STORYBOOK&&setTimeout((function(){e.connectWebDirectory()}),1e3)})),(0,j.default)((0,a.default)(e),"onDelete",(function(){var s,t;if(e.current){var r=e.current.smb,o=(0,_.toJS)(e.data).filter((function(e){return e.smb.uuid!==r.uuid}));x.smbStore.updateData(o),e.setState(Object.assign({uuid:(null==o||null==(s=o[0])||null==(t=s.smb)?void 0:t.uuid)||""},E.EXCLUDE_STATE,{_page:"1",page:1})),e.cacheList(),e.save(),(0,v.t)("SMB.删除")}})),(0,j.default)((0,a.default)(e),"onSwitch",(function(s,t){e.setState({_filter:"",filter:"",_page:"1",page:1});var r=e.smbs[t];e.setState({loading:!1,uuid:r.uuid}),e.cacheList(),e.save(),(0,v.t)("SMB.切换")})),(0,j.default)((0,a.default)(e),"onToggleTags",(function(){var s=e.state.more;e.setState({more:!s}),e.cacheTags(),e.cacheSubjectTags(),e.save(),(0,v.t)("SMB.更多标签")})),(0,j.default)((0,a.default)(e),"onSelectTag",(function(s){var t=e.state.tags;e.setState({tags:s?t.includes(s)?[]:[s]:[],_page:"1",page:1}),e.cacheList(),e.save(),(0,v.t)("SMB.选择标签",{title:s})})),(0,j.default)((0,a.default)(e),"onSelectSubjectTag",(function(s){var t=e.state.subjectTags;e.setState({subjectTags:s?t.includes(s)?[]:[s]:[],_page:"1",page:1}),e.cacheList(),e.save(),(0,v.t)("SMB.选择条目标签",{title:s})})),(0,j.default)((0,a.default)(e),"onSelectSort",(function(s){e.setState({sort:s,_page:"1",page:1}),e.cacheList(),e.save(),(0,v.t)("SMB.排序",{title:s})})),(0,j.default)((0,a.default)(e),"onSelectSMB",(function(s,t){var r,o;s!==E.ACTION_CONNECT?s!==E.ACTION_EDIT?s!==E.ACTION_COPY_AND_CREATE?s!==E.ACTION_COPY_AND_CREATE_FOLDER?s!==E.ACTION_DELETE?s!==E.ACTION_OPEN_DIRECTORY?s!==E.ACTION_CLOSE_DIRECTORY||e.onCloseCurrentPage():e.onOpenCurrentPage():(0,y.confirm)("删除后无法恢复，确定？",e.onDelete):(0,y.confirm)("以 "+(null==(r=e.current)||null==(o=r.smb)?void 0:o.name)+" 为名字, 用当前筛选的条目来创建用户目录, 确定?",(function(){e.doCreateCatalog(t)})):e.onCopy():e.onEdit():e.connectSmb()})),(0,j.default)((0,a.default)(e),"onPrev",(function(){var s=e.state.page;if(1!==s){var t=s-1;e.setState({_page:String(t),page:t}),e.save(),S.STORYBOOK&&e.fetchCollectionsWeb(),(0,v.t)("SMB.上一页")}else(0,y.info)("已经是第一页了")})),(0,j.default)((0,a.default)(e),"onNext",(function(){var s=e.state.page;if(s>=Math.ceil(e.memoList.length/E.LIMIT))(0,y.info)("已经是最后一页了");else{var t=s+1;e.setState({_page:String(t),page:t}),e.save(),S.STORYBOOK&&e.fetchCollectionsWeb(),(0,v.t)("SMB.下一页")}})),(0,j.default)((0,a.default)(e),"onPaginationInputChange",(function(s){var t=s.nativeEvent.text;e.setState({_page:t})})),(0,j.default)((0,a.default)(e),"onPaginationInputSubmit",(function(){var s=e.state._page,t=Number(s)||1,r=Math.ceil(e.memoList.length/E.LIMIT)||1;t>=r&&((0,y.info)("最大 "+r+" 页"),t=r),e.setState({_page:String(t),page:t}),e.save(),S.STORYBOOK&&e.fetchCollectionsWeb(),(0,v.t)("SMB.页码跳转")})),(0,j.default)((0,a.default)(e),"onFile",(function(s){var t=!e.state.files[s];e.setState({files:(0,j.default)({},s,t)}),e.save()})),(0,j.default)((0,a.default)(e),"onExpand",(function(s){var t=!e.state.expands[s];e.setState({expands:(0,j.default)({},s,t)}),e.save(),(0,v.t)(t?"SMB.展开文件夹":"SMB.收起文件夹")})),(0,j.default)((0,a.default)(e),"onOpenCurrentPage",(function(){var s={};e.pageList.forEach((function(e){var t;s[e.name]=!0,null==e||null==(t=e.merge)||t.forEach((function(e){s[e.name]=!0}))})),e.setState({expands:s}),e.save(),(0,v.t)("SMB.展开本页文件夹")})),(0,j.default)((0,a.default)(e),"onCloseCurrentPage",(function(){var s={};e.pageList.forEach((function(e){var t;s[e.name]=!1,null==e||null==(t=e.merge)||t.forEach((function(e){s[e.name]=!1}))})),e.setState({expands:s}),e.save(),(0,v.t)("SMB.收起本页文件夹")})),(0,j.default)((0,a.default)(e),"onFilterInputChange",(function(s){var t=s.nativeEvent.text;e.setState({_filter:t}),""===t.trim()&&(e.setState({_filter:"",filter:"",_page:"1",page:1}),e.cacheList(),e.save())})),(0,j.default)((0,a.default)(e),"onFilterInputSubmit",(function(){var s=e.state._filter.trim();e.setState({_filter:s,filter:s,_page:"1",page:1}),e.cacheList(),e.save(),(0,v.t)("SMB.筛选",{value:s})})),(0,j.default)((0,a.default)(e),"onShowConfig",(function(){e.setState({configVisible:!0}),(0,v.t)("SMB.显示配置",{type:e.eventType})})),(0,j.default)((0,a.default)(e),"onCloseConfig",(function(){e.setState({configVisible:!1})})),(0,j.default)((0,a.default)(e),"onSwitchConfig",(function(s){var t=!e.state.configs[s];e.setState({configs:(0,j.default)({},s,t)}),e.save(),(0,v.t)("SMB.切换配置",{key:s,value:t})})),(0,j.default)((0,a.default)(e),"onSwitchLayoutGridNums",(function(s){e.setState({configs:{layoutGridNums:Number(s)}}),e.save()})),(0,j.default)((0,a.default)(e),"onSwitchAutoJA",(function(){e.setState({autoJA:!e.state.autoJA}),e.save()})),(0,j.default)((0,a.default)(e),"onShowModalFolders",(function(s){e.setState({folders:Object.assign({},s,{visible:!0})}),(0,v.t)("SMB.显示文件夹弹窗",{subjectId:s.subjectId})})),(0,j.default)((0,a.default)(e),"onCloseModalFolders",(function(){e.setState({folders:{visible:!1}})})),(0,j.default)((0,a.default)(e),"onFoldersExpand",(function(s){var t=!e.state.foldersExpands[s];e.setState({foldersExpands:(0,j.default)({},s,t)}),e.save()})),(0,j.default)((0,a.default)(e),"onShowExtendsJA",(function(){e.setState({extendsJAVisible:!0}),(0,v.t)("SMB.显示刮削词表单",{type:e.eventType})})),(0,j.default)((0,a.default)(e),"onCloseExtendsJA",(function(){e.setState({extendsJAVisible:!1}),e.save()})),(0,j.default)((0,a.default)(e),"upload",(function(){var s=x.userStore.myUserId;s?(0,y.confirm)("会将所有本地配置加密后上传到云，以便丢失的时候同步回来。若想清空云端数据，可以将本地的所有配置删除后再次上传。确定？",(function(){var t=[];try{t=e.data.map((function(e){return{list:[],smb:e.smb}})),(0,g.update)("smb_"+s,h.default.set(t))}catch(e){(0,y.info)("上传失败，请重试或联系作者")}})):(0,y.info)("需要先"+P.default.login())})),(0,j.default)((0,a.default)(e),"download",(function(){var s=x.userStore.myUserId;s?(0,y.confirm)("同步后会将云端配置数据覆盖掉本地所有配置数据，并会清空现有扫描列表，确定？",(0,i.default)(r.mark((function t(){var o,n,d,l,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,g.get)("smb_"+s);case 3:if(o=t.sent,n=h.default.get(o),!Array.isArray(n)||!n.length){t.next=12;break}return x.smbStore.replaceData(n),l=null==n||null==(d=n[0])?void 0:d.smb,i=l.uuid,e.setState({uuid:i}),e.save(),(0,y.info)("已覆盖"),t.abrupt("return");case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:(0,y.alert)("下载失败，可能没有数据或者数据格式出错");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))):(0,y.info)("需要先"+P.default.login())})),(0,j.default)((0,a.default)(e),"doCreateCatalog",(o=(0,i.default)(r.mark((function s(t){var o,n,d;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(d=x.userStore.formhash){s.next=4;break}return(0,y.info)("文件夹创建失败, 请检查"+P.default.login()+"状态"),s.abrupt("return");case 4:if(!e.state.loading){s.next=8;break}return(0,y.info)("正在获取数据中, 请待完成后再试"),s.abrupt("return");case 8:x.discoveryStore.doCatalogCreate({formhash:d,title:(null==(o=e.current)||null==(n=o.smb)?void 0:n.name)||"文件夹",desc:"由 Bangumi for "+(S.IOS?"iOS":"android")+" SMB 功能自动创建"},(function(s,o){if(o&&o.responseURL){var n=o.responseURL.match(/\d+/g);n&&n[0]?((0,y.info)("创建成功, 开始导入条目数据..."),setTimeout((0,i.default)(r.mark((function s(){var o,l,i;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=e.memoList,l=n[0],i=[],o.forEach((function(e){e.subjectId&&!i.includes(e.subjectId)&&i.push(e.subjectId)})),s.next=6,(0,v.queue)(i.map((function(e,s){return function(){return new Promise((function(t){(0,y.info)(s+1+" / "+i.length),x.discoveryStore.doCatalogAddRelate({catalogId:l,subjectId:e,formhash:d,noConsole:!0},(function(){t()}))}))}})),1);case 6:t.push("CatalogDetail",{catalogId:l}),(0,y.info)("已完成");case 8:case"end":return s.stop()}}),s)}))),400)):(0,y.info)("文件夹创建失败, 请检查"+P.default.login()+"状态")}})),(0,v.t)("SMB.创建目录",{length:e.filterList.length});case 10:case"end":return s.stop()}}),s)}))),function(e){return o.apply(this,arguments)})),e}return(0,c.default)(t,[{key:"refreshKey",get:function(){var e=this.state,s=e.uuid,t=e.sort,r=e.tags,o=e.subjectTags,n=e.page,d=e.filter,l=e.refreshKey,i=e.configs.layoutList;return JSON.stringify({uuid:s,sort:t,tags:r,subjectTags:o,page:n,filter:d,refreshKey:l,layoutList:i})}},{key:"data",get:function(){return x.smbStore.data}},{key:"isLogin",get:function(){return x.userStore.isLogin}},{key:"current",get:function(){var e=this.state.uuid;return this.data.find((function(s){return s.smb.uuid===e}))}},{key:"subjectIds",get:function(){var e,s=[];return null!=(e=this.current)&&e.list&&this.current.list.forEach((function(e){e.ids.forEach((function(e){s.includes(e)||s.push(e)}))})),s}},{key:"smbs",get:function(){return this.data.map((function(e){var s=e.smb.name;return s||(s=e.smb.ip+(e.smb.port?":":"")+e.smb.port),{uuid:e.smb.uuid,name:s}}))}},{key:"pageList",get:function(){var e=this.state.page;return e?this.memoList.slice((e-1)*E.LIMIT,e*E.LIMIT):[]}},{key:"extendsJA",get:function(){try{var e=this.state.extendsJA.value,s={};return e.split("\n").filter((function(e){return!!e})).map((function(e){return e.trim()})).forEach((function(e){try{var t=e.split(","),r=(0,l.default)(t,2),o=r[0],n=r[1];o=(o||"").trim(),n=Number((n||"").trim()),o&&n&&(s[o.toLocaleLowerCase()]=n)}catch(e){}})),s}catch(e){return{}}}},{key:"subjectV2",value:function(e){var s=this;return(0,_.computed)((function(){return S.STORYBOOK?s.subjectOSS(e):x.subjectStore.subjectV2(e)||s.subjectOSS(e)})).get()}},{key:"subjectOSS",value:function(e){var s=this;return(0,_.computed)((function(){return s.state.subjects["subject_"+e]||{}})).get()}},{key:"collection",value:function(e){return(0,_.computed)((function(){return x.collectionStore.collection(e)})).get()}},{key:"airDate",value:function(e){var s=this;return(0,_.computed)((function(){var t=s.subjectV2(e);if(null!=t&&t._loaded&&null!=t&&t.date&&"0000-00-00"!==t.date)return t.date;var r=x.subjectStore.subjectFormHTML(e);if(null!=r&&r._loaded&&"string"==typeof(null==r?void 0:r.info)){var o=r.info.match(E.REG_AIRDATE);return(null==o?void 0:o[2])||""}return""})).get()}},{key:"eventType",get:function(){return S.STORYBOOK?"directory":this.state.webDAV?"webDAV":"smb"}}]),t}(T.default),(0,b.default)(n.prototype,"refreshKey",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"refreshKey"),n.prototype),(0,b.default)(n.prototype,"data",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"data"),n.prototype),(0,b.default)(n.prototype,"isLogin",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"isLogin"),n.prototype),(0,b.default)(n.prototype,"current",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"current"),n.prototype),(0,b.default)(n.prototype,"subjectIds",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"subjectIds"),n.prototype),(0,b.default)(n.prototype,"smbs",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"smbs"),n.prototype),(0,b.default)(n.prototype,"pageList",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"pageList"),n.prototype),(0,b.default)(n.prototype,"extendsJA",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"extendsJA"),n.prototype),(0,b.default)(n.prototype,"eventType",[_.computed],Object.getOwnPropertyDescriptor(n.prototype,"eventType"),n.prototype),n)},"./src/screens/user/smb/utils/directory.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.string.starts-with.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.string.match.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.object.entries.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.array.index-of.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.extractAnimeName=i,s.transformData=function(e,s,t){var r=[],l=new Map;return e.filter((function(e){return!e.webkitRelativePath.startsWith(".")&&!e.name.startsWith(".")})).forEach((function(e){var r=e.webkitRelativePath.split("/").slice(0,-1).join("/");l.has(r)||l.set(r,{ids:[],lastModified:e.lastModifiedDate,list:[],name:r,path:"",tags:(0,d.matchTags)(r)});var u,c,a=e.webkitRelativePath.match(/bangumi-(\d+)/);if(a){var m=Number(a[1]);m&&!l.get(r).ids.includes(m)&&l.get(r).ids.push(m)}if(!l.get(r).ids.length){var p=Number(e.name.toLocaleLowerCase().replace(/(\.bgm)|(\.txt)/g,""));p&&!l.get(r).ids.includes(p)&&l.get(r).ids.push(p)}if(!l.get(r).ids.length){var f,j=Number(null==(f=r.match(/ \d+$/g))?void 0:f[0]);j>=10&&!l.get(r).ids.includes(j)&&l.get(r).ids.push(j)}if(s&&!l.get(r).ids.length){var b=(0,n.findJA)(i(-1!==(c=(u=r).indexOf("/"))?u.substring(c+1):u));if(b&&!l.get(r).ids.includes(b)&&l.get(r).ids.push(b),!b){var _=function(e){var s=e.split("/");if(s.length>=2)return s[s.length-2];return""}(r),x=_.match(/bangumi-(\d+)/);if(x){var y=Number(x[1]);y&&!l.get(r).ids.includes(y)&&l.get(r).ids.push(y)}if(!l.get(r).ids.length){var h,v=Number(null==(h=_.match(/ \d+$/g))?void 0:h[0]);v>=10&&!l.get(r).ids.includes(v)&&l.get(r).ids.push(v)}if(!l.get(r).ids.length){var g=(0,n.findJA)(i(_));g&&!l.get(r).ids.includes(g)&&l.get(r).ids.push(g)}}}if("object"==typeof t)try{var O=r.toLocaleLowerCase(),T=Object.entries(t).find((function(e){var s=(0,o.default)(e,1)[0];return O.includes(s)}));if(T){var S=null==T?void 0:T[1];S&&!l.get(r).ids.includes(S)&&l.get(r).ids.push(S)}}catch(e){}l.get(r).list.push({lastModified:e.lastModifiedDate,name:e.name,type:(0,d.getFileMediaType)(e.name),size:(0,d.formatFileSize)(e.size)})})),l.forEach((function(e){r.push(e)})),r};var o=r(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=t("./src/utils/thirdParty/ja.ts"),d=t("./src/screens/user/smb/utils/utils.ts");var l=/s[1-9]|movies?|extras?|specials?|ova|oad|sp/g;function i(e){var s=e.split("/"),t=s[s.length-1].replace(/\[.*?\]|\(.*?\)|\{.*?\}/g,"").replace(/\b\d{2}-\d{2}\b/g,"").replace(/_/g," ").trim();return t&&t.toLocaleLowerCase().replace(l,"").length>=3||(t=s[s.length-1])&&t.toLocaleLowerCase().replace(l,"").length>=3?t:""+(s[s.length-2]||"")+s[s.length-1]}},"./src/screens/user/smb/utils/index.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"fixedUrl",{enumerable:!0,get:function(){return o.fixedUrl}}),Object.defineProperty(s,"getFileMediaType",{enumerable:!0,get:function(){return o.getFileMediaType}}),Object.defineProperty(s,"matchTags",{enumerable:!0,get:function(){return o.matchTags}}),Object.defineProperty(s,"openURL",{enumerable:!0,get:function(){return o.openURL}}),Object.defineProperty(s,"smbList",{enumerable:!0,get:function(){return r.smbList}}),Object.defineProperty(s,"webDAVList",{enumerable:!0,get:function(){return n.webDAVList}});var r=t("./src/screens/user/smb/utils/smb.ts"),o=t("./src/screens/user/smb/utils/utils.ts"),n=t("./src/screens/user/smb/utils/webdav.ts")},"./src/screens/user/smb/utils/load-data.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.loadJAData=function(){return i.apply(this,arguments)};var n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=t("./src/utils/index.ts"),l=t("./src/assets/json/index.web.ts");function i(){return(i=(0,n.default)(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.queue)([function(){return(0,l.loadJSON)("thirdParty/ja.min")},function(){return(0,l.loadJSON)("thirdParty/ja.addon")}]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"./src/screens/user/smb/utils/smb.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.smbList=function(){}},"./src/screens/user/smb/utils/utils.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.number.to-fixed.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.fixedUrl=function(e){return(0,d.isWindows)()?String(e).replace(/\//g,"\\").replace(/:\\\\/g,"://"):e},s.formatFileSize=function(e){if(!e||"number"!=typeof e)return"";if(e>=1073741824)return(e/1073741824).toFixed(1)+" GB";if(e>=1048576)return Math.floor(e/1048576)+" MB";return Math.floor(e/1024)+" KB"},s.getFileMediaType=function(e){var s=String(e).toLocaleLowerCase();return/\.(mp4|m4v|mkv|avi|rmvb|mov|flv)$/.test(s)?"video":/\.(mp3|m4a|aac|flac|ape|wav)$/.test(s)?"music":/\.(jpg|jpeg|png|gif|bmp|webp)$/.test(s)?"pic":/\.(zip|rar|7z)(\.\d+)?$/.test(s)?"zip":/((\.bgm)|(\.bgm\.txt))$/.test(s)?"origin":"file"},s.matchTags=function(e){var s=[];return e?(l.DICT.forEach((function(t){t.reg.test(e)&&s.push(t.val)})),s.sort((function(e,s){return(0,n.desc)(l.DICT_ORDER[e]||0,l.DICT_ORDER[s]||0)}))):s},s.openURL=function(e){o.default.openURL(e)};var o=r(t("./node_modules/react-native-web/dist/exports/Linking/index.js")),n=t("./src/utils/index.ts"),d=t("./src/utils/dom/index.ts"),l=t("./src/screens/user/smb/ds.ts")},"./src/screens/user/smb/utils/webdav.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.promise.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.array.index-of.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.string.match.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.string.replace.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.webDAVList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((s=(0,l.default)(r.mark((function s(t){var o,c;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n=null,0!==(o=String(e.ip)).indexOf("http")&&(o="http://"+o),e.port&&(o+=":"+e.port),c=[o,e.sharedFolder].filter((function(e){return!!e})).join("/"),n=(0,i.createClient)(c,{authType:i.AuthType.Password,username:e.username,password:e.password}),(0,u.info)("连接 webDAV..."),setTimeout((0,l.default)(r.mark((function s(){var o,l,i,u;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:o=[],l=e.path.split(","),i=0;case 3:if(!(i<l.length)){s.next=11;break}return s.next=6,m(l[i]);case 6:(u=s.sent)&&o.push.apply(o,(0,d.default)(u));case 8:i+=1,s.next=3;break;case 11:t(o),n=null;case 13:case"end":return s.stop()}}),s)}))),1e3);case 8:case"end":return s.stop()}}),s)}))),function(e){return s.apply(this,arguments)}));var s};var n,d=o(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),l=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=t("./node_modules/webdav/dist/node/index.js"),u=t("./src/utils/index.ts"),c=t("./src/utils/fetch/index.ts"),a=t("./src/screens/user/smb/utils/utils.ts");function m(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((e=(0,l.default)(r.mark((function e(t){var o,d,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return t(!1),e.abrupt("return");case 3:return e.prev=3,e.next=6,n.getDirectoryContents("/"+s);case 6:if(null!=(o=e.sent)&&o.length){e.next=12;break}return n=null,(0,u.alert)("读取文件夹失败"),t(!1),e.abrupt("return");case 12:return d=o.map((function(e){return p(e)})).filter((function(e){return!e.hidden&&e.isDirectory&&"."!==e.name&&".."!==e.name})).map((function(e){return{name:e.name,lastModified:e.lastModified,path:s,list:[],ids:[],tags:[]}})),i=(0,u.loading)("扫描文件夹中..."),e.next=16,(0,c.queue)(d.map((function(e){return function(){return new Promise((t=(0,l.default)(r.mark((function t(o){var d,l,i,c,m;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.getDirectoryContents("/"+s+(s?"/":"")+e.name);case 3:l=t.sent,i=l.map((function(e){return p(e)})),e.list=i.filter((function(e){return!e.hidden&&"."!==e.name&&".."!==e.name&&!e.name.includes("DS_Store")})).map((function(e){return{name:e.name,type:e.isDirectory?"folder":(0,a.getFileMediaType)(e.name),lastModified:e.lastModified}})).sort((function(e,s){return(0,u.asc)(e.name,s.name)})),c=[],"string"==typeof e.name&&(m=e.name.toLocaleLowerCase().match(/bangumi-\d+/g))&&m.forEach((function(e){var s=Number(e.replace("bangumi-",""));s&&!c.includes(s)&&c.push(s)})),c.length||(c=i.filter((function(e){return/^\d+\.bgm(\.txt)?$/.test(e.name.toLocaleLowerCase())})).sort((function(e,s){return(0,u.desc)(e.name,s.name)})).map((function(e){return Number(e.name.toLocaleLowerCase().replace(/(\.bgm)|(\.txt)/g,""))}))),e.ids=c,e.tags=(0,a.matchTags)(e.name+" "+((null==(d=i[0])?void 0:d.name)||"")),o(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),o();case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),function(e){return t.apply(this,arguments)}));var t}})));case 16:i(),t(d),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[3,20]])}))),function(s){return e.apply(this,arguments)}))}function p(e){var s="directory"===e.type;return{size:s?"0":String(e.size),hidden:!1,readOnly:!1,createTime:"",shortName:"",isDirectory:s,lastModified:e.lastmod,name:e.basename}}},"./src/utils/thirdParty/ja.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.map.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.array.join.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.cleaned=i,s.cleaned2=u,s.cleaned3=c,s.cleaned4=a,s.cleaned5=p,s.cleaned6=f,s.cleaned7=j,s.cleaned8=b,s.cleaned9=function(e){return u(e)},s.findJA=function(e){if(d.has(e))return d.get(e);var s=(0,o.getJSON)("thirdParty/ja.min"),t=(0,o.getJSON)("thirdParty/ja.addon"),m=i(e),_=s[m]||t[m];if(_)return d.set(e,_),_;var x=u(e);if(_=s[x]||t[x])return d.set(e,_),_;var y=c(e);if(_=s[y]||t[y])return d.set(e,_),_;var h=m.replace(/ |劇場版|剧场版|简|繁|·/g,""),v=h.replace(/[^\u4e00-\u9fa5]/g,"");if(_=s[v]||t[v])return d.set(e,_),_;if(h||x||y||v){var g=((0,r.get)("bangumi-data")||[]).find((function(e){var s=(e.c||"").toLocaleLowerCase().replace(/ |劇場版|剧场版|·/g,""),t=(e.j||"").toLocaleLowerCase().replace(/ |劇場版|剧场版|·/g,"");return h&&(h===s||h===t)||x&&(x===s||x===t)||y&&(y===s||y===t)||v&&(v===s||v===t)}));if(g)return d.set(e,g.id),g.id}var O=a(e);if(_=s[O]||t[O])return d.set(e,_),_;if(/(\d)$/.test(O)&&(_=s[O=O.replace(/(\d)$/g,(function(e,s){return n[s]||e}))]||t[O]))return d.set(e,_),_;var T=p(e);if(_=s[T]||t[T])return d.set(e,_),_;var S=f(e);if(_=s[S]||t[S])return d.set(e,_),_;var P=j(e);if(_=s[P]||t[P])return d.set(e,_),_;var C=b(e);if(_=s[C]||t[C])return d.set(e,_),_;var E=x.replace(/s$/g,"");if(E.length>=8){l.length||(l=Object.keys(s).filter((function(e){return e.length>=8&&!/[\u4e00-\u9fa5]/.test(e)})));var w=l.find((function(e){return e.includes(E)}));if(w&&(_=s[w]))return d.set(e,_),_}if(E.includes("the")){var M=E.replace(/the/g,"");if(M.length>=8){var L=l.find((function(e){return e.includes(M)}));if(L&&(_=s[L]))return d.set(e,_),_}}d.set(e,0)};var r=t("./src/utils/protobuf/index.web.ts"),o=t("./src/assets/json/index.web.ts"),n={1:"i",2:"ii",3:"iii",4:"iv",5:"v",6:"vi",7:"vii",8:"viii",9:"ix",10:"x"},d=new Map,l=[];function i(e){return e.toLocaleLowerCase().replace(/[\r\n]$/,"").replace(/((?:\.mp4|\.mkv)+)$/,"").replace(/(v\d)$/i,"").replace(/(\d)v[0-5]/i,"$1").replace(/(x|h)26(4|5)/i,"").replace(/\bmp4\b/i," ").replace(/(8|10)-?bit/i,"").replace(/(\[[0-9a-fA-F]{6,8}])/,"[]").replace(/(\[\d{5,}])/,"").replace(/\d\d\d\d-\d\d-\d\d/," ").replace(/\d{3,4}\s*(?:x|×)\s*\d{3,4}p?/i," ").replace(/(?:2160|1080|720|480)(?:p|i)/i," ").replace(/(?:3840|1920|1280)[-_](?:2160|1080|720)/," ").replace(/2k|4k/i," ").replace(/((19|20)\d\d)/,"").replace(/\(BD\)/,"").replace(/\(DVD\)/,"").replace(/(^\d+\.)|\+sp|mp4|mkv|bdrip|avc|chs|hevc|flac|hdr|aac|ac3|x[1-9]|简(体|日)|繁(体|日)|中日|中英|日英|外挂|压制|全集|特典|映像|双语|1$|s1$|\[(bd|dvd|bd&dvd|sub|gb|gb_jp)\]/gi,"").replace(/\d+-\d+/g,"").replace(/ |-|!|！|\?|？|,|，|~|・|\.|。|:|：|&|\[|\]|\/|;|\^|`|'|"|\+|_/g,"").trim()}function u(e){return i(e.replace(/[^a-zA-Z]/g,""))}function c(e){return i(e.split(" ").filter((function(e){return!/[\u4e00-\u9fa5]/.test(e)})).join(" "))}function a(e){return c(_(e)).replace(/s1|movies?|specials?|ova|oad|chs|cht|jap|chinese|subbed|series|bdbox|opus|bd/g,"").replace(/^eiga|gekijouban|(the)?animation|(the|movies?|specials?|tv|sp)$|s0?[1-9]$/g,"").replace(/@/g,"a")}var m=/^eiga|gekijouban|(the)?animation|(the|movies?|extras?|specials?|tv|sp)$/g;function p(e){return c(_(e)).replace(/s1|movies?|extras?|specials?|ova|oad|chs|cht|jap|chinese|subbed|series|bdbox|opus|bd/g,"").replace(m,"").replace(/@/g,"a").replace(/s(\d+)$/,"$1")}function f(e){return c(_(e)).replace(/s0?[0-9]|movies?|extras?|specials?|ova|oad|chs|cht|jap|chinese|subbed|series|bdbox|opus|bd/g,"").replace(m,"").replace(/@/g,"a")}function j(e){return p(e).replace(/wo/g,"o")}function b(e){return p(e).replace(/tsu/g,"zu")}function _(e){return e.replace(/^\[[^\]]*\]/,"").trim()}},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[7].use[3]!./src/screens/user/smb/header/index.scss":(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var r=t("./node_modules/css-loader/dist/runtime/sourceMaps.js"),o=t.n(r),n=t("./node_modules/css-loader/dist/runtime/api.js"),d=t.n(n)()(o());d.push([e.id,"screen-smb component-header>div:first-child{background-color:rgba(0,0,0,0.84) !important}screen-smb component-tool-bar component-popover>div>div{background-color:rgba(255,255,255,0.16) !important}\n","",{version:3,sources:["webpack://./src/screens/user/smb/header/index.scss"],names:[],mappings:"AAMA,4CAGM,4CAAgD,CAHtD,wDAQM,kDAAsD",sourcesContent:["/*\n * @Author: czy0729\n * @Date: 2023-11-24 10:29:20\n * @Last Modified by: czy0729\n * @Last Modified time: 2023-11-24 11:13:13\n */\nscreen-smb {\n  component-header {\n    & > div:first-child {\n      background-color: rgba(0, 0, 0, 0.84) !important;\n    }\n  }\n  component-tool-bar {\n    component-popover > div > div {\n      background-color: rgba(255, 255, 255, 0.16) !important;\n    }\n  }\n}\n"],sourceRoot:""}]);const l=d},"./src/screens/user/smb/header/index.scss":(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var r=t("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=t.n(r),n=t("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),d=t.n(n),l=t("./node_modules/style-loader/dist/runtime/insertBySelector.js"),i=t.n(l),u=t("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),c=t.n(u),a=t("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),m=t.n(a),p=t("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),f=t.n(p),j=t("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[7].use[3]!./src/screens/user/smb/header/index.scss"),b={};b.styleTagTransform=f(),b.setAttributes=c(),b.insert=i().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=m();o()(j.Z,b);const _=j.Z&&j.Z.locals?j.Z.locals:void 0},"?3e83":()=>{},"?19e6":()=>{}}]);