(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1865],{"./src/screens/discovery/series/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/series/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/discovery/series/component/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_PROPS=s.COMPONENT_MAIN=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/series/component/ds.ts"),n=s.COMPONENT=(0,r.rc)(o.COMPONENT,"Item");s.COMPONENT_MAIN=(0,r.rc)(n),s.DEFAULT_PROPS={styles:{},data:[],subjects:{}}},"./src/screens/discovery/series/component/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/utils/decorators/index.ts"),n=r(t("./src/screens/discovery/series/component/item/item.tsx")),d=t("./src/screens/discovery/series/component/item/ds.ts"),c=t("./src/screens/discovery/series/component/item/styles.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=e.item,r=s.$;if("有关联系列"===r.state.status&&t.length<=1)return null;var o=r.filterData(t);return(0,a.jsx)(n.default,{styles:(0,c.memoStyles)(),data:o,subjects:r.subjects(o)})}),d.COMPONENT)},"./src/screens/discovery/series/component/item/item.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.string.sub.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.sort.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=(r(t("./node_modules/react/index.js")),r(t("./node_modules/react-native-web/dist/exports/View/index.js"))),d=t("./src/utils/index.ts"),c=t("./src/utils/decorators/index.ts"),a=r(t("./src/screens/discovery/series/component/subject/index.tsx")),i=t("./src/screens/discovery/series/component/item/ds.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.memo)((function(e){var s=e.styles,t=e.data,r=e.subjects;if(!t.length)return null;var c=Math.min.apply(Math,(0,o.default)(t)),i=t.filter((function(e){return e!==c}));return(0,u.jsxs)(n.default,{children:[(0,u.jsx)(a.default,{id:c}),!!i.length&&(0,u.jsx)(n.default,{style:s.sub,children:i.sort((function(e,s){var t,o;return(0,d.asc)((null==(t=r[e])?void 0:t.date)||"9999-99-99",(null==(o=r[s])?void 0:o.date)||"9999-99-99")})).map((function(e){return(0,u.jsx)(a.default,{style:s.subItem,id:e,small:!0},e)}))})]})}),i.DEFAULT_PROPS,i.COMPONENT_MAIN);try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ sub: { marginTop: number; paddingLeft: number; paddingBottom: number; }; subItem: { paddingVertical: number; }; }"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SubjectId[]"}},subjects:{defaultValue:null,description:"",name:"subjects",required:!0,type:{name:"{}"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/item/item.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"src/screens/discovery/series/component/item/item.tsx#item"})}catch(e){}},"./src/screens/discovery/series/component/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{sub:{marginTop:-r._.sm,paddingLeft:r._.wind+r._.sm,paddingBottom:r._.md},subItem:{paddingVertical:r._.md}}}))},"./src/screens/discovery/series/component/list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/series/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"List")},"./src/screens/discovery/series/component/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.fixed.js"),t("./node_modules/core-js/modules/es.array.sort.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/screens/_/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),c=r(t("./src/screens/discovery/series/component/tool-bar/index.tsx")),a=t("./src/screens/discovery/series/component/list/utils.tsx"),i=t("./src/screens/discovery/series/component/list/ds.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$;return(0,u.jsx)(o.PaginationList,{contentContainerStyle:n._.container.bottom,data:t.data,limit:20,ListHeaderComponent:!t.state.fixed&&(0,u.jsx)(c.default,{}),renderItem:a.renderItem,onPage:t.onPage},t.state.sort)}),i.COMPONENT);try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/discovery/series/component/list/index.tsx#list"})}catch(e){}},"./src/screens/discovery/series/component/list/utils.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.renderItem=d;r(t("./node_modules/react/index.js"));var o=r(t("./src/screens/discovery/series/component/item/index.tsx")),n=t("./node_modules/react/jsx-runtime.js");function d(e){var s=e.item;return(0,n.jsx)(o.default,{item:s})}try{d.displayName="renderItem",d.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/list/utils.tsx#renderItem"]={docgenInfo:d.__docgenInfo,name:"renderItem",path:"src/screens/discovery/series/component/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/discovery/series/component/subject/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/series/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Subject")},"./src/screens/discovery/series/component/subject/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.small.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.join.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),n=t("./src/components/index.ts"),d=t("./src/components/cover/utils.ts"),c=t("./src/screens/_/index.ts"),a=t("./src/stores/index.ts"),i=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),l=t("./src/constants/index.ts"),m=t("./src/screens/discovery/series/component/subject/ds.ts"),p=t("./src/screens/discovery/series/component/subject/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.style,r=e.id,u=e.small,m=void 0!==u&&u,_=s.$,j=s.navigation,y=(0,p.memoStyles)(),v=_.subject(r);if(0===v._loaded)return(0,f.jsx)(n.Flex,{style:y.loading,justify:"center",children:(0,f.jsx)(n.Loading.Raw,{})});var b=_.collection(r),x=[];null!=b&&b.ep?x.push("看到 "+b.ep+" "):b&&x.push("看到 0"),null!=v&&v.eps&&x.push(" "+(null==v?void 0:v.eps)+" 话"),null!=v&&v.total_episodes&&(null==v?void 0:v.total_episodes)!==(null==v?void 0:v.eps)&&x.push("共 "+(null==v?void 0:v.total_episodes)+" 章节");var S=v.platform&&"TV"!==v.platform&&v.platform,h=[!!v.total&&"("+v.total+")",String(v.date).slice(0,7)||"未放送",S].filter((function(e){return!!e})),T=v.name.length,O=T>24?11:T>16?12:T>8?13:14,g=m?.88*l.IMG_WIDTH_SM:l.IMG_WIDTH_SM,E=a.collectionStore.collect(r)||l.MODEL_COLLECTION_STATUS.getLabel(null==b?void 0:b.type)||"",A=(0,f.jsx)(n.Text,{style:a._.mt.xs,size:11,lineHeight:1,bold:!0,numberOfLines:1,shadow:!0,children:x.join(" / ")});return(0,f.jsx)(n.Touchable,{animate:!0,onPress:function(){j.push("Subject",{subjectId:v.id,_cn:v.name,_image:(0,d.getCoverSrc)(v.image,g)})},children:(0,f.jsxs)(n.Flex,{style:(0,i.stl)(y.item,t),align:"start",children:[(0,f.jsx)(c.Cover,{src:v.image,width:g,height:m?.88*l.IMG_HEIGHT_SM:l.IMG_HEIGHT_SM,radius:!0}),(0,f.jsx)(n.Flex.Item,{children:(0,f.jsxs)(n.Flex,{style:m?y.bodySm:y.body,direction:"column",justify:"between",align:"start",children:[(0,f.jsx)(n.Text,{style:a._.mr.sm,size:O,bold:!0,numberOfLines:2,children:v.name}),(0,f.jsx)(o.default,{style:a._.container.block,children:E?(0,f.jsx)(c.Progress,{current:(null==b?void 0:b.ep)||0,total:(null==v?void 0:v.eps)||0,children:A}):A}),(0,f.jsxs)(n.Flex,{style:a._.mt.sm,children:[(0,f.jsx)(c.Rank,{style:a._.mr.xs,value:v.rank}),(0,f.jsx)(c.Stars,{style:a._.mr.xs,value:v.score,simple:!0}),(0,f.jsx)(n.Text,{size:11,type:"sub",children:h.join(" · ")})]})]})}),(0,f.jsx)(c.Manage,{style:y.manage,subjectId:r,collection:E,onPress:function(){a.uiStore.showManageModal({subjectId:r,title:v.name,status:null==b?void 0:b.type},"关联系列")}})]})})}),m.COMPONENT)},"./src/screens/discovery/series/component/subject/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts"),o=t("./src/constants/index.ts");s.memoStyles=r._.memoStyles((function(){return{loading:{height:120},item:{paddingHorizontal:r._.wind,paddingVertical:20},body:{height:o.IMG_HEIGHT_SM,paddingLeft:r._.md},bodySm:{height:.88*o.IMG_HEIGHT_SM,paddingLeft:r._.md},manage:{marginTop:-2}}}))},"./src/screens/discovery/series/component/tips/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/series/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Tips")},"./src/screens/discovery/series/component/tips/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/screens/discovery/series/component/tips/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.$.state,r=t.fetching,n=t.message,d=t.current,a=t.total;return(0,c.jsx)(o.Progress,{show:r,message:n,current:d,total:a})}),d.COMPONENT);try{tips.displayName="tips",tips.__docgenInfo={description:"",displayName:"tips",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/tips/index.tsx#tips"]={docgenInfo:tips.__docgenInfo,name:"tips",path:"src/screens/discovery/series/component/tips/index.tsx#tips"})}catch(e){}},"./src/screens/discovery/series/component/tool-bar/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/series/component/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"ToolBar")},"./src/screens/discovery/series/component/tool-bar/filter.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.filter.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/screens/discovery/series/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.$,r=t.state.filter;return(0,c.jsx)(o.ToolBar.Popover,{data:d.DATA_FILTER,text:r||"类型",type:r?"desc":void 0,onSelect:t.onFilterSelect})}));try{filter.displayName="filter",filter.__docgenInfo={description:"",displayName:"filter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/tool-bar/filter.tsx#filter"]={docgenInfo:filter.__docgenInfo,name:"filter",path:"src/screens/discovery/series/component/tool-bar/filter.tsx#filter"})}catch(e){}},"./src/screens/discovery/series/component/tool-bar/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=r(t("./src/screens/discovery/series/component/tool-bar/filter.tsx")),c=r(t("./src/screens/discovery/series/component/tool-bar/more.tsx")),a=r(t("./src/screens/discovery/series/component/tool-bar/sort.tsx")),i=r(t("./src/screens/discovery/series/component/tool-bar/status.tsx")),u=r(t("./src/screens/discovery/series/component/tool-bar/year.tsx")),l=t("./src/screens/discovery/series/component/tool-bar/ds.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.ob)((function(){return(0,m.jsxs)(o.ToolBar,{children:[(0,m.jsx)(a.default,{}),(0,m.jsx)(u.default,{}),(0,m.jsx)(d.default,{}),(0,m.jsx)(i.default,{}),(0,m.jsx)(c.default,{})]})}),l.COMPONENT)},"./src/screens/discovery/series/component/tool-bar/more.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.fixed.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$,r=t.state.fixed;return(0,c.jsx)(o.ToolBar.Popover,{data:["筛选（"+(r?"固定":"浮动")+"）"],icon:"md-more-vert",iconColor:n._.colorDesc,iconSize:16,type:"desc",transparent:!0,onSelect:function(e){if(e.includes("筛选"))return t.onToggleFixed()}})}));try{more.displayName="more",more.__docgenInfo={description:"",displayName:"more",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/tool-bar/more.tsx#more"]={docgenInfo:more.__docgenInfo,name:"more",path:"src/screens/discovery/series/component/tool-bar/more.tsx#more"})}catch(e){}},"./src/screens/discovery/series/component/tool-bar/sort.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.sort.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),c=t("./src/screens/discovery/series/ds.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$,r=t.state.sort;return(0,a.jsx)(o.ToolBar.Popover,{data:c.DATA_SORT,icon:"md-sort",iconColor:r?n._.colorDesc:n._.colorSub,text:r||"排序",type:r?"desc":void 0,onSelect:t.onSortSelect})}));try{sort.displayName="sort",sort.__docgenInfo={description:"",displayName:"sort",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/tool-bar/sort.tsx#sort"]={docgenInfo:sort.__docgenInfo,name:"sort",path:"src/screens/discovery/series/component/tool-bar/sort.tsx#sort"})}catch(e){}},"./src/screens/discovery/series/component/tool-bar/status.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/screens/discovery/series/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.$,r=t.state.status;return(0,c.jsx)(o.ToolBar.Popover,{data:d.DATA_STATUS,text:r||"状态",type:r?"desc":void 0,onSelect:t.onStatusSelect})}));try{status.displayName="status",status.__docgenInfo={description:"",displayName:"status",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/tool-bar/status.tsx#status"]={docgenInfo:status.__docgenInfo,name:"status",path:"src/screens/discovery/series/component/tool-bar/status.tsx#status"})}catch(e){}},"./src/screens/discovery/series/component/tool-bar/year.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/constants/index.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.obc)((function(e,s){var t=s.$,r=t.state.airtime;return(0,c.jsx)(o.ToolBar.Popover,{data:d.DATA_AIRTIME,text:r||"年",type:r?"desc":void 0,onSelect:t.onAirtimeSelect})}));try{year.displayName="year",year.__docgenInfo={description:"",displayName:"year",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/component/tool-bar/year.tsx#year"]={docgenInfo:year.__docgenInfo,name:"year",path:"src/screens/discovery/series/component/tool-bar/year.tsx#year"})}catch(e){}},"./src/screens/discovery/series/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.array.map.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.SUBJECT_TYPE=s.SUBJECT_ITEM=s.STATE=s.RELATIONS=s.NAMESPACE=s.LIMIT=s.HOST_API_V0=s.EXCLUDE_STATE=s.DISTANCE=s.DATA_STATUS=s.DATA_SORT=s.DATA_FILTER=s.COMPONENT=void 0;var r=t("./src/constants/index.ts"),o=s.COMPONENT="Series",n=(s.NAMESPACE="Screen"+o,s.EXCLUDE_STATE={fetching:!1,message:"",current:0,total:0});s.STATE=Object.assign({collections:[],otherCollections:[],relations:{},subjects:{},data:[],sort:"",filter:"",airtime:"",status:"",fixed:!0},n,{_loaded:!1}),s.DATA_SORT=["默认","关联数","新放送","评分"],s.DATA_FILTER=r.RANK_ANIME_FILTER.map((function(e){return e.label})),s.DATA_STATUS=["全部","有关联系列","未收藏","看过","在看","未看完"],s.HOST_API_V0="https://api.bgm.tv/v0",s.RELATIONS=["前传","续集","番外篇","主线故事","相同世界观","不同世界观"],s.SUBJECT_TYPE=2,s.SUBJECT_ITEM={id:0,name:"",name_cn:"",image:"",date:"",total_episodes:0,platform:"",rank:0,score:0,total:0,_loaded:0},s.LIMIT=100,s.DISTANCE=86400},"./src/screens/discovery/series/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),o=t("./src/screens/discovery/series/ds.ts");s.COMPONENT=(0,r.rc)(o.COMPONENT,"Header")},"./src/screens/discovery/series/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),c=t("./src/utils/index.ts"),a=t("./src/utils/decorators/index.ts"),i=t("./src/screens/discovery/series/header/ds.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,a.obc)((function(e,s){var t=s.$,r=s.navigation;return(0,u.jsx)(o.Header,{title:"关联系列",hm:["series","Series"],headerRight:function(){return(0,u.jsxs)(o.Flex,{children:[(0,u.jsx)(n.IconTouchable,{style:d._.mr.xs,name:"md-refresh",color:d._.colorDesc,onPress:function(){(0,c.confirm)("刷新涉及大量请求与计算，若非必要请勿重复刷新，确定?",t.fetchSeries)}}),(0,u.jsx)(n.IconTouchable,{name:"md-info-outline",color:d._.colorDesc,size:19,onPress:function(){r.push("Information",{title:"关联系列",message:["目的为查漏补缺，便捷查找是否存在未收藏的关联番剧。","使用了你「在看」和「看过」的收藏数据，通过关联条目计算出结果。","为了控制请求数，所以并没有一次性循环请求关联到底。","举例说当一部有四季的番剧，你只收藏过第一季，那就最多只能索引到第三季，所以你收藏的条目越多，关联范围越广。","为什么排序不符合预期? 因可能关联到上千个条目，条目的上映日期和评分需要请求，当条目项看见才会请求，所以请至少手动滚动到底一次，条目信息才会补全。","为了防止滥用，目前此功能非高级会员仅会对「在看」和「看过」的前 100 条数据进行关联计算，高级会员支持 500 条。"],advance:!0})}})]})}})}),i.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/discovery/series/header/index.tsx#header"})}catch(e){}},"./src/screens/discovery/series/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.string.fixed.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var o=t("./src/components/index.ts"),n=t("./src/utils/decorators/index.ts"),d=t("./src/utils/hooks/index.ts"),c=r(t("./src/screens/discovery/series/component/list/index.tsx")),a=r(t("./src/screens/discovery/series/component/tips/index.tsx")),i=r(t("./src/screens/discovery/series/component/tool-bar/index.tsx")),u=r(t("./src/screens/discovery/series/header/index.tsx")),l=r(t("./src/screens/discovery/series/store.ts")),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,n.ic)(l.default,(function(e,s){var t=s.$;return(0,d.useRunAfter)((function(){t.init()})),(0,d.useObserver)((function(){return(0,m.jsxs)(o.Component,{id:"screen-series",children:[(0,m.jsx)(u.default,{}),(0,m.jsxs)(o.Page,{loaded:t.state._loaded,children:[t.state.fixed&&(0,m.jsx)(i.default,{}),(0,m.jsx)(c.default,{}),(0,m.jsx)(a.default,{})]})]})}))}));try{series.displayName="series",series.__docgenInfo={description:"",displayName:"series",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/series/index.tsx#series"]={docgenInfo:series.__docgenInfo,name:"series",path:"src/screens/discovery/series/index.tsx#series"})}catch(e){}},"./src/screens/discovery/series/store.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.array.is-array.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.array.from.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.set.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.string.fixed.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n,d=o(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),c=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(t("./node_modules/@babel/runtime/helpers/createClass.js")),u=o(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(t("./node_modules/@babel/runtime/helpers/inherits.js")),m=o(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=o(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),_=o(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=t("./node_modules/mobx/dist/mobx.esm.js"),y=t("./src/stores/index.ts"),v=t("./src/utils/index.ts"),b=t("./src/utils/fetch/index.ts"),x=t("./src/utils/fetch.v0/index.ts"),S=o(t("./src/utils/store/index.ts")),h=o(t("./src/constants/i18n/index.ts")),T=t("./src/screens/discovery/series/ds.ts");function O(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,p.default)(e);if(s){var o=(0,p.default)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,m.default)(this,t)}}var g={},E={};s.default=(n=function(e){(0,l.default)(t,e);var s=O(t);function t(){var e;(0,a.default)(this,t);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return e=s.call.apply(s,[this].concat(n)),(0,f.default)((0,u.default)(e),"state",(0,j.observable)(T.STATE)),(0,f.default)((0,u.default)(e),"init",(0,c.default)(r.mark((function s(){return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=e,s.t1=Object,s.t2={},s.next=5,e.getStorage(T.NAMESPACE);case 5:s.t3=s.sent,s.t4=T.EXCLUDE_STATE,s.t5={_loaded:(0,v.getTimestamp)()},s.t6=s.t1.assign.call(s.t1,s.t2,s.t3,s.t4,s.t5),s.t0.setState.call(s.t0,s.t6),e.state.data.length?e.calculateData():e.fetchSeries();case 11:case"end":return s.stop()}}),s)})))),(0,f.default)((0,u.default)(e),"fetchSeries",(0,c.default)(r.mark((function s(){return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e.state.fetching){s.next=2;break}return s.abrupt("return",!1);case 2:return E={},s.next=5,e.fetchCollections();case 5:return s.next=7,e.fetchRelations();case 7:e.calculateData(),setTimeout((0,c.default)(r.mark((function s(){return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.fetchSubRelations();case 2:e.calculateData(),e.fetchSomeSubjects(),setTimeout((function(){e.fetchOtherCollections()}),4e3);case 5:case"end":return s.stop()}}),s)}))),1600);case 9:case"end":return s.stop()}}),s)})))),(0,f.default)((0,u.default)(e),"fetchCollections",(0,c.default)(r.mark((function s(){var t,o,n,c,a,i,u,l,m;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.userId){s.next=3;break}return(0,v.info)("此功能依赖收藏数据，请先"+h.default.login(),4),s.abrupt("return",!1);case 3:return e.setState({fetching:!0,message:"获取用户收藏",current:1,total:2}),c=[],s.next=7,(0,x.request)(T.HOST_API_V0+"/users/"+e.userId+"/collections?subject_type="+T.SUBJECT_TYPE+"&type=2&limit="+T.LIMIT);case 7:if(a=s.sent,!Array.isArray(null==(t=a)?void 0:t.data)){s.next=21;break}if(c.push.apply(c,(0,d.default)(null==(i=a)?void 0:i.data)),!y.systemStore.advance){s.next=21;break}if(!((null==(u=a)?void 0:u.total)>100)){s.next=21;break}l=2;case 13:if(!(l<=Math.min(Math.ceil(a.total/T.LIMIT),5))){s.next=21;break}return s.next=16,(0,x.request)(T.HOST_API_V0+"/users/"+e.userId+"/collections?subject_type="+T.SUBJECT_TYPE+"&type=2&offset="+(l-1)*T.LIMIT+"&limit="+T.LIMIT);case 16:a=s.sent,c.push.apply(c,(0,d.default)(null==(m=a)?void 0:m.data));case 18:l+=1,s.next=13;break;case 21:return e.setState({current:2}),s.next=24,(0,x.request)(T.HOST_API_V0+"/users/"+e.userId+"/collections?subject_type="+T.SUBJECT_TYPE+"&type=3&limit="+T.LIMIT);case 24:if(a=s.sent,Array.isArray(null==(o=a)?void 0:o.data)&&c.push.apply(c,(0,d.default)(null==(n=a)?void 0:n.data)),c.length){s.next=28;break}return s.abrupt("return",!1);case 28:return e.setState({collections:c.slice().sort((function(e,s){return(0,v.desc)(e.updated_at,s.updated_at)})).map((function(e){return{id:e.subject_id,type:e.type,ep:e.ep_status,updated_at:e.updated_at}}))}),e.setState(Object.assign({},T.EXCLUDE_STATE)),e.setStorage(T.NAMESPACE),s.abrupt("return",!0);case 32:case"end":return s.stop()}}),s)})))),(0,f.default)((0,u.default)(e),"fetchOtherCollections",(0,c.default)(r.mark((function s(){var t,o,n,c,a,i,u,l;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return u=[],s.next=3,(0,x.request)(T.HOST_API_V0+"/users/"+e.userId+"/collections?subject_type="+T.SUBJECT_TYPE+"&type=1&limit="+T.LIMIT);case 3:return l=s.sent,Array.isArray(null==(t=l)?void 0:t.data)&&u.push.apply(u,(0,d.default)(null==(o=l)?void 0:o.data)),s.next=7,(0,x.request)(T.HOST_API_V0+"/users/"+e.userId+"/collections?subject_type="+T.SUBJECT_TYPE+"&type=4&limit="+T.LIMIT);case 7:return l=s.sent,Array.isArray(null==(n=l)?void 0:n.data)&&u.push.apply(u,(0,d.default)(null==(c=l)?void 0:c.data)),s.next=11,(0,x.request)(T.HOST_API_V0+"/users/"+e.userId+"/collections?subject_type="+T.SUBJECT_TYPE+"&type=5&limit="+T.LIMIT);case 11:if(l=s.sent,Array.isArray(null==(a=l)?void 0:a.data)&&u.push.apply(u,(0,d.default)(null==(i=l)?void 0:i.data)),u.length){s.next=15;break}return s.abrupt("return",!1);case 15:e.setState({otherCollections:u.slice().sort((function(e,s){return(0,v.desc)(e.updated_at,s.updated_at)})).map((function(e){return{id:e.subject_id,type:e.type,ep:e.ep_status,updated_at:e.updated_at}}))}),e.setStorage(T.NAMESPACE);case 17:case"end":return s.stop()}}),s)})))),(0,f.default)((0,u.default)(e),"fetchRelations",(0,c.default)(r.mark((function s(){var t,o;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t={},o=[],e.subjectIds.forEach((function(e){o.push((0,c.default)(r.mark((function s(){var o;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,x.request)(T.HOST_API_V0+"/subjects/"+e+"/subjects");case 2:if(o=s.sent,Array.isArray(o)){s.next=6;break}return t[e]=[],s.abrupt("return",!1);case 6:return t[e]=o.filter((function(e){return T.SUBJECT_TYPE===e.type&&T.RELATIONS.includes(e.relation)})).sort((function(e,s){return(0,v.asc)(e.id,s.id)})).map((function(e){return e.id})),s.abrupt("return",!0);case 8:case"end":return s.stop()}}),s)}))))})),s.next=5,(0,b.queue)(o.map((function(s){return(0,c.default)(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:return e.setState({fetching:!0,message:"获取条目关系",current:e.state.current+1,total:o.length}),t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})))})),2);case 5:return e.clearState("relations",t),e.setStorage(T.NAMESPACE),s.abrupt("return",!0);case 8:case"end":return s.stop()}}),s)})))),(0,f.default)((0,u.default)(e),"fetchSubRelations",(0,c.default)(r.mark((function s(){var t,o;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=Object.assign({},e.state.relations),o=[],Object.keys(t).forEach((function(e){t[e].forEach((function(e){t[e]||o.push((0,c.default)(r.mark((function s(){var o;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,x.request)(T.HOST_API_V0+"/subjects/"+e.id+"/subjects");case 2:if(o=s.sent,Array.isArray(o)){s.next=6;break}return t[e]=[],s.abrupt("return",!1);case 6:return t[e]=o.filter((function(e){return T.SUBJECT_TYPE===e.type&&T.RELATIONS.includes(e.relation)})).sort((function(e,s){return(0,v.asc)(e.id,s.id)})).map((function(e){return e.id})),s.abrupt("return",!0);case 8:case"end":return s.stop()}}),s)}))))}))})),e.setState({fetching:!0,message:"获取二级条目关系",current:0,total:o.length}),s.next=6,(0,b.queue)(o.map((function(s){return(0,c.default)(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:return e.setState({fetching:!0,message:"获取二级条目关系",current:e.state.current+1,total:o.length}),t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})))})),2);case 6:return e.setState({relations:t}),setTimeout((function(){e.setState(Object.assign({},T.EXCLUDE_STATE))}),1600),e.setStorage(T.NAMESPACE),s.abrupt("return",!0);case 10:case"end":return s.stop()}}),s)})))),(0,f.default)((0,u.default)(e),"fetchSubjects",(0,c.default)(r.mark((function s(){var t,o,n,d=arguments;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if((t=d.length>0&&void 0!==d[0]?d[0]:[]).length){s.next=3;break}return s.abrupt("return",!1);case 3:return o=(0,v.getTimestamp)(),n=[],t.forEach((function(s){if(g[s])return!0;var t=e.subject(s);if(t._loaded&&o-t._loaded<=T.DISTANCE)return!0;g[s]=!0,n.push((0,c.default)(r.mark((function t(){var o,n,d,c,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.request)(T.HOST_API_V0+"/subjects/"+s);case 2:if(null!=(a=t.sent)&&a.id){t.next=5;break}return t.abrupt("return",!1);case 5:e.setState({subjects:(0,f.default)({},s,{id:s,name:(0,v.cnjp)(a.name_cn,a.name),image:(null==a||null==(o=a.images)?void 0:o.common)||"",date:a.date,eps:a.eps,total_episodes:a.total_episodes,platform:a.platform,rank:null==(n=a.rating)?void 0:n.rank,score:null==(d=a.rating)?void 0:d.score,total:null==(c=a.rating)?void 0:c.total,_loaded:(0,v.getTimestamp)()})});case 6:case"end":return t.stop()}}),t)}))))})),s.next=8,(0,b.queue)(n,2);case 8:return e.setStorage(T.NAMESPACE),s.abrupt("return",!0);case 10:case"end":return s.stop()}}),s)})))),(0,f.default)((0,u.default)(e),"fetchSomeSubjects",(function(){var s=e.state.data,t=[];s.forEach((function(e){Array.isArray((0,j.toJS)(e))?t.push.apply(t,(0,d.default)(e)):t.push(e)})),t.length=200,e.fetchSubjects(t)})),(0,f.default)((0,u.default)(e),"calculateData",(function(){var s=e.state.relations,t=[];Object.keys(s).sort((function(e,s){return(0,v.desc)(e,s)})).forEach((function(e){var r,o=[Number(e)].concat((0,d.default)(s[e])),n=o.find((function(e){return e in E}));n?(r=t[E[n]]).push.apply(r,(0,d.default)(o)):(t.push(o),o.forEach((function(e){E[e]=t.length-1})))})),e.setState({data:t.map((function(e){return Array.from(new Set(e)).sort((function(e,s){return(0,v.asc)(e,s)}))})),_loaded:(0,v.getTimestamp)()})})),(0,f.default)((0,u.default)(e),"onPage",(function(){var s=[];(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){Array.isArray((0,j.toJS)(e))?s.push.apply(s,(0,d.default)(e)):s.push(e)})),e.fetchSubjects(s)})),(0,f.default)((0,u.default)(e),"onToggleFixed",(function(){var s=e.state.fixed;e.setState({fixed:!s}),e.setStorage(T.NAMESPACE)})),(0,f.default)((0,u.default)(e),"onSortSelect",(function(s){"默认"!==s?(e.setState({sort:s}),e.setStorage(T.NAMESPACE)):e.setState({sort:""})})),(0,f.default)((0,u.default)(e),"onFilterSelect",(function(s){"全部"!==s?(e.setState({filter:s}),e.setStorage(T.NAMESPACE)):e.setState({filter:""})})),(0,f.default)((0,u.default)(e),"onAirtimeSelect",(function(s){"全部"!==s?(e.setState({airtime:s}),e.setStorage(T.NAMESPACE)):e.setState({airtime:""})})),(0,f.default)((0,u.default)(e),"onStatusSelect",(function(s){"全部"!==s?(e.setState({status:s}),e.setStorage(T.NAMESPACE)):e.setState({status:""})})),e}return(0,i.default)(t,[{key:"userId",get:function(){return y.userStore.usersInfo(y.userStore.myUserId).username||y.userStore.myUserId}},{key:"subjectIds",get:function(){return this.state.collections.map((function(e){return e.id}))}},{key:"collection",value:function(e){var s=this;return(0,j.computed)((function(){return s.state.collections.find((function(s){return s.id===e}))||s.state.otherCollections.find((function(s){return s.id===e}))})).get()}},{key:"collections",value:function(e){var s=this;return(0,j.computed)((function(){var t={};return e.forEach((function(e){var r=s.collection(e);r&&(t[e]=r)})),t})).get()}},{key:"subject",value:function(e){var s=this;return(0,j.computed)((function(){return s.state.subjects[e]||T.SUBJECT_ITEM})).get()}},{key:"subjects",value:function(e){var s=this;return(0,j.computed)((function(){var t={};return e.forEach((function(e){t[e]=s.subject(e)})),t})).get()}},{key:"filterData",value:function(e){var s=this;return(0,j.computed)((function(){var t=s.state.filter,r=e;t&&(r=r.filter((function(e){var r=s.subject(e);return(null==r?void 0:r.platform)&&String(r.platform).includes(t)})));var o=s.state.airtime;o&&(r=r.filter((function(e){var t=s.subject(e);return(null==t?void 0:t.date)&&String(t.date).includes(o+"-")})));var n=s.state.status;return"未收藏"===n?r=r.filter((function(e){return!s.collection(e)})):"看过"===n?r=r.filter((function(e){var t;return 2===(null==(t=s.collection(e))?void 0:t.type)})):"在看"===n?r=r.filter((function(e){var t;return 3===(null==(t=s.collection(e))?void 0:t.type)})):"未看完"===n&&(r=r.filter((function(e){var t=s.collection(e),r=s.subject(e);return(null==t?void 0:t.ep)&&(null==r?void 0:r.eps)&&(null==t?void 0:t.ep)!==(null==r?void 0:r.eps)}))),r})).get()}},{key:"data",get:function(){var e=this,s=this.state,t=s.data,r=s.sort;return"关联数"===r?t.slice().sort((function(e,s){return(0,v.desc)(e.length,s.length)})):"新放送"===r?t.slice().sort((function(s,t){var r=Math.max.apply(Math,(0,d.default)(s.map((function(s){return Number((e.subject(s).date||"0000-00-00").replace(/-/g,""))})))),o=Math.max.apply(Math,(0,d.default)(t.map((function(s){return Number((e.subject(s).date||"0000-00-00").replace(/-/g,""))}))));return(0,v.desc)(r,o)})):"评分"===r?t.slice().sort((function(s,t){var r=Math.min.apply(Math,(0,d.default)(s.map((function(s){return e.subject(s).rank||9999})))),o=Math.min.apply(Math,(0,d.default)(t.map((function(s){return e.subject(s).rank||9999}))));return(0,v.asc)(r,o)})):t}},{key:"info",get:function(){var e=0;return this.data.forEach((function(s){return e+=s.length})),{series:this.data.length,total:e}}}]),t}(S.default),(0,_.default)(n.prototype,"userId",[j.computed],Object.getOwnPropertyDescriptor(n.prototype,"userId"),n.prototype),(0,_.default)(n.prototype,"subjectIds",[j.computed],Object.getOwnPropertyDescriptor(n.prototype,"subjectIds"),n.prototype),(0,_.default)(n.prototype,"data",[j.computed],Object.getOwnPropertyDescriptor(n.prototype,"data"),n.prototype),(0,_.default)(n.prototype,"info",[j.computed],Object.getOwnPropertyDescriptor(n.prototype,"info"),n.prototype),n)},"./node_modules/core-js/modules/es.string.small.js":(e,s,t)=>{"use strict";var r=t("./node_modules/core-js/internals/export.js"),o=t("./node_modules/core-js/internals/create-html.js");r({target:"String",proto:!0,forced:t("./node_modules/core-js/internals/string-html-forced.js")("small")},{small:function(){return o(this,"small","","")}})}}]);