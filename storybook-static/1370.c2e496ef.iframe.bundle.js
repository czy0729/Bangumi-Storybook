(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1370],{"./src/screens/user/origin-setting/component/cloud/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Cloud")},"./src/screens/user/origin-setting/component/cloud/hooks.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.number.to-fixed.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.useCloud=function(){var e=(0,d.useState)(""),s=(0,i.default)(e,2),t=s[0],n=s[1];return(0,a.useMount)((function(){setTimeout((0,o.default)(r.mark((function e(){var s,t,o,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=u.userStore.userInfo.id){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,m.get)("origin_"+s);case 6:if(!(t=e.sent)){e.next=10;break}return n((0,l.date)("y-m-d H:i",null==t?void 0:t.ts)),e.abrupt("return");case 10:return e.next=12,(0,c.read)({path:"origin/"+s+".json"});case 12:o=e.sent,i=o.content,n((((null==i?void 0:i.length)||0)/1e3).toFixed(1)+" kb"),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])}))),2400)})),t};var o=n(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=n(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),d=t("react"),u=t("./src/stores/index.ts"),l=t("./src/utils/index.ts"),c=t("./src/utils/db/index.ts"),a=t("./src/utils/hooks/index.ts"),m=t("./src/utils/kv/index.ts")},"./src/screens/user/origin-setting/component/cloud/index.tsx":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/web.timers.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=n(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=(n(t("react")),t("./src/components/index.ts")),d=t("./src/screens/_/index.ts"),u=t("./src/stores/index.ts"),l=t("./src/utils/index.ts"),c=t("./src/utils/dev/index.ts"),a=t("./src/utils/fetch/index.ts"),m=t("./src/utils/hooks/index.ts"),f=n(t("./src/constants/i18n/index.ts")),p=t("./src/screens/user/origin-setting/utils.ts"),j=t("./src/screens/user/origin-setting/component/cloud/hooks.ts"),g=t("./src/screens/user/origin-setting/component/cloud/ds.ts"),b=t("./src/screens/user/origin-setting/component/cloud/styles.ts"),y=t("./node_modules/react/jsx-runtime.js");s.default=function(e){var s=e.isLogin,t=e.active,n=e.onToggle,x=e.onDownloaded;(0,c.r)(g.COMPONENT);var _=(0,j.useCloud)();return(0,m.useObserver)((function(){var e=u.systemStore.setting.focusOrigin;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(d.ItemSettingBlock,{style:b.styles.container,title:"同步设置",size:20,children:[(0,y.jsx)(d.ItemSettingBlock.Item,{icon:"md-ios-share",iconStyle:{transform:[{rotate:"180deg"}]},title:"下载",information:_||!s&&"需"+f.default.login(),onPress:function(){if(!s)return(0,l.info)("下载需先"+f.default.login());setTimeout((function(){(0,l.confirm)("确定恢复到云端的设置?",(0,o.default)(r.mark((function e(){var s,t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,l.loading)("下载中..."),e.next=3,u.subjectStore.downloadOrigin();case 3:t=e.sent,s(),(0,l.feedback)(),(0,l.info)(t?"已恢复":"下载失败"),t&&(x(),(0,a.t)("自定义源头.下载"));case 8:case"end":return e.stop()}}),e)}))))}),160)}}),(0,y.jsx)(d.ItemSettingBlock.Item,{style:u._.ml.md,icon:"md-ios-share",title:"上传",information:!s&&"需"+f.default.login(),onPress:function(){if(!s)return(0,l.info)("上传需先"+f.default.login());setTimeout((function(){(0,l.confirm)("确定上传当前设置到云端?",(0,o.default)(r.mark((function e(){var s,t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,l.loading)("上传中..."),e.next=3,u.subjectStore.uploadOrigin();case 3:t=e.sent,s(),(0,l.feedback)(),(0,l.info)(t?"已上传":"上传失败，云服务异常，请待作者修复"),t&&(0,a.t)("自定义源头.上传");case 8:case"end":return e.stop()}}),e)}))))}),160)}})]}),(0,y.jsx)(d.ItemSetting,{style:b.styles.item,contentStyle:b.styles.content,hd:"突出显示源头按钮",ft:(0,y.jsx)(i.SwitchPro,{style:b.styles.switch,value:e,onSyncPress:function(){(0,a.t)("设置.切换",{title:" 突出源头按钮",checked:!e}),u.systemStore.switchSetting("focusOrigin")}}),thumb:(0,p.getYuqueThumbs)(["0/2024/png/386799/1705044747998-45792520-30b5-4079-8889-1eb471b977b1.png","0/2024/png/386799/1705044615611-9e2bf83f-d563-4e85-89c8-5a1136a08e6d.png"])}),(0,y.jsx)(d.ItemSetting,{style:b.styles.item,contentStyle:b.styles.content,hd:"显示所有项",ft:(0,y.jsx)(i.SwitchPro,{style:b.styles.switch,value:t,onSyncPress:n},t)}),(0,y.jsx)(i.Divider,{})]})}))}},"./src/screens/user/origin-setting/component/cloud/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({container:{paddingHorizontal:0,marginBottom:r._.md},item:{paddingLeft:0},content:{paddingRight:0},switch:{marginRight:-4,transform:[{scale:r._.device(.8,1.12)}]}})},"./src/screens/user/origin-setting/component/create/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Create")},"./src/screens/user/origin-setting/component/create/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),d=r(t("./src/screens/user/origin-setting/component/form/index.tsx")),u=t("./src/screens/user/origin-setting/component/create/ds.ts"),l=t("./src/screens/user/origin-setting/component/create/styles.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.type,r=e.name,i=s.$,u=i.state.edit;return u.type===t&&""===u.item.id&&""===u.item.uuid?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.Text,{style:o._.mt.md,size:15,bold:!0,children:["添加",r,"源头"]}),(0,c.jsx)(d.default,{style:o._.mt.md,name:u.item.name,url:u.item.url})]}):(0,c.jsxs)(n.Button,{style:l.styles.btn,type:o._.select("ghostPlain","plain"),onPress:function(){return i.openEdit(t,{id:"",uuid:"",name:"",url:"",sort:0,active:1})},children:["添加",r,"源头"]})}),u.COMPONENT)},"./src/screens/user/origin-setting/component/create/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({btn:{marginVertical:r._.md}})},"./src/screens/user/origin-setting/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Component")},"./src/screens/user/origin-setting/component/form/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Form")},"./src/screens/user/origin-setting/component/form/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),u=t("./src/utils/index.ts"),l=t("./src/utils/decorators/index.ts"),c=t("./src/screens/user/origin-setting/component/form/ds.ts"),a=t("./src/screens/user/origin-setting/component/form/styles.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=e.style,r=void 0===t?void 0:t,l=e.name,c=void 0===l?"":l,f=e.url,p=void 0===f?"":f,j=e.isBase,g=void 0!==j&&j,b=s.$,y=(0,a.memoStyles)(),x=b.state.edit;return(0,m.jsxs)(o.Flex,{style:(0,u.stl)(y.form,r),align:"end",children:[(0,m.jsxs)(o.Flex.Item,{children:[(0,m.jsxs)(o.Text,{size:13,bold:!0,children:["名字",g&&(0,m.jsxs)(o.Text,{type:"sub",size:10,lineHeight:13,bold:!0,children:["  ","默认项不允许修改"]})]}),(0,m.jsx)(o.Input,{style:[y.input,d._.mt.sm],defaultValue:String(c),placeholder:"菜单显示名称，唯一",editable:!g,onChangeText:function(e){return b.onChangeText("name",e)}}),(0,m.jsxs)(o.Text,{style:d._.mt.md,size:13,bold:!0,children:["网址",g&&(0,m.jsxs)(o.Text,{type:"sub",size:10,lineHeight:13,bold:!0,children:["  ","默认项不允许修改"]})]}),(0,m.jsxs)(o.Text,{style:d._.mt.xs,type:"sub",size:10,lineHeight:13,bold:!0,children:["支持参数：",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[CN]"})," ","会被替换成条目中文名，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[JP]"})," ","日文名，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[CN_S2T]"})," ","中文繁体名，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[TIME]"})," ","时间戳，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[ID]"})," ","bgm条目id"]}),(0,m.jsx)(o.Input,{style:d._.mt.sm,defaultValue:String(p),multiline:!0,numberOfLines:4,textAlignVertical:"top",placeholder:"https://",editable:!g,onChangeText:function(e){return b.onChangeText("url",e)}}),(0,m.jsx)(o.Text,{style:d._.mt.md,size:13,bold:!0,children:"排序"}),(0,m.jsx)(o.Text,{style:d._.mt.xs,type:"sub",size:10,lineHeight:13,bold:!0,children:"数字，越大越前，选填"}),(0,m.jsx)(o.Input,{style:[y.input,d._.mt.sm],value:String(x.item.sort),keyboardType:"number-pad",onChangeText:function(e){return b.onChangeText("sort",e)}})]}),(0,m.jsx)(i.IconTouchable,{style:d._.ml.md,name:"md-check",size:22,color:d._.colorDesc,onPress:b.submitEdit}),(0,m.jsx)(n.default,{style:y.close,children:(0,m.jsx)(i.IconTouchable,{name:"md-close",size:22,color:d._.colorDesc,onPress:b.closeEdit})})]})}),c.COMPONENT)},"./src/screens/user/origin-setting/component/form/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{form:{paddingVertical:16,paddingRight:8,paddingLeft:16,marginBottom:64,backgroundColor:r._.colorBg,borderColor:r._.colorBorder,borderWidth:1,borderRadius:r._.radiusMd,overflow:"hidden"},close:{position:"absolute",zIndex:1,top:10,right:8},input:{height:44,paddingVertical:0}}}))},"./src/screens/user/origin-setting/component/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Item")},"./src/screens/user/origin-setting/component/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),u=t("./src/utils/index.ts"),l=t("./src/utils/decorators/index.ts"),c=r(t("./src/screens/user/origin-setting/component/form/index.tsx")),a=t("./src/screens/user/origin-setting/component/item/ds.ts"),m=t("./src/screens/user/origin-setting/component/item/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.obc)((function(e,s){var t=e.type,r=e.id,l=e.uuid,a=e.active,p=e.icon,j=e.iconSquare,g=e.name,b=e.url,y=e.sort,x=s.$,_=(0,m.memoStyles)(),v=[],h=!!r,O=!!a;v.push(O?"停用":"启用",h?"编辑排序":"编辑"),h||v.push("删除"),v.push("预览");var T=x.state.edit,P=T.type===t&&(r&&T.item.id===r||l&&T.item.uuid===l);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.default,{style:_.container,children:(0,f.jsx)(i.Popover,{data:v,onSelect:function(e){switch(e){case"编辑排序":x.openEdit(t,{id:r,uuid:"",name:g,url:b,sort:y,active:a});break;case"编辑":x.openEdit(t,{id:"",uuid:l,name:g,url:b,sort:y,active:a});break;case"删除":(0,u.confirm)("确定删除 ["+g+"] ?",(function(){x.deleteItem({uuid:l,type:t})}));break;case"停用":x.disableItem({id:r,uuid:l,type:t});break;case"启用":x.activeItem({id:r,uuid:l,type:t});break;case"预览":x.go({type:t,url:b})}},children:(0,f.jsxs)(o.Flex,{style:(0,u.stl)(_.item,O&&_.itemActive),direction:"column",justify:"center",children:[p?(0,f.jsx)(o.Flex,{style:(0,u.stl)(_.icon,!j&&_.iconRound),justify:"center",children:(0,f.jsx)(o.Image,{size:j?24:28,src:p,placeholder:!1,skeleton:!1,sync:!0})}):(0,f.jsx)(o.Flex,{style:_.badge,justify:"center",children:(0,f.jsx)(o.Text,{bold:!0,children:String(g||l).replace("[DL]","").trim().slice(0,1).toLocaleUpperCase()})}),(0,f.jsx)(o.Text,{style:d._.mt.sm,size:11,bold:!0,numberOfLines:1,children:g}),(!!y||!h)&&(0,f.jsxs)(o.Text,{type:"sub",size:8,lineHeight:12,bold:!0,children:[y?"["+y+"] ":"","自定义"]})]})})}),P&&(0,f.jsx)(c.default,{name:g,url:b,isBase:h})]})}),a.COMPONENT)},"./src/screens/user/origin-setting/component/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{container:{width:"29%",marginBottom:r._.md,marginHorizontal:"2.1%"},item:{height:88,paddingHorizontal:4,borderWidth:1,borderColor:r._.colorBorder,borderRadius:r._.radiusMd},itemActive:{borderColor:r._.colorSuccess},icon:{width:28,height:28},iconRound:{borderRadius:r._.radiusSm,overflow:"hidden"},badge:{width:28,height:28,backgroundColor:r._.select(r._.colorBg,r._.colorDarkModeLevel2),borderRadius:28,overflow:"hidden"}}}))},"./src/screens/user/origin-setting/component/list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"List")},"./src/screens/user/origin-setting/component/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.assign.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/utils/decorators/index.ts"),d=t("./src/screens/user/origin-setting/ds.ts"),u=r(t("./src/screens/user/origin-setting/component/create/index.tsx")),l=r(t("./src/screens/user/origin-setting/component/item/index.tsx")),c=r(t("./src/screens/user/origin-setting/component/title/index.tsx")),a=t("./src/screens/user/origin-setting/component/list/ds.ts"),m=t("./src/screens/user/origin-setting/component/list/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=s.$;return(0,f.jsx)(f.Fragment,{children:d.TYPES_DS.map((function(e,s){var r=t.data[e.type];return(0,f.jsxs)(n.default,{children:[!!s&&(0,f.jsx)(o.Divider,{}),(0,f.jsx)(c.default,{type:e.type,name:e.name}),(0,f.jsx)(o.Flex,{style:m.styles.list,align:"start",wrap:"wrap",children:r.filter((function(e){return!!t.state.active||e.active})).map((function(s){return(0,f.jsx)(l.default,Object.assign({},s,{type:e.type}),s.id+"|"+s.uuid)}))}),(0,f.jsx)(u.default,{type:e.type,name:e.name})]},e.type)}))})}),a.COMPONENT)},"./src/screens/user/origin-setting/component/list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var r=t("./src/stores/index.ts");s.styles=r._.create({list:{minHeight:80,marginTop:r._.md}})},"./src/screens/user/origin-setting/component/title/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Title")},"./src/screens/user/origin-setting/component/title/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.find.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/screens/_/index.ts"),i=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),u=t("./src/screens/user/origin-setting/component/title/ds.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.type,r=e.name,d=s.$,u=d.data[t].filter((function(e){return 1===e.active})),c=u.map((function(e){return e.name}));return(0,l.jsxs)(n.Flex,{style:i._.mb.sm,children:[(0,l.jsx)(n.Flex.Item,{children:(0,l.jsx)(n.Text,{size:20,bold:!0,children:r})}),(0,l.jsx)(o.Popover,{style:i._.ml.md,data:c.length?c:["空"],onSelect:function(e){if("空"!==e){var s=u.find((function(s){return s.name===e}));d.go({type:t,url:s.url})}},children:(0,l.jsxs)(n.Flex,{children:[(0,l.jsx)(n.Iconfont,{name:"md-airplay",size:18,color:i._.colorSub}),(0,l.jsx)(n.Text,{style:i._.ml.sm,type:"sub",lineHeight:15,bold:!0,children:"预览"})]})})]})}),u.COMPONENT)},"./src/screens/user/origin-setting/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/user/origin-setting/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Header")},"./src/screens/user/origin-setting/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=t("./src/components/index.ts"),o=t("./src/utils/decorators/index.ts"),i=t("./src/utils/fetch/index.ts"),d=t("./src/screens/user/origin-setting/header/ds.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=s.navigation;return(0,u.jsx)(n.Header,{title:"自定义源头",hm:["origin-setting","OriginSetting"],headerRight:function(){return(0,u.jsx)(n.Header.Popover,{data:["说明"],onSelect:function(e){(0,i.t)("自定义源头.右上角菜单",{key:e}),"说明"===e&&t.push("Tips",{key:"qcgrso5g70d6gusf"})},children:(0,u.jsx)(n.Heatmap,{id:"自定义源头.右上角菜单"})})}})}),d.COMPONENT)},"./src/screens/user/origin-setting/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("react"));var n=r(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/utils/decorators/index.ts"),u=t("./src/utils/hooks/index.ts"),l=r(t("./src/screens/user/origin-setting/component/cloud/index.tsx")),c=r(t("./src/screens/user/origin-setting/component/list/index.tsx")),a=r(t("./src/screens/user/origin-setting/header/index.tsx")),m=r(t("./src/screens/user/origin-setting/store/index.ts")),f=t("./src/screens/user/origin-setting/styles.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.ic)(m.default,(function(e,s){var t=s.$;return(0,u.useRunAfter)((function(){t.init()})),(0,u.useObserver)((function(){var e=(0,f.memoStyles)();return(0,p.jsxs)(o.Component,{id:"screen-origin-setting",children:[(0,p.jsx)(a.default,{}),(0,p.jsx)(o.Page,{loaded:t.state._loaded,children:(0,p.jsxs)(o.ScrollView,{children:[(0,p.jsx)(i.Notice,{style:e.hd,children:"客户端内仅提供辅助跳转，均不提供直接播放等功能"}),(0,p.jsxs)(n.default,{style:e.scrollView,children:[(0,p.jsx)(l.default,{isLogin:t.isLogin,active:t.state.active,onToggle:t.onToggle,onDownloaded:t.init}),(0,p.jsx)(c.default,{})]}),(0,p.jsx)(o.Text,{style:e.ft,type:"sub",size:10,align:"center",children:"- 预设数据均来源自互联网 -"})]})})]})}))}))},"./src/screens/user/origin-setting/store/action.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.find-index.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.array.filter.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=t("./node_modules/mobx/dist/mobx.esm.js"),m=t("./src/stores/index.ts"),f=t("./src/utils/index.ts"),p=t("./src/utils/fetch/index.ts"),j=t("./src/screens/user/origin-setting/ds.ts"),g=t("./src/screens/user/origin-setting/utils.ts"),b=r(t("./src/screens/user/origin-setting/store/computed.ts"));function y(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.default)(e);if(s){var n=(0,l.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,u.default)(this,t)}}s.default=function(e){(0,d.default)(t,e);var s=y(t);function t(){var e;(0,o.default)(this,t);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return e=s.call.apply(s,[this].concat(n)),(0,c.default)((0,i.default)(e),"onToggle",(function(){e.setState({active:!e.state.active}),e.save()})),(0,c.default)((0,i.default)(e),"updateOrigin",(function(){setTimeout((function(){m.subjectStore.updateOrigin(e.state.data)}),0)})),(0,c.default)((0,i.default)(e),"openEdit",(function(s,t){e.setState({edit:{type:s,item:t}}),(0,p.t)("自定义源头.编辑表单",{type:s})})),(0,c.default)((0,i.default)(e),"closeEdit",(function(){e.setState({edit:{type:"",item:{id:"",uuid:"",name:"",url:"",sort:0,active:1}}}),(0,p.t)("自定义源头.关闭表单")})),(0,c.default)((0,i.default)(e),"onChangeText",(function(s,t){var r=e.state.edit,n=t.trim();"sort"===s&&(n=isNaN(Number(n))?0:Number(n)),e.setState({edit:Object.assign({},r,{item:Object.assign({},r.item,(0,c.default)({},s,n))})})})),(0,c.default)((0,i.default)(e),"submitEdit",(function(){var s,t=e.state,r=t.edit,n=t.data,o=r.type,i=r.item,d=i.id,u=i.uuid;if(""===d&&""===u){if(!i.name)return void(0,f.info)("名字不能为空");if(!i.url)return void(0,f.info)("网址不能为空");(s=(0,a.toJS)(n)).custom[o].push({uuid:(0,f.getTimestamp)(),name:i.name||"",url:i.url||"",sort:i.sort||0,active:1})}else if(d)(s=(0,a.toJS)(n)).base[d]?s.base[d]=Object.assign({},s.base[d],{sort:i.sort}):s.base[d]={sort:i.sort};else{if(!i.name)return void(0,f.info)("名字不能为空");if(!i.url)return void(0,f.info)("网址不能为空");var l=(s=(0,a.toJS)(n)).custom[o].findIndex((function(e){return e.uuid===u}));s.custom[o][l]&&(s.custom[o][l]=Object.assign({},s.custom[o][l],i))}e.setState({data:s}),e.closeEdit(),e.updateOrigin(),(0,p.t)("自定义源头.保存源头",{type:o})})),(0,c.default)((0,i.default)(e),"disableItem",(function(s){var t=s.id,r=s.uuid,n=s.type;if(n){var o=e.state.data,i=(0,a.toJS)(o);if(t)i.base[t]?i.base[t]=Object.assign({},i.base[t],{active:0}):i.base[t]={active:0};else{var d=i.custom[n].find((function(e){return e.uuid===r}));d&&(d.active=0)}e.setState({data:i}),e.updateOrigin(),(0,p.t)("自定义源头.停用源头",{type:n})}})),(0,c.default)((0,i.default)(e),"activeItem",(function(s){var t=s.id,r=s.uuid,n=s.type;if(n){var o=e.state.data,i=(0,a.toJS)(o);if(t)i.base[t]?i.base[t]=Object.assign({},i.base[t],{active:1}):i.base[t]={active:1};else{var d=i.custom[n].find((function(e){return e.uuid===r}));d&&(d.active=1)}e.setState({data:i}),e.updateOrigin(),(0,p.t)("自定义源头.启用源头",{type:n})}})),(0,c.default)((0,i.default)(e),"deleteItem",(function(s){var t=s.uuid,r=s.type;if(t&&r){var n=e.state.data,o=(0,a.toJS)(n);o.custom[r]=o.custom[r].filter((function(e){return e.uuid!==t})),e.setState({data:o}),e.updateOrigin()}})),(0,c.default)((0,i.default)(e),"go",(function(e){var s=e.type,t=e.url;if(s&&t){var r=j.TYPES_DS.find((function(e){return e.type===s})).test,n=(0,g.replaceOriginUrl)(t,r);if(n){var o=m.systemStore.setting.openInfo;o&&(0,f.copy)(n,"已复制地址"),setTimeout((function(){try{(0,f.open)(n)}catch(e){(0,f.info)("网址解析出错, 请检查")}}),o?1600:0)}}})),e}return(0,n.default)(t)}(b.default)},"./src/screens/user/origin-setting/store/computed.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n,o=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),a=t("./node_modules/mobx/dist/mobx.esm.js"),m=t("./src/stores/index.ts"),f=t("./src/screens/user/origin-setting/utils.ts"),p=r(t("./src/screens/user/origin-setting/store/state.ts"));function j(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.default)(e);if(s){var n=(0,l.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,u.default)(this,t)}}s.default=(n=function(e){(0,d.default)(t,e);var s=j(t);function t(){return(0,o.default)(this,t),s.apply(this,arguments)}return(0,i.default)(t,[{key:"data",get:function(){return(0,f.getOriginConfig)(this.state.data)}},{key:"isLogin",get:function(){return!!m.userStore.userInfo.id}}]),t}(p.default),(0,c.default)(n.prototype,"data",[a.computed],Object.getOwnPropertyDescriptor(n.prototype,"data"),n.prototype),(0,c.default)(n.prototype,"isLogin",[a.computed],Object.getOwnPropertyDescriptor(n.prototype,"isLogin"),n.prototype),n)},"./src/screens/user/origin-setting/store/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.STATE=s.NAMESPACE=s.EXCLUDE_STATE=void 0;var r=t("./src/screens/user/origin-setting/ds.ts"),n=(s.NAMESPACE="Screen"+r.COMPONENT,s.EXCLUDE_STATE={data:{base:{},custom:{anime:[],hanime:[],manga:[],wenku:[],music:[],game:[],real:[]}},edit:{type:"",item:{id:"",uuid:"",name:"",url:"",sort:0,active:1}}});s.STATE=Object.assign({active:!0},n,{_loaded:!1})},"./src/screens/user/origin-setting/store/index.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=n(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=n(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=n(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),u=n(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=n(t("./node_modules/@babel/runtime/helpers/inherits.js")),c=n(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=n(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=n(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=t("./node_modules/mobx/dist/mobx.esm.js"),p=t("./src/stores/index.ts"),j=t("./src/utils/index.ts"),g=n(t("./src/screens/user/origin-setting/store/action.ts")),b=t("./src/screens/user/origin-setting/store/ds.ts");function y(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,a.default)(e);if(s){var n=(0,a.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,c.default)(this,t)}}s.default=function(e){(0,l.default)(t,e);var s=y(t);function t(){var e;(0,d.default)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e=s.call.apply(s,[this].concat(i)),(0,m.default)((0,u.default)(e),"init",(0,o.default)(r.mark((function s(){var t;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getStorage(b.NAMESPACE);case 2:if(s.t0=s.sent,s.t0){s.next=5;break}s.t0={};case 5:t=s.t0,e.setState({data:(0,f.toJS)(p.subjectStore.origin),active:(null==t?void 0:t.active)||!1,_loaded:(0,j.getTimestamp)()});case 7:case"end":return s.stop()}}),s)})))),e}return(0,i.default)(t)}(g.default)},"./src/screens/user/origin-setting/store/state.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),u=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=t("./node_modules/mobx/dist/mobx.esm.js"),m=r(t("./src/utils/store/index.ts")),f=t("./src/screens/user/origin-setting/store/ds.ts");function p(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,l.default)(e);if(s){var n=(0,l.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,u.default)(this,t)}}s.default=function(e){(0,d.default)(t,e);var s=p(t);function t(){var e;(0,o.default)(this,t);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return e=s.call.apply(s,[this].concat(n)),(0,c.default)((0,i.default)(e),"state",(0,a.observable)(f.STATE)),(0,c.default)((0,i.default)(e),"save",(function(){return e.saveStorage(f.NAMESPACE,f.EXCLUDE_STATE)})),e}return(0,n.default)(t)}(m.default)},"./src/screens/user/origin-setting/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{hd:{marginVertical:r._.sm},scrollView:{paddingTop:r._.md,paddingHorizontal:r._.wind,paddingBottom:r._.window.height/3},ft:{marginVertical:r._.lg}}}))}}]);