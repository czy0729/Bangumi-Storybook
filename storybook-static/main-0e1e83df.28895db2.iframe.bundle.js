(self.webpackChunkweb=self.webpackChunkweb||[]).push([[54],{"./src/screens/home/catalogs/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SubjectCatalogs=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/catalogs/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/SubjectCatalogs",component:r.default},t.SubjectCatalogs=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("SubjectCatalogs")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('SubjectCatalogs')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/characters/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Characters=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/characters/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Characters",component:r.default},t.Characters=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Characters")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Characters')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/episodes/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Episodes=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/episodes/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Episodes",component:r.default},t.Episodes=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Episodes")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Episodes')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/mono/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Mono=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/mono/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Mono",component:r.default},t.Mono=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Mono")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Mono')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/persons/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Persons=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/persons/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Persons",component:r.default},t.Persons=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Persons")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Persons')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/preview/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Preview=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/preview/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Preview",component:r.default},t.Preview=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Preview")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Preview')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/rating/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Rating=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/rating/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Rating",component:r.default},t.Rating=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Rating")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Rating')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/subject/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Subject=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/subject/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Subject",component:r.default},t.Subject=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Subject")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Subject')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/tag/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Tag=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/tag/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Tag",component:r.default},t.Tag=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Tag")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Tag')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/typerank/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Typerank=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/typerank/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Typerank",component:r.default},t.Typerank=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Typerank")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Typerank')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/v2/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Home=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/v2/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Home",component:r.default},t.Home=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Home")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Home')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/voices/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Voices=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/voices/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Voices",component:r.default},t.Voices=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Voices")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Voices')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/wiki/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SubjectWiki=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/wiki/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/SubjectWiki",component:r.default},t.SubjectWiki=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("SubjectWiki")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('SubjectWiki')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/works/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Works=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/home/works/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/Works",component:r.default},t.Works=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("Works")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Works')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/login/assist/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LoginAssist=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/login/assist/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/LoginAssist",component:r.default},t.LoginAssist=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("LoginAssist")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('LoginAssist')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/login/token/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LoginToken=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/login/token/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/LoginToken",component:r.default},t.LoginToken=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("LoginToken")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('LoginToken')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/login/v2/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LoginV2=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=o(s("./src/screens/login/v2/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),o=(t.default={title:"screens/LoginV2",component:r.default},t.LoginV2=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(r.default,Object.assign({},(0,n.getStorybookArgs)("LoginV2")))})})});o.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('LoginV2')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},o.parameters)},"./src/screens/home/catalogs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=void 0;t.STATE={ota:{},_loaded:!1}},"./src/screens/home/catalogs/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/catalogs/header/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,d.jsx)(n.Header,{title:null!=(t=s.params)&&t.name?"包含"+s.params.name+"的目录":"条目目录",alias:"条目目录",hm:[s.url,"SubjectCatalogs"],headerTitleStyle:c.styles.title,headerRight:function(){return(0,d.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("条目目录.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,d.jsx)(n.Heatmap,{id:"条目目录.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/catalogs/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/catalogs/header/index.tsx#header"})}catch(e){}},"./src/screens/home/catalogs/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}})},"./src/screens/home/catalogs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/catalogs/header/index.tsx")),a=o(s("./src/screens/home/catalogs/list/index.tsx")),o=o(s("./src/screens/home/catalogs/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(o.default,function(e,t){var s=t.$;return(0,c.useRunAfter)(function(){s.init()}),(0,c.useObserver)(function(){return(0,l.jsxs)(n.Component,{id:"screen-subject-catalogs",children:[(0,l.jsx)(d.default,{}),(0,l.jsxs)(n.Page,{loaded:s.list._loaded,children:[(0,l.jsx)(a.default,{}),(0,l.jsx)(n.Heatmap,{bottom:r._.bottom,id:"条目目录",screen:"SubjectCatalogs"})]})]})})});try{catalogs.displayName="catalogs",catalogs.__docgenInfo={description:"",displayName:"catalogs",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/catalogs/index.tsx#catalogs"]={docgenInfo:catalogs.__docgenInfo,name:"catalogs",path:"src/screens/home/catalogs/index.tsx#catalogs"})}catch(e){}},"./src/screens/home/catalogs/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js"),c={id:"条目目录.跳转"};t.default=(0,o.ob)(function(e){var t=e.item,e=e.index;return(0,i.jsx)(r.ItemCatalog,{event:c,isUser:!0,id:t.id,name:t.userName,title:t.title,children:!e&&(0,i.jsx)(n.Heatmap,{id:"条目目录.跳转"})})});try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/catalogs/item/index.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"src/screens/home/catalogs/item/index.tsx#item"})}catch(e){}},"./src/screens/home/catalogs/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),c=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/catalogs/item/index.tsx")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)(function(e,t){return t=t.$,(0,a.jsx)(n.ListView,{contentContainerStyle:r._.container.bottom,keyExtractor:i.keyExtractor,data:t.list,lazy:4,renderItem:l,scrollToTop:!0,onHeaderRefresh:t.onHeaderRefresh,onFooterRefresh:t.fetchSubjectCatalogs})});function l(e){var t=e.item,e=e.index;return(0,a.jsx)(d.default,{item:t,index:e})}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/catalogs/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/catalogs/list/index.tsx#list"})}catch(e){}},"./src/screens/home/catalogs/store.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),b=s("./src/utils/fetch/index.ts"),_=s("./src/utils/kv/index.ts"),y=s("./src/constants/index.ts"),x=s("./src/screens/home/catalogs/ds.ts");function g(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var v,O=[];t.default=(s=o.default,(0,a.default)(S,s),v=g(S),(0,n.default)(S,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"url",get:function(){return(0,y.HTML_SUBJECT_CATALOGS)(this.subjectId)}},{key:"subjectCatalogs",get:function(){return j.subjectStore.subjectCatalogs(this.subjectId)}},{key:"list",get:function(){return this.subjectCatalogs._loaded?this.subjectCatalogs:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):y.LIST_EMPTY}},{key:"catalogDetail",value:function(e){return(0,f.computed)(function(){return j.discoveryStore.catalogDetail(e)}).get()}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){return"subject-catalogs_"+this.subjectId}}]),(0,p.default)((t=S).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,p.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,p.default)(t.prototype,"subjectCatalogs",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectCatalogs"),t.prototype),(0,p.default)(t.prototype,"list",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"list"),t.prototype),(0,p.default)(t.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,p.default)(t.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function S(){var n;(0,c.default)(this,S);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return n=v.call.apply(v,[this].concat(s)),(0,m.default)((0,d.default)(n),"params",void 0),(0,m.default)((0,d.default)(n),"state",(0,f.observable)(x.STATE)),(0,m.default)((0,d.default)(n),"init",function(){return n.setState({_loaded:!0}),n.fetchSubjectCatalogs(!0)}),(0,m.default)((0,d.default)(n),"onHeaderRefresh",function(){return n.fetchSubjectCatalogs(!0)}),(0,m.default)((0,d.default)(n),"fetchSubjectCatalogs",(0,i.default)(r.mark(function e(){var t,s,o=arguments;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=0<o.length&&void 0!==o[0]&&o[0])&&n.fetchThirdParty(),e.next=4,j.subjectStore.fetchSubjectCatalogs({subjectId:n.subjectId},t);case 4:return(t=e.sent).list.length&&n.thirdPartyKey in n.state.ota&&(s=(null==(s=n.ota)?void 0:s.ts)||0,604800<=(0,h.getTimestamp)()-s)&&n.updateThirdParty(),(0,b.queue)(t.list.map(function(e){return function(){return n.fetchCatalogDetail(e.id)}})),e.abrupt("return",!0);case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"fetchCatalogDetail",(t=(0,i.default)(r.mark(function e(t){var s;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j.discoveryStore.catalogDetail(t)._loaded||j.discoveryStore.catalogDetailFromOSS(t)._loaded)return e.abrupt("return",!0);e.next=2;break;case 2:return e.next=4,j.discoveryStore.fetchCatalogDetailFromOSS({id:t});case 4:if(e.sent)return e.abrupt("return",!0);e.next=7;break;case 7:return e.next=9,j.discoveryStore.fetchCatalogDetail({id:t});case 9:return s=e.sent,n.updateCatalogDetail(Object.assign({},s,{id:t})),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,m.default)((0,d.default)(n),"fetchThirdParty",(0,i.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ota||n.list._loaded){e.next=8;break}return e.next=3,(0,_.get)(n.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return n.setState({ota:(0,m.default)({},n.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:n.setState({ota:(0,m.default)({},n.thirdPartyKey,Object.assign({},t,{_loaded:(0,h.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"updateThirdParty",(0,i.default)(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(O.includes(n.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,_.update)(n.thirdPartyKey,{list:n.list.list}),O.push(n.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"updateCatalogDetail",function(l){setTimeout(function(){var e=l.id,t=l.title,s=l.info,o=l.content,n=l.avatar,r=l.nickname,i=l.userId,c=l.time,d=l.collect,a=l.list,s=(0,h.HTMLDecode)((0,h.removeHTMLTag)(s||o));(0,_.update)("catalog_"+e,{id:e,title:t,info:s?s.slice(0,40):"",avatar:n,nickname:r,userId:i,time:c,collect:d,list:a.filter(function(e,t){return t<3}).map(function(e){return{id:e.id,image:e.image,title:e.title,type:e.type,info:e.info,comment:e.comment}}),total:a.length})},2e3)}),n}},"./src/screens/home/characters/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.EXCLUDE_STATE=void 0;s=s("./src/stores/index.ts"),s=t.EXCLUDE_STATE={visibleBottom:s._.window.height};t.STATE=Object.assign({ota:{}},s,{_loaded:!1})},"./src/screens/home/characters/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,c.jsx)(n.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的角色":"更多角色",alias:"更多角色",hm:[s.url,"Characters"],headerRight:function(){return(0,c.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("更多角色.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,c.jsx)(n.Heatmap,{id:"更多角色.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/characters/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/characters/header/index.tsx#header"})}catch(e){}},"./src/screens/home/characters/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/characters/header/index.tsx")),a=o(s("./src/screens/home/characters/list/index.tsx")),o=o(s("./src/screens/home/characters/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(o.default,function(e,t){var s=t.$;return(0,c.useRunAfter)(function(){s.init()}),(0,c.useObserver)(function(){return(0,l.jsxs)(n.Component,{id:"screen-characters",children:[(0,l.jsx)(d.default,{}),(0,l.jsxs)(n.Page,{loaded:s.characters._loaded,children:[(0,l.jsx)(a.default,{}),(0,l.jsx)(n.Heatmap,{bottom:r._.bottom,id:"更多角色",screen:"Characters"})]})]})})});try{characters.displayName="characters",characters.__docgenInfo={description:"",displayName:"characters",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/characters/index.tsx#characters"]={docgenInfo:characters.__docgenInfo,name:"characters",path:"src/screens/home/characters/index.tsx#characters"})}catch(e){}},"./src/screens/home/characters/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js"),d={id:"更多角色.跳转"};t.default=(0,o.obc)(function(e,t){return t=t.$,(0,c.jsx)(n.PaginationList2,{contentContainerStyle:r._.container.bottom,keyExtractor:i.keyExtractor,data:t.characters.list,limit:12,scrollToTop:!0,renderItem:a,scrollEventThrottle:4,onScroll:t.onScroll})});function a(e){var t=e.item,e=e.index;return(0,c.jsx)(n.ItemCharacter,Object.assign({style:r._.container.item,index:e,event:d},t))}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/characters/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/characters/list/index.tsx#list"})}catch(e){}},"./src/screens/home/characters/store.ts":(e,t,s)=>{var n=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),b=s("./src/utils/kv/index.ts"),_=s("./src/constants/index.ts"),y=s("./src/screens/home/characters/ds.ts");function x(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var g,v=[];t.default=(s=o.default,(0,a.default)(O,s),g=x(O),(0,c.default)(O,[{key:"subjectId",get:function(){var e=this.params.subjectId;return void 0===e?"":e}},{key:"characters",get:function(){var e=j.monoStore.characters(this.subjectId);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):_.LIST_EMPTY}},{key:"url",get:function(){return(0,_.HTML_SUBJECT_CHARACTERS)(this.subjectId)}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){return"characters_"+this.subjectId}}]),(0,p.default)((t=O).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,p.default)(t.prototype,"characters",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"characters"),t.prototype),(0,p.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,p.default)(t.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,p.default)(t.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function O(){var o;(0,i.default)(this,O);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o=g.call.apply(g,[this].concat(t)),(0,m.default)((0,d.default)(o),"params",void 0),(0,m.default)((0,d.default)(o),"state",(0,f.observable)(y.STATE)),(0,m.default)((0,d.default)(o),"init",function(){return o.setState({_loaded:!0}),o.fetchCharacters()}),(0,m.default)((0,d.default)(o),"fetchCharacters",(0,r.default)(n.mark(function e(){var t,s;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.fetchThirdParty(),e.next=3,j.monoStore.fetchCharacters({subjectId:o.subjectId});case 3:return(t=e.sent).list.length&&o.thirdPartyKey in o.state.ota&&(s=(null==(s=o.ota)?void 0:s.ts)||0,604800<=(0,h.getTimestamp)()-s)&&o.updateThirdParty(),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(o),"fetchThirdParty",(0,r.default)(n.mark(function e(){var t;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.ota||o.characters._loaded){e.next=8;break}return e.next=3,(0,b.get)(o.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return o.setState({ota:(0,m.default)({},o.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:o.setState({ota:(0,m.default)({},o.thirdPartyKey,Object.assign({},t,{_loaded:(0,h.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(o),"updateThirdParty",(0,r.default)(n.mark(function e(){return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.includes(o.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,b.update)(o.thirdPartyKey,{list:o.characters.list}),v.push(o.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(o),"onScroll",h.updateVisibleBottom.bind((0,d.default)(o))),o}},"./src/screens/home/episodes/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,c.jsx)(n.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的章节":"章节",alias:"章节",hm:[s.url,"Episodes"],headerRight:function(){return(0,c.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("章节.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,c.jsx)(n.Heatmap,{id:"章节.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/episodes/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/episodes/header/index.tsx#header"})}catch(e){}},"./src/screens/home/episodes/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/episodes/header/index.tsx")),a=o(s("./src/screens/home/episodes/list/index.tsx")),o=o(s("./src/screens/home/episodes/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(o.default,function(e,t){var s=t.$;return(0,c.useRunAfter)(function(){s.init()}),(0,c.useObserver)(function(){return(0,l.jsxs)(n.Component,{id:"screen-episodes",children:[(0,l.jsx)(d.default,{}),(0,l.jsxs)(n.Page,{loaded:s.subject._loaded,children:[(0,l.jsx)(a.default,{}),(0,l.jsx)(n.Heatmap,{bottom:r._.bottom,id:"章节",screen:"Episodes"})]})]})})});try{episodes.displayName="episodes",episodes.__docgenInfo={description:"",displayName:"episodes",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/episodes/index.tsx#episodes"]={docgenInfo:episodes.__docgenInfo,name:"episodes",path:"src/screens/home/episodes/index.tsx#episodes"})}catch(e){}},"./src/screens/home/episodes/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./node_modules/mobx/dist/mobx.esm.js"),u=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),f=s("./src/utils/fetch/index.ts"),j=s("./src/constants/index.ts"),h=s("./src/screens/home/episodes/list/styles.tsx"),b=s("./node_modules/react/jsx-runtime.js"),_=m._.r(128),y=.56*_;t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation,n=(0,h.memoStyles)(),t=s.eps.slice().sort(function(e,t){return(0,p.desc)(e,t,function(e){return"NA"===e.status?0:e.type||10})}),r=(0,l.toJS)(s.params.epsThumbs||[]),i=(s=s.params).filterEps,c=void 0===i?0:i,d=void 0===(i=s.epsThumbsHeader)?{}:i;return(0,b.jsx)(u.ScrollView,{style:m._.container.plain,contentContainerStyle:m._.container.bottom,scrollToTop:!0,children:t.map(function(e,t){return(0,b.jsxs)(u.Touchable,{animate:!0,onPress:function(){(0,f.t)("章节.跳转",{to:"Topic",topicId:"ep/"+e.id}),o.push("Topic",{topicId:"ep/"+e.id,_title:"ep"+e.sort+"."+e.name,_desc:"时长:"+e.duration+" / 首播:"+e.airdate+"<br />"+e.desc})},children:[(0,b.jsxs)(u.Flex,{style:n.item,children:[(0,b.jsx)(u.Flex.Item,{children:(0,b.jsxs)(u.Flex,{align:"start",children:[(0,b.jsx)(a.default,{style:(0,p.stl)(n.status,"Air"===e.status&&n.statusPrimary,"Today"===e.status&&n.statusSuccess)}),(0,b.jsxs)(u.Flex.Item,{children:[(0,b.jsxs)(u.Text,{bold:!0,children:[e.sort,". ",(0,p.HTMLDecode)((0,p.cnjp)(e.name_cn,e.name)),!!e.comment&&(0,b.jsxs)(u.Text,{type:"main",size:11,lineHeight:14,children:[" ","+",e.comment]})]}),(0,b.jsxs)(u.Text,{style:m._.mt.sm,size:11,type:"sub",children:["首播: ",e.airdate||"-"," / 时长: ",e.duration||"-"]})]})]})}),!j.STORYBOOK&&!!r[t+c]&&(0,b.jsx)(a.default,{style:m._.ml.sm,children:(0,b.jsx)(u.Image,{src:r[t],size:_,height:y,radius:!0,headers:d,onPress:function(){return(0,p.showImageViewer)(r.map(function(e){return{url:e.split("@")[0],headers:d}}),t)}})})]}),!t&&(0,b.jsx)(u.Heatmap,{id:"章节.跳转"})]},e.id)})})});try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/episodes/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/episodes/list/index.tsx#list"})}catch(e){}},"./src/screens/home/episodes/list/styles.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{item:{paddingVertical:o._.sm+2,paddingHorizontal:o._.wind},status:{width:6,height:6,marginTop:o._.r(6),marginRight:o._.sm,backgroundColor:o._.colorSub,borderRadius:3},statusSuccess:{backgroundColor:o._.colorSuccess},statusPrimary:{backgroundColor:o._.colorPrimary}}})},"./src/screens/home/episodes/store.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),m=s("./node_modules/mobx/dist/mobx.esm.js"),p=s("./src/stores/index.ts"),o=o(s("./src/utils/store/index.ts")),f=s("./src/constants/index.ts");function j(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var h;t.default=(s=o.default,(0,c.default)(b,s),h=j(b),(0,r.default)(b,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"subject",get:function(){return p.subjectStore.subject(this.subjectId)}},{key:"eps",get:function(){var e,s;return this.subject._loaded?(e=this.params.filterEps,(s=void 0===e?0:e)?(this.subject.eps||[]).filter(function(e,t){return s<t}):this.subject.eps||[]):[]}},{key:"url",get:function(){return f.HOST+"/subject/"+this.subjectId+"/ep"}}]),(0,u.default)((t=b).prototype,"subjectId",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,u.default)(t.prototype,"subject",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"subject"),t.prototype),(0,u.default)(t.prototype,"eps",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"eps"),t.prototype),(0,u.default)(t.prototype,"url",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),t);function b(){var e;(0,n.default)(this,b);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=h.call.apply(h,[this].concat(s)),(0,l.default)((0,i.default)(e),"params",void 0),(0,l.default)((0,i.default)(e),"init",function(){return p.subjectStore.fetchSubject(e.subjectId)}),e}},"./src/screens/home/mono/component/collabs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Collabs")},"./src/screens/home/mono/component/collabs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),i=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/constants/index.ts"),m=s("./src/screens/home/mono/component/collabs/ds.ts"),p=s("./src/screens/home/mono/component/collabs/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation;return null!=(t=s.mono.collabs)&&t.length?(0,f.jsxs)(c.InView,{style:p.styles.container,children:[(0,f.jsx)(c.SectionTitle,{style:d._.container.wind,right:(0,f.jsx)(i.Flex,{children:(0,f.jsx)(i.Touchable,{style:p.styles.touch,onPress:function(){o.push("WebBrowser",{url:u.HOST+"/"+s.monoId+"/collabs",title:s.nameTop+"的合作"}),(0,l.t)("人物.跳转",{from:"合作",to:"WebBrowser",monoId:s.monoId})},children:(0,f.jsxs)(i.Flex,{children:[(0,f.jsx)(i.Text,{style:d._.ml.sm,type:"sub",children:"全部"}),(0,f.jsx)(i.Iconfont,{style:d._.ml.xs,name:"md-open-in-new",color:d._.colorSub,size:16})]})})}),children:"合作"}),(0,f.jsx)(n.default,Object.assign({style:d._.mt.md,contentContainerStyle:d._.container.wind,horizontal:!0},u.SCROLL_VIEW_RESET_PROPS,{children:t.map(function(e){return(0,f.jsx)(i.Touchable,{style:p.styles.item,animate:!0,onPress:function(){(0,a.appNavigate)(e.href,o),(0,l.t)("人物.跳转",{from:"合作",to:"Mono",monoId:s.monoId,href:e.href})},children:(0,f.jsxs)(i.Flex,{children:[(0,f.jsx)(c.Avatar,{name:e.name,src:e.cover}),(0,f.jsxs)(r.default,{style:d._.ml.sm,children:[(0,f.jsx)(i.Flex,{children:(0,f.jsx)(i.Text,{size:13,bold:!0,children:e.name})}),(0,f.jsx)(i.Text,{style:d._.mt.xs,size:10,type:"sub",bold:!0,children:e.count})]})]})},e.href)})})),(0,f.jsx)(c.PreventTouchPlaceholder,{})]}):null},m.COMPONENT);try{collabs.displayName="collabs",collabs.__docgenInfo={description:"",displayName:"collabs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/collabs/index.tsx#collabs"]={docgenInfo:collabs.__docgenInfo,name:"collabs",path:"src/screens/home/mono/component/collabs/index.tsx#collabs"})}catch(e){}},"./src/screens/home/mono/component/collabs/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:84,marginTop:s._.md,marginBottom:s._.lg},item:{paddingRight:s._.sm,paddingBottom:s._.xs,marginRight:s._.sm},touch:{paddingHorizontal:s._.xs,marginRight:-s._.xs,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/home/mono/component/collected/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),r=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),i=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/constants/index.ts"),u=s("./src/screens/home/mono/component/collected/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation;return null!=(t=s.mono.collected)&&t.length?(0,m.jsxs)(c.InView,{style:u.styles.container,children:[(0,m.jsx)(c.SectionTitle,{style:d._.container.wind,right:(0,m.jsx)(i.Flex,{children:(0,m.jsx)(i.Touchable,{style:u.styles.touch,onPress:function(){o.push("WebBrowser",{url:l.HOST+"/"+s.monoId+"/collections",title:"谁收藏了"+s.nameTop}),(0,a.t)("人物.跳转",{from:"谁收藏了",to:"WebBrowser",monoId:s.monoId})},children:(0,m.jsxs)(i.Flex,{children:[(0,m.jsx)(i.Text,{style:d._.ml.sm,type:"sub",children:"全部"}),(0,m.jsx)(i.Iconfont,{style:d._.ml.xs,name:"md-open-in-new",color:d._.colorSub,size:16})]})})}),children:"谁收藏了"}),(0,m.jsx)(n.default,Object.assign({style:d._.mt.md,contentContainerStyle:d._.container.wind,horizontal:!0},l.SCROLL_VIEW_RESET_PROPS,{children:t.map(function(e){return(0,m.jsx)(i.Touchable,{style:u.styles.item,animate:!0,onPress:function(){o.push("Zone",{userId:e.userId,_name:e.name}),(0,a.t)("人物.跳转",{from:"谁收藏了",to:"Zone",monoId:s.monoId,userId:e.userId})},children:(0,m.jsxs)(i.Flex,{children:[(0,m.jsx)(i.UserStatus,{userId:e.userId,children:(0,m.jsx)(c.Avatar,{name:e.name,src:e.avatar})}),(0,m.jsxs)(r.default,{style:u.styles.body,children:[(0,m.jsx)(i.Text,{size:13,bold:!0,numberOfLines:1,children:e.name}),(0,m.jsx)(i.Text,{style:d._.mt.xs,size:10,type:"sub",numberOfLines:1,children:e.last})]})]})},e.userId)})})),(0,m.jsx)(c.PreventTouchPlaceholder,{})]}):null});try{collected.displayName="collected",collected.__docgenInfo={description:"",displayName:"collected",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/collected/index.tsx#collected"]={docgenInfo:collected.__docgenInfo,name:"collected",path:"src/screens/home/mono/component/collected/index.tsx#collected"})}catch(e){}},"./src/screens/home/mono/component/collected/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:84,marginTop:s._.md,marginBottom:s._.md},item:{paddingRight:s._.sm,paddingBottom:s._.xs,marginRight:s._.sm},body:{maxWidth:96,marginLeft:s._.sm},touch:{paddingHorizontal:s._.xs,marginRight:-s._.xs,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/home/mono/component/content/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Content")},"./src/screens/home/mono/component/content/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/mono/component/content/ds.ts"),l=s("./src/screens/home/mono/component/content/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation;return s.info?(t=s.state.translateResult).length?(0,u.jsx)(n.default,{style:l.styles.content,children:(0,u.jsx)(n.default,{children:t.map(function(e,t){return(0,u.jsxs)(n.default,{children:[(0,u.jsx)(r.Text,{style:c._.mt.md,size:13,lineHeight:14,type:"sub",children:e.src.trim()}),(0,u.jsx)(r.Text,{style:c._.mt.xs,size:15,lineHeight:17,children:e.dst.trim()})]},t)})})}):(0,u.jsxs)(n.default,{style:l.styles.content,children:[(0,u.jsx)(r.RenderHtml,{html:s.info,onLinkPress:function(e){return(0,d.appNavigate)(e,o)}}),!(0,d.isChineseParagraph)((0,d.removeURLs)((0,d.removeHTMLTag)(s.info)),.5)&&(0,u.jsx)(n.default,{style:l.styles.iconTranslate,children:(0,u.jsx)(i.IconTouchable,{name:"md-g-translate",size:18,onPress:function(){return s.doTranslate("translateResult",s.info)}})})]}):null},a.COMPONENT);try{content.displayName="content",content.__docgenInfo={description:"",displayName:"content",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/content/index.tsx#content"]={docgenInfo:content.__docgenInfo,name:"content",path:"src/screens/home/mono/component/content/index.tsx#content"})}catch(e){}},"./src/screens/home/mono/component/content/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({content:{paddingHorizontal:s._.xs,marginTop:s._.md},iconTranslate:{position:"absolute",zIndex:1,top:0,right:-4}})},"./src/screens/home/mono/component/detail/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Detail")},"./src/screens/home/mono/component/detail/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/screens/home/mono/component/detail/ds.ts"),l=s("./src/screens/home/mono/component/detail/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation;return s.detail?(t=s.state.translateResultDetail).length?(0,u.jsx)(n.default,{style:l.styles.content,children:(0,u.jsx)(n.default,{children:t.map(function(e,t){return(0,u.jsxs)(n.default,{children:[(0,u.jsx)(r.Text,{style:c._.mt.md,size:13,lineHeight:14,type:"sub",children:e.src.trim()}),(0,u.jsx)(r.Text,{style:c._.mt.xs,size:15,lineHeight:17,children:e.dst.trim()})]},t)})})}):(0,u.jsxs)(n.default,{style:l.styles.content,children:[(0,u.jsx)(r.Expand,{ratio:2,children:(0,u.jsx)(r.RenderHtml,{style:c._.mt.lg,html:s.detail,onLinkPress:function(e){return(0,d.appNavigate)(e,o)}})}),!(0,d.isChineseParagraph)(s.detail)&&(0,u.jsx)(n.default,{style:l.styles.iconTranslate,children:(0,u.jsx)(i.IconTouchable,{name:"md-g-translate",size:18,onPress:function(){return s.doTranslate("translateResultDetail",s.detail)}})})]}):null},a.COMPONENT);try{detail.displayName="detail",detail.__docgenInfo={description:"",displayName:"detail",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/detail/index.tsx#detail"]={docgenInfo:detail.__docgenInfo,name:"detail",path:"src/screens/home/mono/component/detail/index.tsx#detail"})}catch(e){}},"./src/screens/home/mono/component/detail/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({content:{paddingHorizontal:s._.xs,marginTop:s._.md},iconTranslate:{position:"absolute",zIndex:1,top:0,right:-4}})},"./src/screens/home/mono/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Component")},"./src/screens/home/mono/component/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Extra");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},monoId:"",canICO:!1,icoUsers:void 0,doICO:function(){}}},"./src/screens/home/mono/component/extra/extra.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),n=s("./src/screens/home/mono/component/extra/ds.ts"),u=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.navigation,s=e.monoId,o=e.canICO,n=e.icoUsers,r=e.doICO;return o?(0,u.jsx)(i.Touchable,{style:[d._.container.touch,d._.mr.sm],onPress:function(){(0,a.confirm)("花费10000cc启动ICO?",function(){return r(t)})},children:(0,u.jsxs)(i.Flex,{style:d._.mr.sm,children:[(0,u.jsx)(c.IconHeader,{name:"trophy",size:18}),(0,u.jsx)(i.Text,{size:13,children:"启动ICO"})]})}):(0,u.jsxs)(c.IconHeader,{style:d._.mr.sm,name:"trophy",size:18,onPress:function(){var e=n?"TinygrailICODeal":"TinygrailDeal";(0,l.t)("人物.跳转",{to:e,monoId:s}),t.push(e,{monoId:s})},children:[(0,u.jsx)(i.Heatmap,{right:173,id:"人物.启动ICO",transparent:!0}),(0,u.jsx)(i.Heatmap,{right:109,id:"人物.跳转",to:"TinygrailICODeal",alias:"ICO",transparent:!0}),(0,u.jsx)(i.Heatmap,{right:30,id:"人物.跳转",to:"TinygrailDeal",alias:"交易"})]})},n.DEFAULT_PROPS,n.COMPONENT_MAIN);t.default=s;try{extra.displayName="extra",extra.__docgenInfo={description:"",displayName:"extra",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},monoId:{defaultValue:null,description:"",name:"monoId",required:!0,type:{name:"MonoId"}},canICO:{defaultValue:null,description:"",name:"canICO",required:!0,type:{name:"boolean"}},icoUsers:{defaultValue:null,description:"",name:"icoUsers",required:!0,type:{name:"number"}},doICO:{defaultValue:null,description:"",name:"doICO",required:!0,type:{name:"(navigation: Navigation) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/extra/extra.tsx#extra"]={docgenInfo:extra.__docgenInfo,name:"extra",path:"src/screens/home/mono/component/extra/extra.tsx#extra"})}catch(e){}},"./src/screens/home/mono/component/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/mono/component/favor/index.tsx")),i=o(s("./src/screens/home/mono/component/extra/extra.tsx")),o=s("./src/screens/home/mono/component/extra/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)(function(e){var t=e.$,e=e.navigation;return(0,c.jsxs)(c.Fragment,{children:[t.monoId.includes("character")&&t.tinygrail&&(0,c.jsx)(i.default,{navigation:e,monoId:t.monoId,canICO:t.canICO,icoUsers:t.chara.users,doICO:t.doICO}),(0,c.jsx)(r.default,{$:t})]})},o.COMPONENT);try{extra.displayName="extra",extra.__docgenInfo={description:"",displayName:"extra",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenMono"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/extra/index.tsx#extra"]={docgenInfo:extra.__docgenInfo,name:"extra",path:"src/screens/home/mono/component/extra/index.tsx#extra"})}catch(e){}},"./src/screens/home/mono/component/favor/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Favor")},"./src/screens/home/mono/component/favor/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/mono/component/favor/ds.ts"),c=s("./src/screens/home/mono/component/favor/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ob)(function(e){return(e=e.$).mono.collectUrl?(0,d.jsxs)(n.Touchable,{style:c.styles.touch,onPress:e.doCollect,children:[(0,d.jsx)(n.Iconfont,{size:20,name:"md-favorite-outline",color:r._.colorTitle}),(0,d.jsx)(n.Heatmap,{id:"人物.收藏人物"}),(0,d.jsx)(n.Heatmap,{right:52,id:"人物.取消收藏人物",transparent:!0})]}):e.mono.eraseCollectUrl?(0,d.jsxs)(n.Touchable,{style:c.styles.touch,onPress:e.doEraseCollect,children:[(0,d.jsx)(n.Iconfont,{size:20,name:"md-favorite",color:r._.colorMain}),(0,d.jsx)(n.Heatmap,{id:"人物.取消收藏人物"})]}):null},i.COMPONENT);try{favor.displayName="favor",favor.__docgenInfo={description:"",displayName:"favor",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenMono"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/favor/index.tsx#favor"]={docgenInfo:favor.__docgenInfo,name:"favor",path:"src/screens/home/mono/component/favor/index.tsx#favor"})}catch(e){}},"./src/screens/home/mono/component/favor/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{paddingHorizontal:s._.sm,marginRight:6,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/home/mono/component/header-title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"HeaderTitle");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={tinygrail:!1,cover:"",nameTop:"",nameBottom:""}},"./src/screens/home/mono/component/header-title/header-title.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/mono/component/header-title/ds.ts"),a=s("./src/screens/home/mono/component/header-title/styles.ts"),l=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.tinygrail,s=e.cover,o=e.nameTop,e=e.nameBottom;return(0,l.jsxs)(n.Flex,{style:(0,c.stl)(a.styles.container,t&&a.styles.containerTinygrail),children:[!!s&&(0,l.jsx)(r.Cover,{size:a.styles.container.height,src:(0,c.getMonoCoverSmall)(s),radius:!0}),(0,l.jsxs)(n.Flex.Item,{style:i._.ml.sm,children:[(0,l.jsx)(n.Text,{size:13,numberOfLines:1,children:o}),!!e&&(0,l.jsx)(n.Text,{type:"sub",size:10,numberOfLines:1,children:e})]})]})},d.DEFAULT_PROPS,d.COMPONENT_MAIN);t.default=s;try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{tinygrail:{defaultValue:null,description:"",name:"tinygrail",required:!0,type:{name:"boolean"}},cover:{defaultValue:null,description:"",name:"cover",required:!0,type:{name:"string"}},nameTop:{defaultValue:null,description:"",name:"nameTop",required:!0,type:{name:"string"}},nameBottom:{defaultValue:null,description:"",name:"nameBottom",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/header-title/header-title.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/home/mono/component/header-title/header-title.tsx#headertitle"})}catch(e){}},"./src/screens/home/mono/component/header-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/mono/component/header-title/header-title.tsx")),o=s("./src/screens/home/mono/component/header-title/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e){return e=e.$,(0,i.jsx)(r.default,{cover:e.params._image||e.cover,tinygrail:e.tinygrail,nameTop:e.nameTop,nameBottom:e.nameBottom})},o.COMPONENT);try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenMono"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/header-title/index.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/home/mono/component/header-title/index.tsx#headertitle"})}catch(e){}},"./src/screens/home/mono/component/header-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{height:28,marginTop:s._.platforms(2,-6,-10,-4,-4),marginLeft:-s._.sm,marginRight:s._.lg},containerTinygrail:{marginRight:52}})},"./src/screens/home/mono/component/info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Info")},"./src/screens/home/mono/component/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),p=s("./src/utils/fetch/index.ts"),f=s("./src/constants/index.ts"),j=o(s("./src/screens/home/mono/component/collabs/index.tsx")),h=o(s("./src/screens/home/mono/component/collected/index.tsx")),b=o(s("./src/screens/home/mono/component/content/index.tsx")),_=o(s("./src/screens/home/mono/component/detail/index.tsx")),y=o(s("./src/screens/home/mono/component/jobs/index.tsx")),x=o(s("./src/screens/home/mono/component/voice/index.tsx")),g=o(s("./src/screens/home/mono/component/works/index.tsx")),o=s("./src/screens/home/mono/component/info/ds.ts"),v=s("./src/screens/home/mono/component/info/styles.ts"),O=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=t.$,o=t.navigation,t=(0,v.memoStyles)(),n=u._.r(.5*u._.window.contentWidth),r=s.monoId.includes("character/"),i=f.IOS?(0,f.API_MONO_COVER)(s.id,"large",r?"characters":"persons"):(0,m.getCoverLarge)(s.cover),c=s.params._count;return(0,O.jsxs)(d.default,{style:t.info,children:[(0,O.jsx)(a.HeaderPlaceholder,{}),(0,O.jsxs)(d.default,{style:t.container,children:[(0,O.jsxs)(a.Flex,{wrap:"wrap",children:[(0,O.jsxs)(a.Text,{size:20,bold:!0,children:[s.nameTop," "]}),(0,O.jsx)(a.Text,{type:"sub",lineHeight:20,bold:!0,children:s.nameBottom})]}),(0,O.jsxs)(a.Flex,{style:u._.mt.md,justify:"center",children:[(0,O.jsx)(a.Image,{src:i,autoSize:n,shadow:!0,imageViewer:!0,fallback:!0,event:{id:"人物.封面图查看",data:{monoId:s.monoId}}},i),(0,O.jsx)(a.Heatmap,{id:"人物.封面图查看"})]}),(0,O.jsx)(b.default,{}),(0,O.jsx)(_.default,{}),!!s.cn&&(0,O.jsx)(a.Flex,{style:u._.mt.lg,justify:"end",children:(0,O.jsx)(a.Touchable,{style:t.touch,onPress:s.onMore,children:(0,O.jsxs)(a.Flex,{children:[(0,O.jsx)(a.Text,{style:u._.ml.sm,type:"sub",children:"更多资料"}),(0,O.jsx)(a.Iconfont,{style:u._.ml.xs,name:"md-open-in-new",color:u._.colorSub,size:16})]})})})]}),(0,O.jsx)(a.Divider,{}),(0,O.jsx)(x.default,{style:u._.mt.md}),(0,O.jsx)(g.default,{style:u._.mt.md}),(0,O.jsx)(y.default,{style:u._.mt.md}),(0,O.jsx)(j.default,{style:u._.mt.md}),(0,O.jsx)(h.default,{style:u._.mt.md}),(0,O.jsxs)(l.SectionTitle,{style:t.title,right:(0,O.jsxs)(a.Touchable,{style:t.touchTopic,onPress:function(){(0,p.t)("人物.跳转",{to:"Topic",from:"去吐槽",monoId:s.monoId}),o.push("Topic",{topicId:(r?"crt":"prsn")+"/"+(s.monoId||"").match(/\d+/g)[0]})},children:[(0,O.jsxs)(a.Flex,{children:[(0,O.jsx)(a.Text,{type:"sub",children:"去吐槽"}),(0,O.jsx)(a.Iconfont,{name:"md-navigate-next"})]}),(0,O.jsx)(a.Heatmap,{id:"人物.跳转",from:"去吐槽"}),(0,O.jsx)(a.Heatmap,{right:66,id:"人物.跳转",to:"Topic",alias:"帖子",transparent:!0})]}),children:["吐槽"," ",!!c&&(0,O.jsxs)(a.Text,{size:12,type:"sub",lineHeight:24,children:[c,"+"]})]})]})},o.COMPONENT);try{info.displayName="info",info.__docgenInfo={description:"",displayName:"info",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/info/index.tsx#info"]={docgenInfo:info.__docgenInfo,name:"info",path:"src/screens/home/mono/component/info/index.tsx#info"})}catch(e){}},"./src/screens/home/mono/component/info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{info:{minHeight:1.2*o._.window.height},container:Object.assign({minHeight:.56*o._.window.height},o._.container.inner),loading:{minHeight:.48*o._.window.height},title:{paddingHorizontal:o._.wind,marginTop:o._.lg,marginBottom:o._.md},touch:{paddingHorizontal:o._.xs,marginRight:-o._.xs,borderRadius:o._.radiusSm,overflow:"hidden"},touchTopic:{paddingLeft:o._.xs,marginRight:-o._.sm,borderRadius:o._.radiusSm,overflow:"hidden"}}})},"./src/screens/home/mono/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.ITEM_HEIGHT=t.EVENT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Item"),t.EVENT={id:"人物.跳转",data:{from:"吐槽"}},t.ITEM_HEIGHT=94},"./src/screens/home/mono/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/mono/component/item/ds.ts"),c=s("./src/screens/home/mono/component/item/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.item,e=e.index,t=t.navigation,o=(0,c.memoStyles)();return(0,d.jsx)(n.InView,{y:1.5*r._.window.height+i.ITEM_HEIGHT*e,children:(0,d.jsx)(n.ItemPost,Object.assign({navigation:t,contentStyle:o.contentStyle,extraStyle:o.extraStyle,index:e,event:i.EVENT,matchLink:!1,expandNums:2},s))})},i.COMPONENT)},"./src/screens/home/mono/component/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{contentStyle:{paddingRight:o._.wind-o._.md},extraStyle:{marginRight:-2}}})},"./src/screens/home/mono/component/jobs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Jobs");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},style:{},jobs:[]},t.EVENT={id:"人物.跳转",data:{from:"出演"}}},"./src/screens/home/mono/component/jobs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/mono/component/jobs/jobs.tsx")),o=s("./src/screens/home/mono/component/jobs/ds.ts"),i=s("./src/screens/home/mono/component/jobs/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var e=e.style,s=t.$,t=t.navigation;return s.jobs.length?(0,c.jsx)(r.default,{styles:(0,i.memoStyles)(),navigation:t,style:e,jobs:s.jobs}):null},o.COMPONENT)},"./src/screens/home/mono/component/jobs/jobs.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=s("./src/constants/index.ts"),f=s("./src/screens/home/mono/ds.ts"),j=s("./src/screens/home/mono/component/jobs/ds.ts"),h=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var r=e.navigation,i=e.styles,t=e.style,e=e.jobs,c=u.systemStore.setting.avatarRound?f.COVER_WIDTH:u._.radiusSm;return(0,h.jsx)(l.InView,{style:i.inView,children:(0,h.jsx)(a.Expand,{ratio:2.8,children:(0,h.jsxs)(d.default,{style:(0,m.stl)(i.container,t),children:[(0,h.jsxs)(d.default,{children:[(0,h.jsx)(l.SectionTitle,{children:"出演"}),(0,h.jsx)(a.Heatmap,{id:"人物.跳转",from:"出演"})]}),(0,h.jsx)(d.default,{style:u._.mt.md,children:e.map(function(t,e){var s=(0,m.cnjp)(t.nameCn,t.name),o=(0,m.cnjp)(t.name,t.nameCn),n=p.MODEL_SUBJECT_TYPE.getTitle(t.type);return(0,h.jsx)(a.Touchable,{animate:!0,onPress:function(){(0,m.appNavigate)(t.href,r,{_jp:t.name,_cn:t.nameCn,_image:t.cover,_type:n},j.EVENT)},children:(0,h.jsxs)(a.Flex,{style:i.item,align:"start",children:[(0,h.jsx)(a.Cover,{src:t.cover,type:n,size:f.COVER_WIDTH,height:f.COVER_HEIGHT,radius:!0,shadow:!0}),!e&&(0,h.jsx)(a.Heatmap,{right:-32,id:"人物.跳转",to:"Subject",alias:"条目"}),(0,h.jsxs)(a.Flex.Item,{style:i.content,children:[(0,h.jsxs)(a.Flex,{align:"start",children:[(0,h.jsx)(a.Flex.Item,{children:(0,h.jsx)(a.Text,{size:12,bold:!0,numberOfLines:3,children:s})}),(0,h.jsx)(l.Tag,{style:i.tag,value:t.staff})]}),!!o&&o!==s&&(0,h.jsx)(a.Text,{style:u._.mt.xs,size:10,type:"sub",bold:!0,children:o}),(0,h.jsxs)(a.Flex,{style:u._.mt.md,children:[(0,h.jsxs)(a.Touchable,{animate:!0,onPress:function(){(0,m.appNavigate)(t.castHref,r,{_name:t.cast,_image:(0,m.getCoverMedium)(t.castCover)},j.EVENT)},children:[(0,h.jsxs)(a.Flex,{children:[!!t.castCover&&(0,h.jsx)(d.default,{style:u._.mr.sm,children:(0,h.jsx)(a.Cover,{size:u._.r(24),src:t.castCover,radius:c,shadow:!0})}),(0,h.jsxs)(a.Text,{size:11,bold:!0,children:[t.cast,!!t.castTag&&(0,h.jsxs)(a.Text,{size:8,type:"sub",lineHeight:11,bold:!0,children:[" ",t.castTag]})]})]}),!e&&(0,h.jsx)(a.Heatmap,{id:"人物.跳转",to:"Mono",alias:"人物"})]}),!(null==t||null==(s=t.cast2)||!s.castCover)&&(0,h.jsx)(a.Touchable,{style:i.castCover,onPress:function(){var e;return(0,m.appNavigate)(null==t||null==(e=t.cast2)?void 0:e.castHref,r,{_name:null==t||null==(e=t.cast2)?void 0:e.cast,_image:(0,m.getCoverMedium)(null==t||null==(e=t.cast2)?void 0:e.castCover)},j.EVENT)},children:(0,h.jsxs)(a.Flex,{children:[(0,h.jsx)(d.default,{style:u._.mr.xs,children:(0,h.jsx)(a.Cover,{size:u._.r(24),src:null==t||null==(o=t.cast2)?void 0:o.castCover,radius:c,shadow:!0})}),(0,h.jsxs)(a.Text,{size:11,bold:!0,children:[null==t||null==(e=t.cast2)?void 0:e.cast,!(null==t||null==(s=t.cast2)||!s.castTag)&&(0,h.jsxs)(a.Text,{size:8,type:"sub",lineHeight:11,bold:!0,children:[" ",null==t||null==(o=t.cast2)?void 0:o.castTag]})]})]})})]})]})]},t.href)})})})]})})})},j.DEFAULT_PROPS,j.COMPONENT_MAIN);t.default=s;try{jobs.displayName="jobs",jobs.__docgenInfo={description:"",displayName:"jobs",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ inView: { minHeight: number; }; container: { paddingLeft: number; paddingBottom: number; }; item: { paddingVertical: number; paddingRight: number; }; content: { paddingTop: number; paddingLeft: number; }; tag: { ...; }; castCover: { ...; }; }"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"ViewStyle"}},jobs:{defaultValue:null,description:"",name:"jobs",required:!0,type:{name:'DeepPartial<{ href: `/subject/${string}` | `/subject/${number}`; name: string; nameCn: string; cover: `//lain.bgm.tv/pic/cover/g/${string}.jpg`; staff: string; cast: string; castHref: string; castTag: string; castCover: string; cast2: { cast: string; castCover: string; castHref: string; castTag: string; }; type: "1"...'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/jobs/jobs.tsx#jobs"]={docgenInfo:jobs.__docgenInfo,name:"jobs",path:"src/screens/home/mono/component/jobs/jobs.tsx#jobs"})}catch(e){}},"./src/screens/home/mono/component/jobs/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{inView:{minHeight:180},container:{paddingLeft:o._.wind,paddingBottom:o._.md},item:{paddingVertical:o._.md,paddingRight:o._.wind},content:{paddingTop:2,paddingLeft:o._.sm+4},tag:{marginLeft:o._.sm},castCover:{marginRight:o._.xs,marginLeft:o._.md}}})},"./src/screens/home/mono/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"List")},"./src/screens/home/mono/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),c=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/mono/component/info/index.tsx")),a=s("./src/screens/home/mono/component/list/utils.tsx"),o=s("./src/screens/home/mono/component/list/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)(function(e,t){return e=e.onScroll,t=t.$,(0,l.jsx)(n.PaginationList2,{contentContainerStyle:r._.container.bottom,keyExtractor:i.keyExtractor,data:t.list,limit:20,scrollEventThrottle:4,scrollToTop:!0,ListHeaderComponent:(0,l.jsx)(d.default,{}),progressViewOffset:r._.ios(r._.statusBarHeight,r._.headerHeight),removeClippedSubviews:100<=t.list.length,renderItem:a.renderItem,onScroll:e,onHeaderRefresh:t.onHeaderRefresh})},o.COMPONENT)},"./src/screens/home/mono/component/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=i,o(s("./src/screens/home/mono/component/item/index.tsx"))),r=s("./node_modules/react/jsx-runtime.js");function i(e){var t=e.item,e=e.index;return(0,r.jsx)(n.default,{item:t,index:e})}try{i.displayName="renderItem",i.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/list/utils.tsx#renderItem"]={docgenInfo:i.__docgenInfo,name:"renderItem",path:"src/screens/home/mono/component/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/home/mono/component/section-right/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"SectionRight")},"./src/screens/home/mono/component/section-right/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),n=s("./src/screens/home/mono/component/section-right/ds.ts"),a=s("./src/screens/home/mono/component/section-right/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.event,o=e.text,n=e.to,r=t.$,i=t.navigation;return(0,l.jsx)(c.Touchable,{style:a.styles.touch,onPress:function(){(0,d.t)(s.id,Object.assign({},s.data,{to:n,monoId:r.monoId})),i.push(n,{monoId:r.monoId,name:r.cn||r.jp})},children:(0,l.jsxs)(c.Flex,{children:[(0,l.jsx)(c.Text,{type:"sub",children:o}),(0,l.jsx)(c.Iconfont,{name:"md-navigate-next"})]})})},n.COMPONENT)},"./src/screens/home/mono/component/section-right/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{paddingLeft:s._.xs,marginRight:s._.sm,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/home/mono/component/voice/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_WIDTH=t.EVENT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts"),s=t.COMPONENT=(0,n.rc)(s.COMPONENT,"Voice");t.COMPONENT_MAIN=(0,n.rc)(s),t.EVENT={id:"人物.跳转",data:{from:"最近演出角色"}},t.IMAGE_WIDTH=o._.r(40),t.DEFAULT_PROPS={navigation:{},styles:{},style:{},voices:[]}},"./src/screens/home/mono/component/voice/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/mono/component/voice/voice.tsx")),o=s("./src/screens/home/mono/component/voice/ds.ts"),i=s("./src/screens/home/mono/component/voice/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var e=e.style,s=t.$,t=t.navigation;return s.voices.length?(0,c.jsx)(r.default,{styles:(0,i.memoStyles)(),navigation:t,style:e,voices:s.voices}):null},o.COMPONENT)},"./src/screens/home/mono/component/voice/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:320,paddingLeft:o._.wind,paddingBottom:o._.md},section:{paddingRight:o._.wind-o._._wind},item:{paddingVertical:o._.md,paddingRight:o._.wind}}})},"./src/screens/home/mono/component/voice/voice.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),a=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),m=s("./src/screens/home/mono/ds.ts"),p=o(s("./src/screens/home/mono/component/section-right/index.tsx")),f=s("./src/screens/home/mono/component/voice/ds.ts"),j=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var r=e.navigation,i=e.styles,t=e.style,e=e.voices;return(0,j.jsxs)(a.InView,{style:(0,u.stl)(i.container,t),children:[(0,j.jsx)(a.SectionTitle,{style:i.section,right:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.default,{event:f.EVENT,text:"更多角色",to:"Voices"}),(0,j.jsx)(d.Heatmap,{id:"人物.跳转",to:"Voices",alias:"更多角色"})]}),children:"最近演出角色"}),(0,j.jsxs)(c.default,{style:l._.mt.md,children:[e.map(function(e){var t=(0,u.cnjp)(e.nameCn,e.name),s=(0,u.cnjp)(e.name,e.nameCn),o=(0,u.cnjp)(e.subjectNameCn,e.subjectName),n=(0,u.cnjp)(e.subjectName,e.subjectNameCn);return(0,j.jsxs)(d.Flex,{style:i.item,align:"start",children:[(0,j.jsx)(d.Flex.Item,{children:(0,j.jsx)(d.Touchable,{animate:!0,onPress:function(){(0,u.appNavigate)(e.href,r,{_jp:e.name,_cn:e.nameCn,_image:e.cover},f.EVENT)},children:(0,j.jsxs)(d.Flex,{align:"start",children:[(0,j.jsx)(d.Cover,{src:e.cover,size:f.IMAGE_WIDTH,radius:!0,shadow:!0}),(0,j.jsxs)(d.Flex.Item,{style:l._.ml.sm,children:[(0,j.jsx)(d.Text,{style:l._.mt.xxs,size:12,bold:!0,children:t}),!!s&&s!==t&&(0,j.jsx)(d.Text,{style:l._.mt.xs,size:10,type:"sub",bold:!0,children:s}),(0,j.jsx)(d.Flex,{style:l._.mt.xs,children:(0,j.jsx)(a.Tag,{value:e.staff})})]})]})})}),(0,j.jsx)(d.Flex.Item,{style:l._.ml.sm,flex:1.5,children:(0,j.jsx)(d.Touchable,{animate:!0,onPress:function(){(0,u.appNavigate)(e.subjectHref,r,{},f.EVENT)},children:(0,j.jsxs)(d.Flex,{align:"start",children:[(0,j.jsxs)(d.Flex.Item,{children:[(0,j.jsx)(d.Text,{style:l._.mt.xxs,size:12,align:"right",bold:!0,children:o}),!!n&&n!==o&&(0,j.jsx)(d.Text,{style:l._.mt.xs,size:10,type:"sub",align:"right",children:n})]}),!!e.subjectCover&&(0,j.jsx)(c.default,{style:l._.ml.sm,children:(0,j.jsx)(d.Cover,{src:e.subjectCover,size:.88*m.COVER_WIDTH,height:.88*m.COVER_HEIGHT,radius:!0,shadow:!0})})]})})})]},e.href)}),(0,j.jsx)(d.Heatmap,{id:"人物.跳转",from:"最近演出角色"})]})]})},f.DEFAULT_PROPS,f.COMPONENT_MAIN);t.default=o;try{voice.displayName="voice",voice.__docgenInfo={description:"",displayName:"voice",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingLeft: number; paddingBottom: number; }; section: { paddingRight: number; }; item: { paddingVertical: number; paddingRight: number; }; }"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"ViewStyle"}},voices:{defaultValue:null,description:"",name:"voices",required:!0,type:{name:"DeepPartial<{ href: `/character/${string}` | `/character/${number}`; name: string; nameCn: string; cover: `//lain.bgm.tv/pic/cover/s/${string}.jpg`; subjectHref: `/subject/${string}` | `/subject/${number}`; subjectName: string; subjectNameCn: string; subjectCover: `//lain.bgm.tv/pic/cover/g/${string}.jpg`; staff: st..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/voice/voice.tsx#voice"]={docgenInfo:voice.__docgenInfo,name:"voice",path:"src/screens/home/mono/component/voice/voice.tsx#voice"})}catch(e){}},"./src/screens/home/mono/component/works/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Works");t.COMPONENT_MAIN=(0,o.rc)(s),t.EVENT={id:"人物.跳转",data:{from:"最近参与"}},t.DEFAULT_PROPS={navigation:{},styles:{},style:{},works:[]}},"./src/screens/home/mono/component/works/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/mono/component/works/works.tsx")),o=s("./src/screens/home/mono/component/works/ds.ts"),i=s("./src/screens/home/mono/component/works/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var e=e.style,s=t.$,t=t.navigation;return s.works.length?(0,c.jsx)(r.default,{navigation:t,styles:(0,i.memoStyles)(),style:e,works:s.works}):null},o.COMPONENT)},"./src/screens/home/mono/component/works/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:320,paddingLeft:o._.wind,paddingBottom:o._.md},section:{paddingRight:o._.wind-o._._wind},item:{paddingVertical:o._.md,paddingRight:o._.wind},content:{marginLeft:o._.sm+4},tag:{marginTop:3,marginLeft:o._.md}}})},"./src/screens/home/mono/component/works/works.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),a=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=s("./src/screens/home/mono/ds.ts"),m=o(s("./src/screens/home/mono/component/section-right/index.tsx")),p=s("./src/screens/home/mono/component/works/ds.ts"),f=s("./node_modules/react/jsx-runtime.js"),o=(0,a.memo)(function(e){var s=e.navigation,o=e.styles,t=e.style,e=e.works;return(0,f.jsxs)(i.InView,{style:(0,d.stl)(o.container,t),children:[(0,f.jsx)(i.SectionTitle,{style:o.section,right:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.default,{event:p.EVENT,text:"更多作品",to:"Works"}),(0,f.jsx)(r.Heatmap,{id:"人物.跳转",to:"Works",alias:"更多作品"})]}),children:"最近参与"}),(0,f.jsxs)(n.default,{style:c._.mt.md,children:[e.map(function(e){var t=l.MODEL_SUBJECT_TYPE.getTitle(e.type);return(0,f.jsx)(r.Touchable,{animate:!0,onPress:function(){(0,d.appNavigate)(e.href,s,{_jp:e.name,_image:e.cover,_type:t},p.EVENT)},children:(0,f.jsxs)(r.Flex,{style:o.item,align:"start",children:[(0,f.jsx)(i.Cover,{size:u.COVER_WIDTH,height:u.COVER_HEIGHT,src:e.cover,radius:!0,shadow:!0,type:t}),(0,f.jsx)(r.Flex.Item,{style:o.content,children:(0,f.jsxs)(r.Flex,{align:"start",children:[(0,f.jsx)(r.Flex.Item,{children:(0,f.jsx)(r.Text,{style:c._.mt.xs,bold:!0,size:12,children:(0,d.findSubjectCn)(e.name)})}),(0,f.jsx)(i.Tag,{style:o.tag,value:e.staff})]})})]})},e.href)}),(0,f.jsx)(r.Heatmap,{id:"人物.跳转",from:"最近参与"})]})]})},p.DEFAULT_PROPS,p.COMPONENT_MAIN);t.default=o;try{works.displayName="works",works.__docgenInfo={description:"",displayName:"works",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingLeft: number; paddingBottom: number; }; section: { paddingRight: number; }; item: { paddingVertical: number; paddingRight: number; }; content: { marginLeft: number; }; tag: { ...; }; }"}},style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"ViewStyle"}},works:{defaultValue:null,description:"",name:"works",required:!0,type:{name:'DeepPartial<{ href: `/subject/${string}` | `/subject/${number}`; name: string; cover: `//lain.bgm.tv/pic/cover/g/${string}.jpg`; staff: string; type: "1" | "2" | "4" | "3" | "6"; }>[]'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/component/works/works.tsx#works"]={docgenInfo:works.__docgenInfo,name:"works",path:"src/screens/home/mono/component/works/works.tsx#works"})}catch(e){}},"./src/screens/home/mono/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT=void 0;s=s("./src/stores/index.ts"),t.COMPONENT="Mono",s=t.COVER_WIDTH=s._.r(64);t.COVER_HEIGHT=1.28*s},"./src/screens/home/mono/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/mono/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Header")},"./src/screens/home/mono/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/mono/component/extra/index.tsx")),a=o(s("./src/screens/home/mono/component/header-title/index.tsx")),o=s("./src/screens/home/mono/header/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var e=e.fixed,s=t.$,o=t.navigation;return(0,l.jsx)(n.Header,{mode:"transition",statusBarEventsType:"Topic",fixed:e,title:"人物",domTitle:s.jp||s.cn,hm:[s.url,"Mono"],headerTitle:(0,l.jsx)(a.default,{$:s,navigation:o}),headerRight:function(){return(0,l.jsxs)(n.Flex,{children:[(0,l.jsx)(d.default,{$:s,navigation:o}),(0,l.jsx)(n.Header.Popover,{data:["浏览器查看","复制链接","复制分享"],onSelect:function(e){switch((0,c.t)("人物.右上角菜单",{key:e}),e){case"浏览器查看":(0,r.open)(s.url);break;case"复制链接":(0,r.copy)(s.url,"已复制链接");break;case"复制分享":(0,r.copy)("【链接】"+(0,r.cnjp)(s.cn,s.jp)+" | Bangumi番组计划\n"+s.url,"已复制分享文案")}},children:(0,l.jsx)(n.Heatmap,{id:"人物.右上角菜单"})})]})}})},o.COMPONENT)},"./src/screens/home/mono/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useMonoPage=function(e){var t=e.$,e=((0,d.useRunAfter)(function(){t.init()}),(0,d.useViewport)()),s=e.visibleBottom,o=e.onScroll,e=((0,i.useEffect)(function(){t.setState({visibleBottom:s})},[t,s]),(0,c.useOnScroll)()),n=e.fixed,r=e.onScroll,e=(0,i.useCallback)(function(e){o(e),r(e)},[r,o]);return{fixed:n,onScroll:e}};var i=s("./node_modules/react/index.js"),c=s("./src/components/header/utils.tsx"),d=s("./src/utils/hooks/index.ts")},"./src/screens/home/mono/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/mono/component/list/index.tsx")),d=o(s("./src/screens/home/mono/header/index.tsx")),a=s("./src/screens/home/mono/hooks.ts"),o=o(s("./src/screens/home/mono/store/index.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ic)(o.default,function(e,t){var t=(0,a.useMonoPage)(t),s=t.fixed,o=t.onScroll;return(0,i.useObserver)(function(){return(0,l.jsxs)(n.Component,{id:"screen-mono",children:[(0,l.jsxs)(n.Page,{statusBarEvent:!1,children:[(0,l.jsx)(c.default,{onScroll:o}),(0,l.jsx)(n.Heatmap,{id:"人物",screen:"Mono"})]}),(0,l.jsx)(d.default,{fixed:s})]})})});try{mono.displayName="mono",mono.__docgenInfo={description:"",displayName:"mono",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/mono/index.tsx#mono"]={docgenInfo:mono.__docgenInfo,name:"mono",path:"src/screens/home/mono/index.tsx#mono"})}catch(e){}},"./src/screens/home/mono/store/action.ts":(e,t,s)=>{var c=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),d=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),h=s("./src/utils/fetch/index.ts"),b=s("./src/utils/webhooks/index.ts"),_=s("./src/constants/index.ts"),o=o(s("./src/screens/home/mono/store/fetch.ts"));function y(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=o?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var x;t.default=(s=o.default,(0,i.default)(g,s),x=y(g),(0,n.default)(g));function g(){var i;(0,a.default)(this,g);for(var t,s,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return i=x.call.apply(x,[this].concat(o)),(0,p.default)((0,l.default)(i),"onMore",function(){return(0,h.t)("人物.更多资料",{monoId:i.monoId}),(0,j.open)("https://mzh.moegirl.org.cn/index.php?title="+encodeURIComponent(i.cn||i.jp)+"&mobileaction=toggle_view_mobile")}),(0,p.default)((0,l.default)(i),"toggleExpand",function(t){var e=i.state.expands;i.setState({expands:e.includes(t)?e.filter(function(e){return e!==t}):[].concat((0,d.default)(e),[t])})}),(0,p.default)((0,l.default)(i),"doCollect",(0,r.default)(c.mark(function e(){var t;return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.mono.collectUrl){e.next=3;break}return e.abrupt("return",!1);case 3:return(0,h.t)("人物.收藏人物",{monoId:i.monoId}),e.next=6,(0,h.fetchHTML)({method:"POST",url:""+_.HOST+t});case 6:return(0,j.feedback)(),(0,j.info)("已收藏"),(0,b.webhookMono)(Object.assign({},i.mono,{id:i.monoId}),f.userStore.userInfo),e.abrupt("return",i.fetchMono());case 10:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(i),"doEraseCollect",(0,r.default)(c.mark(function e(){var t;return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.mono.eraseCollectUrl){e.next=3;break}return e.abrupt("return",!1);case 3:return(0,h.t)("人物.取消收藏人物",{monoId:i.monoId}),e.next=6,(0,h.fetchHTML)({method:"POST",url:""+_.HOST+t});case 6:return(0,j.feedback)(),(0,j.info)("已取消收藏"),e.abrupt("return",i.fetchMono());case 9:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(i),"doICO",(t=(0,r.default)(c.mark(function e(t){return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,h.t)("人物.启动ICO",{monoId:i.monoId}),e.next=3,f.tinygrailStore.doICO({monoId:i.monoId.replace("character/","")});case 3:if(0!==e.sent.State)return(0,j.info)("启动ICO失败"),e.abrupt("return");e.next=7;break;case 7:t.push("TinygrailICODeal",{monoId:i.monoId.replace("character/","")}),i.fetchChara();case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,p.default)((0,l.default)(i),"doTranslate",(0,r.default)(c.mark(function e(){var t,s,o,n,r=arguments;return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<r.length&&void 0!==r[0]?r[0]:"translateResult",s=1<r.length?r[1]:void 0,i.state[t].length)return e.abrupt("return");e.next=4;break;case 4:return(0,h.t)("人物.翻译内容",{monoId:i.monoId}),e.prev=5,o=(0,j.loading)(),e.next=9,(0,h.baiduTranslate)(String(s).replace(/<br \/>/g,"\n").replace(/<\/?[^>]*>/g,""));case 9:if(n=e.sent,o(),n=JSON.parse(n),n=n.trans_result,Array.isArray(n))return i.setState((0,p.default)({},t,n)),e.abrupt("return");e.next=15;break;case 15:(0,j.info)("翻译失败, 请重试"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),o&&o(),(0,j.info)("翻译失败, 请重试");case 22:case"end":return e.stop()}},e,null,[[5,18]])}))),(0,p.default)((0,l.default)(i),"doTranslateFloor",(s=(0,r.default)(c.mark(function e(t,s){var o,n,r;return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((o=i.state.translateResultFloor)[t])return e.abrupt("return");e.next=3;break;case 3:return(0,h.t)("人物.翻译内容",{floorId:t}),e.prev=4,n=(0,j.loading)(),e.next=8,(0,h.baiduTranslate)((0,j.removeHTMLTag)(s.replace(/<br>/g,"\n")));case 8:if(r=e.sent,n(),r=JSON.parse(r),r=r.trans_result,Array.isArray(r))return i.setState({translateResultFloor:Object.assign({},o,(0,p.default)({},t,r.map(function(e){return e.dst}).join("\n")))}),e.abrupt("return");e.next=14;break;case 14:(0,j.info)("翻译失败, 请重试"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),n&&n(),(0,j.info)("翻译失败, 请重试");case 21:case"end":return e.stop()}},e,null,[[4,17]])})),function(e,t){return s.apply(this,arguments)})),i}},"./src/screens/home/mono/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),l=s("./node_modules/mobx/dist/mobx.esm.js"),u=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),p=s("./src/constants/index.ts"),o=o(s("./src/screens/home/mono/store/state.ts"));function f(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var j;t.default=(s=o.default,(0,i.default)(h,s),j=f(h),(0,r.default)(h,[{key:"monoId",get:function(){return this.params.monoId}},{key:"id",get:function(){var e;return(null==(e=this.monoId.split("/"))?void 0:e[1])||""}},{key:"url",get:function(){return p.HOST+"/"+this.monoId}},{key:"mono",get:function(){return u.subjectStore.mono(this.monoId)}},{key:"monoComments",get:function(){var e=u.subjectStore.monoComments(this.monoId);return e._loaded?e:this.state.comments}},{key:"list",get:function(){return this.monoComments.list}},{key:"monoFormCDN",get:function(){var e=this.state.mono;return e._loaded?e:u.subjectStore.monoFormCDN(this.monoId)}},{key:"chara",get:function(){return u.tinygrailStore.characters(this.monoId.replace("character/",""))}},{key:"tinygrail",get:function(){return u.systemStore.setting.tinygrail}},{key:"canICO",get:function(){var e=this.state.checkTinygrail;return this.monoId.includes("character/")&&e&&!this.chara._loaded}},{key:"nameTop",get:function(){return(0,m.cnjp)(this.cn,this.jp)||""}},{key:"nameBottom",get:function(){var e=(0,m.cnjp)(this.jp,this.cn);return e!==this.nameTop?e:""}},{key:"jp",get:function(){var e=this.params._jp;return(0,m.HTMLDecode)(this.mono.name||e||this.monoFormCDN.name)}},{key:"cn",get:function(){var e=this.params._name;return(0,m.HTMLDecode)(this.mono.nameCn||e||this.monoFormCDN.nameCn)}},{key:"cover",get:function(){return this.mono.cover||this.monoFormCDN.cover}},{key:"info",get:function(){return this.mono.info||this.monoFormCDN.info}},{key:"detail",get:function(){return this.mono.detail||this.monoFormCDN.detail}},{key:"voices",get:function(){return this.mono._loaded?this.mono.voice||[]:this.monoFormCDN.voice||[]}},{key:"works",get:function(){return this.mono._loaded?this.mono.works||[]:this.monoFormCDN.works||[]}},{key:"jobs",get:function(){return((this.mono._loaded?this.mono:this.monoFormCDN).jobs||[]).slice().sort(function(e,t){return(0,m.desc)(e,t,function(e){return 2==e.type?99:Number(e.type)})})}}]),(0,a.default)((t=h).prototype,"monoId",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoId"),t.prototype),(0,a.default)(t.prototype,"id",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"id"),t.prototype),(0,a.default)(t.prototype,"url",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,a.default)(t.prototype,"mono",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"mono"),t.prototype),(0,a.default)(t.prototype,"monoComments",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoComments"),t.prototype),(0,a.default)(t.prototype,"list",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"list"),t.prototype),(0,a.default)(t.prototype,"monoFormCDN",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoFormCDN"),t.prototype),(0,a.default)(t.prototype,"chara",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"chara"),t.prototype),(0,a.default)(t.prototype,"tinygrail",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"tinygrail"),t.prototype),(0,a.default)(t.prototype,"canICO",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"canICO"),t.prototype),(0,a.default)(t.prototype,"nameTop",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"nameTop"),t.prototype),(0,a.default)(t.prototype,"nameBottom",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"nameBottom"),t.prototype),(0,a.default)(t.prototype,"jp",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"jp"),t.prototype),(0,a.default)(t.prototype,"cn",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"cn"),t.prototype),(0,a.default)(t.prototype,"cover",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"cover"),t.prototype),(0,a.default)(t.prototype,"info",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"info"),t.prototype),(0,a.default)(t.prototype,"detail",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"detail"),t.prototype),(0,a.default)(t.prototype,"voices",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"voices"),t.prototype),(0,a.default)(t.prototype,"works",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"works"),t.prototype),(0,a.default)(t.prototype,"jobs",[l.computed],Object.getOwnPropertyDescriptor(t.prototype,"jobs"),t.prototype),t);function h(){return(0,n.default)(this,h),j.apply(this,arguments)}},"./src/screens/home/mono/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;s=s("./src/stores/index.ts"),t.NAMESPACE="ScreenMono",s=t.EXCLUDE_STATE={visibleBottom:s._.window.height,checkTinygrail:!1,expands:[],translateResult:[],translateResultDetail:[],translateResultFloor:{},mono:{_loaded:0},comments:{list:[],pagination:{page:0,pageTotal:0},_loaded:0}};t.STATE=Object.assign({reverse:!1},s,{_loaded:!1})},"./src/screens/home/mono/store/fetch.ts":(e,t,s)=>{var c=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),j=s("./src/utils/kv/index.ts"),o=o(s("./src/screens/home/mono/store/computed.ts"));function h(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var b;t.default=(s=o.default,(0,i.default)(_,s),b=h(_),(0,r.default)(_));function _(){var i;(0,d.default)(this,_);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i=b.call.apply(b,[this].concat(t)),(0,m.default)((0,a.default)(i),"fetchMono",function(){return p.subjectStore.fetchMono({monoId:i.monoId})}),(0,m.default)((0,a.default)(i),"fetchChara",(0,n.default)(c.mark(function e(){var t;return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.monoId.includes("character/")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,p.tinygrailStore.fetchCharacters([i.id]);case 4:return t=e.sent,i.setState({checkTinygrail:!0}),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(i),"fetchMonoFormCDN",(0,n.default)(c.mark(function e(){var t,s;return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.systemStore.setting,s=i.mono._loaded,!t.cdn||s)return e.abrupt("return",!0);e.next=4;break;case 4:return e.abrupt("return",p.subjectStore.fetchMonoFormCDN(i.monoId));case 5:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(i),"fetchMonoFromOSS",(0,n.default)(c.mark(function e(){var t,s,o,n,r;return c.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.mono._loaded)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,e.next=5,(0,j.get)("mono_"+i.monoId.replace("/","_"));case 5:if(t=e.sent){e.next=9;break}return i.updateMonoThirdParty(),e.abrupt("return");case 9:s=t.ts,o=t.mono,n=t.comments,r=(0,f.getTimestamp)(),"object"==typeof o&&"object"==typeof n&&i.setState({mono:Object.assign({},o,{_loaded:(0,f.getTimestamp)()}),comments:Object.assign({},n,{_loaded:(0,f.getTimestamp)()})}),25200<=r-s&&i.updateMonoThirdParty(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(2);case 17:case"end":return e.stop()}},e,null,[[2,15]])}))),(0,m.default)((0,a.default)(i),"updateMonoThirdParty",function(){setTimeout(function(){i.mono._loaded&&(0,j.update)("mono_"+i.monoId.replace("/","_"),{mono:(0,f.omit)(i.mono,["collectUrl","eraseCollectUrl","_loaded"]),comments:{list:i.monoComments.list.filter(function(e){return!!e.userId}).filter(function(e,t){return t<8}).map(function(e){return Object.assign({},(0,f.omit)(e,["replySub"]),{sub:e.sub.filter(function(e){return!!e.userId}).filter(function(e,t){return t<8}).map(function(e){return(0,f.omit)(e,["replySub"])})})}),pagination:i.monoComments.pagination}})},1e4)}),i}},"./src/screens/home/mono/store/index.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/createClass.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),o=o(s("./src/screens/home/mono/store/action.ts"));function u(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var m;t.default=(s=o.default,(0,c.default)(p,s),m=u(p),(0,n.default)(p));function p(){var e;(0,r.default)(this,p);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=m.call.apply(m,[this].concat(s)),(0,l.default)((0,i.default)(e),"init",function(){return e.fetchMonoFromOSS(),e.tinygrail&&e.monoId.includes("character/")?Promise.all([e.fetchMono(),e.fetchChara()]):e.fetchMono()}),(0,l.default)((0,i.default)(e),"onHeaderRefresh",function(){return e.fetchMono()}),e}},"./src/screens/home/mono/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/createClass.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=s("./node_modules/mobx/dist/mobx.esm.js"),o=o(s("./src/utils/store/index.ts")),m=s("./src/screens/home/mono/store/ds.ts");function p(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var f;t.default=(s=o.default,(0,c.default)(j,s),f=p(j),(0,n.default)(j));function j(){var e;(0,r.default)(this,j);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=f.call.apply(f,[this].concat(s)),(0,l.default)((0,i.default)(e),"params",void 0),(0,l.default)((0,i.default)(e),"state",(0,u.observable)(m.STATE)),e}},"./src/screens/home/persons/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=void 0;t.STATE={ota:{},_loaded:!1}},"./src/screens/home/persons/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/persons/header/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,d.jsx)(n.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的制作人员":"更多制作人员",alias:"制作人员",hm:[s.url,"Persons"],headerTitleStyle:c.styles.title,headerRight:function(){return(0,d.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("制作人员.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,d.jsx)(n.Heatmap,{id:"制作人员.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/persons/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/persons/header/index.tsx#header"})}catch(e){}},"./src/screens/home/persons/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}})},"./src/screens/home/persons/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/persons/header/index.tsx")),a=o(s("./src/screens/home/persons/list/index.tsx")),o=o(s("./src/screens/home/persons/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(o.default,function(e,t){var s=t.$;return(0,c.useRunAfter)(function(){s.init()}),(0,c.useObserver)(function(){return(0,l.jsxs)(n.Component,{id:"screen-persons",children:[(0,l.jsx)(d.default,{}),(0,l.jsxs)(n.Page,{loaded:s.persons._loaded,children:[(0,l.jsx)(a.default,{}),(0,l.jsx)(n.Heatmap,{bottom:r._.bottom,id:"制作人员",screen:"Persons"})]})]})})});try{persons.displayName="persons",persons.__docgenInfo={description:"",displayName:"persons",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/persons/index.tsx#persons"]={docgenInfo:persons.__docgenInfo,name:"persons",path:"src/screens/home/persons/index.tsx#persons"})}catch(e){}},"./src/screens/home/persons/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js"),d={id:"制作人员.跳转"};t.default=(0,o.obc)(function(e,t){return t=t.$,(0,c.jsx)(n.PaginationList2,{contentContainerStyle:r._.container.bottom,keyExtractor:i.keyExtractor,data:t.persons.list,limit:16,renderItem:a})});function a(e){var t=e.item,e=e.index;return(0,c.jsx)(n.ItemCharacter,Object.assign({style:r._.container.item,index:e,event:d,type:"person"},t))}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/persons/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/persons/list/index.tsx#list"})}catch(e){}},"./src/screens/home/persons/store.ts":(e,t,s)=>{var n=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),b=s("./src/utils/kv/index.ts"),_=s("./src/constants/index.ts"),y=s("./src/screens/home/persons/ds.ts");function x(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var g,v=[];t.default=(s=o.default,(0,a.default)(O,s),g=x(O),(0,c.default)(O,[{key:"subjectId",get:function(){var e=this.params.subjectId;return void 0===e?"":e}},{key:"persons",get:function(){var e=j.monoStore.persons(this.subjectId);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):_.LIST_EMPTY}},{key:"url",get:function(){return(0,_.HTML_SUBJECT_PERSONS)(this.subjectId)}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){return"persons_"+this.subjectId}}]),(0,p.default)((t=O).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,p.default)(t.prototype,"persons",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"persons"),t.prototype),(0,p.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,p.default)(t.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,p.default)(t.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function O(){var o;(0,i.default)(this,O);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o=g.call.apply(g,[this].concat(t)),(0,m.default)((0,d.default)(o),"params",void 0),(0,m.default)((0,d.default)(o),"state",(0,f.observable)(y.STATE)),(0,m.default)((0,d.default)(o),"init",function(){return o.fetchPersons()}),(0,m.default)((0,d.default)(o),"fetchPersons",(0,r.default)(n.mark(function e(){var t,s;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.fetchThirdParty(),e.next=3,j.monoStore.fetchPersons({subjectId:o.subjectId});case 3:return(t=e.sent).list.length&&o.thirdPartyKey in o.state.ota&&(s=(null==(s=o.ota)?void 0:s.ts)||0,604800<=(0,h.getTimestamp)()-s)&&o.updateThirdParty(),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(o),"fetchThirdParty",(0,r.default)(n.mark(function e(){var t;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.ota||o.persons._loaded){e.next=8;break}return e.next=3,(0,b.get)(o.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return o.setState({ota:(0,m.default)({},o.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:o.setState({ota:(0,m.default)({},o.thirdPartyKey,Object.assign({},t,{_loaded:(0,h.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(o),"updateThirdParty",(0,r.default)(n.mark(function e(){return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v.includes(o.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,b.update)(o.thirdPartyKey,{list:o.persons.list}),v.push(o.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),o}},"./src/screens/home/preview/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=void 0;t.NAMESPACE="ScreenPreview",t.STATE={epsThumbs:[],epsThumbsHeader:{},_loaded:!1}},"./src/screens/home/preview/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/preview/header/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var t=t.$,s=(0,r.cnjp)(null==(s=t.params)?void 0:s.cn,null==(s=t.params)?void 0:s.jp);return(0,c.jsx)(n.Header,{title:s?s+"的预览":"预览",alias:"预览",hm:[t.url,"Preview"],headerTitleStyle:i.styles.title})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/preview/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/preview/header/index.tsx#header"})}catch(e){}},"./src/screens/home/preview/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}})},"./src/screens/home/preview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/preview/header/index.tsx")),d=o(s("./src/screens/home/preview/list/index.tsx")),o=o(s("./src/screens/home/preview/store.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){return(0,a.jsxs)(n.Component,{id:"screen-preview",children:[(0,a.jsx)(c.default,{}),(0,a.jsx)(n.Page,{loaded:s.state._loaded,children:(0,a.jsx)(d.default,{})})]})})});try{preview.displayName="preview",preview.__docgenInfo={description:"",displayName:"preview",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/preview/index.tsx#preview"]={docgenInfo:preview.__docgenInfo,name:"preview",path:"src/screens/home/preview/index.tsx#preview"})}catch(e){}},"./src/screens/home/preview/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),l=(o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),u=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),f=s("./src/screens/home/preview/list/styles.tsx"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var t=t.$,s=(0,f.memoStyles)(),o=(n=t.state).epsThumbs,n=n.epsThumbsHeader,t=t.params,r=void 0===(r=t.data)?[]:r,i=void 0===(t=t.headers)?{}:t,c=o.length?o:r,t=o.length?n:i,d={};return null!=t&&t.Referer&&t.Referer.includes("douban")?(r.length&&r[0].includes("douban")&&(c=(0,a.default)(r)),o.forEach(function(e){c.includes(e)||c.push(e)}),d.autoSize=s.item.width):(d.width=s.item.width,d.height=.56*s.item.width),(0,j.jsx)(u.ScrollView,{contentContainerStyle:m._.container.bottom,scrollToTop:d.fallback=!0,children:c.map(function(e,t){return(0,j.jsx)(l.default,{style:s.item,children:(0,j.jsx)(u.Touchable,{withoutFeedback:!0,onPress:function(){(0,p.showImageViewer)(c.map(function(e){return{url:e.split("@")[0],headers:i}}),t)},children:(0,j.jsx)(u.Image,Object.assign({src:e},d,{shadow:!0,headers:i,errorToHide:!0}))})},e)})})});try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/preview/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/preview/list/index.tsx#list"})}catch(e){}},"./src/screens/home/preview/list/styles.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{item:{width:o._.window.width-(2*o._.wind-o._._wind),marginLeft:o._.sm,marginBottom:o._.md}}})},"./src/screens/home/preview/store.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),o=o(s("./src/utils/store/index.ts")),j=s("./src/utils/douban/index.ts"),h=s("./src/constants/index.ts"),b=s("./src/screens/home/preview/ds.ts");function _(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var y;t.default=(s=o.default,(0,a.default)(x,s),y=_(x),(0,n.default)(x,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"namespace",get:function(){return b.NAMESPACE+"|"+this.subjectId}},{key:"url",get:function(){return h.HOST+"/preview/"+this.subjectId}}]),(0,p.default)((t=x).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,p.default)(t.prototype,"namespace",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"namespace"),t.prototype),(0,p.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),t);function x(){var n;(0,c.default)(this,x);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n=y.call.apply(y,[this].concat(t)),(0,m.default)((0,d.default)(n),"params",void 0),(0,m.default)((0,d.default)(n),"state",(0,f.observable)(b.STATE)),(0,m.default)((0,d.default)(n),"init",(0,i.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getStorage(n.namespace);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:t=e.t0,n.setState(Object.assign({},t,{_loaded:!0})),n.state.epsThumbs.length||n.fetchMovieFromDouban();case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"fetchMovieFromDouban",(0,i.default)(r.mark(function e(){var t,s,o;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.params,s=t.cn,t=t.jp,s=s||t)return e.next=5,(0,j.search)(s);e.next=11;break;case 5:return o=e.sent,o=(0,j.matchMovie)(s,o,t),e.next=9,(0,j.getPreview)(o,void 0,40);case 9:(o=e.sent).data.length&&(n.setState({epsThumbs:o.data.slice().reverse(),epsThumbsHeader:{Referer:o.referer}}),n.setStorage(n.namespace));case 11:case"end":return e.stop()}},e)}))),n}},"./src/screens/home/rating/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TABS=t.STATUS_MAP=t.STATE=t.NAMESPACE=void 0;s=s("./src/constants/index.ts");t.NAMESPACE="ScreenRating",t.STATE={page:2,isFriend:!1,_fetching:!1,_loaded:!1},t.STATUS_MAP={wish:0,collect:1,doing:2,doings:2,onHold:3,on_hold:3,dropped:4},t.TABS=s.RATING_STATUS.map(function(e){return{key:e.value,title:e.label}})},"./src/screens/home/rating/filter/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/rating/filter/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ob)(function(e){var t=(e=e.$).state.isFriend;return(0,c.jsxs)(n.default,{children:[(0,c.jsx)(r.SegmentedControl,{style:i.styles.segment,size:11,values:["所有","好友"],selectedIndex:t?1:0,onValueChange:e.onToggleFilter},String(t)),(0,c.jsx)(r.Heatmap,{id:"用户评分.切换类型"})]})});try{filter.displayName="filter",filter.__docgenInfo={description:"",displayName:"filter",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenRating"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/filter/index.tsx#filter"]={docgenInfo:filter.__docgenInfo,name:"filter",path:"src/screens/home/rating/filter/index.tsx#filter"})}catch(e){}},"./src/screens/home/rating/filter/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({segment:{width:s._.r(88),height:s._.r(28),marginRight:s._.xs}})},"./src/screens/home/rating/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),c=s("./src/utils/decorators/index.ts"),d=s("./src/stores/index.ts"),a=o(s("./src/screens/home/rating/filter/index.tsx")),l=s("./src/screens/home/rating/header/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)(function(e,t){var s=t.$;return(0,u.jsx)(n.Header,{title:(null==(t=s.params)?void 0:t.name)||"用户评分",headerTitleAlign:"left",headerTitleStyle:l.styles.title,alias:"用户评分",hm:[s.url,"Rating"],headerRight:function(){return(0,u.jsxs)(n.Flex,{children:[d.userStore.isLogin&&(0,u.jsx)(a.default,{$:s}),(0,u.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("用户评分.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,u.jsx)(n.Heatmap,{id:"用户评分.右上角菜单"})})]})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/rating/header/index.tsx#header"})}catch(e){}},"./src/screens/home/rating/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({title:{paddingLeft:0,paddingRight:72,marginLeft:-24}})},"./src/screens/home/rating/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/hooks/index.ts"),d=o(s("./src/screens/home/rating/header/index.tsx")),a=o(s("./src/screens/home/rating/tab/index.tsx")),o=o(s("./src/screens/home/rating/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(o.default,function(e,t){var s=t.$;return(0,c.useRunAfter)(function(){s.init()}),(0,c.useObserver)(function(){return(0,l.jsxs)(n.Component,{id:"screen-rating",children:[(0,l.jsx)(d.default,{}),(0,l.jsxs)(n.Page,{loaded:s.state._loaded,children:[(0,l.jsx)(a.default,{}),(0,l.jsx)(n.Heatmap,{bottom:r._.bottom,id:"用户评分",screen:"Rating"})]})]})})});try{rating.displayName="rating",rating.__docgenInfo={description:"",displayName:"rating",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/index.tsx#rating"]={docgenInfo:rating.__docgenInfo,name:"rating",path:"src/screens/home/rating/index.tsx#rating"})}catch(e){}},"./src/screens/home/rating/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=s("./src/screens/home/rating/item/styles.ts"),f=s("./node_modules/react/jsx-runtime.js"),j={id:"用户评分.跳转"};t.default=(0,o.obc)(function(e,t){var s=e.id,o=e.avatar,n=e.name,r=e.time,i=e.star,e=e.comment,t=t.navigation,c=(0,p.memoStyles)();return(0,f.jsxs)(d.default,{style:c.container,children:[(0,f.jsxs)(a.Flex,{children:[(0,f.jsx)(a.UserStatus,{userId:s,children:(0,f.jsx)(l.Avatar,{navigation:t,size:36,event:j,userId:s,src:o,radius:!0})}),(0,f.jsxs)(a.Flex.Item,{style:u._.ml.sm,children:[(0,f.jsxs)(a.Text,{size:12,bold:!0,children:[n,(0,f.jsxs)(a.Text,{size:10,lineHeight:12,type:"sub",children:["  ",(0,m.simpleTime)(r).split(" ")[0]]})]}),!!i&&(0,f.jsx)(l.Stars,{style:u._.mt.xxs,value:i,size:11})]})]}),!!e&&(0,f.jsx)(a.Flex,{style:u._.mt.xs,children:(0,f.jsx)(a.Text,{style:c.comment,size:u._.device(13,14),lineHeight:15,children:e})})]})})},"./src/screens/home/rating/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{width:o._.portrait("50%","33%"),paddingVertical:o._.sm+2},comment:{paddingVertical:o._.xs,paddingHorizontal:o._.sm,marginTop:o._.sm,marginRight:o._.sm,backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderRadius:o._.radiusXs,overflow:"hidden"}}})},"./src/screens/home/rating/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),r=o(s("./src/screens/home/rating/item/index.tsx")),u=s("./src/screens/home/rating/ds.ts"),m=s("./src/screens/home/rating/list/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n,r,e=e.title,i=t.$,t=l.MODEL_RATING_STATUS.getValue(e);return(t=i.rating(t))._loaded?(s=(0,m.memoStyles)(),o=(n=i.state).isFriend,n=n.page,r=d._.portrait(2,3),(0,p.jsx)(c.ListView,{style:d._.container.flex,contentContainerStyle:s.contentContainerStyle,keyExtractor:a.keyExtractor,data:t,numColumns:r,scrollToTop:u.TABS[n].title===e,renderItem:f,onEndReachedThreshold:.2,onHeaderRefresh:function(){return i.fetchRating(!0)},onFooterRefresh:i.fetchRating},(o?"1":"0")+r)):(0,p.jsx)(c.Loading,{})});function f(e){e=e.item;return(0,p.jsx)(r.default,Object.assign({},e))}},"./src/screens/home/rating/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/constants/index.ts");t.memoStyles=o._.memoStyles(function(){var e;return n.STORYBOOK?(e=o._.window.height-(n.STORYBOOK?o._.headerHeight:0),{contentContainerStyle:{paddingHorizontal:o._.wind,paddingTop:o._.md,paddingBottom:o._.bottom,minHeight:e,maxHeight:e}}):{contentContainerStyle:{paddingHorizontal:o._.wind,paddingTop:o._.md,paddingBottom:o._.bottom}}})},"./src/screens/home/rating/store.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),o=o(s("./src/utils/store/index.ts")),h=s("./src/utils/fetch/index.ts"),b=s("./src/constants/index.ts"),_=s("./src/screens/home/rating/ds.ts");function y(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var x;t.default=(s=o.default,(0,a.default)(g,s),x=y(g),(0,r.default)(g,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"rating",value:function(s){var o=this;return(0,f.computed)(function(){var e=o.state.isFriend,t=j.systemStore.setting.filterDefault,e=j.subjectStore.rating(o.subjectId,s,e);return t?Object.assign({},e,{list:e.list.filter(function(e){return!(e.avatar.includes(b.URL_DEFAULT_AVATAR)&&!e.comment)})}):e}).get()}},{key:"counts",get:function(){var e,t;return this._counts||(e=this.state.page,e=_.TABS[e].key,t=(e=this.rating(e)).counts,e._loaded&&(this._counts=t),t)}},{key:"url",get:function(){var e=this.state,t=e.page,e=e.isFriend,t=_.TABS[t].key;return(0,b.HTML_SUBJECT_RATING)(this.subjectId,t,e)}}]),(0,p.default)((t=g).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,p.default)(t.prototype,"counts",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"counts"),t.prototype),(0,p.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),t);function g(){var r;(0,c.default)(this,g);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r=x.call.apply(x,[this].concat(t)),(0,m.default)((0,d.default)(r),"params",void 0),(0,m.default)((0,d.default)(r),"state",(0,f.observable)(_.STATE)),(0,m.default)((0,d.default)(r),"init",(0,n.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(_.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(s=e.t0,(t=r.params.status)&&(s.page=_.STATUS_MAP[t]||2),r.setState(Object.assign({},s,{_fetching:!1,_loaded:!0})),t=r.state.page,s=r.rating(_.TABS[t].key),s._loaded){e.next=13;break}return e.abrupt("return",r.fetchRating(!0));case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"_counts",null),(0,m.default)((0,d.default)(r),"fetchRating",(0,n.default)(i.mark(function e(){var t,s,o,n=arguments;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<n.length&&void 0!==n[0]&&n[0],r.state._fetching)return e.abrupt("return",!0);e.next=4;break;case 4:return s=r.state,o=s.page,s=s.isFriend,o=_.TABS[o].key,r.setState({_fetching:!0}),e.next=9,j.subjectStore.fetchRating({subjectId:r.subjectId,status:o,isFriend:s},t);case 9:return r.setState({_fetching:!1}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"onChange",function(e){(0,h.t)("用户评分.标签页切换",{page:e}),r.setState({page:e}),r.setStorage(_.NAMESPACE);e=_.TABS[e].key;r.rating(e)._loaded||r.fetchRating(!0)}),(0,m.default)((0,d.default)(r),"onToggleFilter",function(e){var t=r.state,s=t.page,t=t.isFriend;if(e){if("所有"===e&&!t)return;if("好友"===e&&t)return}(0,h.t)("用户评分.切换类型",{isFriend:!t}),r.setState({isFriend:!t}),r.setStorage(_.NAMESPACE);e=_.TABS[s].key;r.rating(e)._loaded||r.fetchRating(!0)}),r}},"./src/screens/home/rating/tab/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/defineProperty.js"))),i=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=j(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/react/index.js")),d=s("./node_modules/react-native-tab-view/lib/module/index.js"),a=s("./src/components/index.ts"),l=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),u=o(s("./src/screens/home/rating/list/index.tsx")),m=s("./src/screens/home/rating/ds.ts"),p=s("./src/screens/home/rating/tab/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");function j(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(j=function(e){return e?s:t})(e))}var h={wishes:"wish",collections:"collect",doings:"doing",on_hold:"onHold",dropped:"dropped"};t.default=(0,n.obc)(function(e,t){var n=t.$,s=(0,p.memoStyles)(),t=n.state.page,o=(0,d.SceneMap)(Object.assign.apply(Object,[{}].concat((0,i.default)(m.TABS.map(function(e){return(0,r.default)({},e.key,function(){return(0,f.jsx)(u.default,{title:e.title})})})))));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.TabView,{style:l._.mt._sm,lazyPreloadDistance:0,navigationState:{index:t,routes:m.TABS},renderTabBar:function(e){return(0,c.createElement)(a.TabBar,Object.assign({},e,{key:Object.keys(n.counts)?"1":"0",style:s.tabBar,tabStyle:s.tab,labelStyle:s.label,indicatorStyle:s.indicator,pressOpacity:1,pressColor:"transparent",renderLabel:function(e){var t=e.route,e=e.focused,s=n.counts[t.key]||n.params[h[t.key]],o=n.params.type,t=t.title||"";return"书籍"===o?t=t.replace("看","读"):"游戏"===o?t=t.replace("看","玩"):"音乐"===o&&(t=t.replace("看","听")),(0,f.jsxs)(a.Flex,{style:l._.container.block,justify:"center",children:[(0,f.jsx)(a.Text,{type:"title",size:13,bold:e,noWrap:!0,children:t}),!!s&&(0,f.jsxs)(a.Text,{type:"sub",size:11,bold:!0,lineHeight:13,noWrap:!0,children:[" ",s," "]})]})}}))},renderScene:o,onIndexChange:n.onChange},l._.orientation),(0,f.jsx)(a.Heatmap,{right:l._.wind+62,bottom:l._.window.height-l._.tabsHeaderHeight-12,id:"用户评分.标签页切换",transparent:!0})]})});try{tab.displayName="tab",tab.__docgenInfo={description:"",displayName:"tab",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/rating/tab/index.tsx#tab"]={docgenInfo:tab.__docgenInfo,name:"tab",path:"src/screens/home/rating/tab/index.tsx#tab"})}catch(e){}},"./src/screens/home/rating/tab/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/screens/home/rating/ds.ts");t.memoStyles=o._.memoStyles(function(){var e=o._.window.width/n.TABS.length;return{tabBar:{backgroundColor:o._.ios("transparent",o._.select("transparent",o._.deepDark?o._._colorPlain:o._._colorDarkModeLevel1)),borderBottomWidth:o._.select(o._.ios(0,o._.hairlineWidth),o._.deepDark?0:o._.hairlineWidth),borderBottomColor:o._.colorBorder,elevation:0},tab:{width:e,height:48},label:{padding:0},indicator:{width:16,height:4,marginLeft:(e-16)/2,backgroundColor:o._.colorMain,borderRadius:4}}})},"./src/screens/home/subject/component/anitabi/anitabi.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.sub.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),u=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),m=s("./src/components/index.ts"),p=s("./src/screens/_/index.ts"),f=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),h=s("./src/utils/fetch/index.ts"),b=s("./src/utils/hooks/index.ts"),_=s("./src/constants/index.ts"),y=s("./src/screens/home/subject/ds.ts"),x=o(s("./src/screens/home/subject/icon/hidden.tsx")),g=s("./src/screens/home/subject/component/anitabi/ds.ts"),v=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var s=e.styles,t=e.showAnitabi,o=e.subjectId,n=e.data,r=e.onSwitchBlock,e=n.city,i=n.pointsLength,c=n.imagesLength,n=n.litePoints,n=(0,b.useHorizontalLazy)(n,Math.floor(f._.window.contentWidth/g.THUMB_WIDTH)+1),d=n.list,n=n.onScroll,a=d.filter(function(e){return e.image}).map(function(e){return{url:e.image.replace("h160","h360")}});return(0,v.jsxs)(p.InView,{style:(0,j.stl)(s.container,!t&&f._.short),children:[(0,v.jsx)(p.SectionTitle,{style:f._.container.wind,right:!1===t?(0,v.jsx)(x.default,{name:y.TITLE_ANITABI,value:"showAnitabi"}):-1!==t&&(0,v.jsxs)(m.Touchable,{style:s.touch,onPress:function(){(0,h.t)("条目.跳转",{to:"anitabi.cn",from:y.TITLE_ANITABI,subjectId:o}),(0,j.open)("https://anitabi.cn/map?bangumiId="+o)},children:[(0,v.jsxs)(m.Flex,{children:[(0,v.jsx)(m.Text,{type:"sub",children:"动画巡礼地图"}),(0,v.jsx)(m.Iconfont,{style:f._.ml.xs,name:"md-open-in-new",size:17})]}),(0,v.jsx)(m.Heatmap,{id:"条目.跳转",from:y.TITLE_ANITABI})]}),icon:!t&&"md-navigate-next",onPress:function(){return r("showAnitabi")},children:y.TITLE_ANITABI}),t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(m.Flex,{style:f._.container.windMtMd,children:[(0,v.jsx)(m.Text,{size:11,children:"主要取景城市: "}),(0,v.jsxs)(m.Text,{size:11,bold:!0,children:[e," "]}),(0,v.jsxs)(m.Text,{size:11,type:"sub",children:[" ","(",i," 个地标 、",c," 张截图)"]})]}),(0,v.jsx)(l.default,Object.assign({style:f._.mt.md,contentContainerStyle:f._.container.wind,horizontal:!0},_.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:8,onScroll:n,children:d.map(function(e,t){return(0,v.jsxs)(u.default,{style:f._.mr.sm,children:[(0,v.jsx)(m.Squircle,{width:g.THUMB_WIDTH,height:g.THUMB_HEIGHT,radius:f._.radiusXs,children:e.image?(0,v.jsx)(m.Image,{style:s.image,src:e.image,size:g.THUMB_WIDTH,height:g.THUMB_HEIGHT,onPress:function(){(0,j.showImageViewer)(a,Math.min(t,a.length-1))}}):(0,v.jsxs)(m.Flex,{style:s.void,direction:"column",justify:"center",children:[(0,v.jsx)(m.Text,{type:"sub",size:16,bold:!0,children:t+1}),(0,v.jsx)(m.Text,{style:f._.mt.xs,type:"sub",size:11,bold:!0,children:"尚无截图"})]})}),(0,v.jsx)(m.Text,{style:s.title,size:11,bold:!0,numberOfLines:2,children:e.cn||e.name}),e.ep||e.s?(0,v.jsxs)(m.Text,{style:s.sub,type:"sub",size:11,bold:!0,numberOfLines:1,children:[e.ep?"EP"+e.ep+" ":"",e.s?(0,j.date)("i:s",e.s):""]}):(0,v.jsxs)(m.Text,{style:s.sub,type:"sub",size:11,bold:!0,numberOfLines:1,children:["坐标 ",e.geo.join("，")]})]},e.id)})})),(0,v.jsx)(p.PreventTouchPlaceholder,{})]})]})},g.DEFAULT_PROPS,g.COMPONENT_MAIN);t.default=o;try{anitabi.displayName="anitabi",anitabi.__docgenInfo={description:"",displayName:"anitabi",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { minHeight: number; marginTop: number; }; image: { height: number; }; void: { width: number; height: number; backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; }; title: { width: number; paddingTop: number; }; sub: { ...; }; touch: { ...; }; layout: { ...; }; }'}},showAnitabi:{defaultValue:null,description:"",name:"showAnitabi",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AnitabiData"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/anitabi/anitabi.tsx#anitabi"]={docgenInfo:anitabi.__docgenInfo,name:"anitabi",path:"src/screens/home/subject/component/anitabi/anitabi.tsx#anitabi"})}catch(e){}},"./src/screens/home/subject/component/anitabi/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,n.rc)(s.COMPONENT,"Anitabi"),n=(t.COMPONENT_MAIN=(0,n.rc)(s),t.DEFAULT_PROPS={styles:{},showAnitabi:!0,subjectId:0,data:{},onSwitchBlock:function(){}},t.THUMB_WIDTH=o._.r(160));t.THUMB_HEIGHT=.56*n},"./src/screens/home/subject/component/anitabi/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/anitabi/anitabi.tsx")),o=s("./src/screens/home/subject/component/anitabi/ds.ts"),a=s("./src/screens/home/subject/component/anitabi/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef;return(e=t.$).showAnitabi[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_ANITABI)}}),(0,l.jsx)(d.default,{styles:(0,a.memoStyles)(),showAnitabi:r.systemStore.setting.showAnitabi,subjectId:e.subjectId,data:e.state.anitabi,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/anitabi/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/screens/home/subject/component/anitabi/ds.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:200,marginTop:o._.lg},image:{height:n.THUMB_HEIGHT},void:{width:n.THUMB_WIDTH,height:n.THUMB_HEIGHT,backgroundColor:o._.colorBg},title:{width:n.THUMB_WIDTH,paddingTop:o._.sm},sub:{width:n.THUMB_WIDTH,paddingTop:o._.xs},touch:{paddingLeft:o._.xs,marginRight:-o._.sm},layout:{width:"100%",height:1}}})},"./src/screens/home/subject/component/bg/bg.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/component/bg/ds.ts"),c=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.style,e=e.src;return(0,c.jsx)(n.BlurView,{style:t,tint:r._.select("default","dark"),src:e,blurRadius:32})},i.DEFAULT_PROPS,i.COMPONENT_MAIN);t.default=s;try{bg.displayName="bg",bg.__docgenInfo={description:"",displayName:"bg",props:{style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:'{ position: "absolute"; top: number; right: number; left: number; height: number; backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; } | { height: number; backgroundColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; }'}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/bg/bg.tsx#bg"]={docgenInfo:bg.__docgenInfo,name:"bg",path:"src/screens/home/subject/component/bg/bg.tsx#bg"})}catch(e){}},"./src/screens/home/subject/component/bg/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Bg");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={style:{},src:""}},"./src/screens/home/subject/component/bg/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/utils/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),d=o(s("./src/screens/home/subject/component/bg/bg.tsx")),o=s("./src/screens/home/subject/component/bg/ds.ts"),a=s("./src/screens/home/subject/component/bg/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s,t=t.$,o=(0,a.memoStyles)();return c.TEXT_ONLY?c.IOS?null:(0,l.jsx)(n.default,{style:o.bg}):"string"!=typeof(s=t.coverPlaceholder||(null==(s=t.subject.images)?void 0:s.common)||t.cover)?(0,l.jsx)(n.default,{style:o.bg}):(0,l.jsx)(d.default,{style:o.bg,src:(0,r.getCover400)(s)})},o.COMPONENT);try{bg.displayName="bg",bg.__docgenInfo={description:"",displayName:"bg",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/bg/index.tsx#bg"]={docgenInfo:bg.__docgenInfo,name:"bg",path:"src/screens/home/subject/component/bg/index.tsx#bg"})}catch(e){}},"./src/screens/home/subject/component/bg/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{bg:o._.ios({position:"absolute",top:0,right:0,left:0,height:o._.window.height/2,backgroundColor:o._.colorBg},{height:160,backgroundColor:o._.colorBg})}})},"./src/screens/home/subject/component/blog/blog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.small.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/utils/hooks/index.ts"),m=s("./src/screens/home/subject/ds.ts"),p=o(s("./src/screens/home/subject/icon/blog.tsx")),f=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/component/blog/ds.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.showBlog,n=e.subjectId,r=e.blog,i=e.onSwitchBlock,e=(0,u.useExpandLazy)(r),r=e.list,e=e.onExpand;return(0,j.jsxs)(d.InView,{style:(0,l.stl)(s.container,!o&&a._.short),children:[(0,j.jsx)(d.SectionTitle,{style:s.sectionTitle,right:o?(0,j.jsx)(p.default,{}):(0,j.jsx)(f.default,{name:m.TITLE_BLOG,value:"showBlog"}),icon:!o&&"md-navigate-next",onPress:function(){return i("showBlog")},children:m.TITLE_BLOG}),o&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Expand,{style:a._.mt.sm,onExpand:e,children:r.map(function(e){return(0,j.jsx)(d.ItemArticle,{style:s.item,navigation:t,avatar:e.user.avatar.small,title:e.title,summary:e.summary.replace(/\r\n/g,"").trim(),nickname:e.user.nickname,userId:e.user.username,timestamp:e.timestamp,replies:e.replies,url:e.url,event:{id:"条目.跳转",data:{from:"评论",subjectId:n}}},e.id)})}),(0,j.jsx)(c.Heatmap,{id:"条目.跳转",from:"评论"})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{blog.displayName="blog",blog.__docgenInfo={description:"",displayName:"blog",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; sectionTitle: { paddingHorizontal: number; }; item: { paddingLeft: number; }; }"}},showBlog:{defaultValue:null,description:"",name:"showBlog",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},blog:{defaultValue:null,description:"",name:"blog",required:!0,type:{name:"Blog[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/blog/blog.tsx#blog"]={docgenInfo:blog.__docgenInfo,name:"blog",path:"src/screens/home/subject/component/blog/blog.tsx#blog"})}catch(e){}},"./src/screens/home/subject/component/blog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Blog");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},showBlog:!0,subjectId:0,blog:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/component/blog/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/blog/blog.tsx")),o=s("./src/screens/home/subject/component/blog/ds.ts"),a=s("./src/screens/home/subject/component/blog/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showBlog[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_BLOG)}}),(0,l.jsx)(d.default,{navigation:t,styles:(0,a.memoStyles)(),showBlog:r.systemStore.setting.showBlog,subjectId:e.subjectId,blog:e.filterBlog,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/blog/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:120,marginTop:o._.lg},sectionTitle:{paddingHorizontal:o._.wind},item:{paddingLeft:o._.wind}}})},"./src/screens/home/subject/component/box/box.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),u=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),j=s("./src/constants/index.ts"),h=s("./src/screens/home/subject/ds.ts"),b=o(s("./src/screens/home/subject/icon/close.tsx")),_=o(s("./src/screens/home/subject/icon/folder.tsx")),y=o(s("./src/screens/home/subject/component/box/extra/index.tsx")),x=o(s("./src/screens/home/subject/component/box/flip-btn/index.tsx")),o=s("./src/screens/home/subject/component/box/ds.ts"),g=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.navigation,o=e.isLogin,n=e.status,r=e.url,i=e.showCount,c=e.showManageModel,d=e.toRating,e=e.outdate,o=o?c:function(){j.SHARE_MODE?(0,f.appNavigate)(r):s.push("LoginV2")},a=6<=(null==(c=n[n.length-1])?void 0:c.text.length)?11:12;return(0,g.jsxs)(l.default,{style:t.container,children:[(0,g.jsx)(m.SectionTitle,{style:t.sectionTitle,right:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_.default,{}),(0,g.jsx)(b.default,{})]}),children:h.TITLE_BOX}),(0,g.jsxs)(u.Flex,{style:t.btn,children:[(0,g.jsxs)(u.Flex.Item,{children:[(0,g.jsx)(x.default,{onPress:o}),(0,g.jsx)(u.Heatmap,{id:"条目.管理收藏"}),(0,g.jsx)(u.Heatmap,{right:56,transparent:!0,id:"条目.显示收藏管理"})]}),(0,g.jsx)(y.default,{})]}),(0,g.jsxs)(l.default,{style:t.bottom,children:[i&&!!n.length&&(0,g.jsxs)(l.default,{style:p._.mt.md,children:[(0,g.jsx)(u.Text,{size:a,type:"sub",children:n.map(function(e,t){return(0,g.jsx)(u.Text,{size:a,type:"sub",onPress:function(){return d(s,"收藏",e.status)},children:(t?" / ":"")+e.text},e.status)})}),(0,g.jsx)(u.Heatmap,{id:"条目.跳转",from:"收藏"})]}),e&&(0,g.jsx)(u.Touchable,{style:p._.mt.md,onPress:function(){s.push("LoginV2")},children:(0,g.jsx)(u.Text,{size:a,type:"sub",bold:!0,children:"检测到授权信息过期，点击重新登录，再进行收藏管理"})})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN,function(e){return Object.assign({},e,{status:e.status.length})});t.default=s;try{box.displayName="box",box.__docgenInfo={description:"",displayName:"box",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { paddingTop: number; paddingHorizontal: number; }; sectionTitle: { height: number; }; btn: { marginTop: number; }; bottom: { marginTop: number; }; hide: { position: "absolute"; zIndex: number; top: number; right: number; }; }'}},isLogin:{defaultValue:null,description:"",name:"isLogin",required:!0,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:'{ status: "" | "dropped" | "wishes" | "collections" | "doings" | "on_hold"; text: string; }[]'}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"`https://bgm.tv/subject/${string}` | `https://bgm.tv/subject/${number}`"}},showCount:{defaultValue:null,description:"",name:"showCount",required:!0,type:{name:"LayoutValue"}},showManageModel:{defaultValue:null,description:"",name:"showManageModel",required:!0,type:{name:"() => void"}},toRating:{defaultValue:null,description:"",name:"toRating",required:!0,type:{name:'(navigation: Navigation, from?: string, status?: "" | "dropped" | "wishes" | "collections" | "doings" | "on_hold") => void'}},outdate:{defaultValue:null,description:"",name:"outdate",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/box/box.tsx#box"]={docgenInfo:box.__docgenInfo,name:"box",path:"src/screens/home/subject/component/box/box.tsx#box"})}catch(e){}},"./src/screens/home/subject/component/box/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.RATE=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Box");t.COMPONENT_MAIN=(0,o.rc)(s),t.RATE=[1,2,3,4,5],t.DEFAULT_PROPS={navigation:{},styles:{},isLogin:!1,status:[],url:"",showCount:!0,showManageModel:function(){},toRating:function(){},outdate:!1}},"./src/screens/home/subject/component/box/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/box/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Extra")},"./src/screens/home/subject/component/box/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),a=o(s("./src/screens/home/subject/icon/actions.tsx")),l=o(s("./src/screens/home/subject/icon/game.tsx")),u=o(s("./src/screens/home/subject/icon/online.tsx")),m=o(s("./src/screens/home/subject/icon/search.tsx")),p=o(s("./src/screens/home/subject/icon/search-disc.tsx")),o=s("./src/screens/home/subject/component/box/extra/ds.ts"),f=s("./src/screens/home/subject/component/box/extra/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n,t=t.$;return c.systemStore.setting.focusOrigin?(s=!!t.actions.length,c.systemStore.setting.focusAction&&s||("动画"===t.type||"三次元"===t.type?o=u.default:"书籍"===t.type?o=m.default:"游戏"===t.type?o=l.default:"音乐"===t.type&&(o=p.default),o&&(n=(0,j.jsx)(r.default,{style:f.styles.container,children:(0,j.jsx)(o,{children:(0,j.jsx)(i.Flex,{style:(0,d.stl)(f.styles.extra,!s&&f.styles.extraLg),children:(0,j.jsx)(i.Button,{style:f.styles.btn,type:c._.select("ghostPlain","plain"),extra:(0,j.jsx)(i.Iconfont,{name:"md-airplay",size:17})})})})}))),(0,j.jsxs)(j.Fragment,{children:[n,s&&(0,j.jsx)(r.default,{style:f.styles.container,children:(0,j.jsx)(a.default,{children:(0,j.jsx)(i.Flex,{style:[f.styles.extra,!n&&f.styles.extraLg],children:(0,j.jsx)(i.Button,{style:f.styles.btn,type:c._.select("ghostPlain","plain"),extra:(0,j.jsx)(i.Iconfont,{name:"md-read-more",size:25})})})})})]})):null},o.COMPONENT);try{extra.displayName="extra",extra.__docgenInfo={description:"",displayName:"extra",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/box/extra/index.tsx#extra"]={docgenInfo:extra.__docgenInfo,name:"extra",path:"src/screens/home/subject/component/box/extra/index.tsx#extra"})}catch(e){}},"./src/screens/home/subject/component/box/extra/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{marginTop:-30,marginLeft:s._.sm},extra:{width:48},extraLg:{width:64},btn:{height:44}})},"./src/screens/home/subject/component/box/flip-btn/btns.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.slice.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),u=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),p=s("./src/screens/home/subject/component/box/ds.ts"),f=s("./src/screens/home/subject/component/box/flip-btn/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ob)(function(e){var t,s=e.btnText,o=e.rating,n=e.privacy,r=e.last,e=e.onPress,i=(0,m.getType)(s,u._.select("ghostPlain","plain")),c=[],d=[],a=(o&&(c.push(f.styles.left),d.push(f.styles.right)),u.systemStore.setting.focusOrigin);return o&&(t=(0,m.getRating)(o),t=a?(c.push(f.styles.leftFocus),d.push(f.styles.rightFocus),(0,j.jsx)(l.Flex.Item,{flex:.75,children:(0,j.jsxs)(l.Button,{style:d,type:i,onPress:e,children:[t,"  ",(0,j.jsx)(l.Iconfont,{name:"ios-star",size:16,color:u._.__colorPlain__})," ",o]})})):(0,j.jsx)(l.Flex.Item,{children:(0,j.jsxs)(l.Button,{style:d,type:i,onPress:e,children:[t," ",p.RATE.map(function(e){var t=e<=o/2?"ios-star":e-.5<=o/2?"ios-star-half":"ios-star-outline";return(0,j.jsx)(l.Iconfont,{name:t,size:16,color:u._.__colorPlain__},e)})]})})),(0,j.jsxs)(l.Flex,{justify:"center",children:[(0,j.jsx)(l.Flex.Item,{children:(0,j.jsxs)(l.Button,{style:c,type:i,extra:(0,j.jsx)(j.Fragment,{children:1==n&&(0,j.jsx)(l.Iconfont,{style:u._.ml.sm,name:"md-visibility-off",color:u._.__colorPlain__,size:17})}),onPress:e,children:[s,!!r&&" · "+(a?r.slice(2):r)]})}),t]})});try{btns.displayName="btns",btns.__docgenInfo={description:"",displayName:"btns",props:{btnText:{defaultValue:null,description:"",name:"btnText",required:!0,type:{name:"any"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"any"}},privacy:{defaultValue:null,description:"",name:"privacy",required:!0,type:{name:"any"}},last:{defaultValue:null,description:"",name:"last",required:!0,type:{name:"any"}},onPress:{defaultValue:null,description:"",name:"onPress",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/box/flip-btn/btns.tsx#btns"]={docgenInfo:btns.__docgenInfo,name:"btns",path:"src/screens/home/subject/component/box/flip-btn/btns.tsx#btns"})}catch(e){}},"./src/screens/home/subject/component/box/flip-btn/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.PERSPECTIVE=t.COMPONENT_MAIN=t.COMPONENT=t.ANIMATED_CONFIG=void 0;var o=s("./node_modules/react-native-reanimated/lib/index.web.js"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/box/ds.ts"),s=t.COMPONENT=(0,n.rc)(s.COMPONENT,"FlipBtn");t.COMPONENT_MAIN=(0,n.rc)(s),t.PERSPECTIVE=2400,t.ANIMATED_CONFIG={duration:480,easing:o.Easing.inOut(o.Easing.ease)}},"./src/screens/home/subject/component/box/flip-btn/flip-btn.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),y=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),x=n(s("./node_modules/react/index.js")),g=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),v=n(s("./node_modules/react-native-reanimated/lib/index.web.js")),O=s("./src/stores/index.ts"),S=s("./src/utils/index.ts"),T=s("./src/utils/dev/index.ts"),E=s("./src/utils/hooks/index.ts"),P=o(s("./src/screens/home/subject/component/box/flip-btn/btns.tsx")),I=s("./src/screens/home/subject/component/box/flip-btn/ds.ts"),C=s("./src/screens/home/subject/component/box/flip-btn/styles.ts"),R=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o,n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((o=r?Object.getOwnPropertyDescriptor(e,s):null)&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]);return n.default=e,t&&t.set(e,n),n}function r(e){var t=e.animate,s=e.btnText,o=e.rating,n=e.privacy,r=e.last,i=e.onAnimated,c=e.onPress,d=((0,T.r)(I.COMPONENT_MAIN),O._.device(44,50)),a=(0,v.useSharedValue)(0),l=(0,v.useAnimatedStyle)((u._closure={withTiming:v.withTiming,activeRef:a,ANIMATED_CONFIG:I.ANIMATED_CONFIG,PERSPECTIVE:I.PERSPECTIVE,height:d},u.asString="function _f(){const{withTiming,activeRef,ANIMATED_CONFIG,PERSPECTIVE,height}=jsThis._closure;{return{opacity:withTiming(activeRef.value?0:1,ANIMATED_CONFIG),transform:[{perspective:PERSPECTIVE},{rotateX:withTiming(activeRef.value?'90deg':'0deg',ANIMATED_CONFIG)},{translateY:withTiming(-activeRef.value*height,ANIMATED_CONFIG)}]};}}",u.__workletHash=747663275286,u.__location="/Users/chen/Bangumi32/src/screens/home/subject/component/box/flip-btn/flip-btn.tsx (23:39)",u.__optimalization=2,u));function u(){return{opacity:(0,v.withTiming)(a.value?0:1,I.ANIMATED_CONFIG),transform:[{perspective:I.PERSPECTIVE},{rotateX:(0,v.withTiming)(a.value?"90deg":"0deg",I.ANIMATED_CONFIG)},{translateY:(0,v.withTiming)(-a.value*d,I.ANIMATED_CONFIG)}]}}var m=(0,v.useAnimatedStyle)((p._closure={withTiming:v.withTiming,activeRef:a,ANIMATED_CONFIG:I.ANIMATED_CONFIG,PERSPECTIVE:I.PERSPECTIVE,height:d},p.asString="function _f(){const{withTiming,activeRef,ANIMATED_CONFIG,PERSPECTIVE,height}=jsThis._closure;{return{opacity:withTiming(activeRef.value?1:0,ANIMATED_CONFIG),transform:[{perspective:PERSPECTIVE},{rotateX:withTiming(activeRef.value?'0deg':'90deg',ANIMATED_CONFIG)},{translateY:withTiming(-activeRef.value*height,ANIMATED_CONFIG)}]};}}",p.__workletHash=6903100580406,p.__location="/Users/chen/Bangumi32/src/screens/home/subject/component/box/flip-btn/flip-btn.tsx (33:38)",p.__optimalization=2,p));function p(){return{opacity:(0,v.withTiming)(a.value?1:0,I.ANIMATED_CONFIG),transform:[{perspective:I.PERSPECTIVE},{rotateX:(0,v.withTiming)(a.value?"0deg":"90deg",I.ANIMATED_CONFIG)},{translateY:(0,v.withTiming)(-a.value*d,I.ANIMATED_CONFIG)}]}}var e=(0,x.useState)({btnText:s,rating:o,privacy:n,last:r}),e=(0,y.default)(e,2),f=e[0],j=e[1],e=(0,x.useState)({btnText:s,rating:o,privacy:n,last:r}),e=(0,y.default)(e,2),h=e[0],b=e[1],_=((0,x.useEffect)(function(){t||j({btnText:s,rating:o,privacy:n,last:r})},[t,s,r,n,o]),(0,x.useRef)(!1));return(0,x.useEffect)(function(){var e;!t||_.current||a.value||(0,S.urlStringify)(e={btnText:s,rating:o,privacy:n,last:r})!==(0,S.urlStringify)(f)&&(_.current=!0,b(e),setTimeout(function(){(0,S.feedback)(),a.value=1,setTimeout(function(){i()},I.ANIMATED_CONFIG.duration)},240))},[a,f,t,s,o,n,r,i]),(0,E.useObserver)(function(){var e=(0,C.memoStyles)();return(0,R.jsxs)(g.default,{style:e.container,children:[(0,R.jsxs)(v.default.View,{style:[e.animated,l],children:[(0,R.jsx)(g.default,{style:e.placeholder}),(0,R.jsx)(P.default,Object.assign({},f,{onPress:c}))]}),(0,R.jsxs)(v.default.View,{style:[e.animated,m],children:[(0,R.jsx)(g.default,{style:e.placeholder}),(0,R.jsx)(P.default,Object.assign({},h,{onPress:c}))]})]})})}t.default=r;try{r.displayName="FlipBtn",r.__docgenInfo={description:"",displayName:"FlipBtn",props:{animate:{defaultValue:null,description:"",name:"animate",required:!0,type:{name:"any"}},btnText:{defaultValue:null,description:"",name:"btnText",required:!0,type:{name:"any"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"any"}},privacy:{defaultValue:null,description:"",name:"privacy",required:!0,type:{name:"any"}},last:{defaultValue:null,description:"",name:"last",required:!0,type:{name:"any"}},onAnimated:{defaultValue:null,description:"",name:"onAnimated",required:!0,type:{name:"any"}},onPress:{defaultValue:null,description:"",name:"onPress",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/box/flip-btn/flip-btn.tsx#FlipBtn"]={docgenInfo:r.__docgenInfo,name:"FlipBtn",path:"src/screens/home/subject/component/box/flip-btn/flip-btn.tsx#FlipBtn"})}catch(e){}},"./src/screens/home/subject/component/box/flip-btn/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),a=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=o(s("./src/screens/home/subject/component/box/flip-btn/flip-btn.tsx")),o=s("./src/screens/home/subject/component/box/flip-btn/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var e=e.onPress,s=(t=t.$).collection,o=void 0===(o=s.status)?{name:"未收藏",type:null}:o,n=void 0===(n=s.rating)?0:n,r=s.private,i=s.lasttouch,s=s._loaded,s=l.STORYBOOK?d.collectionStore.collect(t.subjectId,t.type)||"未收藏":!s&&t.params._collection||o.name,c="";return i&&["collect","on_hold","dropped"].includes(null==o?void 0:o.type)&&(c=(0,a.date)("Y.m.d",i)),(0,m.jsx)(u.default,{animate:t.state.flip,btnText:s,rating:n,privacy:r,last:c,onAnimated:t.afterFlip,onPress:e},String(t.state.flipKey))},o.COMPONENT)},"./src/screens/home/subject/component/box/flip-btn/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){var e=o._.device(44,50);return{container:{height:2*e+14,paddingTop:14},animated:{marginTop:-e},placeholder:{height:e}}}),t.styles=o._.create({left:{borderTopRightRadius:0,borderBottomRightRadius:0},leftFocus:{paddingLeft:o._.sm},right:{marginLeft:-o._.hairlineWidth,borderLeftWidth:0,borderTopLeftRadius:0,borderBottomLeftRadius:0},rightFocus:{paddingRight:o._.sm},open:{marginLeft:o._.sm,marginRight:-22}})},"./src/screens/home/subject/component/box/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/box/box.tsx")),o=s("./src/screens/home/subject/component/box/ds.ts"),a=s("./src/screens/home/subject/component/box/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_BOX)}}),(0,l.jsx)(d.default,{styles:(0,a.memoStyles)(),navigation:t,isLogin:e.isLogin,status:e.status,url:e.url,showCount:r.systemStore.setting.showCount,showManageModel:e.showManageModel,toRating:e.toRating,outdate:r.userStore.outdate})]})},o.COMPONENT)},"./src/screens/home/subject/component/box/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{paddingTop:o._.md,paddingHorizontal:o._.wind},sectionTitle:{height:28},btn:{marginTop:8},bottom:{marginTop:-o._.select(44,50)+o._.sm},hide:{position:"absolute",zIndex:1,top:-10,right:-o._.sm}}})},"./src/screens/home/subject/component/catalog/catalog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),i=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),c=s("./src/components/index.ts"),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/utils/hooks/index.ts"),m=s("./src/constants/index.ts"),p=s("./src/screens/home/subject/ds.ts"),f=o(s("./src/screens/home/subject/icon/catalog.tsx")),j=o(s("./src/screens/home/subject/icon/hidden.tsx")),h=o(s("./src/screens/home/subject/component/catalog/item/index.tsx")),o=s("./src/screens/home/subject/component/catalog/ds.ts"),b=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.showCatalog,o=e.catalog,n=e.onSwitchBlock,e=(0,u.useHorizontalLazy)(o),o=e.list,e=e.onScroll;return(0,b.jsxs)(d.InView,{style:(0,l.stl)(t.container,!s&&a._.short),children:[(0,b.jsx)(d.SectionTitle,{style:a._.container.wind,right:s?(0,b.jsx)(f.default,{}):(0,b.jsx)(j.default,{name:p.TITLE_CATALOG,value:"showCatalog"}),icon:!s&&"md-navigate-next",onPress:function(){return n("showCatalog")},children:p.TITLE_CATALOG}),s&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(i.default,{style:t.scrollView,children:[(0,b.jsx)(r.default,Object.assign({contentContainerStyle:t.contentContainerStyle,horizontal:!0},m.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:4,onScroll:e,children:o.map(function(e){return(0,b.jsx)(h.default,{item:e},e.id)})})),(0,b.jsx)(c.Heatmap,{id:"条目.跳转",from:"条目"})]})}),(0,b.jsx)(d.PreventTouchPlaceholder,{})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN,function(e){return Object.assign({},e,{catalog:e.catalog.length})});t.default=s;try{catalog.displayName="catalog",catalog.__docgenInfo={description:"",displayName:"catalog",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; contentContainerStyle: { paddingTop: number; paddingHorizontal: number; paddingBottom: number; }; scrollView: { marginTop: number; marginBottom: number; }; }"}},showCatalog:{defaultValue:null,description:"",name:"showCatalog",required:!0,type:{name:"LayoutValue"}},catalog:{defaultValue:null,description:"",name:"catalog",required:!0,type:{name:'DeepPartial<{ avatar: Avatar<"l">; name: string; userId: UserId; id: Id; title: string; }>[]'}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/catalog/catalog.tsx#catalog"]={docgenInfo:catalog.__docgenInfo,name:"catalog",path:"src/screens/home/subject/component/catalog/catalog.tsx#catalog"})}catch(e){}},"./src/screens/home/subject/component/catalog/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Catalog");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},showCatalog:!0,catalog:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/component/catalog/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/catalog/catalog.tsx")),o=s("./src/screens/home/subject/component/catalog/ds.ts"),a=s("./src/screens/home/subject/component/catalog/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef;return(e=t.$).showCalalog[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_CATALOG)}}),(0,l.jsx)(d.default,{styles:(0,a.memoStyles)(),showCatalog:r.systemStore.setting.showCatalog,catalog:e.filterCatalog,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/catalog/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/components/avatar/utils.ts"),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/screens/home/subject/component/catalog/item/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.item,o=t.navigation,e=(0,l.memoStyles)();return(0,u.jsx)(n.Touchable,{style:e.item,animate:!0,onPress:function(){(0,a.t)("条目.跳转",{to:"CatalogDetail",from:"条目",catalogId:s.id}),o.push("CatalogDetail",{catalogId:s.id})},children:(0,u.jsxs)(n.Flex,{children:[(0,u.jsx)(i.Cover,{src:(0,r.fixedAll)(s.avatar,c._.r(40)),size:c._.r(40),radius:!0,shadow:!0,type:"目录"}),(0,u.jsxs)(n.Flex.Item,{style:c._.ml.md,children:[(0,u.jsx)(n.Text,{style:e.text,size:11,lineHeight:12,bold:!0,numberOfLines:1,children:(0,d.HTMLDecode)(s.title)}),(0,u.jsx)(n.Text,{size:10,lineHeight:11,type:"sub",numberOfLines:1,children:(0,d.HTMLDecode)(s.name)})]})]})})})},"./src/screens/home/subject/component/catalog/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{item:{minWidth:96,marginRight:o._.md,borderRadius:o._.radiusSm,overflow:"hidden"},text:{maxWidth:o._.r(.24*o._.window.contentWidth)}}})},"./src/screens/home/subject/component/catalog/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:92,marginTop:o._.lg},contentContainerStyle:{paddingTop:o._.sm,paddingHorizontal:o._.wind,paddingBottom:o._.md+4},scrollView:{marginTop:o._.md,marginBottom:-o._.md}}})},"./src/screens/home/subject/component/character/character.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),m=s("./src/screens/home/subject/ds.ts"),p=o(s("./src/screens/home/subject/icon/character.tsx")),f=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/component/character/ds.ts"),j=s("./src/screens/home/subject/component/character/styles.ts"),h=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var n=e.navigation,t=e.showCharacter,r=e.subjectId,s=e.crt,i=e.crtCounts,o=e.onSwitchBlock;return(0,h.jsxs)(d.InView,{style:(0,l.stl)(j.styles.container,!t&&a._.short),children:[(0,h.jsx)(d.SectionTitle,{style:a._.container.wind,right:t?(0,h.jsx)(p.default,{}):(0,h.jsx)(f.default,{name:m.TITLE_CHARACTER,value:"showCharacter"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showCharacter")},children:m.TITLE_CHARACTER}),t&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.HorizontalList,{style:a._.mt.sm,data:s,counts:i,quality:!1,initialRenderNums:a._.device(Math.floor(a._.window.contentWidth/56)+1,8),onPress:function(e){var t=e.id,s=e.name,o=e.nameJP,e=e._image;(0,u.t)("条目.跳转",{to:"Mono",from:m.TITLE_CHARACTER,subjectId:r}),n.push("Mono",{monoId:"character/"+t,_name:s,_jp:o,_image:e,_count:i[t]||0})},onSubPress:function(e){var t=e.actorId,e=e.desc;(0,u.t)("条目.跳转",{to:"Mono",from:m.TITLE_CHARACTER,subjectId:r}),n.push("Mono",{monoId:"person/"+t,_name:e})}}),(0,h.jsx)(c.Heatmap,{id:"条目.跳转",from:m.TITLE_CHARACTER})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{character.displayName="character",character.__docgenInfo={description:"",displayName:"character",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showCharacter:{defaultValue:null,description:"",name:"showCharacter",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},crt:{defaultValue:null,description:"",name:"crt",required:!0,type:{name:"Crt[] | DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/crt/g/${string}.jpg?r=${number}`; name: string; desc: string; }>[]"}},crtCounts:{defaultValue:null,description:"",name:"crtCounts",required:!0,type:{name:"Record<string, number>"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/character/character.tsx#character"]={docgenInfo:character.__docgenInfo,name:"character",path:"src/screens/home/subject/component/character/character.tsx#character"})}catch(e){}},"./src/screens/home/subject/component/character/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Character");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},showCharacter:!0,subjectId:0,crt:[],crtCounts:{},onSwitchBlock:function(){}}},"./src/screens/home/subject/component/character/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/character/character.tsx")),o=s("./src/screens/home/subject/component/character/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showCharacter[1]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_CHARACTER)}}),(0,a.jsx)(d.default,{navigation:t,showCharacter:r.systemStore.setting.showCharacter,subjectId:e.subjectId,crt:e.crt,crtCounts:e.subjectFormHTML.crtCounts,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/character/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:150,marginTop:s._.lg}})},"./src/screens/home/subject/component/comic/comic.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/constants/index.ts"),m=s("./src/screens/home/subject/ds.ts"),p=s("./src/screens/home/subject/component/comic/ds.ts"),f=s("./src/screens/home/subject/component/comic/styles.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var n=e.navigation,r=e.subjectId,e=e.comic;return(0,j.jsxs)(c.InView,{style:f.styles.container,children:[(0,j.jsx)(c.SectionTitle,{style:d._.container.wind,children:m.TITLE_COMIC}),(0,j.jsx)(c.HorizontalList,{style:d._.mt.sm,data:e.map(function(e){return Object.assign({},e,{name:u.IOS?e.name:(0,a.truncateMiddle)(e.name,20)})}),width:p.COVER_WIDTH,height:p.COVER_HEIGHT,ellipsizeMode:"middle",initialRenderNums:d._.device(Math.floor(d._.window.contentWidth/p.COVER_WIDTH)+1,6),onPress:function(e,t){var s=e.id,o=e.name,e=e.image;(0,l.t)("条目.跳转",{to:"Subject",from:m.TITLE_COMIC,subjectId:r}),n.push("Subject",{subjectId:s,_jp:o,_image:e,_type:t})}}),(0,j.jsx)(i.Heatmap,{id:"条目.跳转",from:m.TITLE_COMIC})]})},p.DEFAULT_PROPS,p.COMPONENT_MAIN);t.default=s;try{comic.displayName="comic",comic.__docgenInfo={description:"",displayName:"comic",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},comic:{defaultValue:null,description:"",name:"comic",required:!0,type:{name:"DeepPartial<{ id: SubjectId; name: string; image: `//lain.bgm.tv/pic/cover/c/${string}.jpg`; }>[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/comic/comic.tsx#comic"]={docgenInfo:comic.__docgenInfo,name:"comic",path:"src/screens/home/subject/component/comic/comic.tsx#comic"})}catch(e){}},"./src/screens/home/subject/component/comic/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Comic");t.COMPONENT_MAIN=(0,o.rc)(s),t.COVER_WIDTH=80,t.COVER_HEIGHT=112,t.DEFAULT_PROPS={navigation:{},subjectId:0,comic:[]}},"./src/screens/home/subject/component/comic/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/comic/comic.tsx")),o=s("./src/screens/home/subject/component/comic/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showComic[1]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_COMIC)}}),(0,a.jsx)(d.default,{navigation:t,subjectId:e.subjectId,comic:e.comic})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/comic/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:174,marginTop:s._.lg}})},"./src/screens/home/subject/component/comment/comment.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/icon/comment.tsx")),d=o(s("./src/screens/home/subject/icon/hidden.tsx")),a=o(s("./src/screens/home/subject/component/rate-segment/index.tsx")),o=s("./src/screens/home/subject/component/comment/ds.ts"),l=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.showComment,o=e.commentLength,n=e.onSwitchBlock;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.SectionTitle,{style:s?t.container:t.hide,right:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.default,{}),(0,l.jsx)(c.default,{})]}):(0,l.jsx)(d.default,{name:"吐槽",value:"showComment"}),icon:!s&&"md-navigate-next",onPress:function(){return n("showComment")},children:["吐槽"," ",(0,l.jsxs)(r.Text,{size:12,type:"sub",lineHeight:24,children:[o,"+"]})]}),(0,l.jsx)(r.Heatmap,{bottom:32,id:"条目.跳转",from:"吐槽"})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{comment.displayName="comment",comment.__docgenInfo={description:"",displayName:"comment",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { paddingHorizontal: number; paddingBottom: number; marginTop: number; }; hide: { paddingHorizontal: number; marginTop: number; marginVertical: number; }; }"}},showComment:{defaultValue:null,description:"",name:"showComment",required:!0,type:{name:"LayoutValue"}},commentLength:{defaultValue:null,description:"",name:"commentLength",required:!0,type:{name:"number"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/comment/comment.tsx#comment"]={docgenInfo:comment.__docgenInfo,name:"comment",path:"src/screens/home/subject/component/comment/comment.tsx#comment"})}catch(e){}},"./src/screens/home/subject/component/comment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Comment");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},showComment:!0,commentLength:0,onSwitchBlock:function(){}}},"./src/screens/home/subject/component/comment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),c=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/ds.ts"),a=o(s("./src/screens/home/subject/component/comment/comment.tsx")),o=s("./src/screens/home/subject/component/comment/ds.ts"),l=s("./src/screens/home/subject/component/comment/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)(function(e,t){var s=e.onBlockRef,e=t.$,o=-1===(t=r.systemStore.setting.showComment);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n.default,{ref:function(e){return s(e,d.TITLE_COMMENT)},style:(0,i.stl)(r._.container.layout,o&&r._.mt.lg)}),!o&&(0,u.jsx)(a.default,{styles:(0,l.memoStyles)(),showComment:t,commentLength:e.commentLength,onSwitchBlock:e.onSwitchBlock})]})},o.COMPONENT)},"./src/screens/home/subject/component/comment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{paddingHorizontal:o._.wind,paddingBottom:o._.xs,marginTop:o._.lg},hide:{paddingHorizontal:o._.wind,marginTop:o._.lg,marginVertical:-o._.sm}}})},"./src/screens/home/subject/component/cover/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Cover")},"./src/screens/home/subject/component/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),f=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),h=s("./src/utils/dev/index.ts"),b=s("./src/constants/index.ts"),_=s("./src/screens/home/subject/component/cover/ds.ts"),y=s("./src/screens/home/subject/component/cover/styles.ts"),x=s("./node_modules/react/jsx-runtime.js");function g(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var v,O={},u=(s=u.default.Component,(0,c.default)(S,s),v=g(S),(0,r.default)(S,[{key:"isLoaded",get:function(){var e=this.context.$;return"string"==typeof e.cover&&O[e.cover]||this.state.isLoaded}},{key:"event",get:function(){return{id:"条目.封面图查看",data:{subjectId:this.context.$.subjectId}}}},{key:"renderPlaceholder",value:function(){var e=this.props,t=e.placeholder,e=e.image;return!b.STORYBOOK&&this.isLoaded&&e?null:(e=this.context.$,(0,x.jsx)(p.Cover,{style:[this.styles.placeholder,{opacity:this.isLoaded?0:1}],src:t||b.IMG_DEFAULT,size:e.imageWidth,height:e.imageHeight,noDefault:!0,radius:!1,skeleton:!1}))}},{key:"renderCover",value:function(){var e=this.context.$,t=this.props,s=t.image,t=t.placeholder;return s?(0,x.jsx)(p.Cover,{src:e.cover,size:e.imageWidth,height:e.imageHeight,noDefault:!0,radius:!1,skeleton:!1,imageViewer:!0,imageViewerSrc:(0,j.getCoverLarge)(s||t),fadeDuration:0,sync:!0,event:this.event,onLoad:this.onLoad}):null}},{key:"render",value:function(){(0,h.r)(_.COMPONENT);var e=this.context.$,t=f.systemStore.setting.coverRadius,s=e.imageWidth,e=e.imageHeight;return(0,x.jsx)(p.Squircle,{style:this.styles.container,width:s,height:e,radius:t,children:(0,x.jsxs)(m.default,{style:{minWidth:s,minHeight:e},children:[b.STORYBOOK&&this.renderPlaceholder(),this.renderCover(),!b.STORYBOOK&&this.renderPlaceholder(),(0,x.jsx)(p.Heatmap,{id:"条目.封面图查看"})]})})}},{key:"styles",get:function(){return(0,y.memoStyles)()}}]),S);function S(){var s;(0,n.default)(this,S);for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return s=v.call.apply(v,[this].concat(t)),(0,l.default)((0,i.default)(s),"state",{isLoaded:!1}),(0,l.default)((0,i.default)(s),"onLoad",function(){var e=s.context.$;"string"==typeof e.cover&&(O[e.cover]=!0);try{var t=f.systemStore.setting.imageFadeIn?880:0;setTimeout(function(){s.setState({isLoaded:!0})},t)}catch(e){}}),s}t.default=(0,o.obc)(u);try{cover.displayName="cover",cover.__docgenInfo={description:"",displayName:"cover",props:{image:{defaultValue:null,description:"",name:"image",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/cover/index.tsx#cover"]={docgenInfo:cover.__docgenInfo,name:"cover",path:"src/screens/home/subject/component/cover/index.tsx#cover"})}catch(e){}},"./src/screens/home/subject/component/cover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{position:"absolute",zIndex:1,top:o._.md+6,left:o._.wind},placeholder:{position:"absolute",zIndex:2,top:0,left:0,pointerEvents:"none"}}})},"./src/screens/home/subject/component/disc/disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),u=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/react/index.js")),p=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),f=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),h=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),_=o(s("./src/screens/home/subject/icon/disc.tsx")),y=o(s("./src/screens/home/subject/icon/search-disc.tsx")),o=s("./src/screens/home/subject/component/disc/ds.ts"),x=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}s=(0,n.memo)(function(e){var o=e.navigation,n=e.styles,r=e.subjectId,t=e.disc,s=e.discTranslateResult,e=e.focusOrigin,i=(0,m.useState)(!1),i=(0,u.default)(i,2),c=i[0],d=i[1],i=(0,m.useCallback)(function(){d(!0)},[d]),a=(0,l.default)(s);return(0,x.jsxs)(p.default,{style:n.container,children:[(0,x.jsx)(j.SectionTitle,{right:(0,x.jsxs)(x.Fragment,{children:[!e&&(0,x.jsx)(y.default,{}),!s.length&&(0,x.jsx)(_.default,{})]}),children:"曲目列表"}),!!t.length&&(0,x.jsxs)(p.default,{style:h._.mt.md,children:[(0,x.jsx)(f.Expand,{onExpand:i,children:t.filter(function(e,t){return!!c||(6<=e.disc.length?t<1:t<2)}).map(function(e,t){return(0,x.jsxs)(p.default,{style:!!t&&h._.mt.md,children:[(0,x.jsx)(f.Text,{type:"sub",size:16,selectable:!0,children:e.title}),(0,x.jsx)(p.default,{style:h._.mt.sm,children:e.disc.map(function(e,t){var s="";return a.length&&(s=a.shift().dst),(0,x.jsxs)(p.default,{style:t%2==0?[n.item,n.odd]:n.item,children:[(0,x.jsx)(f.Text,{onPress:function(){return(0,b.appNavigate)(e.href,o,{},{id:"条目.跳转",data:{from:"曲目列表",subjectId:r}})},children:(0,b.HTMLDecode)(e.title)}),!!s&&(0,x.jsx)(f.Text,{style:n.translate,type:"sub",size:12,children:s})]},e.href)})})]},e.title)})}),(0,x.jsx)(f.Heatmap,{id:"条目.跳转",from:"曲目列表"})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN,function(e){return Object.assign({},e,{discTranslateResult:e.discTranslateResult.length})});t.default=s;try{disc.displayName="disc",disc.__docgenInfo={description:"",displayName:"disc",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingHorizontal: number; marginTop: number; }; item: { paddingHorizontal: number; paddingVertical: number; }; odd: { backgroundColor: string; }; translate: { marginTop: number; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},disc:{defaultValue:null,description:"",name:"disc",required:!0,type:{name:"DeepPartial<{ title: string; disc: { title: string; href: `/ep/${number}`; }[]; }>[]"}},discTranslateResult:{defaultValue:null,description:"",name:"discTranslateResult",required:!0,type:{name:"any[]"}},focusOrigin:{defaultValue:null,description:"",name:"focusOrigin",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/disc/disc.tsx#disc"]={docgenInfo:disc.__docgenInfo,name:"disc",path:"src/screens/home/subject/component/disc/disc.tsx#disc"})}catch(e){}},"./src/screens/home/subject/component/disc/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Disc");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,disc:[],discTranslateResult:[],focusOrigin:!1}},"./src/screens/home/subject/component/disc/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/component/disc/disc.tsx")),o=s("./src/screens/home/subject/component/disc/ds.ts"),c=s("./src/screens/home/subject/component/disc/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$,t=t.navigation;return(0,d.jsx)(i.default,{navigation:t,styles:(0,c.memoStyles)(),subjectId:s.subjectId,disc:s.disc,discTranslateResult:s.state.discTranslateResult,focusOrigin:n.systemStore.setting.focusOrigin})},o.COMPONENT);try{disc.displayName="disc",disc.__docgenInfo={description:"",displayName:"disc",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/disc/index.tsx#disc"]={docgenInfo:disc.__docgenInfo,name:"disc",path:"src/screens/home/subject/component/disc/index.tsx#disc"})}catch(e){}},"./src/screens/home/subject/component/disc/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:96,paddingHorizontal:o._.wind,marginTop:o._.lg},item:{paddingHorizontal:o._.sm,paddingVertical:o._.sm},odd:{backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1)},translate:{marginTop:o._.xs}}})},"./src/screens/home/subject/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Component")},"./src/screens/home/subject/component/ep/book-ep/book-ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.parse-int.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),p=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),f=o(s("./node_modules/@ant-design/react-native/lib/progress/index.js")),j=s("./src/components/index.ts"),h=s("./src/screens/_/index.ts"),b=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),_=s("./src/screens/home/subject/ds.ts"),y=o(s("./src/screens/home/subject/icon/hd.tsx")),x=o(s("./src/screens/home/subject/icon/manga.tsx")),g=o(s("./src/screens/home/subject/icon/search.tsx")),v=o(s("./src/screens/home/subject/icon/wenku.tsx")),o=s("./src/screens/home/subject/component/ep/book-ep/ds.ts"),O=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.chap,o=e.vol,n=e.book,r=e.comicLength,i=e.status,c=e.focusOrigin,d=e.onChangeText,a=e.onScrollIntoViewIfNeeded,l=e.doUpdateBookEp,u=e.doUpdateNext,e=n.totalChap,m=n.totalVol,r=("??"===m&&r&&(m="?"+r),!!i.name&&"未收藏"!==i.name);return(0,O.jsxs)(p.default,{style:t.container,children:[(0,O.jsx)(h.SectionTitle,{right:(0,O.jsxs)(O.Fragment,{children:[!c&&(0,O.jsx)(g.default,{}),(0,O.jsx)(x.default,{}),(0,O.jsx)(v.default,{}),(0,O.jsx)(y.default,{})]}),children:_.TITLE_EP}),(0,O.jsxs)(j.Flex,{style:b._.mt.md,align:"start",children:[(0,O.jsxs)(j.Flex.Item,{children:[(0,O.jsxs)(j.Flex,{children:[(0,O.jsx)(j.Text,{style:t.label,align:"right",children:"Chap."}),(0,O.jsxs)(p.default,{style:t.input,children:[(0,O.jsx)(j.Input,{style:t.inputRaw,keyboardType:"numeric",value:String(s),placeholder:String(n.chap)||"0",editable:r,clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:r?function(e){e=e.replace(/[^\d]+/,"");d("chap",e)}:void 0,onSubmitEditing:r?l:void 0,onScrollIntoViewIfNeeded:a}),!!e&&(0,O.jsxs)(j.Text,{style:t.total,type:"sub",children:["/ ",e]})]}),r&&(0,O.jsx)(j.Button,{style:t.btnPlus,styleText:t.btnText,type:"ghostPrimary",onPress:function(){return u("chap")},children:"+"})]}),!!e&&0!==Number(e)&&(0,O.jsx)(j.Flex,{style:t.progressWrap,children:(0,O.jsx)(f.default,{style:t.progress,barStyle:t.bar,percent:parseInt(String(s))/parseInt(e)*100})}),(0,O.jsxs)(j.Flex,{style:b._.mt.sm,children:[(0,O.jsx)(j.Text,{style:t.label,align:"right",children:"Vol."}),(0,O.jsxs)(p.default,{style:t.input,children:[(0,O.jsx)(j.Input,{style:t.inputRaw,keyboardType:"numeric",value:String(o),placeholder:String(n.vol)||"0",editable:r,clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:r?function(e){e=e.replace(/[^\d]+/,"");d("vol",e)}:void 0,onSubmitEditing:r?l:void 0,onScrollIntoViewIfNeeded:a}),!!m&&0!==Number(m)&&(0,O.jsxs)(j.Text,{style:t.total,type:"sub",children:["/ ",m]})]}),r&&(0,O.jsx)(j.Button,{style:t.btnPlus,styleText:t.btnText,type:"ghostPrimary",onPress:function(){return u("vol")},children:"+"}),(0,O.jsx)(j.Heatmap,{id:"条目.更新书籍下一个章节"})]}),!!n.totalVol&&(0,O.jsx)(j.Flex,{style:t.progressWrap,children:(0,O.jsx)(f.default,{style:t.progress,barStyle:t.bar,percent:parseInt(String(o))/parseInt(n.totalVol)*100})})]}),r?(0,O.jsxs)(p.default,{style:b._.ml.md,children:[(0,O.jsx)(j.Button,{style:t.btn,type:"ghostPrimary",onPress:l,children:"更新"}),(0,O.jsx)(j.Heatmap,{id:"条目.更新书籍章节"})]}):(0,O.jsx)(j.Text,{style:b._.mt.sm,type:"sub",size:13,bold:!0,children:"收藏后才能进行管理"})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{bookep.displayName="bookep",bookep.__docgenInfo={description:"",displayName:"bookep",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { height: number; paddingHorizontal: number; marginTop: number; }; label: { width: number; }; input: { marginLeft: number; width: number; height: number; }; inputRaw: { marginRight: number; ... 8 more ...; fontWeight: "800"; } | { ...; }; ... 6 more ...; bar: { ...; }; }'}},chap:{defaultValue:null,description:"",name:"chap",required:!0,type:{name:"string | number"}},vol:{defaultValue:null,description:"",name:"vol",required:!0,type:{name:"string | number"}},book:{defaultValue:null,description:"",name:"book",required:!0,type:{name:"DeepPartial<{ chap: number; vol: number; totalChap: string; totalVol: string; }>"}},comicLength:{defaultValue:null,description:"",name:"comicLength",required:!0,type:{name:"number"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:'DeepPartial<{ type: "" | "dropped" | "collect" | "on_hold" | "wish" | "do"; name: "看过" | "想看" | "抛弃" | "在看" | "搁置" | "未收藏"; id: "1" | "2" | "4" | "3" | "5"; }>'}},focusOrigin:{defaultValue:null,description:"",name:"focusOrigin",required:!0,type:{name:"boolean"}},onChangeText:{defaultValue:null,description:"",name:"onChangeText",required:!0,type:{name:"(name: string, text: string) => void"}},onScrollIntoViewIfNeeded:{defaultValue:null,description:"",name:"onScrollIntoViewIfNeeded",required:!0,type:{name:"(y: number) => any"}},doUpdateBookEp:{defaultValue:null,description:"",name:"doUpdateBookEp",required:!0,type:{name:"() => Promise<void>"}},doUpdateNext:{defaultValue:null,description:"",name:"doUpdateNext",required:!0,type:{name:"(name: string | number) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/ep/book-ep/book-ep.tsx#bookep"]={docgenInfo:bookep.__docgenInfo,name:"bookep",path:"src/screens/home/subject/component/ep/book-ep/book-ep.tsx#bookep"})}catch(e){}},"./src/screens/home/subject/component/ep/book-ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ep/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"BookEp");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},chap:"0",vol:"0",book:{},comicLength:0,status:{name:"未收藏"},focusOrigin:!1,onChangeText:function(){},onScrollIntoViewIfNeeded:function(){},doUpdateBookEp:function(){},doUpdateNext:function(){}}},"./src/screens/home/subject/component/ep/book-ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/component/ep/book-ep/book-ep.tsx")),c=s("./src/screens/home/subject/component/ep/book-ep/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){return e=e.onScrollIntoViewIfNeeded,t=t.$,(0,d.jsx)(i.default,{styles:(0,c.memoStyles)(),chap:t.state.chap||"0",vol:t.state.vol||"0",book:t.subjectFormHTML.book,comicLength:t.comic.length,status:t.collection.status,focusOrigin:n.systemStore.setting.focusOrigin,onChangeText:t.changeText,onScrollIntoViewIfNeeded:e,doUpdateBookEp:t.doUpdateBookEp,doUpdateNext:t.doUpdateNext})})},"./src/screens/home/subject/component/ep/book-ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=o._.r(48),r=o._.r(120);t.memoStyles=o._.memoStyles(function(){return{container:{height:o._.r(120),paddingHorizontal:o._.wind,marginTop:o._.lg},label:{width:n},input:{marginLeft:o._.sm,width:r,height:o._.device(34,48)},inputRaw:Object.assign({height:o._.r(34),paddingVertical:0,paddingHorizontal:o._.sm+2,color:o._.colorSub,fontWeight:"800"},o._.device(o._.fontSize13,o._.fontSize15)),total:{position:"absolute",zIndex:100,top:o._.device(8,10),right:o._.r(12)},btn:{width:o._.r(56),height:o._.device(32,48)},btnPlus:{marginLeft:o._.sm,width:o._.r(40),height:o._.device(34,48)},btnText:o._.device(o._.fontSize13,o._.fontSize18),progressWrap:{width:r,marginLeft:n+o._.sm,marginBottom:4},progress:{backgroundColor:"transparent",borderRadius:4},bar:{backgroundColor:"transparent",borderBottomColor:o._.colorPrimary,borderBottomWidth:4,borderRadius:4}}})},"./src/screens/home/subject/component/ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.WEEK_DAY_MAP=t.WEEK_DAY_DS=t.MINUTE_DS=t.HOUR_DS=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Ep");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},watchedEps:"0",totalEps:"0",onAirCustom:{},status:{name:"未收藏"},isDoing:!1,showEpInput:!0,showCustomOnair:!0,focusOrigin:!1,onChangeText:function(){},onSelectOnAir:function(){},onResetOnAirUser:function(){},onScrollIntoViewIfNeeded:function(){},doUpdateSubjectEp:function(){}},t.WEEK_DAY_DS=["周日","周一","周二","周三","周四","周五","周六"],t.WEEK_DAY_MAP={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},t.HOUR_DS=["20","21","22","23","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19"],t.MINUTE_DS=["00","05","10","15","20","25","30","35","40","45","50","55"]},"./src/screens/home/subject/component/ep/ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),_=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),y=s("./src/components/index.ts"),x=s("./src/screens/_/index.ts"),g=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),v=s("./src/screens/home/subject/ds.ts"),O=o(s("./src/screens/home/subject/icon/ep.tsx")),S=o(s("./src/screens/home/subject/icon/ep-filter.tsx")),T=o(s("./src/screens/home/subject/icon/online.tsx")),E=o(s("./src/screens/home/subject/icon/reverse.tsx")),P=o(s("./src/screens/home/subject/component/ep/eps/index.tsx")),I=s("./src/screens/home/subject/component/ep/ds.ts"),C=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var t=e.styles,s=e.watchedEps,o=e.totalEps,n=e.onAirCustom,r=e.status,i=e.isDoing,c=e.showEpInput,d=e.showCustomOnair,a=e.focusOrigin,l=e.onChangeText,u=e.onSelectOnAir,m=e.onResetOnAirUser,p=e.onScrollIntoViewIfNeeded,e=e.doUpdateSubjectEp,r=!!r.name&&"未收藏"!==r.name,f=n.weekDay,j=n.h,h=n.m,b=n.isOnair,n=n.isCustom,d=d&&(b||i);return(0,C.jsxs)(_.default,{style:t.container,children:[(0,C.jsx)(x.SectionTitle,{right:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(S.default,{}),!a&&(0,C.jsx)(T.default,{}),(0,C.jsx)(O.default,{}),(0,C.jsx)(E.default,{})]}),children:v.TITLE_EP}),(0,C.jsxs)(_.default,{style:g._.mt.md,children:[(0,C.jsx)(P.default,{}),(0,C.jsx)(y.Heatmap,{id:"条目.章节按钮长按"}),(0,C.jsx)(y.Heatmap,{bottom:35,id:"条目.章节菜单操作"})]}),(c||d)&&(0,C.jsxs)(y.Flex,{style:g._.mt.sm,children:[(0,C.jsx)(y.Flex.Item,{children:c&&(0,C.jsxs)(y.Flex,{children:[(0,C.jsxs)(_.default,{style:t.input,children:[(0,C.jsx)(y.Input,{style:t.inputRaw,pointerEvents:"box-none",keyboardType:"numeric",value:String(s),placeholder:String(s||"0"),editable:r,clearButtonMode:"never",returnKeyType:"done",returnKeyLabel:"更新",onChangeText:function(e){return l("watchedEps",e.replace(/[^\d]+/,""))},onSubmitEditing:e,onScrollIntoViewIfNeeded:p}),!!o&&0!=o&&(0,C.jsxs)(y.Text,{style:t.total,type:"sub",size:11,bold:!0,children:["/ ",o]})]}),(0,C.jsx)(_.default,{style:g._.ml.sm,children:(0,C.jsx)(y.Button,{style:t.btn,size:"sm",type:"ghostPrimary",onPress:r?e:void 0,children:"更新"})})]})}),d&&(0,C.jsxs)(y.Flex,{children:[(0,C.jsx)(x.Popover,{data:I.WEEK_DAY_DS,onSelect:function(e){var t={};Object.keys(I.WEEK_DAY_MAP).forEach(function(e){return t[I.WEEK_DAY_MAP[e]]=e}),u(Number(t[e]||0),""+j+h)},children:(0,C.jsx)(y.Flex,{style:t.btnOnAir,justify:"center",children:(0,C.jsx)(y.Text,{size:11,bold:!0,type:"sub",children:void 0===I.WEEK_DAY_MAP[f]?"周":I.WEEK_DAY_MAP[f]})})}),(0,C.jsx)(x.Popover,{style:g._.ml.sm,data:I.HOUR_DS,onSelect:function(e){u(f,""+(e||"00")+(h||"00"))},children:(0,C.jsx)(y.Flex,{style:t.btnOnAir,justify:"center",children:(0,C.jsx)(y.Text,{size:11,bold:!0,type:"sub",children:j||"时"})})}),(0,C.jsx)(x.Popover,{style:g._.ml.sm,data:I.MINUTE_DS,onSelect:function(e){u(f,""+(j||"00")+(e||"00"))},children:(0,C.jsx)(y.Flex,{style:t.btnOnAir,justify:"center",children:(0,C.jsx)(y.Text,{size:11,bold:!0,type:"sub",children:h||"分"})})}),n&&(0,C.jsx)(_.default,{style:t.btnReset,children:(0,C.jsx)(x.IconTouchable,{style:g._.mr._xs,name:"md-refresh",size:20,onPress:m})})]},""+f+j+h),(0,C.jsx)(y.Heatmap,{id:"条目.输入框更新章节"})]})]})},I.DEFAULT_PROPS,I.COMPONENT_MAIN);t.default=o;try{ep.displayName="ep",ep.__docgenInfo={description:"",displayName:"ep",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { minHeight: number; marginTop: number; marginHorizontal: number; }; input: { width: number; height: number; }; inputRaw: { marginRight: number; fontSize: number; lineHeight: number; ... 6 more ...; fontWeight: "800"; } | { ...; }; total: { ...; }; btn: { ...; }; btnOnAir: { ...; }; btnReset: { ...; }; }'}},watchedEps:{defaultValue:null,description:"",name:"watchedEps",required:!0,type:{name:"string | number"}},totalEps:{defaultValue:null,description:"",name:"totalEps",required:!0,type:{name:"string | number"}},onAirCustom:{defaultValue:null,description:"",name:"onAirCustom",required:!0,type:{name:"{ weekDay: any; h: string; m: string; isOnair: boolean; isExist: boolean; isCustom: boolean; }"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:'DeepPartial<{ type: "" | "dropped" | "collect" | "on_hold" | "wish" | "do"; name: "看过" | "想看" | "抛弃" | "在看" | "搁置" | "未收藏"; id: "1" | "2" | "4" | "3" | "5"; }>'}},isDoing:{defaultValue:null,description:"",name:"isDoing",required:!0,type:{name:"boolean"}},showEpInput:{defaultValue:null,description:"",name:"showEpInput",required:!0,type:{name:"LayoutValue"}},showCustomOnair:{defaultValue:null,description:"",name:"showCustomOnair",required:!0,type:{name:"LayoutValue"}},focusOrigin:{defaultValue:null,description:"",name:"focusOrigin",required:!0,type:{name:"boolean"}},onChangeText:{defaultValue:null,description:"",name:"onChangeText",required:!0,type:{name:"(name: string, text: string) => void"}},onSelectOnAir:{defaultValue:null,description:"",name:"onSelectOnAir",required:!0,type:{name:"(weekDayCN: string | number, timeCN: string) => void"}},onResetOnAirUser:{defaultValue:null,description:"",name:"onResetOnAirUser",required:!0,type:{name:"() => void"}},onScrollIntoViewIfNeeded:{defaultValue:null,description:"",name:"onScrollIntoViewIfNeeded",required:!0,type:{name:"(y: number) => any"}},doUpdateSubjectEp:{defaultValue:null,description:"",name:"doUpdateSubjectEp",required:!0,type:{name:"() => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/ep/ep.tsx#ep"]={docgenInfo:ep.__docgenInfo,name:"ep",path:"src/screens/home/subject/component/ep/ep.tsx#ep"})}catch(e){}},"./src/screens/home/subject/component/ep/eps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.LAYOUT_WIDTH=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),n=s("./src/styles/index.ts"),s=s("./src/screens/home/subject/component/ep/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Eps"),t.LAYOUT_WIDTH=Math.floor(n.window.width-n.wind)-1},"./src/screens/home/subject/component/ep/eps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/component/ep/eps/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation,t=!s.isLimit&&2<=s.onlinePlayActionSheetData.length;return(0,c.jsx)(n.Eps,{layoutWidth:i.LAYOUT_WIDTH,marginRight:r._.isLandscape?0:r._._wind,advance:!0,pagination:!0,login:s.isLogin,subjectId:s.params.subjectId,eps:s.toEps,userProgress:s.userProgress,canPlay:t,flip:s.state.flipEps,onFliped:s.afterEpsFlip,onSelect:function(e,t){s.doEpsSelect(e,t,o)}})},i.COMPONENT);try{eps.displayName="eps",eps.__docgenInfo={description:"",displayName:"eps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/ep/eps/index.tsx#eps"]={docgenInfo:eps.__docgenInfo,name:"eps",path:"src/screens/home/subject/component/ep/eps/index.tsx#eps"})}catch(e){}},"./src/screens/home/subject/component/ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),d=s("./src/screens/home/subject/ds.ts"),a=o(s("./src/screens/home/subject/component/disc/index.tsx")),l=o(s("./src/screens/home/subject/component/ep/book-ep/index.tsx")),u=o(s("./src/screens/home/subject/component/ep/ep.tsx")),o=s("./src/screens/home/subject/component/ep/ds.ts"),m=s("./src/screens/home/subject/component/ep/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n=e.onBlockRef,e=e.onScrollIntoViewIfNeeded;return(t=t.$).showEp[1]?(o=t.type||c.MODEL_SUBJECT_TYPE.getTitle(i.subjectStore.type(t.subjectId)),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.default,{style:i._.container.layout,ref:function(e){return n(e,"音乐"===o?d.TITLE_DISC:d.TITLE_EP)}}),"书籍"===o?(0,p.jsx)(l.default,{onScrollIntoViewIfNeeded:e}):"音乐"===o?(0,p.jsx)(a.default,{}):(0,p.jsx)(u.default,{styles:(0,m.memoStyles)(),watchedEps:t.state.watchedEps||"0",totalEps:t.subjectFormHTML.totalEps||"0",onAirCustom:t.onAirCustom,status:t.collection.status,isDoing:"do"===(null==(s=t.collection)||null==(s=s.status)?void 0:s.type),showEpInput:i.systemStore.setting.showEpInput,showCustomOnair:i.systemStore.setting.showCustomOnair,focusOrigin:i.systemStore.setting.focusOrigin,onChangeText:t.changeText,onSelectOnAir:t.onSelectOnAir,onResetOnAirUser:t.resetOnAirUser,onScrollIntoViewIfNeeded:e,doUpdateSubjectEp:t.doUpdateSubjectEp})]})):null},o.COMPONENT)},"./src/screens/home/subject/component/ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:146,marginTop:o._.lg,marginHorizontal:o._.wind},input:{width:o._.r(74),height:o._.r(32)},inputRaw:Object.assign({height:o._.r(32),paddingVertical:0,paddingHorizontal:o._.sm,color:o._.colorSub,fontWeight:"800"},o._.device(o._.fontSize12,o._.fontSize15)),total:{position:"absolute",zIndex:100,top:o._.r(9),right:10},btn:{width:o._.r(44),height:o._.r(32),backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel2),overflow:"hidden"},btnOnAir:{width:o._.r(44),height:o._.r(32),backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel2),borderColor:o._.select(o._.colorPrimaryBorder,o._._colorDarkModeLevel2),borderWidth:o._.select(1,0),borderRadius:o._.radiusXs,overflow:o._.ios(void 0,"hidden")},btnReset:{height:o._.r(32),marginTop:-8}}})},"./src/screens/home/subject/component/game/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),n=(t.COMPONENT=(0,n.rc)(s.COMPONENT,"Game"),t.THUMB_WIDTH=o._.r(160));t.THUMB_HEIGHT=.56*n},"./src/screens/home/subject/component/game/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.fill.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),p=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),f=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),h=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),_=s("./src/utils/decorators/index.ts"),y=s("./src/utils/dev/index.ts"),x=s("./src/utils/fetch/index.ts"),g=s("./src/constants/index.ts"),v=s("./src/screens/home/subject/ds.ts"),O=o(s("./src/screens/home/subject/icon/hidden.tsx")),S=o(s("./src/screens/home/subject/icon/ps.tsx")),T=s("./src/screens/home/subject/component/game/ds.ts"),E=s("./src/screens/home/subject/component/game/styles.ts"),P=s("./node_modules/react/jsx-runtime.js");function I(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}o=u.default.Component,(0,c.default)(R,o),C=I(R),(0,r.default)(R,[{key:"data",get:function(){var s=this.context.$,e=null==(e=h.otaStore.game(s.subjectId))?void 0:e.l;return"number"==typeof e&&e?new Array(e).fill("").map(function(e,t){return(0,g.CDN_GAME)(s.subjectId,t)}):[]}},{key:"data2",get:function(){var s=this.context.$,e=null==(e=h.otaStore.game(s.subjectId))?void 0:e.l;return"number"==typeof e&&e?new Array(e).fill("").map(function(e,t){return(0,g.CDN_GAME)(s.subjectId,t,!1)}):[]}},{key:"isADV",get:function(){var e;return!!(null==(e=this.context.$.gameInfo)?void 0:e.isADV)}},{key:"renderThumbs",value:function(){var s,e,o=this;return null!=(e=this.data)&&e.length?(s=this.context.$,e=this.state.scrolled,(0,P.jsx)(m.default,Object.assign({style:h._.mt.md,contentContainerStyle:h._.container.wind,horizontal:!0},g.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:8,onScroll:e?void 0:this.onScroll,children:this.data.map(function(e,t){return(0,P.jsx)(f.Image,{style:t?o.styles.image:o.styles.imageSide,src:e,size:T.THUMB_WIDTH,height:T.THUMB_HEIGHT,radius:!0,errorToHide:!0,onPress:function(){(0,x.t)("条目.游戏截图",{subjectId:s.subjectId}),(0,b.showImageViewer)(o.data2.map(function(e){return{url:e}}),t)}},e)})}))):null}},{key:"renderDetails",value:function(){var e=this,t=this.context.$,s=h.otaStore.game(t.subjectId),o=s.t,n=s.ta,n=void 0===n?[]:n,r=s.pl,r=void 0===r?[]:r,i=s.en,c=s.cn,d=s.d,s=s.p,d=("object"==typeof d?d:[d]).map(function(e){return String(e).trim()}).filter(function(e){return!!e}),s=("object"==typeof s?s:[s]).map(function(e){return String(e).trim()}).filter(function(e){return!!e});return(0,P.jsxs)(p.default,{style:this.styles.details,children:[!!o&&(0,P.jsxs)(f.Text,{lineHeight:22,selectable:!0,children:["名称∶",o]}),!(null==n||!n.length)&&(0,P.jsxs)(f.Text,{lineHeight:22,selectable:!0,children:["类型∶",n.join("、")]}),!(null==r||!r.length)&&(0,P.jsxs)(f.Text,{lineHeight:22,selectable:!0,children:["平台∶",r.join("、")]}),!!d.length&&(0,P.jsxs)(f.Text,{lineHeight:22,selectable:!0,children:["开发商∶",d.join("、")]}),!!s.length&&!this.isADV&&(0,P.jsxs)(f.Text,{lineHeight:22,selectable:!0,children:["发行商∶",s.join("、")]}),!!i&&c!==i&&(0,P.jsxs)(f.Text,{lineHeight:22,selectable:!0,children:["最早发售∶",i]}),!!c&&(0,P.jsxs)(f.Text,{lineHeight:22,selectable:!0,children:["中文发售∶",c]}),(0,P.jsx)(f.Touchable,{onPress:function(){return(0,b.open)("https://search.bilibili.com/all?keyword="+encodeURIComponent(t.jp||t.cn)+"%20"+(e.isADV?"OP":"PV")+"&order=totalrank&duration=1&tids_1=4")},children:(0,P.jsxs)(f.Flex,{children:[(0,P.jsxs)(f.Text,{type:"sub",lineHeight:22,children:["点击查找 ",this.isADV?"OP":"PV"]}),(0,P.jsx)(f.Iconfont,{style:h._.ml.xs,name:"md-open-in-new",size:16})]})})]})}},{key:"render",value:function(){(0,y.r)(T.COMPONENT);var e,t,s=this.context.$;return s.showGame[1]?(e=h.systemStore.setting.showGameInfo,t=this.props.onBlockRef,(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(p.default,{style:h._.container.layout,ref:function(e){return t(e,v.TITLE_GAME)}}),(0,P.jsx)(j.InView,{style:this.styles.container,children:(0,P.jsxs)(f.Expand,{children:[(0,P.jsx)(j.SectionTitle,{style:h._.container.wind,right:e?!this.isADV&&(0,P.jsx)(S.default,{}):(0,P.jsx)(O.default,{name:v.TITLE_GAME,value:"showGameInfo"}),icon:!e&&"md-navigate-next",onPress:function(){return s.onSwitchBlock("showGameInfo")},children:v.TITLE_GAME}),e&&(0,P.jsxs)(P.Fragment,{children:[this.renderThumbs(),this.renderDetails()]}),(0,P.jsx)(j.PreventTouchPlaceholder,{})]})})]})):null}},{key:"styles",get:function(){return(0,E.memoStyles)()}}]);var C,s=R;function R(){var e;(0,n.default)(this,R);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=C.call.apply(C,[this].concat(s)),(0,l.default)((0,i.default)(e),"state",{scrolled:!1}),(0,l.default)((0,i.default)(e),"onScroll",function(){e.state.scrolled||e.setState({scrolled:!0})}),e}t.default=(0,_.obc)(s);try{game.displayName="game",game.__docgenInfo={description:"",displayName:"game",props:{onBlockRef:{defaultValue:null,description:"",name:"onBlockRef",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/game/index.tsx#game"]={docgenInfo:game.__docgenInfo,name:"game",path:"src/screens/home/subject/component/game/index.tsx#game"})}catch(e){}},"./src/screens/home/subject/component/game/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:216,marginTop:o._.lg},image:{marginLeft:o._.sm,overflow:"hidden"},imageSide:{overflow:"hidden"},details:{paddingHorizontal:o._.wind,marginTop:o._.md}}})},"./src/screens/home/subject/component/head/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Head");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},showRelation:!1,subjectId:0,subjectPrev:void 0,subjectAfter:void 0,subjectSeries:void 0,cn:"",jp:"",release:"",year:"",coverPlaceholder:"",image:"",imageWidth:0,imageHeight:0,titleLabel:"",hideScore:!1,rating:{},x18:!1,hasSeries:!1}},"./src/screens/home/subject/component/head/head.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),T=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),E=s("./src/components/index.ts"),P=s("./src/screens/_/index.ts"),I=s("./src/stores/index.ts"),C=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),R=s("./src/utils/fetch/index.ts"),N=s("./src/constants/index.ts"),w=o(s("./src/screens/home/subject/component/cover/index.tsx")),A=o(s("./src/screens/home/subject/component/series/index.tsx")),o=s("./src/screens/home/subject/component/head/ds.ts"),M=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.showRelation,o=e.subjectId,n=e.subjectPrev,r=e.subjectAfter,i=e.subjectSeries,c=e.cn,d=e.jp,a=e.release,l=e.year,u=e.coverPlaceholder,m=e.image,p=e.imageWidth,f=e.imageHeight,j=e.titleLabel,h=e.hideScore,b=e.rating,_=e.x18,e=e.hasSeries,y=(0,C.cnjp)(d,c),x=(0,C.cnjp)(c,d),d=!1,g=a.includes("年"),v=a.includes("月"),O=a.includes("日"),S=(g&&v&&O?(S=""+a.replace(/年|月|日/g,"/"),S=(0,C.getTimestamp)(null==S?void 0:S.slice(0,S.length-1)),d=(0,C.getTimestamp)()<S):(g&&v&&!O||g&&!v&&!O)&&(d=!0),[""+String(y).slice(0,28)+(28<=String(y).length?"...":"")]),g=(j&&S.push(j),13);32<=(S=S.join(" · ")).length?g=11:22<=S.length&&(g=12);v=(32<c.length?12:24<c.length||16<c.length?13:16)+(2===N.PAD?4:2),s&&!!(n||r||i)&&(v=Math.max(11,v-2)),O=p+I._.wind+I._.device(12,20);return(0,M.jsxs)(T.default,{style:t.container,children:[d&&(0,M.jsxs)(E.Text,{style:[t.release,{left:O}],type:"__plain__",size:10,bold:!0,children:[a," 上映"]}),(0,M.jsxs)(T.default,{style:[t.content,{minHeight:f-I._.r(20),paddingLeft:O}],children:[(0,M.jsxs)(T.default,{style:{minHeight:f-I._.r(68)},children:[(0,M.jsxs)(T.default,{children:[(0,M.jsx)(E.Katakana.Provider,{size:v,lineHeight:v+1,bold:!0,children:(0,M.jsxs)(E.Katakana,{size:v,lineHeight:v+1,bold:!0,onLongPress:function(){(0,R.t)("条目.复制标题",{subjectId:o}),(0,C.copy)(x)},children:[x,!!l&&(0,M.jsxs)(E.Text,{size:v-3,lineHeight:v+1,children:[" ","(",l,")"]})]})}),(!i||!!y&&y!==x)&&(0,M.jsx)(E.Katakana.Provider,{style:!!x&&I._.mt.xs,itemStyle:t.katakana,type:"sub",size:g,numberOfLines:e?2:4,children:(0,M.jsx)(E.Katakana,{type:"sub",size:g,numberOfLines:e?2:4,onLongPress:function(){(0,R.t)("条目.复制标题",{subjectId:o}),(0,C.copy)(y)},children:S})}),(0,M.jsx)(E.Heatmap,{id:"条目.复制标题"})]}),(0,M.jsx)(A.default,{size:v})]}),(0,M.jsx)(E.Flex,{style:I._.mt.xs,children:!h&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(E.Text,{type:"main",size:I._.device(20,24),children:[""===b.score?"-":(0,C.toFixed)(b.score,1)," "]}),""!==b.score&&(0,M.jsx)(P.ScoreTag,{style:I._.ml.sm,value:Number(b.score)}),_&&(0,M.jsx)(P.Tag,{style:I._.ml.sm,size:13,value:"NSFW"})]})})]}),(0,M.jsx)(w.default,{image:m,placeholder:u})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{head.displayName="head",head.__docgenInfo={description:"",displayName:"head",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ container: { paddingTop: number; marginTop: number; }; content: { paddingTop: number; paddingRight: number; paddingBottom: number; backgroundColor: "rgb(255, 255, 255)" | "rgb(36, 36, 36)"; borderTopLeftRadius: number; borderTopRightRadius: number; }; release: { ...; }; katakana: { ...; }; }'}},showRelation:{defaultValue:null,description:"",name:"showRelation",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},subjectPrev:{defaultValue:null,description:"",name:"subjectPrev",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectAfter:{defaultValue:null,description:"",name:"subjectAfter",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectSeries:{defaultValue:null,description:"",name:"subjectSeries",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},cn:{defaultValue:null,description:"",name:"cn",required:!0,type:{name:"string"}},jp:{defaultValue:null,description:"",name:"jp",required:!0,type:{name:"string"}},release:{defaultValue:null,description:"",name:"release",required:!0,type:{name:"string"}},year:{defaultValue:null,description:"",name:"year",required:!0,type:{name:"string"}},coverPlaceholder:{defaultValue:null,description:"",name:"coverPlaceholder",required:!0,type:{name:"string"}},image:{defaultValue:null,description:"",name:"image",required:!0,type:{name:"string"}},imageWidth:{defaultValue:null,description:"",name:"imageWidth",required:!0,type:{name:"number"}},imageHeight:{defaultValue:null,description:"",name:"imageHeight",required:!0,type:{name:"number"}},titleLabel:{defaultValue:null,description:"",name:"titleLabel",required:!0,type:{name:"string"}},hideScore:{defaultValue:null,description:"",name:"hideScore",required:!0,type:{name:"boolean"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"{ count: { 1: number; 2: number; 3: number; 4: number; 5: number; 6: number; 7: number; 8: number; 9: number; 10: number; }; score: string; total: string; } | { total: string | number; score: string | number; rank?: number; count: { ...; } | DeepPartial<...>; }"}},x18:{defaultValue:null,description:"",name:"x18",required:!0,type:{name:"boolean"}},hasSeries:{defaultValue:null,description:"",name:"hasSeries",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/head/head.tsx#head"]={docgenInfo:head.__docgenInfo,name:"head",path:"src/screens/home/subject/component/head/head.tsx#head"})}catch(e){}},"./src/screens/home/subject/component/head/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/head/head.tsx")),o=s("./src/screens/home/subject/component/head/ds.ts"),a=s("./src/screens/home/subject/component/head/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$;return(t=e.year)&&"book"===e.subjectTypeValue&&e.end&&e.end!==e.year&&(t=e.year+" - "+e.end),(0,l.jsx)(n.default,{ref:function(e){return s(e,c.TITLE_HEAD)},children:(0,l.jsx)(d.default,{styles:(0,a.memoStyles)(),showRelation:r.systemStore.setting.showRelation,subjectId:Number(e.subject.id||e.subjectId),subjectPrev:e.subjectPrev,subjectAfter:e.subjectAfter,subjectSeries:e.subjectSeries,cn:e.cn,jp:e.jp,release:e.release,year:t,coverPlaceholder:e.coverPlaceholder,image:null==(t=e.subject.images)?void 0:t.common,imageWidth:e.imageWidth,imageHeight:e.imageHeight,titleLabel:e.titleLabel,hideScore:e.hideScore,rating:e.rating,x18:e.x18,hasSeries:e.hasSeries})})},o.COMPONENT)},"./src/screens/home/subject/component/head/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{paddingTop:o._.r(48),marginTop:o._.ios(80,-80)},content:{paddingTop:o._.r(12),paddingRight:o._.wind,paddingBottom:20,backgroundColor:o._.colorPlain,borderTopLeftRadius:o._.radiusLg,borderTopRightRadius:o._.radiusLg},release:{position:"absolute",zIndex:1,top:o._.r(28),opacity:.6},katakana:{marginTop:-4}}})},"./src/screens/home/subject/component/header-title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_WIDTH=t.IMAGE_HEIGHT=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"HeaderTitle");t.COMPONENT_MAIN=(0,o.rc)(s),t.IMAGE_WIDTH=28,t.IMAGE_HEIGHT=35.84,t.DEFAULT_PROPS={common:"",score:"",type:"",cn:"",jp:"",titleLabel:""}},"./src/screens/home/subject/component/header-title/header-title.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/subject/component/header-title/ds.ts"),u=s("./src/screens/home/subject/component/header-title/styles.ts"),m=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.common,s=e.score,o=e.type,n=e.cn,r=e.jp,e=e.titleLabel;return(0,m.jsxs)(i.Flex,{style:u.styles.container,children:[(0,m.jsx)(c.Cover,{src:t,size:"音乐"===o?l.IMAGE_HEIGHT:l.IMAGE_WIDTH,height:l.IMAGE_HEIGHT,radius:d._.radiusSm,fadeDuration:0}),(0,m.jsxs)(i.Flex.Item,{style:d._.ml.sm,children:[(0,m.jsxs)(i.Text,{size:13,numberOfLines:1,children:[(0,a.cnjp)(n,r),!!e&&(0,m.jsxs)(i.Text,{size:13,type:"sub",children:[" ","· ",e]})]}),s?(0,m.jsx)(c.Stars,{style:d._.mt.xxs,value:s}):(0,m.jsx)(i.Text,{style:d._.mt.xxs,size:10,type:"sub",numberOfLines:1,children:(0,a.cnjp)(r,n)})]})]})},l.DEFAULT_PROPS,l.COMPONENT_MAIN);t.default=s;try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{common:{defaultValue:null,description:"",name:"common",required:!0,type:{name:"string"}},score:{defaultValue:null,description:"",name:"score",required:!0,type:{name:"string | number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"动画"'},{value:'"书籍"'},{value:'"音乐"'},{value:'"游戏"'},{value:'"三次元"'}]}},cn:{defaultValue:null,description:"",name:"cn",required:!0,type:{name:"string"}},jp:{defaultValue:null,description:"",name:"jp",required:!0,type:{name:"string"}},titleLabel:{defaultValue:null,description:"",name:"titleLabel",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/header-title/header-title.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/home/subject/component/header-title/header-title.tsx#headertitle"})}catch(e){}},"./src/screens/home/subject/component/header-title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/component/header-title/header-title.tsx")),o=s("./src/screens/home/subject/component/header-title/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t,e=e.$;return(0,c.jsx)(i.default,{common:(0,n.getCoverMedium)((null==(t=e.subject.images)?void 0:t.common)||e.coverPlaceholder||e.cover),score:e.rating.score,type:e.type,cn:e.cn,jp:e.jp,titleLabel:e.titleLabel})},o.COMPONENT);try{headertitle.displayName="headertitle",headertitle.__docgenInfo={description:"",displayName:"headertitle",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenSubject"}},navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/header-title/index.tsx#headertitle"]={docgenInfo:headertitle.__docgenInfo,name:"headertitle",path:"src/screens/home/subject/component/header-title/index.tsx#headertitle"})}catch(e){}},"./src/screens/home/subject/component/header-title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{marginLeft:-s._.sm,marginRight:s._.lg,marginBottom:s._.platforms(-2,0,4,8,4)}})},"./src/screens/home/subject/component/info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Info");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,showInfo:!0,info:"",onSwitchBlock:function(){}}},"./src/screens/home/subject/component/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/info/info.tsx")),o=s("./src/screens/home/subject/component/info/ds.ts"),a=s("./src/screens/home/subject/component/info/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showInfo[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_INFO)}}),(0,l.jsx)(d.default,{navigation:t,styles:(0,a.memoStyles)(),subjectId:e.subjectId,showInfo:r.systemStore.setting.showInfo,info:e.info,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/info/info.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.array.slice.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),f=s("./src/screens/_/index.ts"),j=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),b=o(s("./src/screens/home/subject/icon/hidden.tsx")),_=o(s("./src/screens/home/subject/icon/wiki.tsx")),o=s("./src/screens/home/subject/component/info/ds.ts"),y=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}s=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.subjectId,n=e.showInfo,r=e.info,i=e.onSwitchBlock,e=(0,u.useState)(!1),e=(0,l.default)(e,2),c=e[0],d=e[1],e=(0,u.useCallback)(function(){d(!0)},[d]),a=r;try{a=c?decodeURIComponent(a):decodeURIComponent(a).slice(0,440)}catch(e){console.error("home/subject/info.js","Info",e)}return(0,y.jsxs)(f.InView,{style:n?s.container:s.hide,children:[(0,y.jsx)(f.SectionTitle,{style:j._.container.wind,right:n?(0,y.jsx)(_.default,{}):(0,y.jsx)(b.default,{name:"详情",value:"showInfo"}),icon:!n&&"md-navigate-next",onPress:function(){return i("showInfo")},children:"详情"}),n&&(0,y.jsxs)(m.default,{children:[!!r&&(0,y.jsx)(p.Expand,{ratio:.88,checkLayout:!1,onExpand:e,children:(0,y.jsx)(p.RenderHtml,{style:s.info,html:a,onLinkPress:function(e){return(0,h.appNavigate)(e,t,{},{id:"条目.跳转",data:{from:"详情",subjectId:o}})}})}),(0,y.jsx)(p.Heatmap,{id:"条目.跳转",from:"详情"})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{info.displayName="info",info.__docgenInfo={description:"",displayName:"info",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; hide: { marginTop: number; marginBottom: number; }; info: { paddingVertical: number; paddingHorizontal: number; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},showInfo:{defaultValue:null,description:"",name:"showInfo",required:!0,type:{name:"LayoutValue"}},info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"string"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/info/info.tsx#info"]={docgenInfo:info.__docgenInfo,name:"info",path:"src/screens/home/subject/component/info/info.tsx#info"})}catch(e){}},"./src/screens/home/subject/component/info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:210,marginTop:o._.lg},hide:{marginTop:o._.lg,marginBottom:-o._.sm},info:{paddingVertical:o._.sm,paddingHorizontal:o._.wind}}})},"./src/screens/home/subject/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.POPOVER_DATA=t.ITEM_HEIGHT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Item"),t.POPOVER_DATA={"动画":["贴贴","复制评论","特别关注TA的动画评论","屏蔽用户"],"书籍":["贴贴","复制评论","特别关注TA的书籍评论","屏蔽用户"],"游戏":["贴贴","复制评论","特别关注TA的游戏评论","屏蔽用户"],"音乐":["贴贴","复制评论","特别关注TA的音乐评论","屏蔽用户"],"三次元":["贴贴","复制评论","特别关注TA的三次元评论","屏蔽用户"]},t.ITEM_HEIGHT=100},"./src/screens/home/subject/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),f=s("./src/screens/home/subject/component/item/ds.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,o=e.index,n=e.time,r=e.avatar,i=e.userId,c=e.userName,d=e.star,a=e.comment,e=e.relatedId,l=t.$,t=t.navigation;return!l.state.rendered||(0,p.getIsBlockUser)(m.rakuenStore.setting.blockUserIds,c,i,"Subject|"+l.subjectId)?null:(s={id:"条目.跳转",data:{from:"吐槽",subjectId:l.subjectId}},(0,j.jsx)(u.InView,{y:m._.window.height+o*f.ITEM_HEIGHT,children:(0,j.jsx)(u.ItemComment,{navigation:t,event:s,time:n,avatar:r,userId:i,userName:c,star:l.hideScore?void 0:d,comment:a,subjectId:l.subjectId,relatedId:e,popoverData:f.POPOVER_DATA[l.type],onSelect:l.onTrackUsersCollection})},i))},f.COMPONENT)},"./src/screens/home/subject/component/like/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Like");t.COMPONENT_MAIN=(0,o.rc)(s),t.COVER_WIDTH=80,t.COVER_HEIGHT=112,t.DEFAULT_PROPS={navigation:{},showLike:!0,subjectId:0,like:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/component/like/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/like/like.tsx")),o=s("./src/screens/home/subject/component/like/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showLike[1]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_LIKE)}}),(0,a.jsx)(d.default,{navigation:t,showLike:r.systemStore.setting.showLike,subjectId:e.subjectId,like:e.like,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/like/like.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/screens/home/subject/ds.ts"),m=o(s("./src/screens/home/subject/icon/hidden.tsx")),p=s("./src/screens/home/subject/component/like/ds.ts"),f=s("./src/screens/home/subject/component/like/styles.ts"),j=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var n=e.navigation,t=e.showLike,r=e.subjectId,s=e.like,o=e.onSwitchBlock;return(0,j.jsxs)(c.InView,{style:(0,a.stl)(f.styles.container,!t&&d._.short),children:[(0,j.jsx)(c.SectionTitle,{style:d._.container.wind,right:!t&&(0,j.jsx)(m.default,{name:u.TITLE_LIKE,value:"showLike"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showLike")},children:u.TITLE_LIKE}),t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.HorizontalList,{style:d._.mt.sm,data:s,width:p.COVER_WIDTH,height:p.COVER_HEIGHT,initialRenderNums:d._.device(Math.floor(d._.window.contentWidth/p.COVER_WIDTH)+1,6),onPress:function(e,t){var s=e.id,o=e.name,e=e.image;(0,l.t)("条目.跳转",{to:"Subject",from:u.TITLE_LIKE,subjectId:r}),n.push("Subject",{subjectId:s,_jp:o,_image:e,_type:t})}}),(0,j.jsx)(i.Heatmap,{id:"条目.跳转",from:u.TITLE_LIKE})]})]})},p.DEFAULT_PROPS,p.COMPONENT_MAIN);t.default=o;try{like.displayName="like",like.__docgenInfo={description:"",displayName:"like",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showLike:{defaultValue:null,description:"",name:"showLike",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},like:{defaultValue:null,description:"",name:"like",required:!0,type:{name:"DeepPartial<{ id: SubjectId; name: string; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; }>[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/like/like.tsx#like"]={docgenInfo:like.__docgenInfo,name:"like",path:"src/screens/home/subject/component/like/like.tsx#like"})}catch(e){}},"./src/screens/home/subject/component/like/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:174,marginTop:s._.lg}})},"./src/screens/home/subject/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_CONTROL_PROPS=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,n.rc)(s.COMPONENT,"List"),t.REFRESH_CONTROL_PROPS={tintColor:o._.__colorPlain__,titleColor:o._.__colorPlain__}},"./src/screens/home/subject/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),c=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/subject/header-component/index.tsx")),a=s("./src/screens/home/subject/component/list/utils.tsx"),l=s("./src/screens/home/subject/component/list/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)(function(e,t){var s=e.forwardRef,o=e.onScrollIntoViewIfNeeded,e=e.onBlockRef,t=t.$;return(0,u.jsx)(n.ListView,{ref:s,style:r._.container.flex,contentContainerStyle:r._.container.bottom,keyExtractor:i.keyExtractor,data:t.subjectComments,scrollEventThrottle:4,scrollToTop:!0,keyboardDismissMode:"on-drag",footerEmptyDataComponent:t.footerEmptyDataComponent,refreshControlProps:l.REFRESH_CONTROL_PROPS,ListHeaderComponent:(0,u.jsx)(d.default,{onScrollIntoViewIfNeeded:o,onBlockRef:e}),renderItem:a.renderItem,onScroll:t.onScroll,onHeaderRefresh:t.onHeaderRefresh,onFooterRefresh:t.fetchSubjectComments})},l.COMPONENT)},"./src/screens/home/subject/component/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=i,o(s("./node_modules/react/index.js")),o(s("./src/screens/home/subject/component/item/index.tsx"))),r=s("./node_modules/react/jsx-runtime.js");function i(e){var t=e.item,e=e.index;return(0,r.jsx)(n.default,{index:e,time:t.time,avatar:t.avatar,userId:t.userId,userName:t.userName,star:t.star,comment:t.comment,relatedId:t.relatedId})}try{i.displayName="renderItem",i.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/list/utils.tsx#renderItem"]={docgenInfo:i.__docgenInfo,name:"renderItem",path:"src/screens/home/subject/component/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/home/subject/component/loading/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Loading")},"./src/screens/home/subject/component/loading/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),r=s("./src/screens/home/subject/component/loading/ds.ts"),i=s("./src/screens/home/subject/component/loading/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){return t.$.subjectComments._loaded?null:(0,c.jsx)(n.Flex,{style:i.styles.loading,justify:"center",children:(0,c.jsx)(n.Loading,{})})},r.COMPONENT);try{loading.displayName="loading",loading.__docgenInfo={description:"",displayName:"loading",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/loading/index.tsx#loading"]={docgenInfo:loading.__docgenInfo,name:"loading",path:"src/screens/home/subject/component/loading/index.tsx#loading"})}catch(e){}},"./src/screens/home/subject/component/loading/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({loading:{height:240}})},"./src/screens/home/subject/component/lock/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/component/lock/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){return t.$.lock?(t=(0,i.memoStyles)(),(0,c.jsxs)(n.Flex,{style:t.container,children:[(0,c.jsx)(n.Mesume,{index:2,size:72}),(0,c.jsxs)(n.Flex.Item,{children:[(0,c.jsx)(n.Text,{type:"main",size:16,bold:!0,children:"条目已锁定"}),(0,c.jsx)(n.Text,{style:r._.mt.sm,type:"sub",children:"不符合收录原则，条目及相关收藏、讨论、关联等内容将会随时被移除"})]})]})):null});try{lock.displayName="lock",lock.__docgenInfo={description:"",displayName:"lock",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/lock/index.tsx#lock"]={docgenInfo:lock.__docgenInfo,name:"lock",path:"src/screens/home/subject/component/lock/index.tsx#lock"})}catch(e){}},"./src/screens/home/subject/component/lock/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{paddingVertical:o._.md,paddingRight:o._.wind,paddingLeft:o._.xs,margin:o._.wind,borderWidth:1,borderColor:o._.colorMain,borderRadius:o._.radiusSm}}})},"./src/screens/home/subject/component/modal/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Modal");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={visible:!1,disabled:!1,subjectId:0,name:"",nameCn:"",action:"看",onSubmit:function(){},onClose:function(){}}},"./src/screens/home/subject/component/modal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),r=o(s("./src/screens/home/subject/component/modal/modal.tsx")),o=s("./src/screens/home/subject/component/modal/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){return(t=t.$).isLogin?(0,i.jsx)(r.default,{visible:t.state.visible,disabled:t.state.disabled,subjectId:t.params.subjectId,name:t.subject.name,nameCn:t.subject.name_cn,action:t.action,onSubmit:t.doUpdateCollection,onClose:t.closeManageModal}):null},o.COMPONENT);try{modal.displayName="modal",modal.__docgenInfo={description:"",displayName:"modal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/modal/index.tsx#modal"]={docgenInfo:modal.__docgenInfo,name:"modal",path:"src/screens/home/subject/component/modal/index.tsx#modal"})}catch(e){}},"./src/screens/home/subject/component/modal/modal.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/subject/component/modal/ds.ts"),a=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.visible,s=e.disabled,o=e.subjectId,n=e.name,r=e.nameCn,i=e.action,c=e.onSubmit,e=e.onClose;return(0,a.jsx)(d.ManageModal,{visible:t,disabled:s,subjectId:o,title:r||n,desc:n,action:i,onSubmit:c,onClose:e})},n.DEFAULT_PROPS,n.COMPONENT_MAIN);t.default=s;try{modal.displayName="modal",modal.__docgenInfo={description:"",displayName:"modal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},nameCn:{defaultValue:null,description:"",name:"nameCn",required:!0,type:{name:"string"}},action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"enum",value:[{value:'"听"'},{value:'"看"'},{value:'"玩"'},{value:'"读"'}]}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:'(values: { subjectId: SubjectId; status?: "" | "dropped" | "wishes" | "collections" | "doings" | "on_hold"; tags?: string; comment?: string; rating?: string | number; privacy?: any; noConsole?: boolean; }) => Promise<...>'}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/modal/modal.tsx#modal"]={docgenInfo:modal.__docgenInfo,name:"modal",path:"src/screens/home/subject/component/modal/modal.tsx#modal"})}catch(e){}},"./src/screens/home/subject/component/rate-segment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.SCORES_DS=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"RateSegement"),t.SCORES_DS=["全部","9-10","7-8","4-6","1-3"]},"./src/screens/home/subject/component/rate-segment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/component/rate-segment/ds.ts"),c=s("./src/screens/home/subject/component/rate-segment/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$).state.filterScores;return(0,d.jsxs)(n.default,{children:[(0,d.jsx)(r.SegmentedControl,{style:c.styles.segment,size:11,values:i.SCORES_DS,selectedIndex:s.length?i.SCORES_DS.findIndex(function(e){return e===s.join("-")}):0,onValueChange:t.filterScores}),(0,d.jsx)(r.Heatmap,{right:30,bottom:-4,id:"条目.筛选分数"})]})},i.COMPONENT);try{ratesegment.displayName="ratesegment",ratesegment.__docgenInfo={description:"",displayName:"ratesegment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/rate-segment/index.tsx#ratesegment"]={docgenInfo:ratesegment.__docgenInfo,name:"ratesegment",path:"src/screens/home/subject/component/rate-segment/index.tsx#ratesegment"})}catch(e){}},"./src/screens/home/subject/component/rate-segment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({segment:{width:s._.r(196),height:s._.r(28),marginRight:s._.xs}})},"./src/screens/home/subject/component/rating/chart/chart.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),u=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),f=s("./src/screens/home/subject/component/rating/chart/utils.ts"),j=s("./src/screens/home/subject/component/rating/chart/ds.ts"),h=s("./node_modules/react/jsx-runtime.js"),s=(0,o.memo)(function(e){var t=e.navigation,n=e.styles,s=e.friend,r=e.rating,i=e.total,o=e.count,c=e.score,d=e.toRating,e=(0,f.getDeviation)(i,o,c),a=Object.keys(o).length?o:j.DEFAULT_RATES;return(0,h.jsxs)(h.Fragment,{children:[!!i&&(0,h.jsxs)(u.Text,{style:n.total,size:11,type:"sub",children:[i," 人评分"]}),(0,h.jsx)(u.Flex,{style:n.chart,children:Object.keys(a).reverse().map(function(e,t){var s=(0,f.getHeight)(i,a[e]),o=r==e;return(0,h.jsxs)(u.Flex.Item,{style:0<t&&m._.ml.xs,children:[(0,h.jsxs)(u.Flex,{style:n.item,justify:"center",align:"end",children:[(0,h.jsx)(l.default,{style:(0,p.stl)(n.itemFill,o&&n.itemFillActive,{height:s})}),(0,h.jsxs)(u.Text,{style:[n.count,{bottom:s}],size:10,type:o?"warning":"sub",align:"center",bold:!0,children:[a[e]," "]})]}),(0,h.jsx)(u.Text,{style:m._.mt.sm,size:12,type:o?"warning":"title",align:"center",children:e})]},e)})}),(0,h.jsxs)(u.Flex,{style:m._.mt.md,children:[(0,h.jsx)(u.Flex.Item,{children:(0,h.jsxs)(u.Touchable,{style:n.friend,onPress:function(){return d(t,"评分分布")},children:[(0,h.jsxs)(u.Flex,{children:[s.score?(0,h.jsxs)(u.Text,{size:12,type:"sub",children:["好友",(0,h.jsxs)(u.Text,{size:12,type:"main",bold:!0,children:[" ",s.score," "]}),(0,h.jsxs)(u.Text,{size:12,lineHeight:12,type:"sub",children:["(",s.total,")"]})]}):(0,h.jsx)(u.Text,{size:12,lineHeight:12,type:"sub",children:"用户评分"}),(0,h.jsx)(u.Iconfont,{name:"md-navigate-next"})]}),(0,h.jsx)(u.Heatmap,{id:"条目.跳转",from:"评分分布"})]})}),(0,h.jsx)(u.Touchable,{style:n.deviation,onPress:function(){t.push("Information",{title:"标准差",message:["0-1 异口同声","1.15 基本一致","1.3 略有分歧","1.45 莫衷一是","1.6 各执一词","1.75 你死我活"]})},children:(0,h.jsxs)(u.Flex,{children:[(0,h.jsx)(u.Text,{size:12,type:"sub",children:"标准差"}),(0,h.jsxs)(u.Text,{size:12,type:"main",bold:!0,children:[" ",(0,p.toFixed)(e,2)," "]}),(0,h.jsxs)(u.Text,{size:12,lineHeight:12,type:"sub",children:[(0,f.getDispute)(e)," "]}),(0,h.jsx)(u.Iconfont,{style:m._.ml.xs,name:"md-info-outline",size:16})]})})]})]})},j.DEFAULT_PROPS,j.COMPONENT_MAIN);t.default=s;try{chart.displayName="chart",chart.__docgenInfo={description:"",displayName:"chart",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ total: { position: "absolute"; zIndex: number; top: number; right: number; }; chart: { minHeight: number; marginTop: number; marginHorizontal: number; }; item: { height: number; paddingBottom: number; marginTop: number; }; ... 4 more ...; deviation: { ...; }; }'}},friend:{defaultValue:null,description:"",name:"friend",required:!0,type:{name:"DeepPartial<{ score: string; total: string; }>"}},rating:{defaultValue:null,description:"",name:"rating",required:!0,type:{name:"number"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"string | number"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"{ 1: number; 2: number; 3: number; 4: number; 5: number; 6: number; 7: number; 8: number; 9: number; 10: number; } | DeepPartial<Record<2 | 1 | 6 | 4 | 10 | 8 | 3 | 5 | 7 | 9, number>>"}},score:{defaultValue:null,description:"",name:"score",required:!0,type:{name:"string | number"}},toRating:{defaultValue:null,description:"",name:"toRating",required:!0,type:{name:'(navigation: Navigation, from?: string, status?: "" | "dropped" | "wishes" | "collections" | "doings" | "on_hold") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/rating/chart/chart.tsx#chart"]={docgenInfo:chart.__docgenInfo,name:"chart",path:"src/screens/home/subject/component/rating/chart/chart.tsx#chart"})}catch(e){}},"./src/screens/home/subject/component/rating/chart/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RATES=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/rating/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Chart");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},friend:{},rating:0,total:0,count:{},score:0,toRating:function(){}},t.DEFAULT_RATES={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0}},"./src/screens/home/subject/component/rating/chart/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),i=o(s("./src/screens/home/subject/component/rating/chart/chart.tsx")),o=s("./src/screens/home/subject/component/rating/chart/ds.ts"),c=s("./src/screens/home/subject/component/rating/chart/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=t.$,t=t.navigation,o=(r=s.rating).total,n=r.count,r=r.score;return(0,d.jsx)(i.default,{navigation:t,styles:(0,c.memoStyles)(),friend:s.subjectFormHTML.friend,rating:s.collection.rating,total:o,count:n,score:r,toRating:s.toRating})},o.COMPONENT);try{chart.displayName="chart",chart.__docgenInfo={description:"",displayName:"chart",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/rating/chart/index.tsx#chart"]={docgenInfo:chart.__docgenInfo,name:"chart",path:"src/screens/home/subject/component/rating/chart/index.tsx#chart"})}catch(e){}},"./src/screens/home/subject/component/rating/chart/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{total:{position:"absolute",zIndex:1,top:12,right:-4},chart:{minHeight:o._.r(120),marginTop:o._.md,marginHorizontal:-4},item:{height:o._.r(120),paddingBottom:o._.xs,marginTop:-o._.md},itemFill:{position:"absolute",left:"50%",width:o._.device(6,8),marginLeft:o._.device(-3,-4),backgroundColor:o._.select(o._.colorWait,o._._colorSub),borderRadius:o._.device(6,4)},itemFillActive:{backgroundColor:o._.colorWarning},count:{position:"absolute",zIndex:1,right:0,left:0,marginBottom:4},friend:{paddingLeft:o._.xs,marginLeft:-o._.xs,borderRadius:o._.radiusSm,overflow:"hidden"},deviation:{paddingLeft:o._.xs,marginRight:-o._.xs,borderRadius:o._.radiusSm,overflow:"hidden"}}})},"./src/screens/home/subject/component/rating/chart/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.object.values.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviation=function(e,t,s){var o,n;return 0==e?0:(t=Object.values(t).reverse(),o=s,s=e,n=0,t.forEach(function(e,t){0!==e&&(n+=(10-t-o)*(10-t-o)*e)}),Math.sqrt(n/s))},t.getDispute=function(e){return 0===e?"-":e<1?"异口同声":e<1.15?"基本一致":e<1.3?"略有分歧":e<1.45?"莫衷一是":e<1.6?"各执一词":e<1.75?"你死我活":"厨黑大战"},t.getHeight=function(e,t){if(!e||!t)return 0;t/=e;0<t&&t<o&&(t=o);return 100*Math.min(1.44*t||o,.9)+"%"};var o=.04},"./src/screens/home/subject/component/rating/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Rating");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},hideScore:!1,showRating:!0}},"./src/screens/home/subject/component/rating/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/rating/rating.tsx")),o=s("./src/screens/home/subject/component/rating/ds.ts"),a=s("./src/screens/home/subject/component/rating/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef;return t.$.showRating[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_RATING)}}),(0,l.jsx)(d.default,{styles:(0,a.memoStyles)(),showRating:r.systemStore.setting.showRating,hideScore:r.systemStore.setting.hideScore})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/rating/rating.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=j(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/react/index.js")),c=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),d=s("./src/components/index.ts"),a=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),l=o(s("./src/screens/home/subject/icon/hidden.tsx")),u=o(s("./src/screens/home/subject/component/rating/chart/index.tsx")),m=o(s("./src/screens/home/subject/component/rating/title/index.tsx")),p=s("./src/screens/home/subject/ds.ts"),o=s("./src/screens/home/subject/component/rating/ds.ts"),f=s("./node_modules/react/jsx-runtime.js");function j(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(j=function(e){return e?s:t})(e))}s=(0,n.memo)(function(e){var t=e.styles,s=e.hideScore,e=e.showRating,s=(0,i.useState)(!s),s=(0,r.default)(s,2),o=s[0],n=s[1];return(0,f.jsxs)(a.InView,{style:e?t.container:t.hide,children:[(0,f.jsxs)(d.Flex,{children:[(0,f.jsx)(d.Flex.Item,{children:(0,f.jsx)(m.default,{showScore:o})}),!e&&(0,f.jsx)(l.default,{name:p.TITLE_RATING,value:"showRating"})]}),e&&(0,f.jsx)(c.default,{children:o?(0,f.jsx)(u.default,{}):(0,f.jsx)(d.Touchable,{onPress:function(){return n(!0)},children:(0,f.jsx)(d.Flex,{style:t.hideScore,justify:"center",children:(0,f.jsx)(d.Text,{children:"评分已隐藏, 点击显示"})})})})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{rating.displayName="rating",rating.__docgenInfo={description:"",displayName:"rating",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingHorizontal: number; marginTop: number; }; hide: { paddingHorizontal: number; marginTop: number; marginBottom: number; }; hideScore: { height: number; }; }"}},hideScore:{defaultValue:null,description:"",name:"hideScore",required:!0,type:{name:"boolean"}},showRating:{defaultValue:null,description:"",name:"showRating",required:!0,type:{name:"LayoutValue"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/rating/rating.tsx#rating"]={docgenInfo:rating.__docgenInfo,name:"rating",path:"src/screens/home/subject/component/rating/rating.tsx#rating"})}catch(e){}},"./src/screens/home/subject/component/rating/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:200,paddingHorizontal:o._.wind,marginTop:o._.lg},hide:{paddingHorizontal:o._.wind,marginTop:o._.lg,marginBottom:-o._.sm},hideScore:{height:o._.r(144)}}})},"./src/screens/home/subject/component/rating/title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/rating/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Title")},"./src/screens/home/subject/component/rating/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/screens/home/subject/ds.ts"),n=s("./src/screens/home/subject/component/rating/title/ds.ts"),u=s("./src/screens/home/subject/component/rating/title/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,e=e.showScore,o=t.$,n=t.navigation,t=c.systemStore.setting.showRating;return(0,m.jsxs)(i.SectionTitle,{left:t&&(0,m.jsx)(i.Rank,{style:u.styles.rank,value:o.subject.rank||(null==(s=o.subjectFromOSS)||null==(s=s.rating)?void 0:s.rank)||"-",size:13}),right:t&&(0,m.jsxs)(r.Flex,{children:["动画"===o.type&&(0,m.jsxs)(r.Touchable,{style:u.styles.netabare,onPress:function(){(0,a.t)("条目.跳转",{to:"Netabare",from:"评分分布",subjectId:o.subjectId}),n.push("WebBrowser",{title:(0,d.cnjp)(o.cn,o.jp)+"的趋势",url:"https://netaba.re/subject/"+o.subjectId})},children:[(0,m.jsxs)(r.Flex,{children:[(0,m.jsx)(r.Text,{style:c._.ml.sm,type:"sub",children:"趋势"}),(0,m.jsx)(r.Iconfont,{style:c._.ml.xs,name:"md-open-in-new",size:17})]}),(0,m.jsx)(r.Heatmap,{id:"条目.跳转",from:"评分分布",to:"Netabare"})]}),(0,m.jsxs)(r.Touchable,{style:u.styles.rate,onPress:function(){(0,a.t)("条目.跳转",{to:"Stats",from:"评分分布",subjectId:o.subjectId}),n.push("WebBrowser",{title:(0,d.cnjp)(o.cn,o.jp)+"的透视",url:"https://bgm.tv/subject/"+o.subjectId+"/stats"})},children:[(0,m.jsxs)(r.Flex,{children:[(0,m.jsx)(r.Text,{style:c._.ml.sm,type:"sub",children:"透视"}),(0,m.jsx)(r.Iconfont,{style:c._.ml.xs,name:"md-open-in-new",size:17})]}),(0,m.jsx)(r.Heatmap,{id:"条目.跳转",from:"评分分布",to:"Stats"})]})]}),icon:!t&&"md-navigate-next",onPress:function(){return o.onSwitchBlock("showRating")},children:[l.TITLE_RATING," ",e&&(0,m.jsx)(r.Text,{type:"warning",size:18,lineHeight:18,bold:!0,children:o.rating.score})]})},n.COMPONENT)},"./src/screens/home/subject/component/rating/title/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({netabare:{borderRadius:s._.radiusSm,overflow:"hidden"},rate:{paddingLeft:s._.sm,marginRight:-s._.xs,borderRadius:s._.radiusSm,overflow:"hidden"},rank:{minWidth:s._.r(44),marginLeft:s._.xs}})},"./src/screens/home/subject/component/recent/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Recent");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},subjectId:0,showRecent:!0,who:[],hideScore:!1,onSwitchBlock:function(){}}},"./src/screens/home/subject/component/recent/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/recent/recent.tsx")),o=s("./src/screens/home/subject/component/recent/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showRecent[1]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_RECENT)}}),(0,a.jsx)(d.default,{navigation:t,showRecent:r.systemStore.setting.showRecent,subjectId:e.subjectId,who:e.filterRecent,hideScore:e.hideScore,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/recent/recent.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),d=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),a=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),u=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),m=s("./src/utils/hooks/index.ts"),p=s("./src/constants/index.ts"),f=s("./src/screens/home/subject/ds.ts"),j=o(s("./src/screens/home/subject/icon/hidden.tsx")),o=s("./src/screens/home/subject/component/recent/ds.ts"),h=s("./src/screens/home/subject/component/recent/styles.ts"),b=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.navigation,s=e.subjectId,o=e.showRecent,n=e.who,r=e.hideScore,i=e.onSwitchBlock,e=(0,m.useHorizontalLazy)(n),n=e.list,e=e.onScroll;return(0,b.jsxs)(l.InView,{style:o?h.styles.container:h.styles.hide,children:[(0,b.jsx)(l.SectionTitle,{style:u._.container.wind,right:!o&&(0,b.jsx)(j.default,{name:f.TITLE_RECENT,value:"showRecent"}),icon:!o&&"md-navigate-next",onPress:function(){return i("showRecent")},children:f.TITLE_RECENT}),o&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,Object.assign({style:u._.mt.md,contentContainerStyle:u._.container.wind,horizontal:!0},p.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:4,onScroll:e,children:n.map(function(e){return(0,b.jsxs)(a.Flex,{style:h.styles.item,children:[(0,b.jsx)(a.UserStatus,{userId:e.userId,children:(0,b.jsx)(l.Avatar,{navigation:t,userId:e.userId,name:e.name,src:e.avatar,event:{id:"条目.跳转",data:{from:"用户动态",subjectId:s}}})}),(0,b.jsxs)(d.default,{style:u._.ml.sm,children:[(0,b.jsxs)(a.Flex,{children:[(0,b.jsx)(a.Text,{size:13,bold:!0,children:e.name}),!r&&(0,b.jsx)(l.Stars,{style:u._.ml.xs,value:e.star,simple:!0})]}),(0,b.jsx)(a.Text,{style:u._.mt.xs,size:10,type:"sub",children:e.status})]})]},e.userId)})})),(0,b.jsx)(a.Heatmap,{id:"条目.跳转",from:"用户动态"})]}),(0,b.jsx)(l.PreventTouchPlaceholder,{})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{recent.displayName="recent",recent.__docgenInfo={description:"",displayName:"recent",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},showRecent:{defaultValue:null,description:"",name:"showRecent",required:!0,type:{name:"LayoutValue"}},who:{defaultValue:null,description:"",name:"who",required:!0,type:{name:'DeepPartial<{ avatar: Avatar<"l">; name: string; userId: UserId; star: string; status: string; }>[]'}},hideScore:{defaultValue:null,description:"",name:"hideScore",required:!0,type:{name:"boolean"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/recent/recent.tsx#recent"]={docgenInfo:recent.__docgenInfo,name:"recent",path:"src/screens/home/subject/component/recent/recent.tsx#recent"})}catch(e){}},"./src/screens/home/subject/component/recent/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:84,marginTop:s._.lg,marginBottom:s._.sm},hide:{marginTop:s._.lg,marginBottom:-s._.sm},item:{paddingRight:s._.sm,paddingBottom:s._.xs,marginRight:s._.sm}})},"./src/screens/home/subject/component/relations/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Relations");t.COMPONENT_MAIN=(0,o.rc)(s),t.COVER_WIDTH=80,t.COVER_HEIGHT=112,t.DEFAULT_PROPS={navigation:{},showRelations:!0,subjectId:0,relations:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/component/relations/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/relations/relations.tsx")),o=s("./src/screens/home/subject/component/relations/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showRelations[1]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_RELATIONS)}}),(0,a.jsx)(d.default,{navigation:t,showRelations:r.systemStore.setting.showRelations,subjectId:e.subjectId,relations:e.relations,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/relations/relations.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/screens/home/subject/ds.ts"),u=o(s("./src/screens/home/subject/icon/hidden.tsx")),m=s("./src/screens/home/subject/component/relations/ds.ts"),p=s("./src/screens/home/subject/component/relations/styles.ts"),f=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var n=e.navigation,t=e.showRelations,r=e.subjectId,s=e.relations,o=e.onSwitchBlock;return(0,f.jsxs)(c.InView,{style:t?p.styles.container:p.styles.hide,children:[(0,f.jsx)(c.SectionTitle,{style:d._.container.wind,right:!t&&(0,f.jsx)(u.default,{name:l.TITLE_RELATIONS,value:"showRelations"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showRelations")},children:l.TITLE_RELATIONS}),t&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.HorizontalList,{style:d._.mt.sm,data:s,width:m.COVER_WIDTH,height:m.COVER_HEIGHT,findCn:!0,initialRenderNums:d._.device(Math.floor(d._.window.contentWidth/m.COVER_WIDTH)+1,6),onPress:function(e,t){var s=e.id,o=e.name,e=e.image;(0,a.t)("条目.跳转",{to:"Subject",from:"关联条目",subjectId:r}),n.push("Subject",{subjectId:s,_jp:o,_image:e,_type:t})}}),(0,f.jsx)(i.Heatmap,{id:"条目.跳转",from:"关联条目"})]})]})},m.DEFAULT_PROPS,m.COMPONENT_MAIN);t.default=o;try{relations.displayName="relations",relations.__docgenInfo={description:"",displayName:"relations",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showRelations:{defaultValue:null,description:"",name:"showRelations",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},relations:{defaultValue:null,description:"",name:"relations",required:!0,type:{name:"{ id: any; image: any; name: any; desc: any; }[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/relations/relations.tsx#relations"]={docgenInfo:relations.__docgenInfo,name:"relations",path:"src/screens/home/subject/component/relations/relations.tsx#relations"})}catch(e){}},"./src/screens/home/subject/component/relations/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:188,marginTop:s._.lg},hide:{marginTop:s._.lg,marginBottom:-s._.sm}})},"./src/screens/home/subject/component/series/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COVER_WIDTH=t.COVER_HEIGHT=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,n.rc)(s.COMPONENT,"Series"),n=(t.COMPONENT_MAIN=(0,n.rc)(s),t.COVER_WIDTH=o._.r(o._.device(28,40)));t.COVER_HEIGHT=1.4*n,t.DEFAULT_PROPS={navigation:{},styles:{},showRelation:!0,size:14,subjectId:0,subjectPrev:void 0,subjectAfter:void 0,subjectSeries:void 0,subjectAnime:void 0,subjectDiff:void 0}},"./src/screens/home/subject/component/series/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),n=s("./src/utils/decorators/index.ts"),l=o(s("./src/screens/home/subject/component/series/series.tsx")),o=s("./src/screens/home/subject/component/series/ds.ts"),u=s("./src/screens/home/subject/component/series/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n,r,i,c,e=e.size,d=t.$,t=t.navigation;return d.hasSeries?(s=0,d.subjectPrev&&(o=d.subjectPrev,s+=1),d.subjectAfter&&(n=d.subjectAfter,s+=1),s<2&&d.subjectAnime&&(r=d.subjectAnime,s+=1),s<2&&d.subjectDiff&&(i=d.subjectDiff,s+=1),!s&&d.subjectSeries&&(c=d.subjectSeries),(0,m.jsx)(l.default,{navigation:t,styles:(0,u.memoStyles)(),showRelation:a.systemStore.setting.showRelation,size:e,subjectId:d.subjectId,subjectPrev:o,subjectAfter:n,subjectAnime:r,subjectDiff:i,subjectSeries:c})):null},o.COMPONENT)},"./src/screens/home/subject/component/series/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/constants/index.ts"),m=s("./src/screens/home/subject/component/series/ds.ts"),p=s("./src/screens/home/subject/component/series/item/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.from,o=e.data,n=t.$,r=t.navigation,e=(0,p.memoStyles)(),i="系列"+s;return(0,f.jsxs)(c.Touchable,{style:e.touch,animate:!0,scale:.9,onPress:function(){(0,l.t)("条目.跳转",{to:"Subject",from:i,subjectId:n.subjectId}),r.push("Subject",{subjectId:o.id,_jp:o.title,_image:o.image})},children:[(0,f.jsxs)(c.Flex,{children:[(0,f.jsx)(d.Cover,{src:o.image||u.IMG_DEFAULT,size:m.COVER_WIDTH,height:m.COVER_HEIGHT,radius:4,fadeDuration:0,noDefault:!0}),(0,f.jsx)(c.Text,{style:a._.ml.sm,size:11,children:s})]}),(0,f.jsx)(c.Heatmap,{right:-19,id:"条目.跳转",from:i})]})})},"./src/screens/home/subject/component/series/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{touch:{paddingRight:o._.xs,marginLeft:o._.sm,borderRadius:4,overflow:"hidden"}}})},"./src/screens/home/subject/component/series/series.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),m=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),f=s("./src/utils/fetch/index.ts"),j=s("./src/constants/index.ts"),h=o(s("./src/screens/home/subject/component/series/item/index.tsx")),b=s("./src/screens/home/subject/component/series/ds.ts"),_=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.showRelation,n=e.size,r=e.subjectId,i=e.subjectPrev,c=e.subjectAfter,d=e.subjectAnime,a=e.subjectDiff,l=e.subjectSeries;return i||c||d||a?(e=0,i&&(e+=1),c&&(e+=1),d&&(e+=1),(0,_.jsxs)(u.Flex,{style:o&&s.relation,children:[(0,_.jsx)(u.Flex.Item,{children:o&&(0,_.jsxs)(u.Flex,{children:[(0,_.jsx)(u.Iconfont,{name:"md-subdirectory-arrow-right",size:16}),!!i&&(0,_.jsx)(h.default,{data:i,from:"前传"}),!!c&&(0,_.jsx)(h.default,{data:c,from:"续集"}),e<=1&&!!d&&(0,_.jsx)(h.default,{data:d,from:"动画"}),e<=1&&!!a&&(0,_.jsx)(h.default,{data:a,from:"不同演绎"})]})}),(0,_.jsx)(m.IconTouchable,{style:s.icon,name:o?"md-keyboard-arrow-up":"md-navigate-next",size:24,onPress:function(){return p.systemStore.switchSetting("showRelation")}})]})):(0,_.jsxs)(u.Touchable,{style:s.series,onPress:function(){(0,f.t)("条目.跳转",{to:"Subject",from:"系列",subjectId:r}),t.push("Subject",{subjectId:l.id,_jp:l.title,_image:l.image})},children:[(0,_.jsxs)(u.Flex,{children:[(0,_.jsx)(u.Text,{size:13,children:"⤷"}),(0,_.jsx)(u.Squircle,{style:s.cover,width:b.COVER_WIDTH,height:b.COVER_HEIGHT,radius:p._.radiusSm,children:(0,_.jsx)(m.Cover,{src:l.image,size:b.COVER_WIDTH,height:b.COVER_HEIGHT,placeholder:!1,fadeDuration:0,noDefault:!0})}),(0,_.jsx)(u.Text,{style:p._.ml.sm,size:j.STORYBOOK?12:n,bold:!0,children:l.title})]}),(0,_.jsx)(u.Heatmap,{id:"条目.跳转",from:"系列"})]})},b.DEFAULT_PROPS,b.COMPONENT_MAIN);t.default=o;try{series.displayName="series",series.__docgenInfo={description:"",displayName:"series",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ cover: { marginLeft: number; backgroundColor: "rgb(255, 255, 255)" | "rgb(238, 238, 240)" | "rgb(36, 36, 36)" | "rgb(24, 24, 24)"; }; relation: { paddingLeft: number; marginTop: number; marginBottom: number; }; series: { ...; }; icon: { ...; }; }'}},showRelation:{defaultValue:null,description:"",name:"showRelation",required:!0,type:{name:"LayoutValue"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"number"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},subjectPrev:{defaultValue:null,description:"",name:"subjectPrev",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectAfter:{defaultValue:null,description:"",name:"subjectAfter",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectSeries:{defaultValue:null,description:"",name:"subjectSeries",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectAnime:{defaultValue:null,description:"",name:"subjectAnime",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}},subjectDiff:{defaultValue:null,description:"",name:"subjectDiff",required:!0,type:{name:"DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/cover/m/${string}.jpg`; title: string; type: string; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/series/series.tsx#series"]={docgenInfo:series.__docgenInfo,name:"series",path:"src/screens/home/subject/component/series/series.tsx#series"})}catch(e){}},"./src/screens/home/subject/component/series/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{cover:{marginLeft:o._.sm,backgroundColor:o._.select(o._.colorBg,o._.colorPlain)},relation:{paddingLeft:2,marginTop:o._.sm+4,marginBottom:o._.sm+4},series:{width:o._.r(180),paddingLeft:2,paddingRight:o._.sm,marginVertical:o._.sm+2,borderRadius:o._.radiusSm,overflow:"hidden"},icon:{marginRight:-o._.sm}}})},"./src/screens/home/subject/component/smb/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/subject/icon/hidden.tsx")),l=o(s("./src/screens/home/subject/icon/smb.tsx")),u=s("./src/screens/home/subject/component/smb/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n=t.$;return d.STORYBOOK||d.IOS||!(t=c.smbStore.subject(n.subjectId))||-1===(s=c.systemStore.setting.showSMB)?null:(o=(0,u.memoStyles)(),(0,m.jsxs)(r.default,{style:o.container,children:[(0,m.jsx)(i.SectionTitle,{right:s?(0,m.jsx)(l.default,{}):(0,m.jsx)(a.default,{name:"本地",value:"showSMB"}),icon:!s&&"md-navigate-next",onPress:function(){return n.onSwitchBlock("showSMB")},children:"本地"}),s&&(0,m.jsx)(i.FolderSMB,{smb:t.smb,folder:t.folder})]}))});try{smb.displayName="smb",smb.__docgenInfo={description:"",displayName:"smb",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/smb/index.tsx#smb"]={docgenInfo:smb.__docgenInfo,name:"smb",path:"src/screens/home/subject/component/smb/index.tsx#smb"})}catch(e){}},"./src/screens/home/subject/component/smb/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{paddingTop:o._.md,paddingHorizontal:o._.wind,marginTop:o._.md}}})},"./src/screens/home/subject/component/staff/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Staff");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},showStaff:!0,subjectId:0,staff:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/component/staff/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/staff/staff.tsx")),o=s("./src/screens/home/subject/component/staff/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showStaff[1]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_STAFF)}}),(0,a.jsx)(d.default,{navigation:t,showStaff:r.systemStore.setting.showStaff,subjectId:e.subjectId,staff:e.staff,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/staff/staff.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/screens/home/subject/ds.ts"),m=o(s("./src/screens/home/subject/icon/hidden.tsx")),p=o(s("./src/screens/home/subject/icon/staff.tsx")),o=s("./src/screens/home/subject/component/staff/ds.ts"),f=s("./src/screens/home/subject/component/staff/styles.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var n=e.navigation,t=e.showStaff,r=e.subjectId,s=e.staff,o=e.onSwitchBlock;return(0,j.jsxs)(c.InView,{style:(0,a.stl)(f.styles.container,!t&&d._.short),children:[(0,j.jsx)(c.SectionTitle,{style:d._.container.wind,right:t?(0,j.jsx)(p.default,{}):(0,j.jsx)(m.default,{name:u.TITLE_STAFF,value:"showStaff"}),icon:!t&&"md-navigate-next",onPress:function(){return o("showStaff")},children:u.TITLE_STAFF}),t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.HorizontalList,{style:d._.mt.sm,data:s,quality:!1,initialRenderNums:d._.device(Math.floor(d._.window.contentWidth/56)+1,8),onPress:function(e){var t=e.id,s=e.name,o=e.nameJP,e=e._image;(0,l.t)("条目.跳转",{to:"Mono",from:u.TITLE_STAFF,subjectId:r}),n.push("Mono",{monoId:"person/"+t,_name:s,_jp:o,_image:e})}}),(0,j.jsx)(i.Heatmap,{id:"条目.跳转",from:u.TITLE_STAFF})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{staff.displayName="staff",staff.__docgenInfo={description:"",displayName:"staff",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},showStaff:{defaultValue:null,description:"",name:"showStaff",required:!0,type:{name:"LayoutValue"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},staff:{defaultValue:null,description:"",name:"staff",required:!0,type:{name:"Staff[] | DeepPartial<{ id: Id; image: `//lain.bgm.tv/pic/crt/g/${string}.jpg?r=${number}`; name: string; desc: string; }>[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/staff/staff.tsx#staff"]={docgenInfo:staff.__docgenInfo,name:"staff",path:"src/screens/home/subject/component/staff/staff.tsx#staff"})}catch(e){}},"./src/screens/home/subject/component/staff/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:140,marginTop:s._.lg}})},"./src/screens/home/subject/component/summary/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Summary");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},showSummary:!0,translateResult:[],content:"",onSwitchBlock:function(){}}},"./src/screens/home/subject/component/summary/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/summary/summary.tsx")),o=s("./src/screens/home/subject/component/summary/ds.ts"),a=s("./src/screens/home/subject/component/summary/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef;return(e=t.$).showSummary[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_SUMMARY)}}),(0,l.jsx)(d.default,{styles:(0,a.memoStyles)(),showSummary:r.systemStore.setting.showSummary,translateResult:e.state.translateResult.slice(),content:e.summary.replace(/\r\n\r\n/g,"\r\n"),onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/summary/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:210,paddingHorizontal:o._.wind,marginTop:o._.sm},hide:{paddingHorizontal:o._.wind,marginTop:o._.sm,marginBottom:-o._.sm}}})},"./src/screens/home/subject/component/summary/summary.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/subject/ds.ts"),u=o(s("./src/screens/home/subject/icon/hidden.tsx")),m=o(s("./src/screens/home/subject/icon/translate.tsx")),o=s("./src/screens/home/subject/component/summary/ds.ts"),p=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.styles,s=e.showSummary,o=e.translateResult,n=e.content,r=e.onSwitchBlock;return(0,p.jsxs)(i.default,{style:s?t.container:t.hide,children:[(0,p.jsx)(d.SectionTitle,{right:s?(0,p.jsx)(m.default,{content:n}):(0,p.jsx)(u.default,{name:l.TITLE_SUMMARY,value:"showSummary"}),icon:!s&&"md-navigate-next",onPress:function(){return r("showSummary")},children:l.TITLE_SUMMARY}),s&&(0,p.jsx)(i.default,{children:o.length?(0,p.jsx)(i.default,{children:o.map(function(e,t){return(0,p.jsxs)(i.default,{style:a._.mt.sm,children:[(0,p.jsx)(c.Text,{style:a._.mt.md,type:"sub",size:12,lineHeight:14,selectable:!0,children:e.src.trim()}),(0,p.jsx)(c.Text,{style:a._.mt.sm,size:15,lineHeight:17,bold:!0,selectable:!0,children:e.dst.trim()})]},t)})}):!!n&&(0,p.jsx)(c.Expand,{ratio:.88,children:(0,p.jsx)(c.Text,{style:a._.mt.sm,size:15,lineHeight:22,selectable:!0,children:n})})})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN,function(e){return Object.assign({},e,{translateResult:e.translateResult.length})});t.default=s;try{summary.displayName="summary",summary.__docgenInfo={description:"",displayName:"summary",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; paddingHorizontal: number; marginTop: number; }; hide: { paddingHorizontal: number; marginTop: number; marginBottom: number; }; }"}},showSummary:{defaultValue:null,description:"",name:"showSummary",required:!0,type:{name:"LayoutValue"}},translateResult:{defaultValue:null,description:"",name:"translateResult",required:!0,type:{name:"any[]"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"string"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/summary/summary.tsx#summary"]={docgenInfo:summary.__docgenInfo,name:"summary",path:"src/screens/home/subject/component/summary/summary.tsx#summary"})}catch(e){}},"./src/screens/home/subject/component/tags/block/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/tags/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Block")},"./src/screens/home/subject/component/tags/block/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./src/screens/home/subject/component/tags/styles.ts"),n=s("./src/screens/home/subject/component/tags/block/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,o=e.path,e=e.tags,n=t.$,r=t.navigation;return null!=e&&e.length?(s=(0,u.memoStyles)(),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.Flex,{style:(0,a.stl)(s.badge,d.systemStore.setting.subjectTagsExpand&&s.badgeExpand),children:(0,m.jsx)(c.Text,{size:13,type:"sub",children:"第三方标签"})}),e.map(function(e){return(0,m.jsx)(c.Touchable,{animate:!0,scale:.9,onPress:function(){(0,l.t)("条目.跳转",{to:o,from:"标签",subjectId:n.subjectId}),r.push(o,{_tags:[e]})},children:(0,m.jsx)(i.default,{style:s.item,children:(0,m.jsx)(c.Text,{size:13,bold:!0,children:e})})},e)})]})):null},n.COMPONENT)},"./src/screens/home/subject/component/tags/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Tags");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,subjectType:"",showTags:!0,subjectTagsExpand:!0,subjectTagsRec:!1,rank:0,focusOrigin:!1,tag:[],tags:[],animeTags:[],hentaiTags:[],gameTags:[],mangaTags:[],wenkuTags:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/component/tags/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/tags/tags.tsx")),o=s("./src/screens/home/subject/component/tags/ds.ts"),a=s("./src/screens/home/subject/component/tags/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showTags[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_TAGS)}}),(0,l.jsx)(d.default,{navigation:t,styles:(0,a.memoStyles)(),subjectId:e.subjectId,subjectType:e.subjectType,showTags:r.systemStore.setting.showTags,subjectTagsExpand:r.systemStore.setting.subjectTagsExpand,subjectTagsRec:r.systemStore.setting.subjectTagsRec,rank:e.rank,focusOrigin:r.systemStore.setting.focusOrigin,tag:e.collection.tag,tags:e.tags,animeTags:e.animeTags,hentaiTags:e.hentaiTags,gameTags:e.gameTags,mangaTags:e.mangaTags,wenkuTags:e.wenkuTags,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/tags/rec-segment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DS=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/tags/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"RecSegement"),t.DS=["数量","排名"]},"./src/screens/home/subject/component/tags/rec-segment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/utils/fetch/index.ts"),c=s("./src/screens/home/subject/component/tags/rec-segment/ds.ts"),d=s("./src/screens/home/subject/component/tags/rec-segment/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,t=r.systemStore.setting.subjectTagsRec?1:0;return(0,a.jsx)(n.SegmentedControl,{style:d.styles.segment,size:11,values:c.DS,selectedIndex:t,onValueChange:function(){(0,i.t)("条目.切换标签类型",{subjectId:s.subjectId}),r.systemStore.switchSetting("subjectTagsRec")}},String(t))},c.COMPONENT);try{recsegment.displayName="recsegment",recsegment.__docgenInfo={description:"",displayName:"recsegment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/tags/rec-segment/index.tsx#recsegment"]={docgenInfo:recsegment.__docgenInfo,name:"recsegment",path:"src/screens/home/subject/component/tags/rec-segment/index.tsx#recsegment"})}catch(e){}},"./src/screens/home/subject/component/tags/rec-segment/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({segment:{width:s._.r(88),height:s._.r(28),marginRight:s._.xs,marginLeft:s._.md}})},"./src/screens/home/subject/component/tags/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:96},loading:{height:96},onair:{marginTop:-8},badge:{height:24,paddingRight:o._.md,paddingLeft:o._.sm},badgeExpand:{paddingBottom:8},item:{paddingVertical:o._.r(2),paddingHorizontal:o._.r(8),marginRight:o._.r(8),marginBottom:o._.r(8),backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderWidth:1,borderColor:o._.select(o._.colorBorder,o._._colorDarkModeLevel1),borderRadius:o._.radiusSm,overflow:"hidden"},selected:{backgroundColor:o._.select(o._.colorPrimaryLight,o._._colorDarkModeLevel1),borderColor:o._.select(o._.colorPrimaryBorder,o._._colorDarkModeLevel1)},more:{paddingVertical:o._.md,paddingHorizontal:100,marginTop:-o._.sm,borderRadius:o._.radiusSm,overflow:"hidden"}}})},"./src/screens/home/subject/component/tags/tags.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),_=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),y=s("./src/components/index.ts"),x=s("./src/screens/_/index.ts"),g=s("./src/stores/index.ts"),v=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),O=s("./src/utils/fetch/index.ts"),S=s("./src/constants/index.ts"),T=s("./src/screens/home/subject/ds.ts"),E=o(s("./src/screens/home/subject/icon/game.tsx")),P=o(s("./src/screens/home/subject/icon/hidden.tsx")),I=o(s("./src/screens/home/subject/component/tags/block/index.tsx")),C=o(s("./src/screens/home/subject/component/tags/rec-segment/index.tsx")),R=o(s("./src/screens/home/subject/component/tags/typerank/index.tsx")),N=s("./src/screens/home/subject/component/tags/typerank/utils.ts"),o=s("./src/screens/home/subject/component/tags/ds.ts"),w=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var r=e.navigation,i=e.styles,c=e.subjectId,d=e.subjectType,t=e.showTags,s=e.subjectTagsExpand,a=e.subjectTagsRec,l=e.rank,o=e.focusOrigin,u=e.tag,n=e.tags,m=e.animeTags,p=e.hentaiTags,f=e.gameTags,j=e.mangaTags,h=e.wenkuTags,b=e.onSwitchBlock,e=(0,w.jsxs)(w.Fragment,{children:[n.map(function(e,t){var s=e.name,e=e.count,o=u.includes(s),n=!!l&&a;return(0,w.jsx)(y.Touchable,{animate:!0,scale:.9,onPress:function(){n&&(0,N.exist)(S.MODEL_SUBJECT_TYPE.getLabel(d),s)?((0,O.t)("条目.跳转",{to:"Typerank",from:T.TITLE_TAGS,subjectId:c}),r.push("Typerank",{type:S.MODEL_SUBJECT_TYPE.getLabel(d),tag:s,subjectId:c})):((0,O.t)("条目.跳转",{to:"Tag",from:T.TITLE_TAGS,subjectId:c}),r.push("Tag",{type:S.MODEL_SUBJECT_TYPE.getLabel(d),tag:s}))},children:(0,w.jsxs)(y.Flex,{style:(0,v.stl)(i.item,o&&i.selected),children:[(0,w.jsx)(y.Text,{type:g._.select("desc",o?"main":"desc"),size:13,bold:!0,children:s}),n?(0,w.jsx)(R.default,{tag:s}):(0,w.jsxs)(y.Text,{type:g._.select("sub",o?"main":"sub"),size:12,lineHeight:13,bold:!0,children:[" ",e]})]})},t)}),(0,w.jsx)(I.default,{path:"Anime",tags:m}),(0,w.jsx)(I.default,{path:"Hentai",tags:p}),(0,w.jsx)(I.default,{path:"Game",tags:f}),(0,w.jsx)(I.default,{path:"Manga",tags:j}),(0,w.jsx)(I.default,{path:"Wenku",tags:h})]}),m=t&&!!n.length;return(0,w.jsxs)(_.default,{style:(0,v.stl)(g._.mt.lg,t?i.container:g._.short,!m&&g._.mb.md),children:[(0,w.jsx)(x.SectionTitle,{style:g._.container.wind,right:t?(0,w.jsxs)(w.Fragment,{children:[!o&&(0,w.jsx)(E.default,{}),!!l&&(0,w.jsx)(C.default,{})]}):(0,w.jsx)(P.default,{name:T.TITLE_TAGS,value:"showTags"}),icon:!t&&"md-navigate-next",onPress:function(){return b("showTags")},children:T.TITLE_TAGS}),m&&(0,w.jsx)(w.Fragment,{children:s?(0,w.jsxs)(_.default,{style:g._.container.windMtSm,children:[(0,w.jsx)(y.Flex,{wrap:"wrap",children:e}),(0,w.jsx)(y.Heatmap,{id:"条目.跳转",from:T.TITLE_TAGS})]}):(0,w.jsx)(y.ScrollView,{style:g._.mt.md,contentContainerStyle:g._.container.wind,horizontal:!0,children:e})}),m&&(0,w.jsx)(_.default,{style:i.more,children:(0,w.jsx)(y.Touchable,{onPress:function(){return g.systemStore.switchSetting("subjectTagsExpand")},children:(0,w.jsx)(y.Flex,{justify:"center",children:(0,w.jsx)(y.Iconfont,{name:s?"md-keyboard-arrow-up":"md-keyboard-arrow-down",size:g._.device(24,32)})})})}),(0,w.jsx)(x.PreventTouchPlaceholder,{})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{tags.displayName="tags",tags.__docgenInfo={description:"",displayName:"tags",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; }; loading: { height: number; }; onair: { marginTop: number; }; badge: { height: number; paddingRight: number; paddingLeft: number; }; badgeExpand: { paddingBottom: number; }; item: { ...; }; selected: { ...; }; more: { ...; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},subjectType:{defaultValue:null,description:"",name:"subjectType",required:!0,type:{name:"enum",value:[{value:'"1"'},{value:'"2"'},{value:'"4"'},{value:'"3"'},{value:'"6"'}]}},showTags:{defaultValue:null,description:"",name:"showTags",required:!0,type:{name:"LayoutValue"}},subjectTagsExpand:{defaultValue:null,description:"",name:"subjectTagsExpand",required:!0,type:{name:"boolean"}},subjectTagsRec:{defaultValue:null,description:"",name:"subjectTagsRec",required:!0,type:{name:"boolean"}},rank:{defaultValue:null,description:"",name:"rank",required:!0,type:{name:"number"}},focusOrigin:{defaultValue:null,description:"",name:"focusOrigin",required:!0,type:{name:"boolean"}},tag:{defaultValue:null,description:"",name:"tag",required:!0,type:{name:"string[]"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"DeepPartial<{ name: string; count: string; }>[]"}},animeTags:{defaultValue:null,description:"",name:"animeTags",required:!0,type:{name:'("游戏" | "奇幻" | "搞笑" | "战斗" | "校园" | "冒险" | "科幻" | "治愈" | "爱情" | "百合" | "热血" | "后宫" | "励志" | "悬疑" | "轻小说" | "剧情" | "竞技" | "青春" | "女性向" | "泡面番" | "机战" | "萝莉" | "歌舞" | "神魔" | "战争" | "魔法" | "社会" | ... 18 more ... | "穿越")[]'}},hentaiTags:{defaultValue:null,description:"",name:"hentaiTags",required:!0,type:{name:'("异世界" | "百合" | "后宫" | "耽美" | "伪娘" | "偶像" | "姐" | "妹" | "母" | "人妻" | "青梅竹马" | "处女" | "御姐" | "熟女" | "JK" | "运动少女" | "大小姐" | "老师" | "女医护士" | "女僕" | "巫女" | "修女" | "OL" | "风俗娘" | "公主" | "女骑士" | ... 54 more ... | "世界末日")[]'}},gameTags:{defaultValue:null,description:"",name:"gameTags",required:!0,type:{name:'("音乐" | "冒险" | "科幻" | "剧情" | "竞技" | "恐怖" | "动作" | "角色扮演" | "射击" | "策略" | "第三人称" | "独立" | "文字" | "模拟" | "主视角" | "平台" | "解谜" | "多人" | "格斗" | "回合制" | "育成" | "益智" | "生存" | "体育" | "沙箱" | "开放世界" | ... 20 more ... | "养成")[]'}},mangaTags:{defaultValue:null,description:"",name:"mangaTags",required:!0,type:{name:'("音乐" | "其他" | "奇幻" | "校园" | "冒险" | "科幻" | "爱情" | "百合" | "热血" | "后宫" | "励志" | "悬疑" | "竞技" | "机战" | "战争" | "魔法" | "职场" | "武侠" | "耽美" | "恐怖" | "伪娘" | "穿越" | "格斗" | "生存" | "幽默" | "少女" | "生活" | ... 19 more ... | "杂志")[]'}},wenkuTags:{defaultValue:null,description:"",name:"wenkuTags",required:!0,type:{name:"string[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/tags/tags.tsx#tags"]={docgenInfo:tags.__docgenInfo,name:"tags",path:"src/screens/home/subject/component/tags/tags.tsx#tags"})}catch(e){}},"./src/screens/home/subject/component/tags/typerank/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/tags/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Typerank")},"./src/screens/home/subject/component/tags/typerank/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/subject/component/tags/typerank/utils.ts"),c=s("./src/screens/home/subject/component/tags/typerank/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){return e=e.tag,t=t.$,e=(0,i.exist)(t.subjectTypeValue,e)?"优于"+(0,i.calc)(t.subjectTypeValue,e,t.rank||9999)+"%":"--",(0,d.jsx)(n.Text,{style:r._.ml.xs,type:"sub",size:12,lineHeight:13,bold:!0,children:e})},c.COMPONENT)},"./src/screens/home/subject/component/tags/typerank/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.calc=function(e,t,s){var o,n=e+"|"+t+"|"+s;if(p.has(n))return p.get(n);"anime"===e?o=d.default:"book"===e?o=a.default:"game"===e?o=l.default:"music"===e?o=u.default:"real"===e&&(o=m.default);var r=o[t];if(s<=o[t][0])return 99;for(var i=0,c=0;c<r.length&&!(s<r[c]);c+=1)i+=1;n=Math.max(Math.min(Math.floor(100*(1-i/r.length)),99),1);return p.set(t,n),n},t.exist=function(e,t){if(!e||!t)return!1;var s;"anime"===e?s=d.default:"book"===e?s=a.default:"game"===e?s=l.default:"music"===e?s=u.default:"real"===e&&(s=m.default);return!!s&&!!s[t]},o(s("./src/assets/json/typerank/anime.json"))),a=o(s("./src/assets/json/typerank/book.json")),l=o(s("./src/assets/json/typerank/game.json")),u=o(s("./src/assets/json/typerank/music.json")),m=o(s("./src/assets/json/typerank/real.json")),p=new Map},"./src/screens/home/subject/component/thumbs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.THUMB_WIDTH=t.THUMB_HEIGHT=t.IMAGE_HEIGHT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Thumbs"),t.IMAGE_HEIGHT=144,t.THUMB_WIDTH=Math.floor(144/.56),t.THUMB_HEIGHT=144},"./src/screens/home/subject/component/thumbs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js")),p=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),f=s("./src/components/index.ts"),j=s("./src/screens/_/index.ts"),h=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),_=s("./src/utils/decorators/index.ts"),y=s("./src/utils/dev/index.ts"),x=s("./src/constants/index.ts"),g=s("./src/screens/home/subject/ds.ts"),v=o(s("./src/screens/home/subject/icon/hidden.tsx")),O=o(s("./src/screens/home/subject/icon/preview.tsx")),S=o(s("./src/screens/home/subject/component/thumbs/preview/index.tsx")),T=o(s("./src/screens/home/subject/component/thumbs/video/index.tsx")),E=s("./src/screens/home/subject/component/thumbs/ds.ts"),P=s("./src/screens/home/subject/component/thumbs/styles.ts"),I=s("./node_modules/react/jsx-runtime.js");function C(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}o=u.default.Component,(0,c.default)(N,o),R=C(N),(0,r.default)(N,[{key:"data",get:function(){var e=this.context.$.state.epsThumbs;return this.state.scrolled?e.slice():e.filter(function(e,t){return t<5})}},{key:"videos",get:function(){return this.context.$.state.videos.slice()}},{key:"title",get:function(){var e=this.context.$;return"音乐"===e.type?"MV":"三次元"===e.type?"剧照":"预览"}},{key:"reference",get:function(){var e,t=this.context.$.state.epsThumbsHeader;return null!=t&&null!=(e=t.Referer)&&e.includes("douban.com")?"douban.com":null!=t&&null!=(e=t.Referer)&&e.includes("bilibili.com")?"bilibili.com":""}},{key:"thumbs",get:function(){var e=this.context.$.state,t=e.epsThumbs,s=e.epsThumbsHeader;return t.map(function(e){return{url:String(null==(e=e.split("@"))?void 0:e[0]).replace("img1.doubanio.com","img2.doubanio.com"),headers:Object.assign({},s)}})}},{key:"renderRight",value:function(){var e=h.systemStore.setting.showThumbs,t=this.context.$,s=t.state.epsThumbsHeader;return e?t.isLimit?null:(0,I.jsx)(O.default,{data:t.state.epsThumbs,headers:s}):(0,I.jsx)(v.default,{name:this.title,value:"showThumbs"})}},{key:"render",value:function(){var s=this;(0,y.r)(E.COMPONENT);var e,o,t,n,r=this.context.$;return r.showThumbs[1]?(e=h.systemStore.setting.showThumbs,o=r.state.epsThumbsHeader,t=this.props.onBlockRef,n=this.state.scrolled,(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(p.default,{style:h._.container.layout,ref:function(e){return t(e,g.TITLE_THUMBS)}}),(0,I.jsxs)(j.InView,{style:(0,b.stl)(P.styles.container,!e&&h._.short),children:[(0,I.jsx)(j.SectionTitle,{style:h._.container.wind,right:this.renderRight(),icon:!e&&"md-navigate-next",onPress:function(){return r.onSwitchBlock("showThumbs")},children:this.title}),e&&(0,I.jsxs)(m.default,Object.assign({style:h._.mt.md,contentContainerStyle:h._.container.wind,horizontal:!0},x.SCROLL_VIEW_RESET_PROPS,{scrollEventThrottle:8,onScroll:n?void 0:this.onScroll,children:[this.videos.map(function(e){return(0,I.jsx)(T.default,{item:e,epsThumbsHeader:o,showTitle:"音乐"===r.type},e.cover)}),this.data.filter(function(e,t){return t<=12}).map(function(e,t){return(0,I.jsx)(S.default,{item:e,index:t,thumbs:s.thumbs,epsThumbsHeader:o},e)})]})),e&&!!this.reference&&(0,I.jsxs)(f.Flex,{style:[h._.container.wind,h._.mt.md],justify:"end",children:[(0,I.jsxs)(f.Text,{size:10,type:"icon",align:"right",onPress:function(){return(0,b.open)(o.Referer)},children:["数据来源自 ",this.reference]}),(0,I.jsx)(f.Iconfont,{style:h._.ml.xs,name:"md-open-in-new",size:10,color:h._.colorIcon})]}),(0,I.jsx)(j.PreventTouchPlaceholder,{}),(0,I.jsx)(f.Heatmap,{id:"条目.预览"})]})]})):null}}]);var R,s=N;function N(){var e;(0,n.default)(this,N);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=R.call.apply(R,[this].concat(s)),(0,l.default)((0,i.default)(e),"state",{scrolled:!1}),(0,l.default)((0,i.default)(e),"onScroll",function(){e.state.scrolled||e.setState({scrolled:!0})}),e}t.default=(0,_.obc)(s);try{thumbs.displayName="thumbs",thumbs.__docgenInfo={description:"",displayName:"thumbs",props:{onBlockRef:{defaultValue:null,description:"",name:"onBlockRef",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/thumbs/index.tsx#thumbs"]={docgenInfo:thumbs.__docgenInfo,name:"thumbs",path:"src/screens/home/subject/component/thumbs/index.tsx#thumbs"})}catch(e){}},"./src/screens/home/subject/component/thumbs/preview/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/thumbs/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Preview")},"./src/screens/home/subject/component/thumbs/preview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/screens/home/subject/component/thumbs/ds.ts"),n=s("./src/screens/home/subject/component/thumbs/preview/ds.ts"),u=s("./src/screens/home/subject/component/thumbs/preview/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.item,o=e.index,n=e.thumbs,e=e.epsThumbsHeader,r=t.$;return c.systemStore.setting.showCharacter?(0,m.jsx)(i.Touchable,{style:(0,d.stl)(u.styles.image,!o&&u.styles.side),animate:!0,onPress:function(){(0,a.t)("条目.预览",{subjectId:r.subjectId}),(0,d.showImageViewer)(n.filter(function(e,t){return t<12}),o)},children:(0,m.jsx)(i.Image,{src:s.replace("img1.doubanio.com","img2.doubanio.com"),autoHeight:l.IMAGE_HEIGHT,headers:e,errorToHide:!0},s)}):null},n.COMPONENT)},"./src/screens/home/subject/component/thumbs/preview/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts"),s=s("./src/screens/home/subject/component/thumbs/ds.ts");t.styles=o._.create({image:{height:s.IMAGE_HEIGHT,marginLeft:o._.sm+2,borderRadius:o._.radiusMd,overflow:"hidden"},side:{marginLeft:0}})},"./src/screens/home/subject/component/thumbs/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:210,marginTop:s._.lg}})},"./src/screens/home/subject/component/thumbs/video/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/thumbs/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Video")},"./src/screens/home/subject/component/thumbs/video/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/subject/component/thumbs/ds.ts"),a=s("./src/screens/home/subject/component/thumbs/video/ds.ts"),l=s("./src/screens/home/subject/component/thumbs/video/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ob)(function(e){var t=e.item,s=e.epsThumbsHeader,e=e.showTitle;return i.systemStore.setting.showCharacter?(0,u.jsx)(n.default,{style:l.styles.video,children:(0,u.jsxs)(r.Touchable,{animate:!0,onPress:function(){return(0,c.open)(t.src||t.href)},children:[(0,u.jsx)(r.Image,{src:t.cover,size:d.THUMB_WIDTH,height:d.THUMB_HEIGHT,headers:s,radius:i._.radiusMd}),(0,u.jsx)(n.default,{style:l.styles.play,children:(0,u.jsx)(n.default,{style:l.styles.touch,children:(0,u.jsx)(r.Flex,{style:l.styles.touch,justify:"center",children:(0,u.jsx)(r.Text,{style:l.styles.icon,type:"__plain__",children:"▶"})})})}),e&&!!t.title&&(0,u.jsx)(r.Text,{style:l.styles.title,size:11,bold:!0,numberOfLines:3,align:"center",children:t.title})]})}):null},a.COMPONENT);try{video.displayName="video",video.__docgenInfo={description:"",displayName:"video",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},epsThumbsHeader:{defaultValue:null,description:"",name:"epsThumbsHeader",required:!0,type:{name:"any"}},showTitle:{defaultValue:null,description:"",name:"showTitle",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/thumbs/video/index.tsx#video"]={docgenInfo:video.__docgenInfo,name:"video",path:"src/screens/home/subject/component/thumbs/video/index.tsx#video"})}catch(e){}},"./src/screens/home/subject/component/thumbs/video/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts"),s=s("./src/screens/home/subject/component/thumbs/ds.ts");t.styles=o._.create({video:{width:s.THUMB_WIDTH,marginRight:o._.sm+2},play:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0},touch:{height:s.IMAGE_HEIGHT,opacity:.92},icon:{fontSize:40,lineHeight:o._.ios(52,56)},title:{padding:o._.sm,opacity:.8}})},"./src/screens/home/subject/component/topic/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Topic");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={navigation:{},styles:{},subjectId:0,showTopic:!0,topic:[],onSwitchBlock:function(){}}},"./src/screens/home/subject/component/topic/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/subject/ds.ts"),d=o(s("./src/screens/home/subject/component/topic/topic.tsx")),o=s("./src/screens/home/subject/component/topic/ds.ts"),a=s("./src/screens/home/subject/component/topic/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=e.onBlockRef,e=t.$,t=t.navigation;return e.showTopic[1]?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{style:r._.container.layout,ref:function(e){return s(e,c.TITLE_TOPIC)}}),(0,l.jsx)(d.default,{navigation:t,styles:(0,a.memoStyles)(),showTopic:r.systemStore.setting.showTopic,subjectId:e.subjectId,topic:e.filterTopic,onSwitchBlock:e.onSwitchBlock})]}):null},o.COMPONENT)},"./src/screens/home/subject/component/topic/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{minHeight:120,marginTop:o._.lg},item:{paddingLeft:o._.wind}}})},"./src/screens/home/subject/component/topic/topic.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.small.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/utils/hooks/index.ts"),m=s("./src/screens/home/subject/ds.ts"),p=o(s("./src/screens/home/subject/icon/hidden.tsx")),f=o(s("./src/screens/home/subject/icon/topic.tsx")),o=s("./src/screens/home/subject/component/topic/ds.ts"),j=s("./node_modules/react/jsx-runtime.js"),s=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.showTopic,n=e.subjectId,r=e.topic,i=e.onSwitchBlock,e=(0,u.useExpandLazy)(r,4),r=e.list,e=e.onExpand;return(0,j.jsxs)(d.InView,{style:(0,l.stl)(s.container,!o&&a._.short),children:[(0,j.jsx)(d.SectionTitle,{style:a._.container.wind,right:o?(0,j.jsx)(f.default,{}):(0,j.jsx)(p.default,{name:m.TITLE_TOPIC,value:"showTopic"}),icon:!o&&"md-navigate-next",onPress:function(){return i("showTopic")},children:m.TITLE_TOPIC}),o&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Expand,{style:a._.mt.sm,onExpand:e,children:r.map(function(e){return(0,j.jsx)(d.ItemArticle,{style:s.item,navigation:t,avatar:e.user.avatar.small,title:e.title,nickname:e.user.nickname,userId:e.user.username,timestamp:e.timestamp,replies:e.replies,url:e.url,event:{id:"条目.跳转",data:{from:"讨论版",subjectId:n}}},e.id)})}),(0,j.jsx)(c.Heatmap,{id:"条目.跳转",from:"讨论版"})]})]})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{topic.displayName="topic",topic.__docgenInfo={description:"",displayName:"topic",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ container: { minHeight: number; marginTop: number; }; item: { paddingLeft: number; }; }"}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},showTopic:{defaultValue:null,description:"",name:"showTopic",required:!0,type:{name:"LayoutValue"}},topic:{defaultValue:null,description:"",name:"topic",required:!0,type:{name:"Topic[]"}},onSwitchBlock:{defaultValue:null,description:"",name:"onSwitchBlock",required:!0,type:{name:'(key: "s2t" | "simple" | "source" | "quality" | "katakana" | "ripple" | "cdn" | "hideScore" | "transition" | "showTags" | "cnFirst" | "tinygrail" | "userPagination" | "discoveryMenu" | ... 84 more ... | "blurModal") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/topic/topic.tsx#topic"]={docgenInfo:topic.__docgenInfo,name:"topic",path:"src/screens/home/subject/component/topic/topic.tsx#topic"})}catch(e){}},"./src/screens/home/subject/component/track-comment/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.POPOVER_DATA=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"TrackComment"),t.POPOVER_DATA={"动画":["取消动画特别关注"],"书籍":["取消书籍特别关注"],"游戏":["取消游戏特别关注"],"音乐":["取消音乐特别关注"],"三次元":["取消三次元评别关注"]}},"./src/screens/home/subject/component/track-comment/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),m=s("./src/screens/home/subject/component/track-comment/ds.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var n,r=t.$,i=t.navigation;return r.subjectTypeValue&&null!=(t=a.systemStore.setting["comment"+(0,l.titleCase)(r.subjectTypeValue)])&&t.length&&(t=t.filter(function(e){e=a.collectionStore.usersSubjectCollection(e,r.subjectId);return!!(e._loaded&&e.update_at&&e.type)})).length?(n={id:"条目.跳转",data:{from:"特别关注",subjectId:r.subjectId}},(0,p.jsxs)(d.InView,{style:a._.mt.sm,children:[t.map(function(e){var t=a.collectionStore.usersSubjectCollection(e,r.subjectId),s=a.usersStore.usersInfo(e),o=String(u.MODEL_COLLECTION_STATUS.getLabel(t.type)||"").replace("看",r.action);return(0,p.jsx)(d.ItemComment,{navigation:i,event:n,time:(0,l.lastDate)((0,l.getTimestamp)(t.update_at)),avatar:s.avatar,userId:e,userName:s.userName,star:r.hideScore?void 0:t.rate,status:o,comment:String(t.comment).replace(/[\r\n]/g,""),popoverData:m.POPOVER_DATA[r.type],like:!0,onSelect:r.onCancelTrackUsersCollection},e)}),(0,p.jsx)(c.Divider,{})]})):null},m.COMPONENT);try{trackcomment.displayName="trackcomment",trackcomment.__docgenInfo={description:"",displayName:"trackcomment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/component/track-comment/index.tsx#trackcomment"]={docgenInfo:trackcomment.__docgenInfo,name:"trackcomment",path:"src/screens/home/subject/component/track-comment/index.tsx#trackcomment"})}catch(e){}},"./src/screens/home/subject/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TITLE_TOPIC=t.TITLE_THUMBS=t.TITLE_TAGS=t.TITLE_SUMMARY=t.TITLE_STAFF=t.TITLE_RELATIONS=t.TITLE_RECENT=t.TITLE_RATING=t.TITLE_LIKE=t.TITLE_INFO=t.TITLE_HEAD=t.TITLE_GAME=t.TITLE_EP=t.TITLE_DISC=t.TITLE_COMMENT=t.TITLE_COMIC=t.TITLE_CHARACTER=t.TITLE_CATALOG=t.TITLE_BOX=t.TITLE_BLOG=t.TITLE_ANITABI=t.COMPONENT=void 0;t.COMPONENT="Subject",t.TITLE_HEAD="头部",t.TITLE_BOX="收藏",t.TITLE_EP="章节",t.TITLE_DISC="曲目列表",t.TITLE_TAGS="标签",t.TITLE_SUMMARY="简介",t.TITLE_INFO="详情",t.TITLE_RATING="评分",t.TITLE_CHARACTER="角色",t.TITLE_STAFF="制作人员",t.TITLE_THUMBS="预览",t.TITLE_ANITABI="取景地标",t.TITLE_GAME="游戏",t.TITLE_COMIC="单行本",t.TITLE_BLOG="日志",t.TITLE_TOPIC="帖子",t.TITLE_CATALOG="目录",t.TITLE_RELATIONS="关联",t.TITLE_LIKE="猜你喜欢",t.TITLE_RECENT="动态",t.TITLE_COMMENT="吐槽"},"./src/screens/home/subject/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Extra")},"./src/screens/home/subject/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/subject/component/modal/index.tsx")),o=s("./src/screens/home/subject/extra/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.default,{}),(0,c.jsx)(n.Heatmap,{id:"条目",screen:"Subject"})]})},o.COMPONENT)},"./src/screens/home/subject/header-component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.TopEls=t.COMPONENT=t.BottomEls=void 0,s("./src/utils/dev/index.ts")),r=o(s("./src/screens/home/subject/component/anitabi/index.tsx")),i=o(s("./src/screens/home/subject/component/blog/index.tsx")),c=o(s("./src/screens/home/subject/component/box/index.tsx")),d=o(s("./src/screens/home/subject/component/catalog/index.tsx")),a=o(s("./src/screens/home/subject/component/character/index.tsx")),l=o(s("./src/screens/home/subject/component/comic/index.tsx")),u=o(s("./src/screens/home/subject/component/comment/index.tsx")),m=o(s("./src/screens/home/subject/component/ep/index.tsx")),p=o(s("./src/screens/home/subject/component/game/index.tsx")),f=o(s("./src/screens/home/subject/component/info/index.tsx")),j=o(s("./src/screens/home/subject/component/like/index.tsx")),h=o(s("./src/screens/home/subject/component/lock/index.tsx")),b=o(s("./src/screens/home/subject/component/rating/index.tsx")),_=o(s("./src/screens/home/subject/component/recent/index.tsx")),y=o(s("./src/screens/home/subject/component/relations/index.tsx")),x=o(s("./src/screens/home/subject/component/smb/index.tsx")),g=o(s("./src/screens/home/subject/component/staff/index.tsx")),v=o(s("./src/screens/home/subject/component/summary/index.tsx")),O=o(s("./src/screens/home/subject/component/tags/index.tsx")),S=o(s("./src/screens/home/subject/component/thumbs/index.tsx")),T=o(s("./src/screens/home/subject/component/topic/index.tsx")),o=o(s("./src/screens/home/subject/component/track-comment/index.tsx")),s=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,n.rc)(s.COMPONENT,"HeaderComponent"),t.TopEls=[h.default,c.default,m.default,x.default,O.default,v.default,S.default,f.default,p.default,b.default,a.default,g.default],t.BottomEls=[r.default,y.default,l.default,d.default,j.default,i.default,T.default,_.default,u.default,o.default]},"./src/screens/home/subject/header-component/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),d=o(s("./src/screens/home/subject/component/bg/index.tsx")),a=o(s("./src/screens/home/subject/component/head/index.tsx")),l=o(s("./src/screens/home/subject/component/loading/index.tsx")),u=s("./src/screens/home/subject/header-component/ds.ts"),m=s("./src/screens/home/subject/header-component/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ob)(function(s){var e=(0,m.memoStyles)();return(0,p.jsxs)(p.Fragment,{children:[!c.IOS&&(0,p.jsx)(r.ErrorBoundary,{children:(0,p.jsx)(d.default,{})}),(0,p.jsx)(a.default,{onBlockRef:s.onBlockRef}),(0,p.jsxs)(n.default,{style:e.content,children:[u.TopEls.map(function(e,t){return(0,r.renderWithErrorBoundary)(e,t,s)}),u.BottomEls.map(function(e,t){return(0,r.renderWithErrorBoundary)(e,t,s)}),(0,p.jsx)(l.default,{})]})]})},u.COMPONENT);try{headercomponent.displayName="headercomponent",headercomponent.__docgenInfo={description:"",displayName:"headercomponent",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/header-component/index.tsx#headercomponent"]={docgenInfo:headercomponent.__docgenInfo,name:"headercomponent",path:"src/screens/home/subject/header-component/index.tsx#headercomponent"})}catch(e){}},"./src/screens/home/subject/header-component/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{content:{backgroundColor:o._.colorPlain},title:{paddingHorizontal:o._.wind,marginTop:o._.lg}}})},"./src/screens/home/subject/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_WEB_SHARE=t.TEXT_SHARE=t.TEXT_POST_SHARE=t.TEXT_LAYOUT=t.TEXT_COPY=t.TEXT_APP=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/subject/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Header"),t.TEXT_COPY="复制链接",t.TEXT_SHARE="复制分享",t.TEXT_POST_SHARE="拼图分享",t.TEXT_WEB_SHARE="APP 网页版分享",t.TEXT_LAYOUT="重置布局",t.TEXT_APP="获取 APP"},"./src/screens/home/subject/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/web.timers.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),m=s("./src/utils/fetch/index.ts"),p=s("./src/constants/index.ts"),f=o(s("./src/screens/home/subject/component/header-title/index.tsx")),j=s("./src/screens/home/subject/header/ds.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.index,o=e.onScrollTo,n=t.$,r=t.navigation,e=n.state.fixed,i=l._.isDark||!e?"#fff":"#000",c=["浏览器打开 · "+n.subjectId,j.TEXT_COPY,j.TEXT_SHARE,j.TEXT_POST_SHARE,j.TEXT_WEB_SHARE,j.TEXT_LAYOUT];return p.STORYBOOK&&c.push(j.TEXT_APP),(0,h.jsx)(d.Header,{mode:"transition",statusBarEventsType:"Subject",fixed:e,title:"条目",domTitle:n.jp||n.cn,hm:[n.url,"Subject"],headerLeft:!e&&4<=s&&(0,h.jsx)(a.IconTouchable,{name:"icon-home",size:19,color:l._.__colorPlain__,onPress:function(){r.popToTop()}}),headerTitle:(0,h.jsx)(f.default,{$:n}),headerRight:function(){return(0,h.jsxs)(d.Flex,{children:[(0,h.jsx)(d.Header.Popover,{style:l._.mr.xs,data:n.locationDS,name:"md-menu-open",color:i,onSelect:function(e){setTimeout(function(){o(e)},0)}},String(n.locationDS.length)),(0,h.jsx)(d.Header.Popover,{data:c,color:i,onSelect:function(e){(0,m.t)("条目.右上角菜单",{subjectId:n.subjectId,key:e}),setTimeout(function(){switch(e){case j.TEXT_COPY:(0,u.copy)(n.url,"已复制链接");break;case j.TEXT_SHARE:(0,u.copy)("【链接】"+(0,u.cnjp)(n.cn,n.jp)+" | Bangumi番组计划\n"+n.url,"已复制分享文案");break;case j.TEXT_POST_SHARE:n.onPostShare(r);break;case j.TEXT_WEB_SHARE:n.onWebShare();break;case j.TEXT_LAYOUT:l.systemStore.resetSubjectLayout(),(0,u.info)("已重置");break;case j.TEXT_APP:(0,u.open)(p.URL_ABOUT);break;default:(0,u.open)(n.url)}},0)},children:(0,h.jsx)(d.Heatmap,{id:"条目.右上角菜单"})})]})}})},j.COMPONENT)},"./src/screens/home/subject/hooks.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),n=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.useSubjectPage=function(e){var i=e.$,t=(0,h.useIsFocusedRef)(),c=((0,h.useRunAfter)((0,r.default)(o.mark(function e(){return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout(function(){t.current&&i.setRendered()},480),e.next=3,i.init();case 3:(0,j.t)("条目.查看",{subjectId:i.subjectId,type:i.type});case 4:case"end":return e.stop()}},e)}))),(0,h.useFocusEffect)(function(){setTimeout(function(){u.StatusBar.setBarStyle(!m._.isDark&&i.state.fixed?"dark-content":"light-content")},80)}),(0,h.useMount)(function(){return function(){setTimeout(function(){i.unRendered(),i.setState({fixed:!1})},480)}}),(0,a.useRef)(null)),d=(0,a.useRef)({});return{forwardRef:(0,a.useCallback)(function(e){c.current=e},[]),onBlockRef:(0,a.useCallback)(function(e,t){d.current[t]=e},[]),onScrollIntoViewIfNeeded:(0,a.useCallback)(function(e){try{var t;"function"==typeof(null==c||null==(t=c.current)?void 0:t.scrollToOffset)&&c.current.scrollToOffset({animated:!0,offset:e+i.onScrollY})}catch(e){}},[]),onScrollTo:(0,a.useCallback)(function(n){try{var r=n.split("(")[0].trim();c.current&&d.current[r]&&(b.IOS||b.STORYBOOK?d.current[_.TITLE_HEAD].measure(function(e,t,s,o){d.current[r].measure(function(e,t){b.STORYBOOK?(0,f.scrollToTop)(t+o+116):c.current.scrollToOffset({offset:t+o-m._.headerHeight,animated:!0}),(0,p.feedback)(),(0,j.t)("条目.跳转位置",{subjectId:i.subjectId,component:n})})}):d.current[r].measureLayout((0,l.default)(c.current),function(e,t){c.current.scrollToOffset({offset:t-m._.headerHeight,animated:!0}),(0,p.feedback)(),(0,j.t)("条目.跳转位置",{subjectId:i.subjectId,component:n})}))}catch(e){}},[])}},n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),a=s("./node_modules/react/index.js"),l=n(s("./node_modules/react-native-web/dist/exports/findNodeHandle/index.js")),u=s("./src/components/index.ts"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),f=s("./src/utils/dom/index.ts"),j=s("./src/utils/fetch/index.ts"),h=s("./src/utils/hooks/index.ts"),b=s("./src/constants/index.ts"),_=s("./src/screens/home/subject/ds.ts")},"./src/screens/home/subject/icon/actions.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),i=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/screens/home/subject/icon/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.style,e=e.children,o=t.$,n=t.navigation,t=[].concat((0,r.default)(o.actions.map(function(e){return e.name})),[l.ACTIONS_MANAGE]);return(0,u.jsx)(c.Popover,{style:(0,a.stl)(!e&&m.touch,s),data:t,hitSlop:l.HIT_SLOP,onSelect:function(e){return o.onActionsPress(e,n)},children:e||(0,u.jsx)(i.Flex,{style:m.btn,justify:"center",children:(0,u.jsx)(i.Iconfont,{name:"md-read-more",color:d._.colorIcon,size:25})})})});var m=d._.create({touch:{marginRight:4,borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}})},"./src/screens/home/subject/icon/blog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showBlog?(0,a.jsx)(n.Touchable,{style:d.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Reviews",from:"日志",subjectId:s.subjectId}),o.push("Reviews",{subjectId:s.subjectId,name:s.cn})},children:(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Text,{type:"sub",children:"更多"}),(0,a.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});try{blog.displayName="blog",blog.__docgenInfo={description:"",displayName:"blog",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/blog.tsx#blog"]={docgenInfo:blog.__docgenInfo,name:"blog",path:"src/screens/home/subject/icon/blog.tsx#blog"})}catch(e){}},"./src/screens/home/subject/icon/catalog.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/app/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return(0,a.jsxs)(n.Touchable,{style:d.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"SubjectCatalogs",from:"目录",subjectId:s.subjectId}),o.push("SubjectCatalogs",{subjectId:s.subjectId,name:(0,r.cnjp)(s.cn,s.jp)})},children:[(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Text,{type:"sub",children:"更多"}),(0,a.jsx)(n.Iconfont,{name:"md-navigate-next"})]}),(0,a.jsx)(n.Heatmap,{id:"条目.跳转",from:"目录"})]})});try{catalog.displayName="catalog",catalog.__docgenInfo={description:"",displayName:"catalog",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/catalog.tsx#catalog"]={docgenInfo:catalog.__docgenInfo,name:"catalog",path:"src/screens/home/subject/icon/catalog.tsx#catalog"})}catch(e){}},"./src/screens/home/subject/icon/character.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showCharacter?(0,a.jsx)(n.Touchable,{style:d.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Characters",from:"角色",subjectId:s.subjectId}),o.push("Characters",{subjectId:s.subjectId,name:s.cn})},children:(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Text,{type:"sub",children:"更多"}),(0,a.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});try{character.displayName="character",character.__docgenInfo={description:"",displayName:"character",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/character.tsx#character"]={docgenInfo:character.__docgenInfo,name:"character",path:"src/screens/home/subject/icon/character.tsx#character"})}catch(e){}},"./src/screens/home/subject/icon/close.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=o(s("./src/constants/i18n/index.ts")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n=t.$;return a.SHARE_MODE?null:(t=n.collection.status,s=void 0===t?{name:"未收藏"}:t,o=n.subjectFormHTML.formhash,(0,u.jsx)(i.IconTouchable,{style:m.touch,name:"md-close",color:c._.colorIcon,hitSlop:{top:6,right:c._.device(2,4),bottom:6,left:c._.device(2,4)},onPress:function(){"未收藏"===s.name?(0,d.info)("当前未收藏"):o?(0,d.confirm)("确定删除收藏?",function(){return n.doEraseCollection()}):(0,d.info)("无法操作, 请检查"+l.default.login()+"状态")},children:(0,u.jsx)(r.Heatmap,{id:"条目.删除收藏"})}))});var m=c._.create({touch:{marginRight:-c._.sm,marginLeft:3}});try{close.displayName="close",close.__docgenInfo={description:"",displayName:"close",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/close.tsx#close"]={docgenInfo:close.__docgenInfo,name:"close",path:"src/screens/home/subject/icon/close.tsx#close"})}catch(e){}},"./src/screens/home/subject/icon/comment.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$).subjectComments._reverse;return(0,c.jsx)(r.IconReverse,{style:s?[d.touch,d.reverse]:d.touch,color:s?i._.colorMain:i._.colorIcon,onPress:t.toggleReverseComments,children:(0,c.jsx)(n.Heatmap,{id:"条目.吐槽箱倒序"})})});var d=i._.create({touch:{marginRight:-i._.sm},reverse:{transform:[{rotateX:"180deg"}]}});try{comment.displayName="comment",comment.__docgenInfo={description:"",displayName:"comment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/comment.tsx#comment"]={docgenInfo:comment.__docgenInfo,name:"comment",path:"src/screens/home/subject/icon/comment.tsx#comment"})}catch(e){}},"./src/screens/home/subject/icon/disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/stores/index.ts"),r=s("./src/screens/_/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){return t=t.$,(0,c.jsx)(r.IconTouchable,{style:d.disc,name:"md-g-translate",size:18,onPress:t.doDiscTranslate,children:(0,c.jsx)(n.Heatmap,{id:"条目.翻译曲目"})})});var d=o._.create({disc:{marginLeft:o._.sm,marginRight:-o._.sm}});try{disc.displayName="disc",disc.__docgenInfo={description:"",displayName:"disc",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/disc.tsx#disc"]={docgenInfo:disc.__docgenInfo,name:"disc",path:"src/screens/home/subject/icon/disc.tsx#disc"})}catch(e){}},"./src/screens/home/subject/icon/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.ORIGINS_MANAGE=t.ICS_MANAGE=t.HIT_SLOP=t.ACTIONS_MANAGE=void 0;t.HIT_SLOP={top:8,right:8,bottom:8,left:8},t.ORIGINS_MANAGE="源头管理",t.ACTIONS_MANAGE="跳转管理",t.ICS_MANAGE="导出放送日程ICS"},"./src/screens/home/subject/icon/ep-filter.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$).state.filterEps,o=160<=t.eps.length;return(0,d.jsxs)(n.default,{children:[o&&(0,d.jsx)(i.Popover,{style:a.touch,data:t.filterEpsData,onSelect:t.updateFilterEps,children:(0,d.jsx)(r.Flex,{style:a.btn,justify:"center",children:(0,d.jsx)(r.Iconfont,{name:"md-filter-list",color:s?c._.colorMain:c._.colorIcon})})}),(0,d.jsx)(r.Heatmap,{right:-6,bottom:18,id:"条目.设置章节筛选"})]})});var a=c._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}});try{epfilter.displayName="epfilter",epfilter.__docgenInfo={description:"",displayName:"epfilter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/ep-filter.tsx#epfilter"]={docgenInfo:epfilter.__docgenInfo,name:"epfilter",path:"src/screens/home/subject/icon/ep-filter.tsx#epfilter"})}catch(e){}},"./src/screens/home/subject/icon/ep.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/utils/fetch/index.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation,n=(t=s.state).epsThumbs,r=t.epsThumbsHeader,i=t.filterEps;return(0,u.jsx)(d.IconTouchable,{style:a._.ml.xs,name:"md-menu",onPress:function(){(0,l.t)("条目.跳转",{to:"Episodes",from:"章节",subjectId:s.subjectId}),o.push("Episodes",{subjectId:s.subjectId,name:s.cn||s.jp,epsThumbs:n,epsThumbsHeader:r,filterEps:i})},children:(0,u.jsx)(c.Heatmap,{right:13,id:"条目.跳转",from:"章节"})})});try{ep.displayName="ep",ep.__docgenInfo={description:"",displayName:"ep",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/ep.tsx#ep"]={docgenInfo:ep.__docgenInfo,name:"ep",path:"src/screens/home/subject/icon/ep.tsx#ep"})}catch(e){}},"./src/screens/home/subject/icon/folder.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,o,t=t.$;return c.SHARE_MODE?null:(s=t.state.folder,o=!!t.catalogIncludes,(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.Flex,{style:o&&i._.mr.xs,children:[(0,d.jsx)(r.IconTouchable,{name:"md-folder-open",size:20,color:i._.colorIcon,onPress:t.toggleFolder,children:(0,d.jsx)(n.Heatmap,{id:"条目.管理目录"})}),o&&(0,d.jsx)(n.Text,{style:a.num,size:10,type:"icon",bold:!0,children:t.catalogIncludes})]}),(0,d.jsx)(r.FolderManageModal,{id:t.subjectId,visible:s,onClose:t.toggleFolder})]}))});var a=i._.create({num:{position:"absolute",zIndex:1,right:-2,bottom:6}});try{folder.displayName="folder",folder.__docgenInfo={description:"",displayName:"folder",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/folder.tsx#folder"]={docgenInfo:folder.__docgenInfo,name:"folder",path:"src/screens/home/subject/icon/folder.tsx#folder"})}catch(e){}},"./src/screens/home/subject/icon/game.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),i=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),o=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/subject/icon/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.style,e=e.children,o=t.$,n=t.navigation;return o.titleLabel.includes("游戏")?(t=[].concat((0,r.default)(o.onlineGameOrigins.map(function(e){return"object"==typeof e?e.name:e})),[l.ORIGINS_MANAGE]),o.actions.length||a.STORYBOOK||t.push(l.ACTIONS_MANAGE),(0,u.jsx)(c.Popover,{style:(0,d.stl)(!e&&m.touch,s),data:t,hitSlop:l.HIT_SLOP,onSelect:function(e){e===l.ORIGINS_MANAGE?n.push("OriginSetting"):e===l.ACTIONS_MANAGE?n.push("Actions",{subjectId:o.subjectId,name:o.cn||o.jp}):o.onlineGameSelected(e)},children:e||(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Flex,{style:m.btn,justify:"center",children:(0,u.jsx)(i.Iconfont,{name:"md-airplay",size:18})}),(0,u.jsx)(i.Heatmap,{right:55,bottom:-7,id:"条目.搜索源"})]})})):null});var m=o._.create({touch:{marginRight:-o._.sm,borderRadius:20,overflow:"hidden"},btn:{width:38,height:38}})},"./src/screens/home/subject/icon/hd.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=t.navigation;return s.isLimit||!s.hd?null:(0,i.jsx)(n.IconTouchable,{style:r._.mr._sm,name:"md-hd",onPress:function(){o.push("HD",{cn:s.cn,subjectId:s.hd})}})});try{hd.displayName="hd",hd.__docgenInfo={description:"",displayName:"hd",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/hd.tsx#hd"]={docgenInfo:hd.__docgenInfo,name:"hd",path:"src/screens/home/subject/icon/hd.tsx#hd"})}catch(e){}},"./src/screens/home/subject/icon/hidden.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/ui/index.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.name,o=e.value,n=t.$;return s&&o?(0,a.jsx)(i.IconTouchable,{style:l.touch,name:"md-close",color:c._.colorIcon,onPress:function(){(0,d.confirm)("确定永久隐藏栏目["+s+"]?\n隐藏后可到右上角菜单里重置",function(){n.hiddenBlock(o),(0,d.info)("已隐藏")})},children:(0,a.jsx)(r.Heatmap,{id:"条目.删除收藏"})}):null});var l=c._.create({touch:{paddingVertical:0,marginRight:-c._.sm,marginLeft:4}})},"./src/screens/home/subject/icon/manga.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s;return(t=t.$).isLimit||null==(s=t.source)||!s.mangaId?null:(0,d.jsxs)(n.Touchable,{style:c.default.icon,onPress:t.toManhuadb,children:[(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Iconfont,{name:"md-visibility"}),(0,d.jsx)(n.Text,{style:r._.ml.xs,size:13,type:"sub",children:"漫画"})]}),(0,d.jsx)(n.Heatmap,{id:"条目.阅读漫画"})]})});try{manga.displayName="manga",manga.__docgenInfo={description:"",displayName:"manga",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/manga.tsx#manga"]={docgenInfo:manga.__docgenInfo,name:"manga",path:"src/screens/home/subject/icon/manga.tsx#manga"})}catch(e){}},"./src/screens/home/subject/icon/online.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),i=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=o(s("./src/screens/home/subject/icon/actions.tsx")),m=s("./src/screens/home/subject/icon/ds.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.style,e=e.children,o=t.$,n=t.navigation,t=[].concat((0,r.default)(o.onlineOrigins),[m.ORIGINS_MANAGE]);return o.actions.length||l.STORYBOOK||t.push(m.ACTIONS_MANAGE),d.systemStore.setting.exportICS&&t.push(m.ICS_MANAGE),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Popover,{style:(0,a.stl)(!e&&f.touch,s),data:t.map(function(e){return"object"==typeof e?e.name:e}),hitSlop:m.HIT_SLOP,onSelect:function(e){e===m.ORIGINS_MANAGE?n.push("OriginSetting"):e===m.ACTIONS_MANAGE?n.push("Actions",{subjectId:o.subjectId,name:o.cn||o.jp}):e===m.ICS_MANAGE?o.doExportCalenderEventICS():o.onlinePlaySelected(e)},children:e||(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.Flex,{style:f.btn,justify:"center",children:(0,p.jsx)(i.Iconfont,{name:"md-airplay",size:18})}),(0,p.jsx)(i.Heatmap,{right:55,bottom:-7,id:"条目.搜索源"})]})}),!e&&!!o.actions.length&&(0,p.jsx)(u.default,{style:f.actions})]})});var f=d._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{width:38,height:38},actions:{marginRight:4,marginLeft:2}})},"./src/screens/home/subject/icon/preview.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.data,o=e.headers,n=t.$,r=t.navigation;return c.systemStore.setting.showThumbs?(0,l.jsx)(i.Touchable,{style:a.default.touch,onPress:function(){(0,d.t)("条目.跳转",{to:"Preview",from:"预览",subjectId:n.subjectId}),r.push("Preview",{subjectId:n.subjectId,cn:n.cn,jp:n.jp,data:s,headers:o})},children:(0,l.jsxs)(i.Flex,{children:[(0,l.jsx)(i.Text,{type:"sub",children:"更多"}),(0,l.jsx)(i.Iconfont,{name:"md-navigate-next"})]})}):null})},"./src/screens/home/subject/icon/ps.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){return(t=t.$).isPS?(0,i.jsxs)(n.Touchable,{style:r._.mr._sm,onPress:t.toPSNINE,children:[(0,i.jsxs)(n.Flex,{children:[(0,i.jsx)(n.Text,{style:r._.ml.xs,size:13,type:"sub",children:"奖杯"}),(0,i.jsx)(n.Iconfont,{style:r._.ml.xs,name:"md-open-in-new",size:17})]}),(0,i.jsx)(n.Heatmap,{id:"条目.查看奖杯"})]}):null});try{ps.displayName="ps",ps.__docgenInfo={description:"",displayName:"ps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/ps.tsx#ps"]={docgenInfo:ps.__docgenInfo,name:"ps",path:"src/screens/home/subject/icon/ps.tsx#ps"})}catch(e){}},"./src/screens/home/subject/icon/reverse.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.reverse.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$).state.epsReverse;return(0,c.jsx)(r.IconReverse,{style:s?[d.touch,d.reverse]:d.touch,color:s?i._.colorMain:i._.colorIcon,onPress:t.toggleReverseEps,children:(0,c.jsx)(n.Heatmap,{right:-5,id:"条目.章节倒序"})})});var d=i._.create({touch:{marginRight:-i._.sm,marginLeft:4},reverse:{transform:[{rotateX:"180deg"}]}});try{reverse.displayName="reverse",reverse.__docgenInfo={description:"",displayName:"reverse",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/reverse.tsx#reverse"]={docgenInfo:reverse.__docgenInfo,name:"reverse",path:"src/screens/home/subject/icon/reverse.tsx#reverse"})}catch(e){}},"./src/screens/home/subject/icon/search-disc.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),i=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),o=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/subject/icon/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.style,e=e.children,o=t.$,n=t.navigation,t=[].concat((0,r.default)(o.onlineDiscOrigins.map(function(e){return"object"==typeof e?e.name:e})),[l.ORIGINS_MANAGE]);return o.actions.length||a.STORYBOOK||t.push(l.ACTIONS_MANAGE),(0,u.jsx)(c.Popover,{style:(0,d.stl)(!e&&m.touch,s),data:t,hitSlop:l.HIT_SLOP,onSelect:function(e){e===l.ORIGINS_MANAGE?n.push("OriginSetting"):e===l.ACTIONS_MANAGE?n.push("Actions",{subjectId:o.subjectId,name:o.cn||o.jp}):o.onlineDiscSelected(e)},children:e||(0,u.jsx)(i.Flex,{style:m.btn,justify:"center",children:(0,u.jsx)(i.Iconfont,{name:"md-airplay",size:18})})})});var m=o._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{paddingVertical:2,paddingHorizontal:4}})},"./src/screens/home/subject/icon/search.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),i=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),o=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/subject/icon/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.style,e=e.children,o=t.$,n=t.navigation,t=[].concat((0,r.default)(o.onlineComicOrigins.map(function(e){return"object"==typeof e?e.name:e})),[l.ORIGINS_MANAGE]);return o.actions.length||a.STORYBOOK||t.push(l.ACTIONS_MANAGE),(0,u.jsx)(c.Popover,{style:(0,d.stl)(!e&&m.touch,s),data:t,hitSlop:l.HIT_SLOP,onSelect:function(e){e===l.ORIGINS_MANAGE?n.push("OriginSetting"):e===l.ACTIONS_MANAGE?n.push("Actions",{subjectId:o.subjectId,name:o.cn||o.jp}):o.onlineComicSelected(e)},children:e||(0,u.jsx)(i.Flex,{style:m.btn,justify:"center",children:(0,u.jsx)(i.Iconfont,{name:"md-airplay",size:18})})})});var m=o._.create({touch:{borderRadius:20,overflow:"hidden"},btn:{paddingVertical:2,paddingHorizontal:4}})},"./src/screens/home/subject/icon/smb.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/subject/icon/styles.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=t.navigation,t=r.systemStore.setting.showSMB;return d.STORYBOOK||!t?null:(0,l.jsx)(n.Touchable,{style:a.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"SMB",from:"本地"}),s.push("Smb")},children:(0,l.jsxs)(n.Flex,{children:[(0,l.jsx)(n.Text,{type:"sub",children:"管理"}),(0,l.jsx)(n.Iconfont,{name:"md-navigate-next"})]})})});try{smb.displayName="smb",smb.__docgenInfo={description:"",displayName:"smb",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/smb.tsx#smb"]={docgenInfo:smb.__docgenInfo,name:"smb",path:"src/screens/home/subject/icon/smb.tsx#smb"})}catch(e){}},"./src/screens/home/subject/icon/staff.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showStaff?(0,a.jsx)(n.Touchable,{style:d.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Persons",from:"制作人员",subjectId:s.subjectId}),o.push("Persons",{subjectId:s.subjectId,name:s.cn})},children:(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Text,{type:"sub",children:"更多"}),(0,a.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});try{staff.displayName="staff",staff.__docgenInfo={description:"",displayName:"staff",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/staff.tsx#staff"]={docgenInfo:staff.__docgenInfo,name:"staff",path:"src/screens/home/subject/icon/staff.tsx#staff"})}catch(e){}},"./src/screens/home/subject/icon/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s=s("./src/stores/index.ts");t.default=s._.create({touch:{paddingLeft:s._.xs,marginRight:-s._.sm,borderRadius:s._.radiusSm,overflow:"hidden"},icon:{padding:s._.sm,marginRight:-s._.sm,marginLeft:s._.xs,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/home/subject/icon/topic.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showTopic?(0,a.jsx)(n.Touchable,{style:d.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"Board",from:"帖子",subjectId:s.subjectId}),o.push("Board",{subjectId:s.subjectId,name:s.cn})},children:(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Text,{type:"sub",children:"更多"}),(0,a.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});try{topic.displayName="topic",topic.__docgenInfo={description:"",displayName:"topic",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/topic.tsx#topic"]={docgenInfo:topic.__docgenInfo,name:"topic",path:"src/screens/home/subject/icon/topic.tsx#topic"})}catch(e){}},"./src/screens/home/subject/icon/translate.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var e=void 0===(e=e.content)?"":e,t=t.$,s=i.systemStore.setting.showSummary,o=t.state.translateResult;return!s||o.length||e&&(0,c.isChineseParagraph)(e)?null:(0,d.jsx)(r.IconTouchable,{style:i._.mr._sm,name:"md-g-translate",size:18,onPress:t.doTranslate,children:(0,d.jsx)(n.Heatmap,{id:"条目.翻译简介"})})})},"./src/screens/home/subject/icon/wenku.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/subject/icon/styles.ts")),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){return(t=t.$).isLimit||!t.source.wenkuId?null:(0,d.jsxs)(n.Touchable,{style:c.default.icon,onPress:t.toWenku8,children:[(0,d.jsxs)(n.Flex,{children:[(0,d.jsx)(n.Iconfont,{name:"md-visibility"}),(0,d.jsx)(n.Text,{style:r._.ml.xs,size:13,type:"sub",children:"小说"})]}),(0,d.jsx)(n.Heatmap,{id:"条目.阅读轻小说"})]})});try{wenku.displayName="wenku",wenku.__docgenInfo={description:"",displayName:"wenku",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/wenku.tsx#wenku"]={docgenInfo:wenku.__docgenInfo,name:"wenku",path:"src/screens/home/subject/icon/wenku.tsx#wenku"})}catch(e){}},"./src/screens/home/subject/icon/wiki.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=s("./src/utils/fetch/index.ts"),d=o(s("./src/screens/home/subject/icon/styles.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=t.$,o=t.navigation;return r.systemStore.setting.showInfo?(0,a.jsx)(n.Touchable,{style:d.default.touch,onPress:function(){(0,c.t)("条目.跳转",{to:"SubjectWiki",from:"详情",subjectId:s.subjectId}),o.push("SubjectWiki",{subjectId:s.subjectId,name:s.cn})},children:(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Text,{type:"sub",children:"修订"}),(0,a.jsx)(n.Iconfont,{name:"md-navigate-next"})]})}):null});try{wiki.displayName="wiki",wiki.__docgenInfo={description:"",displayName:"wiki",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/icon/wiki.tsx#wiki"]={docgenInfo:wiki.__docgenInfo,name:"wiki",path:"src/screens/home/subject/icon/wiki.tsx#wiki"})}catch(e){}},"./src/screens/home/subject/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),u=s("./src/constants/index.ts"),m=o(s("./src/screens/home/subject/component/bg/index.tsx")),p=o(s("./src/screens/home/subject/component/list/index.tsx")),f=o(s("./src/screens/home/subject/extra/index.tsx")),j=o(s("./src/screens/home/subject/header/index.tsx")),h=s("./src/screens/home/subject/hooks.ts"),o=o(s("./src/screens/home/subject/store/index.ts")),b=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ic)(o.default,function(e,t){var s=(0,h.useSubjectPage)(t),o=s.forwardRef,n=s.onBlockRef,r=s.onScrollIntoViewIfNeeded,i=s.onScrollTo,c=t.navigation;return(0,l.useObserver)(function(){return(0,b.jsxs)(d.Component,{id:"screen-subject",children:[(0,b.jsx)(a.TapListener,{children:(0,b.jsxs)(d.Page,{statusBarEvent:!1,children:[u.IOS&&(0,b.jsx)(m.default,{}),(0,b.jsx)(p.default,{forwardRef:o,onScrollIntoViewIfNeeded:r,onBlockRef:n})]})}),(0,b.jsx)(j.default,{index:c.getState().index,onScrollTo:i}),(0,b.jsx)(f.default,{})]})})});try{subject.displayName="subject",subject.__docgenInfo={description:"",displayName:"subject",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/subject/index.tsx#subject"]={docgenInfo:subject.__docgenInfo,name:"subject",path:"src/screens/home/subject/index.tsx#subject"})}catch(e){}},"./src/screens/home/subject/store/action.ts":(e,t,s)=>{var u=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),m=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),p=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),f=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),r=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),j=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=s("./src/components/header/utils.tsx"),b=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),y=s("./src/utils/fetch/index.ts"),x=s("./src/utils/kv/index.ts"),g=o(s("./src/utils/thirdParty/axios.js")),v=s("./src/utils/thirdParty/cn-char/index.ts"),O=s("./src/utils/webhooks/index.ts"),S=s("./src/constants/index.ts"),T=o(s("./src/constants/i18n/index.ts")),E=s("./src/screens/user/origin-setting/utils.ts"),o=o(s("./src/screens/home/subject/store/fetch.ts")),P=s("./src/screens/home/subject/store/ds.ts");function d(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=o?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var I;t.default=(s=o.default,(0,r.default)(C,s),I=d(C),(0,n.default)(C));function C(){var d;(0,p.default)(this,C);for(var t,s,o,n,r,i,c,e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return d=I.call.apply(I,[this].concat(a)),(0,j.default)((0,f.default)(d),"showManageModel",function(){(0,y.t)("条目.显示收藏管理",{subjectId:d.subjectId}),d.setState({visible:!0})}),(0,j.default)((0,f.default)(d),"closeManageModal",function(){d.setState({visible:!1})}),(0,j.default)((0,f.default)(d),"toggleReverseEps",function(){(0,y.t)("条目.章节倒序",{subjectId:d.subjectId});var e=d.state.epsReverse;d.setState({epsReverse:!e}),d.save()}),(0,j.default)((0,f.default)(d),"toggleReverseComments",function(){(0,y.t)("条目.吐槽倒序",{subjectId:d.subjectId});var e=d.subjectComments._reverse;d.fetchSubjectComments(!0,!e)}),(0,j.default)((0,f.default)(d),"changeText",function(e,t){(0,y.t)("条目.书籍章节输入框改变",{subjectId:d.subjectId});try{d.setState((0,j.default)({},e,String(t)))}catch(e){console.error(P.NAMESPACE,"changeText",e)}}),(0,j.default)((0,f.default)(d),"onlinePlaySelected",(t=(0,m.default)(u.mark(function e(t){var s,o,n,r,i;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((e.prev=0,y.t)("条目.搜索源",{type:t,subjectId:d.subjectId,subjectType:d.type}),"AGE动漫"===t&&((n=d.params._aid)?s=(0,S.SITE_AGEFANS)()+"/detail/"+n:null!=(n=b.otaStore.anime(d.subjectId))&&n.ageId&&(s=(0,S.SITE_AGEFANS)()+"/detail/"+n.ageId)),s)e.next=11;else if(o=d.onlineOrigins.find(function(e){return e.name===t})){if("萌番组"===t&&o.id)return(0,_.copy)(d.cn||d.jp),setTimeout(function(){(0,_.open)(o.url)},1600),e.abrupt("return");e.next=10}else e.next=11;break;case 10:s=(0,E.replaceOriginUrl)(o.url,{CN:d.cn||d.jp,JP:d.jp||d.cn,ID:d.subjectId});case 11:s?e.next=28:(n=d.state.bangumiInfo,r=n.sites,r=void 0===r?[]:r,e.t0=t,e.next="AGE动漫"===e.t0?17:"Anime1"===e.t0?19:"奇奇动漫"===e.t0?21:"Hanime1"===e.t0?23:25);break;case 17:return s=(0,S.SITE_AGEFANS)()+"/search?query="+encodeURIComponent(d.cn||d.jp)+"&page=1",e.abrupt("break",28);case 19:return s="https://anime1.me/?s="+encodeURIComponent((0,v.s2t)(d.cn||d.jp)),e.abrupt("break",28);case 21:return s="https://www.qiqidongman.com/vod-search-wd-"+encodeURIComponent(d.cn||d.jp)+".html",e.abrupt("break",28);case 23:return s="https://hanime1.me/search?query="+encodeURIComponent(d.jp||d.cn),e.abrupt("break",28);case 25:return(i=r.find(function(e){return e.site===t}))&&(s=(0,_.getBangumiUrl)(i)),e.abrupt("break",28);case 28:d.open(s),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),console.error(P.NAMESPACE,"onlinePlaySelected",e.t1);case 34:case"end":return e.stop()}},e,null,[[0,31]])})),function(e){return t.apply(this,arguments)})),(0,j.default)((0,f.default)(d),"open",function(e){var t;e&&((t=b.systemStore.setting.openInfo)&&(0,_.copy)(e,"已复制地址，即将跳转"),setTimeout(function(){(0,_.open)(e)},t?S.STORYBOOK?400:1600:0))}),(0,j.default)((0,f.default)(d),"onlineComicSelected",function(t){try{(0,y.t)("条目.搜索源",{type:t,subjectId:d.subjectId,subjectType:d.type});var e,s=d.onlineComicOrigins.find(function(e){return e.name===t});s&&(e=(0,E.replaceOriginUrl)(s.url,{CN:d.cn||d.jp,JP:d.jp||d.cn,ID:d.subjectId})),d.open(e)}catch(e){console.error(P.NAMESPACE,"onlineComicSelected",e)}}),(0,j.default)((0,f.default)(d),"onlineDiscSelected",function(t){try{(0,y.t)("条目.搜索源",{type:t,subjectId:d.subjectId,subjectType:d.type});var e,s=d.onlineDiscOrigins.find(function(e){return e.name===t});s&&(e=(0,E.replaceOriginUrl)(s.url,{CN:d.cn||d.jp,JP:d.jp||d.cn,ID:d.subjectId})),d.open(e)}catch(e){console.error(P.NAMESPACE,"onlineDiscSelected",e)}}),(0,j.default)((0,f.default)(d),"onlineGameSelected",function(t){try{(0,y.t)("条目.搜索源",{type:t,subjectId:d.subjectId,subjectType:d.type});var e,s=d.onlineGameOrigins.find(function(e){return e.name===t});s&&(e=(0,E.replaceOriginUrl)(s.url,{CN:d.cn||d.jp,JP:d.jp||d.cn,ID:d.subjectId})),d.open(e)}catch(e){console.error(P.NAMESPACE,"onlineGameSelected",e)}}),(0,j.default)((0,f.default)(d),"toManhuadb",function(){var e=(d.source||{}).mangaId,e=((0,y.t)("条目.阅读漫画",{subjectId:d.subjectId,mid:e}),(0,S.SITE_MANHUADB)()+"/manhua/"+e);d.open(e)}),(0,j.default)((0,f.default)(d),"toWenku8",function(){var e=(d.source||{}).wenkuId,e=((0,y.t)("条目.阅读轻小说",{subjectId:d.subjectId,wid:e}),(0,S.SITE_WK8)()+"/novel/"+Math.floor(e/1e3)+"/"+e+"/index.htm");d.open(e)}),(0,j.default)((0,f.default)(d),"toPSNINE",function(){(0,y.t)("条目.查看奖杯",{subjectId:d.subjectId}),(0,_.open)("https://psnine.com/psngame?title="+encodeURIComponent(d.cn||d.jp))}),(0,j.default)((0,f.default)(d),"updateFilterEps",function(e){e=parseInt(e.match(/\d+/g)[0]);(0,y.t)("条目.设置章节筛选",{subjectId:d.subjectId,filterEps:e=1===e?0:e}),d.setState({filterEps:e}),d.save()}),(0,j.default)((0,f.default)(d),"filterScores",function(e){(0,y.t)("条目.筛选分数",{subjectId:d.subjectId,label:e}),d.setState({filterScores:"全部"===e?[]:e.split("-")}),d.save()}),(0,j.default)((0,f.default)(d),"toRating",function(e,t,s){(0,y.t)("条目.跳转",{to:"Rating",from:t,subjectId:d.subjectId,status:s});var t=d.subjectCollection,o=t.wish,n=t.collect,r=t.doing,i=t.on_hold,t=t.dropped;e.push("Rating",{subjectId:d.subjectId,status:s,name:(0,_.cnjp)(d.cn,d.jp),wish:o,collect:n,doing:r,onHold:i,dropped:t,type:d.type})}),(0,j.default)((0,f.default)(d),"onSwitchBlock",function(e){(0,y.t)("条目.展开收起功能块",{key:e}),b.systemStore.switchSetting(e)}),(0,j.default)((0,f.default)(d),"hiddenBlock",function(e){(0,y.t)("条目.展开收起功能块",{key:e+" | -1"}),b.systemStore.setSetting(e,-1)}),(0,j.default)((0,f.default)(d),"setRendered",function(){d.state.rendered||d.setState({rendered:!0})}),(0,j.default)((0,f.default)(d),"unRendered",function(){d.state.rendered&&d.setState({rendered:!1})}),(0,j.default)((0,f.default)(d),"toggleFolder",function(){var e;d.isLogin?(e=d.state.folder,d.setState({folder:!e}),e||(0,y.t)("条目.管理目录",{subjectId:d.subjectId})):(0,_.info)("请先"+T.default.login())}),(0,j.default)((0,f.default)(d),"onSelectOnAir",function(e,t){(0,y.t)("条目.自定义放送",{subjectId:d.subjectId}),b.calendarStore.updateOnAirUser(d.subjectId,e,t)}),(0,j.default)((0,f.default)(d),"resetOnAirUser",function(){(0,y.t)("条目.重置放送",{subjectId:d.subjectId}),b.calendarStore.resetOnAirUser(d.subjectId)}),(0,j.default)((0,f.default)(d),"onActionsPress",function(t,e){return"跳转管理"===t?(e.push("Actions",{subjectId:d.subjectId,name:d.cn||d.jp}),!0):!!(e=d.actions.find(function(e){return e.name===t}))&&((0,_.open)(e.url,!0),(0,y.t)("其他.自定义跳转",{from:"Subject",key:d.subjectId+"|"+e.name+"|"+e.url}),!0)}),(0,j.default)((0,f.default)(d),"addBlockUser",function(e){(0,_.confirm)("屏蔽来自 "+(null==e?void 0:e.userName)+"@"+(null==e?void 0:e.userId)+" 的包括条目评论、时间胶囊、超展开相关信息，确定?",function(){(0,y.t)("条目.屏蔽用户",{userId:e.userId}),b.rakuenStore.addBlockUser(e.userName+"@"+e.userId),(0,_.info)("已屏蔽 "+e.userName)})}),(0,j.default)((0,f.default)(d),"onTrackUsersCollection",function(e,t,s,o){return!(null==t||!t.userId)&&("贴贴"===e?d.isLogin?b.uiStore.showLikesGrid(d.subjectId,o,b.userStore.formhash,S.LIKE_TYPE_TIMELINE,{recommandPosition:"top"}):((0,_.info)("请先登录"),!1):void("复制评论"===e?d.onCopyComment(t,s):"屏蔽用户"===e?d.addBlockUser(t):d.type&&(s=(o=t||{}).avatar,e=o.userId,t=o.userName,b.systemStore.trackUsersCollection(e,d.subjectTypeValue),b.usersStore.updateUsersInfo({avatar:s,userId:e,userName:t}),b.collectionStore.fetchUsersCollection(e,d.subjectId),(0,y.t)("条目.特别关注",{subjectId:d.subjectId,type:d.subjectTypeValue,userId:e}))))}),(0,j.default)((0,f.default)(d),"onCancelTrackUsersCollection",function(e,t){d.type&&null!=t&&t.userId&&(t=(t||{}).userId,b.systemStore.cancelTrackUsersCollection(t,d.subjectTypeValue),(0,y.t)("条目.取消特别关注",{subjectId:d.subjectId,type:d.subjectTypeValue,userId:t}))}),(0,j.default)((0,f.default)(d),"onCopyComment",function(e,t){(0,_.copy)(t,"已复制 "+(null==e?void 0:e.userName)+" 的评论"),(0,_.feedback)()}),(0,j.default)((0,f.default)(d),"onPostShare",(s=(0,m.default)(u.mark(function e(t){var s,o,n;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return s=d.subject.images,(o=(0,S.CDN_OSS_SUBJECT)((0,_.getCoverMedium)(null==s?void 0:s.common))).includes(S.HOST_CDN)||(o=(0,_.getCoverLarge)(null==s?void 0:s.common)),s=(0,_.loading)("下载封面中..."),g.default.defaults.withCredentials=!1,e.next=9,(0,g.default)({method:"get",url:o.replace("http://","https://"),responseType:"arraybuffer"});case 9:o=e.sent,n=o.request,s(),t.push("Share",{_subjectId:d.subjectId,_type:d.type,_url:S.HOST+"/subject/"+d.subjectId,_cover:"data:image/jpg;base64,"+n._response,_title:(0,_.cnjp)(d.cn,d.jp),_content:d.summary.replace(/\r\n\r\n/g,"\r\n"),_detail:d.tags.filter(function(e,t){return t<=4}).map(function(e){return e.name}).join(" · ")}),(0,y.t)("条目.拼图分享",{subjectId:d.subjectId,spa:!1});case 14:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})),(0,j.default)((0,f.default)(d),"onWebShare",function(){var e=S.URL_SPA+"/"+(0,_.getSPAParams)("Subject",{subjectId:d.subjectId});(0,_.copy)("【链接】"+(0,_.cnjp)(d.cn,d.jp)+" | Bangumi番组计划\n"+e,"已复制 APP 网页版地址"),setTimeout(function(){(0,_.open)(e)},1600),(0,y.t)("条目.拼图分享",{subjectId:d.subjectId,spa:!0})}),(0,j.default)((0,f.default)(d),"prepareFlip",function(){d.setState({flip:!0})}),(0,j.default)((0,f.default)(d),"afterFlip",function(){var e=d.state.flipKey;d.setState({flip:!1}),setTimeout(function(){d.setState({flipKey:e+1})},400)}),(0,j.default)((0,f.default)(d),"prepareEpsFlip",function(){d.setState({flipEps:!0})}),(0,j.default)((0,f.default)(d),"afterEpsFlip",(0,_.debounce)(function(){d.setState({flipEps:!1})})),(0,j.default)((0,f.default)(d),"updateVisibleBottom",_.updateVisibleBottom.bind((0,f.default)(d))),(0,j.default)((0,f.default)(d),"onScrollY",0),(0,j.default)((0,f.default)(d),"onScroll",function(e){d.updateVisibleBottom(e),b.uiStore.closeLikesGrid();var e=e.nativeEvent.contentOffset.y,t=(d.onScrollY=e,d.state.fixed);t&&e>h.HEADER_TRANSITION_HEIGHT||!t&&e<=h.HEADER_TRANSITION_HEIGHT||d.setState({fixed:e>h.HEADER_TRANSITION_HEIGHT})}),(0,j.default)((0,f.default)(d),"doUpdateCollection",(o=(0,m.default)(u.mark(function e(t){return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,y.t)("条目.管理收藏",{subjectId:d.subjectId}),e.prev=1,d.prepareFlip(),d.setState({disabled:!0}),e.next=6,b.collectionStore.doUpdateCollection(Object.assign({},t,{noConsole:!0}));case 6:b.collectionStore.fetchCollection(d.subjectId),b.collectionStore.fetchCollectionStatusQueue([d.subjectId]),t.status!==S.MODEL_COLLECTION_STATUS.getValue("在看")?b.userStore.removeCollection(t.subjectId):b.userStore.addCollection(t.subjectId),d.closeManageModal(),(0,O.webhookCollection)(t,d.subject,b.userStore.userInfo),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(P.NAMESPACE,"doUpdateCollection",e.t0);case 16:d.setState({disabled:!1});case 17:case"end":return e.stop()}},e,null,[[1,13]])})),function(e){return o.apply(this,arguments)})),(0,j.default)((0,f.default)(d),"doEpsSelect",(n=(0,m.default)(u.mark(function e(t,r,s){var o,n,i,c;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.includes("本集讨论")||t.includes("(+"))return(0,y.t)("条目.章节菜单操作",{title:"本集讨论",subjectId:d.subjectId}),(0,_.appNavigate)(r.url||"/ep/"+r.id,s,{_title:"ep"+r.sort+"."+(r.name||r.name_cn),_group:d.subject.name||d.subject.name_cn,_groupThumb:(0,_.getCoverMedium)(null==(o=d.subject.images||{})?void 0:o.medium),_desc:"时长:"+r.duration+" / 首播:"+r.airdate+"<br />"+(r.desc||"").replace(/\r\n/g,"<br />")},{id:"条目.跳转",data:{from:"章节",subjectId:d.subjectId}}),e.abrupt("return");e.next=5;break;case 5:if("正版播放"===t)return setTimeout(function(){(0,_.showActionSheet)(d.onlinePlayActionSheetData,function(e){(0,y.t)("条目.章节菜单操作",{title:d.onlinePlayActionSheetData[e],subjectId:d.subjectId});var t,s=1===r.type,o=d.state.epsData,n=d.subject.eps,n=void 0===n?[]:n,e=d.onlinePlayActionSheetData[e];(t=S.SITES.includes(e)?!s&&(s=n.filter(function(e){return 0===e.type}).findIndex(function(e){return e.id===r.id}),o[e][s])||(0,_.getBangumiUrl)({id:r.id,site:e}):t)&&(0,_.open)(t)})},320),e.abrupt("return");e.next=8;break;case 8:if("添加提醒"===t)return(0,_.saveCalenderEvent)(r,(0,_.cnjp)(d.cn,d.jp),d.onAirCustom),(0,y.t)("其他.添加日历",{subjectId:d.subjectId,sort:(null==r?void 0:r.sort)||0,from:"Subject"}),e.abrupt("return");e.next=12;break;case 12:if(o=d.collection.status,"未收藏"===(void 0===o?{name:"未收藏"}:o).name)e.next=35;else{if(n=S.MODEL_EP_STATUS.getValue(t))return(0,y.t)("条目.章节菜单操作",{title:"更新收视进度",subjectId:d.subjectId,status:n}),d.prepareEpsFlip(),e.next=20,b.userStore.doUpdateEpStatus({id:r.id,status:n});e.next=23}break;case 20:b.userStore.fetchUserCollection(),b.userStore.fetchUserProgress(d.subjectId),(0,O.webhookEp)(Object.assign({},r,{status:n,batch:!1}),d.subject,b.userStore.userInfo);case 23:if("看到"===t)return(0,y.t)("条目.章节菜单操作",{title:"批量更新收视进度",subjectId:d.subjectId}),i=d.subject.eps,i=(void 0===i?[]:i).filter(function(e){return 0===e.type}).sort(function(e,t){return(0,_.asc)(e,t,function(e){return e.sort||0})}).findIndex(function(e){return e.sort===r.sort}),c=-1!==i||(c=Number(d.subjectFormHTML.totalEps))&&r.sort>=c?i+1:r.sort,d.prepareEpsFlip(),e.next=31,b.userStore.doUpdateSubjectWatched({subjectId:d.subjectId,sort:c});e.next=34;break;case 31:b.userStore.fetchUserCollection(),b.userStore.fetchUserProgress(d.subjectId),(0,O.webhookEp)(Object.assign({},r,{status:"watched",batch:!0}),d.subject,b.userStore.userInfo);case 34:return e.abrupt("return");case 35:(0,_.info)("收藏了才能管理哦"),e.next=41;break;case 38:e.prev=38,e.t0=e.catch(0),console.error(P.NAMESPACE,"doEpsSelect",e.t0);case 41:case"end":return e.stop()}},e,null,[[0,38]])})),function(e,t,s){return n.apply(this,arguments)})),(0,j.default)((0,f.default)(d),"doUpdateNext",(r=(0,m.default)(u.mark(function e(t){var s,o,n;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,y.t)("条目.更新书籍下一个章节",{subjectId:d.subjectId}),s=d.state,n=s.chap,s=s.vol,o=String(parseInt(d.state[t]||0)+1),n=(0,j.default)({subjectId:d.subjectId,chap:n,vol:s},t,o),d.doUpdateEp({eps:n.chap,vol:n.vol},!0);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),(0,j.default)((0,f.default)(d),"doUpdateBookEp",(0,m.default)(u.mark(function e(){var t,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,y.t)("条目.更新书籍章节",{subjectId:d.subjectId}),s=d.state,t=s.chap,s=s.vol,d.doUpdateEp({eps:t,vol:s},!0);case 3:case"end":return e.stop()}},e)}))),(0,j.default)((0,f.default)(d),"doUpdateSubjectEp",(0,m.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,y.t)("条目.输入框更新章节",{subjectId:d.subjectId}),t=d.state.watchedEps,d.doUpdateEp({eps:t});case 3:case"end":return e.stop()}},e)}))),(0,j.default)((0,f.default)(d),"doUpdateEp",(i=(0,m.default)(u.mark(function e(t){var s,o,n,r=arguments;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t.eps,o=t.vol,n=1<r.length&&void 0!==r[1]&&r[1];try{d.prepareEpsFlip(),b.collectionStore.doUpdateSubjectEp({subjectId:d.subjectId,watchedEps:s,watchedVols:o},(0,m.default)(u.mark(function e(){return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.userStore.fetchUserCollection(),e.next=3,b.userStore.fetchUserProgress(d.subjectId);case 3:return e.next=5,d.fetchSubjectFromHTML();case 5:d.save(),d.afterEpsFlip(),n&&((0,_.info)("已提交"),(0,_.feedback)()),(0,O.webhookEp)({status:"watched",sort:s,vols:o,batch:!1},d.subject,b.userStore.userInfo);case 9:case"end":return e.stop()}},e)})))}catch(e){console.error(P.NAMESPACE,"doUpdateEp",e)}case 3:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})),(0,j.default)((0,f.default)(d),"doEpsLongPress",(c=(0,m.default)(u.mark(function e(t){var s,o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.id,(0,y.t)("条目.章节按钮长按",{subjectId:d.subjectId}),e.prev=2,o=d.userProgress,o=o[s]?S.MODEL_EP_STATUS.getValue("撤销"):S.MODEL_EP_STATUS.getValue("看过"),e.next=7,b.userStore.doUpdateEpStatus({id:s,status:o});case 7:(0,_.feedback)(),b.userStore.fetchUserCollection(),b.userStore.fetchUserProgress(d.subjectId),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(P.NAMESPACE,"doEpsLongPress",e.t0);case 15:case"end":return e.stop()}},e,null,[[2,12]])})),function(e){return c.apply(this,arguments)})),(0,j.default)((0,f.default)(d),"doEraseCollection",(0,m.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.subjectFormHTML.formhash){e.next=3;break}return e.abrupt("return");case 3:return(0,y.t)("条目.删除收藏",{subjectId:d.subjectId}),e.prev=4,d.prepareFlip(),d.setState({disabled:!0}),e.next=9,b.userStore.doEraseCollection({subjectId:d.subjectId,formhash:t},function(){},function(){setTimeout(function(){b.collectionStore.removeStatus(d.subjectId),d.fetchCollection(),b.collectionStore.fetchCollectionStatusQueue([d.subjectId]),b.userStore.removeCollection(d.subjectId)},40)});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(P.NAMESPACE,"doEraseCollection",e.t0);case 14:d.setState({disabled:!1});case 15:case"end":return e.stop()}},e,null,[[4,11]])}))),(0,j.default)((0,f.default)(d),"doTranslate",(0,m.default)(u.mark(function e(){var t,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.state.translateResult.length)return e.abrupt("return");e.next=2;break;case 2:return(0,y.t)("条目.翻译简介",{subjectId:d.subjectId}),e.prev=3,t=(0,_.loading)("请求中..."),e.next=7,(0,y.baiduTranslate)(d.summary);case 7:if(s=e.sent,t(),s=JSON.parse(s),s=s.trans_result,Array.isArray(s))return d.setState({translateResult:s}),e.abrupt("return");e.next=13;break;case 13:(0,_.info)("翻译失败, 请重试"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),t&&t(),(0,_.info)("翻译失败, 请重试");case 20:case"end":return e.stop()}},e,null,[[3,16]])}))),(0,j.default)((0,f.default)(d),"doDiscTranslate",(0,m.default)(u.mark(function e(){var s,t,o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.state.discTranslateResult.length)return e.abrupt("return");e.next=2;break;case 2:return(0,y.t)("条目.翻译曲目",{subjectId:d.subjectId}),s=[],d.disc.forEach(function(e){e.disc.forEach(function(e,t){s.push(e.title.replace(t+1+" ",""))})}),e.prev=5,t=(0,_.loading)("请求中..."),e.next=9,(0,y.baiduTranslate)(s.join("\n"));case 9:if(o=e.sent,t(),o=JSON.parse(o),o=o.trans_result,Array.isArray(o))return d.setState({discTranslateResult:o}),e.abrupt("return");e.next=15;break;case 15:(0,_.info)("翻译失败, 请重试"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),t&&t(),(0,_.info)("翻译失败, 请重试");case 22:case"end":return e.stop()}},e,null,[[5,18]])}))),(0,j.default)((0,f.default)(d),"doExportCalenderEventICS",(0,m.default)(u.mark(function e(){var t,n,r,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d.subject.eps||[]).filter(function(e){return 0===e.type}).length){e.next=19;break}if((t=100<=d.subject.eps.length?d.subject.eps.filter(function(e){return"NA"===e.status}):d.subject.eps).length){e.next=6;break}return(0,_.info)("没有数据"),e.abrupt("return");case 6:return n=d.onAirCustom,r=["BEGIN:VCALENDAR","PRODID:-//Bangumi//Anime Calendar//CN","VERSION:2.0","METHOD:PUBLISH","CALSCALE:GREGORIAN","X-WR-CALNAME:Bangumi放送日程","X-APPLE-CALENDAR-COLOR:#FE8A95"],t.forEach(function(e){var t=(0,_.genICSCalenderEventDate)(e,n),s=t.DTSTART,t=t.DTEND,o="https://bgm.tv/ep/"+e.id;(e.name_cn||e.name)&&(o+=" ("+(e.name_cn||e.name)+")"),r.push("BEGIN:VEVENT","UID:"+d.subjectId+"-"+e.id,"TZID:Asia/Shanghai","DTSTART:"+s,"DTEND:"+t,"SUMMARY:"+(0,_.cnjp)(d.subject.name_cn,d.subject.name)+" ep."+e.sort,"DESCRIPTION:"+o,"TRANSP:OPAQUE","END:VEVENT")}),r.push("END:VCALENDAR"),e.next=12,(0,x.temp)(d.userId+"_"+d.subjectId+".ics",r.join("\n"),-1);case 12:if(s=e.sent,null!=(s=s.data)&&s.downloadKey){e.next=17;break}return(0,_.info)("未知错误，生成ics失败，重试或联系作者"),e.abrupt("return",!1);case 17:(0,y.t)("条目.导出日程",{subjectId:d.subjectId,userId:d.userId}),(0,_.open)((0,x.download)(s.downloadKey));case 19:case"end":return e.stop()}},e)}))),d}},"./src/screens/home/subject/store/computed.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.some.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.string.small.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),p=(o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),b=s("./src/utils/subject/adv/index.ts"),_=s("./src/utils/subject/anime/index.ts"),y=s("./src/utils/subject/game/index.ts"),x=s("./src/utils/subject/hentai/index.ts"),g=s("./src/utils/subject/manga/index.ts"),v=s("./src/utils/subject/wenku/index.ts"),O=s("./src/constants/index.ts"),S=s("./src/screens/user/origin-setting/utils.ts"),T=s("./src/screens/home/subject/ds.ts"),o=o(s("./src/screens/home/subject/store/state.ts")),E=s("./src/screens/home/subject/store/ds.ts"),P=s("./node_modules/react/jsx-runtime.js");function I(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var C;t.default=(s=o.default,(0,d.default)(R,s),C=I(R),(0,i.default)(R,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"namespace",get:function(){return E.NAMESPACE+"|"+this.subjectId}},{key:"x18",get:function(){return(0,h.x18)(this.subjectId,this.cn||this.jp)}},{key:"onAirCustom",get:function(){return(0,h.getOnAir)(j.calendarStore.onAir[this.subjectId],j.calendarStore.onAirUser(this.subjectId))}},{key:"filterDefault",get:function(){return j.systemStore.setting.filterDefault}},{key:"showComment",get:function(){return j.systemStore.setting.showComment}},{key:"footerEmptyDataComponent",get:function(){if(-1===this.showComment)return(0,P.jsx)(p.default,{})}},{key:"url",get:function(){return O.HOST+"/subject/"+this.subjectId}},{key:"isLogin",get:function(){return j.userStore.isLogin}},{key:"userId",get:function(){return j.userStore.userInfo.id}},{key:"subject",get:function(){return j.subjectStore.subject(this.subjectId)}},{key:"subjectFormHTML",get:function(){return j.subjectStore.subjectFormHTML(this.subjectId)}},{key:"subjectFormCDN",get:function(){return j.subjectStore.subjectFormCDN(this.subjectId)}},{key:"subjectFromOSS",get:function(){return this.state.subject}},{key:"subjectComments",get:function(){var e,t,s=j.subjectStore.subjectComments(this.subjectId);return!s._loaded&&null!=(e=this.state.comments.list)&&e.length&&(s=this.state.comments),this.showComment&&-1!==this.showComment?(t=this.state.filterScores,this.filterDefault||j.userStore.isLimit?Object.assign({},s,{list:s.list.filter(function(e){return t.length?!e.avatar.includes(O.URL_DEFAULT_AVATAR)&&Number(e.star)>=Number(t[0])&&Number(e.star)<=Number(t[1]):!e.avatar.includes(O.URL_DEFAULT_AVATAR)})}):t.length?Object.assign({},s,{list:s.list.filter(function(e){return Number(e.star)>=Number(t[0])&&Number(e.star)<=Number(t[1])})}):s):{list:[],pagination:{page:(e=s.pagination.pageTotal)||1,pageTotal:e},_reverse:s._reverse,_loaded:(0,h.getTimestamp)()}}},{key:"cover",get:function(){var e=this.params._imageForce,t=this.subject.images;return e||(null!=t&&t.common?(0,h.matchCoverUrl)(t.common):"")||this.subjectFromOSS.image||O.IMG_DEFAULT}},{key:"collection",get:function(){return j.collectionStore.collection(this.subjectId)}},{key:"userProgress",get:function(){return j.userStore.userProgress(this.subjectId)}},{key:"type",get:function(){var e=this.subject,t=e._loaded,e=e.type;if(!t){var t=this.params._type,t=void 0===t?"":t;if(t)return t}return O.MODEL_SUBJECT_TYPE.getTitle(e||(null==(t=this.state)||null==(e=t.subject)?void 0:e.type))}},{key:"subjectType",get:function(){return this.subject._loaded?this.subject.type:this.subjectFromOSS.type||this.subjectFormCDN.type}},{key:"subjectTypeValue",get:function(){return O.MODEL_SUBJECT_TYPE.getLabel(this.subjectType)}},{key:"rank",get:function(){var e;return this.subject.rank||j.subjectStore.ratingRank(this.subjectId)||(null==(e=this.subjectFromOSS)||null==(e=e.rating)?void 0:e.rank)||0}},{key:"ningMoeEpOffset",get:function(){var e=this.subject.eps;return(void 0===e?[]:e).filter(function(e){return 0===e.type}).sort(function(e,t){return(0,h.asc)(e,t,function(e){return e.sort})})[0].sort-1}},{key:"onlinePlayActionSheetData",get:function(){var t=this.state.epsData,s=[];return O.SITES.forEach(function(e){t[e]&&Object.keys(t[e]).length&&s.push(e)}),s.push("取消"),s}},{key:"action",get:function(){switch(this.type){case"音乐":return"听";case"游戏":return"玩";case"书籍":return"读";default:return"看"}}},{key:"isLimit",get:function(){return j.userStore.isLimit}},{key:"hideScore",get:function(){return j.systemStore.setting.hideScore}},{key:"userOrigins",get:function(){return(0,S.getOriginConfig)(j.subjectStore.origin,"anime")}},{key:"actions",get:function(){var e=j.subjectStore.actions(this.subjectId);return e.length?j.subjectStore.actions(this.subjectId).slice().filter(function(e){return e.active}).sort(function(e,t){return(0,h.desc)(e.sort||0,t.sort||0)}):e}},{key:"onlineOrigins",get:function(){var e,t=[];["动画"].includes(this.type)&&(null!=j.systemStore&&null!=(s=j.systemStore.ota)&&s.X18&&this.isLogin&&(e=(e=this.x18?!0:e)||this.tags.some(function(e){return e.name.includes("里番")}))&&(0,S.getOriginConfig)(j.subjectStore.origin,"hanime").filter(function(e){return e.active}).forEach(function(e){t.push(e)}),(0,S.getOriginConfig)(j.subjectStore.origin,"anime").filter(function(e){return e.active}).forEach(function(e){t.push(e)})),["三次元"].includes(this.type)&&(0,S.getOriginConfig)(j.subjectStore.origin,"real").filter(function(e){return e.active}).forEach(function(e){t.push(e)});var s=this.state.bangumiInfo.sites;return(void 0===s?[]:s).filter(function(e){return O.SITES_DS.includes(e.site)}).forEach(function(e){t.push(e.site)}),t}},{key:"onlineComicOrigins",get:function(){var e=this.titleLabel.includes("小说")?"wenku":"manga";return(0,S.getOriginConfig)(j.subjectStore.origin,e).filter(function(e){return e.active})}},{key:"onlineDiscOrigins",get:function(){return(0,S.getOriginConfig)(j.subjectStore.origin,"music").filter(function(e){return e.active})}},{key:"onlineGameOrigins",get:function(){return(0,S.getOriginConfig)(j.subjectStore.origin,"game").filter(function(e){return e.active})}},{key:"isPS",get:function(){return"游戏"===this.type&&(this.info.includes("PS4")||this.info.includes("PS3")||this.info.includes("PS5"))}},{key:"animeInfo",get:function(){var e;return"动画"===this.type&&null!=(e=(0,_.findAnime)(this.subjectId))&&e.i?e:null}},{key:"animeTags",get:function(){var e;return this.animeInfo?(0,h.isArray)(null==(e=this.animeInfo)?void 0:e.t)?this.animeInfo.t.map(function(e){return _.ANIME_TAGS[e]}).filter(function(e){return!!e}):[]:null}},{key:"hentaiTags",get:function(){var e;return"动画"===this.type||this.x18?(e=(0,x.findHentai)(this.subjectId),(0,h.isArray)(null==e?void 0:e.t)?e.t.map(function(e){return x.HENTAI_TAGS[e]}):[]):null}},{key:"gameInfo",get:function(){var e;return"游戏"!==this.type?null:null!=(e=(0,y.findGame)(this.subjectId))&&e.i?Object.assign({},e,{isADV:!1}):null!=(e=(0,b.findADV)(this.subjectId))&&e.i?Object.assign({},e,{isADV:!0}):null}},{key:"gameTags",get:function(){var e;return!this.gameInfo||null!=(e=this.gameInfo)&&e.isADV?null:((null==(e=this.gameInfo)?void 0:e.ta)||[]).map(function(e){return y.GAME_CATE[e]})}},{key:"mangaInfo",get:function(){var e;return"书籍"===this.type&&null!=(e=(0,g.findManga)(this.subjectId))&&e.i?e:null}},{key:"mangaTags",get:function(){var e;return this.mangaInfo?((null==(e=this.mangaInfo)?void 0:e.b)||[]).map(function(e){return g.MANGA_TAGS[e]}):null}},{key:"wenkuInfo",get:function(){var e;return"书籍"===this.type&&null!=(e=(0,v.findWenku)(this.subjectId))&&e.i?e:null}},{key:"wenkuTags",get:function(){var e;return this.wenkuInfo?((null==(e=this.wenkuInfo)?void 0:e.j)||[]).map(function(e){return v.WENKU_TAGS[e]}):null}},{key:"source",get:function(){return"书籍"!==this.type?null:{mangaId:0,wenkuId:0}}},{key:"filterEpsData",get:function(){var e=["从 1 起"];if(!(this.eps.length<100))for(var t=Math.floor(this.eps.length/100),s=1;s<=t;s+=1)e.push("从 "+100*s+" 开始");return e}},{key:"status",get:function(){var e=this.subjectCollection,t=e.wish,t=void 0===t?0:t,s=e.collect,s=void 0===s?0:s,o=e.doing,o=void 0===o?0:o,n=e.on_hold,n=void 0===n?0:n,e=e.dropped,e=void 0===e?0:e,r=[];return t&&r.push({status:"wishes",text:t+"想"+this.action}),s&&r.push({status:"collections",text:""+s+this.action+"过"}),o&&r.push({status:"doings",text:o+"在"+this.action}),n&&r.push({status:"on_hold",text:n+"搁置"}),e&&r.push({status:"dropped",text:e+"抛弃"}),t+s+o+n+e&&r.push({status:"",text:"总"+(t+s+o+n+e)}),r}},{key:"release",get:function(){var e;return(null==(e=this.info.match(/<li><span>(发售日|放送开始|上映年度|上映时间): <\/span>(.+?)<\/li>/))?void 0:e[2])||""}},{key:"year",get:function(){var e=(null==(e=((null==(e=this.info.match(/<li><span>(连载开始|开始): <\/span>(.+?)<\/li>/))?void 0:e[2])||"").match(/(\d{4})/))?void 0:e[0])||"";return e||(null==(e=((null==(e=this.info.match(/<li><span>(发售日|放送开始|上映年度|上映时间|发行日期): <\/span>(.+?)<\/li>/))?void 0:e[2])||"").match(/(\d{4})/))?void 0:e[0])||""}},{key:"end",get:function(){var e;return(null==(e=((null==(e=this.info.match(/<li><span>(连载结束|结束): <\/span>(.+?)<\/li>/))?void 0:e[2])||"").match(/(\d{4})/))?void 0:e[0])||""}},{key:"artist",get:function(){var e;return(0,h.removeHTMLTag)((null==(e=this.info.match(/<li><span>艺术家: <\/span>(.+?)<\/li>/))?void 0:e[1])||"")}},{key:"imageWidth",get:function(){var e=j._.isPad?1.4:1.2;return"音乐"===this.type?O.IMG_WIDTH_LG*e*1.2:(O.IMG_WIDTH_LG+16)*e}},{key:"imageHeight",get:function(){return"音乐"===this.type?this.imageWidth:1.4*this.imageWidth}},{key:"coverPlaceholder",get:function(){var e=this.params,t=e._image,e=e._imageForce||t;return(e="/img/no_icon_subject.png"===e?"":e)||this.subjectFromOSS.image||this.subjectFormCDN.image||(null==(t=this.subject)||null==(e=t.images)?void 0:e.medium)||""}},{key:"jp",get:function(){var e=this.params._jp;return(0,h.HTMLDecode)(this.subject.name||e||this.subjectFromOSS.name||this.subjectFormCDN.name)}},{key:"cn",get:function(){var e=this.params._cn;return(0,h.HTMLDecode)(this.subject.name_cn||e||this.subjectFromOSS.name_cn||(0,h.findSubjectCn)(this.jp,this.subjectId))}},{key:"rating",get:function(){return this.subject._loaded&&this.subject.rating?Object.assign({},E.INIT_RATING,this.subject.rating):this.subjectFromOSS.rating?Object.assign({},E.INIT_RATING,this.subjectFromOSS.rating):this.subjectFormCDN._loaded?Object.assign({},E.INIT_RATING,this.subjectFormCDN.rating):E.INIT_RATING}},{key:"lock",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.lock:this.subjectFromOSS.lock||this.subjectFormCDN.lock}},{key:"subjectCollection",get:function(){return this.subject._loaded&&this.subject.rating?this.subject.collection||{}:this.subjectFromOSS.collection||this.subjectFormCDN.collection||{}}},{key:"eps",get:function(){var e;return this.subject._loaded&&this.subject.rating?1e3<=(e=this.subject.eps||[]).length?[].concat((0,n.default)(e),(0,n.default)(j.subjectStore.epV2(this.subject.id).list)).sort(function(e,t){return(0,h.asc)(e,t,function(e){return e.type})}):e.slice().sort(function(e,t){return(0,h.asc)(e,t,function(e){return e.type})}):null!=(e=this.subjectFromOSS.eps)&&e.length?this.subjectFromOSS.eps||[]:this.subjectFormCDN.eps||[]}},{key:"toEps",get:function(){var e=this.state,t=e.epsReverse,s=e.filterEps;return s?(e=this.eps.filter(function(e,t){return s<t}),t?e.slice().reverse():e):t?this.eps.map(function(e){return e}).reverse():this.eps}},{key:"disc",get:function(){var e;return this.subjectFormHTML._loaded?this.subjectFormHTML.disc||[]:null!=(e=this.subjectFromOSS.disc)&&e.length?this.subjectFromOSS.disc||[]:this.subjectFormCDN.disc||[]}},{key:"summary",get:function(){return this.subject._loaded&&this.subject.rating?this.subject.summary:this.subjectFromOSS.summary||this.subjectFormCDN.summary||this.params._summary||""}},{key:"tags",get:function(){return((this.subjectFormHTML._loaded?this.subjectFormHTML.tags:this.subjectFromOSS.tags||this.subjectFormCDN.tags)||[]).filter(function(e){return!!e.name}).filter(function(e,t){return t<20})}},{key:"info",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.info:this.subjectFromOSS.info||this.subjectFormCDN.info||""}},{key:"crt",get:function(){return this.subject._loaded&&this.subject.rating?(this.subject.crt||[]).map(function(e){var t=e.id,s=e.images,s=void 0===s?{}:s,o=e.name,n=e.name_cn,r=e.role_name,e=e.actors,e=void 0===e?[]:e;return{id:t,image:s.grid,_image:null==s?void 0:s.medium,name:n||o,nameJP:o,desc:(null==e||null==(t=e[0])?void 0:t.name)||r,actorId:null==e||null==(s=e[0])?void 0:s.id}}):this.subjectFromOSS.character||this.subjectFormCDN.crt||[]}},{key:"staff",get:function(){var e,t;return this.subject._loaded&&this.subject.rating?(null==(t=this.subject.staff)||null==(e=t[0])?void 0:e.id)==this.subjectId?j.monoStore.persons(this.subjectId).list.map(function(e){return{id:e.id.replace("/person/",""),image:e.cover,_image:e.cover,name:(e.nameCn||e.name).trim(),nameJP:e.name.trim(),desc:e.position}}):(t||[]).map(function(e){var t=e.id,s=e.images,s=void 0===s?{}:s,o=e.name,n=e.name_cn,e=e.jobs;return{id:t,image:s.grid,_image:null==s?void 0:s.medium,name:n||o,nameJP:o,desc:(void 0===e?[]:e)[0]}}):this.subjectFromOSS.staff||this.subjectFormCDN.staff||[]}},{key:"relations",get:function(){return(this.subject._loaded&&this.subject.rating?(this.subjectFormHTML.relations||[]).map(function(e){return{id:e.id,image:e.image,name:e.title,desc:e.type}}):(this.subjectFromOSS.relations||this.subjectFormCDN.relations||[]).map(function(e){return{id:e.id,image:e.image,name:e.title,desc:e.type}})).slice().sort(function(e,t){return(0,h.desc)(E.SORT_RELATION_DESC[e.desc]||0,E.SORT_RELATION_DESC[t.desc]||0)})}},{key:"comic",get:function(){var e;return this.subjectFormHTML._loaded?this.subjectFormHTML.comic||[]:null!=(e=this.subjectFromOSS.comic)&&e.length?this.subjectFromOSS.comic||[]:this.subjectFormCDN.comic||[]}},{key:"like",get:function(){var e;return this.subjectFormHTML._loaded?this.subjectFormHTML.like||[]:null!=(e=this.subjectFromOSS.like)&&e.length?this.subjectFromOSS.like||[]:this.subjectFormCDN.like||[]}},{key:"titleLabel",get:function(){var e,t=O.MODEL_SUBJECT_TYPE.getTitle(this.subjectType);return"动画"===t?(e=this.state.bangumiInfo,"动画"===(e=this.subjectFormHTML.type||String(e.type).toUpperCase()||t||"TV")?"TV":"剧场版"===e?"MOVIE":e||this.subjectFromOSS.titleLabel||""):this.subjectFormHTML.type||t||this.subjectFromOSS.titleLabel||""}},{key:"catalog",get:function(){return this.subjectFormHTML._loaded?this.subjectFormHTML.catalog||[]:this.subjectFromOSS.catalog||[]}},{key:"bilibiliSite",get:function(){var e=this.state.bangumiInfo;return(null==e||null==(e=e.sites)?void 0:e.find(function(e){return"bilibili"===e.site}))||{}}},{key:"iqiyiSite",get:function(){var e=this.state.bangumiInfo;return(null==e||null==(e=e.sites)?void 0:e.find(function(e){return"iqiyi"===e.site}))||{}}},{key:"youkuSite",get:function(){var e=this.state.bangumiInfo;return(null==e||null==(e=e.sites)?void 0:e.find(function(e){return"youku"===e.site}))||{}}},{key:"subjectRelations",get:function(){var e=this.subjectFormHTML,t=e.relations;return e._loaded?void 0===t?[]:t:this.subjectFromOSS.relations||[]}},{key:"subjectPrev",get:function(){return this.subjectRelations.find(function(e){return"前传"===e.type})}},{key:"subjectAfter",get:function(){return this.subjectRelations.find(function(e){return"续集"===e.type})}},{key:"subjectSeries",get:function(){var e;return"系列"===(null==(e=this.subjectRelations)||null==(e=e[0])?void 0:e.type)?this.subjectRelations[0]:null}},{key:"subjectAnime",get:function(){var e;return(this.titleLabel||"").includes("系列")&&("动画"===(null==(e=this.subjectRelations.find(function(e){return"动画"===e.type||"其他"===e.type}))?void 0:e.type)||"其他"===(null==e?void 0:e.type)&&this.jp.includes(null==e?void 0:e.title))?e:null}},{key:"subjectDiff",get:function(){return this.subjectRelations.find(function(e){return"不同演绎"===e.type})}},{key:"hasSeries",get:function(){return!!(this.subjectAfter||this.subjectPrev||this.subjectSeries||this.subjectAnime||this.subjectDiff)}},{key:"hd",get:function(){var e=(0,O.getOTA)().HD,e=void 0===e?[]:e;if(e.includes(Number(this.subjectId)))return this.subjectId;if(this.subjectSeries){var t=this.subjectSeries.id;if(e.includes(Number(t)))return t}return!1}},{key:"catalogs",get:function(){return j.usersStore.catalogs()}},{key:"catalogDetail",value:function(e){return(0,f.computed)(function(){return j.discoveryStore.catalogDetail(e)}).get()}},{key:"catalogIncludes",get:function(){var t=this,e=this.catalogs.list,s=0;return e.forEach(function(e){t.catalogDetail(e.id).list.some(function(e){return e.id==t.subjectId})&&(s+=1)}),s}},{key:"filterCatalog",get:function(){var e=this.catalog;return e=this.filterDefault||this.isLimit?e.filter(function(e){return!e.avatar.includes(O.URL_DEFAULT_AVATAR)}):e}},{key:"filterBlog",get:function(){var e=this.subject.blog||[];if(!(e=this.filterDefault||this.isLimit?e.filter(function(e){return null==e||null==(e=e.user)||null==(e=e.avatar)||!e.small.includes(O.URL_DEFAULT_AVATAR)}):e).length)try{var t,s=j.rakuenStore.reviews(this.subjectId);null!=s&&null!=(t=s.list)&&t.length&&(e=s.list.map(function(e){return{dateline:e.time,id:Number(e.id),image:"",replies:Number(e.replies.replace("+","")||0),summary:e.content,timestamp:(0,h.getTimestamp)(e.time),title:e.title,url:"//bgm.tv/blog/"+e.id,user:{avatar:{large:e.avatar,medium:e.avatar,small:e.avatar},id:e.userId,nickname:e.userName,sign:"",url:"//bgm.tv/user/"+e.userId,username:e.userId}}}))}catch(e){}return e}},{key:"filterTopic",get:function(){var t=this,e=this.subject.topic||[];if(!(e=this.filterDefault||this.isLimit?e.filter(function(e){return null==e||null==(e=e.user)||null==(e=e.avatar)||!e.small.includes(O.URL_DEFAULT_AVATAR)}):e).length)try{var s,o=j.rakuenStore.board(this.subjectId);null!=o&&null!=(s=o.list)&&s.length&&(e=o.list.map(function(e){return{id:Number(e.href.replace("/subject/topic/","")),lastpost:0,main_id:t.subjectId,replies:Number(e.replies.replace(" replies","")),timestamp:(0,h.getTimestamp)(e.time),title:e.title,url:e.href,user:{avatar:{large:"",medium:"",small:""},id:e.userId,nickname:e.userName,sign:"",url:"//bgm.tv/user/"+e.userId,username:e.userId}}}))}catch(e){}return e}},{key:"filterRecent",get:function(){var e=this.subjectFormHTML.who||[];return e=this.filterDefault||this.isLimit?e.filter(function(e){return!e.avatar.includes(O.URL_DEFAULT_AVATAR)}):e}},{key:"commentLength",get:function(){var e=this.subjectComments,t=e.list,e=e.pagination.pageTotal,e=void 0===e?0:e,t=t.length;return e<=1?t:20*(2<=e?e-1:e)}},{key:"showEp",get:function(){var e="游戏"!==this.type;return[e,e]}},{key:"showTags",get:function(){var e=j.systemStore.setting.showTags;return[!0===e,-1!==e]}},{key:"showSummary",get:function(){var e;return this.subject._loaded&&!this.summary?[!1,!1]:[!0===(e=j.systemStore.setting.showSummary),-1!==e]}},{key:"showThumbs",get:function(){var e,t,s;return!O.STORYBOOK&&-1!==(e=j.systemStore.setting.showThumbs)&&(t=(s=this.state).epsThumbs,s=s.videos,t.length||s.length)?[!0===e,!0]:[!1,!1]}},{key:"showInfo",get:function(){var e=j.systemStore.setting.showInfo;return[!0===e,-1!==e]}},{key:"showGame",get:function(){var e,t=j.systemStore.setting.showGameInfo;return-1!==t&&null!=(e=this.gameInfo)&&e.i?[!0===t,!0]:[!1,!1]}},{key:"showRating",get:function(){var e=j.systemStore.setting.showRating;return[!0===e,-1!==e]}},{key:"showCharacter",get:function(){var e;return this.crt.length?[!0===(e=j.systemStore.setting.showCharacter),-1!==e]:[!1,!1]}},{key:"showStaff",get:function(){var e;return this.staff.length?[!0===(e=j.systemStore.setting.showStaff),-1!==e]:[!1,!1]}},{key:"showAnitabi",get:function(){var e;return this.state.anitabi.pointsLength?[!0===(e=j.systemStore.setting.showAnitabi),-1!==e]:[!1,!1]}},{key:"showRelations",get:function(){var e;return this.relations.length?[!0===(e=j.systemStore.setting.showRelations),-1!==e]:[!1,!1]}},{key:"showComic",get:function(){return this.comic.length?[!0,!0]:[!1,!1]}},{key:"showCalalog",get:function(){var e=j.systemStore.setting.showCatalog;return-1!==e&&this.filterCatalog.length?[!0===e,!0]:[!1,!1]}},{key:"showLike",get:function(){var e;return this.like.length?[!0===(e=j.systemStore.setting.showLike),-1!==e]:[!1,!1]}},{key:"showBlog",get:function(){var e=j.systemStore.setting.showBlog;return-1!==e&&this.filterBlog.length?[!0===e,!0]:[!1,!1]}},{key:"showTopic",get:function(){var e=j.systemStore.setting.showTopic;return-1!==e&&this.filterTopic.length?[!0===e,!0]:[!1,!1]}},{key:"showRecent",get:function(){var e=j.systemStore.setting.showRecent;return-1!==e&&this.filterRecent.length?[!0===e,!0]:[!1,!1]}},{key:"locationDS",get:function(){var e,t,s=[T.TITLE_COMMENT];return this.showEp[0]&&s.push("音乐"===this.type?T.TITLE_DISC:T.TITLE_EP),this.showTags[0]&&s.push(T.TITLE_TAGS),this.showSummary[0]&&s.push(T.TITLE_SUMMARY),this.showThumbs[0]&&(e=(t=this.state).epsThumbs,t=t.videos,s.push(T.TITLE_THUMBS+" ("+(e.length+t.length)+")")),this.showInfo[0]&&s.push(T.TITLE_INFO),this.showGame[0]&&s.push(T.TITLE_GAME),this.showRating[0]&&s.push(T.TITLE_RATING),this.showCharacter[0]&&s.push(T.TITLE_CHARACTER),this.showStaff[0]&&s.push(T.TITLE_STAFF),this.showAnitabi[0]&&s.push(T.TITLE_ANITABI+" ("+this.state.anitabi.pointsLength+")"),this.showRelations[0]&&s.push(T.TITLE_RELATIONS+" ("+this.relations.length+")"),this.showComic[0]&&s.push(T.TITLE_COMIC+" ("+this.comic.length+")"),this.showCalalog[0]&&s.push(T.TITLE_CATALOG+" ("+this.filterCatalog.length+")"),this.showLike[0]&&s.push(T.TITLE_LIKE+" ("+this.like.length+")"),this.showBlog[0]&&s.push(T.TITLE_BLOG+" ("+this.filterBlog.length+")"),this.showTopic[0]&&s.push(T.TITLE_TOPIC+" ("+this.filterTopic.length+")"),this.showRecent[0]&&s.push(T.TITLE_RECENT+" ("+this.filterRecent.length+")"),s.push(T.TITLE_COMMENT+" ("+this.commentLength+"+)"),s}}]),(0,m.default)((t=R).prototype,"subjectId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,m.default)(t.prototype,"namespace",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"namespace"),t.prototype),(0,m.default)(t.prototype,"x18",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"x18"),t.prototype),(0,m.default)(t.prototype,"onAirCustom",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"onAirCustom"),t.prototype),(0,m.default)(t.prototype,"filterDefault",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"filterDefault"),t.prototype),(0,m.default)(t.prototype,"showComment",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showComment"),t.prototype),(0,m.default)(t.prototype,"footerEmptyDataComponent",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"footerEmptyDataComponent"),t.prototype),(0,m.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,m.default)(t.prototype,"isLogin",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"isLogin"),t.prototype),(0,m.default)(t.prototype,"userId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"userId"),t.prototype),(0,m.default)(t.prototype,"subject",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subject"),t.prototype),(0,m.default)(t.prototype,"subjectFormHTML",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectFormHTML"),t.prototype),(0,m.default)(t.prototype,"subjectFormCDN",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectFormCDN"),t.prototype),(0,m.default)(t.prototype,"subjectFromOSS",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectFromOSS"),t.prototype),(0,m.default)(t.prototype,"subjectComments",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectComments"),t.prototype),(0,m.default)(t.prototype,"cover",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"cover"),t.prototype),(0,m.default)(t.prototype,"collection",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"collection"),t.prototype),(0,m.default)(t.prototype,"userProgress",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"userProgress"),t.prototype),(0,m.default)(t.prototype,"type",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"type"),t.prototype),(0,m.default)(t.prototype,"subjectType",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectType"),t.prototype),(0,m.default)(t.prototype,"subjectTypeValue",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectTypeValue"),t.prototype),(0,m.default)(t.prototype,"rank",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"rank"),t.prototype),(0,m.default)(t.prototype,"ningMoeEpOffset",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ningMoeEpOffset"),t.prototype),(0,m.default)(t.prototype,"onlinePlayActionSheetData",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"onlinePlayActionSheetData"),t.prototype),(0,m.default)(t.prototype,"action",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"action"),t.prototype),(0,m.default)(t.prototype,"isLimit",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"isLimit"),t.prototype),(0,m.default)(t.prototype,"hideScore",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"hideScore"),t.prototype),(0,m.default)(t.prototype,"userOrigins",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"userOrigins"),t.prototype),(0,m.default)(t.prototype,"actions",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"actions"),t.prototype),(0,m.default)(t.prototype,"onlineOrigins",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"onlineOrigins"),t.prototype),(0,m.default)(t.prototype,"onlineComicOrigins",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"onlineComicOrigins"),t.prototype),(0,m.default)(t.prototype,"onlineDiscOrigins",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"onlineDiscOrigins"),t.prototype),(0,m.default)(t.prototype,"onlineGameOrigins",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"onlineGameOrigins"),t.prototype),(0,m.default)(t.prototype,"isPS",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"isPS"),t.prototype),(0,m.default)(t.prototype,"animeInfo",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"animeInfo"),t.prototype),(0,m.default)(t.prototype,"animeTags",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"animeTags"),t.prototype),(0,m.default)(t.prototype,"hentaiTags",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"hentaiTags"),t.prototype),(0,m.default)(t.prototype,"gameInfo",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"gameInfo"),t.prototype),(0,m.default)(t.prototype,"gameTags",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"gameTags"),t.prototype),(0,m.default)(t.prototype,"mangaInfo",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"mangaInfo"),t.prototype),(0,m.default)(t.prototype,"mangaTags",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"mangaTags"),t.prototype),(0,m.default)(t.prototype,"wenkuInfo",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"wenkuInfo"),t.prototype),(0,m.default)(t.prototype,"wenkuTags",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"wenkuTags"),t.prototype),(0,m.default)(t.prototype,"source",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"source"),t.prototype),(0,m.default)(t.prototype,"filterEpsData",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"filterEpsData"),t.prototype),(0,m.default)(t.prototype,"status",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"status"),t.prototype),(0,m.default)(t.prototype,"release",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"release"),t.prototype),(0,m.default)(t.prototype,"year",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"year"),t.prototype),(0,m.default)(t.prototype,"end",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"end"),t.prototype),(0,m.default)(t.prototype,"artist",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"artist"),t.prototype),(0,m.default)(t.prototype,"imageWidth",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"imageWidth"),t.prototype),(0,m.default)(t.prototype,"imageHeight",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"imageHeight"),t.prototype),(0,m.default)(t.prototype,"coverPlaceholder",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"coverPlaceholder"),t.prototype),(0,m.default)(t.prototype,"jp",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"jp"),t.prototype),(0,m.default)(t.prototype,"cn",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"cn"),t.prototype),(0,m.default)(t.prototype,"rating",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"rating"),t.prototype),(0,m.default)(t.prototype,"lock",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"lock"),t.prototype),(0,m.default)(t.prototype,"subjectCollection",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectCollection"),t.prototype),(0,m.default)(t.prototype,"eps",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"eps"),t.prototype),(0,m.default)(t.prototype,"toEps",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"toEps"),t.prototype),(0,m.default)(t.prototype,"disc",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"disc"),t.prototype),(0,m.default)(t.prototype,"summary",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"summary"),t.prototype),(0,m.default)(t.prototype,"tags",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"tags"),t.prototype),(0,m.default)(t.prototype,"info",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"info"),t.prototype),(0,m.default)(t.prototype,"crt",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"crt"),t.prototype),(0,m.default)(t.prototype,"staff",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"staff"),t.prototype),(0,m.default)(t.prototype,"relations",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"relations"),t.prototype),(0,m.default)(t.prototype,"comic",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"comic"),t.prototype),(0,m.default)(t.prototype,"like",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"like"),t.prototype),(0,m.default)(t.prototype,"titleLabel",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"titleLabel"),t.prototype),(0,m.default)(t.prototype,"catalog",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"catalog"),t.prototype),(0,m.default)(t.prototype,"bilibiliSite",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"bilibiliSite"),t.prototype),(0,m.default)(t.prototype,"iqiyiSite",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"iqiyiSite"),t.prototype),(0,m.default)(t.prototype,"youkuSite",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"youkuSite"),t.prototype),(0,m.default)(t.prototype,"subjectRelations",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectRelations"),t.prototype),(0,m.default)(t.prototype,"subjectPrev",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectPrev"),t.prototype),(0,m.default)(t.prototype,"subjectAfter",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectAfter"),t.prototype),(0,m.default)(t.prototype,"subjectSeries",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectSeries"),t.prototype),(0,m.default)(t.prototype,"subjectAnime",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectAnime"),t.prototype),(0,m.default)(t.prototype,"subjectDiff",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectDiff"),t.prototype),(0,m.default)(t.prototype,"hasSeries",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"hasSeries"),t.prototype),(0,m.default)(t.prototype,"hd",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"hd"),t.prototype),(0,m.default)(t.prototype,"catalogs",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"catalogs"),t.prototype),(0,m.default)(t.prototype,"catalogIncludes",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"catalogIncludes"),t.prototype),(0,m.default)(t.prototype,"filterCatalog",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"filterCatalog"),t.prototype),(0,m.default)(t.prototype,"filterBlog",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"filterBlog"),t.prototype),(0,m.default)(t.prototype,"filterTopic",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"filterTopic"),t.prototype),(0,m.default)(t.prototype,"filterRecent",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"filterRecent"),t.prototype),(0,m.default)(t.prototype,"commentLength",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"commentLength"),t.prototype),(0,m.default)(t.prototype,"showEp",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showEp"),t.prototype),(0,m.default)(t.prototype,"showTags",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showTags"),t.prototype),(0,m.default)(t.prototype,"showSummary",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showSummary"),t.prototype),(0,m.default)(t.prototype,"showThumbs",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showThumbs"),t.prototype),(0,m.default)(t.prototype,"showInfo",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showInfo"),t.prototype),(0,m.default)(t.prototype,"showGame",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showGame"),t.prototype),(0,m.default)(t.prototype,"showRating",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showRating"),t.prototype),(0,m.default)(t.prototype,"showCharacter",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showCharacter"),t.prototype),(0,m.default)(t.prototype,"showStaff",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showStaff"),t.prototype),(0,m.default)(t.prototype,"showAnitabi",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showAnitabi"),t.prototype),(0,m.default)(t.prototype,"showRelations",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showRelations"),t.prototype),(0,m.default)(t.prototype,"showComic",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showComic"),t.prototype),(0,m.default)(t.prototype,"showCalalog",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showCalalog"),t.prototype),(0,m.default)(t.prototype,"showLike",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showLike"),t.prototype),(0,m.default)(t.prototype,"showBlog",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showBlog"),t.prototype),(0,m.default)(t.prototype,"showTopic",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showTopic"),t.prototype),(0,m.default)(t.prototype,"showRecent",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"showRecent"),t.prototype),(0,m.default)(t.prototype,"locationDS",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"locationDS"),t.prototype),t);function R(){var e;(0,r.default)(this,R);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=C.call.apply(C,[this].concat(s)),(0,u.default)((0,c.default)(e),"save",function(){return e.saveStorage(e.namespace,E.EXCLUDE_STATE)}),e}},"./src/screens/home/subject/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.SORT_RELATION_DESC=t.NAMESPACE=t.INIT_RATING=t.EXCLUDE_STATE=void 0;s=s("./src/constants/index.ts"),t.NAMESPACE="ScreenSubject",t.INIT_RATING={count:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},score:"",total:""},s=t.EXCLUDE_STATE={fixed:!1,rendered:s.STORYBOOK,visibleBottom:0,visible:!1,disabled:!1,folder:!1,chap:"",vol:"",translateResult:[],discTranslateResult:[],subject:{},comments:s.LIST_EMPTY,flip:!1,flipKey:0,flipEps:!1};t.STATE=Object.assign({},s,{epsReverse:!1,watchedEps:"",filterEps:0,filterScores:[],bangumiInfo:{sites:[],type:""},epsData:{_loaded:!1},epsThumbs:[],epsThumbsHeader:{},videos:[],anitabi:{litePoints:[],_loaded:!1},_loaded:!1}),t.SORT_RELATION_DESC={"动画":110,"续集":100,"前传":90,"主线故事":82,"剧场版":81,"番外篇":80,"相同世界观":79,"衍生":78,"书籍":70,"片头曲":65,"片尾曲":64,"原声集":63,"角色歌":62,"游戏":40,"三次元":30,"其他":-10}},"./src/screens/home/subject/store/fetch.ts":(e,t,s)=>{var u=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.from.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.set.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),m=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),p=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),f=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),j=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),r=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),h=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),b=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),y=s("./src/utils/fetch/index.ts"),x=s("./src/utils/douban/index.ts"),g=s("./src/utils/bilibili/index.ts"),v=s("./src/utils/kv/index.ts"),O=s("./src/utils/protobuf/index.web.ts"),S=s("./src/constants/index.ts"),o=o(s("./src/screens/home/subject/store/computed.tsx")),T=s("./src/screens/home/subject/store/ds.ts"),E=["ts"],P=["ts"];function d(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=o?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var I;t.default=(s=o.default,(0,r.default)(C,s),I=d(C),(0,n.default)(C));function C(){var l;(0,f.default)(this,C);for(var t,s,o,n,r,i,c,e=arguments.length,d=new Array(e),a=0;a<e;a++)d[a]=arguments[a];return l=I.call.apply(I,[this].concat(d)),(0,h.default)((0,j.default)(l),"fetchSubject",function(){return"large"!==l.subject._responseGroup&&(0,_.opitimize)(l.subject,60)?l.subject:b.subjectStore.fetchSubject(l.subjectId)}),(0,h.default)((0,j.default)(l),"fetchSubjectFromHTML",(0,p.default)(u.mark(function e(){var t,s,o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.subjectStore.fetchSubjectFromHTML(l.subjectId);case 2:return t=e.sent,s=t.watchedEps,o=t.book,l.setState({watchedEps:s||"0",chap:o.chap||"0",vol:o.vol||"0"}),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,h.default)((0,j.default)(l),"fetchSubjectFromOSS",(0,p.default)(u.mark(function e(){var t,s,o,n;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.subjectFormHTML._loaded)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,e.next=5,(0,v.get)("subject_"+l.subjectId);case 5:if(t=e.sent){e.next=9;break}return l.updateSubjectThirdParty(),e.abrupt("return");case 9:s=t.ts,o=(0,m.default)(t,E),n=(0,_.getTimestamp)(),"object"!=typeof o||Array.isArray(o)||l.setState({subject:Object.assign({},o,{_loaded:n})}),604800<=n-s&&l.updateSubjectThirdParty(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(2);case 17:case"end":return e.stop()}},e,null,[[2,15]])}))),(0,h.default)((0,j.default)(l),"fetchCommentsFromOSS",(0,p.default)(u.mark(function e(){var t,s,o,n;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.subjectComments._loaded)return e.abrupt("return");e.next=2;break;case 2:return e.prev=2,e.next=5,(0,v.get)("comments_"+l.subjectId);case 5:if(t=e.sent){e.next=9;break}return l.updateCommentsThirdParty(),e.abrupt("return");case 9:s=t.ts,o=(0,m.default)(t,P),n=(0,_.getTimestamp)(),"object"==typeof o&&l.setState({comments:o}),86400<=n-s&&l.updateCommentsThirdParty(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(2);case 17:case"end":return e.stop()}},e,null,[[2,15]])}))),(0,h.default)((0,j.default)(l),"fetchThirdParty",(t=(0,p.default)(u.mark(function e(t){var s,o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.decode)("bangumi-data");case 2:if((s=(0,O.get)("bangumi-data").find(function(e){return e.id==l.subjectId||e.j===(0,_.HTMLDecode)(t.name)||e.c===(0,_.HTMLDecode)(t.name)}))&&(o=(0,_.unzipBangumiData)(s),l.setState({bangumiInfo:{sites:o.sites,type:o.type}})),S.STORYBOOK)return e.abrupt("return");e.next=6;break;case 6:return e.next=8,l.getThirdParty();case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:s&&setTimeout(function(){l.fetchEpsThumbs(o)},0),!s&&"动画"===l.type||"三次元"===l.type?l.fetchMovieFromDouban(l.cn,l.jp):"游戏"===l.type?l.fetchGameFromDouban(l.cn,l.jp):"音乐"===l.type&&setTimeout(function(){l.fetchMVFromBilibili(l.cn,l.jp,l.artist)},2e3);case 13:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,h.default)((0,j.default)(l),"fetchCollection",function(){return b.collectionStore.fetchCollection(l.subjectId)}),(0,h.default)((0,j.default)(l),"fetchSubjectComments",(s=(0,p.default)(u.mark(function e(t,s){var o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.subjectStore.fetchSubjectComments({subjectId:l.subjectId},t,s);case 2:return o=e.sent,l.updateCommentsThirdParty(),e.abrupt("return",o);case 5:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})),(0,h.default)((0,j.default)(l),"_fetchTrackUsersInfo",!1),(0,h.default)((0,j.default)(l),"fetchTrackUsersInfo",(o=(0,p.default)(u.mark(function e(t){var s,o;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l._fetchTrackUsersInfo||!t.length)return e.abrupt("return",!1);e.next=2;break;case 2:return e.next=4,b.usersStore.init("usersInfo");case 4:s=0;case 5:if(!(s<t.length)){e.next=16;break}if(o=t[s],b.usersStore.usersInfo(o)._loaded){e.next=13;break}return e.next=11,b.usersStore.fetchUsers({userId:o});case 11:(o=e.sent).userId&&b.usersStore.updateUsersInfo({avatar:o.avatar,userId:o.userId,userName:o.userName});case 13:s+=1,e.next=5;break;case 16:l._fetchTrackUsersInfo=!0;case 17:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})),(0,h.default)((0,j.default)(l),"fetchTrackComments",function(){var e,s,o;return!!l.subjectTypeValue&&!(null==(e=b.systemStore.setting["comment"+(0,_.titleCase)(l.subjectTypeValue)])||!e.length)&&(s=[],o=(0,_.getTimestamp)(),e.forEach(function(e){var t=b.collectionStore.usersSubjectCollection(e,l.subjectId);(!t._loaded||3600<=o-Number(t._loaded))&&s.push(function(){return b.collectionStore.fetchUsersCollection(e,l.subjectId)})}),setTimeout(function(){l.fetchTrackUsersInfo(e)},0),(0,_.queue)(s,1))}),(0,h.default)((0,j.default)(l),"fetchEpsData",(0,p.default)(u.mark(function e(){var t,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.STORYBOOK)return e.abrupt("return",!1);e.next=2;break;case 2:if("动画"===l.type)return e.prev=3,e.next=6,(0,y.xhrCustom)({url:(0,S.CDN_EPS)(l.subjectId)});e.next=18;break;case 6:t=e.sent,t=t._response,s={_loaded:(0,_.getTimestamp)()},S.SITES.forEach(function(e){return s[e]={}}),JSON.parse(t).eps.forEach(function(e,t){e.sites.forEach(function(e){S.SITES.includes(e.site)&&(s[e.site][t]=e.url)})}),l.setState({epsData:s}),l.save(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(T.NAMESPACE,"fetchEpsData",e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}))),(0,h.default)((0,j.default)(l),"fetchPersons",function(){return b.monoStore.fetchPersons({subjectId:l.subjectId})}),(0,h.default)((0,j.default)(l),"fetchEpsThumbs",(n=(0,p.default)(u.mark(function e(t){var s,o,n,r,i,c,d,a;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.STORYBOOK)return e.abrupt("return",!1);e.next=2;break;case 2:if(12<=l.state.epsThumbs.length)return e.abrupt("return",!1);e.next=4;break;case 4:return e.prev=4,s=null==t||null==(s=t.titleTranslate)||null==(s=s["zh-Hans"])?void 0:s[0],o=t.title,e.next=9,l.fetchMovieFromDouban(s,o);case 9:if(l.state.epsThumbs.length<12&&l.bilibiliSite.id)return o=(0,_.getBangumiUrl)(l.bilibiliSite),e.next=13,(0,y.xhrCustom)({url:o});e.next=24;break;case 13:if(n=e.sent,n=n._response,n=n.match(/"season_id":(\d+)/))return n=n[1],e.next=20,(0,y.xhrCustom)({url:"https://api.bilibili.com/pgc/web/season/section?season_id="+n});e.next=24;break;case 20:n=e.sent,i=n._response,i=JSON.parse(i),r=i.message,i=i.result,"success"===r&&null!=i&&null!=(r=i.main_section)&&r.episodes&&(l.setState({epsThumbs:Array.from(new Set(i.main_section.episodes.map(function(e){return e.cover.replace("http://","https://")+"@192w_120h_1c.jpg"}))),epsThumbsHeader:{Referer:"https://www.bilibili.com/"}}),l.save(),l.updateThirdParty());case 24:if(l.state.epsThumbs.length<12&&l.youkuSite.id)return r=(0,_.getBangumiUrl)(l.youkuSite),e.next=28,(0,y.xhrCustom)({url:r});e.next=40;break;case 28:if(i=e.sent,c=i._response,c=c.match(/showid:"(\d+)"/))return c=c[1],e.next=35,(0,y.xhrCustom)({url:"https://list.youku.com/show/module?id="+c+"&tab=point&callback=jQuery"});e.next=40;break;case 35:c=e.sent,d=c._response,l.setState({epsThumbs:Array.from(new Set((decodeURIComponent(d).replace(/\\\/>/g,"/>").replace(/(\\"|"\\)/g,'"').match(/<img.+?src=('|")?([^'"]+)('|")?(?:\s+|>)/gim)||[]).map(function(e){e=e.match(/src="(.+?)"/);return e?e[1].replace(/\\\//g,"/").replace("http://","https://"):""}).filter(function(e){return!!e}))),epsThumbsHeader:{Referer:"https://list.youku.com/"}}),l.save(),l.updateThirdParty();case 40:if(l.state.epsThumbs.length<12&&l.iqiyiSite.id)return d=(0,_.getBangumiUrl)(l.iqiyiSite),e.next=44,(0,y.xhrCustom)({url:d});e.next=48;break;case 44:a=e.sent,a=a._response,(a=(0,_.HTMLTrim)(a,!0).match(/data-jpg-img="(.+?)"/g))&&(l.setState({epsThumbs:Array.from(new Set(a.map(function(e){return"https:"+e.replace(/(data-jpg-img="|")/g,"")}).filter(function(e,t){return!!t}))),epsThumbsHeader:{Referer:"https://www.iqiyi.com/"}}),l.save(),l.updateThirdParty());case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(4),console.error("Subject","fetchEpsThumbs",e.t0);case 53:case"end":return e.stop()}},e,null,[[4,50]])})),function(e){return n.apply(this,arguments)})),(0,h.default)((0,j.default)(l),"fetchMovieFromDouban",(r=(0,p.default)(u.mark(function e(t,s){var o,n,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.STORYBOOK||l.x18)return e.abrupt("return",!1);e.next=2;break;case 2:if(o=t||s)return e.next=6,(0,x.search)(o);e.next=18;break;case 6:return n=e.sent,n=(0,x.matchMovie)(o,n,s,l.year),e.next=10,(0,x.getTrailer)(n);case 10:return(r=e.sent).data.length&&l.setState({videos:r.data,epsThumbsHeader:{Referer:r.referer}}),e.next=14,(0,x.getPreview)(n);case 14:(r=e.sent).data.length&&l.setState({epsThumbs:r.data.slice().reverse(),epsThumbsHeader:{Referer:r.referer}}),l.save(),l.updateThirdParty();case 18:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})),(0,h.default)((0,j.default)(l),"fetchGameFromDouban",(i=(0,p.default)(u.mark(function e(t,s){var o,n,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.STORYBOOK||l.x18)return e.abrupt("return",!1);e.next=2;break;case 2:if(o=t||s)return e.next=6,(0,x.search)(o,"game");e.next=18;break;case 6:return n=e.sent,n=(0,x.matchGame)(o,n),e.next=10,(0,x.getVideo)(n,"game");case 10:return(r=e.sent).data.length&&l.setState({videos:r.data,epsThumbsHeader:{Referer:r.referer}}),e.next=14,(0,x.getPreview)(n,"game");case 14:(r=e.sent).data.length&&l.setState({epsThumbs:r.data,epsThumbsHeader:{Referer:r.referer}}),l.save(),l.updateThirdParty();case 18:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})),(0,h.default)((0,j.default)(l),"fetchMVFromBilibili",(c=(0,p.default)(u.mark(function e(t,s,o){var n;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.STORYBOOK)return e.abrupt("return",!1);e.next=2;break;case 2:return e.next=4,(0,g.search)(t||s,o);case 4:(n=e.sent).length&&(l.setState({videos:n,epsThumbsHeader:{Referer:"https://m.bilibili.com"}}),l.save(),l.updateThirdParty());case 6:case"end":return e.stop()}},e)})),function(e,t,s){return c.apply(this,arguments)})),(0,h.default)((0,j.default)(l),"getThirdParty",(0,p.default)(u.mark(function e(){var t,s,o,n,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.get)("douban_"+l.subjectId);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",!0);case 6:if(s=t.ts,o=t.videos,o=void 0===o?[]:o,n=t.epsThumbs,n=void 0===n?[]:n,r=t.epsThumbsHeader,r=void 0===r?{}:r,o.length+n.length<=2||604800<=(0,_.getTimestamp)()-s||s<(0,_.getTimestamp)("2023-07-14 14:00:00"))return e.abrupt("return",!0);e.next=9;break;case 9:return l.setState({videos:o,epsThumbs:n,epsThumbsHeader:r}),l.save(),e.abrupt("return",!1);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,null,[[0,14]])}))),(0,h.default)((0,j.default)(l),"updateSubjectThirdParty",function(){setTimeout(function(){var e=l.subjectFormHTML,t=e._loaded,e=e.formhash;t&&e&&(0,v.update)("subject_"+l.subjectId,Object.assign({},(0,_.omit)(l.subjectFormHTML,["type","watchedEps","friend","who","formhash","_loaded"]),{id:l.subjectId,type:l.subject.type,name:l.jp,name_cn:l.cn,image:null==(t=l.subject.images)?void 0:t.common,eps:l.eps,collection:l.subjectCollection,summary:l.summary,rating:l.rating,rank:l.subject.rank||"",character:l.crt,staff:l.staff,titleLabel:l.titleLabel}))},1e4)}),(0,h.default)((0,j.default)(l),"updateCommentsThirdParty",function(){setTimeout(function(){var e,t=l.subjectComments;if(null==t||null==(e=t.list)||!e.length||null==t||!t._loaded||null!=t&&t._reverse)return!1;(0,v.update)("comments_"+l.subjectId,{list:t.list.slice(0,20),pagination:{page:1,pageTotal:1},_loaded:t._loaded,_reverse:!1})},1e4)}),(0,h.default)((0,j.default)(l),"updateThirdParty",function(){setTimeout(function(){(0,v.update)("douban_"+l.subjectId,{videos:l.state.videos,epsThumbs:l.state.epsThumbs,epsThumbsHeader:l.state.epsThumbsHeader})},0)}),(0,h.default)((0,j.default)(l),"fetchAnitabi",(0,p.default)(u.mark(function e(){var t,s,o,n,r,i;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(t=b.systemStore.setting.showAnitabi)&&t){e.next=3;break}return e.abrupt("return",!1);case 3:if((t=l.state.anitabi._loaded)&&(0,_.getTimestamp)()-Number(t)<=86400)return e.abrupt("return",!0);e.next=6;break;case 6:return e.prev=6,o="anitabi_"+l.subjectId,e.next=10,(0,v.get)(o);case 10:if(null!=(n=e.sent)&&n._loaded&&(0,_.getTimestamp)()-Number(null==n?void 0:n._loaded)<=86400)return l.setState({anitabi:n}),e.abrupt("return",!0);e.next=14;break;case 14:return e.next=16,(0,y.xhrCustom)({url:(0,S.API_ANITABI)(l.subjectId)});case 16:return n=e.sent,r=n._response,null!=(r=r.length?JSON.parse(r):{})&&null!=(s=r.litePoints)&&s.length?i=Object.assign({},r,{_loaded:(0,_.getTimestamp)()}):(i={_loaded:(0,_.getTimestamp)()},l.setState({anitabi:{_loaded:(0,_.getTimestamp)()}})),l.setState({anitabi:i}),l.save(),setTimeout(function(){(0,v.update)(o,i)},0),e.abrupt("return",!0);case 26:return e.prev=26,e.t0=e.catch(6),e.abrupt("return",!1);case 29:case"end":return e.stop()}},e,null,[[6,26]])}))),l}},"./src/screens/home/subject/store/index.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),j=s("./src/utils/fetch/index.ts"),h=s("./src/constants/index.ts"),o=o(s("./src/screens/home/subject/store/action.ts")),b=s("./src/screens/home/subject/store/ds.ts");function _(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}s=o.default,(0,a.default)(x,s),y=_(x);var y,o=(0,r.default)(x);function x(){var r;(0,c.default)(this,x);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r=y.call.apply(y,[this].concat(t)),(0,m.default)((0,d.default)(r),"init",(0,n.default)(i.mark(function e(){var t,s,o,n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state._loaded,s=(0,f.getTimestamp)(),o=!t||300<s-Number(t),e.prev=3,e.next=6,r.getStorage(r.namespace);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(n=e.t0,r.setState(Object.assign({},n,b.EXCLUDE_STATE,{_loaded:o?s:t})),r.fetchSubjectFromOSS(),o)return p.collectionStore.fetchCollectionStatusQueue([r.subjectId]),e.abrupt("return",r.onHeaderRefresh());e.next=15;break;case 15:return e.abrupt("return",!0);case 18:return e.prev=18,e.t1=e.catch(3),r.setState(Object.assign({},b.EXCLUDE_STATE,{_loaded:o?s:t})),e.abrupt("return",!0);case 22:case"end":return e.stop()}},e,null,[[3,18]])}))),(0,m.default)((0,d.default)(r),"onHeaderRefresh",(0,n.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,j.queue)([function(){if(!h.SHARE_MODE)return r.fetchCollection()},function(){return p.userStore.isStorybookLogin?p.userStore.fetchUserProgressV0(r.subjectId):h.SHARE_MODE?void 0:p.userStore.fetchUserProgress(r.subjectId)}],1),e.next=3,r.fetchSubject();case 3:return t=e.sent,(0,j.queue)([function(){return r.fetchOTA()},function(){return r.fetchThirdParty(t)},function(){return r.fetchAnitabi()},function(){if(h.STORYBOOK)return r.fetchCommentsFromOSS();setTimeout(function(){r.fetchCommentsFromOSS()},6400)},function(){return r.fetchTrackComments()},function(){return r.fetchSubjectComments(!0)},function(){return r.fetchSubjectFromHTML()},function(){return r.fetchEpsData()},function(){return r.setRendered()},function(){var e;if(1e3<=(null==(e=r.subject.eps)?void 0:e.length))return p.subjectStore.fetchSubjectEpV2(r.subjectId)},function(){if(404===(null==t?void 0:t.code))return r.fetchPersons()},function(){if(null!=t&&t.v0)return p.rakuenStore.fetchReviews({subjectId:r.subjectId})},function(){if(null!=t&&t.v0)return p.rakuenStore.fetchBoard({subjectId:r.subjectId})}],2),e.abrupt("return",!0);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"fetchOTA",function(){var e;"动画"===r.type?null!=(e=r.animeInfo)&&e.i&&p.otaStore.fetchAnime(r.animeInfo.i):"游戏"===r.type&&null!=(e=r.gameInfo)&&e.i&&p.otaStore.fetchGame(r.gameInfo.i)}),r}t.default=o},"./src/screens/home/subject/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/createClass.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=s("./node_modules/mobx/dist/mobx.esm.js"),o=o(s("./src/utils/store/index.ts")),m=s("./src/screens/home/subject/store/ds.ts");function p(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var f;t.default=(s=o.default,(0,c.default)(j,s),f=p(j),(0,n.default)(j));function j(){var e;(0,r.default)(this,j);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=f.call.apply(f,[this].concat(s)),(0,l.default)((0,i.default)(e),"params",void 0),(0,l.default)((0,i.default)(e),"state",(0,u.observable)(m.STATE)),e}},"./src/screens/home/tag/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=t.DEFAULT_ORDER=void 0;var o=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),s=(t.NAMESPACE="ScreenTag",t.DEFAULT_ORDER=s.MODEL_TAG_ORDERBY.getValue("标注数")),o=t.EXCLUDE_STATE={visibleBottom:o._.window.height,airtime:"",month:"",hide:!1,ota:{}};t.STATE=Object.assign({order:s,list:!0,fixed:!1,collected:!0},o,{_loaded:!1})},"./src/screens/home/tag/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=(t=s.params).type,t=t.tag,o=c.MODEL_SUBJECT_TYPE.getTitle(o)||"动画";return(0,d.jsx)(n.Header,{title:t?o+" · "+t:o+"标签",alias:"用户标签",hm:[s.url,"Tag"],headerRight:function(){return(0,d.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("用户标签.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,d.jsx)(n.Heatmap,{id:"用户标签.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/tag/header/index.tsx#header"})}catch(e){}},"./src/screens/home/tag/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/tag/header/index.tsx")),d=o(s("./src/screens/home/tag/tool-bar/index.tsx")),a=o(s("./src/screens/home/tag/list/index.tsx")),o=o(s("./src/screens/home/tag/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){var e=s.state,t=e._loaded,e=e.fixed;return(0,l.jsxs)(n.Component,{id:"screen-tag",children:[(0,l.jsx)(c.default,{}),(0,l.jsxs)(n.Page,{children:[e&&(0,l.jsx)(d.default,{}),t&&(0,l.jsx)(a.default,{})]})]})})});try{tag.displayName="tag",tag.__docgenInfo={description:"",displayName:"tag",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/index.tsx#tag"]={docgenInfo:tag.__docgenInfo,name:"tag",path:"src/screens/home/tag/index.tsx#tag"})}catch(e){}},"./src/screens/home/tag/list/grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),c=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./node_modules/react/jsx-runtime.js"),l={id:"用户标签.跳转",data:{type:"grid"}};t.default=(0,o.obc)(function(e,t){var s=e.item,o=e.index,e=e.numColumns,n=t.$,t=t.navigation,n=n.state.airtime,r=String(s.id).replace("/subject/",""),r=c.collectionStore.collect(r);return(0,a.jsx)(i.ItemCollectionsGrid,Object.assign({navigation:t,style:(c._.isPad||c._.isLandscape)&&!(o%e)&&c._.container.left,index:o,event:l,collection:r,num:e},s,{airtime:""===n&&(0,d.matchYear)(s.tip),isCollect:s.collected}))})},"./src/screens/home/tag/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),m=o(s("./src/screens/home/tag/tool-bar/index.tsx")),p=o(s("./src/screens/home/tag/list/list/index.tsx")),f=o(s("./src/screens/home/tag/list/grid/index.tsx")),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n,t=t.$,r=(i=t.state).hide,i=i.fixed;return!t.list._loaded||r?(0,j.jsxs)(j.Fragment,{children:[!i&&(0,j.jsx)(m.default,{}),(0,j.jsx)(c.Loading,{})]}):(s=(r=t.state).order,o=r.list,n=o?void 0:a._.portrait(3,5),(0,j.jsx)(c.ListView,{keyExtractor:l.keyExtractor,contentContainerStyle:a._.container.bottom,numColumns:n,data:t.list,scrollToTop:!0,footerEmptyDataText:(0,l.x18s)(t.params.tag)?u.TEXT_18X:void 0,ListHeaderComponent:(0,j.jsxs)(j.Fragment,{children:[!i&&(0,j.jsx)(m.default,{}),"rank"===s&&(0,j.jsx)(d.Notice,{children:"因标签为用户自行添加， 「按排名」排序在关联条目过多情况下可能毫无意义，推荐「按标注」排序。"})]}),renderItem:function(e){var t=e.item,e=e.index;return o?(0,j.jsx)(p.default,{item:t,index:e}):(0,j.jsx)(f.default,{item:t,index:e,numColumns:n})},scrollEventThrottle:4,onScroll:t.onScroll,onHeaderRefresh:t.onHeaderRefresh,onFooterRefresh:t.onFooterRefresh},""+a._.orientation+n))});try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/tag/list/index.tsx#list"})}catch(e){}},"./src/screens/home/tag/list/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js"),c={id:"用户标签.跳转",data:{type:"list"}};t.default=(0,o.obc)(function(e,t){var s=e.item,e=e.index,t=t.navigation,o=String(s.id).replace("/subject/",""),o=r.collectionStore.collect(o);return(0,i.jsx)(n.ItemSearch,Object.assign({style:r._.container.item,navigation:t,index:e,event:c,collection:o},s))})},"./src/screens/home/tag/store.ts":(e,t,s)=>{var a=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),r=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),h=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),_=s("./src/utils/fetch/index.ts"),y=s("./src/utils/kv/index.ts"),x=s("./src/constants/index.ts"),g=s("./src/screens/home/tag/ds.ts"),v=["collected"];function O(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=o?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var S,T=[];t.default=(s=o.default,(0,d.default)(E,s),S=O(E),(0,c.default)(E,[{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"tag",get:function(){var e=this.params,t=e.type,e=e.tag,s=this.state,o=s.airtime,s=s.month;return h.tagStore.tag(e,t,s?o+"-"+s:o)}},{key:"list",get:function(){return this.tag._loaded?this.state.collected?this.tag:Object.assign({},this.tag,{list:this.tag.list.filter(function(e){return!e.collected})}):this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):x.LIST_EMPTY}},{key:"url",get:function(){var e=this.params,t=e.type,e=e.tag,s=this.state,o=s.order,o=void 0===o?"collects":o,n=s.airtime,s=s.month;return(0,x.HTML_TAG)(encodeURIComponent(e),t,o,1,s?n+"-"+s:n)}},{key:"thirdPartyKey",get:function(){var e=this.params,t=e.type,e=e.tag,s=this.state,o=s.airtime,s=s.month;return"tag_"+[e,t,s?o+"-"+s:o].join("_")}},{key:"subject",value:function(e){return(0,j.computed)(function(){return h.subjectStore.subject(e)}).get()}}]),(0,f.default)((t=E).prototype,"ota",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,f.default)(t.prototype,"tag",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"tag"),t.prototype),(0,f.default)(t.prototype,"list",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"list"),t.prototype),(0,f.default)(t.prototype,"url",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,f.default)(t.prototype,"thirdPartyKey",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function E(){var d;(0,i.default)(this,E);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return d=S.call.apply(S,[this].concat(s)),(0,p.default)((0,l.default)(d),"params",void 0),(0,p.default)((0,l.default)(d),"state",(0,j.observable)(g.STATE)),(0,p.default)((0,l.default)(d),"init",(0,r.default)(a.mark(function e(){var t,s;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getStorage(g.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return"rank"===(t=e.t0).order&&(t.order="collects"),t=Object.assign({},t,g.EXCLUDE_STATE,{_loaded:!0}),(s=d.params.airtime)&&(t.airtime=s),d.setState(t),e.abrupt("return",d.fetchTag(!0));case 12:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(d),"save",function(){return d.saveStorage(g.NAMESPACE,g.EXCLUDE_STATE)}),(0,p.default)((0,l.default)(d),"fetchTag",(t=(0,r.default)(a.mark(function e(t){var s,o,n,r,i,c;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&d.fetchThirdParty(),i=d.params,c=i.type,i=i.tag,n=d.state,s=n.order,o=n.airtime,n=n.month,e.next=5,h.tagStore.fetchTag({text:i,type:c,order:s,airtime:n?o+"-"+n:o},t);case 5:return(r=e.sent).list.length&&d.thirdPartyKey in d.state.ota&&(c=(null==(i=d.ota)?void 0:i.ts)||0,604800<=(0,b.getTimestamp)()-c)&&d.updateThirdParty(),setTimeout(function(){h.collectionStore.fetchCollectionStatusQueue(r.list.filter(function(e){return e.collected}).map(function(e){return String(e.id).replace("/subject/","")}))},160),e.abrupt("return",r);case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,p.default)((0,l.default)(d),"fetchThirdParty",(0,r.default)(a.mark(function e(){return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.tagStore.init("tag");case 2:setTimeout((0,r.default)(a.mark(function e(){var t;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.ota||d.tag._loaded){e.next=8;break}return e.next=3,(0,y.get)(d.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return d.setState({ota:(0,p.default)({},d.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:d.setState({ota:(0,p.default)({},d.thirdPartyKey,Object.assign({},t,{_loaded:(0,b.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)})),80);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(d),"updateThirdParty",(0,r.default)(a.mark(function e(){return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.includes(d.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,y.update)(d.thirdPartyKey,{list:d.tag.list.map(function(e){e.collected;return(0,n.default)(e,v)})}),T.push(d.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,l.default)(d),"onHeaderRefresh",function(){return d.fetchTag(!0)}),(0,p.default)((0,l.default)(d),"onFooterRefresh",function(){return!(d.tag.list.length<24)&&d.fetchTag()}),(0,p.default)((0,l.default)(d),"resetScrollView",function(){d.setState({hide:!0}),setTimeout(function(){d.setState({hide:!1}),d.save()},0)}),(0,p.default)((0,l.default)(d),"onOrderSelect",function(e){d.resetScrollView(),(0,_.t)("用户标签.排序选择",{label:e}),d.setState({order:x.MODEL_TAG_ORDERBY.getValue(e)}),d.fetchTag(!0)}),(0,p.default)((0,l.default)(d),"onAirdateSelect",function(e){d.resetScrollView(),(0,_.t)("用户标签.年选择",{airtime:e}),d.setState({airtime:"全部"===e?"":e,month:""}),d.fetchTag(!0)}),(0,p.default)((0,l.default)(d),"onMonthSelect",function(e){""===d.state.airtime?(0,b.info)("请先选择年"):(d.resetScrollView(),(0,_.t)("用户标签.月选择",{month:e}),d.setState({month:"全部"===e?"":e}),d.fetchTag(!0))}),(0,p.default)((0,l.default)(d),"onToggleList",function(){d.resetScrollView();var e=d.state.list;(0,_.t)("用户标签.切换布局",{list:!e}),d.setState({list:!e})}),(0,p.default)((0,l.default)(d),"onToggleFixed",function(){var e=d.state.fixed;d.setState({fixed:!e}),d.save()}),(0,p.default)((0,l.default)(d),"onToggleCollected",function(){var e=d.state.collected;d.setState({collected:!e}),d.save()}),(0,p.default)((0,l.default)(d),"onScroll",b.updateVisibleBottom.bind((0,l.default)(d))),d}},"./src/screens/home/tag/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/tag/tool-bar/sort.tsx")),d=o(s("./src/screens/home/tag/tool-bar/year.tsx")),a=o(s("./src/screens/home/tag/tool-bar/month.tsx")),l=o(s("./src/screens/home/tag/tool-bar/more.tsx")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){return t=t.$.state.list,(0,u.jsxs)(n.ToolBar,{style:!t&&r._.mb.sm,children:[(0,u.jsx)(c.default,{}),(0,u.jsx)(d.default,{}),(0,u.jsx)(a.default,{}),(0,u.jsx)(l.default,{})]})});try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/tag/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/home/tag/tool-bar/month.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),r=s("./src/constants/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$).state.month;return(0,i.jsx)(n.ToolBar.Popover,{data:r.DATA_MONTH,text:s?s+"月":"月",type:s?"desc":"sub",heatmap:"用户标签.月选择",onSelect:t.onMonthSelect})});try{month.displayName="month",month.__docgenInfo={description:"",displayName:"month",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/month.tsx#month"]={docgenInfo:month.__docgenInfo,name:"month",path:"src/screens/home/tag/tool-bar/month.tsx#month"})}catch(e){}},"./src/screens/home/tag/tool-bar/more.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,o=(t=s.state).fixed,n=t.list,t=t.collected;return(0,c.jsx)(r.ToolBar.Popover,{data:["选项 · "+(o?"锁定上方":"浮动"),"布局 · "+(n?"列表":"网格"),"收藏 · "+(t?"显示":"隐藏")],icon:"md-more-vert",iconColor:i._.colorDesc,iconSize:20,type:"desc",transparent:!0,onSelect:function(e){return e.includes("选项")?s.onToggleFixed():e.includes("布局")?s.onToggleList():e.includes("收藏")?s.onToggleCollected():void 0}})});try{more.displayName="more",more.__docgenInfo={description:"",displayName:"more",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/more.tsx#more"]={docgenInfo:more.__docgenInfo,name:"more",path:"src/screens/home/tag/tool-bar/more.tsx#more"})}catch(e){}},"./src/screens/home/tag/tool-bar/sort.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$).state.order;return(0,c.jsx)(n.ToolBar.Popover,{data:i.TAG_ORDERBY.map(function(e){return e.label}),icon:"md-sort",iconColor:r._.colorDesc,text:s?i.MODEL_TAG_ORDERBY.getLabel(s):"名称",type:"desc",heatmap:"用户标签.排序选择",onSelect:t.onOrderSelect})});try{sort.displayName="sort",sort.__docgenInfo={description:"",displayName:"sort",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/sort.tsx#sort"]={docgenInfo:sort.__docgenInfo,name:"sort",path:"src/screens/home/tag/tool-bar/sort.tsx#sort"})}catch(e){}},"./src/screens/home/tag/tool-bar/year.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),r=s("./src/constants/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$).state.airtime;return(0,i.jsx)(n.ToolBar.Popover,{data:r.DATA_AIRTIME,text:s||"年",type:s?"desc":"sub",heatmap:"用户标签.年选择",onSelect:t.onAirdateSelect})});try{year.displayName="year",year.__docgenInfo={description:"",displayName:"year",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/tag/tool-bar/year.tsx#year"]={docgenInfo:year.__docgenInfo,name:"year",path:"src/screens/home/tag/tool-bar/year.tsx#year"})}catch(e){}},"./src/screens/home/typerank/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;s=s("./src/stores/index.ts"),t.NAMESPACE="ScreenTyperank",s=t.EXCLUDE_STATE={visibleBottom:s._.window.height,searching:!1};t.STATE=Object.assign({},s,{subjects:{},_loaded:!1})},"./src/screens/home/typerank/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),r=s("./src/constants/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){return t=t.$,(0,i.jsx)(n.Header,{title:"分类排行 · "+r.MODEL_SUBJECT_TYPE.getTitle(t.type)+" · "+t.tag+" ("+t.ids.length+")",hm:["typerank","Typerank"],headerTitleAlign:"left"})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/typerank/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/typerank/header/index.tsx#header"})}catch(e){}},"./src/screens/home/typerank/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/typerank/header/index.tsx")),d=o(s("./src/screens/home/typerank/list/index.tsx")),o=o(s("./src/screens/home/typerank/store.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){var e=s.state._loaded;return(0,a.jsxs)(n.Component,{id:"screen-typerank",children:[(0,a.jsx)(c.default,{}),(0,a.jsx)(n.Page,{children:e&&(0,a.jsx)(d.default,{})})]})})});try{typerank.displayName="typerank",typerank.__docgenInfo={description:"",displayName:"typerank",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/typerank/index.tsx#typerank"]={docgenInfo:typerank.__docgenInfo,name:"typerank",path:"src/screens/home/typerank/index.tsx#typerank"})}catch(e){}},"./src/screens/home/typerank/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),o=s("./src/utils/decorators/index.ts"),r=s("./node_modules/react/jsx-runtime.js"),i={id:"分类排行.跳转"};t.default=(0,o.obc)(function(e,t){var s=e.subjectId,e=e.index,o=t.$,t=t.navigation;return(0,r.jsx)(n.ItemSubject,{navigation:t,event:i,index:e,subjectId:s,type:o.type,subject:o.subject(s),oss:o.subjectOSS(s),active:o.subjectId==s})})},"./src/screens/home/typerank/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/typerank/item/index.tsx")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)(function(e,t){return(t=t.$).ids.length?t.state.searching?(0,a.jsx)(n.Loading,{style:i._.container.flex}):(0,a.jsx)(r.PaginationList2,{contentContainerStyle:i._.container.bottom,keyExtractor:l,data:t.ids,limit:12,renderItem:u,onScroll:t.onScroll,onPage:t.fetchSubjectsFromOSS}):(0,a.jsx)(n.Empty,{text:"此标签没有足够的列表数据"})});function l(e){return String(e)}function u(e){var t=e.item,e=e.index;return(0,a.jsx)(d.default,{subjectId:t,index:e})}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/typerank/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/typerank/list/index.tsx#list"})}catch(e){}},"./src/screens/home/typerank/store.ts":(e,t,s)=>{var d=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.entries.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.is-array.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"))),n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),h=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),_=s("./src/utils/kv/index.ts"),y=s("./src/screens/home/typerank/utils.ts"),x=s("./src/screens/home/typerank/ds.ts");function g(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=o?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var v;t.default=(s=o.default,(0,l.default)(O,s),v=g(O),(0,r.default)(O,[{key:"tag",get:function(){return this.params.tag||""}},{key:"type",get:function(){return this.params.type||"anime"}},{key:"subjectId",get:function(){return this.params.subjectId||0}},{key:"ids",get:function(){return(0,y.getIds)(this.type,this.tag)}},{key:"subject",value:function(e){return(0,j.computed)(function(){return h.subjectStore.subjectV2(e)}).get()}},{key:"subjectOSS",value:function(e){var t=this;return(0,j.computed)(function(){return t.state.subjects["subject_"+e]||{}}).get()}}]),(0,f.default)((t=O).prototype,"tag",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"tag"),t.prototype),(0,f.default)(t.prototype,"type",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"type"),t.prototype),(0,f.default)(t.prototype,"subjectId",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,f.default)(t.prototype,"ids",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"ids"),t.prototype),t);function O(){var r;(0,i.default)(this,O);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return r=v.call.apply(v,[this].concat(s)),(0,p.default)((0,c.default)(r),"params",void 0),(0,p.default)((0,c.default)(r),"state",(0,j.observable)(x.STATE)),(0,p.default)((0,c.default)(r),"init",(0,n.default)(d.mark(function e(){var t;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(x.NAMESPACE);case 2:t=e.sent,r.setState(Object.assign({},t,x.EXCLUDE_STATE,{_loaded:!0}));case 4:case"end":return e.stop()}},e)}))),(0,p.default)((0,c.default)(r),"fetchSubjects",(0,n.default)(d.mark(function e(){return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))),(0,p.default)((0,c.default)(r),"fetchSubjectsFromOSS",(t=(0,n.default)(d.mark(function e(t){var s,o,n,i,c;return d.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return",!0);case 2:if(s=r.state.subjects,o=(0,b.getTimestamp)(),n=[],t.forEach(function(e){var t;r.subject(e).id||(!(t=(s[e]||{})._loaded)||86400<=o-Number(t))&&(!(t=r.subjectOSS(e)._loaded)||86400<=o-Number(t))&&n.push("subject_"+e)}),n.length){e.next=8;break}return e.abrupt("return",!0);case 8:return e.prev=8,console.info("fetchSubjectsFromOSS",n),i=["name","name_cn","image","rank","rating","totalEps","info","staff","tags"],e.next=13,(0,_.gets)(n,i);case 13:c=e.sent,Object.entries(c).forEach(function(e){var t,s,o,n,e=(0,a.default)(e,2),r=e[0],e=e[1];try{c[r]=(0,b.pick)(e,i),c[r].info&&(c[r].date=(null==(t=c[r].info.match(/<li><span>(发售日|放送开始|上映年度|上映时间): <\/span>(.+?)<\/li>/))?void 0:t[2])||""),delete c[r].info,!c[r].date&&Array.isArray(c[r].tags)&&((s=c[r].tags.find(function(e){return/^\d+年\d+月$/.test(e.name)}))&&(c[r].date=s.name),s=c[r].tags.find(function(e){return/^\d{4}$/.test(e.name)}))&&(c[r].date=s.name),delete c[r].tags,Array.isArray(c[r].staff)&&(o=c[r].staff.find(function(e){return"原作"===e.desc}),c[r].origin=(null==o?void 0:o.name)||(null==o?void 0:o.nameJP)||"",n=c[r].staff.find(function(e){return"导演"===e.desc}),c[r].director=(null==n?void 0:n.name)||(null==n?void 0:n.nameJP)||"",c[r].director||(n=c[r].staff.find(function(e){return"作者"===e.desc||"开发"===e.desc||"音乐"===e.desc}),c[r].director=(null==n?void 0:n.name)||(null==n?void 0:n.nameJP)||"")),delete c[r].staff,c[r]._loaded=(0,b.getTimestamp)()}catch(e){}}),r.setState({subjects:c}),r.setStorage(x.NAMESPACE),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(8);case 21:h.collectionStore.fetchCollectionStatusQueue(t);case 22:case"end":return e.stop()}},e,null,[[8,19]])})),function(e){return t.apply(this,arguments)})),(0,p.default)((0,c.default)(r),"onScroll",b.updateVisibleBottom.bind((0,c.default)(r))),r}},"./src/screens/home/typerank/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.getIds=function(e,t){var s;if(!e||!t)return[];"anime"===e?s=n.default:"book"===e?s=r.default:"game"===e?s=i.default:"music"===e?s=c.default:"real"===e&&(s=d.default);return(null==(e=s)?void 0:e[t])||[]},o(s("./src/assets/json/typerank/anime-ids.json"))),r=o(s("./src/assets/json/typerank/book-ids.json")),i=o(s("./src/assets/json/typerank/game-ids.json")),c=o(s("./src/assets/json/typerank/music-ids.json")),d=o(s("./src/assets/json/typerank/real-ids.json"))},"./src/screens/home/v2/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Component")},"./src/screens/home/v2/component/empty/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.FOOTER_EMPTY_TEXT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Empty"),t.FOOTER_EMPTY_TEXT={"全部":"当前没有可管理的条目哦","动画":"当前没有在追的番组哦","书籍":"当前没有在读的书籍哦","三次元":"当前没有在追的电视剧哦","游戏":"当前没有在玩的游戏哦"}},"./src/screens/home/v2/component/empty/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/components/mesume/utils.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/utils/fetch/index.ts"),a=s("./src/screens/home/v2/component/empty/ds.ts"),l=s("./src/screens/home/v2/component/empty/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.title,e=e.length,o=t.$,n=t.navigation,t=(0,l.memoStyles)(),r=o.state.filter;return(0,u.jsxs)(i.Flex,{style:e?t.top:t.empty,direction:"column",justify:"center",children:[(0,u.jsx)(i.Mesume,{size:80}),(0,u.jsx)(i.Text,{style:t.text,type:"sub",size:13,align:"center",children:e?(0,c.randomSpeech)():a.FOOTER_EMPTY_TEXT[s]}),!!r&&e<=3&&(0,u.jsx)(i.Button,{style:t.btn,type:"ghostMain",onPress:function(){(0,d.t)("首页.再搜索",{type:s,value:r}),n.push("Search",{_type:"全部"===s?"条目":s,_value:r})},children:"前往搜索"})]})},a.COMPONENT)},"./src/screens/home/v2/component/empty/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{empty:{minHeight:320},top:{minHeight:280},text:Object.assign({marginTop:o._.md,maxWidth:o._.window.contentWidth-2*o._.md},o._.fontSize(14)),btn:{marginTop:o._.lg,width:120}}})},"./src/screens/home/v2/component/filter/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Filter")},"./src/screens/home/v2/component/filter/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=s("./src/components/index.ts"),f=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),j=s("./src/utils/dev/index.ts"),h=s("./src/screens/home/v2/component/filter/ds.ts"),b=s("./src/screens/home/v2/component/filter/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");function y(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}s=u.default.Component,(0,c.default)(g,s),x=y(g),(0,r.default)(g,[{key:"show",get:function(){return f.systemStore.setting.homeFilter}},{key:"filter",get:function(){var e=this.context.$,t=e.state.filterPage;if(0<=t&&t<=e.tabs.length){var s=e.state.filter;if(this.props.title===e.tabs[t].title)return s}return""}},{key:"render",value:function(){var e,t,s,o;return(0,j.r)(h.COMPONENT),this.show?(t=(e=this.context.$).state.progress,s=this.props.length,o=this.state.focus,(0,_.jsxs)(m.default,{style:this.styles.filter,children:[(0,_.jsx)(p.Input,{style:this.styles.input,clearButtonMode:"never",defaultValue:this.filter,onFocus:this.onFocus,onBlur:this.onBlur,onChangeText:e.onFilterChange}),!o&&!this.filter&&(0,_.jsxs)(p.Flex,{style:this.styles.icon,justify:"center",pointerEvents:"none",children:[t.fetching&&(0,_.jsx)(m.default,{style:this.styles.loading,children:(0,_.jsx)(p.Loading.Medium,{color:f._.colorSub,size:16})}),s?(0,_.jsx)(p.Text,{type:"icon",bold:!0,size:15,children:s}):(0,_.jsx)(p.Iconfont,{name:"md-search",size:18})]})]})):null}},{key:"styles",get:function(){return(0,b.memoStyles)()}}]);var x,u=g;function g(){var e;(0,n.default)(this,g);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=x.call.apply(x,[this].concat(s)),(0,l.default)((0,i.default)(e),"state",{focus:!1}),(0,l.default)((0,i.default)(e),"onFocus",function(){e.setState({focus:!0})}),(0,l.default)((0,i.default)(e),"onBlur",function(){e.setState({focus:!1})}),e}t.default=(0,o.obc)(u);try{filter.displayName="filter",filter.__docgenInfo={description:"",displayName:"filter",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"enum",value:[{value:'"动画"'},{value:'"书籍"'},{value:'"游戏"'},{value:'"三次元"'},{value:'"全部"'}]}},length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/filter/index.tsx#filter"]={docgenInfo:filter.__docgenInfo,name:"filter",path:"src/screens/home/v2/component/filter/index.tsx#filter"})}catch(e){}},"./src/screens/home/v2/component/filter/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{filter:{height:64,paddingVertical:12,paddingHorizontal:o._.wind,backgroundColor:o._.colorBg},input:Object.assign({height:40,paddingVertical:0},o._.fontSize16,{fontWeight:"800",textAlign:"center",backgroundColor:o._.select(o._.colorBorder,o._.colorPlain),borderRadius:40}),icon:{position:"absolute",zIndex:1,top:0,right:0,bottom:0,left:0},loading:{position:"absolute",zIndex:2,top:24,right:14,width:44,height:44}}})},"./src/screens/home/v2/component/grid-info/book-next-btn/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"BookNextBtn")},"./src/screens/home/v2/component/grid-info/book-next-btn/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/grid-info/book-next-btn/ds.ts"),c=s("./src/screens/home/v2/component/grid-info/book-next-btn/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.epStatus,n=e.volStatus,r=t.$;return(0,d.jsx)(i.Touchable,{style:c.styles.touchable,onPress:function(){return r.doUpdateNext(s,o,n)},children:(0,d.jsx)(i.Flex,{justify:"center",children:(0,d.jsx)(i.Iconfont,{style:c.styles.icon,name:"md-check-circle-outline",size:18})})})},n.COMPONENT)},"./src/screens/home/v2/component/grid-info/book-next-btn/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({icon:{marginBottom:-1},touchable:{padding:s._.sm}})},"./src/screens/home/v2/component/grid-info/btn-next-ep/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"BtnNextEp")},"./src/screens/home/v2/component/grid-info/btn-next-ep/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/component/grid-info/btn-next-ep/ds.ts"),c=s("./src/screens/home/v2/component/grid-info/btn-next-ep/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=t.$;return(e=o.nextWatchEp(s).sort)?(0,d.jsx)(r.Touchable,{style:c.styles.touchable,onPress:function(){o.doWatchedNextEp(s)},children:(0,d.jsxs)(r.Flex,{justify:"center",children:[(0,d.jsx)(r.Iconfont,{style:c.styles.icon,name:"md-check-circle-outline",size:18}),(0,d.jsx)(n.default,{style:c.styles.placeholder,children:(0,d.jsx)(r.Text,{type:"sub",children:e})})]})}):null},i.COMPONENT)},"./src/screens/home/v2/component/grid-info/btn-next-ep/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({icon:{marginBottom:-1},touchable:{padding:s._.sm},placeholder:{marginBottom:-1.5,marginLeft:s._.sm}})},"./src/screens/home/v2/component/grid-info/count/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Count")},"./src/screens/home/v2/component/grid-info/count/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/v2/component/grid-info/book-next-btn/index.tsx")),o=s("./src/screens/home/v2/component/grid-info/count/ds.ts"),l=s("./src/screens/home/v2/component/grid-info/count/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.subjectId,o=void 0===(o=e.subject)?{}:o,n=e.epStatus,e=e.tip,r=(t=t.$).subject(s);return"游戏"===(r=d.MODEL_SUBJECT_TYPE.getTitle((null==r?void 0:r.type)||(null==o?void 0:o.type)))?(0,u.jsx)(i.Text,{style:c._.mt.xs,type:"sub",size:12,lineHeight:13,children:e}):"书籍"===r?(r=(e=(void 0===(o=t.collection.list)?[]:o).find(function(e){return e.subject_id===s})).ep_status,o=e.vol_status,(0,u.jsxs)(i.Flex,{style:l.styles.book,justify:"end",children:[(0,u.jsxs)(i.Text,{type:"primary",size:20,children:[(0,u.jsxs)(i.Text,{type:"primary",size:12,lineHeight:20,children:["Chap."," "]}),r]}),(0,u.jsx)(a.default,{subjectId:s,epStatus:r+1,volStatus:o}),(0,u.jsxs)(i.Text,{style:c._.ml.md,type:"primary",size:20,children:[(0,u.jsxs)(i.Text,{type:"primary",size:12,lineHeight:20,children:["Vol."," "]}),o]}),(0,u.jsx)(a.default,{subjectId:s,epStatus:r,volStatus:o+1})]})):(0,u.jsxs)(i.Text,{type:"primary",size:18,children:[n||0,(0,u.jsxs)(i.Text,{type:"sub",lineHeight:18,children:[" ","/ ",t.countRight(s)]})]})},o.COMPONENT)},"./src/screens/home/v2/component/grid-info/count/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({book:{marginBottom:-4}})},"./src/screens/home/v2/component/grid-info/cover/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Cover")},"./src/screens/home/v2/component/grid-info/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/v2/component/grid-item/styles.ts"),n=s("./src/screens/home/v2/component/grid-info/cover/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=void 0===(o=e.subject)?{}:o,e=e.onPress,t=t.$.subject(s),n=(0,c.memoStyles)(),n=i._.isMobileLanscape?60:n.item.width;return(0,d.jsx)(r.Cover,{size:n,height:1.4*n,src:(null==t||null==(n=t.images)?void 0:n.medium)||(null==o||null==(t=o.images)?void 0:t.medium)||"",radius:!0,shadow:!0,onPress:e},s)},n.COMPONENT)},"./src/screens/home/v2/component/grid-info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"GridInfo")},"./src/screens/home/v2/component/grid-info/eps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Eps")},"./src/screens/home/v2/component/grid-info/eps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/grid-info/eps/ds.ts"),a=s("./src/screens/home/v2/component/grid-info/eps/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=t.$,n=t.navigation,e=d.systemStore.setting.homeGridEpAutoAdjust,t=o.state.flip,r=o.eps(s);return(0,l.jsx)(i.default,{style:a.styles.eps,children:(0,l.jsx)(c.Eps,{grid:!0,numbersOfLine:d._.isMobileLanscape?12:e?d._.device(o.epsCount(s,!1)<=18?6:7,8):d._.device(7,8),lines:d._.isMobileLanscape?1:3,login:o.isLogin,subjectId:s,eps:r,userProgress:o.userProgress(s),flip:t===s,onFliped:o.afterFlipEps,onSelect:function(e,t){o.doEpsSelect(e,t,s,n)}})})},n.COMPONENT)},"./src/screens/home/v2/component/grid-info/eps/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({eps:{paddingRight:s._.xs,marginTop:s._.xs}})},"./src/screens/home/v2/component/grid-info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.index-of.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),u=s("./src/utils/fetch/index.ts"),m=o(s("./src/screens/home/v2/component/grid-info/count/index.tsx")),p=o(s("./src/screens/home/v2/component/grid-info/cover/index.tsx")),f=o(s("./src/screens/home/v2/component/grid-info/eps/index.tsx")),j=o(s("./src/screens/home/v2/component/grid-info/onair/index.tsx")),h=o(s("./src/screens/home/v2/component/grid-info/title/index.tsx")),b=o(s("./src/screens/home/v2/component/grid-info/tool-bar/index.tsx")),o=s("./src/screens/home/v2/component/grid-info/ds.ts"),_=s("./src/screens/home/v2/component/grid-info/styles.ts"),y=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=void 0===(n=e.subjectId)?0:n,o=void 0===(n=e.subject)?{}:n,n=void 0===(n=e.epStatus)?"":n,e=void 0===(e=e.tip)?"":e,r=t.$,i=t.navigation,t=(0,_.memoStyles)(),r=-1!==r.state.top.indexOf(s);return(0,y.jsxs)(d.Flex,{style:t.item,align:"start",children:[(0,y.jsxs)(c.default,{children:[(0,y.jsx)(p.default,{subjectId:s,subject:o,onPress:function(){var e;(0,u.t)("首页.跳转",{to:"Subject",from:"grid",subjectId:s}),i.push("Subject",{subjectId:s,_jp:o.name,_cn:o.name_cn||o.name,_image:(null==o||null==(e=o.images)?void 0:e.medium)||""})}}),(0,y.jsx)(j.default,{subjectId:s})]}),(0,y.jsxs)(d.Flex.Item,{style:t.info,children:[(0,y.jsx)(h.default,{subjectId:s,subject:o}),(0,y.jsxs)(d.Flex,{style:(0,l.stl)(a._.mt.sm,a._.isPad&&a._.mb.xs),children:[(0,y.jsx)(d.Flex.Item,{children:(0,y.jsx)(m.default,{subjectId:s,subject:o,epStatus:n,tip:e})}),(0,y.jsx)(b.default,{subjectId:s,subject:o})]}),(0,y.jsx)(f.default,{subjectId:s})]}),r&&(0,y.jsx)(c.default,{style:t.dot})]})},o.COMPONENT)},"./src/screens/home/v2/component/grid-info/onair/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Onair")},"./src/screens/home/v2/component/grid-info/onair/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/grid-info/onair/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,o,e=e.subjectId,t=t.$,n=i._.isMobileLanscape?i._.mt.xs:i._.mt.md;return t.isToday(e)?(s=(o=t.onAirCustom(e)).h,o=o.m,(0,c.jsxs)(r.Text,{style:n,type:"success",align:"center",size:13,bold:!0,children:[s,":",o]})):t.isNextDay(e)?(o=(s=t.onAirCustom(e)).h,t=s.m,(0,c.jsxs)(r.Text,{style:n,type:"sub",align:"center",size:13,bold:!0,children:["明天 ",o,":",t]})):null},n.COMPONENT)},"./src/screens/home/v2/component/grid-info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/screens/home/v2/component/grid-item/styles.ts");t.memoStyles=o._.memoStyles(function(){var e=(0,n.memoStyles)();return{item:{paddingVertical:o._.device(16,32),paddingHorizontal:o._.wind},info:{marginLeft:o._.device(e.item.marginLeft,o._.md)},dot:{position:"absolute",top:6,right:0,borderWidth:o._.r(8),borderTopColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent",borderLeftColor:o._.colorIcon,transform:[{rotate:"-45deg"}],opacity:.8}}})},"./src/screens/home/v2/component/grid-info/title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Title")},"./src/screens/home/v2/component/grid-info/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/component/grid-info/title/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,e=void 0===(e=e.subject)?{}:e,o=(t=t.$).subject(s),o=(0,r.HTMLDecode)((0,r.cnjp)((null==o?void 0:o.name_cn)||(null==e?void 0:e.name_cn),(null==o?void 0:o.name)||(null==e?void 0:e.name)));return(0,c.jsx)(n.Text,{size:15,numberOfLines:14<=t.eps(s).length?1:2,bold:!0,children:o})},i.COMPONENT)},"./src/screens/home/v2/component/grid-info/tool-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-info/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"ToolBar")},"./src/screens/home/v2/component/grid-info/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.index-of.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),d=s("./src/stores/index.ts"),a=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=o(s("./src/screens/home/v2/component/item/btn-origin/index.tsx")),m=o(s("./src/screens/home/v2/component/grid-info/btn-next-ep/index.tsx")),o=s("./src/screens/home/v2/component/grid-info/tool-bar/ds.ts"),p=s("./src/screens/home/v2/component/grid-info/tool-bar/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.subjectId,e=void 0===(e=e.subject)?{}:e,o=t.$,t=o.subject(s),n=l.MODEL_SUBJECT_TYPE.getTitle(t.type||(null==e?void 0:e.type)),r=(0,a.cnjp)((null==t?void 0:t.name_cn)||(null==e?void 0:e.name_cn),(null==t?void 0:t.name)||(null==e?void 0:e.name)),i=(0,a.cnjp)((null==t?void 0:t.name)||(null==e?void 0:e.name),(null==t?void 0:t.name_cn)||(null==e?void 0:e.name_cn));return(0,f.jsxs)(c.Flex,{style:d._.mt.xs,children:[("动画"===n||"三次元"===n)&&(0,f.jsx)(u.default,{subjectId:s,isTop:-1!==o.state.top.indexOf(s)}),(0,f.jsx)(m.default,{subjectId:s}),(0,f.jsx)(c.Touchable,{style:p.styles.touchable,onPress:function(){o.showManageModal(s,{title:r,desc:i})},children:(0,f.jsx)(c.Iconfont,{name:"md-star-outline",size:19})})]})},o.COMPONENT)},"./src/screens/home/v2/component/grid-info/tool-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touchable:{padding:s._.sm,marginLeft:s._.sm}})},"./src/screens/home/v2/component/grid-item/cover/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Cover")},"./src/screens/home/v2/component/grid-item/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/constants/index.ts"),l=s("./src/screens/home/v2/component/grid-item/styles.ts"),n=s("./src/screens/home/v2/component/grid-item/cover/ds.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.subject,n=e.epStatus,r=t.$,e=(0,l.memoStyles)(),t=d.systemStore.setting.homeGridCoverLayout,t=a.MODEL_SETTING_HOME_GRID_COVER_LAYOUT.getLabel(t);return(0,u.jsx)(i.Touchable,{animate:!0,onPress:function(){r.selectGirdSubject(s,{subject_id:s,subject:o,ep_status:n})},children:(0,u.jsx)(c.Cover,{size:e.item.width,height:e.item.width*("长方形"===t?1.4:1),src:(null==o||null==(e=o.images)?void 0:e.medium)||"",shadow:!0,radius:!0,delay:!1})})},n.COMPONENT)},"./src/screens/home/v2/component/grid-item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"GridItem")},"./src/screens/home/v2/component/grid-item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),m=s("./src/stores/index.ts"),p=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),f=s("./src/constants/index.ts"),j=o(s("./src/screens/home/v2/component/grid-item/cover/index.tsx")),h=o(s("./src/screens/home/v2/component/grid-item/opacity/index.tsx")),o=s("./src/screens/home/v2/component/grid-item/ds.ts"),b=s("./src/screens/home/v2/component/grid-item/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n=void 0===(n=e.subject)?{}:n,r=void 0===(r=e.subjectId)?0:r,e=e.epStatus,t=t.$,i=(0,b.memoStyles)(),c=m.systemStore.setting.homeGridTitle,d="游戏"===f.MODEL_SUBJECT_TYPE.getTitle(n.type);return d||(s=t.epsCount(r))<(o=t.currentOnAir(r))&&(o=t.epsNoSp(r).filter(function(e){return"Air"===e.status}).length),(0,_.jsxs)(a.default,{style:i.item,children:[(0,_.jsx)(h.default,{subjectId:r,children:(0,_.jsx)(j.default,{subjectId:r,subject:n,epStatus:e})}),!d&&(0,_.jsx)(u.OnairProgress,{epStatus:e,total:s,current:o}),c&&(0,_.jsx)(l.Text,{style:[m._.mt.sm,m._.mb.xs],size:11,bold:!0,numberOfLines:2,children:(0,p.cnjp)(n.name_cn,n.name)})]})},o.COMPONENT)},"./src/screens/home/v2/component/grid-item/opacity/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid-item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Opacity")},"./src/screens/home/v2/component/grid-item/opacity/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),o=s("./src/utils/decorators/index.ts"),r=s("./src/screens/home/v2/component/grid-item/opacity/ds.ts"),i=s("./src/screens/home/v2/component/grid-item/opacity/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,e=e.children,t=(t.$.state.grid||{}).subject_id;return(0,c.jsx)(n.default,{style:t===s&&i.styles.active,children:e})},r.COMPONENT)},"./src/screens/home/v2/component/grid-item/opacity/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({active:{opacity:.64}})},"./src/screens/home/v2/component/grid-item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){var e=o._.isMobileLanscape?9:o._.device(4,5);return{item:{width:(o._.window.contentWidth-10*(e-1))/e,marginLeft:10,marginBottom:10},active:{opacity:.5}}})},"./src/screens/home/v2/component/grid/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Grid")},"./src/screens/home/v2/component/grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/v2/component/grid/info/index.tsx")),d=o(s("./src/screens/home/v2/component/grid/linear/index.tsx")),a=o(s("./src/screens/home/v2/component/grid/list/index.tsx")),o=s("./src/screens/home/v2/component/grid/ds.ts"),l=s("./src/screens/home/v2/component/grid/styles.ts"),u=s("./node_modules/react/jsx-runtime.js"),m={};t.default=(0,i.obc)(function(e,t){e=void 0===(e=e.title)?"全部":e;return(t=t.$).tabsLabel===e&&(m[e]=!0),t.tabsLabel===e||m[e]?t.collection._loaded?(t=(0,l.memoStyles)(),(0,u.jsxs)(n.default,{style:t.container,children:[(0,u.jsx)(c.default,{title:e}),(0,u.jsxs)(n.default,{children:[(0,u.jsx)(d.default,{}),(0,u.jsx)(a.default,{title:e})]})]})):(0,u.jsx)(r.Loading,{}):null},o.COMPONENT)},"./src/screens/home/v2/component/grid/info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.PREV_TEXT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Info"),t.PREV_TEXT={"全部":"条目","动画":"番组","书籍":"书籍","三次元":"电视剧","游戏":"游戏"}},"./src/screens/home/v2/component/grid/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./src/components/index.ts"),u=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),m=s("./src/screens/home/v2/component/grid/styles.ts"),p=o(s("./src/screens/home/v2/component/grid-info/index.tsx")),f=s("./src/screens/home/v2/component/grid/info/ds.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o,n,r,i,c,d,e=e.title;return(t=t.$).collection._loaded?(s=(0,m.memoStyles)(),n=t.state,o=n.current,n=n.grid,r="游戏"===e,d=t.currentCollection(e).list,c=r?n:d.find(function(e){return e.subject_id===o}),i="","全部"===e&&!c&&u.systemStore.setting.showGame?(c=d.find(function(e){return e.id==o}))&&(i=(null==c?void 0:c.tip)||"",c=n):r&&(i=(null==(d=t.games.list.find(function(e){return e.id==o}))?void 0:d.tip)||""),(0,j.jsx)(a.default,{style:r?s.gameInfo:s.info,children:c?(0,j.jsx)(p.default,{subjectId:c.subject_id,subject:c.subject,epStatus:c.ep_status,tip:i}):(0,j.jsxs)(l.Flex,{style:s.noSelect,justify:"center",direction:"column",children:[(0,j.jsx)(l.Mesume,{size:80}),(0,j.jsxs)(l.Text,{style:u._.mt.sm,type:"sub",align:"center",children:["请先点击下方",f.PREV_TEXT[e]]})]})})):(0,j.jsx)(l.Loading,{})},f.COMPONENT)},"./src/screens/home/v2/component/grid/linear/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Linear")},"./src/screens/home/v2/component/grid/linear/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),o=s("./src/utils/decorators/index.ts"),r=s("./node_modules/expo-linear-gradient/build/LinearGradient.js"),i=s("./src/screens/home/v2/component/grid/linear/ds.ts"),c=s("./src/screens/home/v2/component/grid/linear/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ob)(function(){return n._.isDark?(0,d.jsx)(r.LinearGradient,{style:c.styles.linear,colors:["rgba("+n._.colorPlainRaw.join()+", 1)","rgba("+n._.colorPlainRaw.join()+", 0.8)","rgba("+n._.colorPlainRaw.join()+", 0.24)","rgba("+n._.colorPlainRaw.join()+", 0)"]}):null},i.COMPONENT)},"./src/screens/home/v2/component/grid/linear/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({linear:{position:"absolute",zIndex:1,right:0,top:0,left:0,height:24}})},"./src/screens/home/v2/component/grid/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/grid/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"List")},"./src/screens/home/v2/component/grid/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/screens/_/index.ts"),c=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/screens/home/v2/component/grid/styles.ts"),a=s("./src/screens/home/v2/component/grid/list/utils.tsx"),n=s("./src/screens/home/v2/component/grid/list/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var e=e.title,t=t.$,s=(0,d.memoStyles)(),o=c.systemStore.setting.homeGridCoverLayout,n=c._.isMobileLanscape?9:c._.device(4,5);return(0,l.jsx)(i.PaginationList2,{keyExtractor:a.keyExtractor,contentContainerStyle:s.contentContainerStyle,data:t.currentCollection(e).list,progressViewOffset:20,limit:"square"===o?20:16,numColumns:n,footerNoMoreDataComponent:(0,l.jsx)(r.default,{}),footerNoMoreDataText:"",renderItem:a.renderItem,onHeaderRefresh:t.onHeaderRefresh},""+c._.orientation+n)},n.COMPONENT)},"./src/screens/home/v2/component/grid/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=c,t.renderItem=d,o(s("./node_modules/react/index.js")),s("./src/constants/index.ts")),r=o(s("./src/screens/home/v2/component/grid-item/index.tsx")),i=s("./node_modules/react/jsx-runtime.js");function c(e){return String(e.subject_id||e.id)}function d(e){e=e.item;return(0,i.jsx)(r.default,{subjectId:e.subject_id||e.id,subject:e.subject||{id:e.id,images:{common:e.cover,grid:e.cover,large:e.cover,medium:e.cover,small:e.cover},name:e.name,name_cn:e.nameCn,summary:"",type:n.MODEL_SUBJECT_TYPE.getValue("游戏"),url:""},epStatus:e.ep_status})}try{c.displayName="keyExtractor",c.__docgenInfo={description:"",displayName:"keyExtractor",props:{subject_id:{defaultValue:null,description:"",name:"subject_id",required:!0,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/grid/list/utils.tsx#keyExtractor"]={docgenInfo:c.__docgenInfo,name:"keyExtractor",path:"src/screens/home/v2/component/grid/list/utils.tsx#keyExtractor"})}catch(e){}try{d.displayName="renderItem",d.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/grid/list/utils.tsx#renderItem"]={docgenInfo:d.__docgenInfo,name:"renderItem",path:"src/screens/home/v2/component/grid/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/home/v2/component/grid/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){var e=o._.isMobileLanscape?132:244;return{container:{flex:1,paddingTop:o._.tabsHeaderHeight+o._.xs,overflow:"hidden"},info:{zIndex:1e3,width:"100%",height:e,backgroundColor:o._.select(o._.colorPlain,o._.deep(o._.colorPlain,o._.colorBg)),overflow:"hidden"},gameInfo:{width:"100%",height:160},noSelect:{width:"100%",height:"100%"},contentContainerStyle:{paddingTop:16,paddingBottom:o._.tabBarHeight+o._.lg+e,paddingLeft:o._.wind-o._.sm-2,overflow:"hidden"}}})},"./src/screens/home/v2/component/item/btn-book-next/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"BtnBookNext")},"./src/screens/home/v2/component/item/btn-book-next/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/item/btn-book-next/ds.ts"),c=s("./src/screens/home/v2/component/item/btn-book-next/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.epStatus,n=e.volStatus,r=t.$;return(0,d.jsx)(i.Touchable,{style:c.styles.touch,onPress:function(){return r.doUpdateNext(s,o,n)},children:(0,d.jsx)(i.Flex,{style:c.styles.btn,justify:"center",children:(0,d.jsx)(i.Iconfont,{style:c.styles.icon,name:"md-check-circle-outline",size:18})})})},n.COMPONENT)},"./src/screens/home/v2/component/item/btn-book-next/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{marginLeft:s._.device(0,4),borderRadius:20,overflow:"hidden"},btn:{width:34,height:34},icon:{marginBottom:-1}})},"./src/screens/home/v2/component/item/btn-ep-next/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"BtnEpNext")},"./src/screens/home/v2/component/item/btn-ep-next/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/components/index.ts"),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/item/btn-ep-next/ds.ts"),c=s("./src/screens/home/v2/component/item/btn-ep-next/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.epStatus,e=e.isFirst,n=t.$;return(t=n.nextWatchEp(s).sort)?(o=n.countFixed(s,o),(0,d.jsxs)(i.Touchable,{style:c.styles.touch,onPress:function(){return n.doWatchedNextEp(s)},children:[(0,d.jsxs)(i.Flex,{style:c.styles.btn,justify:"center",children:[(0,d.jsx)(i.Iconfont,{style:c.styles.icon,name:"md-check-circle-outline",size:19}),(0,d.jsx)(r.default,{style:c.styles.text,children:(0,d.jsx)(i.Text,{type:"sub",children:Math.max(t,o+1)})})]}),e&&(0,d.jsx)(i.Heatmap,{right:26,id:"首页.观看下一章节"})]})):null},n.COMPONENT)},"./src/screens/home/v2/component/item/btn-ep-next/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{marginRight:4,borderRadius:20,overflow:"hidden"},btn:{height:34,paddingHorizontal:s._.device(s._.sm,s._.md)},next:{paddingLeft:s._.sm,paddingRight:2},icon:{marginTop:2},text:{marginBottom:-2,marginLeft:s._.xs}})},"./src/screens/home/v2/component/item/btn-favor/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"BtnEpNext")},"./src/screens/home/v2/component/item/btn-favor/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/item/btn-favor/ds.ts"),i=s("./src/screens/home/v2/component/item/btn-favor/styles.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,o=e.subject,e=e.isFirst,n=t.$;return(0,c.jsxs)(r.Touchable,{style:i.styles.touch,onPress:function(){return n.showManageModal(s,{title:o.name_cn||o.name,desc:o.name})},children:[(0,c.jsx)(r.Flex,{style:i.styles.btn,justify:"center",children:(0,c.jsx)(r.Iconfont,{name:"md-star-outline",size:19.5})}),e&&(0,c.jsx)(r.Heatmap,{id:"首页.显示收藏管理"})]})},n.COMPONENT)},"./src/screens/home/v2/component/item/btn-favor/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{marginRight:s._.device(2,4),borderRadius:20,overflow:"hidden"},btn:{width:34,height:34}})},"./src/screens/home/v2/component/item/btn-origin/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"BtnOrigin")},"./src/screens/home/v2/component/item/btn-origin/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.array.some.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),d=(o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/screens/_/index.ts"),l=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),n=s("./src/screens/home/v2/component/item/btn-origin/ds.ts"),m=s("./src/screens/home/v2/component/item/btn-origin/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,o,n=e.subjectId,e=void 0!==(e=e.isTop)&&e,r=t.$,i=(t=l.systemStore.setting).homeOrigin,t=t.exportICS;return-1===i?null:(s=(0,c.default)(r.actions(n).map(function(e){return e.name})),!0===i&&s.push.apply(s,(0,c.default)(r.onlineOrigins(n).map(function(e){return"object"==typeof e?e.name:e}))),i=r.subject(n),o=u.MODEL_SUBJECT_TYPE.getTitle(i.type),e=[].concat((0,c.default)(s),[e?"取消置顶":"置顶"]),["动画","三次元"].includes(o)&&(e.push("全部展开","全部收起"),null!=i&&null!=(o=i.eps)&&o.length&&i.eps.some(function(e){return 0===e.type&&"NA"===e.status})&&e.push("一键添加提醒"),null!=i)&&null!=(o=i.eps)&&o.length&&t&&e.push("导出放送日程ICS"),(0,p.jsxs)(a.Popover,{style:m.styles.touch,data:e,onSelect:function(e){r.onPopover(e,n)},children:[(0,p.jsx)(d.Flex,{style:m.styles.btn,justify:"center",children:(0,p.jsx)(d.Iconfont,{style:m.styles.icon,name:s.length?"md-airplay":"md-menu",size:s.length?17:21})}),(0,p.jsx)(d.Heatmap,{right:55,bottom:-7,id:"首页.搜索源"})]},n))},n.COMPONENT)},"./src/screens/home/v2/component/item/btn-origin/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{marginRight:s._.device(10,s._.sm),borderRadius:20,overflow:"hidden"},btn:{width:34,height:34},icon:{marginBottom:-1}})},"./src/screens/home/v2/component/item/count-book/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"CountBook")},"./src/screens/home/v2/component/item/count-book/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/v2/component/item/btn-book-next/index.tsx")),o=s("./src/screens/home/v2/component/item/count-book/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.subjectId,e=e.isFirst,t=t.$,o=(n=(void 0===(n=t.collection.list)?[]:n).find(function(e){return e.subject_id===s})||{}).ep_status,n=n.vol_status,t=t.subject(s).eps_count||0;return(0,d.jsxs)(r.Flex,{children:[(0,d.jsxs)(r.Text,{type:"primary",size:16,children:[(0,d.jsxs)(r.Text,{type:"primary",size:10,lineHeight:16,children:["Chap."," "]}),o,!!t&&(0,d.jsxs)(r.Text,{type:"sub",size:12,lineHeight:16,children:[" ","/ ",t]})]}),(0,d.jsx)(c.default,{subjectId:s,epStatus:o+1,volStatus:n}),(0,d.jsxs)(r.Text,{style:i._.device(i._.ml.sm,i._.ml.md),type:"primary",size:16,children:[(0,d.jsxs)(r.Text,{type:"primary",size:10,lineHeight:16,children:["Vol."," "]}),n]}),(0,d.jsx)(c.default,{subjectId:s,epStatus:o,volStatus:n+1}),e&&(0,d.jsx)(r.Heatmap,{right:40,id:"首页.更新书籍下一个章节"})]})},o.COMPONENT)},"./src/screens/home/v2/component/item/count-video/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"CountVideo")},"./src/screens/home/v2/component/item/count-video/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/component/item/count-video/ds.ts"),c=s("./src/screens/home/v2/component/item/count-video/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,e=e.epStatus,o=(t=t.$).$Item(s).expand;return(0,d.jsxs)(n.Flex,{style:c.styles.count,children:[(0,d.jsxs)(n.Text,{type:"primary",size:20,children:[t.countFixed(s,e),(0,d.jsxs)(n.Text,{type:"sub",lineHeight:20,children:[" ","/ ",t.countRight(s)]})]}),(0,d.jsx)(r.IconExpand,{style:c.styles.icon,expand:o})]})},i.COMPONENT)},"./src/screens/home/v2/component/item/count-video/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({count:{marginTop:-2},icon:{marginTop:5}})},"./src/screens/home/v2/component/item/count/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Count")},"./src/screens/home/v2/component/item/count/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/screens/home/v2/component/item/count-book/index.tsx")),l=o(s("./src/screens/home/v2/component/item/count-video/index.tsx")),o=s("./src/screens/home/v2/component/item/count/ds.ts"),u=s("./src/screens/home/v2/component/item/count/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.subjectId,o=e.subject,n=e.epStatus,e=e.isFirst,r=t.$;return"游戏"===(t=d.MODEL_SUBJECT_TYPE.getTitle(o.type))?null:"书籍"===t?(0,m.jsx)(i.default,{style:u.styles.count,children:(0,m.jsx)(a.default,{subjectId:s,isFirst:e})}):(0,m.jsxs)(c.Touchable,{style:u.styles.count,onPress:function(){return r.itemToggleExpand(s)},children:[(0,m.jsx)(l.default,{epStatus:n,subjectId:s,subject:o}),e&&(0,m.jsx)(c.Heatmap,{right:44,bottom:5,id:"首页.展开或收起条目"})]})},o.COMPONENT)},"./src/screens/home/v2/component/item/count/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({count:{minHeight:24,paddingHorizontal:s._.sm,marginHorizontal:-s._.sm,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/home/v2/component/item/cover/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.ITEM_HEIGHT_COMPACT=t.ITEM_HEIGHT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Cover"),t.ITEM_HEIGHT=142,t.ITEM_HEIGHT_COMPACT=100},"./src/screens/home/v2/component/item/cover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),l=s("./src/components/index.ts"),u=s("./src/screens/_/index.ts"),m=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),p=s("./src/constants/index.ts"),f=s("./src/screens/home/v2/component/item/cover/ds.ts"),j=s("./src/screens/home/v2/component/item/cover/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s,o=e.index,n=e.subjectId,r=e.subject,i=t.$,c=t.navigation,t=(e=m.systemStore.setting.homeListCompact)?j.styles.inViewCompact:j.styles.inView,d=p.MODEL_SUBJECT_TYPE.getTitle(r.type);return(0,h.jsxs)(a.default,{children:[(0,h.jsx)(l.Touchable,{animate:!0,onPress:function(){return i.onItemPress(c,n,r)},children:(0,h.jsx)(u.InView,{style:t,y:(e?f.ITEM_HEIGHT_COMPACT:f.ITEM_HEIGHT)*o+m._.headerHeight,children:(0,h.jsx)(u.Cover,{src:(null==r||null==(s=r.images)?void 0:s.medium)||"",size:t.minWidth,height:e?t.minHeight:p.IMG_HEIGHT,radius:!0,shadow:!0,type:d})})}),0===o&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.Heatmap,{bottom:68,id:"首页.全部展开",transparent:!0}),(0,h.jsx)(l.Heatmap,{bottom:34,id:"首页.全部关闭",transparent:!0}),(0,h.jsx)(l.Heatmap,{id:"首页.跳转",to:"Subject",alias:"条目"})]})]})},f.COMPONENT)},"./src/screens/home/v2/component/item/cover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var o=s("./src/stores/index.ts"),s=s("./src/constants/index.ts");t.styles=o._.create({inView:{minWidth:s.IMG_WIDTH,minHeight:s.IMG_HEIGHT},inViewCompact:{minWidth:s.IMG_WIDTH-14,minHeight:s.IMG_WIDTH-14}})},"./src/screens/home/v2/component/item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.WEEK_DAY_MAP=t.TITLE_HIT_SLOPS=t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts"),s=t.COMPONENT=(0,n.rc)(s.COMPONENT,"Item");t.COMPONENT_MAIN=(0,n.rc)(s),t.TITLE_HIT_SLOPS={top:o._.device(8,4),right:o._.device(8,4),bottom:o._.device(2,4),left:o._.device(8,4)},t.WEEK_DAY_MAP={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"日"},t.DEFAULT_PROPS={navigation:{},styles:{},index:0,subject:{},subjectId:0,title:"",epStatus:"",heatMap:!1,homeListCompact:!1,expand:!1,epsCount:0,isTop:!1,isRefreshing:!1,onItemPress:function(){}}},"./src/screens/home/v2/component/item/eps/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Eps")},"./src/screens/home/v2/component/item/eps/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/components/index.ts"),c=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),d=s("./src/styles/index.ts"),n=s("./src/screens/home/v2/component/item/eps/ds.ts"),a=s("./src/screens/home/v2/component/item/eps/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subjectId,e=e.isFirst,o=t.$,n=t.navigation;return(0,l.jsxs)(r.default,{style:a.styles.eps,children:[(0,l.jsx)(c.Eps,{layoutWidth:d.window.contentWidth,login:o.isLogin,subjectId:s,eps:o.eps(s),userProgress:o.userProgress(s),flip:o.state.flip===s,onFliped:o.afterFlipEps,onSelect:function(e,t){return o.doEpsSelect(e,t,s,n)}}),e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Heatmap,{right:72,id:"首页.跳转",to:"Topic",alias:"章节讨论",transparent:!0}),(0,l.jsx)(i.Heatmap,{bottom:35,id:"首页.章节按钮长按",transparent:!0}),(0,l.jsx)(i.Heatmap,{id:"首页.章节菜单操作"})]})]})},n.COMPONENT)},"./src/screens/home/v2/component/item/eps/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({eps:{marginTop:s._._wind}})},"./src/screens/home/v2/component/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.index-of.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),m=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/stores/index.ts")),n=s("./src/utils/decorators/index.ts"),p=o(s("./src/screens/home/v2/component/item/item.tsx")),o=s("./src/screens/home/v2/component/item/ds.ts"),f=s("./src/screens/home/v2/component/item/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=void 0===(s=e.index)?0:s,o=void 0===(o=e.subjectId)?0:o,n=void 0===(n=e.subject)?{}:n,r=e.title,e=void 0===(e=e.epStatus)?"":e,i=t.$,t=t.navigation,c=(d=m.systemStore.setting).heatMap,d=d.homeListCompact,a=(u=i.state).top,l=(u=u.progress).fetchingSubjectId1,u=u.fetchingSubjectId2;return(0,j.jsx)(p.default,{navigation:t,styles:(0,f.memoStyles)(),index:s,subject:n,subjectId:o,title:r,epStatus:e,heatMap:c,homeListCompact:d,expand:i.$Item(o).expand,epsCount:i.epsCount(o),isTop:-1!==a.indexOf(o),isRefreshing:l===o||u===o,onItemPress:i.onItemPress})},o.COMPONENT)},"./src/screens/home/v2/component/item/item.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),j=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),h=s("./src/components/index.ts"),b=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),_=o(s("./src/screens/home/v2/component/item/count/index.tsx")),y=o(s("./src/screens/home/v2/component/item/cover/index.tsx")),x=o(s("./src/screens/home/v2/component/item/eps/index.tsx")),g=o(s("./src/screens/home/v2/component/item/onair/index.tsx")),v=o(s("./src/screens/home/v2/component/item/progress/index.tsx")),O=o(s("./src/screens/home/v2/component/item/title/index.tsx")),S=o(s("./src/screens/home/v2/component/item/tool-bar/index.tsx")),T=s("./src/screens/home/v2/component/item/ds.ts"),E=s("./node_modules/react/jsx-runtime.js"),o=(0,n.memo)(function(e){var t=e.navigation,s=e.styles,o=e.index,n=e.subject,r=e.subjectId,i=e.title,c=e.epStatus,d=e.heatMap,a=e.homeListCompact,l=e.expand,u=e.epsCount,m=e.isTop,p=e.isRefreshing,f=e.onItemPress,e=0===o;return(0,E.jsxs)(j.default,{style:d&&l?s.itemWithHeatMap:s.item,children:[(0,E.jsxs)(h.Flex,{style:s.hd,children:[(0,E.jsx)(y.default,{index:o,subjectId:r,subject:n}),(0,E.jsxs)(h.Flex.Item,{style:s.content,children:[(0,E.jsx)(h.Touchable,{style:a?s.titleCompact:s.title,withoutFeedback:!0,hitSlop:T.TITLE_HIT_SLOPS,onPress:function(){return f(t,r,n)},children:(0,E.jsxs)(h.Flex,{align:"start",children:[(0,E.jsx)(h.Flex.Item,{children:(0,E.jsx)(O.default,{subjectId:r,subject:n,title:i})}),p&&(0,E.jsx)(h.Loading.Medium,{color:b._.colorSub,size:16}),(0,E.jsx)(g.default,{subjectId:r})]})}),(0,E.jsxs)(j.default,{children:[(0,E.jsxs)(h.Flex,{style:a?s.infoCompact:s.info,children:[(0,E.jsx)(_.default,{subjectId:r,subject:n,epStatus:c,isFirst:e}),(0,E.jsx)(h.Flex.Item,{}),(0,E.jsx)(S.default,{subjectId:r,subject:n,epStatus:c,isTop:m,isFirst:e})]}),"游戏"!==i&&(0,E.jsx)(v.default,{subjectId:r,epStatus:c})]})]}),e&&(0,E.jsx)(j.default,{children:(0,E.jsx)(h.Heatmap,{id:"首页.置顶或取消置顶"})})]}),(0,E.jsx)(h.Collapsible,{collapsed:!l,children:(0,E.jsx)(x.default,{subjectId:r,isFirst:e})},String(u)),m&&(0,E.jsx)(j.default,{style:s.dot})]})},T.DEFAULT_PROPS,T.COMPONENT_MAIN);t.default=o;try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:'{ item: { paddingVertical: number; paddingRight: number; paddingLeft: number; backgroundColor: "rgb(255, 255, 255)" | "rgb(36, 36, 36)"; borderBottomWidth: number; borderBottomColor: "rgb(238, 238, 240)" | "rgb(24, 24, 24)"; }; ... 7 more ...; dot: { ...; }; }'}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:'Partial<{ id: SubjectId; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; type: "1" | "2" | "4" | "3" | "6"; name: string; name_cn: string; summary: string; eps: number; eps_count: number; air_date: string; air_weekday: number; images: Images; collection: Collection; }>'}},subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"enum",value:[{value:'"动画"'},{value:'"书籍"'},{value:'"游戏"'},{value:'"三次元"'},{value:'"全部"'}]}},epStatus:{defaultValue:null,description:"看到多少集",name:"epStatus",required:!0,type:{name:"string | number"}},heatMap:{defaultValue:null,description:"",name:"heatMap",required:!0,type:{name:"boolean"}},homeListCompact:{defaultValue:null,description:"",name:"homeListCompact",required:!0,type:{name:"boolean"}},expand:{defaultValue:null,description:"",name:"expand",required:!0,type:{name:"boolean"}},epsCount:{defaultValue:null,description:"",name:"epsCount",required:!0,type:{name:"number"}},isTop:{defaultValue:null,description:"",name:"isTop",required:!0,type:{name:"boolean"}},isRefreshing:{defaultValue:null,description:"",name:"isRefreshing",required:!0,type:{name:"boolean"}},onItemPress:{defaultValue:null,description:"",name:"onItemPress",required:!0,type:{name:'(navigation: Navigation, subjectId: SubjectId, subject: Partial<{ id: SubjectId; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; type: "1" | "2" | "4" | "3" | "6"; name: string; name_cn: string; ... 6 more ...; collection: Collection; }>) => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/item/item.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"src/screens/home/v2/component/item/item.tsx#item"})}catch(e){}},"./src/screens/home/v2/component/item/onair/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"OnAir")},"./src/screens/home/v2/component/item/onair/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.join.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),c=s("./src/screens/home/v2/component/item/ds.ts"),d=s("./src/screens/home/v2/component/item/onair/ds.ts"),a=s("./src/screens/home/v2/component/item/onair/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var e=e.subjectId,t=t.$;if(!(s=t.subject(e)).type)return null;if(s.type){s=i.MODEL_SUBJECT_TYPE.getTitle(s.type);if("动画"!==s&&"三次元"!==s)return null}var s=t.currentOnAir(e),o=t.epsCount(e);return 8<=s&&8<=o&&s===o?null:t.isToday(e)?(o=[(s=t.onAirCustom(e)).h,s.m].filter(function(e){return!!e}),(0,l.jsxs)(n.Text,{style:a.styles.onAir,type:"success",size:13,lineHeight:14,bold:!0,children:["今天 ",o.join(":")]})):t.isNextDay(e)?(o=[(s=t.onAirCustom(e)).h,s.m].filter(function(e){return!!e}),(0,l.jsxs)(n.Text,{style:a.styles.onAir,type:"sub",size:13,lineHeight:14,bold:!0,children:["明天 ",o.join(":")]})):r.systemStore.setting.homeOnAir&&(o=(s=t.onAirCustom(e)).weekDay,t=s.isOnair,e=s.h,s=s.m,t=t?"周"+c.WEEK_DAY_MAP[o]:"")?(o=[e,s].filter(function(e){return!!e}),(0,l.jsxs)(n.Text,{style:a.styles.onAir,type:"sub",size:13,lineHeight:14,bold:!0,children:[t," ",o.join(":")]})):null},d.COMPONENT)},"./src/screens/home/v2/component/item/onair/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({onAir:{marginTop:-1,marginLeft:s._.sm}})},"./src/screens/home/v2/component/item/progress/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Progress")},"./src/screens/home/v2/component/item/progress/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),c=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/item/progress/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.epStatus,e=e.subjectId,t=t.$,o=c.systemStore.setting.homeListCompact,n=t.epsCount(e),r=t.currentOnAir(e);return n<r&&(r=t.epsNoSp(e).filter(function(e){return"Air"===e.status}).length),(0,d.jsx)(i.OnairProgress,{epStatus:s,total:n,current:r,height:o?5:6},String(t.$Item(e).doing))},n.COMPONENT)},"./src/screens/home/v2/component/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){var e=o._.isMobileLanscape||o._.isPad;return{item:{paddingVertical:o._.r(o._._wind),paddingRight:e?o._.wind-o._._wind:0,paddingLeft:e?o._.wind:o._._wind,backgroundColor:o._.colorPlain,borderBottomWidth:8,borderBottomColor:o._.colorBg},itemWithHeatMap:{paddingTop:o._.r(o._._wind),paddingRight:e?o._.wind-o._._wind:0,paddingBottom:o._.r(o._._wind+4),paddingLeft:e?o._.wind:o._._wind,backgroundColor:o._.colorPlain,borderBottomWidth:8,borderBottomColor:o._.colorBg},hd:{paddingRight:o._._wind},content:{marginLeft:o._._wind},title:{minHeight:o._.r(60)},titleCompact:{minHeight:o._.r(28)},info:{height:o._.r(40)},infoCompact:{height:o._.r(32)},dot:{position:"absolute",top:o._.r(4),right:o._.r(-2),borderWidth:o._.r(8),borderTopColor:"transparent",borderBottomColor:"transparent",borderRightColor:"transparent",borderLeftColor:o._.colorIcon,transform:[{rotate:"-45deg"}],opacity:.8}}})},"./src/screens/home/v2/component/item/title/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Title")},"./src/screens/home/v2/component/item/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.filter.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),u=s("./src/constants/index.ts"),m=s("./src/screens/home/v2/component/item/ds.ts"),n=s("./src/screens/home/v2/component/item/title/ds.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=e.subject,o=e.subjectId,e=e.title,t=t.$,n=a.systemStore.setting.homeListCompact,r="书籍"===(r=u.MODEL_SUBJECT_TYPE.getTitle(s.type))?"读":"游戏"===r?"玩":"看",i=(c=t.onAirCustom(o)).weekDay,c=c.isOnair,c=!a.systemStore.setting.homeOnAir&&c?" · 周"+m.WEEK_DAY_MAP[i]:"",i=t.subject(o),o=(null==s||null==(o=s.collection)?void 0:o.doing)||(null==i||null==(o=i.collection)?void 0:o.doing)||0,i=(0,l.HTMLDecode)((0,l.cnjp)((null==i?void 0:i.name_cn)||s.name_cn,(null==i?void 0:i.name)||s.name)),s="";t.isFilter(e)&&(s=(0,l.getPinYinFilterValue)(i,t.filter));t=28<(e=i.length)?12:18<e?13:15;return(0,p.jsxs)(p.Fragment,{children:[s?(0,p.jsx)(d.Highlight,{size:t,numberOfLines:2,bold:!0,value:s,children:i}):(0,p.jsx)(d.Katakana.Provider,{size:t,numberOfLines:2,bold:!0,children:(0,p.jsx)(d.Katakana,{size:t,numberOfLines:2,bold:!0,children:i})}),!n&&!!o&&(0,p.jsxs)(d.Text,{style:a._.mt.xs,type:"sub",size:12,children:[o," 人在",r,c]})]})},n.COMPONENT)},"./src/screens/home/v2/component/item/tool-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/item/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"ToolBar")},"./src/screens/home/v2/component/item/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),n=s("./src/utils/decorators/index.ts"),i=o(s("./src/screens/home/v2/component/item/btn-ep-next/index.tsx")),c=o(s("./src/screens/home/v2/component/item/btn-favor/index.tsx")),d=o(s("./src/screens/home/v2/component/item/btn-origin/index.tsx")),o=s("./src/screens/home/v2/component/item/tool-bar/ds.ts"),a=s("./src/screens/home/v2/component/item/tool-bar/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)(function(e){var t=e.subjectId,s=e.subject,o=e.epStatus,n=e.isTop,e=e.isFirst;return(0,l.jsxs)(r.Flex,{style:a.styles.toolBar,children:[(0,l.jsx)(d.default,{subjectId:t,isTop:n}),(0,l.jsx)(i.default,{subjectId:t,epStatus:o,isFirst:e}),(0,l.jsx)(c.default,{subjectId:t,subject:s,isFirst:e})]})},o.COMPONENT);try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{subjectId:{defaultValue:null,description:"",name:"subjectId",required:!0,type:{name:"SubjectId"}},subject:{defaultValue:null,description:"",name:"subject",required:!0,type:{name:'Partial<{ id: SubjectId; url: `//lain.bgm.tv/subject/${string}` | `//lain.bgm.tv/subject/${number}`; type: "1" | "2" | "4" | "3" | "6"; name: string; name_cn: string; summary: string; eps: number; eps_count: number; air_date: string; air_weekday: number; images: Images; collection: Collection; }>'}},epStatus:{defaultValue:null,description:"",name:"epStatus",required:!0,type:{name:"string | number"}},isTop:{defaultValue:null,description:"",name:"isTop",required:!0,type:{name:"boolean"}},isFirst:{defaultValue:null,description:"",name:"isFirst",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/item/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/v2/component/item/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/home/v2/component/item/tool-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({toolBar:{marginRight:-s._._wind/2-3}})},"./src/screens/home/v2/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROPS=t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),n=s("./src/constants/index.ts"),s=s("./src/screens/home/v2/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"List");t.COMPONENT_MAIN=(0,o.rc)(s),t.DEFAULT_PROPS={styles:{},forwardRef:function(){},data:n.LIST_EMPTY,title:"",scrollToTop:!1,showItem:!n.IOS,onScroll:function(){},onHeaderRefresh:function(){},onFooterRefresh:void 0}},"./src/screens/home/v2/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.find-index.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),d=o(s("./src/screens/home/v2/component/grid/index.tsx")),a=o(s("./src/screens/home/v2/component/list/list.tsx")),o=s("./src/screens/home/v2/component/list/ds.ts"),l=s("./src/screens/home/v2/component/list/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,o=void 0===(e=e.title)?"全部":e,n=t.$;return n.collection._loaded?i.systemStore.setting.homeLayout===c.MODEL_SETTING_HOME_LAYOUT.getValue("网格")?(0,u.jsx)(d.default,{title:o}):n.showItem(o)?(e=(0,l.memoStyles)(),s=n.tabs.findIndex(function(e){return e.title===o}),(0,u.jsx)(a.default,{forwardRef:function(e){return n.forwardRef(e,s)},styles:e,data:n.currentCollection(o),title:o,scrollToTop:n.scrollToTop(o),showItem:n.showItem(o),onScroll:n.onScroll,onHeaderRefresh:n.onHeaderRefresh,onFooterRefresh:"游戏"===o?n.onFooterRefresh:void 0})):null:(0,u.jsx)(r.Loading,{})},o.COMPONENT)},"./src/screens/home/v2/component/list/list.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),p=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/react/index.js"))),f=s("./src/screens/_/index.ts"),n=s("./src/utils/decorators/index.ts"),j=o(s("./src/screens/home/v2/component/empty/index.tsx")),h=o(s("./src/screens/home/v2/component/filter/index.tsx")),b=s("./src/screens/home/v2/component/list/utils.tsx"),o=s("./src/screens/home/v2/component/list/ds.ts"),_=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}s=(0,n.memo)(function(e){var t=e.forwardRef,s=e.styles,o=e.data,n=e.title,r=e.scrollToTop,i=e.showItem,c=e.onScroll,d=e.onHeaderRefresh,e=e.onFooterRefresh,a=o.list.length,l=(0,_.jsx)(j.default,{title:n,length:a}),u=(0,p.useCallback)(function(e){var t=e.item,e=e.index;return i?(0,b.renderItem)({item:t,index:e,title:n}):null},[n,i]),m=(0,p.useMemo)(function(){return(0,_.jsx)(h.default,{title:n,length:a})},[n,a]);return(0,_.jsx)(f.PaginationList2,{forwardRef:t,contentContainerStyle:s.contentContainerStyle,progressViewOffset:s.contentContainerStyle.paddingTop,keyExtractor:b.keyExtractor,data:o.list,limit:20,scrollToTop:r,keyboardDismissMode:"on-drag",ListHeaderComponent:m,renderItem:u,footerEmptyDataComponent:l,footerNoMoreDataComponent:l,footerNoMoreDataText:"",scrollEventThrottle:4,onScroll:c,onHeaderRefresh:d,onFooterRefresh:e})},o.DEFAULT_PROPS,o.COMPONENT_MAIN);t.default=s;try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ contentContainerStyle: { paddingTop: number; paddingBottom: number; }; }"}},forwardRef:{defaultValue:null,description:"",name:"forwardRef",required:!0,type:{name:"(ref: any) => void"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"enum",value:[{value:'"动画"'},{value:'"书籍"'},{value:'"游戏"'},{value:'"三次元"'},{value:'"全部"'}]}},scrollToTop:{defaultValue:null,description:"",name:"scrollToTop",required:!0,type:{name:"boolean"}},showItem:{defaultValue:null,description:"",name:"showItem",required:!0,type:{name:"boolean"}},onScroll:{defaultValue:null,description:"",name:"onScroll",required:!0,type:{name:"any"}},onHeaderRefresh:{defaultValue:null,description:"",name:"onHeaderRefresh",required:!0,type:{name:"() => Promise<{ list: { id: SubjectId; cover: `//lain.bgm.tv/pic/cover/c/${string}.jpg`; name: string; nameCn: string; tip: string; tags: string; comments: string; score: string | number; time: string; collected: boolean; }[]; pagination?: { ...; }; _list?: { ...; }[]; _loaded?: Loaded; } | { ...; }> | Promise<...>"}},onFooterRefresh:{defaultValue:null,description:"",name:"onFooterRefresh",required:!0,type:{name:"() => Promise<{ list: { id: SubjectId; cover: `//lain.bgm.tv/pic/cover/c/${string}.jpg`; name: string; nameCn: string; tip: string; tags: string; comments: string; score: string | number; time: string; collected: boolean; }[]; pagination?: { ...; }; _list?: { ...; }[]; _loaded?: Loaded; } | { ...; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/list/list.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/v2/component/list/list.tsx#list"})}catch(e){}},"./src/screens/home/v2/component/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts"),n=s("./src/screens/home/v2/ds.ts");t.memoStyles=o._.memoStyles(function(){return{contentContainerStyle:{paddingTop:o._.headerHeight+n.H_TABBAR,paddingBottom:o._.bottom}}})},"./src/screens/home/v2/component/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.keyExtractor=c,t.renderItem=d,o(s("./node_modules/react/index.js")),s("./src/constants/index.ts")),r=o(s("./src/screens/home/v2/component/item/index.tsx")),i=s("./node_modules/react/jsx-runtime.js");function c(e){return String(e.subject_id||e.id)}function d(e){var t=e.item,s=e.index,e=e.title;return(0,i.jsx)(r.default,{index:s,subjectId:t.subject_id||t.id,subject:t.subject||{id:t.id,images:{common:t.cover,grid:t.cover,large:t.cover,medium:t.cover,small:t.cover},name:t.name,name_cn:t.nameCn,summary:"",type:n.MODEL_SUBJECT_TYPE.getValue("游戏"),url:""},epStatus:t.ep_status,title:e})}try{c.displayName="keyExtractor",c.__docgenInfo={description:"",displayName:"keyExtractor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/list/utils.tsx#keyExtractor"]={docgenInfo:c.__docgenInfo,name:"keyExtractor",path:"src/screens/home/v2/component/list/utils.tsx#keyExtractor"})}catch(e){}try{d.displayName="renderItem",d.__docgenInfo={description:"游戏标签页和其他类型数据源和结构都不一样, 需要构造",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/list/utils.tsx#renderItem"]={docgenInfo:d.__docgenInfo,name:"renderItem",path:"src/screens/home/v2/component/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/home/v2/component/modal/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Modal")},"./src/screens/home/v2/component/modal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/modal/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var t=t.$,s=(n=t.state).visible,o=n.subjectId,n=n.modal,r=(i=t.subject(o)).name,i=i.name_cn;return(0,d.jsx)(c.ManageModal,{visible:s,subjectId:o,title:i||r||n.title,desc:r||n.desc,onSubmit:t.doUpdateCollection,onClose:t.closeManageModal})},n.COMPONENT);try{modal.displayName="modal",modal.__docgenInfo={description:"",displayName:"modal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/modal/index.tsx#modal"]={docgenInfo:modal.__docgenInfo,name:"modal",path:"src/screens/home/v2/component/modal/index.tsx#modal"})}catch(e){}},"./src/screens/home/v2/component/tab/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT_MAIN=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts"),s=t.COMPONENT=(0,o.rc)(s.COMPONENT,"Tab");t.COMPONENT_MAIN=(0,o.rc)(s)},"./src/screens/home/v2/component/tab/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=u(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/react/index.js"))),r=s("./node_modules/react-native-tab-view/lib/module/index.js"),i=s("./src/utils/dev/index.ts"),c=o(s("./src/screens/home/v2/component/list/index.tsx")),d=o(s("./src/screens/home/v2/component/tab/tab.tsx")),a=s("./src/screens/home/v2/component/tab/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function u(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(u=function(e){return e?s:t})(e))}function m(e){var t=e.length,e=((0,i.r)(a.COMPONENT),(0,n.useMemo)(function(){var e={all:function(){return(0,l.jsx)(c.default,{title:"全部"})},anime:function(){return(0,l.jsx)(c.default,{title:"动画"})},book:function(){return(0,l.jsx)(c.default,{title:"书籍"})},real:function(){return(0,l.jsx)(c.default,{title:"三次元"})}};return 5===t&&(e.game=function(){return(0,l.jsx)(c.default,{title:"游戏"})}),(0,r.SceneMap)(e)},[t]));return(0,l.jsx)(d.default,{renderScene:e})}t.default=m;try{m.displayName="TabWrap",m.__docgenInfo={description:"因为本组件使用 useMemo 后不能用 mobx@4 去 observer\n所以只能在上面把 routes 的 length 传下来监听刷新",displayName:"TabWrap",props:{length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/tab/index.tsx#TabWrap"]={docgenInfo:m.__docgenInfo,name:"TabWrap",path:"src/screens/home/v2/component/tab/index.tsx#TabWrap"})}catch(e){}},"./src/screens/home/v2/component/tab/tab-bar-label/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/tab/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"TabBarLabel")},"./src/screens/home/v2/component/tab/tab-bar-label/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/screens/home/v2/component/tab/tab-bar-label/ds.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.ob)(function(e){var t=e.focused,e=e.route;return(0,c.jsx)(n.Flex,{style:r._.container.block,justify:"center",children:(0,c.jsx)(n.Text,{type:"title",size:13,bold:t,noWrap:!0,children:e.title})})},i.COMPONENT);try{tabbarlabel.displayName="tabbarlabel",tabbarlabel.__docgenInfo={description:"",displayName:"tabbarlabel",props:{focused:{defaultValue:null,description:"",name:"focused",required:!0,type:{name:"any"}},route:{defaultValue:null,description:"",name:"route",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/tab/tab-bar-label/index.tsx#tabbarlabel"]={docgenInfo:tabbarlabel.__docgenInfo,name:"tabbarlabel",path:"src/screens/home/v2/component/tab/tab-bar-label/index.tsx#tabbarlabel"})}catch(e){}},"./src/screens/home/v2/component/tab/tab-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/tab/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"TabBar")},"./src/screens/home/v2/component/tab/tab-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),c=o(s("./src/screens/home/v2/component/tab/tab-bar-label/index.tsx")),o=s("./src/screens/home/v2/component/tab/tab-bar/ds.ts"),d=s("./src/screens/home/v2/component/tab/tab-bar/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ob)(function(e){var t=(0,d.memoStyles)(),s=r._.window.width/e.navigationState.routes.length;return(0,a.jsx)(n.TabBar,Object.assign({},e,{style:t.tabBar,tabStyle:[t.tab,{width:s}],labelStyle:t.label,indicatorStyle:[t.indicator,{marginLeft:(s-t.indicator.width)/2}],pressOpacity:1,pressColor:"transparent",scrollEnabled:!0,renderLabel:l}))},o.COMPONENT);function l(e){var t=e.route,e=e.focused;return(0,a.jsx)(c.default,{route:t,focused:e})}try{tabbar.displayName="tabbar",tabbar.__docgenInfo={description:"",displayName:"tabbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/tab/tab-bar/index.tsx#tabbar"]={docgenInfo:tabbar.__docgenInfo,name:"tabbar",path:"src/screens/home/v2/component/tab/tab-bar/index.tsx#tabbar"})}catch(e){}},"./src/screens/home/v2/component/tab/tab-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{tabBar:{position:"absolute",zIndex:2,top:o._.headerHeight,right:0,left:0,backgroundColor:"transparent",elevation:0},tab:{height:48},label:{padding:0},indicator:{width:16,height:4,backgroundColor:o._.colorMain,borderRadius:4}}})},"./src/screens/home/v2/component/tab/tab.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),d=o(s("./src/screens/home/v2/component/tab/tab-bar/index.tsx")),o=s("./src/screens/home/v2/component/tab/ds.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.obc)(function(e,t){return e=e.renderScene,t=t.$,(0,a.jsxs)(r.BlurViewRoot,{children:[(0,a.jsx)(n.TabView,{style:i._.mt._sm,lazy:!0,lazyPreloadDistance:1,navigationState:t.navigationState,renderTabBar:l,renderBackground:(0,a.jsx)(r.BlurViewTab,{length:t.tabs.length}),renderScene:e,onIndexChange:t.onChange},i._.orientation),(0,a.jsx)(r.BlurViewBottomTab,{})]})},o.COMPONENT_MAIN);function l(e){return(0,a.jsx)(d.default,Object.assign({},e))}},"./src/screens/home/v2/component/tips/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Tips")},"./src/screens/home/v2/component/tips/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),n=s("./src/screens/home/v2/component/tips/ds.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=(t=t.$.state.progress).fetching,o=t.message,n=t.current,t=t.total;return(0,i.jsx)(r.Progress,{show:s,message:o,current:n,total:t})},n.COMPONENT);try{tips.displayName="tips",tips.__docgenInfo={description:"",displayName:"tips",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/component/tips/index.tsx#tips"]={docgenInfo:tips.__docgenInfo,name:"tips",path:"src/screens/home/v2/component/tips/index.tsx#tips"})}catch(e){}},"./src/screens/home/v2/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TABS_WITH_GAME=t.TABS=t.H_TABBAR=t.COMPONENT=void 0;t.COMPONENT="Home";s=t.TABS=[{key:"all",title:"全部"},{key:"anime",title:"动画"},{key:"book",title:"书籍"},{key:"real",title:"三次元"}];t.TABS_WITH_GAME=[].concat(s,[{key:"game",title:"游戏"}]),t.H_TABBAR=48},"./src/screens/home/v2/extra/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/component/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Extra")},"./src/screens/home/v2/extra/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./src/constants/index.ts"),c=s("./src/screens/home/v2/extra/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$,t=t.navigation;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.Track,{title:"首页",hm:s.hm}),!i.STORYBOOK&&(0,d.jsx)(r.LoginNotice,{navigation:t})]})},c.COMPONENT);try{extra.displayName="extra",extra.__docgenInfo={description:"",displayName:"extra",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/extra/index.tsx#extra"]={docgenInfo:extra.__docgenInfo,name:"extra",path:"src/screens/home/v2/extra/index.tsx#extra"})}catch(e){}},"./src/screens/home/v2/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var o=s("./src/utils/dev/index.ts"),s=s("./src/screens/home/v2/ds.ts");t.COMPONENT=(0,o.rc)(s.COMPONENT,"Header"),t.EVENT={id:"首页.跳转"}},"./src/screens/home/v2/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),c=s("./src/screens/_/index.ts"),d=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),l=s("./src/screens/discovery/index/ds.ts"),u=s("./src/screens/home/v2/header/ds.ts"),m=s("./src/screens/home/v2/header/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.navigation,o=(t=d.systemStore.setting).homeTopLeftCustom,t=t.homeTopRightCustom,n=l.MENU_MAP[o],r=l.MENU_MAP[t];return(0,p.jsx)(c.LogoHeader,{left:(0,p.jsxs)(c.IconNotify,{style:m.styles.icon,navigation:s,event:u.EVENT,children:[(0,p.jsx)(i.Heatmap,{right:-39,id:"首页.跳转",to:"Notify",alias:"电波提醒"}),(0,p.jsx)(i.Heatmap,{right:-92,id:"其他.切换主题",transparent:!0})]}),right:(0,p.jsxs)(i.Flex,{style:d._.mr.xs,children:[!!n&&(0,p.jsx)(c.IconTabsHeader,{style:m.styles.icon,name:n.icon,text:n.text,size:(n.size||23)-1,onPress:function(){(0,a.t)("首页.跳转",{to:n.key}),s.push(n.key)}}),!!r&&(0,p.jsx)(c.IconTabsHeader,{style:m.styles.iconRight,name:r.icon,text:r.text,size:(r.size||23)-1,onPress:function(){(0,a.t)("首页.跳转",{to:r.key}),s.push(r.key)}})]})})},u.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/v2/header/index.tsx#header"})}catch(e){}},"./src/screens/home/v2/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({icon:{marginBottom:0,marginLeft:s._.xs,borderRadius:40,overflow:"hidden"},iconRight:{marginHorizontal:s._.xs,marginBottom:0,borderRadius:40,overflow:"hidden"}})},"./src/screens/home/v2/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useHomePage=function(e){var t=e.$,s=e.navigation;(0,o.useRunAfter)(function(){t.updateInitialPage(s),s.addListener(n.EVENT_APP_TAB_PRESS+"|Home",function(){t.onRefreshThenScrollTop()})}),(0,o.useFocusEffect)(function(){t.init()})};var o=s("./src/utils/hooks/index.ts"),n=s("./src/navigations/tab-bar/index.tsx")},"./src/screens/home/v2/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),d=s("./src/utils/hooks/index.ts"),a=o(s("./src/screens/home/v2/component/modal/index.tsx")),l=o(s("./src/screens/home/v2/component/tab/index.tsx")),u=o(s("./src/screens/home/v2/component/tips/index.tsx")),m=o(s("./src/screens/home/v2/extra/index.tsx")),p=o(s("./src/screens/home/v2/header/index.tsx")),f=s("./src/screens/home/v2/hooks.ts"),o=o(s("./src/screens/home/v2/store/index.ts")),j=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.ic)(o.default,function(e,t){(0,f.useHomePage)(t);var s=t.$;return(0,d.useObserver)(function(){return(0,j.jsxs)(n.Component,{id:"screen-home",children:[(0,j.jsx)(n.Page,{style:i._.ios(i._.container.bg,i._.container.plain),loaded:s.state._loaded,children:s.isLogin?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.default,{}),s.state._loaded&&(0,j.jsx)(l.default,{length:s.tabs.length}),(0,j.jsx)(u.default,{}),(0,j.jsx)(a.default,{})]}):(0,j.jsx)(r.Auth,{})}),(0,j.jsx)(m.default,{})]})})});try{v2.displayName="v2",v2.__docgenInfo={description:"",displayName:"v2",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/v2/index.tsx#v2"]={docgenInfo:v2.__docgenInfo,name:"v2",path:"src/screens/home/v2/index.tsx#v2"})}catch(e){}},"./src/screens/home/v2/store/action.ts":(e,t,s)=>{var m=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.index-of.js"),s("./node_modules/core-js/modules/es.array.splice.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),l=o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),p=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),f=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),r=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),i=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),j=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),_=s("./src/utils/fetch/index.ts"),y=s("./src/utils/calendar/index.ts"),x=s("./src/utils/kv/index.ts"),g=s("./src/utils/webhooks/index.ts"),v=s("./src/constants/index.ts"),O=s("./src/screens/user/origin-setting/utils.ts"),o=o(s("./src/screens/home/v2/store/fetch.ts")),S=s("./src/screens/home/v2/store/ds.ts");function d(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=o?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var T;t.default=(s=o.default,(0,r.default)(E,s),T=d(E),(0,n.default)(E));function E(){var u;(0,p.default)(this,E);for(var t,s,n,o,r,i,e=arguments.length,c=new Array(e),d=0;d<e;d++)c[d]=arguments[d];return u=T.call.apply(T,[this].concat(c)),(0,j.default)((0,f.default)(u),"onChange",function(e){(0,_.t)("首页.标签页切换",{page:e});var t=(0,l.default)(u.state.renderedTabsIndex),t=(t.includes(e)||t.push(e),{page:e,renderedTabsIndex:t});4===e&&(t.grid=S.STATE.grid),u.setState(t),u.save()}),(0,j.default)((0,f.default)(u),"showManageModal",function(e,t){(0,_.t)("首页.显示收藏管理",{subjectId:e}),u.setState({visible:!0,subjectId:e,modal:t||S.EXCLUDE_STATE.modal})}),(0,j.default)((0,f.default)(u),"closeManageModal",function(){u.setState({visible:!1,modal:S.EXCLUDE_STATE.modal})}),(0,j.default)((0,f.default)(u),"itemToggleExpand",function(e){(0,_.t)("首页.展开或收起条目",{subjectId:e});var t=u.$Item(e),s=t.expand;u.setState({item:(0,j.default)({},e,Object.assign({},t,{expand:!s}))}),u.save(),s||(u.fetchSubject(e),u.fetchUserProgress(e))}),(0,j.default)((0,f.default)(u),"itemToggleTop",function(e,t){(0,_.t)("首页.置顶或取消置顶",{subjectId:e,isTop:t});var s=u.state.top,s=(0,l.default)(s),o=s.indexOf(e);-1!==o&&(s.splice(o,1),!t)||s.push(e),u.setState({top:s}),u.save()}),(0,j.default)((0,f.default)(u),"expandAll",function(){(0,_.t)("首页.全部展开");var s={};u.collection.list.forEach(function(e){var t=e.subject_id,e=e.subject;"书籍"!==v.MODEL_SUBJECT_TYPE.getTitle(e.type)&&(s[t]={expand:!0,doing:!1})}),u.setState({item:s}),u.save()}),(0,j.default)((0,f.default)(u),"closeAll",function(){(0,_.t)("首页.全部关闭"),u.clearState("item"),u.save()}),(0,j.default)((0,f.default)(u),"selectGirdSubject",function(e,t){(0,_.t)("首页.格子布局条目选择",{subjectId:e}),u.setState({current:e,grid:t||S.STATE.grid}),u.fetchSubject(e),u.fetchUserProgress(e),u.save()}),(0,j.default)((0,f.default)(u),"scrollToIndex",{}),(0,j.default)((0,f.default)(u),"forwardRef",function(e,t){!u.scrollToIndex[t]&&null!=e&&e.scrollToIndex&&(u.scrollToIndex[t]=null==e?void 0:e.scrollToIndex)}),(0,j.default)((0,f.default)(u),"onlinePlaySelected",function(t,e){var s,o,n,r,i,c=u.subject(e),d=c.name_cn,a=c.name,c=c.type;(0,_.t)("首页.搜索源",{type:t,subjectId:e,subjectType:c});try{if(!s){var l=u.onlineOrigins(e).find(function(e){return"object"==typeof e&&e.name===t});if(l){if("萌番组"===t&&l.id)return(0,b.copy)((0,b.HTMLDecode)(d||a)),void setTimeout(function(){(0,b.open)(l.url)},1600);s=(0,O.replaceOriginUrl)(l.url,{CN:(0,b.HTMLDecode)(d||a),JP:(0,b.HTMLDecode)(a||d),ID:e})}}s||(n=void 0===(o=u.bangumiInfo(e).sites)?[]:o,r=(0,b.HTMLDecode)(d||a),"AGE动漫"===t?s=(0,v.SITE_AGEFANS)()+"/search?query="+encodeURIComponent(r)+"&page=1":(i=n.find(function(e){return e.site===t}))&&(s=(0,b.getBangumiUrl)(i))),s&&(0,b.open)(s)}catch(e){console.error(S.NAMESPACE,"onlinePlaySelected",e)}}),(0,j.default)((0,f.default)(u),"onItemPress",function(e,t,s){(0,_.t)("首页.跳转",{to:"Subject",from:"list"}),e.push("Subject",{subjectId:t,_jp:s.name,_cn:s.name_cn||s.name,_image:(null==s||null==(e=s.images)?void 0:e.medium)||"",_collection:"在看",_type:v.MODEL_SUBJECT_TYPE.getTitle(s.type)})}),(0,j.default)((0,f.default)(u),"onFilterChange",(0,b.debounce)(function(e){var t=u.state.page;u.setState({filter:e.trim(),filterPage:t})},800)),(0,j.default)((0,f.default)(u),"onPopover",function(t,e){var s=u.actions(e);if(s.length){s=s.find(function(e){return e.name===t});if(s)return(0,b.open)(s.url,!0),void(0,_.t)("其他.自定义跳转",{from:"HomeTab",key:e+"|"+s.name+"|"+s.url})}switch(t){case"置顶":u.itemToggleTop(e,!0);break;case"取消置顶":u.itemToggleTop(e,!1);break;case"全部展开":u.expandAll();break;case"全部收起":u.closeAll();break;case"一键添加提醒":u.doBatchSaveCalenderEvent(e);break;case"导出放送日程ICS":u.doExportCalenderEventICS(e);break;default:u.onlinePlaySelected(t,e)}}),(0,j.default)((0,f.default)(u),"prepareEpsFlip",function(e){u.setState({flip:e})}),(0,j.default)((0,f.default)(u),"afterFlipEps",(0,b.debounce)(function(){u.setState({flip:0})})),(0,j.default)((0,f.default)(u),"onScroll",b.updateVisibleBottom.bind((0,f.default)(u))),(0,j.default)((0,f.default)(u),"doUpdateCollection",(t=(0,a.default)(m.mark(function e(t){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_.t)("首页.管理收藏",{subjectId:t.subjectId}),e.next=3,h.collectionStore.doUpdateCollection(t);case 3:(0,b.feedback)(),t.status!==v.MODEL_COLLECTION_STATUS.getValue("在看")&&h.userStore.removeCollection(t.subjectId),u.closeManageModal(),(0,g.webhookCollection)(t,u.subject(t.subjectId),h.userStore.userInfo);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,j.default)((0,f.default)(u),"doWatchedNextEp",(s=(0,a.default)(m.mark(function e(t){var s,o;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=u.$Item(t)).doing)return setTimeout(function(){var e=u.$Item(t);e.doing&&u.setState({item:(0,j.default)({},t,Object.assign({},e,{doing:!1}))})},2e3),e.abrupt("return");e.next=4;break;case 4:return u.setState({item:(0,j.default)({},t,Object.assign({},s,{doing:!0}))}),e.next=7,u.fetchUserProgress(t);case 7:return(0,_.t)("首页.观看下一章节",{subjectId:t}),u.prepareEpsFlip(t),o=u.nextWatchEp(t),o=o.id,e.next=12,h.userStore.doUpdateEpStatus({id:o,status:v.MODEL_EP_STATUS.getValue("看过")});case 12:u.setState({item:(0,j.default)({},t,Object.assign({},s,{doing:!1}))}),h.userStore.fetchCollectionSingle(t,void 0,!0),s.expand?(u.fetchUserProgress(t),e.next=21):e.next=18;break;case 18:return e.next=20,u.fetchUserProgress(t);case 20:(0,b.feedback)();case 21:(0,g.webhookEp)({status:"watched",id:o,batch:!1},u.subject(t),h.userStore.userInfo);case 22:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})),(0,j.default)((0,f.default)(u),"doUpdateNext",function(e,t,s){(0,_.t)("首页.更新书籍下一个章节",{subjectId:e}),h.collectionStore.doUpdateSubjectEp({subjectId:e,watchedEps:t,watchedVols:s},function(){(0,b.feedback)(),h.userStore.fetchCollectionSingle(e),(0,g.webhookEp)({status:"watched",sort:t,vols:s,batch:!1},u.subject(e),h.userStore.userInfo)})}),(0,j.default)((0,f.default)(u),"doEpsSelect",(n=(0,a.default)(m.mark(function e(t,s,o,n){var r,i,c,d,a,l;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("添加提醒"===t)return i=u.subject(o),(0,b.saveCalenderEvent)(s,(0,b.cnjp)(i.name_cn,i.name),u.onAirCustom(o)),(0,_.t)("其他.添加日历",{subjectId:o,sort:(null==s?void 0:s.sort)||0,from:"Home"}),e.abrupt("return");e.next=5;break;case 5:if(r=v.MODEL_EP_STATUS.getValue(t))return(0,_.t)("首页.章节菜单操作",{title:"更新收视进度",subjectId:o,status:r}),u.prepareEpsFlip(o),e.next=11,h.userStore.doUpdateEpStatus({id:s.id,status:r});e.next=14;break;case 11:h.userStore.fetchCollectionSingle(o,void 0,"看过"===t),u.fetchUserProgress(o),(0,g.webhookEp)(Object.assign({},s,{status:r,batch:!1}),u.subject(o),h.userStore.userInfo);case 14:if("看到"===t)return(0,_.t)("首页.章节菜单操作",{title:"批量更新收视进度",subjectId:o}),i=(u.eps(o)||[]).slice().sort(function(e,t){return(0,b.asc)(e,t,function(e){return e.sort||0})}),l=(null==i||null==(c=i[0])?void 0:c.sort)<10?Math.max(s.sort-1,0):10<(null==(c=u.epsNoSp(o))||null==(d=c[0])?void 0:d.sort)?c.findIndex(function(e){return e.sort===s.sort}):null==(d=c.find(function(e){return e.sort===s.sort}))?void 0:d.sort,u.prepareEpsFlip(o),e.next=21,h.userStore.doUpdateSubjectWatched({subjectId:o,sort:-1===l?s.sort:l+1});e.next=24;break;case 21:h.userStore.fetchCollectionSingle(o),u.fetchUserProgress(o),(0,g.webhookEp)(Object.assign({},s,{status:r,batch:!0}),u.subject(o),h.userStore.userInfo);case 24:(t.includes("本集讨论")||t.includes("(+"))&&((0,_.t)("首页.章节菜单操作",{title:"本集讨论",subjectId:o}),l=u.subject(o),(0,b.appNavigate)(s.url||"/ep/"+s.id,n,{_title:"ep"+s.sort+"."+(s.name||s.name_cn),_group:l.name||l.name_cn,_groupThumb:(0,b.getCoverMedium)(null==(a=l.images||{})?void 0:a.medium),_desc:"时长:"+s.duration+" / 首播:"+s.airdate+"<br />"+(s.desc||"").replace(/\r\n/g,"<br />")},{id:"首页.跳转"}));case 25:case"end":return e.stop()}},e)})),function(e,t,s,o){return n.apply(this,arguments)})),(0,j.default)((0,f.default)(u),"doEpsLongPress",(o=(0,a.default)(m.mark(function e(t,s){var o,n;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.id,(0,_.t)("首页.章节按钮长按",{subjectId:s}),n=u.userProgress(s),n=n[o]?v.MODEL_EP_STATUS.getValue("撤销"):v.MODEL_EP_STATUS.getValue("看过"),e.next=6,h.userStore.doUpdateEpStatus({id:o,status:n});case 6:(0,b.feedback)(),h.userStore.fetchCollectionSingle(s),u.fetchUserProgress(s);case 9:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})),(0,j.default)((0,f.default)(u),"doBatchSaveCalenderEvent",(r=(0,a.default)(m.mark(function e(r){var t,i,c;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.epsNoSp(r).length){e.next=15;break}if(t=u.subject(r),(i=t.eps.filter(function(e){return"NA"===e.status})).length){e.next=7;break}return(0,b.info)("已没有未放送的章节"),e.abrupt("return");case 7:return e.next=9,(0,y.calendarEventsRequestPermissions)();case 9:if("authorized"!==e.sent)return(0,b.info)("权限不足"),e.abrupt("return");e.next=13;break;case 13:c=(0,b.cnjp)(t.name_cn,t.name),(0,b.confirm)("「"+c+"」\n是否一键添加 "+i.length+" 个章节的提醒?",(0,a.default)(m.mark(function e(){var s,o,t,n;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=u.onAirCustom(r),o=[],t=(0,b.loading)(),e.next=5,(0,y.calendarGetEventsAsync)();case 5:return n=e.sent,i.forEach(function(t){n.includes((0,b.getCalenderEventTitle)(t,c))||o.push((0,a.default)(m.mark(function e(){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.sleep)(v.IOS?80:480);case 2:return(0,b.saveCalenderEvent)(t,c,s,!1),e.abrupt("return",!0);case 4:case"end":return e.stop()}},e)})))}),e.next=9,(0,b.queue)(o,1);case 9:t(),(0,b.info)("已完成"),(0,b.feedback)(),(0,_.t)("其他.批量添加日历",{subjectId:r,length:o.length});case 13:case"end":return e.stop()}},e)})),"一键添加放送提醒");case 15:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),(0,j.default)((0,f.default)(u),"doExportCalenderEventICS",(i=(0,a.default)(m.mark(function e(n){var r,t,i,c,s;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.epsNoSp(n).length){e.next=20;break}if(r=u.subject(n),(t=100<=r.eps.length?r.eps.filter(function(e){return"NA"===e.status}):r.eps).length){e.next=7;break}return(0,b.info)("没有数据"),e.abrupt("return");case 7:return i=u.onAirCustom(n),c=["BEGIN:VCALENDAR","PRODID:-//Bangumi//Anime Calendar//CN","VERSION:2.0","METHOD:PUBLISH","CALSCALE:GREGORIAN","X-WR-CALNAME:Bangumi放送日程","X-APPLE-CALENDAR-COLOR:#FE8A95"],t.forEach(function(e){var t=(0,b.genICSCalenderEventDate)(e,i),s=t.DTSTART,t=t.DTEND,o="https://bgm.tv/ep/"+e.id;(e.name_cn||e.name)&&(o+=" ("+(e.name_cn||e.name)+")"),c.push("BEGIN:VEVENT","UID:"+n+"-"+e.id,"TZID:Asia/Shanghai","DTSTART:"+s,"DTEND:"+t,"SUMMARY:"+(0,b.cnjp)(r.name_cn,r.name)+" ep."+e.sort,"DESCRIPTION:"+o,"TRANSP:OPAQUE","END:VEVENT")}),c.push("END:VCALENDAR"),e.next=13,(0,x.temp)(u.userId+"_"+n+".ics",c.join("\n"),-1);case 13:if(s=e.sent,null!=(s=s.data)&&s.downloadKey){e.next=18;break}return(0,b.info)("未知错误，生成ics失败，重试或联系作者"),e.abrupt("return",!1);case 18:(0,_.t)("首页.导出日程",{subjectId:n,userId:u.userId}),(0,b.open)((0,x.download)(s.downloadKey));case 20:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})),u}},"./src/screens/home/v2/store/computed.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.date.to-string.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.find-index.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.some.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),n=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),l=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),p=s("./node_modules/mobx/dist/mobx.esm.js"),f=s("./src/stores/index.ts"),j=s("./src/utils/index.ts"),h=o(s("./src/utils/cache-manager/index.ts")),b=s("./src/utils/protobuf/index.web.ts"),_=s("./src/constants/index.ts"),y=s("./src/screens/user/origin-setting/utils.ts"),x=s("./src/screens/home/v2/ds.ts"),o=o(s("./src/screens/home/v2/store/state.ts")),g=s("./src/screens/home/v2/store/ds.ts");function v(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(s);return e=o?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var O;t.default=(s=o.default,(0,d.default)(S,s),O=v(S),(0,r.default)(S,[{key:"getTopMap",value:function(){var e=this.state.top,s={};return e.forEach(function(e,t){return s[e]=t+1}),s}},{key:"tabs",get:function(){return f.systemStore.setting.showGame?x.TABS_WITH_GAME:x.TABS}},{key:"navigationState",get:function(){return{index:this.state.page,routes:this.tabs}}},{key:"myUserId",get:function(){return f.userStore.myUserId}},{key:"userId",get:function(){return f.userStore.userInfo.username||f.userStore.myUserId}},{key:"usersInfo",get:function(){return f.userStore.usersInfo(this.myUserId)}},{key:"tabsLabel",get:function(){var e=this.state.page;return this.tabs[e].title}},{key:"$Item",value:function(e){var t=this;return(0,p.computed)(function(){return t.state.item[e]||g.INIT_ITEM}).get()}},{key:"isLogin",get:function(){return _.STORYBOOK?f.userStore.isStorybookLogin:f.userStore.isLogin}},{key:"userInfo",get:function(){return f.userStore.userInfo}},{key:"collection",get:function(){return f.userStore.isLimit?Object.assign({},f.userStore.collection,{list:f.userStore.collection.list.filter(function(e){return!(0,j.x18)(e.subject_id)})}):f.userStore.collection}},{key:"filter",get:function(){var e=this.state.filter;return(0,j.t2s)(e.toUpperCase())}},{key:"currentCollection",value:function(n){var r=this;return(0,p.computed)(function(){var e,t,s,o=g.NAMESPACE+"|"+n;if(r.state.progress.fetching&&h.default.get(o))return h.default.get(o);return"游戏"===n?h.default.set(o,r.games):(e=Object.assign({},r.collection),(t=_.MODEL_SUBJECT_TYPE.getValue(n))&&(e.list=e.list.filter(function(e){return(null==e||null==(e=e.subject)?void 0:e.type)==t})),r.isFilter(n)&&(s=r.state.filter,e.list=e.list.filter(function(e){var t;return!s.length||!!(e=(r.subject(e.subject_id).name_cn||(null==e||null==(t=e.subject)?void 0:t.name_cn)||e.name||(null==e||null==(t=e.subject)?void 0:t.name)||"").toUpperCase()).includes(r.filter)||(0,j.getPinYinFilterValue)(e,r.filter)})),"全部"===n&&f.systemStore.setting.showGame?e.list=[].concat((0,i.default)(r.sortList(e.list)),(0,i.default)(r.games.list)):e.list=r.sortList(e.list),h.default.set(o,e))}).get()}},{key:"isFilter",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.state,t=e.filter,e=e.filterPage;return 0<=e&&e<=o.tabs.length&&o.tabs[e].title===s&&!!t}).get()}},{key:"games",get:function(){var t=this,e=this.usersInfo.username,e=f.collectionStore.userCollections(e||this.userId,_.MODEL_SUBJECT_TYPE.getLabel("游戏"),_.MODEL_COLLECTION_STATUS.getValue("在看")),s=this.getTopMap();return Object.assign({},e,{list:e.list.filter(function(e){return!t.filter.length||!!(e=(e.nameCn||e.name||"").toUpperCase()).includes(t.filter)||(0,j.getPinYinFilterValue)(e,t.filter)}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.id]||0})})})}},{key:"userProgress",value:function(e){return(0,p.computed)(function(){return f.userStore.userProgress(e)}).get()}},{key:"subject",value:function(e){return(0,p.computed)(function(){return f.subjectStore.subject(e)}).get()}},{key:"epsNoSp",value:function(e){var t=this;return(0,p.computed)(function(){return(t.subject(e).eps||[]).filter(function(e){return 0===e.type})}).get()}},{key:"eps",value:function(i){var c=this;return(0,p.computed)(function(){try{var t,e,s,o=f.systemStore.setting.homeLayout,n=c.epsNoSp(i),r=n.length;return r>(o===_.MODEL_SETTING_HOME_LAYOUT.getValue("网格")?g.PAGE_LIMIT_GRID:g.PAGE_LIMIT_LIST)?(t=c.userProgress(i),-1===(e=n.findIndex(function(e){return"看过"!==t[e.id]}))?n.slice(r-g.PAGE_LIMIT_LIST-1,r-1):f.systemStore.setting.homeEpStartAtLastWathed?(s="function"==typeof n.findLastIndex?n.findLastIndex(function(e){return"看过"===t[e.id]}):(0,j.findLastIndex)(n,function(e){return"看过"===t[e.id]}),n.slice(Math.max(s,0),s+g.PAGE_LIMIT_LIST)):n.slice(Math.max(e-1,0),e+g.PAGE_LIMIT_LIST-1)):n}catch(e){return console.error(g.NAMESPACE,"eps",e),[]}}).get()}},{key:"nextWatchEp",value:function(o){var n=this;try{return(0,p.computed)(function(){var e=n.epsNoSp(o),t=n.userProgress(o),s=e.findIndex(function(e){return"看过"!==t[e.id]});return-1===s?{}:e[s]}).get()}catch(e){return console.error(g.NAMESPACE,"nextWatchEp",e),{}}}},{key:"currentOnAir",value:function(e){try{var t,s=this.epsNoSp(e).slice().reverse(),o=!1,n=(s.length&&0===s[s.length-1].sort&&(o=!0),(null==(t=s.find(function(e){return"Air"===e.status}))?void 0:t.sort)||0);return o&&n?n+1:n}catch(e){return console.error(g.NAMESPACE,"nextWatchEp",e),0}}},{key:"countFixed",value:function(r,i){var c=this;return(0,p.computed)(function(){var t,s,e=c.eps(r).filter(function(e){return 1!==e.type}).reverse(),o=c.userProgress(r),n=e.find(function(e){return"看过"===o[e.id]});return n?e.length&&0===e[e.length-1].sort?n.sort+1:n.sort:(t={},c.eps(r).forEach(function(e){1!==e.type&&(t[e.id]=!0)}),s=0,Object.keys(c.userProgress(r)).forEach(function(e){t[e]&&"看过"===c.userProgress(r)[e]&&(s+=1)}),Number(1==i?s||i:i||s))}).get()}},{key:"sortOnAir",get:function(){return f.systemStore.setting.homeSorting===_.MODEL_SETTING_HOME_SORTING.getValue("放送")}},{key:"onAirCustom",value:function(e){return(0,p.computed)(function(){return(0,j.getOnAir)(f.calendarStore.onAir[e],f.calendarStore.onAirUser(e))}).get()}},{key:"isToday",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.onAirCustom(s),t=e.weekDay;return!!e.isOnair&&t===(new Date).getDay()}).get()}},{key:"isNextDay",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.onAirCustom(s),t=e.weekDay;return!!e.isOnair&&(6===(e=(new Date).getDay())?0===t:e===t-1)}).get()}},{key:"bangumiInfo",value:function(o){var n=this;return(0,p.computed)(function(){var e,t,s;return n.state.loadedBangumiData?(e=n.subject(o),t=e.name_cn,s=e.name,(0,j.unzipBangumiData)((0,b.get)("bangumi-data").find(function(e){return e.j===(0,j.HTMLDecode)(t)||e.j===(0,j.HTMLDecode)(s)||e.c===(0,j.HTMLDecode)(t)||e.c===(0,j.HTMLDecode)(s)}))):{title:"",type:"tv",sites:[],titleTranslate:{"zh-Hans":[]}}}).get()}},{key:"onlineOrigins",value:function(s){var o=this;return(0,p.computed)(function(){var e=o.subject(s).type,t=[];2===Number(e)&&(0,y.getOriginConfig)(f.subjectStore.origin,"anime").filter(function(e){return e.active}).forEach(function(e){t.push(e)}),6===Number(e)&&(0,y.getOriginConfig)(f.subjectStore.origin,"real").filter(function(e){return e.active}).forEach(function(e){t.push(e)});e=o.bangumiInfo(s).sites;return(void 0===e?[]:e).filter(function(e){return _.SITES_DS.includes(e.site)}).forEach(function(e){t.push(e.site)}),t}).get()}},{key:"hasNewEp",value:function(e){var s=this;return(0,p.computed)(function(){var t=s.userProgress(e);return s.epsNoSp(e).some(function(e){return!("Air"!==e.status&&"Today"!==e.status||e.id in t)})}).get()}},{key:"showItem",value:function(t){var s=this;return(0,p.computed)(function(){var e;return!_.IOS||(e=s.tabs.findIndex(function(e){return e.title===t}),s.state.renderedTabsIndex.includes(e))}).get()}},{key:"epsCount",value:function(s){var o=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return(0,p.computed)(function(){var t=o.subject(s);try{if(null!=t&&t.eps&&"object"==typeof t.eps){var e=t.eps.filter(function(e){if(n)return 0===e.type&&0!=e.sort;e.type}).length;if(e)return e}return null!=t&&t.eps_count?t.eps_count:0}catch(e){return(null==t?void 0:t.eps_count)||0}}).get()}},{key:"countRight",value:function(r){var i=this;return(0,p.computed)(function(){var e=f.systemStore.setting.homeCountView,t=i.subject(r),s=i.currentOnAir(r),o=(null==t?void 0:t.eps_count)||"??",n=("??"!==o&&Number(s)>Number(o)&&(o=s),"");switch(e){case"B":n=""+s,o!==s&&(n+=" ("+o+")");break;case"C":n=""+o,o!==s&&(n+=" ("+s+")");break;case"D":n=""+s,o!==s&&(n+=" / "+o);break;default:n=""+o}return n}).get()}},{key:"actions",value:function(t){return(0,p.computed)(function(){var e=f.subjectStore.actions(t);return e.length?f.subjectStore.actions(t).filter(function(e){return e.active}).sort(function(e,t){return(0,j.desc)(e.sort||0,t.sort||0)}):e}).get()}},{key:"scrollToTop",value:function(s){var o=this;return!_.IOS&&(0,p.computed)(function(){var e=o.state,t=e.isFocused,e=e.page;return t&&x.TABS_WITH_GAME[e].title===s}).get()}},{key:"hm",get:function(){return this.isLogin?["?id="+this.userId,"Home"]:["?id="+this.userId+"&login=0","Home"]}}]),(0,m.default)((t=S).prototype,"tabs",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"tabs"),t.prototype),(0,m.default)(t.prototype,"navigationState",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"navigationState"),t.prototype),(0,m.default)(t.prototype,"myUserId",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"myUserId"),t.prototype),(0,m.default)(t.prototype,"userId",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"userId"),t.prototype),(0,m.default)(t.prototype,"usersInfo",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"usersInfo"),t.prototype),(0,m.default)(t.prototype,"tabsLabel",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"tabsLabel"),t.prototype),(0,m.default)(t.prototype,"isLogin",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"isLogin"),t.prototype),(0,m.default)(t.prototype,"userInfo",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"userInfo"),t.prototype),(0,m.default)(t.prototype,"collection",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"collection"),t.prototype),(0,m.default)(t.prototype,"filter",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"filter"),t.prototype),(0,m.default)(t.prototype,"games",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"games"),t.prototype),(0,m.default)(t.prototype,"sortOnAir",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"sortOnAir"),t.prototype),(0,m.default)(t.prototype,"hm",[p.computed],Object.getOwnPropertyDescriptor(t.prototype,"hm"),t.prototype),t);function S(){var i;(0,n.default)(this,S);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i=O.call.apply(O,[this].concat(t)),(0,u.default)((0,c.default)(i),"save",function(){return i.saveStorage(g.NAMESPACE,g.EXCLUDE_STATE)}),(0,u.default)((0,c.default)(i),"sortList",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,p.computed)(function(){if(!t.length)return[];var e=f.systemStore.setting.homeSorting,s=i.getTopMap();if(e===_.MODEL_SETTING_HOME_SORTING.getValue("网页"))return t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})});try{var o,n=f.systemStore.setting.homeSortSink,r={};return i.sortOnAir?(o=(new Date).getDay(),t.forEach(function(e){var e=e.subject_id,t=i.onAirCustom(e),s=t.weekDay;t.isOnair?i.isToday(e)?r[e]=1001:i.isNextDay(e)?r[e]=1e3:r[e]=0===o||o<=s?100-s:10-s:r[e]=1,n&&!i.hasNewEp(e)&&(r[e]=r[e]-1e4)}),t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return r[e.subject_id]})}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})})):(t.forEach(function(e){var e=e.subject_id,t=i.userProgress(e),s=0;Object.keys(t).forEach(function(e){"看过"===t[e]&&(s+=1)});var o=(f.calendarStore.onAir[e]||{}).air,o=void 0===o?0:o;i.isToday(e)?r[e]=s<o?1e5:1e4:i.isNextDay(e)?r[e]=s<o?1e3:100:r[e]=s<o?10:1,n&&!i.hasNewEp(e)&&(r[e]=r[e]-100001)}),t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return r[e.subject_id]})}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})}))}catch(e){return t.slice().sort(function(e,t){return(0,j.desc)(e,t,function(e){return i.isToday(e.subject_id)})}).sort(function(e,t){return(0,j.desc)(e,t,function(e){return s[e.subject_id]||0})})}}).get()}),i}},"./src/screens/home/v2/store/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.PAGE_LIMIT_LIST=t.PAGE_LIMIT_GRID=t.NAMESPACE=t.INIT_ITEM=t.EXCLUDE_STATE=void 0;s=s("./src/stores/index.ts"),t.NAMESPACE="ScreenHomeV2",t.INIT_ITEM={expand:!1,doing:!1},s=t.EXCLUDE_STATE={visible:!1,visibleBottom:s._.window.height,modal:{title:"",desc:""},progress:{fetching:!1,fetchingSubjectId1:0,fetchingSubjectId2:0,message:"",current:0,total:0},filter:"",filterPage:-1,isFocused:!0,renderedTabsIndex:[],flip:0,loadedBangumiData:!1};t.STATE=Object.assign({subjectId:0,page:0,top:[],item:{},current:0,grid:{subject_id:0,subject:{},ep_status:""},boot:0},s,{_loaded:!1}),t.PAGE_LIMIT_LIST=32,t.PAGE_LIMIT_GRID=24},"./src/screens/home/v2/store/fetch.ts":(e,t,s)=>{var l=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),j=s("./src/utils/protobuf/index.web.ts"),h=s("./src/constants/index.ts"),o=o(s("./src/screens/home/v2/store/computed.ts")),b=s("./src/screens/home/v2/store/ds.ts");function _(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var y;t.default=(s=o.default,(0,d.default)(x,s),y=_(x),(0,r.default)(x));function x(){var a;(0,i.default)(this,x);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return a=y.call.apply(y,[this].concat(s)),(0,m.default)((0,c.default)(a),"fetchBangumiData",(0,n.default)(l.mark(function e(){return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.loadedBangumiData)return e.abrupt("return");e.next=2;break;case 2:return e.next=4,(0,j.decode)("bangumi-data");case 4:a.setState({loadedBangumiData:!0});case 5:case"end":return e.stop()}},e)}))),(0,m.default)((0,c.default)(a),"fetchSubject",(t=(0,n.default)(l.mark(function e(t){var s,o,n,r,i,c,d=arguments;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=1<d.length&&void 0!==d[1]?d[1]:0,o=2<d.length&&void 0!==d[2]&&d[2],n=!1,r=a.subject(t),"number"!=typeof(i=r._loaded)&&(i=0),n="large"!==(null==r?void 0:r._responseGroup)||(0,f.getTimestamp)()-i>=14400*(s+1)?!0:n){if(c=a.state.progress.fetchingSubjectId2?"fetchingSubjectId1":"fetchingSubjectId2",a.setState({progress:(0,m.default)({},c,t)}),o)return e.next=13,a.fetchUserProgress(t);e.next=13}else e.next=17;break;case 13:return e.next=15,p.subjectStore.fetchSubject(t);case 15:return a.setState({progress:(0,m.default)({},c,0)}),e.abrupt("return",!0);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,m.default)((0,c.default)(a),"fetchSubjectsQueue",(0,n.default)(l.mark(function e(){var t,s,o=arguments;return l.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<o.length&&void 0!==o[0]?o[0]:[],a.state.progress.fetching)return e.abrupt("return",!1);e.next=4;break;case 4:return(s=a.sortList(t).map(function(e,t){var s=e.subject_id;return function(){return a.fetchSubject(s,t,!0)}})).length&&a.setState({progress:{fetching:!0}}),e.next=8,(0,f.queue)(s,2);case 8:return a.setState({progress:b.EXCLUDE_STATE.progress}),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,c.default)(a),"fetchUserProgress",function(e){return p.userStore.fetchUserProgress(e)}),(0,m.default)((0,c.default)(a),"fetchDoingGames",function(e){var t=a.usersInfo.username;return p.collectionStore.fetchUserCollections({userId:t||a.userId,subjectType:h.MODEL_SUBJECT_TYPE.getLabel("游戏"),type:h.MODEL_COLLECTION_STATUS.getValue("在看"),order:h.MODEL_COLLECTIONS_ORDERBY.getValue("收藏时间"),tag:""},e)}),a}},"./src/screens/home/v2/store/index.ts":(e,t,s)=>{var o,r,i=s("./node_modules/@babel/runtime/regenerator/index.js"),n=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),d=n(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=n(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=n(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),u=n(s("./node_modules/@babel/runtime/helpers/inherits.js")),m=n(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),p=n(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),f=n(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=b(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/expo-device/build/Device.js")),y=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),j=s("./src/utils/fetch/index.ts"),h=s("./src/utils/protobuf/index.web.ts"),g=s("./src/utils/kv/index.ts"),v=s("./src/constants/index.ts"),O=s("./config.ts"),n=n(s("./src/screens/home/v2/store/action.ts")),S=s("./src/screens/home/v2/store/ds.ts");function b(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(b=function(e){return e?s:t})(e))}function T(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(s);return e=o?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,m.default)(this,e)}}s=n.default,(0,u.default)(P,s),E=T(P);var E,n=(0,d.default)(P);function P(){var b;(0,a.default)(this,P);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return b=E.call.apply(E,[this].concat(t)),(0,f.default)((0,l.default)(b),"init",(0,c.default)(i.mark(function e(){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o)return e.abrupt("return");e.next=2;break;case 2:return b.isLogin&&(b.initUser(),o=!0,setTimeout(function(){b.initFetch()},4e3)),e.next=5,b.initStore();case 5:return b.fetchBangumiData(),e.abrupt("return",!0);case 7:case"end":return e.stop()}},e)}))),(0,f.default)((0,l.default)(b),"initStore",(0,c.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getStorage(S.NAMESPACE);case 2:t=e.sent,b.setState(Object.assign({},t,S.EXCLUDE_STATE,{renderedTabsIndex:[(null==t?void 0:t.page)||0],loadedBangumiData:!(null==(t=(0,h.get)("bangumi-data"))||!t.length),_loaded:(0,x.getTimestamp)()}));case 4:case"end":return e.stop()}},e)}))),(0,f.default)((0,l.default)(b),"initFetch",(0,c.default)(i.mark(function e(){var t,s,o,n=arguments;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<n.length&&void 0!==n[0]&&n[0],b.state.progress.fetching)return(0,x.info)("正在刷新条目信息"),e.abrupt("return");e.next=5;break;case 5:if(s=t,"number"!=typeof(o=b.collection._loaded)&&(o=0),s=518400<(0,x.getTimestamp)()-o||!b.collection.list.length||s)return e.next=12,b.initQueue();e.next=25;break;case 12:if(e.sent)return e.abrupt("return",!0);e.next=14;break;case 14:if(!y.userStore.isWebLogin){e.next=25;break}if(r){e.next=25;break}return r=!0,e.next=19,y.userStore.reOauth();case 19:if(e.sent)return(r=!1,x.info)("重新授权成功"),(0,j.t)("其他.重新授权"),e.abrupt("return",b.initQueue());e.next=24;break;case 24:r=!1;case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}},e)}))),(0,f.default)((0,l.default)(b),"initQueue",(0,c.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([y.userStore.fetchCollection()]);case 2:if(null!=(s=e.sent)&&null!=(t=s[0])&&null!=(t=t.list)&&t.length)return e.abrupt("return",b.fetchSubjectsQueue(s[0].list));e.next=5;break;case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e)}))),(0,f.default)((0,l.default)(b),"initUser",function(){o||setTimeout(function(){if(!b.userId||!v.DEVICE_MODEL_NAME)return!1;var e=b.state.boot+1,t=(b.setState({boot:e}),b.save(),y.systemStore.setting),s=t.avatarRound,o=t.cdn,n=t.cdnAvatarV2,r=t.customFontFamily,i=t.focusAction,c=t.focusOrigin,d=t.homeLayout,a=t.homeListCompact,l=t.homeSorting,u=t.homeTopLeftCustom,m=t.homeTopRightCustom,p=t.katakana,f=t.live2D,j=t.onlineStatus,h=t.vibration,t=t.webhook;(0,g.update)("u_"+b.userId,{b:_.brand,y:_.deviceYearClass,i:_.modelId,d:_.modelName,o:_.osVersion,m:Math.floor(_.totalMemory/1e3/1e3/1e3)+"G",v:v.VERSION_GITHUB_RELEASE,a:y.systemStore.advance,n:e,l:{statusBar:y._.statusBarHeight,header:y._.headerHeight,tarBar:y._.tabBarHeight,isDark:y._.isDark,deepDark:y._.deepDark},s:{avatarRound:s,cdn:o,cdnAvatarV2:n,customFontFamily:r,focusAction:i,focusOrigin:c,homeLayout:d,homeListCompact:a,homeSorting:l,homeTopLeftCustom:u,homeTopRightCustom:m,katakana:p,live2D:f,onlineStatus:j,vibration:h,webhook:t},e:(0,x.sortObject)(y.systemStore.t),t:(0,x.date)("Y-m-d H:i:s",(0,x.getTimestamp)()),ipa:O.IOS_IPA})},8e3)}),(0,f.default)((0,l.default)(b),"onHeaderRefresh",function(){return"游戏"===b.tabsLabel?b.fetchDoingGames(!0):b.initFetch(!0)}),(0,f.default)((0,l.default)(b),"onFooterRefresh",function(){return b.fetchDoingGames()}),(0,f.default)((0,l.default)(b),"onRefreshThenScrollTop",function(){try{var e=b.state.page;"function"==typeof b.scrollToIndex[e]&&((0,j.t)("其他.刷新到顶",{screen:"Home"}),b.scrollToIndex[e]({animated:!0,index:0,viewOffset:8e3}),setTimeout(function(){(0,x.feedback)()},400),b.onHeaderRefresh())}catch(e){console.error("Home","onRefreshThenScrollTop",e)}}),(0,f.default)((0,l.default)(b),"updateInitialPage",function(e){var t=y.systemStore.setting.initialPage;return t===v.MODEL_SETTING_INITIAL_PAGE.getValue("进度")?b.init():t===v.MODEL_SETTING_INITIAL_PAGE.getValue("小圣杯")?e.push("Tinygrail"):void 0}),b}t.default=n},"./src/screens/home/v2/store/state.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/createClass.js"))),r=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=s("./node_modules/mobx/dist/mobx.esm.js"),o=o(s("./src/utils/store/index.ts")),m=s("./src/screens/home/v2/store/ds.ts");function p(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var f;t.default=(s=o.default,(0,c.default)(j,s),f=p(j),(0,n.default)(j));function j(){var e;(0,r.default)(this,j);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=f.call.apply(f,[this].concat(s)),(0,l.default)((0,i.default)(e),"state",(0,u.observable)(m.STATE)),e}},"./src/screens/home/voices/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;s=s("./src/stores/index.ts"),t.NAMESPACE="ScreenVoices",s=t.EXCLUDE_STATE={visibleBottom:s._.window.height,position:"",ota:{}};t.STATE=Object.assign({},s,{_loaded:!1})},"./src/screens/home/voices/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,c.jsx)(n.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的角色":"角色",alias:"角色",hm:[s.url,"Voices"],headerRight:function(){return(0,c.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("角色.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,c.jsx)(n.Heatmap,{id:"角色.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/voices/header/index.tsx#header"})}catch(e){}},"./src/screens/home/voices/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/voices/header/index.tsx")),d=o(s("./src/screens/home/voices/tool-bar/index.tsx")),a=o(s("./src/screens/home/voices/list/index.tsx")),o=o(s("./src/screens/home/voices/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){return(0,l.jsxs)(n.Component,{id:"screen-voices",children:[(0,l.jsx)(c.default,{}),(0,l.jsxs)(n.Page,{children:[(0,l.jsx)(d.default,{}),(0,l.jsx)(a.default,{})]})]})})});try{voices.displayName="voices",voices.__docgenInfo={description:"",displayName:"voices",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/index.tsx#voices"]={docgenInfo:voices.__docgenInfo,name:"voices",path:"src/screens/home/voices/index.tsx#voices"})}catch(e){}},"./src/screens/home/voices/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js"),c={id:"角色.跳转"};t.default=(0,o.obc)(function(e,t){var s=e.item,e=e.index,t=t.navigation;return(0,i.jsx)(n.ItemVoice,Object.assign({style:r._.container.item,navigation:t,event:c,index:e},s))})},"./src/screens/home/voices/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),a=o(s("./src/screens/home/voices/item/index.tsx")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.obc)(function(e,t){return(t=t.$).monoVoices._loaded?(0,l.jsx)(r.PaginationList2,{contentContainerStyle:i._.container.bottom,keyExtractor:c.keyExtractor,data:t.monoVoices.list,limit:5,scrollToTop:!0,renderItem:u,scrollEventThrottle:4,onScroll:t.onScroll,onHeaderRefresh:t.onHeaderRefresh}):(0,l.jsx)(n.Loading,{})});function u(e){var t=e.item,e=e.index;return(0,l.jsx)(a.default,{item:t,index:e})}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/voices/list/index.tsx#list"})}catch(e){}},"./src/screens/home/voices/store.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),h=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),b=s("./src/utils/fetch/index.ts"),_=s("./src/utils/kv/index.ts"),y=s("./src/constants/index.ts"),x=s("./src/screens/home/voices/ds.ts");function g(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var v,O=[];t.default=(s=o.default,(0,a.default)(S,s),v=g(S),(0,n.default)(S,[{key:"monoId",get:function(){return this.params.monoId}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){var e=this.state.position;return("voices_"+[this.monoId,e].join("_")).replace("/","_")}},{key:"monoVoices",get:function(){var e=j.subjectStore.monoVoices(this.monoId);return e._loaded?e:this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):y.LIST_EMPTY}},{key:"url",get:function(){var e=this.state.position;return(0,y.HTML_MONO_VOICES)(this.monoId,e)}}]),(0,p.default)((t=S).prototype,"monoId",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoId"),t.prototype),(0,p.default)(t.prototype,"ota",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,p.default)(t.prototype,"thirdPartyKey",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),(0,p.default)(t.prototype,"monoVoices",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoVoices"),t.prototype),(0,p.default)(t.prototype,"url",[f.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),t);function S(){var n;(0,c.default)(this,S);for(var s,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n=v.call.apply(v,[this].concat(t)),(0,m.default)((0,d.default)(n),"params",void 0),(0,m.default)((0,d.default)(n),"state",(0,f.observable)(x.STATE)),(0,m.default)((0,d.default)(n),"init",(0,i.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getStorage(x.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,n.setState(Object.assign({},t,x.EXCLUDE_STATE,{_loaded:!0})),e.abrupt("return",n.fetchMonoVoices());case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"onHeaderRefresh",function(){return n.fetchMonoVoices()}),(0,m.default)((0,d.default)(n),"save",function(){return n.saveStorage(x.NAMESPACE,x.EXCLUDE_STATE)}),(0,m.default)((0,d.default)(n),"fetchMonoVoices",(0,i.default)(r.mark(function e(){var t,s;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.fetchThirdParty(),t=n.state.position,e.next=4,j.subjectStore.fetchMonoVoices({monoId:n.monoId,position:t});case 4:return(t=e.sent).list.length&&n.thirdPartyKey in n.state.ota&&(s=(null==(s=n.ota)?void 0:s.ts)||0,604800<=(0,h.getTimestamp)()-s)&&n.updateThirdParty(),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"fetchThirdParty",(0,i.default)(r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ota||n.monoVoices._loaded){e.next=8;break}return e.next=3,(0,_.get)(n.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return n.setState({ota:(0,m.default)({},n.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:n.setState({ota:(0,m.default)({},n.thirdPartyKey,Object.assign({},t,{_loaded:(0,h.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"updateThirdParty",(0,i.default)(r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(O.includes(n.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,_.update)(n.thirdPartyKey,{list:n.monoVoices.list.slice(0,24)}),O.push(n.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(n),"onFilterSelect",(s=(0,i.default)(r.mark(function e(t,s){var o;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,b.t)("角色.职位选择",{label:t.split(" ")[0]}),o=s.find(function(e){return e.title===t})||{},o=o.value,o=void 0===o?"":o,n.setState({position:o}),n.fetchMonoVoices(),n.save();case 5:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})),(0,m.default)((0,d.default)(n),"onScroll",h.updateVisibleBottom.bind((0,d.default)(n))),n}},"./src/screens/home/voices/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.find.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),i=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var o=t.$,n=o.state.position,t=void 0===(t=o.monoVoices.filters)?[]:t;return(0,i.jsxs)(r.ToolBar,{children:[t.map(function(t){var e=t.data.map(function(e){return e.title}),s=t.data.find(function(e){return e.value===n})||{title:"全部"};return(0,i.jsx)(r.ToolBar.Popover,{data:e,text:"全部"!==s.title&&s.title||t.title,type:"全部"!==s.title?"desc":"sub",onSelect:function(e){return o.onFilterSelect(e,t.data)}},t.title)}),(0,i.jsx)(r.Heatmap,{id:"角色.职位选择"})]})});try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/voices/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/voices/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/home/wiki/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/wiki/header/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,d.jsx)(n.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的修订历史":"修订历史",alias:"修订历史",hm:[s.url,"SubjectWiki"],headerTitleStyle:c.styles.title,headerRight:function(){return(0,d.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("修订历史.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,d.jsx)(n.Heatmap,{id:"修订历史.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/wiki/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/wiki/header/index.tsx#header"})}catch(e){}},"./src/screens/home/wiki/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}})},"./src/screens/home/wiki/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/wiki/header/index.tsx")),d=o(s("./src/screens/home/wiki/list/index.tsx")),o=o(s("./src/screens/home/wiki/store.ts")),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){return(0,a.jsxs)(n.Component,{id:"screen-subject-wiki",children:[(0,a.jsx)(c.default,{}),(0,a.jsx)(n.Page,{children:(0,a.jsx)(d.default,{})})]})})});try{wiki.displayName="wiki",wiki.__docgenInfo={description:"",displayName:"wiki",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/wiki/index.tsx#wiki"]={docgenInfo:wiki.__docgenInfo,name:"wiki",path:"src/screens/home/wiki/index.tsx#wiki"})}catch(e){}},"./src/screens/home/wiki/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.sub.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=o(s("./node_modules/react/index.js")),l=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),u=s("./src/components/index.ts"),m=s("./src/screens/_/index.ts"),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),j=s("./src/constants/index.ts"),h=s("./node_modules/react/jsx-runtime.js");function b(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=o?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var _,y=p._.r(1.28*j.IMG_WIDTH),x=p._.r(1.28*j.IMG_HEIGHT),a=(s=a.default.Component,(0,i.default)(g,s),_=b(g),(0,r.default)(g,[{key:"renderCovers",value:function(){var e=this.context,t=e.$,r=e.navigation,i=t.wiki.covers;return null!=i&&i.length?(0,h.jsx)(u.HorizontalList,{style:[p._.mt.md,p._.mb.md],contentContainerStyle:p._.container.wind,data:i,initialRenderNums:p._.device(4,8),renderItem:function(e,t){var s=e.cover,o=e.userId,n=e.userName;return(0,h.jsxs)(l.default,{style:(0,f.stl)({width:y},!!t&&p._.ml.md),children:[(0,h.jsx)(m.Cover,{src:s,size:y,height:x,radius:!0,onPress:function(){(0,f.showImageViewer)(i.map(function(e){return{url:"https:"+(0,f.getCoverLarge)(e.cover)}}),t)}}),(0,h.jsxs)(u.Flex,{style:p._.mt.sm,children:[!j.STORYBOOK&&(0,h.jsx)(m.Avatar,{navigation:r,userId:o,src:(0,j.API_AVATAR)(o),size:20}),(0,h.jsx)(u.Flex.Item,{style:p._.ml.sm,children:(0,h.jsx)(u.Text,{size:11,bold:!0,numberOfLines:1,onPress:function(){r.push("Zone",{userId:o,_name:n})},children:n||o})})]})]},s)}}):null}},{key:"renderEdits",value:function(){var e=this.context,t=e.$,d=e.navigation,a=t.wiki.edits;return null!=a&&a.length?(0,h.jsx)(l.default,{style:p._.container.wind,children:a.map(function(e,t){var s=e.id,o=e.comment,n=e.sub,r=e.time,i=e.userId,c=e.userName;return(0,h.jsxs)(l.default,{style:p._.mt.sm,children:[(0,h.jsxs)(u.Text,{lineHeight:15,bold:!0,children:["[",a.length-t,"] ",o||"N/A",!!n&&(0,h.jsxs)(u.Text,{size:13,lineHeight:15,bold:!0,children:[" ","(",n,")"]})]}),!(!c&&!i)&&(0,h.jsxs)(u.Flex,{style:p._.mt.sm,children:[(0,h.jsx)(u.Text,{style:p._.ml.sm,size:12,lineHeight:13,bold:!0,children:(0,f.simpleTime)(r)}),(0,h.jsx)(u.Text,{style:p._.ml.xs,type:"sub",size:12,lineHeight:13,children:"by"}),!j.STORYBOOK&&(0,h.jsx)(l.default,{style:p._.ml.sm,children:(0,h.jsx)(m.Avatar,{navigation:d,userId:i,src:(0,j.API_AVATAR)(i),size:20})}),(0,h.jsx)(u.Text,{style:p._.ml.sm,size:12,lineHeight:13,bold:!0,onPress:function(){d.push("Zone",{userId:i,_name:c})},children:c||i})]}),(0,h.jsx)(u.Divider,{style:p._.mt.xs})]},s)})}):null}},{key:"render",value:function(){return(0,h.jsxs)(u.ScrollView,{contentContainerStyle:p._.container.bottom,scrollToTop:!0,children:[this.renderCovers(),this.renderEdits()]})}}]),g);function g(){return(0,n.default)(this,g),_.apply(this,arguments)}t.default=(0,o.obc)(a);try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/wiki/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/wiki/list/index.tsx#list"})}catch(e){}},"./src/screens/home/wiki/store.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),m=s("./node_modules/mobx/dist/mobx.esm.js"),p=s("./src/stores/index.ts"),o=o(s("./src/utils/store/index.ts")),f=s("./src/constants/index.ts");function j(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var h;t.default=(s=o.default,(0,c.default)(b,s),h=j(b),(0,r.default)(b,[{key:"subjectId",get:function(){return this.params.subjectId}},{key:"subject",get:function(){return p.subjectStore.subject(this.subjectId)}},{key:"wiki",get:function(){return p.subjectStore.wiki(this.subjectId)}},{key:"url",get:function(){return f.HOST+"/subject/"+this.subjectId+"/edit"}}]),(0,u.default)((t=b).prototype,"subjectId",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"subjectId"),t.prototype),(0,u.default)(t.prototype,"subject",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"subject"),t.prototype),(0,u.default)(t.prototype,"wiki",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"wiki"),t.prototype),(0,u.default)(t.prototype,"url",[m.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),t);function b(){var e;(0,n.default)(this,b);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=h.call.apply(h,[this].concat(s)),(0,l.default)((0,i.default)(e),"params",void 0),(0,l.default)((0,i.default)(e),"init",function(){return p.subjectStore.fetchWiki({subjectId:e.subjectId})}),e}},"./src/screens/home/works/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.NAMESPACE=t.EXCLUDE_STATE=void 0;var o=s("./src/stores/index.ts"),s=s("./src/constants/index.ts"),o=(t.NAMESPACE="ScreenWorks",t.EXCLUDE_STATE={visibleBottom:o._.window.height,position:"",ota:{}});t.STATE=Object.assign({order:s.MODEL_MONO_WORKS_ORDERBY.getValue("日期"),list:!0,fixed:!1,collected:!0},o,{_loaded:!1})},"./src/screens/home/works/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/index.ts"),i=s("./src/utils/fetch/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/screens/home/works/header/styles.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,d.jsx)(n.Header,{title:null!=(t=s.params)&&t.name?s.params.name+"的作品":"更多作品",alias:"作品",hm:[s.url,"Works"],headerTitleStyle:c.styles.title,headerRight:function(){return(0,d.jsx)(n.Header.Popover,{data:["浏览器查看"],onSelect:function(e){"浏览器查看"===e&&((0,i.t)("作品.右上角菜单",{key:e}),(0,r.open)(s.url))},children:(0,d.jsx)(n.Heatmap,{id:"作品.右上角菜单"})})}})});try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/home/works/header/index.tsx#header"})}catch(e){}},"./src/screens/home/works/header/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({title:{paddingLeft:s._.sm,paddingRight:s._.md}})},"./src/screens/home/works/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),r=s("./src/utils/decorators/index.ts"),i=s("./src/utils/hooks/index.ts"),c=o(s("./src/screens/home/works/header/index.tsx")),d=o(s("./src/screens/home/works/tool-bar/index.tsx")),a=o(s("./src/screens/home/works/list/index.tsx")),o=o(s("./src/screens/home/works/store.ts")),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ic)(o.default,function(e,t){var s=t.$;return(0,i.useRunAfter)(function(){s.init()}),(0,i.useObserver)(function(){var e=s.state.fixed;return(0,l.jsxs)(n.Component,{id:"screen-works",children:[(0,l.jsx)(c.default,{}),(0,l.jsxs)(n.Page,{children:[e&&(0,l.jsx)(d.default,{}),(0,l.jsx)(a.default,{})]})]})})});try{works.displayName="works",works.__docgenInfo={description:"",displayName:"works",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/index.tsx#works"]={docgenInfo:works.__docgenInfo,name:"works",path:"src/screens/home/works/index.tsx#works"})}catch(e){}},"./src/screens/home/works/list/grid/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),c=s("./src/stores/index.ts"),d=s("./src/constants/index.ts"),a=s("./src/utils/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./node_modules/react/jsx-runtime.js"),u={id:"作品.跳转",data:{type:"grid"}};t.default=(0,o.obc)(function(e,t){var s=e.item,o=e.index,e=e.numColumns,t=t.navigation,n=String(s.id).replace("/subject/",""),r=c.collectionStore.collect(n);return(0,l.jsx)(i.ItemCollectionsGrid,Object.assign({style:(0,a.stl)((c._.isPad||c._.isLandscape)&&!(o%e)&&c._.container.left,o<e&&c._.mt.sm),navigation:t,num:e,event:u},s,{airtime:(0,a.matchYear)(s.tip),id:n,collection:r,typeCn:d.MODEL_SUBJECT_TYPE.getTitle(s.type)}))})},"./src/screens/home/works/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),n=s("./src/utils/decorators/index.ts"),c=s("./src/utils/index.ts"),d=o(s("./src/screens/home/works/tool-bar/index.tsx")),a=o(s("./src/screens/home/works/list/list/index.tsx")),l=o(s("./src/screens/home/works/list/grid/index.tsx")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s,t=t.$,o=(n=t.state).fixed,n=n.list;return t.list._loaded?(s=n?void 0:i._.portrait(3,5),(0,u.jsx)(r.ListView,{keyExtractor:c.keyExtractor,contentContainerStyle:i._.container.bottom,data:t.list,numColumns:s,scrollToTop:!0,ListHeaderComponent:!o&&(0,u.jsx)(d.default,{}),renderItem:n?m:p,scrollEventThrottle:4,onScroll:t.onScroll,onHeaderRefresh:t.onHeaderRefresh,onFooterRefresh:t.fetchMonoWorks},""+i._.orientation+s)):(0,u.jsxs)(u.Fragment,{children:[!o&&(0,u.jsx)(d.default,{}),(0,u.jsx)(r.Loading,{})]})});function m(e){var t=e.item,e=e.index;return(0,u.jsx)(a.default,{item:t,index:e})}function p(e){var t=e.item,e=e.index;return(0,u.jsx)(l.default,{item:t,index:e,numColumns:i._.portrait(3,5)})}try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/home/works/list/index.tsx#list"})}catch(e){}},"./src/screens/home/works/list/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),r=s("./src/stores/index.ts"),i=s("./src/constants/index.ts"),o=s("./src/utils/decorators/index.ts"),c=s("./src/utils/index.ts"),d=s("./node_modules/react/jsx-runtime.js"),a={id:"作品.跳转",data:{type:"list"}};t.default=(0,o.obc)(function(e,t){var s=e.item,e=e.index,t=t.navigation,o=String(s.id).replace("/subject/",""),o=r.collectionStore.collect(o);return(0,d.jsx)(n.ItemSearch,Object.assign({style:r._.container.item,navigation:t,event:a,index:e},s,{tip:(0,c.HTMLDecode)(s.tip),typeCn:i.MODEL_SUBJECT_TYPE.getTitle(s.type),collection:o}))})},"./src/screens/home/works/store.ts":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.function.bind.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),c=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),j=s("./node_modules/mobx/dist/mobx.esm.js"),h=s("./src/stores/index.ts"),b=s("./src/utils/index.ts"),o=o(s("./src/utils/store/index.ts")),_=s("./src/utils/fetch/index.ts"),y=s("./src/utils/kv/index.ts"),x=s("./src/constants/index.ts"),g=s("./src/screens/home/works/ds.ts"),v=["collected"];function O(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,m.default)(s);return e=o?(e=(0,m.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}var S,T=[];t.default=(s=o.default,(0,l.default)(E,s),S=O(E),(0,r.default)(E,[{key:"monoId",get:function(){return this.params.monoId}},{key:"monoWorks",get:function(){return h.subjectStore.monoWorks(this.monoId)}},{key:"list",get:function(){return this.monoWorks._loaded?this.state.collected?this.monoWorks:Object.assign({},this.monoWorks,{list:this.monoWorks.list.filter(function(e){return!e.collected})}):this.ota?Object.assign({},this.ota,{pagination:{page:1,pageTotal:10}}):x.LIST_EMPTY}},{key:"url",get:function(){var e=this.state,t=e.position,e=e.order;return(0,x.HTML_MONO_WORKS)(this.monoId,t,e)}},{key:"subject",value:function(e){return(0,j.computed)(function(){return h.subjectStore.subject(e)}).get()}},{key:"ota",get:function(){return this.state.ota[this.thirdPartyKey]}},{key:"thirdPartyKey",get:function(){var e=this.state,t=e.order,e=e.position;return("works_"+[this.monoId,t,e].join("_")).replace("/","_")}}]),(0,f.default)((t=E).prototype,"monoId",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoId"),t.prototype),(0,f.default)(t.prototype,"monoWorks",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"monoWorks"),t.prototype),(0,f.default)(t.prototype,"list",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"list"),t.prototype),(0,f.default)(t.prototype,"url",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"url"),t.prototype),(0,f.default)(t.prototype,"ota",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"ota"),t.prototype),(0,f.default)(t.prototype,"thirdPartyKey",[j.computed],Object.getOwnPropertyDescriptor(t.prototype,"thirdPartyKey"),t.prototype),t);function E(){var r;(0,d.default)(this,E);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return r=S.call.apply(S,[this].concat(s)),(0,p.default)((0,a.default)(r),"params",void 0),(0,p.default)((0,a.default)(r),"state",(0,j.observable)(g.STATE)),(0,p.default)((0,a.default)(r),"init",(0,c.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getStorage(g.NAMESPACE);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,r.setState(Object.assign({},t,g.EXCLUDE_STATE,{_loaded:!0})),e.abrupt("return",r.fetchMonoWorks(!0));case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"onHeaderRefresh",function(){return r.fetchMonoWorks(!0)}),(0,p.default)((0,a.default)(r),"save",function(){return r.saveStorage(g.NAMESPACE,g.EXCLUDE_STATE)}),(0,p.default)((0,a.default)(r),"fetchMonoWorks",(t=(0,c.default)(i.mark(function e(t){var s,o,n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.fetchThirdParty(),n=r.state,o=n.position,n=n.order,e.next=4,h.subjectStore.fetchMonoWorks({monoId:r.monoId,position:o,order:n},t);case 4:return(s=e.sent).list.length&&r.thirdPartyKey in r.state.ota&&(n=(null==(o=r.ota)?void 0:o.ts)||0,604800<=(0,b.getTimestamp)()-n)&&r.updateThirdParty(),setTimeout(function(){h.collectionStore.fetchCollectionStatusQueue(s.list.filter(function(e){return e.collected}).map(function(e){return String(e.id).replace("/subject/","")}))},160),e.abrupt("return",s);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,p.default)((0,a.default)(r),"fetchThirdParty",(0,c.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ota||r.monoWorks._loaded){e.next=8;break}return e.next=3,(0,y.get)(r.thirdPartyKey);case 3:if(t=e.sent){e.next=7;break}return r.setState({ota:(0,p.default)({},r.thirdPartyKey,{list:[],_loaded:0})}),e.abrupt("return");case 7:r.setState({ota:(0,p.default)({},r.thirdPartyKey,Object.assign({},t,{_loaded:(0,b.getTimestamp)()}))});case 8:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"updateThirdParty",(0,c.default)(i.mark(function e(){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.includes(r.thirdPartyKey))return e.abrupt("return");e.next=2;break;case 2:setTimeout(function(){(0,y.update)(r.thirdPartyKey,{list:r.monoWorks.list.map(function(e){e.collected;return(0,n.default)(e,v)})}),T.push(r.thirdPartyKey)},0);case 3:case"end":return e.stop()}},e)}))),(0,p.default)((0,a.default)(r),"onOrderSelect",function(e){(0,_.t)("作品.排序选择",{label:e}),r.setState({order:x.MODEL_MONO_WORKS_ORDERBY.getValue(e)}),r.fetchMonoWorks(!0),r.save()}),(0,p.default)((0,a.default)(r),"onFilterSelect",function(t,e){(0,_.t)("作品.职位选择",{label:t.split(" ")[0]});e=(e.find(function(e){return e.title===t})||{}).value;r.setState({position:void 0===e?"":e}),r.fetchMonoWorks(!0),r.save()}),(0,p.default)((0,a.default)(r),"onToggleList",function(){var e=r.state.list;(0,_.t)("作品.切换布局",{list:!e}),r.setState({list:!e}),r.save()}),(0,p.default)((0,a.default)(r),"onToggleToolbar",function(e){r.setState((0,p.default)({},e,!r.state[e])),r.save()}),(0,p.default)((0,a.default)(r),"onScroll",b.updateVisibleBottom.bind((0,a.default)(r))),r}},"./src/screens/home/works/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.string.fixed.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),s("./src/components/index.ts")),a=s("./src/stores/index.ts"),o=s("./src/utils/decorators/index.ts"),l=s("./src/constants/index.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var o=t.$,s=(t=o.state).order,n=t.position,r=t.list,i=t.fixed,t=t.collected,c=o.monoWorks.filters;return(0,u.jsxs)(d.ToolBar,{children:[(0,u.jsx)(d.ToolBar.Popover,{data:l.MONO_WORKS_ORDERBY.map(function(e){return e.label}),icon:"md-sort",iconColor:a._.colorDesc,text:l.MODEL_MONO_WORKS_ORDERBY.getLabel(s),type:"desc",heatmap:"作品.排序选择",onSelect:o.onOrderSelect}),c.map(function(t){var e=t.data.map(function(e){return e.title}),s=t.data.find(function(e){return e.value===n})||{title:"全部"};return(0,u.jsx)(d.ToolBar.Popover,{data:e,text:"全部"!==s.title&&s.title||t.title,type:"全部"===s.title?void 0:"desc",heatmap:"作品.职位选择",onSelect:function(e){return o.onFilterSelect(e,t.data)}},t.title)}),(0,u.jsx)(d.ToolBar.Popover,{data:["选项 · "+(i?"锁定上方":"浮动"),"布局 · "+(r?"列表":"网格"),"收藏 · "+(t?"显示":"不显示")],icon:"md-more-vert",iconColor:a._.colorDesc,iconSize:20,type:"desc",transparent:!0,onSelect:function(e){return e.includes("选项")?o.onToggleToolbar("fixed"):e.includes("布局")?o.onToggleList():e.includes("收藏")?o.onToggleToolbar("collected"):void 0}})]})});try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/home/works/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/home/works/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/login/assist/index.tsx":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),n=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.index-of.js"),s("./node_modules/core-js/modules/es.array.last-index-of.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),i=n(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=n(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=n(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=n(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=n(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=n(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=n(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=n(s("./node_modules/react/index.js")),f=n(s("./node_modules/react-native-web/dist/exports/View/index.js")),j=n(s("./node_modules/cheerio-without-node-native/index.js")),h=s("./src/components/index.ts"),b=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),y=s("./src/utils/decorators/index.ts"),x=s("./src/utils/fetch/index.ts"),g=s("./src/constants/index.ts"),v=n(s("./src/constants/i18n/index.ts")),O=s("./src/screens/login/assist/styles.ts"),S=s("./node_modules/react/jsx-runtime.js");function T(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var E,P="JSON.stringify({\n  userAgent: navigator.userAgent,\n  cookie: document.cookie\n});",s=(n=p.default.Component,(0,d.default)(I,n),E=T(I),(0,c.default)(I,[{key:"render",value:function(){var e=this.state,t=e.loading,e=e.info;return(0,S.jsxs)(h.Component,{id:"screen-login-assist",children:[(0,S.jsx)(h.Header,{title:"电脑辅助"+v.default.login(),alias:"辅助"+v.default.login(),hm:["login/assist","LoginAssist"]}),(0,S.jsx)(h.Page,{children:(0,S.jsxs)(h.ScrollView,{contentContainerStyle:this.styles.container,scrollToTop:!0,children:[(0,S.jsxs)(h.Text,{type:"danger",size:12,children:["此为",v.default.login(),"最后的手段，流程相对较多 (其实不复杂， 熟悉的话比正常",v.default.login(),"还要快和稳)，请先尝试新版和旧版",v.default.login(),"，不行再试这个。"]}),(0,S.jsxs)(h.Text,{style:b._.mt.sm,type:"sub",size:12,children:["第三方",v.default.login(),"失败受很多因素影响，如网络不佳、运营商劫持、手机系统特异， 又或者碰上bgm速度不佳 (当然还有代码有bug)。"]}),(0,S.jsxs)(h.Text,{style:b._.mt.sm,type:"sub",size:12,children:["本人能力有限，部分设备无论如何都不能走通新版和旧版的",v.default.login(),"流程， 若您实在很喜欢本应用，可以尝试下面的方法 (假如还走不通，请多尝试， 又或者过来干我)。"]}),(0,S.jsx)(h.Text,{style:b._.mt.lg,children:"1. 复制框里的代码。"}),(0,S.jsxs)(f.default,{style:b._.mt.sm,children:[(0,S.jsx)(h.Text,{style:this.styles.code,size:12,children:P}),(0,S.jsx)(h.Text,{style:this.styles.copy,size:12,type:"success",onPress:this.copy,children:"点击复制"}),(0,S.jsx)(h.Heatmap,{id:"辅助登陆.复制"})]}),(0,S.jsxs)(h.Text,{style:b._.mt.md,children:["2. 使用电脑打开浏览器，访问 ",g.HOST," (一定要是这个域名) 并",v.default.login(),"。"]}),(0,S.jsxs)(h.Text,{style:b._.mt.md,children:["3. ",v.default.login(),"成功后，打开控制台 (chrome为例，window是F12，mac是⎇ + ⌘ + i)， 之后运行复制的代码。"]}),(0,S.jsx)(h.Text,{style:b._.mt.md,children:"4. 把结果复制到下面的输入框内，提交。"}),(0,S.jsxs)(f.default,{style:b._.mt.sm,children:[(0,S.jsx)(h.Input,{style:this.styles.input,placeholder:"粘贴结果",multiline:!0,numberOfLines:6,returnKeyType:"done",returnKeyLabel:v.default.login(),onChangeText:this.onChangeText,onSubmitEditing:this.submit}),(0,S.jsx)(h.Heatmap,{id:"辅助登陆.提交"})]}),(0,S.jsx)(h.Button,{style:b._.mt.lg,type:"main",shadow:!0,loading:t,onPress:this.submit,children:v.default.login()}),(0,S.jsx)(h.Text,{style:b._.mt.md,size:12,lineHeight:16,type:"sub",children:e}),(0,S.jsx)(h.KeyboardSpacer,{})]})})]})}},{key:"styles",get:function(){return(0,O.memoStyles)()}}]),I);function I(){var d;(0,i.default)(this,I);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return d=E.call.apply(E,[this].concat(t)),(0,m.default)((0,a.default)(d),"state",{result:"",loading:!1,info:""}),(0,m.default)((0,a.default)(d),"userAgent",""),(0,m.default)((0,a.default)(d),"formhash",""),(0,m.default)((0,a.default)(d),"cookie",{chiiSid:"",chiiAuth:""}),(0,m.default)((0,a.default)(d),"code",""),(0,m.default)((0,a.default)(d),"accessToken",""),(0,m.default)((0,a.default)(d),"copy",function(){(0,x.t)("辅助登陆.复制"),(0,_.copy)(P,"已复制")}),(0,m.default)((0,a.default)(d),"onChangeText",function(e){d.setState({result:e})}),(0,m.default)((0,a.default)(d),"submit",function(){var e=d.state,t=e.loading,e=e.result;if(!t)if(""===e)(0,_.info)("请粘贴结果");else{(0,x.t)("辅助登陆.提交"),d.setState({loading:!0,info:v.default.login()+"请求中..."});try{var s=e,o=((s=0===s.indexOf('"')?s.substring(1):s).lastIndexOf('"')===s.length-1&&(s=s.substring(0,s.length-1)),JSON.parse(s)),n=o.userAgent,r=o.cookie;if(n){if(d.userAgent=n,r){var i=r.match(/chii_sid=(.+?);/)||r.match(/chii_sid=(.+?)$/);if(!i)return void d.setState({loading:!1,info:"结果中没有"+v.default.login()+"过的cookie, 请重新输入"});d.cookie.chiiSid=i[1];var c=r.match(/chii_auth=(.+?);/)||r.match(/chii_auth=(.+?)$/);if(!c)return void d.setState({loading:!1,info:"结果中没有"+v.default.login()+"过的cookie, 请重新输入"});d.cookie.chiiAuth=c[1]}d.onLogin()}else d.setState({loading:!1,info:"结果中没有userAgent, 请重新输入"})}catch(e){d.setState({loading:!1,info:"结果格式有误, 请重新输入"})}}}),(0,m.default)((0,a.default)(d),"onLogin",(0,r.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.oauth();case 3:return e.next=5,d.authorize();case 5:return e.next=7,d.getAccessToken();case 7:t=e.sent,t=t._response,t=JSON.parse(t),b.userStore.updateAccessToken(t),d.inStore(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d.setState({loading:!1,info:v.default.login()+"失败, 请重试或跟我反馈吧bgm38"});case 17:case"end":return e.stop()}},e,null,[[0,14]])}))),(0,m.default)((0,a.default)(d),"oauth",(0,r.default)(o.mark(function e(){var t,s;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.setState({info:"获取授权表单码...(1/4)"}),e.prev=1,t=(0,x.xhrCustom)({url:g.HOST+"/oauth/authorize?client_id="+g.APP_ID+"&response_type=code&redirect_uri="+g.URL_OAUTH_REDIRECT,headers:{Cookie:"; chii_cookietime=2592000; chii_sid="+d.cookie.chiiSid+"; chii_auth="+d.cookie.chiiAuth+";","User-Agent":d.userAgent}}),e.next=5,t;case 5:return s=e.sent,s=s._response,d.formhash=j.default.load(s)("input[name=formhash]").attr("value"),e.abrupt("return",t);case 11:return e.prev=11,e.t0=e.catch(1),d.setState({loading:!1,info:v.default.login()+"失败, 请重试或跟我反馈吧bgm38"}),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[1,11]])}))),(0,m.default)((0,a.default)(d),"authorize",(0,r.default)(o.mark(function e(){var t,s;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.setState({info:"授权中...(2/4)"}),e.prev=1,t=(0,x.xhrCustom)({method:"POST",url:g.HOST+"/oauth/authorize?client_id="+g.APP_ID+"&response_type=code&redirect_uri="+g.URL_OAUTH_REDIRECT,headers:{"Content-Type":"application/x-www-form-urlencoded",Cookie:"; chii_cookietime=2592000; chii_sid="+d.cookie.chiiSid+"; chii_auth="+d.cookie.chiiAuth+";","User-Agent":d.userAgent},data:{formhash:d.formhash,redirect_uri:"",client_id:g.APP_ID,submit:"授权"}}),e.next=5,t;case 5:return s=e.sent,s=s.responseURL,d.code=s.split("=").slice(1).join("="),e.abrupt("return",t);case 11:return e.prev=11,e.t0=e.catch(1),d.setState({loading:!1,info:v.default.login()+"失败, 请重试或跟我反馈吧bgm38"}),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,null,[[1,11]])}))),(0,m.default)((0,a.default)(d),"getAccessToken",function(){d.setState({info:"授权成功, 获取token中...(3/4)"});try{return(0,x.xhrCustom)({method:"POST",url:g.HOST+"/oauth/access_token",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":d.userAgent},data:{grant_type:"authorization_code",client_id:g.APP_ID,client_secret:g.APP_SECRET,code:d.code,redirect_uri:g.URL_OAUTH_REDIRECT,state:(0,_.getTimestamp)()}})}catch(e){return d.setState({loading:!1,info:v.default.login()+"失败, 请重试或跟我反馈吧bgm38"}),!1}}),(0,m.default)((0,a.default)(d),"inStore",(0,r.default)(o.mark(function e(){var t;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.setState({info:v.default.login()+"成功, 正在请求个人信息...(4/4)"}),t=d.props.navigation,b.userStore.updateUserCookie({cookie:"chii_cookietime=2592000; chii_sid="+d.cookie.chiiSid+"; chii_auth="+d.cookie.chiiAuth,userAgent:d.userAgent,v:0}),(0,_.feedback)(),e.next=6,b.userStore.fetchUserInfo();case 6:return e.next=8,b.userStore.fetchUsersInfo();case 8:t.popToTop();case 9:case"end":return e.stop()}},e)}))),d}t.default=(0,y.ob)(s);try{assist.displayName="assist",assist.__docgenInfo={description:"",displayName:"assist",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/login/assist/index.tsx#assist"]={docgenInfo:assist.__docgenInfo,name:"assist",path:"src/screens/login/assist/index.tsx#assist"})}catch(e){}},"./src/screens/login/assist/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{container:{display:"flex",flexDirection:"column",paddingTop:o._.sm,paddingHorizontal:o._.wind,paddingBottom:o._.lg},code:{paddingVertical:o._.md,paddingHorizontal:o._.wind,backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1),borderWidth:1,borderColor:o._.colorBorder,borderRadius:o._.radiusXs,overflow:"hidden"},copy:{position:"absolute",top:o._.sm,right:o._.sm,padding:o._.sm},input:{backgroundColor:o._.select(o._.colorBg,o._._colorDarkModeLevel1)}}})},"./src/screens/login/token/index.tsx":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),d=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=y(t);if(t&&t.has(e))return t.get(e);var s,o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var r;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((r=n?Object.getOwnPropertyDescriptor(e,s):null)&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s])}return o.default=e,t&&t.set(e,o),o}(s("./node_modules/react/index.js")),l=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),u=s("./node_modules/mobx-react/dist/mobxreact.esm.js"),m=s("./src/components/index.ts"),p=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),j=s("./src/utils/hooks/index.ts"),h=s("./src/utils/fetch.v0/index.ts"),b=s("./src/screens/login/token/styles.ts"),_=s("./node_modules/react/jsx-runtime.js");function y(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(y=function(e){return e?s:t})(e))}t.default=function(){var e=(0,a.useState)(""),e=(0,d.default)(e,2),n=e[0],r=e[1],o=(0,a.useCallback)((0,c.default)(i.mark(function e(){var t,s,o;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return(0,f.info)("已清除鉴权信息"),p.userStore.updateAccessToken({access_token:"",expires_in:604800,token_type:"Bearer",scope:null,user_id:0,refresh_token:""}),e.abrupt("return");case 4:return t=Object.assign({},p.userStore.accessToken),s={access_token:n,expires_in:604800,token_type:"Bearer",scope:null,user_id:0,refresh_token:""},p.userStore.updateAccessToken(s),e.next=9,(0,h.fetchMeV0)();case 9:if(null!=(o=e.sent)&&o.id&&null!=o&&o.username)return(0,f.info)("更新成功"),p.userStore.updateUserInfo(Object.assign({},o,{_loaded:(0,f.getTimestamp)()})),p.userStore.updateAccessToken(Object.assign({},s,{user_id:o.id})),p.collectionStore.clearState("_collectionStatusLastFetchMS"),e.abrupt("return");e.next=16;break;case 16:(0,f.info)("更新失败，请确保用户令牌可用"),p.userStore.updateAccessToken(t),r(t.access_token);case 19:case"end":return e.stop()}},e)})),[n]);return(0,j.useMount)(function(){r(p.userStore.accessToken.access_token)}),(0,u.useObserver)(function(){var e=p.userStore.userInfo,t=e.avatar,s=e.nickname,e=e.username;return(0,_.jsxs)(m.Component,{id:"screen-login-token",children:[(0,_.jsx)(m.Header,{title:" "}),(0,_.jsx)(m.Page,{children:(0,_.jsxs)(m.Flex,{style:b.styles.container,direction:"column",justify:"center",children:[null!=t&&t.large&&s?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.Avatar,{src:t.large,size:96,round:!0}),(0,_.jsxs)(m.Text,{style:p._.mt.sm,size:16,bold:!0,children:[s," @",e]})]}):(0,_.jsx)(m.Mesume,{}),(0,_.jsx)(l.default,{style:b.styles.item,children:(0,_.jsx)(m.Input,{style:b.styles.input,placeholder:"用户令牌，必填",value:n,onChangeText:r})}),(0,_.jsx)(m.Touchable,{style:p._.mt.md,onPress:o,children:(0,_.jsxs)(m.Flex,{children:[(0,_.jsx)(m.Text,{type:"sub",size:16,bold:!0,children:"更新"}),(0,_.jsx)(m.Flex,{style:b.styles.arrow,children:(0,_.jsx)(m.Iconfont,{name:"md-arrow-forward",size:14})})]})})]})})]})})}},"./src/screens/login/token/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({container:{minHeight:.72*s._.window.height,paddingHorizontal:48},item:{width:"100%"},input:Object.assign({height:40,marginTop:48,paddingVertical:0,textAlign:"center"},s._.fontSize14,{borderRadius:20}),arrow:{padding:2,marginLeft:s._.sm,borderWidth:2,borderColor:s._.colorIcon,borderRadius:20}})},"./src/screens/login/v2/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.URL_TOURIST=t.UA_EKIBUN_BANGUMI_APP=t.TITLE=t.NAMESPACE=t.AUTH_RETRY_COUNT=void 0;var o=s("./src/utils/index.ts"),s=s("./src/constants/index.ts");t.TITLE="登录",t.NAMESPACE="LoginV2",t.AUTH_RETRY_COUNT=4,t.URL_TOURIST=s.GITHUB_HOST+"/raw/master/tourist.json?t="+(0,o.getTimestamp)(),t.UA_EKIBUN_BANGUMI_APP="Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Mobile Safari/537.36"},"./src/screens/login/v2/form/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=o(s("./node_modules/react/index.js")),m=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),p=o(s("./node_modules/react-native-web/dist/exports/Image/index.js")),f=o(s("./node_modules/@ant-design/react-native/lib/activity-indicator/index.js")),j=s("./src/components/index.ts"),h=s("./src/screens/_/index.ts"),b=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),y=s("./src/utils/decorators/index.ts"),x=s("./src/utils/fetch/index.ts"),g=s("./src/constants/index.ts"),v=o(s("./src/constants/i18n/index.ts")),O=s("./src/screens/login/v2/form/styles.ts"),S=s("./node_modules/react/jsx-runtime.js");function T(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=o?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var E,P=[g.HOST,g.HOST_2,g.HOST_3],s=(o=u.default.Component,(0,c.default)(I,o),E=T(I),(0,r.default)(I,[{key:"componentDidMount",value:function(){var e,t,s=this.props,o=s.email,n=s.password,s=s.captcha;if(o&&n&&!s)try{"function"==typeof(null==this||null==(e=this.codeRef)||null==(t=e.inputRef)?void 0:t.focus)&&this.codeRef.inputRef.focus()}catch(e){}}},{key:"renderForm",value:function(){var t=this,e=this.props,s=e.email,o=e.password,n=e.captcha,r=e.base64,i=e.forwardRef,c=e.onGetCaptcha,d=e.onFocus,a=e.onBlur,l=e.onChange,e=e.onLogin;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.Flex,{style:b._.mt.lg,children:(0,S.jsx)(j.Flex.Item,{children:(0,S.jsx)(j.Input,{style:this.styles.input,value:s,placeholder:"Email",returnKeyType:"next",onFocus:d,onBlur:a,onChange:function(e){return l(e,"email")},onSubmitEditing:this.onSubmitEditingEmail})})}),(0,S.jsx)(j.Flex,{style:b._.mt.md,children:(0,S.jsx)(j.Flex.Item,{children:(0,S.jsx)(j.Input,{ref:function(e){return t.passwordRef=e},style:this.styles.input,value:o,placeholder:"密码",secureTextEntry:!0,returnKeyType:"next",onFocus:d,onBlur:a,onChange:function(e){return l(e,"password")},onSubmitEditing:this.onSubmitEditingPassword})})}),(0,S.jsxs)(j.Flex,{style:b._.mt.md,children:[(0,S.jsx)(j.Flex.Item,{children:(0,S.jsx)(j.Input,{ref:function(e){i(e),t.codeRef=e},style:this.styles.input,value:n,placeholder:"验证码",returnKeyType:"done",returnKeyLabel:v.default.login(),onFocus:d,onBlur:a,onChange:function(e){return l(e,"captcha")},onSubmitEditing:e})}),(0,S.jsx)(j.Touchable,{style:this.styles.touchCaptcha,onPress:c,children:(0,S.jsx)(j.Flex,{style:this.styles.captchaContainer,justify:"center",children:r?(0,S.jsx)(p.default,{style:this.styles.captcha,source:{uri:r}}):(0,S.jsx)(f.default,{size:"small"})})})]})]})}},{key:"renderConfig",value:function(){var e=this.props,t=e.failed,s=e.isCommonUA,o=e.host,n=e.onSelect,e=e.onUAChange;return t?this.state.config?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(j.Flex,{style:[this.styles.touch,b._.mt.sm],children:[(0,S.jsx)(j.Flex.Item,{children:(0,S.jsx)(h.Popover,{style:this.styles.touch,data:P,onSelect:n,children:(0,S.jsxs)(j.Flex,{style:this.styles.content,children:[(0,S.jsxs)(j.Text,{type:"sub",size:12,children:["使用 ",o," 进行",v.default.login()]}),(0,S.jsx)(j.Iconfont,{name:"md-keyboard-arrow-down"})]})})}),(0,S.jsx)(j.Touchable,{style:this.styles.touchIcon,onPress:this.onNoticeHost,children:(0,S.jsx)(j.Flex,{style:this.styles.icon,justify:"center",children:(0,S.jsx)(j.Iconfont,{name:"md-info-outline",size:18})})})]}),(0,S.jsxs)(j.Flex,{style:this.styles.touch,children:[(0,S.jsx)(j.Flex.Item,{children:(0,S.jsx)(j.Touchable,{style:this.styles.touch,onPress:e,children:(0,S.jsxs)(j.Flex,{style:this.styles.content,children:[(0,S.jsx)(j.Iconfont,{name:s?"md-radio-button-on":"md-radio-button-off",color:s?b._.colorMain:b._.colorSub,size:18}),(0,S.jsxs)(j.Text,{style:b._.ml.xs,type:"sub",size:12,children:["使用固定UA",v.default.login()," (频繁掉线请勾选)"]})]})})}),(0,S.jsx)(j.Touchable,{style:this.styles.touchIcon,onPress:this.onNoticeUA,children:(0,S.jsx)(j.Flex,{style:this.styles.icon,justify:"center",children:(0,S.jsx)(j.Iconfont,{name:"md-info-outline",size:18})})})]})]}):(0,S.jsxs)(j.Touchable,{style:[this.styles.touch,b._.mt.sm],onPress:this.showConfig,children:[(0,S.jsxs)(j.Flex,{style:this.styles.content,children:[(0,S.jsxs)(j.Text,{type:"sub",size:12,children:[v.default.login(),"配置"]}),(0,S.jsx)(j.Iconfont,{name:"md-navigate-next"})]}),(0,S.jsx)(j.Heatmap,{id:"登陆.切换域名"}),(0,S.jsx)(j.Heatmap,{bottom:-32,id:"登陆.配置提示",transparent:!0})]}):null}},{key:"renderError",value:function(){var e=this.props,t=e.navigation,e=e.info,s=e.includes("错误");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.Text,{style:b._.mt.md,size:12,lineHeight:16,type:"sub",onPress:function(){s&&t.push("Login")},children:e}),s&&(0,S.jsxs)(j.Text,{style:b._.mt.md,size:12,lineHeight:16,type:"sub",onPress:function(){return t.push("LoginAssist")},children:["请尝试切换另一域名进行重试，或尝试切换wifi或4g网络，实在没法",v.default.login(),"，可点击这里前往辅助",v.default.login(),"→"]})]})}},{key:"render",value:function(){var e=this.props,t=e.loading,e=e.onLogin;return(0,S.jsx)(m.default,{style:b._.container.column,children:(0,S.jsxs)(m.default,{style:this.styles.form,children:[(0,S.jsx)(j.Flex,{justify:"center",children:(0,S.jsx)(j.Mesume,{})}),this.renderForm(),!g.STORYBOOK&&this.renderConfig(),(0,S.jsx)(j.Button,{style:b._.mt.lg,type:"main",shadow:!0,loading:t,onPress:e,children:v.default.login()}),this.renderError()]})})}},{key:"styles",get:function(){return(0,O.memoStyles)()}}]),I);function I(){var o;(0,n.default)(this,I);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o=E.call.apply(E,[this].concat(t)),(0,l.default)((0,i.default)(o),"state",{config:!1}),(0,l.default)((0,i.default)(o),"passwordRef",void 0),(0,l.default)((0,i.default)(o),"codeRef",void 0),(0,l.default)((0,i.default)(o),"showConfig",function(){return o.setState({config:!0})}),(0,l.default)((0,i.default)(o),"onNoticeHost",function(){(0,x.t)("登陆.配置提示",{name:"host"}),(0,_.alert)("三个选项都是同一个站点的不同域名，只是具体服务器位置不同。 \n\n"+v.default.login()+"建议优先使用 bgm.tv，出现问题再尝试 bangumi.tv，最后尝试 chii.in。")}),(0,l.default)((0,i.default)(o),"onNoticeUA",function(){(0,x.t)("登陆.配置提示",{name:"ua"}),(0,_.alert)("假如您频繁掉授权状态，不妨试试把这个选项勾上，通常"+v.default.login()+"状态生存时间为7天。 \n\n这是个不稳定的选项，若"+v.default.login()+"正常不建议勾上，可能会遇到预测不能的状况。")}),(0,l.default)((0,i.default)(o),"onSubmitEditingEmail",function(){try{var e,t,s;"function"==typeof(null==(e=(0,i.default)(o))||null==(t=e.passwordRef)||null==(s=t.inputRef)?void 0:s.focus)&&o.passwordRef.inputRef.focus()}catch(e){}}),(0,l.default)((0,i.default)(o),"onSubmitEditingPassword",function(){try{var e,t,s;"function"==typeof(null==(e=(0,i.default)(o))||null==(t=e.codeRef)||null==(s=t.inputRef)?void 0:s.focus)&&o.codeRef.inputRef.focus()}catch(e){}}),o}(0,l.default)(s,"defaultProps",{host:"",forwardRef:function(){},onGetCaptcha:function(){},onFocus:function(){},onBlur:function(){},onChange:function(){},onSelect:function(){},onUAChange:function(){},onLogin:function(){}});t.default=(0,y.ob)(s);try{form.displayName="form",form.__docgenInfo={description:"",displayName:"form",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"string"}},email:{defaultValue:null,description:"",name:"email",required:!0,type:{name:"string"}},password:{defaultValue:null,description:"",name:"password",required:!0,type:{name:"string"}},captcha:{defaultValue:null,description:"",name:"captcha",required:!0,type:{name:"string"}},base64:{defaultValue:null,description:"",name:"base64",required:!0,type:{name:"string"}},isCommonUA:{defaultValue:null,description:"",name:"isCommonUA",required:!0,type:{name:"boolean"}},host:{defaultValue:null,description:"",name:"host",required:!0,type:{name:"string"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},failed:{defaultValue:null,description:"",name:"failed",required:!0,type:{name:"boolean"}},forwardRef:{defaultValue:null,description:"",name:"forwardRef",required:!0,type:{name:"Fn"}},onGetCaptcha:{defaultValue:null,description:"",name:"onGetCaptcha",required:!0,type:{name:"Fn"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"Fn"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"Fn"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"Fn"}},onLogin:{defaultValue:null,description:"",name:"onLogin",required:!0,type:{name:"Fn"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"Fn"}},onUAChange:{defaultValue:null,description:"",name:"onUAChange",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/login/v2/form/index.tsx#form"]={docgenInfo:form.__docgenInfo,name:"form",path:"src/screens/login/v2/form/index.tsx#form"})}catch(e){}},"./src/screens/login/v2/form/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{form:{width:o._.r(300),paddingBottom:200},input:Object.assign({height:44,paddingVertical:0,paddingHorizontal:14},o._.device(o._.fontSize12,o._.fontSize15),{backgroundColor:o._.colorBg,borderRadius:o._.radiusSm}),touchCaptcha:{height:44,marginLeft:o._.sm,borderRadius:o._.radiusSm,overflow:"hidden"},captchaContainer:{width:118,height:44},captcha:{width:118,height:44},touch:{borderRadius:o._.radiusSm,overflow:"hidden"},content:{paddingVertical:4},touchIcon:{marginLeft:o._.md,borderRadius:20,overflow:"hidden"},icon:{width:36,height:36}}})},"./src/screens/login/v2/index.tsx":(e,t,s)=>{var i=s("./node_modules/@babel/runtime/regenerator/index.js"),o=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.typed-array.uint8-array.js"),s("./node_modules/core-js/modules/es.typed-array.copy-within.js"),s("./node_modules/core-js/modules/es.typed-array.every.js"),s("./node_modules/core-js/modules/es.typed-array.fill.js"),s("./node_modules/core-js/modules/es.typed-array.filter.js"),s("./node_modules/core-js/modules/es.typed-array.find.js"),s("./node_modules/core-js/modules/es.typed-array.find-index.js"),s("./node_modules/core-js/modules/es.typed-array.for-each.js"),s("./node_modules/core-js/modules/es.typed-array.includes.js"),s("./node_modules/core-js/modules/es.typed-array.index-of.js"),s("./node_modules/core-js/modules/es.typed-array.iterator.js"),s("./node_modules/core-js/modules/es.typed-array.join.js"),s("./node_modules/core-js/modules/es.typed-array.last-index-of.js"),s("./node_modules/core-js/modules/es.typed-array.map.js"),s("./node_modules/core-js/modules/es.typed-array.reduce.js"),s("./node_modules/core-js/modules/es.typed-array.reduce-right.js"),s("./node_modules/core-js/modules/es.typed-array.reverse.js"),s("./node_modules/core-js/modules/es.typed-array.set.js"),s("./node_modules/core-js/modules/es.typed-array.slice.js"),s("./node_modules/core-js/modules/es.typed-array.some.js"),s("./node_modules/core-js/modules/es.typed-array.sort.js"),s("./node_modules/core-js/modules/es.typed-array.subarray.js"),s("./node_modules/core-js/modules/es.typed-array.to-locale-string.js"),s("./node_modules/core-js/modules/es.typed-array.to-string.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.array-buffer.slice.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/es.regexp.constructor.js"),s("./node_modules/core-js/modules/es.regexp.to-string.js"),s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),d=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=o(s("./node_modules/react/index.js")),f=o(s("./node_modules/react-native-web/dist/exports/View/index.js")),j=o(s("./node_modules/expo-constants/build/Constants.js")),h=o(s("./node_modules/cheerio-without-node-native/index.js")),b=s("./src/components/index.ts"),_=s("./src/screens/_/index.ts"),y=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),g=s("./src/utils/decorators/index.ts"),v=s("./src/utils/fetch/index.ts"),O=o(s("./src/utils/thirdParty/axios.js")),S=s("./src/constants/index.ts"),T=o(s("./src/constants/i18n/index.ts")),E=s("./config.ts"),P=o(s("./src/screens/login/v2/preview/index.tsx")),I=o(s("./src/screens/login/v2/form/index.tsx")),C=s("./src/screens/login/v2/ds.ts"),R=s("./src/screens/login/v2/styles.ts"),N=s("./node_modules/react/jsx-runtime.js");function w(s){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=o?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}o=p.default.Component,(0,a.default)(k,o),M=w(k),(0,r.default)(k,[{key:"componentDidMount",value:(A=(0,n.default)(i.mark(function e(){var t,s,o,n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,s={},e.next=4,(0,x.getStorage)(C.NAMESPACE+"|host");case 4:return(o=e.sent)&&(s.host=o),e.next=8,(0,x.getStorage)(C.NAMESPACE+"|email");case 8:return(o=e.sent)&&(s.email=o),e.next=12,(0,x.getStorage)(C.NAMESPACE+"|password");case 12:return(n=e.sent)&&(s.password=n),e.next=16,(0,x.getStorage)(C.NAMESPACE+"|isCommonUA");case 16:(n=e.sent)&&(s.isCommonUA=n),this.setState(s,function(){t.reset()}),(0,v.hm)("login/v2","LoginV2");case 20:case"end":return e.stop()}},e,this)})),function(){return A.apply(this,arguments)})},{key:"cookieString",get:function(){var t=this;return Object.keys(this.cookie).map(function(e){return e+"="+t.cookie[e]}).join("; ").trim()}},{key:"renderPreview",value:function(){var e=this;return(0,N.jsx)(P.default,{onLogin:this.onPreviewLogin,onTour:function(){return(0,x.confirm)("将使用开发者的测试账号, 提供大部分功能预览, 确定"+T.default.login()+"? (可以在设置里面退出"+T.default.login()+")",e.onTour,"提示")}})}},{key:"renderForm",value:function(){var t=this,e=this.props.navigation,s=this.state,o=s.host,n=s.email,r=s.password,i=s.captcha,c=s.base64,d=s.isCommonUA,a=s.loading,l=s.info,s=s.failed;return(0,N.jsx)(I.default,{forwardRef:function(e){return t.codeRef=e},navigation:e,email:n,password:r,captcha:i,base64:c,isCommonUA:d,loading:a,info:l,host:o,failed:s,onGetCaptcha:this.getCaptcha,onBlur:this.onBlur,onFocus:this.onFocus,onChange:this.onChange,onSelect:this.onSelect,onUAChange:this.onUAChange,onLogin:this.onLogin})}},{key:"renderContent",value:function(){var e=this,t=this.state,s=t.clicked,t=t.focus;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(f.default,{style:y._.container.flex,children:s?this.renderForm():this.renderPreview()}),s?!t&&(0,N.jsx)(f.default,{style:this.styles.ps,children:(0,N.jsxs)(b.Text,{size:12,lineHeight:14,type:"sub",children:["隐私策略: 我们十分尊重您的隐私, 我们不会收集上述信息. (多次",T.default.login(),"失败后可能一段时间内不能再次",T.default.login(),")"]})}):(0,N.jsxs)(b.Flex,{style:this.styles.old,justify:"around",children:[!S.STORYBOOK&&(0,N.jsxs)(b.Touchable,{onPress:function(){(0,v.t)("登陆.跳转",{to:"Signup"}),(0,x.confirm)("声明: 本APP的性质为第三方，只提供显示数据和简单的操作，没有修复和改变源站业务的能力。 \n\n在移动端浏览器注册会经常遇到验证码错误，碰到错误建议在浏览器里使用 [电脑版UA]，再不行推荐使用电脑Chrome注册。 \n\n注册后会有 [激活码] 发到邮箱，测试过只会发送一次，请务必在激活有效时间内激活，否则这个注册账号就废了。输入激活码前，看见下方的文字改变了再填入，提示服务不可用的请务必等到浏览器加载条完成，不然永远都会说激活码错误。\n\n作者只能帮大家到这里了。",function(){return(0,x.open)(S.HOST+"/signup")},"提示",function(){},"前往注册")},children:[(0,N.jsxs)(b.Flex,{justify:"center",children:[(0,N.jsx)(b.Text,{size:11,type:"sub",bold:!0,children:"注册"}),(0,N.jsx)(b.Iconfont,{style:y._.ml.xxs,name:"md-open-in-new",color:y._.colorSub,size:12})]}),(0,N.jsx)(b.Heatmap,{id:"登陆.跳转",to:"Signup",alias:"注册"})]}),(0,N.jsxs)(b.Touchable,{onPress:function(){(0,v.t)("登陆.跳转",{to:"Privacy"}),(0,x.open)(S.URL_PRIVACY)},children:[(0,N.jsxs)(b.Flex,{justify:"center",children:[(0,N.jsx)(b.Text,{size:11,type:"sub",bold:!0,children:"隐私保护政策"}),(0,N.jsx)(b.Iconfont,{style:y._.ml.xxs,name:"md-open-in-new",color:y._.colorSub,size:12})]}),(0,N.jsx)(b.Heatmap,{id:"登陆.跳转",to:"Privacy",alias:"隐私保护政策"})]}),!S.STORYBOOK&&(0,N.jsxs)(b.Text,{size:11,bold:!0,type:"sub",onPress:function(){(0,v.t)("登陆.跳转",{to:"LoginAssist"}),e.props.navigation.push("LoginAssist")},children:["辅助",T.default.login(),(0,N.jsx)(b.Heatmap,{id:"登陆.跳转",to:"LoginAssist",alias:"辅助登录"})]})]})]})}},{key:"render",value:function(){return(0,N.jsxs)(b.Component,{id:"screen-login-v2",style:y._.container.plain,children:[(0,N.jsx)(b.UM,{title:C.TITLE}),(0,N.jsx)(_.StatusBarPlaceholder,{}),S.STORYBOOK&&(0,N.jsxs)(_.Notice,{style:y._.mv.lg,children:["当前网页版",T.default.login(),"功能尚未实装，本页面仅供查看使用"]}),this.renderContent(),(0,N.jsx)(b.KeyboardSpacer,{topSpacing:y._.ios(-120,0)}),(0,N.jsx)(b.Heatmap,{id:"登陆.登陆",right:y._.wind,bottom:y._.bottom+120,transparent:!0}),(0,N.jsx)(b.Heatmap,{id:"登陆.成功",right:y._.wind,bottom:y._.bottom+86,transparent:!0}),(0,N.jsx)(b.Heatmap,{id:"登陆.错误",right:y._.wind,bottom:y._.bottom+52,transparent:!0}),(0,N.jsx)(b.Heatmap,{id:"登陆",screen:"Login"})]})}},{key:"styles",get:function(){return(0,R.memoStyles)()}}]);var A,M,s=k;function k(){var r;(0,c.default)(this,k);for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return r=M.call.apply(M,[this].concat(s)),(0,m.default)((0,d.default)(r),"state",{host:S.STORYBOOK?E.HOST_PROXY:S.HOST,clicked:!1,email:"",password:"",captcha:"",base64:"",isCommonUA:!1,loading:!1,info:"",focus:!1,failed:!1}),(0,m.default)((0,d.default)(r),"userAgent",""),(0,m.default)((0,d.default)(r),"formhash",""),(0,m.default)((0,d.default)(r),"lastCaptcha",""),(0,m.default)((0,d.default)(r),"cookie",{}),(0,m.default)((0,d.default)(r),"code",""),(0,m.default)((0,d.default)(r),"accessToken",{}),(0,m.default)((0,d.default)(r),"retryCount",0),(0,m.default)((0,d.default)(r),"codeRef",null),(0,m.default)((0,d.default)(r),"onTour",(0,n.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.t)("登陆.游客访问"),e.prev=1,(0,x.info)("正在从github获取游客cookie..."),e.next=5,(0,v.xhrCustom)({url:C.URL_TOURIST});case 5:t=e.sent,t=t._response,t=JSON.parse(t),s=t.accessToken,t=t.userCookie,y.userStore.updateAccessToken(s),s=r.props.navigation,y.userStore.updateUserCookie({cookie:t.cookie,userAgent:t.userAgent,v:0,tourist:1}),(0,x.info)(T.default.login()+"成功, 正在请求个人信息...",6),y.userStore.fetchUserInfo(),y.userStore.fetchUsersInfo(),(0,x.feedback)(),s.popToTop(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(C.NAMESPACE,"onTour",e.t0),(0,x.info)(T.default.login()+"状态过期, 请稍后再试");case 22:case"end":return e.stop()}},e,null,[[1,18]])}))),(0,m.default)((0,d.default)(r),"onPreviewLogin",function(){r.setState({clicked:!0})}),(0,m.default)((0,d.default)(r),"loginFail",(t=(0,n.default)(i.mark(function e(t){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.t)("登陆.错误"),r.setState({loading:!1,info:t,failed:!0}),r.reset();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),(0,m.default)((0,d.default)(r),"onLogin",(0,n.default)(i.mark(function e(){var t,s,o,n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.state,t=o.email,s=o.password,o=o.captcha,t&&s&&o){e.next=4;break}return(0,x.info)("请填写以上字段"),e.abrupt("return");case 4:if(e.prev=4,r.lastCaptcha!==o)return(0,v.t)("登陆.登陆"),"function"==typeof(null==(n=(0,d.default)(r))||null==(n=n.codeRef)||null==(n=n.inputRef)?void 0:n.blur)&&r.codeRef.inputRef.blur(),(0,x.setStorage)(C.NAMESPACE+"|email",t),e.next=11,r.login();e.next=21;break;case 11:if(r.cookie.chii_auth){e.next=14;break}return r.loginFail("验证码或密码错误，稍会再重试或前往授权"+T.default.login()+" →"),e.abrupt("return");case 14:return r.lastCaptcha=o,e.next=17,r.oauth();case 17:return e.next=19,r.authorize();case 19:e.next=23;break;case 21:r.setState({info:"重试 (4/5)"}),r.retryCount+=1;case 23:return e.next=25,r.getAccessToken();case 25:(0,x.setStorage)(C.NAMESPACE+"|password",s),r.inStore(),e.next=37;break;case 29:if(e.prev=29,e.t0=e.catch(4),r.retryCount+=1,r.retryCount>=C.AUTH_RETRY_COUNT)return r.loginFail("["+String(e.t0)+"] "+T.default.login()+"失败，请重试或重启APP，或点击前往旧版授权"+T.default.login()+" →"),e.abrupt("return");e.next=35;break;case 35:console.error("login/v2/index.js","onLogin",e.t0),r.onLogin();case 37:case"end":return e.stop()}},e,null,[[4,29]])}))),(0,m.default)((0,d.default)(r),"getUA",(0,n.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.state.isCommonUA)return t=C.UA_EKIBUN_BANGUMI_APP,r.userAgent=t,e.abrupt("return",t);e.next=5;break;case 5:return e.next=7,j.default.getWebViewUserAgentAsync();case 7:return t=e.sent,r.userAgent=S.STORYBOOK?t:t+" "+(0,x.getTimestamp)(),e.abrupt("return",t);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"getHeaders",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={};return e.includes("User-Agent")&&(t[S.STORYBOOK?"X-User-Agent":"User-Agent"]=r.userAgent),e.includes("Cookie")&&(t[S.STORYBOOK?"X-Cookie":"Cookie"]=r.cookieString),e.includes("Content-Type")&&(t["Content-Type"]="application/x-www-form-urlencoded"),t}),(0,m.default)((0,d.default)(r),"getCookies",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};r.updateCookie(S.STORYBOOK?null==e?void 0:e["x-set-cookie"]:null==e||null==(e=e["set-cookie"])?void 0:e[0])}),(0,m.default)((0,d.default)(r),"getFormHash",(0,n.default)(i.mark(function e(){var t,s,o;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.host,O.default.defaults.withCredentials=!1,e.next=4,(0,O.default)({method:"get",url:t+"/login",headers:r.getHeaders(["User-Agent"])});case 4:return t=e.sent,s=t.data,o=t.headers,r.getCookies(o),(o=s.match(/<input type="hidden" name="formhash" value="(.+?)">/))&&(r.formhash=o[1]),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"getCaptcha",(0,n.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({base64:""}),t=r.state.host,O.default.defaults.withCredentials=!1,e.next=5,(0,O.default)({method:"get",url:t+"/signup/captcha?"+(0,x.getTimestamp)(),headers:r.getHeaders(["User-Agent","Cookie"]),responseType:"arraybuffer"});case 5:return t=e.sent,s=t.request,s=S.STORYBOOK?btoa(String.fromCharCode.apply(null,new Uint8Array(s.response))):s._response,r.setState({base64:"data:image/gif;base64,"+s,captcha:""}),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"login",(0,n.default)(i.mark(function e(){var t,s,o,n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({loading:!0,info:T.default.login()+"请求中...(1/5)"}),t=r.state,s=t.host,o=t.email,n=t.password,t=t.captcha,O.default.defaults.withCredentials=!1,e.next=5,(0,O.default)({method:"post",url:s+"/FollowTheRabbit",headers:r.getHeaders(["User-Agent","Cookie","Content-Type"]),data:(0,x.urlStringify)({formhash:r.formhash,referer:"",dreferer:"",email:o,password:n,captcha_challenge_field:t,loginsubmit:"登录"})});case 5:return s=e.sent,o=s.data,n=s.headers,o.includes("分钟内您将不能登录本站")?(0,x.info)("累计 5 次错误尝试，15 分钟内您将不能"+T.default.login()+"本站。"):r.getCookies(n),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"oauth",(0,n.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({info:"获取授权表单码...(2/5)"}),t=r.state.host,O.default.defaults.withCredentials=!1,e.next=5,(0,O.default)({method:"get",url:t+"/oauth/authorize?client_id="+S.APP_ID+"&response_type=code&redirect_uri="+S.URL_OAUTH_REDIRECT,headers:r.getHeaders(["User-Agent","Cookie"])});case 5:return t=e.sent,s=t.data,r.formhash=h.default.load(s)("input[name=formhash]").attr("value"),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"authorize",(0,n.default)(i.mark(function e(){var t,s;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({info:"授权中...(3/5)"}),t=r.state.host,O.default.defaults.withCredentials=!1,e.next=5,(0,O.default)({method:"post",maxRedirects:0,validateStatus:null,url:t+"/oauth/authorize?client_id="+S.APP_ID+"&response_type=code&redirect_uri="+S.URL_OAUTH_REDIRECT,headers:r.getHeaders(["User-Agent","Cookie","Content-Type"]),data:(0,x.urlStringify)({formhash:r.formhash,redirect_uri:"",client_id:S.APP_ID,submit:"授权"})});case 5:return t=e.sent,s=t.request,r.code=null==s||null==(s=s.responseURL)?void 0:s.split("=").slice(1).join("="),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"getAccessToken",(0,n.default)(i.mark(function e(){var t,s,o;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({info:"授权成功, 获取token中...(4/5)"}),t=r.state.host,O.default.defaults.withCredentials=!1,e.next=5,(0,O.default)({method:"post",maxRedirects:0,validateStatus:null,url:t+"/oauth/access_token",headers:r.getHeaders(["User-Agent","Content-Type"]),data:(0,x.urlStringify)({grant_type:"authorization_code",client_id:S.APP_ID,client_secret:S.APP_SECRET,code:r.code,redirect_uri:S.URL_OAUTH_REDIRECT,state:(0,x.getTimestamp)()})});case 5:if(t=e.sent,s=t.status,o=t.data,200!==s)throw new TypeError(s);e.next=10;break;case 10:return r.accessToken=o,e.abrupt("return",!0);case 12:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"updateCookie",function(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";["__cfduid","chii_sid","chii_sec_id","chii_cookietime","chii_auth"].forEach(function(e){var t=new RegExp(e+"=(.+?);"),t=s.match(t);t&&(r.cookie[e]=t[1])})}),(0,m.default)((0,d.default)(r),"inStore",(0,n.default)(i.mark(function e(){var t;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({info:T.default.login()+"成功, 正在请求个人信息...(5/5)"}),t=r.props.navigation,y.userStore.updateUserCookie({cookie:r.cookieString,userAgent:r.userAgent,v:0}),y.userStore.updateAccessToken(r.accessToken),(0,x.feedback)(),t.popToTop(),(0,v.t)("登陆.成功"),(0,v.queue)([function(){return y.userStore.fetchUserInfo()},function(){return y.userStore.fetchUsersInfo()},function(){return y.usersStore.fetchFriends()},function(){return y.rakuenStore.downloadFavorTopic()}],1);case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"reset",(0,n.default)(i.mark(function e(){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.cookie={},r.setState({base64:""}),r.retryCount=0,e.next=5,r.getUA();case 5:return e.next=7,r.getFormHash();case 7:return e.next=9,r.getCaptcha();case 9:case"end":return e.stop()}},e)}))),(0,m.default)((0,d.default)(r),"onFocus",function(){r.setState({focus:!0})}),(0,m.default)((0,d.default)(r),"onBlur",function(){r.setState({focus:!1})}),(0,m.default)((0,d.default)(r),"onChange",function(e,t){e=e.nativeEvent.text;r.setState((0,m.default)((0,m.default)({},t,e),"info",""))}),(0,m.default)((0,d.default)(r),"onSelect",function(e){(0,x.setStorage)(C.NAMESPACE+"|host",e),r.setState({host:e},function(){(0,v.t)("登陆.切换域名",{host:e}),r.reset()})}),(0,m.default)((0,d.default)(r),"onUAChange",function(){var e=!r.state.isCommonUA;(0,x.setStorage)(C.NAMESPACE+"|isCommonUA",e),r.setState({isCommonUA:e}),r.reset()}),r}t.default=(0,g.ob)(s);try{v2.displayName="v2",v2.__docgenInfo={description:"",displayName:"v2",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/login/v2/index.tsx#v2"]={docgenInfo:v2.__docgenInfo,name:"v2",path:"src/screens/login/v2/index.tsx#v2"})}catch(e){}},"./src/screens/login/v2/preview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(s("./node_modules/react/index.js")),o(s("./node_modules/react-native-web/dist/exports/View/index.js"))),r=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),c=s("./src/utils/decorators/index.ts"),d=s("./src/constants/index.ts"),a=o(s("./src/constants/i18n/index.ts")),l=s("./src/screens/login/v2/preview/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,c.ob)(function(e){var t=void 0===(t=e.onLogin)?function(){}:t,e=void 0===(e=e.onTour)?function(){}:e,s=d.STORYBOOK?r.Page:n.default;return(0,u.jsxs)(s,{style:i._.container.column,children:[(0,u.jsx)(r.Mesume,{}),(0,u.jsxs)(n.default,{style:l.styles.bottomContainer,children:[(0,u.jsxs)(r.Button,{type:"main",shadow:!0,onPress:t,children:[d.STORYBOOK?"":"账号",a.default.login()]}),(0,u.jsxs)(n.default,{style:i._.mt.md,children:[d.STORYBOOK?(0,u.jsx)(r.Button,{type:"plain",shadow:!0,onPress:function(){open(d.HOST+"/signup")},children:"注册"}):(0,u.jsx)(r.Button,{type:"plain",shadow:!0,onPress:e,children:"游客预览"}),(0,u.jsx)(r.Heatmap,{id:"登陆.游客访问"})]})]})]})});try{preview.displayName="preview",preview.__docgenInfo={description:"",displayName:"preview",props:{onLogin:{defaultValue:null,description:"",name:"onLogin",required:!1,type:{name:"() => void"}},onTour:{defaultValue:null,description:"",name:"onTour",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/login/v2/preview/index.tsx#preview"]={docgenInfo:preview.__docgenInfo,name:"preview",path:"src/screens/login/v2/preview/index.tsx#preview"})}catch(e){}},"./src/screens/login/v2/preview/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({bottomContainer:{width:s._.r(300),height:400,marginTop:s._.lg}})},"./src/screens/login/v2/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var o=s("./src/stores/index.ts");t.memoStyles=o._.memoStyles(function(){return{old:{position:"absolute",zIndex:1,bottom:o._.bottom,left:o._.wind,right:o._.wind,padding:o._.sm},ps:{position:"absolute",right:2*o._.wind,bottom:o._.bottom,left:2*o._.wind},border:{borderLeftWidth:1,borderColor:o._.colorBorder}}})}}]);