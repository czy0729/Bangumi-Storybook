(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7419],{"./src/screens/tinygrail/ico-deal/component/bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/tinygrail/ico-deal/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Bar")},"./src/screens/tinygrail/ico-deal/component/bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("./node_modules/react/index.js"));var o=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),i=s("./src/utils/index.ts"),d=s("./src/utils/decorators/index.ts"),l=s("./src/screens/tinygrail/_/utils.ts"),a=s("./src/screens/tinygrail/ico-deal/component/bar/ds.ts"),c=s("./src/screens/tinygrail/ico-deal/component/bar/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,d.ob)((function(e){var t=e.style,s=e.total,r=void 0===s?0:s,d=e.level,a=e.next,m=void 0===a?1:a,p=(0,c.memoStyles)(),y=(0,i.toFixed)(r/m*100,0);return(0,u.jsxs)(o.default,{style:(0,i.stl)(p.ico,t),children:[(0,u.jsxs)(n.Text,{style:p.iconText,type:"tinygrailPlain",align:"center",shadow:!0,children:["lv.",d," ",y,"%"]}),(0,u.jsx)(o.default,{style:[p.icoBar,p.icoBarDark],children:(0,u.jsx)(o.default,{style:[p.icoProcess,{width:y+"%",backgroundColor:(0,l.getLevelBackground)(d)}]})})]})}),a.COMPONENT);try{bar.displayName="bar",bar.__docgenInfo={description:"",displayName:"bar",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"ViewStyle"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"number"}},level:{defaultValue:null,description:"",name:"level",required:!0,type:{name:"number"}},next:{defaultValue:null,description:"",name:"next",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/ico-deal/component/bar/index.tsx#bar"]={docgenInfo:bar.__docgenInfo,name:"bar",path:"src/screens/tinygrail/ico-deal/component/bar/index.tsx#bar"})}catch(e){}},"./src/screens/tinygrail/ico-deal/component/bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{ico:{height:24},icoBar:{width:"100%",height:24,backgroundColor:r._.colorBorder,borderRadius:12,overflow:"hidden"},icoBarDark:{backgroundColor:r._.colorTinygrailBorder},icoProcess:{height:24,borderRadius:12,overflow:"hidden"},iconText:{position:"absolute",zIndex:1,top:3,right:0,left:0}}}))},"./src/screens/tinygrail/ico-deal/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/tinygrail/ico-deal/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Component")},"./src/screens/tinygrail/ico-deal/component/info/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_SIZE=t.COMPONENT=void 0;var r=s("./src/stores/index.ts"),o=s("./src/utils/dev/index.ts"),n=s("./src/screens/tinygrail/ico-deal/component/ds.ts");t.COMPONENT=(0,o.rc)(n.COMPONENT,"Info"),t.MAX_SIZE=r._.window.width/3},"./src/screens/tinygrail/ico-deal/component/info/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("./node_modules/react/index.js"));var o=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),c=r(s("./src/screens/tinygrail/ico-deal/component/bar/index.tsx")),u=s("./src/screens/tinygrail/ico-deal/component/info/ds.ts"),m=s("./src/screens/tinygrail/ico-deal/component/info/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var s=t.$,r=t.navigation,l=(0,m.memoStyles)(),y=s.chara,f=y.icon,j=y.monoId,x=y.name,_=y.total,g=y.end,b=void 0===g?"":g,h=y.bonus,O=(0,d.caculateICO)(s.chara),v=O.next,T=O.level,S=O.price,C=O.amount,N=(0,d.getTimestamp)(b.replace("T"," ")),P={id:"ICO交易.封面图查看",data:{monoId:j}};return(0,p.jsxs)(o.default,{style:l.container,children:[!!f&&(0,p.jsx)(n.Flex,{justify:"center",children:(0,p.jsx)(n.Image,{src:(0,d.tinygrailOSS)((0,d.getCoverLarge)(f),150),autoSize:u.MAX_SIZE,imageViewer:!0,imageViewerSrc:(0,d.tinygrailOSS)((0,d.getCoverLarge)(f),480),skeletonType:"tinygrail",event:P})}),(0,p.jsx)(n.Touchable,{style:i._.mt.md,onPress:function(){(0,a.t)("ICO交易.跳转",{to:"Mono",monoId:j}),r.push("Mono",{monoId:"character/"+j,_name:x})},children:(0,p.jsxs)(n.Flex,{justify:"center",children:[(0,p.jsxs)(n.Text,{type:"tinygrailPlain",size:15,bold:!0,children:["#",j," -"]}),!!T&&(0,p.jsxs)(n.Text,{type:"ask",size:15,bold:!0,children:[" ","lv",T," "]}),(0,p.jsx)(n.Text,{type:"tinygrailPlain",size:15,bold:!0,children:(0,d.HTMLDecode)(x)}),!!h&&(0,p.jsxs)(n.Text,{type:"warning",size:15,bold:!0,children:[" ","x",h]}),(0,p.jsx)(n.Iconfont,{name:"md-navigate-next",color:i._.colorTinygrailText})]})}),(0,p.jsxs)(n.Flex,{style:i._.mt.sm,justify:"center",children:[(0,p.jsxs)(n.Text,{type:"tinygrailText",size:15,children:["剩余时间:"," "]}),(0,p.jsx)(n.CountDown,{style:{color:i._.colorTinygrailText},size:15,end:N})]}),(0,p.jsxs)(n.Text,{style:i._.mt.md,type:"tinygrailPlain",align:"center",children:["已筹",(0,p.jsxs)(n.Text,{type:"warning",children:[" ",(0,d.formatNumber)(_,0,s.short)]})," / 下一等级需要"," ",(0,d.formatNumber)(v,0,s.short)]}),(0,p.jsxs)(n.Text,{style:i._.mt.sm,type:"tinygrailPlain",align:"center",children:["预计发行量: 约 ",(0,d.formatNumber)(C,0,s.short)," 股 / 发行价 ₵",(0,d.formatNumber)(S)]}),(0,p.jsx)(c.default,{style:i._.mt.md,total:_,level:T,next:v})]})}),u.COMPONENT);try{info.displayName="info",info.__docgenInfo={description:"",displayName:"info",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/ico-deal/component/info/index.tsx#info"]={docgenInfo:info.__docgenInfo,name:"info",path:"src/screens/tinygrail/ico-deal/component/info/index.tsx#info"})}catch(e){}},"./src/screens/tinygrail/ico-deal/component/info/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingTop:r._.sm,paddingHorizontal:r._.wind,paddingBottom:r._.md}}}))},"./src/screens/tinygrail/ico-deal/component/initial/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/tinygrail/ico-deal/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Initial"),t.EVENT={id:"ICO交易.跳转"}},"./src/screens/tinygrail/ico-deal/component/initial/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("./node_modules/react/index.js"));var o=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),a=r(s("./src/screens/tinygrail/_/rank/index.tsx")),c=s("./src/screens/tinygrail/ico-deal/component/initial/ds.ts"),u=s("./src/screens/tinygrail/ico-deal/component/initial/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var s=t.$,r=t.navigation,l=(0,u.memoStyles)(),p=s.chara.users,y=s.initial.list,f=(0,d.caculateICO)(s.chara).nextUser;return(0,m.jsxs)(o.default,{style:l.container,children:[(0,m.jsxs)(n.Text,{type:"tinygrailPlain",size:12,lineHeight:16,children:[(0,m.jsxs)(n.Text,{type:"warning",size:16,children:["参与者 ",p]})," ","/ ",f]}),(0,m.jsx)(n.Flex,{style:i._.mt.sm,wrap:"wrap",children:y.map((function(e,t){return(0,m.jsxs)(n.Flex,{style:l.item,children:[(0,m.jsx)(n.Avatar,{navigation:r,src:(0,d.tinygrailOSS)(e.avatar),size:32,userId:e.name,name:e.nickName,borderColor:"transparent",skeletonType:"tinygrail",event:c.EVENT}),(0,m.jsxs)(n.Flex.Item,{style:i._.ml.sm,children:[(0,m.jsxs)(n.Flex,{children:[(0,m.jsx)(a.default,{value:e.lastIndex}),(0,m.jsx)(n.Text,{type:"tinygrailPlain",size:12,bold:!0,numberOfLines:1,children:e.nickName})]}),!!e.amount&&(0,m.jsxs)(n.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:["+",(0,d.formatNumber)(e.amount,0,s.short)]})]})]},t)}))})]})}),c.COMPONENT);try{initial.displayName="initial",initial.__docgenInfo={description:"",displayName:"initial",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/ico-deal/component/initial/index.tsx#initial"]={docgenInfo:initial.__docgenInfo,name:"initial",path:"src/screens/tinygrail/ico-deal/component/initial/index.tsx#initial"})}catch(e){}},"./src/screens/tinygrail/ico-deal/component/initial/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingHorizontal:r._.wind,paddingBottom:r._.bottom,marginTop:r._.md},item:{width:"47%",paddingVertical:r._.sm,paddingRight:r._.md,marginRight:"3%"}}}))},"./src/screens/tinygrail/ico-deal/component/scroll/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/tinygrail/ico-deal/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Scroll")},"./src/screens/tinygrail/ico-deal/component/scroll/index.tsx":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=g(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,s&&s.set(e,r),r}(s("./node_modules/react/index.js")),l=o(s("./node_modules/react-native-web/dist/exports/RefreshControl/index.js")),a=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/dev/index.ts"),m=s("./src/utils/hooks/index.ts"),p=s("./src/screens/tinygrail/styles.ts"),y=o(s("./src/screens/tinygrail/ico-deal/component/info/index.tsx")),f=o(s("./src/screens/tinygrail/ico-deal/component/initial/index.tsx")),j=o(s("./src/screens/tinygrail/ico-deal/component/slider/index.tsx")),x=s("./src/screens/tinygrail/ico-deal/component/scroll/ds.ts"),_=s("./node_modules/react/jsx-runtime.js");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(g=function(e){return e?s:t})(e)}function b(e){var t=e.onRefresh;(0,u.r)(x.COMPONENT);var s=(0,d.useState)(!1),o=(0,i.default)(s,2),g=o[0],b=o[1],h=(0,d.useCallback)((function(){b(!0),setTimeout((0,n.default)(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:setTimeout((function(){b(!1)}),1200);case 3:case"end":return e.stop()}}),e)}))),0)}),[]);return(0,m.useObserver)((function(){return(0,_.jsxs)(a.ScrollView,{refreshControl:(0,_.jsx)(l.default,Object.assign({},p.refreshControlProps,{progressBackgroundColor:c._.select(c._.colorPlain,c._._colorDarkModeLevel2),colors:[c._.colorMain],refreshing:g,onRefresh:h})),scrollToTop:!0,children:[(0,_.jsx)(y.default,{}),(0,_.jsx)(j.default,{}),(0,_.jsx)(f.default,{})]})}))}t.default=b;try{b.displayName="Scroll",b.__docgenInfo={description:"",displayName:"Scroll",props:{onRefresh:{defaultValue:null,description:"",name:"onRefresh",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/ico-deal/component/scroll/index.tsx#Scroll"]={docgenInfo:b.__docgenInfo,name:"Scroll",path:"src/screens/tinygrail/ico-deal/component/scroll/index.tsx#Scroll"})}catch(e){}},"./src/screens/tinygrail/ico-deal/component/slider/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/tinygrail/ico-deal/component/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Slider")},"./src/screens/tinygrail/ico-deal/component/slider/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("./node_modules/react/index.js"));var o=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),n=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),a=s("./src/screens/tinygrail/ico-deal/component/slider/ds.ts"),c=s("./src/screens/tinygrail/ico-deal/component/slider/styles.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.obc)((function(e,t){var s=t.$,r=(0,c.memoStyles)(),l=s.state,a=l.loading,m=l.amount,p=s.assets.balance;return(0,u.jsxs)(o.default,{style:r.container,children:[(0,u.jsxs)(n.Flex,{children:[(0,u.jsx)(n.Flex.Item,{children:(0,u.jsx)(o.default,{style:r.inputWrap,children:(0,u.jsx)(n.Input,{style:r.input,keyboardType:"numeric",value:String(m),onChangeText:s.changeAmount})})}),(0,u.jsx)(o.default,{style:[r.btnSubmit,i._.ml.md],children:(0,u.jsx)(n.Button,{style:r.btnRoot,type:"bid",radius:!1,loading:a,onPress:s.doSubmit,children:"确定"})})]}),(0,u.jsx)(n.Flex,{style:r.slider,children:(0,u.jsx)(o.default,{style:i._.container.block,children:(0,u.jsx)(n.Slider,{value:m,min:5e3,max:p<5e3?5e3:Number(p),step:1e3,minimumTrackTintColor:i._.colorBid,maximumTrackTintColor:i._.colorTinygrailBorder,onChange:(0,d.debounce)((function(e){return s.changeAmount(e<5e3?5e3:e)}))})})}),(0,u.jsxs)(n.Flex,{children:[(0,u.jsx)(n.Flex.Item,{children:(0,u.jsxs)(n.Text,{type:"tinygrailText",size:12,children:["余额 ",(0,d.formatNumber)(5e3,0)]})}),(0,u.jsx)(n.Text,{type:"tinygrailText",size:12,children:(0,d.formatNumber)(p<5e3?5e3:p,0,s.short)})]})]})}),a.COMPONENT);try{slider.displayName="slider",slider.__docgenInfo={description:"",displayName:"slider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/ico-deal/component/slider/index.tsx#slider"]={docgenInfo:slider.__docgenInfo,name:"slider",path:"src/screens/tinygrail/ico-deal/component/slider/index.tsx#slider"})}catch(e){}},"./src/screens/tinygrail/ico-deal/component/slider/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles((function(){return{container:{paddingVertical:r._.md,paddingHorizontal:r._.wind,marginTop:r._.sm,backgroundColor:r._.colorTinygrailBg},inputWrap:{paddingLeft:4,borderColor:r._.colorTinygrailBorder,borderWidth:1},input:{height:34,color:r._.colorTinygrailPlain,backgroundColor:"transparent",borderWidth:0,borderRadius:0},balance:{marginTop:16},slider:{height:40,marginTop:r._.sm,opacity:.8},btnSubmit:{width:96},btnRoot:{height:36}}}))},"./src/screens/tinygrail/ico-deal/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.STATE=t.COMPONENT=void 0;t.COMPONENT="TinygrailICODeal",t.STATE={loading:!1,amount:5e3,_loaded:0}},"./src/screens/tinygrail/ico-deal/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),o=s("./src/screens/tinygrail/ico-deal/ds.ts");t.COMPONENT=(0,r.rc)(o.COMPONENT,"Header")},"./src/screens/tinygrail/ico-deal/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("./node_modules/react/index.js"));var o=s("./src/components/index.ts"),n=s("./src/utils/decorators/index.ts"),i=s("./src/screens/tinygrail/ico-deal/header/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)((function(e,t){var s=t.$;return(0,d.jsx)(o.Header,{title:"ICO",hm:["tinygrail/ico/deal/"+s.monoId,"TinygrailICODeal"],statusBarEvents:!1,statusBarEventsType:"Tinygrail"})}),i.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/ico-deal/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/tinygrail/ico-deal/header/index.tsx#header"})}catch(e){}},"./src/screens/tinygrail/ico-deal/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useTinygrailICODealPage=function(e){var t=e.$;(0,r.useRunAfter)((function(){t.init()}))};var r=s("./src/utils/hooks/index.ts")},"./src/screens/tinygrail/ico-deal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(s("./node_modules/react/index.js"));var o=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),d=s("./src/utils/hooks/index.ts"),l=r(s("./src/screens/tinygrail/ico-deal/component/scroll/index.tsx")),a=r(s("./src/screens/tinygrail/ico-deal/header/index.tsx")),c=s("./src/screens/tinygrail/ico-deal/hooks.ts"),u=r(s("./src/screens/tinygrail/ico-deal/store.ts")),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(u.default,(function(e,t){(0,c.useTinygrailICODealPage)(t);var s=t.$;return(0,d.useObserver)((function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.default,{}),(0,m.jsx)(o.Page,{style:n._.container.tinygrail,children:(0,m.jsx)(l.default,{onRefresh:s.refresh})})]})}))}));try{icodeal.displayName="icodeal",icodeal.__docgenInfo={description:"",displayName:"icodeal",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/ico-deal/index.tsx#icodeal"]={docgenInfo:icodeal.__docgenInfo,name:"icodeal",path:"src/screens/tinygrail/ico-deal/index.tsx#icodeal"})}catch(e){}},"./src/screens/tinygrail/ico-deal/store.ts":(e,t,s)=>{var r=s("./node_modules/@babel/runtime/regenerator/index.js");s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=o(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=o(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=o(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=o(s("./node_modules/@babel/runtime/helpers/inherits.js")),u=o(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=o(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),y=o(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),f=s("./node_modules/mobx/dist/mobx.esm.js"),j=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),_=s("./src/utils/fetch/index.ts"),g=o(s("./src/utils/store/index.ts")),b=s("./src/screens/tinygrail/ico-deal/ds.ts");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return(0,u.default)(this,s)}}t.default=(n=function(e){(0,c.default)(s,e);var t=h(s);function s(){var e;(0,d.default)(this,s);for(var o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n)),(0,p.default)((0,a.default)(e),"params",void 0),(0,p.default)((0,a.default)(e),"state",(0,f.observable)(b.STATE)),(0,p.default)((0,a.default)(e),"prev",void 0),(0,p.default)((0,a.default)(e),"init",(function(){var t=e.state._loaded,s=(0,x.getTimestamp)(),r=!t||s-t>60;return e.setState({_loaded:r?s:t}),!r||e.refresh()})),(0,p.default)((0,a.default)(e),"refresh",(0,i.default)(r.mark((function t(){var s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([j.tinygrailStore.fetchCharacters([e.monoId]),j.tinygrailStore.fetchAssets()]);case 2:return s=e.chara.id,t.abrupt("return",j.tinygrailStore.fetchInitial(s));case 4:case"end":return t.stop()}}),t)})))),(0,p.default)((0,a.default)(e),"doSubmit",(0,i.default)(r.mark((function t(){var s,o,n,i,d,l,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.state,o=s.loading,n=s.amount,!o){t.next=3;break}return t.abrupt("return");case 3:if(n&&!(n<5e3)){t.next=6;break}return(0,x.info)("必须大于5000"),t.abrupt("return");case 6:return e.setState({loading:!0}),i=e.chara,d=i.id,l=i.monoId,(0,_.t)("ICO交易.注资",{monoId:l,amount:n}),t.next=11,j.tinygrailStore.doJoin({id:d,amount:n});case 11:if(a=t.sent,(0,x.feedback)(),a){t.next=17;break}return(0,x.info)("注资失败"),e.setState({loading:!1}),t.abrupt("return");case 17:(0,x.info)("注资成功"),e.setState({amount:5e3,loading:!1}),e.refresh();case 20:case"end":return t.stop()}}),t)})))),(0,p.default)((0,a.default)(e),"moneyNatural",(function(t){return t&&!/^(([1-9]\d*)|0)(\.\d{0,1}?)?$/.test(t)?"."===t?"0.":t?e.prev:"":(e.prev=t,t)})),(0,p.default)((0,a.default)(e),"changeAmount",(function(t){var s=parseInt(t);isNaN(s)&&(s=0),e.setState({amount:s})})),e}return(0,l.default)(s,[{key:"short",get:function(){return j.systemStore.setting.xsbShort}},{key:"monoId",get:function(){var e=this.params.monoId;return(void 0===e?"":e).replace("character/","")}},{key:"chara",get:function(){return j.tinygrailStore.characters(this.monoId)}},{key:"assets",get:function(){return j.tinygrailStore.assets}},{key:"initial",get:function(){var e=this.chara.id;return j.tinygrailStore.initial(e)}},{key:"userInfo",get:function(){return j.userStore.userInfo}}]),s}(g.default),(0,y.default)(n.prototype,"short",[f.computed],Object.getOwnPropertyDescriptor(n.prototype,"short"),n.prototype),(0,y.default)(n.prototype,"monoId",[f.computed],Object.getOwnPropertyDescriptor(n.prototype,"monoId"),n.prototype),(0,y.default)(n.prototype,"chara",[f.computed],Object.getOwnPropertyDescriptor(n.prototype,"chara"),n.prototype),(0,y.default)(n.prototype,"assets",[f.computed],Object.getOwnPropertyDescriptor(n.prototype,"assets"),n.prototype),(0,y.default)(n.prototype,"initial",[f.computed],Object.getOwnPropertyDescriptor(n.prototype,"initial"),n.prototype),(0,y.default)(n.prototype,"userInfo",[f.computed],Object.getOwnPropertyDescriptor(n.prototype,"userInfo"),n.prototype),n)}}]);