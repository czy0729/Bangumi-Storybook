(self.webpackChunkweb=self.webpackChunkweb||[]).push([[1719],{"./src/screens/user/origin-setting/component/cloud/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"Cloud")},"./src/screens/user/origin-setting/component/cloud/hooks.ts":(e,s,t)=>{var n=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.number.to-fixed.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.useCloud=function(){var e=(0,d.useState)(""),s=(0,i.default)(e,2),t=s[0],r=s[1];return(0,a.useMount)((function(){setTimeout((0,o.default)(n.mark((function e(){var s,t,o,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=c.userStore.userInfo.id){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,m.get)("origin_"+s);case 6:if(!(t=e.sent)){e.next=10;break}return r((0,u.date)("y-m-d H:i",null==t?void 0:t.ts)),e.abrupt("return");case 10:return e.next=12,(0,l.read)({path:"origin/"+s+".json"});case 12:o=e.sent,i=o.content,r((((null==i?void 0:i.length)||0)/1e3).toFixed(1)+" kb"),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])}))),2400)})),t};var o=r(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=r(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),d=t("./node_modules/react/index.js"),c=t("./src/stores/index.ts"),u=t("./src/utils/index.ts"),l=t("./src/utils/db/index.ts"),a=t("./src/utils/hooks/index.ts"),m=t("./src/utils/kv/index.ts")},"./src/screens/user/origin-setting/component/cloud/index.tsx":(e,s,t)=>{var n=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/web.timers.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=r(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=(r(t("./node_modules/react/index.js")),t("./src/components/index.ts")),d=t("./src/screens/_/index.ts"),c=t("./src/stores/index.ts"),u=t("./src/utils/index.ts"),l=t("./src/utils/dev/index.ts"),a=t("./src/utils/fetch/index.ts"),m=t("./src/utils/hooks/index.ts"),p=r(t("./src/constants/i18n/index.ts")),f=t("./src/screens/user/origin-setting/utils.ts"),g=t("./src/screens/user/origin-setting/component/cloud/hooks.ts"),j=t("./src/screens/user/origin-setting/component/cloud/ds.ts"),x=t("./src/screens/user/origin-setting/component/cloud/styles.ts"),y=t("./node_modules/react/jsx-runtime.js");s.default=function(e){var s=e.isLogin,t=e.active,r=e.onToggle,_=e.onDownloaded;(0,l.r)(j.COMPONENT);var b=(0,g.useCloud)();return(0,m.useObserver)((function(){var e=c.systemStore.setting.focusOrigin;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(d.ItemSettingBlock,{style:x.styles.container,title:"同步设置",size:20,children:[(0,y.jsx)(d.ItemSettingBlock.Item,{icon:"md-ios-share",iconStyle:{transform:[{rotate:"180deg"}]},title:"下载",information:b||!s&&"需"+p.default.login(),onPress:function(){if(!s)return(0,u.info)("下载需先"+p.default.login());setTimeout((function(){(0,u.confirm)("确定恢复到云端的设置?",(0,o.default)(n.mark((function e(){var s,t;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,u.loading)("下载中..."),e.next=3,c.subjectStore.downloadOrigin();case 3:t=e.sent,s(),(0,u.feedback)(),(0,u.info)(t?"已恢复":"下载失败"),t&&(_(),(0,a.t)("自定义源头.下载"));case 8:case"end":return e.stop()}}),e)}))))}),160)}}),(0,y.jsx)(d.ItemSettingBlock.Item,{style:c._.ml.md,icon:"md-ios-share",title:"上传",information:!s&&"需"+p.default.login(),onPress:function(){if(!s)return(0,u.info)("上传需先"+p.default.login());setTimeout((function(){(0,u.confirm)("确定上传当前设置到云端?",(0,o.default)(n.mark((function e(){var s,t;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,u.loading)("上传中..."),e.next=3,c.subjectStore.uploadOrigin();case 3:t=e.sent,s(),(0,u.feedback)(),(0,u.info)(t?"已上传":"上传失败，云服务异常，请待作者修复"),t&&(0,a.t)("自定义源头.上传");case 8:case"end":return e.stop()}}),e)}))))}),160)}})]}),(0,y.jsx)(d.ItemSetting,{style:x.styles.item,contentStyle:x.styles.content,hd:"突出显示源头按钮",ft:(0,y.jsx)(i.SwitchPro,{style:x.styles.switch,value:e,onSyncPress:function(){(0,a.t)("设置.切换",{title:" 突出源头按钮",checked:!e}),c.systemStore.switchSetting("focusOrigin")}}),thumb:(0,f.getYuqueThumbs)(["0/2024/png/386799/1705044747998-45792520-30b5-4079-8889-1eb471b977b1.png","0/2024/png/386799/1705044615611-9e2bf83f-d563-4e85-89c8-5a1136a08e6d.png"])}),(0,y.jsx)(d.ItemSetting,{style:x.styles.item,contentStyle:x.styles.content,hd:"显示所有项",ft:(0,y.jsx)(i.SwitchPro,{style:x.styles.switch,value:t,onSyncPress:r},t)}),(0,y.jsx)(i.Divider,{})]})}))};try{cloud.displayName="cloud",cloud.__docgenInfo={description:"",displayName:"cloud",props:{isLogin:{defaultValue:null,description:"",name:"isLogin",required:!0,type:{name:"any"}},active:{defaultValue:null,description:"",name:"active",required:!0,type:{name:"any"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"any"}},onDownloaded:{defaultValue:null,description:"",name:"onDownloaded",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/origin-setting/component/cloud/index.tsx#cloud"]={docgenInfo:cloud.__docgenInfo,name:"cloud",path:"src/screens/user/origin-setting/component/cloud/index.tsx#cloud"})}catch(e){}},"./src/screens/user/origin-setting/component/cloud/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var n=t("./src/stores/index.ts");s.styles=n._.create({container:{paddingHorizontal:0,marginBottom:n._.md},item:{paddingLeft:0},content:{paddingRight:0},switch:{marginRight:-4,transform:[{scale:n._.device(.8,1.12)}]}})},"./src/screens/user/origin-setting/component/create/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"Create")},"./src/screens/user/origin-setting/component/create/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;n(t("./node_modules/react/index.js"));var r=t("./src/components/index.ts"),o=t("./src/stores/index.ts"),i=t("./src/utils/decorators/index.ts"),d=n(t("./src/screens/user/origin-setting/component/form/index.tsx")),c=t("./src/screens/user/origin-setting/component/create/ds.ts"),u=t("./src/screens/user/origin-setting/component/create/styles.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=e.type,n=e.name,i=s.$,c=i.state.edit;return c.type===t&&""===c.item.id&&""===c.item.uuid?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.Text,{style:o._.mt.md,size:15,bold:!0,children:["添加",n,"源头"]}),(0,l.jsx)(d.default,{style:o._.mt.md,name:c.item.name,url:c.item.url})]}):(0,l.jsxs)(r.Button,{style:u.styles.btn,type:o._.select("ghostPlain","plain"),onPress:function(){return i.openEdit(t,{id:"",uuid:"",name:"",url:"",sort:0,active:1})},children:["添加",n,"源头"]})}),c.COMPONENT)},"./src/screens/user/origin-setting/component/create/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var n=t("./src/stores/index.ts");s.styles=n._.create({btn:{marginVertical:n._.md}})},"./src/screens/user/origin-setting/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"Component")},"./src/screens/user/origin-setting/component/form/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"Form")},"./src/screens/user/origin-setting/component/form/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;n(t("./node_modules/react/index.js"));var r=n(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),c=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),l=t("./src/screens/user/origin-setting/component/form/ds.ts"),a=t("./src/screens/user/origin-setting/component/form/styles.ts"),m=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.style,n=void 0===t?void 0:t,u=e.name,l=void 0===u?"":u,p=e.url,f=void 0===p?"":p,g=e.isBase,j=void 0!==g&&g,x=s.$,y=(0,a.memoStyles)(),_=x.state.edit;return(0,m.jsxs)(o.Flex,{style:(0,c.stl)(y.form,n),align:"end",children:[(0,m.jsxs)(o.Flex.Item,{children:[(0,m.jsxs)(o.Text,{size:13,bold:!0,children:["名字",j&&(0,m.jsxs)(o.Text,{type:"sub",size:10,lineHeight:13,bold:!0,children:["  ","默认项不允许修改"]})]}),(0,m.jsx)(o.Input,{style:[y.input,d._.mt.sm],defaultValue:String(l),placeholder:"菜单显示名称，唯一",editable:!j,onChangeText:function(e){return x.onChangeText("name",e)}}),(0,m.jsxs)(o.Text,{style:d._.mt.md,size:13,bold:!0,children:["网址",j&&(0,m.jsxs)(o.Text,{type:"sub",size:10,lineHeight:13,bold:!0,children:["  ","默认项不允许修改"]})]}),(0,m.jsxs)(o.Text,{style:d._.mt.xs,type:"sub",size:10,lineHeight:13,bold:!0,children:["支持参数：",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[CN]"})," ","会被替换成条目中文名，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[JP]"})," ","日文名，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[CN_S2T]"})," ","中文繁体名，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[TIME]"})," ","时间戳，",(0,m.jsx)(o.Text,{type:"warning",size:10,lineHeight:13,bold:!0,children:"[ID]"})," ","bgm条目id"]}),(0,m.jsx)(o.Input,{style:d._.mt.sm,defaultValue:String(f),multiline:!0,numberOfLines:4,textAlignVertical:"top",placeholder:"https://",editable:!j,onChangeText:function(e){return x.onChangeText("url",e)}}),(0,m.jsx)(o.Text,{style:d._.mt.md,size:13,bold:!0,children:"排序"}),(0,m.jsx)(o.Text,{style:d._.mt.xs,type:"sub",size:10,lineHeight:13,bold:!0,children:"数字，越大越前，选填"}),(0,m.jsx)(o.Input,{style:[y.input,d._.mt.sm],value:String(_.item.sort),keyboardType:"number-pad",onChangeText:function(e){return x.onChangeText("sort",e)}})]}),(0,m.jsx)(i.IconTouchable,{style:d._.ml.md,name:"md-check",size:22,color:d._.colorDesc,onPress:x.submitEdit}),(0,m.jsx)(r.default,{style:y.close,children:(0,m.jsx)(i.IconTouchable,{name:"md-close",size:22,color:d._.colorDesc,onPress:x.closeEdit})})]})}),l.COMPONENT)},"./src/screens/user/origin-setting/component/form/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var n=t("./src/stores/index.ts");s.memoStyles=n._.memoStyles((function(){return{form:{paddingVertical:16,paddingRight:8,paddingLeft:16,marginBottom:64,backgroundColor:n._.colorBg,borderColor:n._.colorBorder,borderWidth:1,borderRadius:n._.radiusMd,overflow:"hidden"},close:{position:"absolute",zIndex:1,top:10,right:8},input:{height:44,paddingVertical:0}}}))},"./src/screens/user/origin-setting/component/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"Item")},"./src/screens/user/origin-setting/component/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.string.replace.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;n(t("./node_modules/react/index.js"));var r=n(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),c=t("./src/utils/index.ts"),u=t("./src/utils/decorators/index.ts"),l=n(t("./src/screens/user/origin-setting/component/form/index.tsx")),a=t("./src/screens/user/origin-setting/component/item/ds.ts"),m=t("./src/screens/user/origin-setting/component/item/styles.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,u.obc)((function(e,s){var t=e.type,n=e.id,u=e.uuid,a=e.active,f=e.icon,g=e.iconSquare,j=e.name,x=e.url,y=e.sort,_=s.$,b=(0,m.memoStyles)(),v=[],h=!!n,O=!!a;v.push(O?"停用":"启用",h?"编辑排序":"编辑"),h||v.push("删除"),v.push("预览");var S=_.state.edit,T=S.type===t&&(n&&S.item.id===n||u&&S.item.uuid===u);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.default,{style:b.container,children:(0,p.jsx)(i.Popover,{data:v,onSelect:function(e){switch(e){case"编辑排序":_.openEdit(t,{id:n,uuid:"",name:j,url:x,sort:y,active:a});break;case"编辑":_.openEdit(t,{id:"",uuid:u,name:j,url:x,sort:y,active:a});break;case"删除":(0,c.confirm)("确定删除 ["+j+"] ?",(function(){_.deleteItem({uuid:u,type:t})}));break;case"停用":_.disableItem({id:n,uuid:u,type:t});break;case"启用":_.activeItem({id:n,uuid:u,type:t});break;case"预览":_.go({type:t,url:x})}},children:(0,p.jsxs)(o.Flex,{style:(0,c.stl)(b.item,O&&b.itemActive),direction:"column",justify:"center",children:[f?(0,p.jsx)(o.Flex,{style:(0,c.stl)(b.icon,!g&&b.iconRound),justify:"center",children:(0,p.jsx)(o.Image,{size:g?24:28,src:f,placeholder:!1,skeleton:!1,sync:!0})}):(0,p.jsx)(o.Flex,{style:b.badge,justify:"center",children:(0,p.jsx)(o.Text,{bold:!0,children:String(j||u).replace("[DL]","").trim().slice(0,1).toLocaleUpperCase()})}),(0,p.jsx)(o.Text,{style:d._.mt.sm,size:11,bold:!0,numberOfLines:1,children:j}),(!!y||!h)&&(0,p.jsxs)(o.Text,{type:"sub",size:8,lineHeight:12,bold:!0,children:[y?"["+y+"] ":"","自定义"]})]})})}),T&&(0,p.jsx)(l.default,{name:j,url:x,isBase:h})]})}),a.COMPONENT)},"./src/screens/user/origin-setting/component/item/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var n=t("./src/stores/index.ts");s.memoStyles=n._.memoStyles((function(){return{container:{width:"29%",marginBottom:n._.md,marginHorizontal:"2.1%"},item:{height:88,paddingHorizontal:4,borderWidth:1,borderColor:n._.colorBorder,borderRadius:n._.radiusMd},itemActive:{borderColor:n._.colorSuccess},icon:{width:28,height:28},iconRound:{borderRadius:n._.radiusSm,overflow:"hidden"},badge:{width:28,height:28,backgroundColor:n._.select(n._.colorBg,n._.colorDarkModeLevel2),borderRadius:28,overflow:"hidden"}}}))},"./src/screens/user/origin-setting/component/list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"List")},"./src/screens/user/origin-setting/component/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.assign.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;n(t("./node_modules/react/index.js"));var r=n(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/utils/decorators/index.ts"),d=t("./src/screens/user/origin-setting/ds.ts"),c=n(t("./src/screens/user/origin-setting/component/create/index.tsx")),u=n(t("./src/screens/user/origin-setting/component/item/index.tsx")),l=n(t("./src/screens/user/origin-setting/component/title/index.tsx")),a=t("./src/screens/user/origin-setting/component/list/ds.ts"),m=t("./src/screens/user/origin-setting/component/list/styles.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,i.obc)((function(e,s){var t=s.$;return(0,p.jsx)(p.Fragment,{children:d.TYPES_DS.map((function(e,s){var n=t.data[e.type];return(0,p.jsxs)(r.default,{children:[!!s&&(0,p.jsx)(o.Divider,{}),(0,p.jsx)(l.default,{type:e.type,name:e.name}),(0,p.jsx)(o.Flex,{style:m.styles.list,align:"start",wrap:"wrap",children:n.filter((function(e){return!!t.state.active||e.active})).map((function(s){return(0,p.jsx)(u.default,Object.assign({},s,{type:e.type}),s.id+"|"+s.uuid)}))}),(0,p.jsx)(c.default,{type:e.type,name:e.name})]},e.type)}))})}),a.COMPONENT);try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/origin-setting/component/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/user/origin-setting/component/list/index.tsx#list"})}catch(e){}},"./src/screens/user/origin-setting/component/list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.styles=void 0;var n=t("./src/stores/index.ts");s.styles=n._.create({list:{minHeight:80,marginTop:n._.md}})},"./src/screens/user/origin-setting/component/title/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/component/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"Title")},"./src/screens/user/origin-setting/component/title/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.find.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;n(t("./node_modules/react/index.js"));var r=t("./src/components/index.ts"),o=t("./src/screens/_/index.ts"),i=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),c=t("./src/screens/user/origin-setting/component/title/ds.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.type,n=e.name,d=s.$,c=d.data[t].filter((function(e){return 1===e.active})),l=c.map((function(e){return e.name}));return(0,u.jsxs)(r.Flex,{style:i._.mb.sm,children:[(0,u.jsx)(r.Flex.Item,{children:(0,u.jsx)(r.Text,{size:20,bold:!0,children:n})}),(0,u.jsx)(o.Popover,{style:i._.ml.md,data:l.length?l:["空"],onSelect:function(e){if("空"!==e){var s=c.find((function(s){return s.name===e}));d.go({type:t,url:s.url})}},children:(0,u.jsxs)(r.Flex,{children:[(0,u.jsx)(r.Iconfont,{name:"md-airplay",size:18,color:i._.colorSub}),(0,u.jsx)(r.Text,{style:i._.ml.sm,type:"sub",lineHeight:15,bold:!0,children:"预览"})]})})]})}),c.COMPONENT)},"./src/screens/user/origin-setting/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var n=t("./src/utils/dev/index.ts"),r=t("./src/screens/user/origin-setting/ds.ts");s.COMPONENT=(0,n.rc)(r.COMPONENT,"Header")},"./src/screens/user/origin-setting/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;n(t("./node_modules/react/index.js"));var r=t("./src/components/index.ts"),o=t("./src/utils/decorators/index.ts"),i=t("./src/utils/fetch/index.ts"),d=t("./src/screens/user/origin-setting/header/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=s.navigation;return(0,c.jsx)(r.Header,{title:"自定义源头",hm:["origin-setting","OriginSetting"],headerRight:function(){return(0,c.jsx)(r.Header.Popover,{data:["说明"],onSelect:function(e){(0,i.t)("自定义源头.右上角菜单",{key:e}),"说明"===e&&t.push("Tips",{key:"qcgrso5g70d6gusf"})},children:(0,c.jsx)(r.Heatmap,{id:"自定义源头.右上角菜单"})})}})}),d.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/origin-setting/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/user/origin-setting/header/index.tsx#header"})}catch(e){}},"./src/screens/user/origin-setting/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;n(t("./node_modules/react/index.js"));var r=n(t("./node_modules/react-native-web/dist/exports/View/index.js")),o=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/utils/decorators/index.ts"),c=t("./src/utils/hooks/index.ts"),u=n(t("./src/screens/user/origin-setting/component/cloud/index.tsx")),l=n(t("./src/screens/user/origin-setting/component/list/index.tsx")),a=n(t("./src/screens/user/origin-setting/header/index.tsx")),m=n(t("./src/screens/user/origin-setting/store.ts")),p=t("./src/screens/user/origin-setting/styles.ts"),f=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.ic)(m.default,(function(e,s){var t=s.$;return(0,c.useRunAfter)((function(){t.init()})),(0,c.useObserver)((function(){var e=(0,p.memoStyles)();return(0,f.jsxs)(o.Component,{id:"screen-origin-setting",children:[(0,f.jsx)(a.default,{}),(0,f.jsx)(o.Page,{loaded:t.state._loaded,children:(0,f.jsxs)(o.ScrollView,{children:[(0,f.jsx)(i.Notice,{style:e.hd,children:"客户端内仅提供辅助跳转，均不提供直接播放等功能"}),(0,f.jsxs)(r.default,{style:e.scrollView,children:[(0,f.jsx)(u.default,{isLogin:t.isLogin,active:t.state.active,onToggle:t.onToggle,onDownloaded:t.init}),(0,f.jsx)(l.default,{})]}),(0,f.jsx)(o.Text,{style:e.ft,type:"sub",size:10,align:"center",children:"- 预设数据均来源自互联网 -"})]})})]})}))}));try{originsetting.displayName="originsetting",originsetting.__docgenInfo={description:"",displayName:"originsetting",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/user/origin-setting/index.tsx#originsetting"]={docgenInfo:originsetting.__docgenInfo,name:"originsetting",path:"src/screens/user/origin-setting/index.tsx#originsetting"})}catch(e){}},"./src/screens/user/origin-setting/store.ts":(e,s,t)=>{var n=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.string.trim.js"),t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.sort.js"),t("./node_modules/core-js/modules/es.array.find-index.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,i=r(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),c=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),u=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),m=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),p=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=r(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),g=t("./node_modules/mobx/dist/mobx.esm.js"),j=t("./src/stores/index.ts"),x=t("./src/utils/index.ts"),y=t("./src/utils/fetch/index.ts"),_=r(t("./src/utils/store/index.ts")),b=t("./src/screens/user/origin-setting/utils.ts"),v=t("./src/screens/user/origin-setting/ds.ts");function h(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,m.default)(e);if(s){var r=(0,m.default)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,a.default)(this,t)}}s.default=(o=function(e){(0,l.default)(t,e);var s=h(t);function t(){var e;(0,d.default)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=s.call.apply(s,[this].concat(o)),(0,p.default)((0,u.default)(e),"state",(0,g.observable)(v.STATE)),(0,p.default)((0,u.default)(e),"init",(0,i.default)(n.mark((function s(){var t;return n.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.getStorage(v.NAMESPACE);case 2:if(s.t0=s.sent,s.t0){s.next=5;break}s.t0={};case 5:t=s.t0,e.setState({data:(0,g.toJS)(j.subjectStore.origin),active:(null==t?void 0:t.active)||!1,_loaded:(0,x.getTimestamp)()});case 7:case"end":return s.stop()}}),s)})))),(0,p.default)((0,u.default)(e),"onToggle",(function(){var s=e.state.active;e.setState({active:!s}),e.setStorage(v.NAMESPACE)})),(0,p.default)((0,u.default)(e),"updateOrigin",(function(){setTimeout((function(){var s=e.state.data;j.subjectStore.updateOrigin(s)}),0)})),(0,p.default)((0,u.default)(e),"openEdit",(function(s,t){e.setState({edit:{type:s,item:t}}),(0,y.t)("自定义源头.编辑表单",{type:s})})),(0,p.default)((0,u.default)(e),"closeEdit",(function(){e.setState({edit:{type:"",item:{id:"",uuid:"",name:"",url:"",sort:0,active:1}}}),(0,y.t)("自定义源头.关闭表单")})),(0,p.default)((0,u.default)(e),"onChangeText",(function(s,t){var n=e.state.edit,r=t.trim();"sort"===s&&(r=isNaN(Number(r))?0:Number(r)),e.setState({edit:Object.assign({},n,{item:Object.assign({},n.item,(0,p.default)({},s,r))})})})),(0,p.default)((0,u.default)(e),"submitEdit",(function(){var s,t=e.state,n=t.edit,r=t.data,o=n.type,i=n.item,d=i.id,c=i.uuid;if(""===d&&""===c){if(!i.name)return void(0,x.info)("名字不能为空");if(!i.url)return void(0,x.info)("网址不能为空");(s=(0,g.toJS)(r)).custom[o].push({uuid:(0,x.getTimestamp)(),name:i.name||"",url:i.url||"",sort:i.sort||0,active:1})}else if(d)(s=(0,g.toJS)(r)).base[d]?s.base[d]=Object.assign({},s.base[d],{sort:i.sort}):s.base[d]={sort:i.sort};else{if(!i.name)return void(0,x.info)("名字不能为空");if(!i.url)return void(0,x.info)("网址不能为空");var u=(s=(0,g.toJS)(r)).custom[o].findIndex((function(e){return e.uuid===c}));s.custom[o][u]&&(s.custom[o][u]=Object.assign({},s.custom[o][u],i))}e.setState({data:s}),e.closeEdit(),e.updateOrigin(),(0,y.t)("自定义源头.保存源头",{type:o})})),(0,p.default)((0,u.default)(e),"disableItem",(function(s){var t=s.id,n=s.uuid,r=s.type;if(r){var o=e.state.data,i=(0,g.toJS)(o);if(t)i.base[t]?i.base[t]=Object.assign({},i.base[t],{active:0}):i.base[t]={active:0};else{var d=i.custom[r].find((function(e){return e.uuid===n}));d&&(d.active=0)}e.setState({data:i}),e.updateOrigin(),(0,y.t)("自定义源头.停用源头",{type:r})}})),(0,p.default)((0,u.default)(e),"activeItem",(function(s){var t=s.id,n=s.uuid,r=s.type;if(r){var o=e.state.data,i=(0,g.toJS)(o);if(t)i.base[t]?i.base[t]=Object.assign({},i.base[t],{active:1}):i.base[t]={active:1};else{var d=i.custom[r].find((function(e){return e.uuid===n}));d&&(d.active=1)}e.setState({data:i}),e.updateOrigin(),(0,y.t)("自定义源头.启用源头",{type:r})}})),(0,p.default)((0,u.default)(e),"deleteItem",(function(s){var t=s.uuid,n=s.type;if(t&&n){var r=e.state.data,o=(0,g.toJS)(r);o.custom[n]=o.custom[n].filter((function(e){return e.uuid!==t})),e.setState({data:o}),e.updateOrigin()}})),(0,p.default)((0,u.default)(e),"go",(function(e){var s=e.type,t=e.url;if(s&&t){var n=v.TYPES_DS.find((function(e){return e.type===s})).test,r=(0,b.replaceOriginUrl)(t,n);if(r){var o=j.systemStore.setting.openInfo;o&&(0,x.copy)(r,"已复制地址"),setTimeout((function(){try{(0,x.open)(r)}catch(e){(0,x.info)("网址解析出错, 请检查")}}),o?1600:0)}}})),e}return(0,c.default)(t,[{key:"data",get:function(){var e=this.state.data;return(0,b.getOriginConfig)(e)}},{key:"isLogin",get:function(){return!!j.userStore.userInfo.id}}]),t}(_.default),(0,f.default)(o.prototype,"data",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"data"),o.prototype),(0,f.default)(o.prototype,"isLogin",[g.computed],Object.getOwnPropertyDescriptor(o.prototype,"isLogin"),o.prototype),o)},"./src/screens/user/origin-setting/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var n=t("./src/stores/index.ts");s.memoStyles=n._.memoStyles((function(){return{hd:{marginVertical:n._.sm},scrollView:{paddingTop:n._.md,paddingHorizontal:n._.wind,paddingBottom:n._.window.height/3},ft:{marginVertical:n._.lg}}}))}}]);