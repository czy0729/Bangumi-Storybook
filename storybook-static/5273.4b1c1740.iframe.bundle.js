(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5273],{"./src/screens/discovery/anime/component/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/anime/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Component")},"./src/screens/discovery/anime/component/extra/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/anime/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Extra")},"./src/screens/discovery/anime/component/extra/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n,o=t("./src/components/index.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/decorators/index.ts"),c=t("./src/screens/discovery/anime/component/extra/ds.ts"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,l.ob)((function(e){var s=e.$,t=e.title,r=void 0===t?"Anime":t;s&&(n=null==s?void 0:s.isList);var l=void 0!==n||void 0!==(null==s?void 0:s.isList),c=void 0===(null==s?void 0:s.isList)?n:null==s?void 0:s.isList;return(0,a.jsxs)(o.Flex,{style:d._.mr.xs,children:[l&&(0,a.jsx)(i.IconLayout,{style:d._.mr.xs,list:c,onPress:(null==s?void 0:s.switchLayout)||function(){},children:(0,a.jsx)(o.Heatmap,{right:30,id:r+".切换布局"})}),(0,a.jsx)(i.IconHeader,{name:"md-vertical-align-top",onPress:(null==s?void 0:s.scrollToTop)||function(){},children:(0,a.jsx)(o.Heatmap,{id:r+".到顶"})})]})}),c.COMPONENT);try{extra.displayName="extra",extra.__docgenInfo={description:"",displayName:"extra",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!1,type:{name:"Navigation"}},$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"ScreenAnime"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"enum",value:[{value:'"游戏"'},{value:'"Anime"'},{value:'"ADV"'},{value:'"Manga"'},{value:'"Hentai"'},{value:'"NSFW"'},{value:'"文库"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/anime/component/extra/index.tsx#extra"]={docgenInfo:extra.__docgenInfo,name:"extra",path:"src/screens/discovery/anime/component/extra/index.tsx#extra"})}catch(e){}},"./src/screens/discovery/anime/component/filter/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/anime/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Filter")},"./src/screens/discovery/anime/component/filter/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.slice.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/screens/_/index.ts"),o=t("./src/utils/decorators/index.ts"),i=t("./src/constants/index.ts"),d=t("./src/screens/discovery/anime/ds.ts"),l=t("./src/screens/discovery/anime/component/filter/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.ob)((function(){return(0,c.jsx)(n.Filter,{filterDS:d.filterDS,lastUpdate:i.TEXT_UPDATE_ANIME.slice(0,7),information:"数据最后快照于 "+i.TEXT_UPDATE_ANIME+"，在版本更新前数据不会有任何变化，预计一个季度更新一次。\n      \n本页数据非来源自 bgm.tv，并非所有条目都进行了收录，通常收录的都是有对应源头的数据。\n      \n有比 bgm.tv 更准确的分类、更丰富的筛选、最后更新章节和更多的排序。\n      \n目前本功能对所有用户开放，非高级会员在一个条件下会有最多只显示前 "+d.ADVANCE_LIMIT+" 条数据的限制。\n      \n整理不易，若觉得有用可以通过各种方式给与鼓励支持!"})}),l.COMPONENT)},"./src/screens/discovery/anime/component/item-grid/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.EVENT=s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/anime/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"ItemGrid"),s.EVENT={id:"Anime.跳转"}},"./src/screens/discovery/anime/component/item-grid/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.slice.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/components/index.ts"),o=t("./src/screens/_/index.ts"),i=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=t("./src/constants/index.ts"),c=t("./src/screens/discovery/anime/component/item-grid/ds.ts"),a=t("./src/screens/discovery/anime/component/item-grid/styles.ts"),u=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=e.index,r=e.pickIndex,d=e.num,m=s.navigation,f=(0,a.memoStyles)(),p=i.otaStore.animeSubjectId(r),j=i.otaStore.anime(p),y=j.id,_=j.ageId,v=j.image,x=j.cn,b=j.jp,h=j.score,O=j.begin,g=j.rank;if(!y){var E=i._.grid(d);return(0,u.jsx)(n.Flex,{style:{width:E.width,height:l.IMG_HEIGHT_LG,marginBottom:E.marginLeft+i._.xs,marginLeft:E.marginLeft},justify:"center",children:(0,u.jsx)(n.Loading.Raw,{})})}return(0,u.jsx)(o.ItemCollectionsGrid,{navigation:m,style:(i._.isPad||i._.isLandscape)&&!(t%d)&&f.left,event:c.EVENT,num:d,id:y,aid:_,cover:v?"https://lain.bgm.tv/pic/cover/m/"+v+".jpg":l.IMG_DEFAULT,name:b,nameCn:x,score:h,rank:g,airtime:O?String(O).slice(0,7):"",collection:i.collectionStore.collect(y)})}),c.COMPONENT)},"./src/screens/discovery/anime/component/item-grid/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts");s.memoStyles=r._.memoStyles((function(){return{left:{marginLeft:r._.wind}}}))},"./src/screens/discovery/anime/component/item-list/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/anime/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"ItemList")},"./src/screens/discovery/anime/component/item-list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.string.replace.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/components/index.ts"),o=t("./src/components/cover/utils.ts"),i=t("./src/screens/_/index.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/index.ts"),c=t("./src/utils/decorators/index.ts"),a=t("./src/utils/fetch/index.ts"),u=t("./src/constants/index.ts"),m=t("./src/screens/discovery/anime/component/item-list/ds.ts"),f=t("./src/screens/discovery/anime/component/item-list/styles.ts"),p=t("./node_modules/react/jsx-runtime.js");s.default=(0,c.obc)((function(e,s){var t=e.index,r=e.pickIndex,c=s.navigation,m=(0,f.memoStyles)(),j=d.otaStore.animeSubjectId(r),y=d.otaStore.anime(j),_=y.id,v=y.ageId,x=y.image,b=y.cn,h=y.jp,O=y.ep,g=y.type,E=y.status,T=y.begin,S=y.tags,C=y.official,I=y.origin,N=y.score,M=y.rank,A=y.total;if(!_)return(0,p.jsx)(n.Flex,{style:m.loading,justify:"center",children:(0,p.jsx)(n.Loading.Raw,{})});var P=(0,l.cnjp)(b,h),R=P.length>=20?13:P.length>=14?14:15,L=x?"https://lain.bgm.tv/pic/cover/m/"+x+".jpg":u.IMG_DEFAULT,w=String(S).split(" ").filter((function(e){return!!e&&"暂无"!==e})),D=["TV"===g?"":g,String(O).replace(/\(完结\)|第|\[|\]/g,""),E,T,"暂无"===C?"":C,"暂无"===I?"":I].filter((function(e){return!!e})).join(" / "),G=d.collectionStore.collect(_);return(0,p.jsxs)(n.Touchable,{style:m.container,animate:!0,onPress:(0,a.withT)((function(){c.push("Subject",{subjectId:_,_cn:b,_image:(0,o.getCoverSrc)(L,u.IMG_WIDTH_LG),_aid:v})}),"Anime.跳转",{subjectId:_}),children:[(0,p.jsxs)(n.Flex,{style:m.wrap,align:"start",children:[(0,p.jsx)(i.InView,{style:m.inView,y:.4*d._.window.height+u.IMG_HEIGHT_LG*t,children:(0,p.jsx)(i.Cover,{src:L,width:u.IMG_WIDTH_LG,height:u.IMG_HEIGHT_LG,radius:!0,cdn:!(0,l.x18)(_)})}),(0,p.jsxs)(n.Flex.Item,{style:d._.ml.wind,children:[(0,p.jsxs)(n.Flex,{align:"start",children:[(0,p.jsx)(n.Flex.Item,{children:(0,p.jsxs)(n.Flex,{style:m.content,direction:"column",justify:"between",align:"start",children:[(0,p.jsx)(n.Text,{size:R,bold:!0,numberOfLines:2,children:P}),(0,p.jsx)(n.Text,{style:d._.mt.sm,size:11,lineHeight:14,children:D})]})}),(0,p.jsx)(i.Manage,{subjectId:_,collection:G,onPress:function(){d.uiStore.showManageModal({subjectId:_,title:(0,l.cnjp)(b,h),desc:(0,l.cnjp)(h,b),status:u.MODEL_COLLECTION_STATUS.getValue(G)},"找番剧")}})]}),(0,p.jsxs)(n.Flex,{style:m.bottom,children:[(0,p.jsxs)(n.Flex,{children:[(0,p.jsx)(i.Rank,{value:M}),(0,p.jsx)(i.Stars,{style:d._.mr.xs,value:N,simple:!0}),!!A&&(0,p.jsxs)(n.Text,{style:d._.mr.sm,type:"sub",size:11,bold:!0,children:["(",A,")"]})]}),(0,p.jsx)(n.Flex.Item,{children:(0,p.jsx)(i.Tags,{value:w})})]})]})]}),0===t&&(0,p.jsx)(n.Heatmap,{id:"Anime.跳转"})]})}),m.COMPONENT)},"./src/screens/discovery/anime/component/item-list/styles.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.memoStyles=void 0;var r=t("./src/stores/index.ts"),n=t("./src/constants/index.ts");s.memoStyles=r._.memoStyles((function(){var e=.58*n.IMG_HEIGHT_LG;return{container:{paddingLeft:r._.wind},wrap:{paddingVertical:r._.md,paddingRight:r._.wind},inView:{minWidth:n.IMG_WIDTH_LG,minHeight:n.IMG_HEIGHT_LG},content:{height:e},loading:{height:n.IMG_HEIGHT_LG},bottom:{marginTop:n.IMG_HEIGHT_LG-e-16}}}))},"./src/screens/discovery/anime/component/item/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/anime/component/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Item")},"./src/screens/discovery/anime/component/item/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/stores/index.ts"),o=t("./src/utils/decorators/index.ts"),i=r(t("./src/screens/discovery/anime/component/item-grid/index.tsx")),d=r(t("./src/screens/discovery/anime/component/item-list/index.tsx")),l=t("./src/screens/discovery/anime/component/item/ds.ts"),c=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=e.item,r=e.index;return s.$.isList?(0,c.jsx)(d.default,{pickIndex:t,index:r}):(0,c.jsx)(i.default,{pickIndex:t,index:r,num:n._.portrait(3,5)})}),l.COMPONENT)},"./src/screens/discovery/anime/component/list/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/components/index.ts"),o=t("./src/screens/_/index.ts"),i=t("./src/stores/index.ts"),d=t("./src/utils/decorators/index.ts"),l=r(t("./src/screens/discovery/anime/component/filter/index.tsx")),c=t("./src/screens/discovery/anime/component/list/utils.tsx"),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,d.obc)((function(e,s){var t=s.$;if(!t.state._loaded&&!t.state.data._loaded)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{}),(0,a.jsx)(n.Loading,{})]});var r=t.isList?void 0:i._.portrait(3,5);return(0,a.jsx)(o.PaginationList2,{keyExtractor:c.keyExtractor,forwardRef:t.forwardRef,contentContainerStyle:i._.container.bottom,numColumns:r,data:t.list,limit:9,ListHeaderComponent:(0,a.jsx)(l.default,{}),renderItem:c.renderItem,scrollEventThrottle:16,onScroll:t.onScroll,onPage:t.onPage},""+t.state.layout+r)}));try{list.displayName="list",list.__docgenInfo={description:"",displayName:"list",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/anime/component/list/index.tsx#list"]={docgenInfo:list.__docgenInfo,name:"list",path:"src/screens/discovery/anime/component/list/index.tsx#list"})}catch(e){}},"./src/screens/discovery/anime/component/list/utils.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.keyExtractor=i,s.renderItem=d;r(t("./node_modules/react/index.js"));var n=r(t("./src/screens/discovery/anime/component/item/index.tsx")),o=t("./node_modules/react/jsx-runtime.js");function i(e){return String(e)}function d(e){var s=e.item,t=e.index;return(0,o.jsx)(n.default,{item:s,index:t})}try{i.displayName="keyExtractor",i.__docgenInfo={description:"",displayName:"keyExtractor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/anime/component/list/utils.tsx#keyExtractor"]={docgenInfo:i.__docgenInfo,name:"keyExtractor",path:"src/screens/discovery/anime/component/list/utils.tsx#keyExtractor"})}catch(e){}try{d.displayName="renderItem",d.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/anime/component/list/utils.tsx#renderItem"]={docgenInfo:d.__docgenInfo,name:"renderItem",path:"src/screens/discovery/anime/component/list/utils.tsx#renderItem"})}catch(e){}},"./src/screens/discovery/anime/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.for-each.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.filterDS=s.COMPONENT=s.ADVANCE_LIMIT=void 0;var r=t("./src/utils/subject/anime/index.ts"),n=(s.COMPONENT="Anime",s.ADVANCE_LIMIT=80,[[],[]]);r.ANIME_TAGS.forEach((function(e,s){return n[s%2?1:0].push(e)}));var o=[[],[]];r.ANIME_OFFICIAL.forEach((function(e,s){return o[s%2?1:0].push(e)}));s.filterDS=[{title:"地区",type:"area",data:r.ANIME_AREA},{title:"版本",type:"type",data:r.ANIME_TYPE},{title:"首字",type:"first",data:r.ANIME_FIRST},{title:"年份",type:"year",data:r.ANIME_YEAR,always:!0},{title:"季度",type:"begin",data:r.ANIME_BEGIN,always:!0},{title:"状态",type:"status",data:r.ANIME_STATUS},{title:"类型",type:"tags",data:n,multiple:!0,multiSelect:!0},{title:"制作",type:"official",data:o,multiple:!0},{title:"排序",type:"sort",data:r.ANIME_SORT,always:!0},{title:"收藏",type:"collected",data:r.ANIME_COLLECTED}]},"./src/screens/discovery/anime/header/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.COMPONENT=void 0;var r=t("./src/utils/dev/index.ts"),n=t("./src/screens/discovery/anime/ds.ts");s.COMPONENT=(0,r.rc)(n.COMPONENT,"Header")},"./src/screens/discovery/anime/header/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/components/index.ts"),o=t("./src/utils/decorators/index.ts"),i=r(t("./src/screens/discovery/anime/component/extra/index.tsx")),d=t("./src/screens/discovery/anime/header/ds.ts"),l=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.obc)((function(e,s){var t=e.title,r=void 0===t?"找番剧":t,o=e.alias,d=void 0===o?"Anime":o,c=e.hm,a=s.$;return(0,l.jsx)(n.Header,{title:r,alias:d,hm:c||["anime","Anime"],headerRight:function(){return(0,l.jsx)(i.default,{$:a,title:d})}})}),d.COMPONENT)},"./src/screens/discovery/anime/index.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;r(t("./node_modules/react/index.js"));var n=t("./src/components/index.ts"),o=t("./src/utils/decorators/index.ts"),i=t("./src/utils/hooks/index.ts"),d=r(t("./src/screens/discovery/anime/component/list/index.tsx")),l=r(t("./src/screens/discovery/anime/header/index.tsx")),c=r(t("./src/screens/discovery/anime/store/index.ts")),a=t("./node_modules/react/jsx-runtime.js");s.default=(0,o.ic)(c.default,(function(e,s){var t=s.$;return(0,i.useRunAfter)((function(){t.init()})),(0,i.useObserver)((function(){return(0,a.jsxs)(n.Component,{id:"screen-anime",children:[(0,a.jsx)(l.default,{}),(0,a.jsx)(n.Page,{loaded:t.state._loaded,children:(0,a.jsx)(d.default,{})})]})}))}));try{anime.displayName="anime",anime.__docgenInfo={description:"",displayName:"anime",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/discovery/anime/index.tsx#anime"]={docgenInfo:anime.__docgenInfo,name:"anime",path:"src/screens/discovery/anime/index.tsx#anime"})}catch(e){}},"./src/screens/discovery/anime/store/action.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.string.search.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.function.bind.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=r(t("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),o=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),d=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),u=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),m=t("./src/stores/index.ts"),f=t("./src/utils/index.ts"),p=t("./src/utils/dom/index.ts"),j=t("./src/utils/fetch/index.ts"),y=t("./src/constants/index.ts"),_=r(t("./src/screens/discovery/anime/store/fetch.ts"));function v(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,a.default)(e);if(s){var n=(0,a.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,c.default)(this,t)}}s.default=function(e){(0,l.default)(t,e);var s=v(t);function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=s.call.apply(s,[this].concat(o)),(0,u.default)((0,d.default)(e),"initQuery",(function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.setState({expand:!0,query:Object.assign({},e.state.query,{tags:s})})})),(0,u.default)((0,d.default)(e),"onSelect",(function(s,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.state.query;if("tags"===s){var i=o.tags,d=void 0===i?[]:i;r?e.setState({query:Object.assign({},o,{tags:""===t?[]:d.includes(t)?d.filter((function(e){return t!==e})):[].concat((0,n.default)(d),[t])})}):e.setState({query:Object.assign({},o,{tags:""===t?[]:[t]})})}else e.setState({query:Object.assign({},o,(0,u.default)({},s,t))});setTimeout((function(){e.search(),e.save(),(0,j.t)("Anime.选择",{type:s,value:t,multiple:r})}),0)})),(0,u.default)((0,d.default)(e),"scrollToOffset",null),(0,u.default)((0,d.default)(e),"forwardRef",(function(s){null!=s&&s.scrollToOffset&&(e.scrollToOffset=s.scrollToOffset)})),(0,u.default)((0,d.default)(e),"scrollToTop",(0,j.withT)((function(){y.STORYBOOK?(0,p.scrollToTop)():"function"==typeof e.scrollToOffset&&e.scrollToOffset({x:0,y:0,animated:!0})}),"Anime.到顶")),(0,u.default)((0,d.default)(e),"switchLayout",(function(){var s=e.isList?"grid":"list";e.setState({layout:s}),e.save(),(0,j.t)("Anime.切换布局",{layout:s})})),(0,u.default)((0,d.default)(e),"onExpand",(function(){e.setState({expand:!e.state.expand}),e.save()})),(0,u.default)((0,d.default)(e),"onPage",(function(e,s){return s&&s%5==0&&(0,j.t)("Anime.更多",{page:s}),m.otaStore.onAnimePage(e)})),(0,u.default)((0,d.default)(e),"onScroll",f.updateVisibleBottom.bind((0,d.default)(e))),e}return(0,o.default)(t)}(_.default)},"./src/screens/discovery/anime/store/computed.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n,o=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=r(t("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),u=t("./node_modules/mobx/dist/mobx.esm.js"),m=t("./src/stores/index.ts"),f=t("./src/screens/discovery/anime/ds.ts"),p=r(t("./src/screens/discovery/anime/store/state.tsx"));function j(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,c.default)(e);if(s){var n=(0,c.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,l.default)(this,t)}}s.default=(n=function(e){(0,d.default)(t,e);var s=j(t);function t(){return(0,o.default)(this,t),s.apply(this,arguments)}return(0,i.default)(t,[{key:"isList",get:function(){return"list"===this.state.layout}},{key:"total",get:function(){return this.state.data.list.length}},{key:"list",get:function(){var e=this.state,s=e.data,t=e.query,r=s.list;return"隐藏"===t.collected&&(r=r.filter((function(e){var s=m.otaStore.animeSubjectId(e);return!m.collectionStore.collect(s)}))),m.systemStore.advance||(r=r.filter((function(e,s){return s<f.ADVANCE_LIMIT}))),r}}]),t}(p.default),(0,a.default)(n.prototype,"isList",[u.computed],Object.getOwnPropertyDescriptor(n.prototype,"isList"),n.prototype),(0,a.default)(n.prototype,"total",[u.computed],Object.getOwnPropertyDescriptor(n.prototype,"total"),n.prototype),(0,a.default)(n.prototype,"list",[u.computed],Object.getOwnPropertyDescriptor(n.prototype,"list"),n.prototype),n)},"./src/screens/discovery/anime/store/ds.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(s,"__esModule",{value:!0}),s.STATE=s.NAMESPACE=s.EXCLUDE_STATE=void 0;var r=t("./src/stores/index.ts"),n=t("./src/utils/subject/anime/index.ts"),o=t("./src/constants/index.ts"),i=t("./src/screens/discovery/anime/ds.ts"),d=(s.NAMESPACE="Screen"+i.COMPONENT,s.EXCLUDE_STATE={visibleBottom:r._.window.height});s.STATE=Object.assign({query:{area:"日本",type:"",first:"",year:n.ANIME_YEAR[0],begin:"",status:"",tags:[],official:"",sort:"评分人数",collected:""},data:o.LIST_EMPTY,layout:"list",expand:!1},d,{_loaded:!1})},"./src/screens/discovery/anime/store/fetch.ts":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/web.timers.js"),t("./node_modules/core-js/modules/es.string.search.js"),t("./node_modules/core-js/modules/es.regexp.exec.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=t("./src/utils/subject/anime/index.ts"),m=r(t("./src/screens/discovery/anime/store/computed.ts"));function f(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,c.default)(e);if(s){var n=(0,c.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,l.default)(this,t)}}s.default=function(e){(0,d.default)(t,e);var s=f(t);function t(){var e;(0,o.default)(this,t);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return e=s.call.apply(s,[this].concat(n)),(0,a.default)((0,i.default)(e),"search",(function(s){setTimeout((function(){e.setState({data:(0,u.search)(s||e.state.query)})}),80)})),e}return(0,n.default)(t)}(m.default)},"./src/screens/discovery/anime/store/index.ts":(e,s,t)=>{var r=t("./node_modules/@babel/runtime/regenerator/index.js");t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.object.assign.js"),t("./node_modules/core-js/modules/es.array.is-array.js"),t("./node_modules/core-js/modules/es.string.search.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/web.timers.js");var n=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=n(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=n(t("./node_modules/@babel/runtime/helpers/createClass.js")),d=n(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=n(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),c=n(t("./node_modules/@babel/runtime/helpers/inherits.js")),a=n(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=n(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=n(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),f=t("./src/stores/index.ts"),p=t("./src/utils/subject/anime/index.ts"),j=n(t("./src/screens/discovery/anime/store/action.ts")),y=t("./src/screens/discovery/anime/store/ds.ts");function _(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,u.default)(e);if(s){var n=(0,u.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,a.default)(this,t)}}var v=!1,x=function(e){(0,c.default)(t,e);var s=_(t);function t(){var e;(0,d.default)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=s.call.apply(s,[this].concat(i)),(0,m.default)((0,l.default)(e),"init",(0,o.default)(r.mark((function s(){var t,n,o;return r.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=Object,s.t1={},s.next=4,e.getStorage(y.NAMESPACE);case 4:if(s.t2=s.sent,s.t3=y.EXCLUDE_STATE,s.t4={_loaded:v},t=s.t0.assign.call(s.t0,s.t1,s.t2,s.t3,s.t4),Array.isArray(t.tags)||(t.tags=[]),e.setState(t),v){s.next=13;break}return s.next=13,(0,p.init)();case 13:v=!0,n=e.params._tags,(o=void 0===n?[]:n).length&&e.initQuery("string"==typeof o?[o]:o),f.collectionStore.fetchUserCollectionsQueue(!1),e.search(),setTimeout((function(){e.setState({_loaded:!0})}),120);case 19:case"end":return s.stop()}}),s)})))),e}return(0,i.default)(t)}(j.default);s.default=x},"./src/screens/discovery/anime/store/state.tsx":(e,s,t)=>{t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.reflect.construct.js"),t("./node_modules/core-js/modules/es.array.concat.js");var r=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=r(t("./node_modules/@babel/runtime/helpers/createClass.js")),o=r(t("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(t("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(t("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(t("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(t("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),a=r(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=t("./node_modules/mobx/dist/mobx.esm.js"),m=r(t("./src/utils/store/index.ts")),f=t("./src/screens/discovery/anime/store/ds.ts");function p(e){var s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,c.default)(e);if(s){var n=(0,c.default)(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return(0,l.default)(this,t)}}s.default=function(e){(0,d.default)(t,e);var s=p(t);function t(){var e;(0,o.default)(this,t);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return e=s.call.apply(s,[this].concat(n)),(0,a.default)((0,i.default)(e),"params",void 0),(0,a.default)((0,i.default)(e),"state",(0,u.observable)(f.STATE)),(0,a.default)((0,i.default)(e),"save",(function(){return e.saveStorage(f.NAMESPACE,f.EXCLUDE_STATE)})),e}return(0,n.default)(t)}(m.default)}}]);