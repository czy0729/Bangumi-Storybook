(self.webpackChunkweb=self.webpackChunkweb||[]).push([[9311],{"./src/screens/tinygrail/index/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Tinygrail=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=r(s("./src/screens/tinygrail/index/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/Tinygrail",component:o.default},t.Tinygrail=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(o.default,Object.assign({},(0,n.getStorybookArgs)("Tinygrail")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('Tinygrail')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/tinygrail/overview/index.stories.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TinygrailOverview=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=r(s("./src/screens/tinygrail/overview/index.tsx")),i=s("./node_modules/react/jsx-runtime.js"),r=(t.default={title:"screens/TinygrailOverview",component:o.default},t.TinygrailOverview=function(){return(0,i.jsx)(n.StorybookSPA,{children:(0,i.jsx)(n.StorybookList,{children:(0,i.jsx)(o.default,Object.assign({},(0,n.getStorybookArgs)("TinygrailOverview")))})})});r.parameters=Object.assign({storySource:{source:"() => (\n  <StorybookSPA>\n    <StorybookList>\n      <Component {...getStorybookArgs('TinygrailOverview')} />\n    </StorybookList>\n  </StorybookSPA>\n)"}},r.parameters)},"./src/screens/tinygrail/_/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.VALHALL_PRICE=t.TINYGRAIL_LIST_PROPS=t.ITEMS_DESC=t.COMPONENT=void 0;var r=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/ds.ts");t.COMPONENT=(0,n.rc)(s.COMPONENT,"Base"),t.VALHALL_PRICE={},t.ITEMS_DESC={"混沌魔方":"消耗10点「固定资产」获取随机角色20-200股，需要有一座塔才能使用，每天3次","虚空道标":"消耗100点「固定资产」获取指定角色20-100股，需当前角色等级大于等于目标等级，每天3次","星光碎片":"消耗当前角色「活股」补充目标「固定资产」，受等级差倍率影响，最高为32倍","闪光结晶":"消耗当前角色100点「固定资产」，对目标「星之力」造成20-200股随机伤害，受等级差倍率影响","鲤鱼之眼":"消耗当前角色100点「固定资产」，将「幻想乡」中100-300股转移到「英灵殿」，可能会让（33%-50%）目标股份转化为「星之力」"},t.TINYGRAIL_LIST_PROPS={windowSize:6,initialNumToRender:24,maxToRenderPerBatch:24,updateCellsBatchingPeriod:24,lazy:24,refreshControlProps:{titleColor:r._.colorTinygrailText,tintColor:r._.colorTinygrailText},footerTextType:"tinygrailText"}},"./src/screens/tinygrail/_/icon-go/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./node_modules/mobx-react/dist/mobxreact.esm.js")),n=s("./src/components/index.ts"),o=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),l=s("./src/screens/tinygrail/_/icon-go/styles.ts"),a=s("./node_modules/react/jsx-runtime.js"),d=["资产重组","买入","卖出","K线"],c={top:4,right:8,bottom:4,left:8};t.default=(0,r.observer)(function(e){var t=(e=e.$).state.go;return(0,a.jsx)(o.Popover,{style:l.styles.touch,data:d,hitSlop:c,onSelect:e.onSelectGo,children:(0,a.jsxs)(n.Flex,{children:[(0,a.jsx)(n.Iconfont,{name:"md-read-more",size:24,color:i._.colorTinygrailPlain}),(0,a.jsx)(n.Text,{style:i._.ml.xs,type:"tinygrailPlain",size:13,bold:!0,children:t})]})})});try{icongo.displayName="icongo",icongo.__docgenInfo={description:"",displayName:"icongo",props:{$:{defaultValue:null,description:"",name:"$",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/icon-go/index.tsx#icongo"]={docgenInfo:icongo.__docgenInfo,name:"icongo",path:"src/screens/tinygrail/_/icon-go/index.tsx#icongo"})}catch(e){}},"./src/screens/tinygrail/_/icon-go/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{padding:s._.sm,marginRight:s._.xs,borderRadius:s._.radiusSm,overflow:"hidden"}})},"./src/screens/tinygrail/_/item-refine/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),g=s("./src/constants/index.ts"),j=s("./src/screens/tinygrail/_/item/utils.ts"),h=r(s("./src/screens/tinygrail/_/progress/index.tsx")),b=r(s("./src/screens/tinygrail/_/rank/index.tsx")),v=r(s("./src/screens/tinygrail/_/refine/index.tsx")),S=s("./src/screens/tinygrail/_/utils.ts"),T=s("./src/screens/tinygrail/_/item-refine/styles.ts"),O=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){function s(){(0,j.getOnPress)(l,y,p)()}var r=e.assets,n=e.cover,o=e.index,i=e.lastActive,l=e.monoId,a=e.name,d=e.refine,c=e.sacrifices,u=e.userId,e=e.userName,m=t.$,p=t.navigation,t=(0,T.memoStyles)(),y=m.state.go;return(0,O.jsxs)(f.Flex,{style:t.container,align:"start",children:[(0,O.jsx)(f.Touchable,{onPress:s,children:(0,O.jsx)(f.Image,{src:(0,x.tinygrailOSS)(n),width:g.IMG_WIDTH_SM,height:g.IMG_HEIGHT_SM,radius:!0,skeletonType:"tinygrail"})}),(0,O.jsxs)(f.Flex.Item,{style:_._.ml.sm,children:[(0,O.jsxs)(f.Flex,{children:[(0,O.jsx)(b.default,{value:o+1}),(0,O.jsx)(f.Touchable,{onPress:s,children:(0,O.jsx)(f.Text,{type:"tinygrailPlain",size:12<a.length?10:8<a.length?12:14,lineHeight:14,bold:!0,children:a})}),(0,O.jsx)(v.default,{style:_._.ml.xs,value:d})]}),(0,O.jsxs)(f.Flex,{style:_._.mt.xs,children:[(0,O.jsx)(f.Touchable,{onPress:function(){p.push("Zone",{userId:u})},children:(0,O.jsxs)(f.Text,{type:"tinygrailText",size:12,lineHeight:13,children:["@",e]})}),(0,O.jsxs)(f.Text,{type:"tinygrailText",size:12,lineHeight:13,children:[" ","· ",(0,S.tinygrailLastDate)(i)]})]}),(0,O.jsx)(h.default,{style:t.progress,assets:r,sacrifices:c})]})]})})},"./src/screens/tinygrail/_/item-refine/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingVertical:12,paddingHorizontal:r._.wind,backgroundColor:r._.colorTinygrailContainer},progress:{maxWidth:"72%",marginTop:36}}})},"./src/screens/tinygrail/_/item/auction/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),a=s("./src/components/index.ts"),d=s("./src/stores/index.ts"),c=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.type,s=e.price,r=e.state,e=e.amount,n="竞拍中",o="warning",i="";return"auction"===t&&(i="₵"+s+" / "+(0,c.formatNumber)(e,0),1===r?(n="成功",o="bid"):2===r&&(n="失败",o="ask")),(0,u.jsxs)(l.default,{children:[(0,u.jsx)(a.Text,{type:o,bold:!0,align:"right",children:n}),(0,u.jsx)(a.Text,{style:d._.mt.xs,type:"tinygrailText",size:12,align:"right",children:i})]})});try{auction.displayName="auction",auction.__docgenInfo={description:"",displayName:"auction",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/auction/index.tsx#auction"]={docgenInfo:auction.__docgenInfo,name:"auction",path:"src/screens/tinygrail/_/item/auction/index.tsx#auction"})}catch(e){}},"./src/screens/tinygrail/_/item/control/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),g=r(s("./src/screens/tinygrail/_/popover/index.tsx")),j=r(s("./src/screens/tinygrail/_/stock-preview/index.tsx")),h=s("./src/screens/tinygrail/_/item/control/styles.ts"),b=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e){var t=e._subject,s=e._subjectId,r=e._relation,n=e.id,o=e.type,i=e.monoId,l=e.event,a=e.showMenu,d=e.state,c=e.end,u=e.withoutFeedback,m=void 0===(p=e.onAuctionCancel)?function(){}:p,p=!!c,c="auction"===o,y="竞拍中";return"auction"===o&&(1===d?y="成功":2===d&&(y="失败")),(0,b.jsxs)(b.Fragment,{children:[c&&"竞拍中"===y&&(0,b.jsx)(f.IconTouchable,{style:h.styles.auctionCancel,name:"md-close",color:_._.colorTinygrailPlain,size:18,withoutFeedback:u,onPress:function(){(0,x.confirm)("周六取消需要收取手续费, 确定取消?",function(){return m(n)})}}),!c&&(0,b.jsx)(j.default,Object.assign({},e,{style:h.styles.stockPreview,_loaded:!0})),a&&!p&&(0,b.jsx)(g.default,{event:l,id:i||n,relation:r,subject:t,subjectId:s,onCollect:_.tinygrailStore.toggleCollect})]})});try{control.displayName="control",control.__docgenInfo={description:"",displayName:"control",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/control/index.tsx#control"]={docgenInfo:control.__docgenInfo,name:"control",path:"src/screens/tinygrail/_/item/control/index.tsx#control"})}catch(e){}},"./src/screens/tinygrail/_/item/control/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({auctionCancel:{paddingVertical:s._.md,paddingLeft:s._.sm,marginTop:1.5},stockPreview:{marginTop:-.5,marginRight:-12}})},"./src/screens/tinygrail/_/item/detail/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.date.to-string.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.array.join.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),w=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),P=s("./src/stores/index.ts"),k=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),M=r(s("./src/screens/tinygrail/_/stars/index.tsx")),N=s("./src/screens/tinygrail/_/utils.ts"),E=s("./node_modules/react/jsx-runtime.js"),A=["bid","asks","chara","merge"],I={bid:"bid",asks:"ask",chara:"warning",ico:"primary",auction:"warning",merge:"warning"},B=(new Date).getTimezoneOffset()/-60;1===String(B).length&&(B="0"+B);t.default=(0,n.ob)(function(e){var t,s,r,n,o,i=e.Users,l=e.assets,a=e.end,d=e.lastOrder,c=e.marketValue,u=e.price,m=e.rank,p=e.rate,y=e.sa,f=e.sacrifices,_=e.starForces,x=e.stars,g=e.state,j=e.total,h=e.type,e=e.users,b=P.tinygrailStore.state._stockPreview,v=!!a,S="auction"===h,T="valhall"===h,c=((b||v)&&(c&&(t=(0,N.decimal)(c)),j)&&(s=(0,N.decimal)(j)),[]),O=[],C=[],R=[],p=(v?(v=(v=a)&&a+"+"+B+":00",c.push((0,k.formatTime)(v)),c.push("已筹"+s)):(c.push("+"+(0,k.toFixed)(p,1)+" ("+Number((0,k.toFixed)((0,N.calculateRate)(p,m,x),1))+") "),b&&(g||f)&&O.push("+"+(0,N.decimal)((0,N.calculateTotalRate)({rate:p,rank:m,stars:x,state:g,sacrifices:f,assets:l},!0))+"("+(0,N.decimal)((0,N.calculateTotalRate)({rate:p,rank:m,stars:x,state:g,sacrifices:f,assets:l}))+")"),T?(O.push("底价"+(0,k.toFixed)(u,1)),O.push("数量"+(0,k.formatNumber)(g,0))):((b||S)&&d&&R.push(""+(0,k.lastDate)((0,k.getTimestamp)((0,k.tinygrailFixedTime)(d)))),s&&R.push("流通量"+s),t&&R.push("总值"+t))),b&&(y&&C.push("献祭"+(0,N.decimal)(y)),_)&&C.push("通天塔"+(0,N.decimal)(_)),e&&"ico"!==e&&(a=(0,k.caculateICO)({users:e,total:j,Users:i}).nextUser,r=e,n=1===(v=Math.abs(a-r))||2===v),A.includes(h)&&g?o=g+"股":"ico"===h&&(o="注资"+(0,N.decimal)(g)),b?10:11);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(w.Text,{style:P._.mt.xs,type:"tinygrailText",size:p,lineHeight:12,children:[!!o&&(0,E.jsxs)(w.Text,{type:I[h],size:p,bold:!0,lineHeight:12,children:[o,(0,E.jsx)(w.Text,{type:"tinygrailText",size:p,lineHeight:12,children:" / "})]}),!!f&&(0,E.jsxs)(w.Text,{type:"bid",size:p,bold:!0,lineHeight:12,children:["塔",b&&l&&l!==f?f+"("+l+")":f,(0,E.jsx)(w.Text,{type:"tinygrailText",size:p,lineHeight:12,children:" / "})]}),c.join(" / "),!!r&&(0,E.jsxs)(w.Text,{size:p,lineHeight:12,type:n?"warning":"tinygrailText",bold:n,children:[" / ","当前",r,"人"]})," ",!b&&(0,E.jsx)(M.default,{value:x})]}),!!O.length&&(0,E.jsx)(w.Text,{type:"tinygrailText",size:p,lineHeight:12,children:O.join(" / ")}),!!C.length&&(0,E.jsxs)(w.Text,{type:"tinygrailText",size:p,lineHeight:12,children:[C.join(" / "),!!x&&" / ",(0,E.jsx)(M.default,{value:x})]}),!!R.length&&(0,E.jsx)(w.Text,{type:"tinygrailText",size:p,lineHeight:12,children:R.join(" / ")})]})});try{detail.displayName="detail",detail.__docgenInfo={description:"",displayName:"detail",props:{Users:{defaultValue:null,description:"",name:"Users",required:!0,type:{name:"any"}},assets:{defaultValue:null,description:"",name:"assets",required:!0,type:{name:"any"}},end:{defaultValue:null,description:"",name:"end",required:!0,type:{name:"any"}},lastOrder:{defaultValue:null,description:"",name:"lastOrder",required:!0,type:{name:"any"}},marketValue:{defaultValue:null,description:"",name:"marketValue",required:!0,type:{name:"any"}},price:{defaultValue:null,description:"",name:"price",required:!0,type:{name:"any"}},rank:{defaultValue:null,description:"",name:"rank",required:!0,type:{name:"any"}},rate:{defaultValue:null,description:"",name:"rate",required:!0,type:{name:"any"}},sa:{defaultValue:null,description:"",name:"sa",required:!0,type:{name:"any"}},sacrifices:{defaultValue:null,description:"",name:"sacrifices",required:!0,type:{name:"any"}},starForces:{defaultValue:null,description:"",name:"starForces",required:!0,type:{name:"any"}},stars:{defaultValue:null,description:"",name:"stars",required:!0,type:{name:"any"}},state:{defaultValue:null,description:"",name:"state",required:!0,type:{name:"any"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"any"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"any"}},users:{defaultValue:null,description:"",name:"users",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/detail/index.tsx#detail"]={docgenInfo:detail.__docgenInfo,name:"detail",path:"src/screens/tinygrail/_/item/detail/index.tsx#detail"})}catch(e){}},"./src/screens/tinygrail/_/item/icon/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),c=s("./src/components/index.ts"),u=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),p=s("./src/utils/app/ds.ts"),r=s("./src/utils/decorators/index.ts"),y=s("./src/utils/fetch/index.ts"),f=s("./src/constants/index.ts"),_=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=e.id,r=e.monoId,n=e.name,o=e.icon,i=e.event,l=t.navigation,e=u.tinygrailStore.collected(s),a=(t=u.systemStore.setting).cdn,t=t.cdnOrigin;return"string"==typeof(o=(0,m.tinygrailOSS)(o))&&(o=o.replace("/r/400/pic/crt/l/","/pic/crt/g/")),a&&"magma"===t&&"string"==typeof o&&o.includes(p.HOST_IMAGE)&&(o=(0,f.CDN_OSS_MAGMA_MONO)(o)),(0,_.jsx)(d.default,{style:u._.mt.md,children:(0,_.jsx)(c.Avatar,{src:o,name:n,borderWidth:e?2:0,borderColor:e?"#ffc107":"transparent",skeletonType:"tinygrail",onPress:function(){(0,y.t)(i.id,Object.assign({to:"Mono",monoId:r||s},i.data)),l.push("Mono",{monoId:"character/"+(r||s),_name:n})}})})})},"./src/screens/tinygrail/_/item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),f=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),g=s("./src/utils/fetch/index.ts"),o=s("./src/constants/index.ts"),j=r(s("./src/screens/tinygrail/_/item/auction/index.tsx")),h=r(s("./src/screens/tinygrail/_/item/control/index.tsx")),b=r(s("./src/screens/tinygrail/_/item/detail/index.tsx")),v=r(s("./src/screens/tinygrail/_/item/icon/index.tsx")),S=r(s("./src/screens/tinygrail/_/item/title/index.tsx")),T=s("./src/screens/tinygrail/_/item/utils.ts"),O=s("./src/screens/tinygrail/_/item/styles.ts"),C=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(t,e){var s=e.$,r=e.navigation,e=(0,O.memoStyles)(),n=t.style,o=t.id,i=t.monoId,l=t.event,a=t.type,d=t.end,c=t.withoutFeedback,u=t.go||s.state.go,m=!!d,p="auction"===a,y="valhall"===a;return(0,C.jsxs)(f.Flex,{style:(0,x.stl)(e.container,n),align:"start",children:[(0,C.jsx)(v.default,Object.assign({},t)),(0,C.jsx)(f.Flex.Item,{style:e.wrap,children:(0,C.jsxs)(f.Flex,{align:"start",children:[(0,C.jsx)(f.Flex.Item,{style:_._.mr.sm,children:(0,C.jsx)(f.Touchable,{style:e.item,withoutFeedback:c,onPress:function(){var e;return m?((0,g.t)(l.id,Object.assign({to:"TinygrailICODeal",monoId:i||o},l.data)),r.push("TinygrailICODeal",{monoId:"character/"+(i||o)})):(e=(p||y)&&i||o,u?(0,T.getOnPress)(e,u,r,l.id,l.data,t)():((0,g.t)(l.id,Object.assign({to:"TinygrailDeal",monoId:e},l.data)),r.push("TinygrailDeal",{monoId:"character/"+e})))},children:(0,C.jsxs)(f.Flex,{align:"start",children:[(0,C.jsxs)(f.Flex.Item,{children:[(0,C.jsx)(S.default,Object.assign({},t)),(0,C.jsx)(b.default,Object.assign({},t))]}),p&&(0,C.jsx)(j.default,Object.assign({},t))]})})}),(0,C.jsx)(h.default,Object.assign({},t))]})})]})},{event:o.EVENT,showMenu:!0,withoutFeedback:!1,onAuctionCancel:function(){},onCollect:function(){}});try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/index.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"src/screens/tinygrail/_/item/index.tsx#item"})}catch(e){}},"./src/screens/tinygrail/_/item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingLeft:r._.wind,backgroundColor:r._.colorTinygrailContainer},wrap:{paddingRight:r._.wind-r._._wind},item:{paddingVertical:r._.md,paddingLeft:r._.sm,borderRadius:r._.radiusXs,overflow:"hidden"}}})},"./src/screens/tinygrail/_/item/title/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.parse-int.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/stores/index.ts"),i=s("./src/utils/index.ts"),l=s("./src/utils/decorators/index.ts"),a=r(s("./src/screens/tinygrail/_/rank/index.tsx")),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.ob)(function(e){var t=e.rank,s=void 0===(s=e.name)?"":s,r=e.level,e=e.bonus;return(0,d.jsxs)(n.Flex,{wrap:"wrap",children:[(0,d.jsx)(a.default,{value:t}),(0,d.jsx)(n.Text,{type:"tinygrailPlain",size:12<s.length?10:8<s.length?12:14,lineHeight:14,bold:!0,children:(0,i.HTMLDecode)(s)}),1<parseInt(r)&&(0,d.jsxs)(n.Text,{style:o._.ml.xs,type:"ask",size:11,lineHeight:14,bold:!0,children:["lv",r]}),!!e&&(0,d.jsxs)(n.Text,{style:o._.ml.xs,type:"warning",size:11,lineHeight:14,bold:!0,children:["x",e]})]})});try{title.displayName="title",title.__docgenInfo={description:"",displayName:"title",props:{rank:{defaultValue:null,description:"",name:"rank",required:!0,type:{name:"any"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},level:{defaultValue:null,description:"",name:"level",required:!0,type:{name:"any"}},bonus:{defaultValue:null,description:"",name:"bonus",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/item/title/index.tsx#title"]={docgenInfo:title.__docgenInfo,name:"title",path:"src/screens/tinygrail/_/item/title/index.tsx#title"})}catch(e){}},"./src/screens/tinygrail/_/item/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.getOnPress=function(s,r,n,o,i,l){return function(){var e,t;switch(r){case"K线":e="TinygrailTrade";break;case"买入":e="TinygrailDeal",t={type:"bid"};break;case"卖出":e="TinygrailDeal",t={type:"asks"};break;case"资产重组":e="TinygrailSacrifice";break;default:return}o&&(0,a.t)(o,Object.assign({to:e,monoId:s},i)),n.push(e,Object.assign({monoId:"character/"+s},t,{_props:l}))}};var a=s("./src/utils/fetch/index.ts")},"./src/screens/tinygrail/_/popover/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),m=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),p=s("./src/screens/_/index.ts"),y=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),f=s("./src/utils/fetch/index.ts"),_=s("./src/constants/index.ts"),x=s("./src/screens/tinygrail/_/popover/styles.ts"),g=s("./node_modules/react/jsx-runtime.js"),j=["收藏","K线","买入","卖出","资产重组"];t.default=(0,r.obc)(function(e,t){var s=e.id,r=void 0===(i=e.relation)?[]:i,n=e.subject,o=e.subjectId,i=void 0===(i=e.event)?_.EVENT:i,l=void 0===(e=e.onCollect)?function(){}:e,a=t.navigation,d=i.id,c=i.data,e=[].concat(j);return n&&o&&(e=[].concat((0,u.default)(e),[n])),r.length&&(e=[].concat((0,u.default)(e),["关联角色 ("+(r.length+1)+")"])),(0,g.jsx)(p.Popover,{style:x.styles.touch,contentStyle:x.styles.content,data:e,onSelect:function(e){switch(e){case"收藏":l(s);break;case"K线":(0,f.t)(d,Object.assign({to:"TinygrailTrade",from:"popover",monoId:s},c)),a.push("TinygrailTrade",{monoId:"character/"+s});break;case"买入":(0,f.t)(d,Object.assign({to:"TinygrailDeal",from:"popover",type:"bid",monoId:s},c)),a.push("TinygrailDeal",{monoId:"character/"+s,type:"bid"});break;case"卖出":(0,f.t)(d,Object.assign({to:"TinygrailDeal",from:"popover",type:"ask",monoId:s},c)),a.push("TinygrailDeal",{monoId:"character/"+s,type:"ask"});break;case"资产重组":(0,f.t)(d,Object.assign({to:"TinygrailSacrifice",from:"popover",monoId:s},c)),a.push("TinygrailSacrifice",{monoId:"character/"+s});break;default:e.includes("关联角色")?((0,f.t)(d,Object.assign({to:"TinygrailRelation",from:"popover",monoId:s},c)),a.push("TinygrailRelation",{ids:[s].concat((0,u.default)(r)),name:n+" ("+(r.length+1)+")"})):((0,f.t)(d,Object.assign({to:"Subject",from:"popover",monoId:s},c)),a.push("Subject",{subjectId:o}))}},children:(0,g.jsx)(m.Flex,{style:x.styles.icon,justify:"center",children:(0,g.jsx)(m.Iconfont,{name:"md-more-vert",size:16,color:y._.colorTinygrailText})})})})},"./src/screens/tinygrail/_/popover/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{marginTop:s._.r(8),borderRadius:20,overflow:"hidden"},content:{borderTopRightRadius:0},icon:{width:36,height:36}})},"./src/screens/tinygrail/_/progress/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/_/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Progress")},"./src/screens/tinygrail/_/progress/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),d=s("./src/components/index.ts"),c=s("./src/stores/index.ts"),u=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),n=s("./src/screens/tinygrail/_/progress/ds.ts"),m=s("./src/screens/tinygrail/_/progress/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.style,s=void 0===(s=e.size)?"md":s,r=e.assets,e=e.sacrifices,n=(0,m.memoStyles)(),o=c._.colorSuccess,i=1,l=(0===r?(i=.04,o=c._.colorDanger):r&&e&&(i=Math.max(Math.min(r/e,1),.06),e<500||r<250?o=c._.colorDisabled:i<=.3?o=c._.colorDanger:i<=.5&&(o=c._.colorWarning)),(0,u.formatNumber)(r,0)),r=("md"!==s&&r===e||(l+=" / "+(0,u.formatNumber)(e,0)),12);return"sm"===s?r=9:"xs"===s&&(r=8),(0,p.jsxs)(a.default,{style:(0,u.stl)(n.progress,"xs"===s&&n.progressXs,t),children:[(0,p.jsx)(a.default,{style:[n.bar,"xs"===s&&n.barXs,{width:100*i+"%",backgroundColor:o}]}),(0,p.jsx)(d.Flex,{style:n.text,justify:"center",children:(0,p.jsx)(d.Text,{type:"__plain__",size:r,lineHeight:1,bold:!0,align:.5<i?"center":"left",numberOfLines:1,shadow:!0,children:l})})]})},n.COMPONENT);try{progress.displayName="progress",progress.__docgenInfo={description:"",displayName:"progress",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"ViewStyle"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"xs"'}]}},assets:{defaultValue:null,description:"",name:"assets",required:!0,type:{name:"number"}},sacrifices:{defaultValue:null,description:"",name:"sacrifices",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/progress/index.tsx#progress"]={docgenInfo:progress.__docgenInfo,name:"progress",path:"src/screens/tinygrail/_/progress/index.tsx#progress"})}catch(e){}},"./src/screens/tinygrail/_/progress/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{progress:{padding:4,borderWidth:1,borderColor:r._.select("rgba(0, 0, 0, 0.16)","rgba(255, 255, 255, 0.24)"),borderRadius:8,overflow:"hidden"},progressXs:{padding:2,borderRadius:6},bar:{height:12,borderRadius:4,overflow:"hidden"},barXs:{height:8,borderRadius:3},text:{position:"absolute",zIndex:2,top:.5,right:0,bottom:0,left:0,paddingHorizontal:r._.sm}}})},"./src/screens/tinygrail/_/rank/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/tinygrail/_/rank/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t,s=e.style,r=void 0===(r=e.size)?9:r;return(e=e.value)?(t=(0,i.memoStyles)(),(0,l.jsx)(n.Text,{style:(0,o.stl)(t.rank,{backgroundColor:Number(e)<=500?"#ffc107":"#aaa"},s),size:r,lineHeight:1,bold:!0,align:"center",shadow:!0,children:e})):null});try{rank.displayName="rank",rank.__docgenInfo={description:"",displayName:"rank",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"TextStyle"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/rank/index.tsx#rank"]={docgenInfo:rank.__docgenInfo,name:"rank",path:"src/screens/tinygrail/_/rank/index.tsx#rank"})}catch(e){}},"./src/screens/tinygrail/_/rank/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{rank:{paddingHorizontal:r._.xs,marginTop:-1,marginRight:4,color:r._.__colorPlain__,borderRadius:4,overflow:"hidden"}}})},"./src/screens/tinygrail/_/refine/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),i=s("./src/screens/tinygrail/_/refine/styles.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.style,s=void 0===(s=e.size)?10:s;return(e=e.value)?(0,l.jsxs)(n.Text,{style:(0,o.stl)(i.styles.refine,t),size:s,bold:!0,children:["+",e," "]}):null});try{refine.displayName="refine",refine.__docgenInfo={description:"",displayName:"refine",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"TextStyle"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/refine/index.tsx#refine"]={docgenInfo:refine.__docgenInfo,name:"refine",path:"src/screens/tinygrail/_/refine/index.tsx#refine"})}catch(e){}},"./src/screens/tinygrail/_/refine/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({refine:{color:"#d965ff"}})},"./src/screens/tinygrail/_/scroll-view/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/_/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"ScrollView")},"./src/screens/tinygrail/_/scroll-view/index.tsx":(e,t,s)=>{var a=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),d=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),c=r(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=i(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var o;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((o=n?Object.getOwnPropertyDescriptor(e,s):null)&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js")),m=r(s("./node_modules/react-native-web/dist/exports/RefreshControl/index.js")),p=s("./src/components/index.ts"),y=s("./src/stores/index.ts"),f=s("./src/utils/dev/index.ts"),_=s("./src/utils/hooks/index.ts"),x=s("./src/screens/tinygrail/styles.ts"),g=s("./src/screens/tinygrail/_/scroll-view/ds.ts"),j=s("./node_modules/react/jsx-runtime.js");function i(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(i=function(e){return e?s:t})(e))}function n(e){var t=e.style,s=e.contentContainerStyle,r=e.onRefresh,n=e.children,e=((0,f.r)(g.COMPONENT),(0,u.useState)(!1)),e=(0,c.default)(e,2),o=e[0],i=e[1],l=(0,u.useCallback)(function(){i(!0),setTimeout((0,d.default)(a.mark(function e(){return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:setTimeout(function(){i(!1)},1200);case 3:case"end":return e.stop()}},e)})),0)},[]);return(0,_.useObserver)(function(){return(0,j.jsx)(p.ScrollView,{style:t,contentContainerStyle:s,refreshControl:(0,j.jsx)(m.default,Object.assign({},x.refreshControlProps,{progressBackgroundColor:y._.select(y._.colorPlain,y._._colorDarkModeLevel2),colors:[y._.colorMain],refreshing:o,onRefresh:l})),keyboardDismissMode:"on-drag",scrollToTop:!0,children:n})})}t.default=n;try{n.displayName="ScrollView",n.__docgenInfo={description:"",displayName:"ScrollView",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"ViewStyle"}},contentContainerStyle:{defaultValue:null,description:"",name:"contentContainerStyle",required:!1,type:{name:"ViewStyle"}},onRefresh:{defaultValue:null,description:"",name:"onRefresh",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/scroll-view/index.tsx#ScrollView"]={docgenInfo:n.__docgenInfo,name:"ScrollView",path:"src/screens/tinygrail/_/scroll-view/index.tsx#ScrollView"})}catch(e){}},"./src/screens/tinygrail/_/stars-logs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DRAWER_WITDH=t.COMPONENT=void 0;var r=s("./src/stores/index.ts"),n=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/_/ds.ts");t.COMPONENT=(0,n.rc)(s.COMPONENT,"StarsLogs"),t.DRAWER_WITDH=r._.r(280)},"./src/screens/tinygrail/_/stars-logs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var o;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((o=n?Object.getOwnPropertyDescriptor(e,s):null)&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js"))),i=r(s("./node_modules/react-native-web/dist/exports/Animated/index.js")),l=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/dev/index.ts"),c=s("./src/utils/hooks/index.ts"),u=r(s("./src/screens/tinygrail/_/stars-logs/list/index.tsx")),m=s("./src/screens/tinygrail/_/stars-logs/ds.ts"),p=s("./src/screens/tinygrail/_/stars-logs/styles.ts"),y=s("./node_modules/react/jsx-runtime.js");function f(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(f=function(e){return e?s:t})(e))}function n(e){var t=e.show,s=e.onToggle,r=((0,d.r)(m.COMPONENT),(0,o.useRef)(new i.default.Value(0))),n=(0,o.useCallback)(function(){return a.tinygrailStore.fetchStarLogs(1,100)},[]);return(0,o.useEffect)(function(){t?(a.tinygrailStore.starLogs._loaded||n(),i.default.timing(r.current,{toValue:1,duration:160,useNativeDriver:!0}).start()):t||i.default.timing(r.current,{toValue:0,duration:160,useNativeDriver:!0}).start()},[t]),(0,c.useObserver)(function(){var e=(0,p.memoStyles)();return(0,y.jsx)(l.Portal,{children:(0,y.jsxs)(l.Flex,{style:e.logs,pointerEvents:t?"auto":"none",children:[(0,y.jsx)(l.Flex.Item,{}),(0,y.jsx)(l.Touchable,{style:e.wrap,useRN:!0,onPress:s,children:(0,y.jsx)(i.default.View,{style:[e.mask,{opacity:r.current}]})}),(0,y.jsx)(i.default.View,{style:[e.list,{transform:[{translateX:r.current.interpolate({inputRange:[0,1],outputRange:[m.DRAWER_WITDH,0]})}]}],children:(0,y.jsx)(u.default,{onHeaderRefresh:n,onToggle:s})})]})})})}t.default=n;try{n.displayName="StarsLogs",n.__docgenInfo={description:"",displayName:"StarsLogs",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/stars-logs/index.tsx#StarsLogs"]={docgenInfo:n.__docgenInfo,name:"StarsLogs",path:"src/screens/tinygrail/_/stars-logs/index.tsx#StarsLogs"})}catch(e){}},"./src/screens/tinygrail/_/stars-logs/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=y(t);if(t&&t.has(e))return t.get(e);var s,r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in e){var o;"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&((o=n?Object.getOwnPropertyDescriptor(e,s):null)&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s])}return r.default=e,t&&t.set(e,r),r}(s("./node_modules/react/index.js"))),o=s("./node_modules/react-navigation/src/react-navigation.js"),i=s("./node_modules/mobx-react/dist/mobxreact.esm.js"),l=s("./src/components/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/app/index.ts"),c=s("./src/screens/tinygrail/styles.ts"),u=r(s("./src/screens/tinygrail/_/stars-logs/log/index.tsx")),m=s("./src/screens/tinygrail/_/stars-logs/list/styles.ts"),p=s("./node_modules/react/jsx-runtime.js");function y(e){var t,s;return"function"!=typeof WeakMap?null:(t=new WeakMap,s=new WeakMap,(y=function(e){return e?s:t})(e))}function f(e){var t=e.onHeaderRefresh,s=e.onToggle,r=(0,n.useCallback)(function(e){var t=e.item,e=e.index;return(0,p.jsx)(u.default,Object.assign({},t,{index:e,onToggle:s}))},[s]);return(0,i.useObserver)(function(){return a.tinygrailStore.starLogs._loaded?(0,p.jsx)(o.SafeAreaView,{style:a._.container.flex,children:(0,p.jsx)(l.ListView,{style:a._.container.flex,contentContainerStyle:m.styles.contentContainerStyle,keyExtractor:d.keyExtractor,refreshControlProps:c.refreshControlProps,data:a.tinygrailStore.starLogs,showFooter:!1,renderItem:r,onHeaderRefresh:t})}):(0,p.jsx)(l.Loading,{})})}t.default=f;try{f.displayName="List",f.__docgenInfo={description:"",displayName:"List",props:{onHeaderRefresh:{defaultValue:null,description:"",name:"onHeaderRefresh",required:!0,type:{name:"Fn"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/stars-logs/list/index.tsx#List"]={docgenInfo:f.__docgenInfo,name:"List",path:"src/screens/tinygrail/_/stars-logs/list/index.tsx#List"})}catch(e){}},"./src/screens/tinygrail/_/stars-logs/list/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({contentContainerStyle:{paddingTop:s._.sm+s._.ios(0,s._.statusBarHeight+1),paddingHorizontal:s._.md,paddingBottom:s._.sm}})},"./src/screens/tinygrail/_/stars-logs/log/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/_/stars-logs/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Log")},"./src/screens/tinygrail/_/stars-logs/log/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),p=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),y=s("./src/stores/index.ts"),f=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),_=r(s("./src/screens/tinygrail/_/rank/index.tsx")),r=s("./src/screens/tinygrail/_/stars-logs/log/ds.ts"),x=s("./src/screens/tinygrail/_/stars-logs/log/styles.ts"),g=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=e.monoId,r=void 0===(n=e.name)?"":n,n=e.icon,o=e.amount,i=void 0===(i=e.rank)?0:i,l=void 0===(l=e.oldRank)?0:l,a=e.userName,d=e.time,c=e.type,u=e.onToggle,m=t.navigation,e=(0,x.memoStyles)(),t=l-i;return(0,g.jsxs)(p.Flex,{style:e.container,children:[(0,g.jsx)(p.Avatar,{src:(0,f.tinygrailOSS)(n),size:36,name:r,borderColor:"transparent",skeletonType:"tinygrail",onPress:function(){var e=m||(0,f.navigationReference)();e&&("function"==typeof u&&u(),setTimeout(function(){e.push("Mono",{monoId:"character/"+s,_name:r})},160))}}),(0,g.jsx)(p.Flex.Item,{style:y._.ml.sm,children:(0,g.jsxs)(p.Touchable,{onPress:function(){var e=m||(0,f.navigationReference)();e&&("function"==typeof u&&u(),setTimeout(function(){e.push("TinygrailSacrifice",{monoId:"character/"+s})},160))},children:[(0,g.jsxs)(p.Flex,{children:[(0,g.jsx)(p.Text,{style:y._.mr.xs,type:"tinygrailPlain",size:12<r.length?8:8<r.length?10:12,bold:!0,numberOfLines:1,children:r}),(0,g.jsx)(_.default,{value:i}),0!=t&&(0,g.jsxs)(p.Text,{style:[e.change,{backgroundColor:0<=t?y._.colorBid:y._.colorAsk}],size:9,lineHeight:1,bold:!0,align:"center",shadow:!0,children:[0<=t?"↑":"↓",Math.abs(t)]})]}),(0,g.jsxs)(p.Flex,{style:y._.mt.xs,children:[(0,g.jsx)(p.Flex.Item,{children:a?(0,g.jsxs)(p.Flex,{children:[(0,g.jsxs)(p.Text,{style:e.user,type:"tinygrailText",size:10,numberOfLines:1,children:["@",(0,f.HTMLDecode)(a)]}),(0,g.jsx)(p.Flex.Item,{style:y._.ml.xs,children:(0,g.jsxs)(p.Text,{type:"bid",size:10,numberOfLines:1,children:["+",(0,f.formatNumber)(o,0),3===c&&" 精炼成功"]})})]}):(0,g.jsxs)(p.Text,{type:"ask",size:10,children:[(0,g.jsxs)(p.Text,{type:"tinygrailText",size:10,children:["受到攻击"," "]}),"-",(0,f.formatNumber)(o,0)]})}),(0,g.jsx)(p.Text,{style:y._.ml.sm,type:"tinygrailText",size:10,children:d})]})]})})]})},r.COMPONENT)},"./src/screens/tinygrail/_/stars-logs/log/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{marginBottom:r._.md,backgroundColor:r._.colorTinygrailContainer},user:{maxWidth:"70%"},change:{minWidth:28,paddingHorizontal:r._.xs,marginTop:-1,marginRight:4,color:r._.__colorPlain__,borderRadius:4,overflow:"hidden"}}})},"./src/screens/tinygrail/_/stars-logs/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{logs:{position:"absolute",zIndex:2,top:0,right:0,bottom:0,left:0},wrap:{position:"absolute",zIndex:3,top:0,right:0,bottom:0,left:0},mask:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.64)"},list:{zIndex:4,width:r._.r(256),backgroundColor:r._.colorTinygrailContainer}}})},"./src/screens/tinygrail/_/stars/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.fill.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var s,t,r=void 0===(r=e.value)?0:r,n=void 0===(e=e.size)?11:e;return r?(s={lineHeight:i._.fontSize(12).lineHeight},t=r-25*(e=Math.floor(r/25))-5*(r=Math.floor((r-25*e)/5)),(0,l.jsxs)(l.Fragment,{children:[!!e&&new Array(e).fill("").map(function(e,t){return(0,l.jsx)(o.Iconfont,{style:s,name:"ios-sunny",size:n,color:"#ffc107"},t)}),!!r&&new Array(r).fill("").map(function(e,t){return(0,l.jsx)(o.Iconfont,{style:s,name:"ios-moon",size:n,color:"#ffc107"},t)}),!!t&&new Array(t).fill("").map(function(e,t){return(0,l.jsx)(o.Iconfont,{style:s,name:"ios-star",size:n,color:"#ffc107"},t)})]})):null});try{stars.displayName="stars",stars.__docgenInfo={description:"",displayName:"stars",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"number"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/stars/index.tsx#stars"]={docgenInfo:stars.__docgenInfo,name:"stars",path:"src/screens/tinygrail/_/stars/index.tsx#stars"})}catch(e){}},"./src/screens/tinygrail/_/stock-preview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.number.constructor.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),l=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),a=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),d=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=r(s("./node_modules/react/index.js")),y=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),f=s("./src/components/index.ts"),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),g=s("./src/screens/tinygrail/_/utils.ts"),u=s("./src/screens/tinygrail/_/stock-preview/styles.ts"),j=s("./node_modules/react/jsx-runtime.js");function m(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,a.default)(s);return e=r?(e=(0,a.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var p,h={0:"#aaa",1:_._.colorBid,2:_._.colorPrimary,3:"#ffdc51",4:_._.colorWarning,5:_._.colorMain},s={style:void 0,id:0,bids:0,asks:0,change:0,current:0,fluctuation:0,total:0,marketValue:0,users:0,theme:"dark",_loaded:!1},i=(c=c.default.Component,(0,i.default)(b,c),p=m(b),(0,o.default)(b,[{key:"renderICO",value:function(){var e=this.props.total,t=(0,x.caculateICO)(this.props),s=t.level,t=t.next,e=(0,x.toFixed)(e/t*100,0);return(0,j.jsxs)(f.Flex,{style:this.styles.ico,children:[(0,j.jsxs)(f.Text,{style:this.styles.iconText,type:"tinygrailPlain",size:11,align:"center",bold:!0,shadow:!0,children:["lv",s," ",e,"%"]}),(0,j.jsx)(y.default,{style:this.styles.icoBar,children:(0,j.jsx)(y.default,{style:[this.styles.icoProcess,{width:Number(e)+"%",backgroundColor:h[s]||_._.colorAsk}]})})]})}},{key:"isDark",get:function(){return"dark"===this.props.theme}},{key:"render",value:function(){var e,t,s,r,n,o,i=this.props,l=i.style,a=i.current,d=i.fluctuation,c=i.change,u=i.bids,m=i.asks,p=i.users;return i._loaded?p?this.renderICO():(i=_.tinygrailStore.state._stockPreview,(p=[this.styles.fluctuation,_._.ml.sm]).push(d<0?this.styles.danger:0<d?this.styles.success:this.styles.plain),e=!0,s=t=0,u||m?u&&!m?t=100:s=!u&&m?100:(r=1.1*(u+m),t=Math.min(u/r*100,100),Math.min(m/r*100,100)):e=!1,r="-%",n="0.00",i?0<d?n="+"+(0,x.toFixed)(a-a/(1+d/100),2):d<0&&(n="-"+(0,x.toFixed)(a/(1+d/100),2)):0<d?r="+"+(0,x.toFixed)(d,2)+"%":d<0&&(r=(0,x.toFixed)(d,2)+"%"),d=11,(8<r.length||7<r.length)&&(d=10),o=i?"0.00"===n:"-%"===r,(0,j.jsxs)(f.Touchable,{style:(0,x.stl)(this.styles.container,l),onPress:_.tinygrailStore.toggleStockPreview,children:[(0,j.jsxs)(f.Flex,{justify:"end",children:[(0,j.jsx)(f.Text,{type:"tinygrailPlain",size:13,lineHeight:14,bold:!0,align:"right",children:a?(0,x.toFixed)(a,2):"-"}),!o&&(0,j.jsx)(f.Text,{style:[{color:_._.__colorPlain__},p],size:d,lineHeight:14,align:"center",bold:!0,children:i?n:r})]}),(0,j.jsxs)(f.Flex,{style:this.styles.bottom,justify:"end",children:[i&&!!c&&10<=c&&(0,j.jsxs)(f.Text,{type:"tinygrailText",size:10,children:["量",c," "]}),e&&(0,j.jsxs)(f.Flex,{children:[i&&!!u&&(0,j.jsx)(f.Text,{type:"bid",size:10,children:(0,g.decimal)(u)}),i&&(0,j.jsxs)(f.Flex,{style:(0,x.stl)(i?this.styles.floorShowDetail:this.styles.floor,_._.ml.xs),justify:"between",children:[(0,j.jsx)(y.default,{style:[this.styles.bids,{width:t+"%"}]}),(0,j.jsx)(y.default,{style:[this.styles.asks,{width:s+"%"}]})]}),i&&!!m&&(0,j.jsx)(f.Text,{style:_._.ml.xs,type:"ask",size:10,children:(0,g.decimal)(m)})]})]})]})):null}},{key:"styles",get:function(){return(0,u.memoStyles)()}}]),b);function b(){return(0,n.default)(this,b),p.apply(this,arguments)}(0,d.default)(i,"defaultProps",s);t.default=(0,r.ob)(i);try{stockpreview.displayName="stockpreview",stockpreview.__docgenInfo={description:"",displayName:"stockpreview",props:{style:{defaultValue:null,description:"",name:"style",required:!0,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"Id"}},bids:{defaultValue:null,description:"",name:"bids",required:!0,type:{name:"0"}},asks:{defaultValue:null,description:"",name:"asks",required:!0,type:{name:"0"}},change:{defaultValue:null,description:"",name:"change",required:!0,type:{name:"0"}},current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"0"}},fluctuation:{defaultValue:null,description:"",name:"fluctuation",required:!0,type:{name:"0"}},total:{defaultValue:null,description:"",name:"total",required:!0,type:{name:"0"}},marketValue:{defaultValue:null,description:"",name:"marketValue",required:!0,type:{name:"0"}},users:{defaultValue:null,description:"",name:"users",required:!0,type:{name:"0"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:'"dark"'}},_loaded:{defaultValue:null,description:"",name:"_loaded",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/stock-preview/index.tsx#stockpreview"]={docgenInfo:stockpreview.__docgenInfo,name:"stockpreview",path:"src/screens/tinygrail/_/stock-preview/index.tsx#stockpreview"})}catch(e){}},"./src/screens/tinygrail/_/stock-preview/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingVertical:17,paddingHorizontal:r._.r(r._.sm)},absolute:{position:"absolute",zIndex:1,right:r._.r(64)},fluctuation:{minWidth:r._.r(56),paddingHorizontal:r._.xs,paddingBottom:.5,borderRadius:2,overflow:"hidden"},danger:{backgroundColor:r._.colorAsk},success:{backgroundColor:r._.colorBid},plain:{backgroundColor:r._.colorTinygrailIcon},floor:{width:r._.r(64)},floorShowDetail:{width:r._.r(24)},bids:{height:2,backgroundColor:r._.colorBid,borderRadius:2,overflow:"hidden"},asks:{height:2,backgroundColor:r._.colorAsk,borderRadius:2,overflow:"hidden"},ico:{height:"100%",maxHeight:68,paddingRight:r._._wind},icoBar:{width:r._.r(96),height:16,backgroundColor:r._.tSelect(r._.colorTinygrailBorder,r._.colorTinygrailBg),borderRadius:8,overflow:"hidden"},icoProcess:{height:16,borderRadius:8,overflow:"hidden"},iconText:{position:"absolute",zIndex:1,left:0,right:r._.sm},bottom:{marginTop:4}}})},"./src/screens/tinygrail/_/tabs-v2/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"))),o=(r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),i=s("./src/stores/index.ts"),r=s("./src/utils/decorators/index.ts"),l=s("./node_modules/react/jsx-runtime.js"),a=["routes","renderItem"];t.default=(0,r.obc)(function(e,t){var s=e.routes,r=e.renderItem,e=(0,n.default)(e,a),t=t.$;return(0,l.jsx)(o.TabsV2,Object.assign({style:i._.mt._sm,routes:s,page:t.state.page,textColor:i._.colorTinygrailPlain,backgroundColor:i._.colorTinygrailContainer,borderBottomColor:i._.colorTinygrailBorder,underlineColor:i._.colorWarning,renderItem:r,onChange:t.onChange},e),i._.orientation)})},"./src/screens/tinygrail/_/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),m=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"))),p=(r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/ScrollView/index.js"))),y=s("./src/components/index.ts"),f=s("./src/screens/_/index.ts"),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),g=s("./src/constants/index.ts"),j=s("./src/screens/tinygrail/_/tool-bar/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.ob)(function(e){var t=e.style,s=void 0===(s=e.data)?[]:s,r=e.sort,n=e.level,o=void 0===(l=e.levelMap)?{}:l,i=e.direction,l=e.renderLeft,a=e.onSortPress,d=void 0===a?function(){}:a,c=void 0===(a=e.onLevelSelect)?function(){}:a,u=(0,j.memoStyles)(),e=["全部 ("+Object.keys(o).reduce(function(e,t){return e+o[t]},0)+")"].concat((0,m.default)(Object.keys(o).map(function(e){return"lv"+e+" ("+o[e]+")"})));return(0,h.jsxs)(y.Flex,{style:(0,x.stl)(u.container,t),children:[l,(0,h.jsx)(f.Popover,{data:e,onSelect:function(e){e=e.split(" ")[0];c("全部"===e?"":e.replace("lv",""))},children:(0,h.jsxs)(y.Flex,{style:u.item,justify:"center",children:[(0,h.jsx)(y.Iconfont,{name:"md-filter-list",size:16,color:n?_._.colorAsk:_._.colorTinygrailText}),(0,h.jsxs)(y.Text,{style:_._.ml.xs,size:13,type:n?"ask":"tinygrailText",children:[n?"lv"+n:"等级",o[n]?" ("+o[n]+")":""]})]})}),!!s.length&&(0,h.jsx)(p.default,Object.assign({contentContainerStyle:u.contentContainerStyle,horizontal:!0},g.SCROLL_VIEW_RESET_PROPS,{children:s.map(function(e){var t=r===e.value;return(0,h.jsx)(y.Touchable,{withoutFeedback:!0,onPress:function(){return d(e.value)},children:(0,h.jsxs)(y.Flex,{style:u.item,justify:"center",children:[(0,h.jsx)(y.Text,{type:t?"warning":"tinygrailText",size:13,bold:t,children:e.label}),t&&!!i&&(0,h.jsx)(y.Iconfont,{style:_._.ml._xs,name:"md-arrow-drop-"+i,color:_._.colorWarning})]})},e.label)})}))]})});try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"ViewStyle"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any[] | readonly any[]"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"any"}},level:{defaultValue:null,description:"",name:"level",required:!1,type:{name:"any"}},levelMap:{defaultValue:null,description:"",name:"levelMap",required:!1,type:{name:"Record<string, number>"}},direction:{defaultValue:null,description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:'""'},{value:'"up"'},{value:'"down"'}]}},renderLeft:{defaultValue:null,description:"",name:"renderLeft",required:!1,type:{name:"any"}},onSortPress:{defaultValue:null,description:"",name:"onSortPress",required:!1,type:{name:"Fn"}},onLevelSelect:{defaultValue:null,description:"",name:"onLevelSelect",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/_/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/tinygrail/_/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/tinygrail/_/tool-bar/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{paddingLeft:r._.sm,height:46,borderBottomWidth:r._.hairlineWidth,borderBottomColor:r._.colorTinygrailBorder},contentContainerStyle:{height:44,paddingRight:r._._wind},item:{height:44,paddingHorizontal:r._.sm}}})},"./src/screens/tinygrail/_/utils.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.SORT_ZGX=t.SORT_XX=t.SORT_XFJL=t.SORT_SSZGX=t.SORT_SSGX=t.SORT_SDGXB=t.SORT_SDGX=t.SORT_SCJ=t.SORT_SC=t.SORT_RK=t.SORT_HYD=t.SORT_GXB=t.SORT_GX=t.SORT_GF=t.SORT_GDZC=t.SORT_GDS=t.SORT_FHL=t.SORT_DQZD=t.SORT_DQJ=t.SORT_DJ=t.SORT_CGS=t.SORT_CCJZ=void 0,t.calculateRate=a,t.calculateRatio=l,t.calculateRefineCost=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return Math.floor(1e4*Math.pow(1.3,e))},t.calculateTempleRate=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;if(t&&t<501&&0<e)return a(e,t,s)/(2*r+1)*(2*(r+n)+1);return 2*s},t.calculateTotalRate=d,t.decimal=function(e){var t=Math.abs(e);return t>=i.B?(e<0?"-":"")+(0,o.toFixed)(t/i.B,1)+"亿":t>=i.M?(e<0?"-":"")+(0,o.toFixed)(t/i.M,1)+"万":(e<0?"-":"")+(0,o.formatNumber)(t,0)},t.getLevelBackground=function(e){var t;switch(e){case 0:t="#aaa";break;case 1:t=n._.colorBid;break;case 2:t=n._.colorPrimary;break;case 3:t="#ffdc51";break;case 4:t=n._.colorWarning;break;case 5:t=n._.colorMain;break;default:t=n._.colorAsk}return t},t.levelList=function(t,e){return void 0===t?e:e.filter(function(e){return(e.cLevel||e.level)==t})},t.relation=function(e){return e},t.sortList=function(e,t,s){var r="down"===t?1:-1;switch(e){case _.value:return s.slice().sort(function(e,t){return(a(t.rate,t.rank,t.stars)-a(e.rate,e.rank,e.stars))*r});case x.value:return s.slice().sort(function(e,t){return(d(t)-d(e))*r});case f.value:return s.slice().sort(function(e,t){return(d(t,!0)-d(e,!0))*r});case c.value:return s.slice().sort(function(e,t){return((e.rank||0)-(t.rank||0))*r});case u.value:return s.slice().sort(function(e,t){return((t.stars||0)-(e.stars||0))*r});case m.value:return s.slice().sort(function(e,t){return((t.amount||0)-(e.amount||0))*r});case p.value:return s.slice().sort(function(e,t){e=n.tinygrailStore.collected(e.id||0);return(n.tinygrailStore.collected(t.id||0)-e)*r});case y.value:return s.slice().sort(function(e,t){return((t.rate||0)-(e.rate||0))*r});case g.value:return s.slice().sort(function(e,t){return((t.rate||0)/(t.current||10)-(e.rate||0)/(e.current||10))*r});case j.value:return s.slice().sort(function(e,t){return((t.rate||0)*(t.level||0)-(e.rate||0)*(e.level||0))*r});case h.value:return s.slice().sort(function(e,t){return((t.rate||0)*(t.level||0)/(t.current||10)-(e.rate||0)*(e.level||0)/(e.current||10))*r});case b.value:return s.slice().sort(function(e,t){return((t.level||1)-(e.level||1))*r});case v.value:return s.slice().sort(function(e,t){return((t.state||0)-(e.state||0))*r});case S.value:return s.slice().sort(function(e,t){return((t.sacrifices||0)-(e.sacrifices||0))*r});case T.value:return s.slice().sort(function(e,t){return((t.state||0)*(t.current||0)-(e.state||0)*(e.current||0))*r});case O.value:return s.slice().sort(function(e,t){return(0,o.desc)(String(t.lastOrder||""),String(e.lastOrder||""))*r});case C.value:return s.slice().sort(function(e,t){return((t.marketValue||0)-(e.marketValue||0))*r});case R.value:return s.slice().sort(function(e,t){return((t.total||0)-(e.total||0))*r});case w.value:return s.slice().sort(function(e,t){return((t.current||0)-(e.current||0))*r});case P.value:return s.slice().sort(function(e,t){return((t.fluctuation||0)-(e.fluctuation||0))*r});case k.value:return s.slice().sort(function(e,t){return(parseInt(t.bonus||0)-parseInt(e.bonus||0))*r});default:return s}},t.throttleInfo=void 0,t.tinygrailLastDate=function(e){return(0,o.lastDate)((0,o.getTimestamp)((0,o.tinygrailFixedTime)(e)))},r(s("./node_modules/react-native-web/dist/exports/ToastAndroid/index.js"))),n=s("./src/stores/index.ts"),o=s("./src/utils/index.ts"),i=s("./src/constants/index.ts");function l(){return Math.max(Number((0,o.toFixed)(.005*(601-(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)),2)),0)}function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return t&&t<501&&0<e?l(t)*e:2*s}function d(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e.rate||0:a(e.rate,e.rank,e.stars);return((e.state||0)+(e.assets||e.sacrifices||0))*t}var c=t.SORT_RK={label:"通天塔",value:"rk"},u=t.SORT_XX={label:"星星",value:"xx"},m=t.SORT_GF={label:"股份",value:"gf"},p=t.SORT_SC={label:"收藏",value:"sc"},y=t.SORT_GX={label:"股息",value:"gx"},f=t.SORT_ZGX={label:"总股息",value:"zgx"},_=t.SORT_SSGX={label:"生效股息",value:"ssgx"},x=t.SORT_SSZGX={label:"生效总股息",value:"sszgx"},g=t.SORT_GXB={label:"流动股息比",value:"gxb"},j=t.SORT_SDGX={label:"圣殿股息",value:"sdgx"},h=t.SORT_SDGXB={label:"圣殿股息比",value:"sdgxb"},b=t.SORT_DJ={label:"等级",value:"dj"},v=(t.SORT_GDS={label:"挂单",value:"cgs"},t.SORT_CGS={label:"持股",value:"cgs"}),S=t.SORT_GDZC={label:"塔",value:"gdzc"},T=t.SORT_CCJZ={label:"持仓价值",value:"ccjz"},O=t.SORT_HYD={label:"活跃度",value:"hyd"},C=t.SORT_SCJ={label:"市场价",value:"scj"},R=t.SORT_FHL={label:"发行量",value:"fhl"},w=t.SORT_DQJ={label:"当前价",value:"dqj"},P=t.SORT_DQZD={label:"当前涨跌",value:"dqzd"},k=t.SORT_XFJL={label:"新番奖励",value:"xfjl"};t.throttleInfo=(0,o.throttle)(function(e){(0,o.info)(e,.4)},i.IOS?400:r.default.SHORT)},"./src/screens/tinygrail/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;t.COMPONENT="Tingrail"},"./src/screens/tinygrail/index/component/assets/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Assets")},"./src/screens/tinygrail/index/component/assets/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),y=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),f=s("./src/screens/_/index.ts"),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),g=s("./src/constants/index.ts"),n=s("./src/screens/tinygrail/index/component/assets/ds.ts"),j=s("./src/screens/tinygrail/index/component/assets/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s,r,n,o,t=t.$,i=(0,j.memoStyles)(),l=(c=t.state).currentBalance,a=c.currentTotal,d=c.lastBalance,c=c.lastTotal,u=(m=t.assets).balance,m=m.lastIndex,p=t.total,p=t.short?(u=1e3<u?(0,x.toFixed)(u/g.M,1)+"万":(0,x.formatNumber)(u,1),1e3<p?(0,x.toFixed)(p/g.M,1)+"万":(0,x.formatNumber)(p,1)):(u=(0,x.formatNumber)(u,1),(0,x.formatNumber)(p,1)),l=l-d,d=a-c,a=t.short&&1e3<=Math.abs(l)?(0,x.toFixed)(Math.abs(l)/g.M,1)+"万":(0,x.formatNumber)(Math.abs(l),1);return 0<l?(s="+"+a,r="bid"):l<0&&(s="-"+a,r="ask"),c=t.short&&1e3<=Math.abs(d)?(0,x.toFixed)(Math.abs(d)/g.M,1)+"万":(0,x.formatNumber)(Math.abs(d),1),0<d?(n="+"+c,o="bid"):d<0&&(n="-"+c,o="ask"),(0,h.jsxs)(y.Flex,{style:i.assets,children:[(0,h.jsx)(y.Flex.Item,{children:(0,h.jsx)(y.Touchable,{style:i.touch,onPress:t.toogleShort,children:(0,h.jsxs)(y.Text,{type:"tinygrailPlain",size:13,bold:!0,children:[u,s&&(0,h.jsxs)(y.Text,{type:r,size:10,lineHeight:13,bold:!0,children:[" ",s]})," ","/ ",p," ",n&&(0,h.jsxs)(y.Text,{type:o,size:10,lineHeight:13,bold:!0,children:[n," "]}),!!m&&"/ #"+m,(0,h.jsxs)(y.Text,{type:"tinygrailPlain",size:13,bold:!0,children:[" ",t.short?"[-]":"[+]"]})]})})}),(0,h.jsx)(f.IconTouchable,{style:_._.mr._sm,name:"md-calculate",color:_._.colorTinygrailPlain,onPress:t.doTest})]})},n.COMPONENT);try{assets.displayName="assets",assets.__docgenInfo={description:"",displayName:"assets",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/component/assets/index.tsx#assets"]={docgenInfo:assets.__docgenInfo,name:"assets",path:"src/screens/tinygrail/index/component/assets/index.tsx#assets"})}catch(e){}},"./src/screens/tinygrail/index/component/assets/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{assets:{width:"100%",minHeight:56,paddingBottom:16,marginTop:-20},touch:{paddingVertical:r._.xs,paddingHorizontal:r._.sm,marginLeft:-r._.sm,borderRadius:r._.radiusSm,overflow:"hidden"}}})},"./src/screens/tinygrail/index/component/auth/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Auth")},"./src/screens/tinygrail/index/component/auth/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),l=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),n=s("./src/utils/decorators/index.ts"),c=r(s("./src/screens/tinygrail/index/component/btns/index.tsx")),r=s("./src/screens/tinygrail/index/component/auth/ds.ts"),u=s("./src/screens/tinygrail/index/component/auth/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){var s=t.$,r=t.navigation,t=(0,u.memoStyles)(),n=(o=s.userInfo).nickname,o=o.avatar;return(0,m.jsxs)(i.Flex,{style:a._.mb.sm,children:[!s.params.fromBottomTab&&(0,m.jsx)(l.IconBack,{style:t.back,navigation:r,color:a._.colorTinygrailPlain}),(0,m.jsx)(i.Avatar,{src:(0,d.tinygrailOSS)(null==o?void 0:o.large),size:36,name:n,borderColor:"transparent",skeletonType:"tinygrail"},(0,d.tinygrailOSS)(null==o?void 0:o.large)),(0,m.jsx)(i.Flex.Item,{children:(0,m.jsxs)(i.Flex,{children:[(0,m.jsxs)(i.Touchable,{style:t.touch,onPress:function(){return r.push("Qiafan")},children:[(0,m.jsx)(i.Text,{type:"tinygrailPlain",size:13,bold:!0,children:n}),s.advance?(0,m.jsx)(i.Text,{size:11,lineHeight:13,type:"warning",children:"高级会员"}):!!s.state._loaded&&(0,m.jsx)(i.Text,{type:"tinygrailText",size:11,lineHeight:13,children:"普通会员"})]}),(0,m.jsx)(l.IconTouchable,{style:a._.ml._xs,name:a._.tSelect("md-brightness-2","md-brightness-5"),color:a._.colorTinygrailPlain,size:18,onPress:function(){a._.toggleTinygrailThemeMode(),setTimeout(function(){a._.tinygrailThemeMode!==a._.mode&&a._.toggleMode()},40)}})]})}),(0,m.jsx)(c.default,{})]})},r.COMPONENT);try{auth.displayName="auth",auth.__docgenInfo={description:"",displayName:"auth",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/component/auth/index.tsx#auth"]={docgenInfo:auth.__docgenInfo,name:"auth",path:"src/screens/tinygrail/index/component/auth/index.tsx#auth"})}catch(e){}},"./src/screens/tinygrail/index/component/auth/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{back:{marginLeft:-8,marginRight:r._.xs},touch:{paddingVertical:r._.xs,paddingHorizontal:r._.sm,borderRadius:r._.radiusSm,overflow:"hidden"}}})},"./src/screens/tinygrail/index/component/bonus-modal/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"BonusModal")},"./src/screens/tinygrail/index/component/bonus-modal/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js"))),o=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),i=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),l=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),a=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),d=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),c=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),u=r(s("./node_modules/react/index.js")),m=r(s("./node_modules/react-native-web/dist/exports/BackHandler/index.js")),p=r(s("./node_modules/react-native-web/dist/exports/View/index.js")),y=s("./src/components/index.ts"),f=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),x=s("./src/utils/dev/index.ts"),g=s("./src/screens/tinygrail/index/component/bonus-modal/ds.ts"),j=s("./src/screens/tinygrail/index/component/bonus-modal/styles.ts"),h=s("./node_modules/react/jsx-runtime.js");function b(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(s);return e=r?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}s=u.default.Component,(0,l.default)(S,s),v=b(S),(0,o.default)(S,[{key:"componentDidMount",value:function(){m.default.addEventListener("hardwareBackPress",this.onBackAndroid)}},{key:"componentWillUnmount",value:function(){try{m.default.removeEventListener("hardwareBackPress",this.onBackAndroid)}catch(e){}}},{key:"imageWidth",get:function(){return this.context.$.state.bonus.length<=4?Math.floor(.5*(Math.min(f._.window.width-2*f._.wind,400)-2*f._._wind-f._.md)):Math.floor(.33*(Math.min(f._.window.width-2*f._.wind,400)-2*(f._._wind+f._.md)))}},{key:"imageHeight",get:function(){return 1.28*this.imageWidth}},{key:"total",get:function(){return this.context.$.state.bonus.reduce(function(e,t){return e+t.Amount*t.CurrentPrice},0)}},{key:"render",value:function(){var s=this,e=((0,x.r)(g.COMPONENT),this.context),r=e.$,n=e.navigation,e=r.state,o=e.bonus,t=e.isBonus2,e=e.loadingBonus,i=this.props.visible;return(0,h.jsx)(y.Modal,{style:this.styles.modal,visible:i,title:"刮刮乐",type:"tinygrailPlain",onClose:r.onCloseModal,children:(0,h.jsxs)(p.default,{style:this.styles.wrap,children:[(0,h.jsx)(y.Flex,{align:"start",wrap:"wrap",children:o.map(function(e,t){return(0,h.jsxs)(p.default,{style:(0,_.stl)(s.styles.item,{width:s.imageWidth},(t+1)%(o.length<=4?2:3)&&f._.mr.md),children:[(0,h.jsx)(y.Image,{size:s.imageWidth,height:s.imageHeight,src:(0,_.tinygrailOSS)(e.Cover,480),radius:!0,imageViewer:!0,imageViewerSrc:(0,_.tinygrailOSS)(e.Cover,480),skeletonType:"tinygrail"}),(0,h.jsxs)(y.Touchable,{style:f._.mt.sm,onPress:function(){r.onCloseModal(),n.push("TinygrailDeal",{monoId:"character/"+e.Id,type:"ask"})},children:[(0,h.jsxs)(y.Text,{type:"tinygrailPlain",bold:!0,align:"center",children:[e.Name,(0,h.jsxs)(y.Text,{type:"ask",size:12,lineHeight:14,children:[" ","lv",e.Level]})]}),(0,h.jsxs)(y.Text,{style:f._.mt.xxs,type:f._.tSelect("tinygrailText","tinygrailPlain"),size:12,bold:!0,align:"center",children:["₵",(0,_.toFixed)(e.CurrentPrice)," ",(0,h.jsxs)(y.Text,{type:"warning",size:12,children:["x",e.Amount]})]})]})]},String(e.Id))})}),(0,h.jsxs)(y.Text,{type:f._.tSelect("tinygrailPlain","tinygrailText"),align:"center",bold:!0,children:["总价值",(0,h.jsxs)(y.Text,{type:f._.tSelect("tinygrailText","tinygrailPlain"),bold:!0,children:[" ","₵",(0,_.toFixed)(this.total)," "]})]}),(0,h.jsx)(y.Flex,{style:f._.mt.md,justify:"center",children:(0,h.jsxs)(y.Button,{style:this.styles.btn,styleText:this.styles.text,size:"sm",loading:e,onPress:function(){return r.doLottery(n,t)},children:["再刮一次 (",r.nextPrice,")"]})})]})})}},{key:"styles",get:function(){return(0,j.memoStyles)()}}]);var v,u=S;function S(){var t;(0,n.default)(this,S);for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=v.call.apply(v,[this].concat(s)),(0,c.default)((0,i.default)(t),"onBackAndroid",function(){var e=t.context.$;return!!t.props.visible&&(e.onCloseModal(),!0)}),t}(0,c.default)(u,"defaultProps",{visible:!1});t.default=(0,r.obc)(u);try{bonusmodal.displayName="bonusmodal",bonusmodal.__docgenInfo={description:"",displayName:"bonusmodal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/component/bonus-modal/index.tsx#bonusmodal"]={docgenInfo:bonusmodal.__docgenInfo,name:"bonusmodal",path:"src/screens/tinygrail/index/component/bonus-modal/index.tsx#bonusmodal"})}catch(e){}},"./src/screens/tinygrail/index/component/bonus-modal/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{modal:{width:r._.window.width-2*r._.wind,maxWidth:400,backgroundColor:r._.tSelect(r._.colorTinygrailContainer,r._.__colorBg__),borderRadius:r._.radiusMd},focus:{marginTop:-Math.floor(.56*r._.window.height)},wrap:{width:"100%",maxWidth:r._.window.maxWidth,paddingBottom:r._.sm,marginTop:r._.md},item:{marginBottom:r._.md},btn:{width:240,backgroundColor:r._.tSelect(r._.colorTinygrailIcon,r._.colorTinygrailBg),borderColor:r._.tSelect(r._.colorTinygrailIcon,r._.colorTinygrailBg)},text:{width:160,color:r._.tSelect(r._.__colorPlain__,r._.colorTinygrailPlain)}}})},"./src/screens/tinygrail/index/component/btns/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.DATA_MORE=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Btns"),t.DATA_MORE=["重新授权","粘贴板","意见反馈","设置"]},"./src/screens/tinygrail/index/component/btns/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/web.timers.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),i=s("./src/components/index.ts"),l=s("./src/screens/_/index.ts"),a=s("./src/stores/index.ts"),d=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),c=s("./src/constants/index.ts"),n=s("./src/screens/tinygrail/index/component/btns/ds.ts"),u=s("./src/screens/tinygrail/index/component/btns/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=t.$,r=t.navigation,t=(0,u.memoStyles)(),n=2e3*Math.pow(2,s.state.count||0);return(0,m.jsxs)(m.Fragment,{children:[s.state._loaded?(0,m.jsx)(l.Popover,{style:t.touch,data:["刮刮乐","幻想乡刮刮乐("+n+")","每周分红","每日签到","重新授权","粘贴板","设置"],onSelect:function(e){setTimeout(function(){switch(e){case"刮刮乐":s.doLottery(r);break;case"每周分红":(0,d.confirm)("确定领取每周分红? (每周日0点刷新)",s.doGetBonusWeek);break;case"每日签到":s.doGetBonusDaily();break;case"节日福利":s.doGetBonusHoliday();break;case"重新授权":s.doAuth();break;case"粘贴板":r.push("TinygrailClipboard");break;case"意见反馈":r.push("Say",{sayId:c.APP_ID_SAY_TINYGRAIL});break;case"设置":r.push("Setting",{open:"Tinygrail"});break;default:s.doLottery(r,!0)}},400)},children:(0,m.jsx)(i.Flex,{style:t.btn,justify:"center",children:(0,m.jsx)(i.Iconfont,{name:"md-menu",color:a._.colorTinygrailPlain})})}):(0,m.jsx)(i.Button,{style:t.btn,styleText:t.text,size:"sm",loading:s.state.loading,onPress:s.doAuth,children:"授权"}),(0,m.jsx)(o.default,{style:t.touch,children:(0,m.jsx)(i.Touchable,{onPress:s.onToggleLogs,children:(0,m.jsx)(i.Flex,{style:t.btn,justify:"center",children:(0,m.jsx)(i.Iconfont,{name:"md-menu-open",color:a._.colorTinygrailPlain})})})})]})},n.COMPONENT);try{btns.displayName="btns",btns.__docgenInfo={description:"",displayName:"btns",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/component/btns/index.tsx#btns"]={docgenInfo:btns.__docgenInfo,name:"btns",path:"src/screens/tinygrail/index/component/btns/index.tsx#btns"})}catch(e){}},"./src/screens/tinygrail/index/component/btns/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{touch:{marginLeft:12},btn:{width:r._.r(56),height:r._.r(36),backgroundColor:r._.tSelect(r._.colorTinygrailIcon,r._.colorTinygrailBg),border:0,borderRadius:r._.radiusXs,overflow:"hidden"},text:Object.assign({color:r._.tSelect(r._.__colorPlain__,r._.colorTinygrailPlain)},r._.fontSize13)}})},"./src/screens/tinygrail/index/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Component")},"./src/screens/tinygrail/index/component/footer/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Footer")},"./src/screens/tinygrail/index/component/footer/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),r(s("./node_modules/react-native-web/dist/exports/View/index.js"))),o=s("./src/components/index.ts"),i=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./src/utils/fetch/index.ts"),d=s("./src/constants/index.ts"),c=s("./src/screens/tinygrail/index/component/footer/ds.ts"),u=s("./src/screens/tinygrail/index/component/footer/styles.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){t.$;var s=t.navigation;return(0,m.jsxs)(o.Flex,{style:i._.mb.md,justify:"center",children:[(0,m.jsx)(n.default,{style:u.styles.touch,children:(0,m.jsx)(o.Text,{type:"tinygrailText",size:12,children:d.VERSION_TINYGRAIL_PLUGIN})}),(0,m.jsx)(o.Text,{type:"tinygrailText",children:"·"}),(0,m.jsx)(o.Touchable,{style:u.styles.touch,onPress:function(){(0,a.t)("小圣杯.跳转",{to:"Group",title:"QQ群"}),(0,l.alert)("1038257138")},children:(0,m.jsx)(o.Text,{type:"tinygrailText",size:12,children:"QQ群"})}),(0,m.jsx)(o.Text,{type:"tinygrailText",children:"·"}),(0,m.jsx)(o.Touchable,{style:u.styles.touch,onPress:function(){(0,a.t)("小圣杯.跳转",{to:"Group",title:"小组讨论"}),s.push("Group",{groupId:"tinygrail"})},children:(0,m.jsx)(o.Text,{type:"tinygrailText",size:12,children:"小组讨论"})}),(0,m.jsx)(o.Text,{type:"tinygrailText",children:"·"}),(0,m.jsx)(o.Touchable,{style:u.styles.touch,onPress:function(){(0,l.open)("https://fuyuake.top/xsb/chara/all")},children:(0,m.jsx)(o.Text,{type:"tinygrailText",size:12,children:"fuyuake.top"})})]})},c.COMPONENT);try{footer.displayName="footer",footer.__docgenInfo={description:"",displayName:"footer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/component/footer/index.tsx#footer"]={docgenInfo:footer.__docgenInfo,name:"footer",path:"src/screens/tinygrail/index/component/footer/index.tsx#footer"})}catch(e){}},"./src/screens/tinygrail/index/component/footer/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;s=s("./src/stores/index.ts");t.styles=s._.create({touch:{paddingVertical:s._.xs,paddingHorizontal:s._.sm,borderRadius:s._.radiusXs,overflow:"hidden"}})},"./src/screens/tinygrail/index/component/menu-item/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"MenuItem")},"./src/screens/tinygrail/index/component/menu-item/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),c=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),u=s("./src/stores/index.ts"),m=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),p=s("./src/utils/fetch/index.ts"),n=s("./src/screens/tinygrail/index/component/menu-item/ds.ts"),y=s("./src/screens/tinygrail/index/component/menu-item/styles.ts"),f=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var s=e.style,r=e.index,n=e.iconStyle,o=e.pathname,i=e.config,l=e.title,e=e.icon,a=t.navigation,t=(0,y.memoStyles)(),d=u._.portrait(2,4);return(0,f.jsx)(c.Touchable,{style:(0,m.stl)(t.container,r%d==0&&t.left),onPress:function(){(0,p.t)("小圣杯.跳转",Object.assign({to:o},i)),a.push(o,i)},children:(0,f.jsxs)(c.Flex,{style:(0,m.stl)(t.block,s),children:[(0,f.jsx)(c.Text,{type:"tinygrailPlain",size:18,bold:!0,children:l}),(0,f.jsx)(c.Iconfont,{style:(0,m.stl)(t.icon,n),name:e,size:46})]})})},n.COMPONENT)},"./src/screens/tinygrail/index/component/menu-item/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts"),n=s("./src/constants/index.ts");t.memoStyles=r._.memoStyles(function(){var e=r._.portrait(2,4),t=r._.md,e=(r._.window.width-2*r._.wind-r._.md*(e-1))/e;return n.STORYBOOK&&(e-=18),{container:{width:e,marginBottom:t,marginLeft:t,borderRadius:r._.radiusSm,overflow:"hidden"},left:{marginLeft:0},block:{width:e,height:e*r._.ios(.36,.38),paddingLeft:20,backgroundColor:r._.tSelect(r._.colorTinygrailBorder,r._.colorTinygrailBg)},icon:{position:"absolute",top:"50%",right:-10,marginTop:-24,color:r._.colorTinygrailIcon,opacity:.24}}})},"./src/screens/tinygrail/index/component/menus/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Menus")},"./src/screens/tinygrail/index/component/menus/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),l=r(s("./src/screens/tinygrail/index/component/assets/index.tsx")),a=r(s("./src/screens/tinygrail/index/component/menu-item/index.tsx")),r=s("./src/screens/tinygrail/index/component/menus/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.obc)(function(e,t){var s=(t=t.$).list("bid").list.length,r=t.list("asks").list.length,t=t.list("auction").list.filter(function(e){return 0===e.state}).length;return(0,d.jsxs)(n.Flex,{style:o._.mt.sm,wrap:"wrap",children:[(0,d.jsx)(a.default,{index:0,title:"热门榜单",pathname:"TinygrailOverview",icon:"md-whatshot"}),(0,d.jsx)(a.default,{index:1,title:"新番榜单",pathname:"TinygrailNew",icon:"md-local-play"}),(0,d.jsx)(a.default,{index:2,title:"ICO 榜单",pathname:"TinygrailICO",icon:"md-attach-money"}),(0,d.jsx)(a.default,{index:3,title:"番市首富",pathname:"TinygrailRich",icon:"md-money"}),(0,d.jsx)(a.default,{index:4,title:"英灵殿",pathname:"TinygrailValhall",icon:"md-looks"}),(0,d.jsx)(a.default,{index:5,title:"最新圣殿",pathname:"TinygrailTemples",icon:"md-image-aspect-ratio"}),(0,d.jsx)(a.default,{index:6,title:"每周萌王",pathname:"TinygrailTopWeek",icon:"md-favorite-outline"}),(0,d.jsx)(a.default,{index:7,title:"通天塔 (β)",pathname:"TinygrailStar",icon:"md-change-history"}),(0,d.jsx)(l.default,{}),(0,d.jsx)(a.default,{index:8,style:{backgroundColor:o._.colorDepthBid},title:(0,d.jsxs)(d.Fragment,{children:["我的买单",(0,d.jsxs)(n.Text,{type:"tinygrailPlain",size:15,lineHeight:19,bold:!0,children:["  ",s||""]})]}),pathname:"TinygrailBid",config:{type:"bid"},icon:"md-add-circle-outline"}),(0,d.jsx)(a.default,{index:9,style:{backgroundColor:o._.colorDepthAsk},title:(0,d.jsxs)(d.Fragment,{children:["我的卖单",(0,d.jsxs)(n.Text,{type:"tinygrailPlain",size:15,lineHeight:19,bold:!0,children:["  ",r||""]})]}),pathname:"TinygrailBid",config:{type:"asks"},icon:"md-remove-circle-outline"}),(0,d.jsx)(a.default,{index:10,title:(0,d.jsxs)(d.Fragment,{children:["我的拍卖",(0,d.jsxs)(n.Text,{type:"tinygrailPlain",size:15,lineHeight:19,bold:!0,children:["  ",t||""]})]}),pathname:"TinygrailBid",config:{type:"auction"},icon:"md-gavel"}),(0,d.jsx)(a.default,{index:11,title:"我的持仓",pathname:"TinygrailCharaAssets",icon:"md-inbox"}),(0,d.jsx)(a.default,{index:12,title:"资金日志",pathname:"TinygrailLogs",icon:"md-insert-chart-outlined"}),(0,d.jsx)(a.default,{index:13,title:"人物查询",pathname:"TinygrailSearch",icon:"md-search"}),(0,d.jsx)(a.default,{index:14,style:{backgroundColor:o._.colorTinygrailActive},title:"高级功能",pathname:"TinygrailAdvance",icon:"md-card-membership"}),(0,d.jsx)(a.default,{index:15,title:"我的道具",pathname:"TinygrailItems",icon:"md-workspaces-outline"})]})},r.COMPONENT);try{menus.displayName="menus",menus.__docgenInfo={description:"",displayName:"menus",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/component/menus/index.tsx#menus"]={docgenInfo:menus.__docgenInfo,name:"menus",path:"src/screens/tinygrail/index/component/menus/index.tsx#menus"})}catch(e){}},"./src/screens/tinygrail/index/component/scroll/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/index/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Scroll")},"./src/screens/tinygrail/index/component/scroll/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/screens/_/index.ts")),o=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/tinygrail/_/scroll-view/index.tsx")),r=s("./src/screens/tinygrail/index/component/scroll/ds.ts"),l=s("./src/screens/tinygrail/index/component/scroll/styles.ts"),a=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var e=e.children,t=t.$,s=(0,l.memoStyles)(),s=(0,a.jsx)(i.default,{style:s.container,contentContainerStyle:s.contentContainerStyle,onRefresh:t.refresh,children:e});return t.params.fromBottomTab?(0,a.jsxs)(n.BlurViewRoot,{children:[s,(0,a.jsx)(n.BlurViewBottomTab,{})]}):s},r.COMPONENT)},"./src/screens/tinygrail/index/component/scroll/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.memoStyles=void 0;var r=s("./src/stores/index.ts");t.memoStyles=r._.memoStyles(function(){return{container:{flex:1,paddingHorizontal:r._.wind,backgroundColor:r._.colorTinygrailContainer},contentContainerStyle:{paddingTop:r._.sm,paddingBottom:r._.md+r._.tabBarHeight}}})},"./src/screens/tinygrail/index/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.TITLE=t.STATE=t.NAMESPACE=t.MAX_ERROR_COUNT=t.EXCLUDE_STATE=t.ERROR_STR=t.COMPONENT=void 0;t.COMPONENT="Tinygrail",t.NAMESPACE="ScreenTinygrail",t.TITLE="小圣杯",t.ERROR_STR="/false",t.MAX_ERROR_COUNT=3;s=t.EXCLUDE_STATE={loading:!1,visible:!1,count:0,bonus:[],isBonus2:!1,show:!1,_loaded:!1};t.STATE=Object.assign({loadingAssets:!1,loadingBonus:!1,currentBalance:0,currentTotal:0,lastBalance:0,lastTotal:0},s)},"./src/screens/tinygrail/index/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/web.timers.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useTinygrailPage=function(e){var t=e.$;(0,i.useRunAfter)(function(){t.init(),(0,o.hm)("tinygrail","Tinygrail")}),(0,i.useFocusEffect)(function(){setTimeout(function(){r.StatusBar.setBarStyle(n._.select("dark-content","light-content"))},40)})};var r=s("./src/components/index.ts"),n=s("./src/stores/index.ts"),o=s("./src/utils/fetch/index.ts"),i=s("./src/utils/hooks/index.ts")},"./src/screens/tinygrail/index/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),l=s("./src/utils/decorators/index.ts"),a=s("./src/utils/hooks/index.ts"),d=r(s("./src/screens/tinygrail/_/stars-logs/index.tsx")),c=r(s("./src/screens/tinygrail/index/component/auth/index.tsx")),u=r(s("./src/screens/tinygrail/index/component/bonus-modal/index.tsx")),m=r(s("./src/screens/tinygrail/index/component/footer/index.tsx")),p=r(s("./src/screens/tinygrail/index/component/menus/index.tsx")),y=r(s("./src/screens/tinygrail/index/component/scroll/index.tsx")),f=s("./src/screens/tinygrail/index/hooks.ts"),r=r(s("./src/screens/tinygrail/index/store.ts")),_=s("./src/screens/tinygrail/index/ds.ts"),x=s("./node_modules/react/jsx-runtime.js");t.default=(0,l.ic)(r.default,function(e,t){(0,f.useTinygrailPage)(t);var s=t.$;return(0,a.useObserver)(function(){return(0,x.jsxs)(n.Page,{style:i._.container.tinygrail,children:[(0,x.jsx)(o.StatusBarPlaceholder,{}),(0,x.jsxs)(y.default,{children:[(0,x.jsx)(c.default,{}),(0,x.jsx)(p.default,{}),(0,x.jsx)(m.default,{})]}),(0,x.jsx)(u.default,{visible:s.state.visible}),(0,x.jsx)(d.default,{show:s.state.show,onToggle:s.onToggleLogs}),(0,x.jsx)(n.UM,{title:_.TITLE})]})})});try{index.displayName="index",index.__docgenInfo={description:"",displayName:"index",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/index/index.tsx#index"]={docgenInfo:index.__docgenInfo,name:"index",path:"src/screens/tinygrail/index/index.tsx#index"})}catch(e){}},"./src/screens/tinygrail/index/store.ts":(e,t,s)=>{var u=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/web.timers.js"),s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),o=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),i=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),l=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),a=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),d=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),c=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),f=r(s("./node_modules/cheerio-without-node-native/index.js")),_=s("./src/stores/index.ts"),x=s("./src/utils/index.ts"),g=s("./src/utils/fetch/index.ts"),j=r(s("./src/utils/store/index.ts")),h=r(s("./src/utils/thirdParty/axios.js")),b=s("./src/constants/index.ts"),v=r(s("./src/constants/i18n/index.ts")),S=s("./src/screens/tinygrail/index/ds.ts");function T(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(s);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,d.default)(this,e)}}var O;t.default=(r=j.default,(0,a.default)(C,r),O=T(C),(0,i.default)(C,[{key:"short",get:function(){return _.systemStore.setting.xsbShort}},{key:"userCookie",get:function(){return _.userStore.userCookie}},{key:"advance",get:function(){return _.tinygrailStore.advance}},{key:"userInfo",get:function(){return _.userStore.userInfo}},{key:"hash",get:function(){return _.tinygrailStore.hash}},{key:"assets",get:function(){return _.tinygrailStore.assets}},{key:"charaAssets",get:function(){return _.tinygrailStore.charaAssets(this.hash)}},{key:"total",get:function(){return this.assets.assets}},{key:"nextPrice",get:function(){var e=this.state,t=e.count;return e.isBonus2?2e3*Math.pow(2,void 0===t?0:t):1e3}},{key:"list",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"bid";return(0,y.computed)(function(){return _.tinygrailStore.list(e)}).get()}}]),(0,p.default)((s=C).prototype,"short",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"short"),s.prototype),(0,p.default)(s.prototype,"userCookie",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"userCookie"),s.prototype),(0,p.default)(s.prototype,"advance",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"advance"),s.prototype),(0,p.default)(s.prototype,"userInfo",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"userInfo"),s.prototype),(0,p.default)(s.prototype,"hash",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"hash"),s.prototype),(0,p.default)(s.prototype,"assets",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"assets"),s.prototype),(0,p.default)(s.prototype,"charaAssets",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"charaAssets"),s.prototype),(0,p.default)(s.prototype,"total",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"total"),s.prototype),(0,p.default)(s.prototype,"nextPrice",[y.computed],Object.getOwnPropertyDescriptor(s.prototype,"nextPrice"),s.prototype),s);function C(){var c;(0,o.default)(this,C);for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return c=O.call.apply(O,[this].concat(s)),(0,m.default)((0,l.default)(c),"params",void 0),(0,m.default)((0,l.default)(c),"state",(0,y.observable)(S.STATE)),(0,m.default)((0,l.default)(c),"formhash",""),(0,m.default)((0,l.default)(c),"errorCount",0),(0,m.default)((0,l.default)(c),"init",(0,n.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.tinygrailStore.fetchAdvance(),e.next=3,c.getStorage(S.NAMESPACE);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return t=e.t0,c.setState(Object.assign({},t,S.EXCLUDE_STATE,{_loaded:!!_.tinygrailStore.cookie&&(0,x.getTimestamp)()})),e.next=10,_.tinygrailStore.fetchAssets();case 10:if(t=e.sent,t._loaded||b.DEV){e.next=15;break}return e.next=15,c.doAuth();case 15:return e.next=17,(0,g.queue)([function(){return _.tinygrailStore.fetchAssets()},function(){return _.tinygrailStore.fetchHash()},function(){return c.fetchCharaAssets()}]);case 17:return _.tinygrailStore.fetchAdvance(),c.caculateChange(),c.fetchCount(),c.checkCount(),e.abrupt("return",!0);case 22:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(c),"fetchCharaAssets",(0,n.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({loadingAssets:!0}),t=_.tinygrailStore.fetchCharaAssets(c.hash),e.next=4,t;case 4:return c.setState({loadingAssets:!1}),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(c),"fetchCount",function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[];!e&&c.list("bid")._loaded||t.push(function(){return _.tinygrailStore.fetchBid()}),!e&&c.list("asks")._loaded||t.push(function(){return _.tinygrailStore.fetchAsks()}),!e&&c.list("auction")._loaded||t.push(function(){return _.tinygrailStore.fetchAuction()}),t.length&&(0,g.queue)(t)}),(0,m.default)((0,l.default)(c),"refresh",(0,n.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([_.tinygrailStore.fetchAssets(),c.fetchCharaAssets()]);case 2:return t=e.sent,c.caculateChange(),setTimeout(function(){c.fetchCount(!0)},400),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(c),"_doAuthFailCount",0),(0,m.default)((0,l.default)(c),"doAuth",(0,n.default)(u.mark(function e(){var t;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({loading:!0}),e.prev=1,e.next=4,c.oauth();case 4:return t=c.authorize(),e.next=7,t;case 7:(0,g.t)("小圣杯.授权成功"),(c._doAuthFailCount=0,x.feedback)(),(0,x.info)("已更新授权"),c.setState({loading:!1,_loaded:(0,x.getTimestamp)()}),c.setStorage(S.NAMESPACE),e.next=25;break;case 15:if(e.prev=15,e.t0=e.catch(1),(0,g.t)("小圣杯.授权失败"),c._doAuthFailCount<5)return c._doAuthFailCount+=1,(0,x.info)("重试授权 ["+c._doAuthFailCount+"]"),e.abrupt("return",c.doAuth());e.next=22;break;case 22:(c._doAuthFailCount=0,x.info)("授权失败请重试, 或检查"+v.default.login()+"状态"),c.setState({loading:!1});case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}},e,null,[[1,15]])}))),(0,m.default)((0,l.default)(c),"doTest",(0,n.default)(u.mark(function e(){var t,s,r,n,o,i,l,a,d;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.tinygrailStore.cookie){e.next=3;break}return(0,x.info)("请先授权"),e.abrupt("return");case 3:return(0,g.t)("小圣杯.预测股息"),e.prev=4,e.next=7,_.tinygrailStore.fetchTest();case 7:r=_.tinygrailStore.test,a=r.Total,d=r.Temples,t=r.Share,s=r.Tax,r=r.Daily,n=t-s,a=c.short?(o=a>b.M?(0,x.toFixed)(a/b.M,1)+"万":(0,x.formatNumber)(a,2),i=t>b.M?(0,x.toFixed)(t/b.M,1)+"万":(0,x.formatNumber)(t,2),l=s>b.M?(0,x.toFixed)(s/b.M,1)+"万":(0,x.formatNumber)(s,2),n>b.M?(0,x.toFixed)(n/b.M,1)+"万":(0,x.formatNumber)(n,2)):(o=(0,x.formatNumber)(a,0),i=(0,x.formatNumber)(t,2),l=(0,x.formatNumber)(s,2),(0,x.formatNumber)(n,2)),d="本期计息共"+o+"股，圣殿"+d+"座，预期股息"+i,s&&(d+="，个人所得税"+l+"，税后"+a+"（"+(n/t*100).toFixed(1)+"%）"),r&&(d+="，签到奖励"+r),(0,x.alert)(d,"股息预测"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),(0,x.info)("获取股息预测失败");case 19:case"end":return e.stop()}},e,null,[[4,16]])}))),(0,m.default)((0,l.default)(c),"doLottery",(t=(0,n.default)(u.mark(function e(t){var s,r,n,o,i=arguments;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=1<i.length&&void 0!==i[1]&&i[1],_.tinygrailStore.cookie){e.next=4;break}return(0,x.info)("请先授权"),e.abrupt("return");case 4:return e.prev=4,c.setState({loadingBonus:!0}),e.next=8,_.tinygrailStore.doLottery(s);case 8:o=e.sent,r=o.State,n=o.Value,o=o.Message,c.setState({loadingBonus:!1}),(0,x.feedback)(),0===r?(s?(0,g.t)("小圣杯.幻想乡刮刮乐",{nextPrice:c.nextPrice}):(0,g.t)("小圣杯.刮刮乐"),c.setState({bonus:n,isBonus2:s}),c.onShowModal(),c.checkCount()):(0,x.info)(o),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,x.info)("操作失败，可能授权过期了");case 21:case"end":return e.stop()}},e,null,[[4,17]])})),function(e){return t.apply(this,arguments)})),(0,m.default)((0,l.default)(c),"doGetBonusWeek",(0,n.default)(u.mark(function e(){var t,s,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.tinygrailStore.cookie){e.next=3;break}return(0,x.info)("请先授权"),e.abrupt("return");case 3:return(0,g.t)("小圣杯.每周分红"),e.prev=4,c.setState({loadingBonus:!0}),e.next=8,_.tinygrailStore.doBonus();case 8:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,c.setState({loadingBonus:!1}),(0,x.feedback)(),0===t)return(0,x.info)(s),e.next=18,_.tinygrailStore.fetchAssets();e.next=21;break;case 18:c.caculateChange(),e.next=22;break;case 21:(0,x.info)(r);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,x.info)("操作失败，可能授权过期了");case 28:case"end":return e.stop()}},e,null,[[4,24]])}))),(0,m.default)((0,l.default)(c),"doGetBonusDaily",(0,n.default)(u.mark(function e(){var t,s,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.tinygrailStore.cookie){e.next=3;break}return(0,x.info)("请先授权"),e.abrupt("return");case 3:return(0,g.t)("小圣杯.每日签到"),e.prev=4,c.setState({loadingBonus:!0}),e.next=8,_.tinygrailStore.doBonusDaily();case 8:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,c.setState({loadingBonus:!1}),(0,x.feedback)(),0===t)return(0,x.info)(s),e.next=18,_.tinygrailStore.fetchAssets();e.next=21;break;case 18:c.caculateChange(),e.next=22;break;case 21:(0,x.info)(r);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,x.info)("操作失败，可能授权过期了");case 28:case"end":return e.stop()}},e,null,[[4,24]])}))),(0,m.default)((0,l.default)(c),"doGetBonusHoliday",(0,n.default)(u.mark(function e(){var t,s,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.tinygrailStore.cookie){e.next=3;break}return(0,x.info)("请先授权"),e.abrupt("return");case 3:return(0,g.t)("小圣杯.节日福利"),e.prev=4,c.setState({loadingBonus:!0}),e.next=8,_.tinygrailStore.doBonusHoliday();case 8:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,c.setState({loadingBonus:!1}),(0,x.feedback)(),0===t)return(0,x.info)(s),e.next=18,_.tinygrailStore.fetchAssets();e.next=21;break;case 18:c.caculateChange(),e.next=22;break;case 21:(0,x.info)(r);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(4),c.setState({loadingBonus:!1}),(0,x.info)("操作失败，可能授权过期了");case 28:case"end":return e.stop()}},e,null,[[4,24]])}))),(0,m.default)((0,l.default)(c),"doSend",function(){(0,x.confirm)("是否给作者发送10000cc?",(0,n.default)(u.mark(function e(){var t,s,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.tinygrailStore.doSend();case 2:if(r=e.sent,t=r.State,s=r.Value,r=r.Message,(0,x.feedback)(),0===t)return(0,x.info)(s),e.next=11,_.tinygrailStore.fetchAssets();e.next=14;break;case 11:c.caculateChange(),e.next=15;break;case 14:(0,x.info)(r);case 15:case"end":return e.stop()}},e)})),"小圣杯助手")}),(0,m.default)((0,l.default)(c),"logout",(0,n.default)(u.mark(function e(){return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.default)({method:"post",url:(0,b.API_TINYGRAIL_LOGOUT)()}));case 1:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(c),"oauth",(0,n.default)(u.mark(function e(){var t,s,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.userCookie,t=s.cookie,s=s.userAgent,h.default.defaults.withCredentials=!1,t=(0,h.default)({method:"get",url:b.HOST+"/oauth/authorize?client_id="+b.TINYGRAIL_APP_ID+"&response_type=code&redirect_uri="+b.TINYGRAIL_URL_OAUTH_REDIRECT,headers:{Cookie:"chii_cookietime=2592000; "+t,"User-Agent":s}}),e.next=5,t;case 5:return s=e.sent,r=s.request,r=r._response,c.formhash=f.default.load(r)("input[name=formhash]").attr("value"),e.abrupt("return",t);case 10:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(c),"authorize",(0,n.default)(u.mark(function e(){var t,s,r;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.userCookie,t=r.cookie,r=r.userAgent,h.default.defaults.withCredentials=!1,t=(0,h.default)({method:"post",maxRedirects:0,validateStatus:null,url:b.HOST+"/oauth/authorize?client_id="+b.TINYGRAIL_APP_ID+"&response_type=code&redirect_uri="+b.TINYGRAIL_URL_OAUTH_REDIRECT+S.ERROR_STR,headers:{"Content-Type":"application/x-www-form-urlencoded",Cookie:"chii_cookietime=2592000; "+t,"User-Agent":r},data:(0,x.urlStringify)({formhash:c.formhash,redirect_uri:"",client_id:b.TINYGRAIL_APP_ID,submit:"授权"})}),e.next=5,t;case 5:if(s=e.sent,r=s.request,r.responseURL.includes("code="))e.next=13;else{if(c.errorCount+=1,c.errorCount<S.MAX_ERROR_COUNT)return e.abrupt("return",c.authorize());e.next=12}break;case 12:return e.abrupt("return",!1);case 13:return(0,x.feedback)(),_.tinygrailStore.updateCookie(s.headers["set-cookie"][0].split(";")[0]+";"),e.abrupt("return",t);case 16:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(c),"caculateChange",function(){var e=c.state,t=e.currentBalance,e=e.currentTotal,s=c.assets.balance;c.setState({currentBalance:s,currentTotal:c.total,lastBalance:t,lastTotal:e}),c.setStorage(S.NAMESPACE)}),(0,m.default)((0,l.default)(c),"toogleShort",function(){_.systemStore.switchSetting("xsbShort"),(0,g.t)("小圣杯.缩略资金",{short:c.short})}),(0,m.default)((0,l.default)(c),"onShowModal",function(){return c.setState({visible:!0})}),(0,m.default)((0,l.default)(c),"onCloseModal",function(){c.setState({visible:!1}),setTimeout(function(){c.setState({bonus:[]})},400)}),(0,m.default)((0,l.default)(c),"checkCount",(0,n.default)(u.mark(function e(){var t,s;return u.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.tinygrailStore.cookie){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_.tinygrailStore.doCheckDaily();case 4:s=e.sent,t=s.State,s=s.Value,0===t&&c.setState({count:s});case 8:case"end":return e.stop()}},e)}))),(0,m.default)((0,l.default)(c),"onToggleLogs",function(){var e=c.state.show;c.setState({show:!e})}),c}},"./src/screens/tinygrail/overview/component/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/overview/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Component")},"./src/screens/tinygrail/overview/component/list/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT=t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/overview/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"List"),t.EVENT={id:"热门榜单.跳转"}},"./src/screens/tinygrail/overview/component/list/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/screens/_/index.ts"),i=s("./src/stores/index.ts"),l=s("./src/utils/index.ts"),r=s("./src/utils/decorators/index.ts"),a=s("./src/screens/tinygrail/styles.ts"),d=s("./src/screens/tinygrail/overview/ds.ts"),c=s("./src/screens/tinygrail/overview/component/list/utils.tsx"),u=s("./src/screens/tinygrail/overview/component/list/ds.ts"),m=s("./node_modules/react/jsx-runtime.js");t.default=(0,r.obc)(function(e,t){var e=e.id,s=(t=t.$).computedList(e);return s._loaded?(0,m.jsx)(o.PaginationList2,{style:i._.container.flex,contentContainerStyle:i._.container.bottom,keyExtractor:l.keyExtractor,refreshControlProps:a.refreshControlProps,footerTextType:"tinygrailText",data:s.list,limit:25,scrollToTop:d.TABS[t.state.page].key===e,renderItem:"refine/temple"===e?c.renderItemRefine:c.renderItem,onHeaderRefresh:t.fetchList}):(0,m.jsx)(n.Loading,{style:i._.container.flex,color:i._.colorTinygrailText})},u.COMPONENT)},"./src/screens/tinygrail/overview/component/list/utils.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=a,t.renderItemRefine=d,r(s("./src/screens/tinygrail/_/item/index.tsx"))),o=r(s("./src/screens/tinygrail/_/item-refine/index.tsx")),i=s("./src/screens/tinygrail/overview/component/list/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");function a(e){var t=e.item,e=e.index;return(0,l.jsx)(n.default,Object.assign({index:e,event:i.EVENT},t))}function d(e){var t=e.item,e=e.index;return(0,l.jsx)(o.default,Object.assign({index:e,event:i.EVENT},t))}try{a.displayName="renderItem",a.__docgenInfo={description:"",displayName:"renderItem",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/overview/component/list/utils.tsx#renderItem"]={docgenInfo:a.__docgenInfo,name:"renderItem",path:"src/screens/tinygrail/overview/component/list/utils.tsx#renderItem"})}catch(e){}try{d.displayName="renderItemRefine",d.__docgenInfo={description:"",displayName:"renderItemRefine",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/overview/component/list/utils.tsx#renderItemRefine"]={docgenInfo:d.__docgenInfo,name:"renderItemRefine",path:"src/screens/tinygrail/overview/component/list/utils.tsx#renderItemRefine"})}catch(e){}},"./src/screens/tinygrail/overview/component/tabs/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/overview/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Tabs")},"./src/screens/tinygrail/overview/component/tabs/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),o=r(s("./src/screens/tinygrail/_/tabs-v2/index.tsx")),i=s("./src/screens/tinygrail/overview/ds.ts"),l=r(s("./src/screens/tinygrail/overview/component/list/index.tsx")),a=r(s("./src/screens/tinygrail/overview/component/tool-bar/index.tsx")),r=s("./src/screens/tinygrail/overview/component/tabs/ds.ts"),d=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.ob)(function(){return(0,d.jsx)(o.default,{routes:i.TABS,renderContentHeaderComponent:(0,d.jsx)(a.default,{}),renderItem:c})},r.COMPONENT);function c(e){return(0,d.jsx)(l.default,{id:e.key},e.key)}},"./src/screens/tinygrail/overview/component/tool-bar/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/overview/component/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"ToolBar")},"./src/screens/tinygrail/overview/component/tool-bar/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.sort.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/utils/decorators/index.ts")),o=r(s("./src/screens/tinygrail/_/tool-bar/index.tsx")),i=s("./src/screens/tinygrail/overview/ds.ts"),r=s("./src/screens/tinygrail/overview/component/tool-bar/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,n.obc)(function(e,t){return"refine/temple"===(t=t.$).currentKey?null:(0,l.jsx)(o.default,{data:i.SORT_DS,level:t.state.level,levelMap:t.levelMap,sort:t.state.sort,direction:t.state.direction,onLevelSelect:t.onLevelSelect,onSortPress:t.onSortPress})},r.COMPONENT);try{toolbar.displayName="toolbar",toolbar.__docgenInfo={description:"",displayName:"toolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/overview/component/tool-bar/index.tsx#toolbar"]={docgenInfo:toolbar.__docgenInfo,name:"toolbar",path:"src/screens/tinygrail/overview/component/tool-bar/index.tsx#toolbar"})}catch(e){}},"./src/screens/tinygrail/overview/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.tabs=t.sortDS=t.TABS=t.STATE=t.SORT_DS=t.NAMESPACE=t.COMPONENT=void 0;s=s("./src/screens/tinygrail/_/utils.ts"),t.COMPONENT="TinygrailOverview",t.NAMESPACE="ScreenTinygrailOverview",t.STATE={page:0,level:"",sort:"",direction:"",go:"卖出",_loaded:!1},s=t.sortDS=[s.SORT_SC,s.SORT_GX,s.SORT_SSGX,s.SORT_RK,s.SORT_XX,s.SORT_HYD,s.SORT_DQJ,s.SORT_SCJ,s.SORT_DQZD,s.SORT_DJ,s.SORT_XFJL,s.SORT_FHL],t.SORT_DS=s,s=t.tabs=[{title:"精炼排行",key:"refine/temple"},{title:"最高股息",key:"msrc"},{title:"最高市值",key:"mvc"},{title:"最大涨幅",key:"mrc"},{title:"最大跌幅",key:"mfc"}];t.TABS=s},"./src/screens/tinygrail/overview/header/ds.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT=void 0;var r=s("./src/utils/dev/index.ts"),s=s("./src/screens/tinygrail/overview/ds.ts");t.COMPONENT=(0,r.rc)(s.COMPONENT,"Header")},"./src/screens/tinygrail/overview/header/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("./src/components/index.ts")),o=s("./src/utils/decorators/index.ts"),i=r(s("./src/screens/tinygrail/_/icon-go/index.tsx")),r=s("./src/screens/tinygrail/overview/header/ds.ts"),l=s("./node_modules/react/jsx-runtime.js");t.default=(0,o.obc)(function(e,t){var s=t.$;return(0,l.jsx)(n.Header,{title:"热门榜单",hm:["tinygrail/overview","TinygrailOverview"],statusBarEvents:!1,statusBarEventsType:"Tinygrail",headerRight:function(){return(0,l.jsx)(i.default,{$:s})}})},r.COMPONENT);try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/overview/header/index.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"src/screens/tinygrail/overview/header/index.tsx#header"})}catch(e){}},"./src/screens/tinygrail/overview/hooks.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.useTinygrailOverviewPage=function(e){var t=e.$;(0,r.useRunAfter)(function(){t.init()})};var r=s("./src/utils/hooks/index.ts")},"./src/screens/tinygrail/overview/index.tsx":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js");var r=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/react/index.js")),s("./src/components/index.ts")),o=s("./src/stores/index.ts"),i=s("./src/utils/decorators/index.ts"),l=s("./src/utils/hooks/index.ts"),a=r(s("./src/screens/tinygrail/overview/component/tabs/index.tsx")),d=r(s("./src/screens/tinygrail/overview/header/index.tsx")),c=s("./src/screens/tinygrail/overview/hooks.ts"),r=r(s("./src/screens/tinygrail/overview/store.ts")),u=s("./node_modules/react/jsx-runtime.js");t.default=(0,i.ic)(r.default,function(e,t){(0,c.useTinygrailOverviewPage)(t);var s=t.$;return(0,l.useObserver)(function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.default,{}),(0,u.jsx)(n.Page,{style:o._.container.tinygrail,loadingColor:o._.colorTinygrailText,loaded:s.state._loaded,children:(0,u.jsx)(a.default,{})})]})})});try{overview.displayName="overview",overview.__docgenInfo={description:"",displayName:"overview",props:{navigation:{defaultValue:null,description:"",name:"navigation",required:!0,type:{name:"Navigation"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"{ params?: any; name?: any; }"}},onMounted:{defaultValue:null,description:"Storybook",name:"onMounted",required:!1,type:{name:"Fn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/tinygrail/overview/index.tsx#overview"]={docgenInfo:overview.__docgenInfo,name:"overview",path:"src/screens/tinygrail/overview/index.tsx#overview"})}catch(e){}},"./src/screens/tinygrail/overview/store.ts":(e,t,s)=>{var o=s("./node_modules/@babel/runtime/regenerator/index.js"),r=(s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.reflect.construct.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.for-each.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"))),l=r(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),n=r(s("./node_modules/@babel/runtime/helpers/createClass.js")),a=r(s("./node_modules/@babel/runtime/helpers/assertThisInitialized.js")),d=r(s("./node_modules/@babel/runtime/helpers/inherits.js")),c=r(s("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),u=r(s("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),m=r(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=r(s("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),y=s("./node_modules/mobx/dist/mobx.esm.js"),f=s("./src/stores/index.ts"),_=s("./src/utils/index.ts"),x=s("./src/utils/fetch/index.ts"),r=r(s("./src/utils/store/index.ts")),g=s("./src/screens/tinygrail/_/utils.ts"),j=s("./src/screens/tinygrail/overview/ds.ts");function h(s){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(s);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}var b;t.default=(s=r.default,(0,d.default)(v,s),b=h(v),(0,n.default)(v,[{key:"currentKey",get:function(){var e=this.state.page;return j.TABS[e].key}},{key:"levelMap",get:function(){var e=this.list(this.currentKey).list,t={};return e.forEach(function(e){return t[e.level]?t[e.level]+=1:t[e.level]=1}),t}},{key:"list",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:j.TABS[0].key;return(0,y.computed)(function(){return"refine/temple"===e?f.tinygrailStore.refine_temple:f.tinygrailStore.list(e)}).get()}},{key:"computedList",value:function(s){var r=this;return(0,y.computed)(function(){var e,t=r.list(s);return"refine/temple"!==s&&t._loaded?(e=t,r.state.level&&(e=Object.assign({},e,{list:(0,g.levelList)(r.state.level,e.list)})),r.state.sort?Object.assign({},e,{list:(0,g.sortList)(r.state.sort,r.state.direction,e.list)}):e):t}).get()}}]),(0,p.default)((t=v).prototype,"currentKey",[y.computed],Object.getOwnPropertyDescriptor(t.prototype,"currentKey"),t.prototype),(0,p.default)(t.prototype,"levelMap",[y.computed],Object.getOwnPropertyDescriptor(t.prototype,"levelMap"),t.prototype),t);function v(){var n;(0,l.default)(this,v);for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n=b.call.apply(b,[this].concat(t)),(0,m.default)((0,a.default)(n),"state",(0,y.observable)(j.STATE)),(0,m.default)((0,a.default)(n),"init",(0,i.default)(o.mark(function e(){var t,s,r;return o.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state._loaded,s=(0,_.getTimestamp)(),r=!t||60<s-Number(t),e.t0=n,e.t1=Object,e.t2={},e.next=8,n.getStorage(j.NAMESPACE);case 8:return e.t3=e.sent,e.t4={_loaded:r?s:t},e.t5=e.t1.assign.call(e.t1,e.t2,e.t3,e.t4),e.t0.setState.call(e.t0,e.t5),r&&n.fetchList(n.currentKey),e.abrupt("return",!0);case 14:case"end":return e.stop()}},e)}))),(0,m.default)((0,a.default)(n),"fetchList",function(e){return"refine/temple"===(e=e||n.currentKey)?f.tinygrailStore.fetchRefineTemple():f.tinygrailStore.fetchList(e)}),(0,m.default)((0,a.default)(n),"onChange",function(e){e===n.state.page||((0,x.t)("热门榜单.标签页切换",{page:e}),n.setState({page:e}),n.setStorage(j.NAMESPACE),e=j.TABS[e].key,n.list(e)._loaded)||n.fetchList(e)}),(0,m.default)((0,a.default)(n),"onSelectGo",function(e){(0,x.t)("热门榜单.设置前往",{title:e}),n.setState({go:e}),n.setStorage(j.NAMESPACE)}),(0,m.default)((0,a.default)(n),"onLevelSelect",function(e){(0,x.t)("热门榜单.筛选",{level:e}),n.setState({level:e}),n.setStorage(j.NAMESPACE)}),(0,m.default)((0,a.default)(n),"onSortPress",function(e){var t,s=n.state,r=s.sort,s=s.direction;e===r?(r=e,(t="down")===s?t="up":"up"===s&&(t=r=""),(0,x.t)("热门榜单.排序",{sort:r,direction:t}),n.setState({sort:r,direction:t})):((0,x.t)("热门榜单.排序",{sort:e,direction:"down"}),n.setState({sort:e,direction:"down"})),n.setStorage(j.NAMESPACE)}),n}},"./src/screens/tinygrail/styles.ts":(e,t,s)=>{s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"__esModule",{value:!0}),t.withHeaderParams=t.refreshControlProps=void 0;var r=s("./src/stores/index.ts");t.withHeaderParams=function(){return{headerStyle:{backgroundColor:r._.colorTinygrailContainer,borderBottomColor:r._.colorTinygrailContainer},headerTitleStyle:{color:r._.colorTinygrailPlain},iconBackColor:r._.colorTinygrailPlain,statusBarEvents:!1}},t.refreshControlProps={titleColor:r._.colorTinygrailText,tintColor:r._.colorTinygrailText}}}]);